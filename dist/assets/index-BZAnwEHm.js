function AG(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Gy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function qee(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var US={exports:{}},fd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pF;function Hee(){if(pF)return fd;pF=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var o in i)o!=="key"&&(s[o]=i[o])}else s=i;return i=s.ref,{$$typeof:t,type:r,key:a,ref:i!==void 0?i:null,props:s}}return fd.Fragment=e,fd.jsx=n,fd.jsxs=n,fd}var mF;function Kee(){return mF||(mF=1,US.exports=Hee()),US.exports}var Z=Kee(),WS={exports:{}},it={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gF;function Xee(){if(gF)return it;gF=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;function p(L){return L===null||typeof L!="object"?null:(L=d&&L[d]||L["@@iterator"],typeof L=="function"?L:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,x={};function b(L,G,H){this.props=L,this.context=G,this.refs=x,this.updater=H||g}b.prototype.isReactComponent={},b.prototype.setState=function(L,G){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,G,"setState")},b.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function w(){}w.prototype=b.prototype;function S(L,G,H){this.props=L,this.context=G,this.refs=x,this.updater=H||g}var T=S.prototype=new w;T.constructor=S,y(T,b.prototype),T.isPureReactComponent=!0;var k=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},E=Object.prototype.hasOwnProperty;function I(L,G,H,K,oe,pe){return H=pe.ref,{$$typeof:t,type:L,key:G,ref:H!==void 0?H:null,props:pe}}function N(L,G){return I(L.type,G,void 0,void 0,void 0,L.props)}function _(L){return typeof L=="object"&&L!==null&&L.$$typeof===t}function R(L){var G={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(H){return G[H]})}var O=/\/+/g;function F(L,G){return typeof L=="object"&&L!==null&&L.key!=null?R(""+L.key):G.toString(36)}function z(){}function W(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(z,z):(L.status="pending",L.then(function(G){L.status==="pending"&&(L.status="fulfilled",L.value=G)},function(G){L.status==="pending"&&(L.status="rejected",L.reason=G)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function P(L,G,H,K,oe){var pe=typeof L;(pe==="undefined"||pe==="boolean")&&(L=null);var be=!1;if(L===null)be=!0;else switch(pe){case"bigint":case"string":case"number":be=!0;break;case"object":switch(L.$$typeof){case t:case e:be=!0;break;case f:return be=L._init,P(be(L._payload),G,H,K,oe)}}if(be)return oe=oe(L),be=K===""?"."+F(L,0):K,k(oe)?(H="",be!=null&&(H=be.replace(O,"$&/")+"/"),P(oe,G,H,"",function(ge){return ge})):oe!=null&&(_(oe)&&(oe=N(oe,H+(oe.key==null||L&&L.key===oe.key?"":(""+oe.key).replace(O,"$&/")+"/")+be)),G.push(oe)),1;be=0;var Ae=K===""?".":K+":";if(k(L))for(var $e=0;$e<L.length;$e++)K=L[$e],pe=Ae+F(K,$e),be+=P(K,G,H,pe,oe);else if($e=p(L),typeof $e=="function")for(L=$e.call(L),$e=0;!(K=L.next()).done;)K=K.value,pe=Ae+F(K,$e++),be+=P(K,G,H,pe,oe);else if(pe==="object"){if(typeof L.then=="function")return P(W(L),G,H,K,oe);throw G=String(L),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return be}function M(L,G,H){if(L==null)return L;var K=[],oe=0;return P(L,K,"","",function(pe){return G.call(H,pe,oe++)}),K}function j(L){if(L._status===-1){var G=L._result;G=G(),G.then(function(H){(L._status===0||L._status===-1)&&(L._status=1,L._result=H)},function(H){(L._status===0||L._status===-1)&&(L._status=2,L._result=H)}),L._status===-1&&(L._status=0,L._result=G)}if(L._status===1)return L._result.default;throw L._result}var V=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function q(){}return it.Children={map:M,forEach:function(L,G,H){M(L,function(){G.apply(this,arguments)},H)},count:function(L){var G=0;return M(L,function(){G++}),G},toArray:function(L){return M(L,function(G){return G})||[]},only:function(L){if(!_(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},it.Component=b,it.Fragment=n,it.Profiler=i,it.PureComponent=S,it.StrictMode=r,it.Suspense=l,it.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,it.__COMPILER_RUNTIME={__proto__:null,c:function(L){return A.H.useMemoCache(L)}},it.cache=function(L){return function(){return L.apply(null,arguments)}},it.cloneElement=function(L,G,H){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var K=y({},L.props),oe=L.key,pe=void 0;if(G!=null)for(be in G.ref!==void 0&&(pe=void 0),G.key!==void 0&&(oe=""+G.key),G)!E.call(G,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&G.ref===void 0||(K[be]=G[be]);var be=arguments.length-2;if(be===1)K.children=H;else if(1<be){for(var Ae=Array(be),$e=0;$e<be;$e++)Ae[$e]=arguments[$e+2];K.children=Ae}return I(L.type,oe,void 0,void 0,pe,K)},it.createContext=function(L){return L={$$typeof:a,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:s,_context:L},L},it.createElement=function(L,G,H){var K,oe={},pe=null;if(G!=null)for(K in G.key!==void 0&&(pe=""+G.key),G)E.call(G,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(oe[K]=G[K]);var be=arguments.length-2;if(be===1)oe.children=H;else if(1<be){for(var Ae=Array(be),$e=0;$e<be;$e++)Ae[$e]=arguments[$e+2];oe.children=Ae}if(L&&L.defaultProps)for(K in be=L.defaultProps,be)oe[K]===void 0&&(oe[K]=be[K]);return I(L,pe,void 0,void 0,null,oe)},it.createRef=function(){return{current:null}},it.forwardRef=function(L){return{$$typeof:o,render:L}},it.isValidElement=_,it.lazy=function(L){return{$$typeof:f,_payload:{_status:-1,_result:L},_init:j}},it.memo=function(L,G){return{$$typeof:c,type:L,compare:G===void 0?null:G}},it.startTransition=function(L){var G=A.T,H={};A.T=H;try{var K=L(),oe=A.S;oe!==null&&oe(H,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(q,V)}catch(pe){V(pe)}finally{A.T=G}},it.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},it.use=function(L){return A.H.use(L)},it.useActionState=function(L,G,H){return A.H.useActionState(L,G,H)},it.useCallback=function(L,G){return A.H.useCallback(L,G)},it.useContext=function(L){return A.H.useContext(L)},it.useDebugValue=function(){},it.useDeferredValue=function(L,G){return A.H.useDeferredValue(L,G)},it.useEffect=function(L,G,H){var K=A.H;if(typeof H=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(L,G)},it.useId=function(){return A.H.useId()},it.useImperativeHandle=function(L,G,H){return A.H.useImperativeHandle(L,G,H)},it.useInsertionEffect=function(L,G){return A.H.useInsertionEffect(L,G)},it.useLayoutEffect=function(L,G){return A.H.useLayoutEffect(L,G)},it.useMemo=function(L,G){return A.H.useMemo(L,G)},it.useOptimistic=function(L,G){return A.H.useOptimistic(L,G)},it.useReducer=function(L,G,H){return A.H.useReducer(L,G,H)},it.useRef=function(L){return A.H.useRef(L)},it.useState=function(L){return A.H.useState(L)},it.useSyncExternalStore=function(L,G,H){return A.H.useSyncExternalStore(L,G,H)},it.useTransition=function(){return A.H.useTransition()},it.version="19.1.0",it}var yF;function JE(){return yF||(yF=1,WS.exports=Xee()),WS.exports}var Q=JE();const J=Vt(Q),kG=AG({__proto__:null,default:J},[Q]);var GS={exports:{}},hd={},qS={exports:{}},HS={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vF;function Yee(){return vF||(vF=1,function(t){function e(M,j){var V=M.length;M.push(j);e:for(;0<V;){var q=V-1>>>1,L=M[q];if(0<i(L,j))M[q]=j,M[V]=L,V=q;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var j=M[0],V=M.pop();if(V!==j){M[0]=V;e:for(var q=0,L=M.length,G=L>>>1;q<G;){var H=2*(q+1)-1,K=M[H],oe=H+1,pe=M[oe];if(0>i(K,V))oe<L&&0>i(pe,K)?(M[q]=pe,M[oe]=V,q=oe):(M[q]=K,M[H]=V,q=H);else if(oe<L&&0>i(pe,V))M[q]=pe,M[oe]=V,q=oe;else break e}}return j}function i(M,j){var V=M.sortIndex-j.sortIndex;return V!==0?V:M.id-j.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],f=1,d=null,p=3,g=!1,y=!1,x=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function k(M){for(var j=n(c);j!==null;){if(j.callback===null)r(c);else if(j.startTime<=M)r(c),j.sortIndex=j.expirationTime,e(l,j);else break;j=n(c)}}function A(M){if(x=!1,k(M),!y)if(n(l)!==null)y=!0,E||(E=!0,F());else{var j=n(c);j!==null&&P(A,j.startTime-M)}}var E=!1,I=-1,N=5,_=-1;function R(){return b?!0:!(t.unstable_now()-_<N)}function O(){if(b=!1,E){var M=t.unstable_now();_=M;var j=!0;try{e:{y=!1,x&&(x=!1,S(I),I=-1),g=!0;var V=p;try{t:{for(k(M),d=n(l);d!==null&&!(d.expirationTime>M&&R());){var q=d.callback;if(typeof q=="function"){d.callback=null,p=d.priorityLevel;var L=q(d.expirationTime<=M);if(M=t.unstable_now(),typeof L=="function"){d.callback=L,k(M),j=!0;break t}d===n(l)&&r(l),k(M)}else r(l);d=n(l)}if(d!==null)j=!0;else{var G=n(c);G!==null&&P(A,G.startTime-M),j=!1}}break e}finally{d=null,p=V,g=!1}j=void 0}}finally{j?F():E=!1}}}var F;if(typeof T=="function")F=function(){T(O)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,W=z.port2;z.port1.onmessage=O,F=function(){W.postMessage(null)}}else F=function(){w(O,0)};function P(M,j){I=w(function(){M(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(M){switch(p){case 1:case 2:case 3:var j=3;break;default:j=p}var V=p;p=j;try{return M()}finally{p=V}},t.unstable_requestPaint=function(){b=!0},t.unstable_runWithPriority=function(M,j){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var V=p;p=M;try{return j()}finally{p=V}},t.unstable_scheduleCallback=function(M,j,V){var q=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?q+V:q):V=q,M){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=V+L,M={id:f++,callback:j,priorityLevel:M,startTime:V,expirationTime:L,sortIndex:-1},V>q?(M.sortIndex=V,e(c,M),n(l)===null&&M===n(c)&&(x?(S(I),I=-1):x=!0,P(A,V-q))):(M.sortIndex=L,e(l,M),y||g||(y=!0,E||(E=!0,F()))),M},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(M){var j=p;return function(){var V=p;p=j;try{return M.apply(this,arguments)}finally{p=V}}}}(HS)),HS}var bF;function Zee(){return bF||(bF=1,qS.exports=Yee()),qS.exports}var KS={exports:{}},Tr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xF;function Qee(){if(xF)return Tr;xF=1;var t=JE();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(l,c,f){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:d==null?null:""+d,children:l,containerInfo:c,implementation:f}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Tr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Tr.createPortal=function(l,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return s(l,c,null,f)},Tr.flushSync=function(l){var c=a.T,f=r.p;try{if(a.T=null,r.p=2,l)return l()}finally{a.T=c,r.p=f,r.d.f()}},Tr.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},Tr.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},Tr.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var f=c.as,d=o(f,c.crossOrigin),p=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;f==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:d,integrity:p,fetchPriority:g}):f==="script"&&r.d.X(l,{crossOrigin:d,integrity:p,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Tr.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var f=o(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},Tr.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var f=c.as,d=o(f,c.crossOrigin);r.d.L(l,f,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Tr.preloadModule=function(l,c){if(typeof l=="string")if(c){var f=o(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},Tr.requestFormReset=function(l){r.d.r(l)},Tr.unstable_batchedUpdates=function(l,c){return l(c)},Tr.useFormState=function(l,c,f){return a.H.useFormState(l,c,f)},Tr.useFormStatus=function(){return a.H.useHostTransitionStatus()},Tr.version="19.1.0",Tr}var wF;function $G(){if(wF)return KS.exports;wF=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),KS.exports=Qee(),KS.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SF;function Jee(){if(SF)return hd;SF=1;var t=Zee(),e=JE(),n=$G();function r(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function s(u){var h=u,m=u;if(u.alternate)for(;h.return;)h=h.return;else{u=h;do h=u,(h.flags&4098)!==0&&(m=h.return),u=h.return;while(u)}return h.tag===3?m:null}function a(u){if(u.tag===13){var h=u.memoizedState;if(h===null&&(u=u.alternate,u!==null&&(h=u.memoizedState)),h!==null)return h.dehydrated}return null}function o(u){if(s(u)!==u)throw Error(r(188))}function l(u){var h=u.alternate;if(!h){if(h=s(u),h===null)throw Error(r(188));return h!==u?null:u}for(var m=u,v=h;;){var C=m.return;if(C===null)break;var $=C.alternate;if($===null){if(v=C.return,v!==null){m=v;continue}break}if(C.child===$.child){for($=C.child;$;){if($===m)return o(C),u;if($===v)return o(C),h;$=$.sibling}throw Error(r(188))}if(m.return!==v.return)m=C,v=$;else{for(var D=!1,B=C.child;B;){if(B===m){D=!0,m=C,v=$;break}if(B===v){D=!0,v=C,m=$;break}B=B.sibling}if(!D){for(B=$.child;B;){if(B===m){D=!0,m=$,v=C;break}if(B===v){D=!0,v=$,m=C;break}B=B.sibling}if(!D)throw Error(r(189))}}if(m.alternate!==v)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?u:h}function c(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u;for(u=u.child;u!==null;){if(h=c(u),h!==null)return h;u=u.sibling}return null}var f=Object.assign,d=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),T=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function F(u){return u===null||typeof u!="object"?null:(u=O&&u[O]||u["@@iterator"],typeof u=="function"?u:null)}var z=Symbol.for("react.client.reference");function W(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===z?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case y:return"Fragment";case b:return"Profiler";case x:return"StrictMode";case A:return"Suspense";case E:return"SuspenseList";case _:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case g:return"Portal";case T:return(u.displayName||"Context")+".Provider";case S:return(u._context.displayName||"Context")+".Consumer";case k:var h=u.render;return u=u.displayName,u||(u=h.displayName||h.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case I:return h=u.displayName||null,h!==null?h:W(u.type)||"Memo";case N:h=u._payload,u=u._init;try{return W(u(h))}catch{}}return null}var P=Array.isArray,M=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},q=[],L=-1;function G(u){return{current:u}}function H(u){0>L||(u.current=q[L],q[L]=null,L--)}function K(u,h){L++,q[L]=u.current,u.current=h}var oe=G(null),pe=G(null),be=G(null),Ae=G(null);function $e(u,h){switch(K(be,h),K(pe,u),K(oe,null),h.nodeType){case 9:case 11:u=(u=h.documentElement)&&(u=u.namespaceURI)?VP(u):0;break;default:if(u=h.tagName,h=h.namespaceURI)h=VP(h),u=UP(h,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}H(oe),K(oe,u)}function ge(){H(oe),H(pe),H(be)}function Ee(u){u.memoizedState!==null&&K(Ae,u);var h=oe.current,m=UP(h,u.type);h!==m&&(K(pe,u),K(oe,m))}function Ie(u){pe.current===u&&(H(oe),H(pe)),Ae.current===u&&(H(Ae),ad._currentValue=V)}var ye=Object.prototype.hasOwnProperty,Ge=t.unstable_scheduleCallback,ze=t.unstable_cancelCallback,Je=t.unstable_shouldYield,qe=t.unstable_requestPaint,Xe=t.unstable_now,gt=t.unstable_getCurrentPriorityLevel,Bn=t.unstable_ImmediatePriority,Kt=t.unstable_UserBlockingPriority,Sn=t.unstable_NormalPriority,an=t.unstable_LowPriority,Kr=t.unstable_IdlePriority,wr=t.log,Xr=t.unstable_setDisableYieldValue,Yr=null,fn=null;function lr(u){if(typeof wr=="function"&&Xr(u),fn&&typeof fn.setStrictMode=="function")try{fn.setStrictMode(Yr,u)}catch{}}var zn=Math.clz32?Math.clz32:O1,dh=Math.log,ph=Math.LN2;function O1(u){return u>>>=0,u===0?32:31-(dh(u)/ph|0)|0}var oa=256,jc=4194304;function la(u){var h=u&42;if(h!==0)return h;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function Dg(u,h,m){var v=u.pendingLanes;if(v===0)return 0;var C=0,$=u.suspendedLanes,D=u.pingedLanes;u=u.warmLanes;var B=v&134217727;return B!==0?(v=B&~$,v!==0?C=la(v):(D&=B,D!==0?C=la(D):m||(m=B&~u,m!==0&&(C=la(m))))):(B=v&~$,B!==0?C=la(B):D!==0?C=la(D):m||(m=v&~u,m!==0&&(C=la(m)))),C===0?0:h!==0&&h!==C&&(h&$)===0&&($=C&-C,m=h&-h,$>=m||$===32&&(m&4194048)!==0)?h:C}function mh(u,h){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&h)===0}function RQ(u,h){switch(u){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AR(){var u=oa;return oa<<=1,(oa&4194048)===0&&(oa=256),u}function kR(){var u=jc;return jc<<=1,(jc&62914560)===0&&(jc=4194304),u}function _1(u){for(var h=[],m=0;31>m;m++)h.push(u);return h}function gh(u,h){u.pendingLanes|=h,h!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function DQ(u,h,m,v,C,$){var D=u.pendingLanes;u.pendingLanes=m,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=m,u.entangledLanes&=m,u.errorRecoveryDisabledLanes&=m,u.shellSuspendCounter=0;var B=u.entanglements,Y=u.expirationTimes,ue=u.hiddenUpdates;for(m=D&~m;0<m;){var we=31-zn(m),Ce=1<<we;B[we]=0,Y[we]=-1;var he=ue[we];if(he!==null)for(ue[we]=null,we=0;we<he.length;we++){var de=he[we];de!==null&&(de.lane&=-536870913)}m&=~Ce}v!==0&&$R(u,v,0),$!==0&&C===0&&u.tag!==0&&(u.suspendedLanes|=$&~(D&~h))}function $R(u,h,m){u.pendingLanes|=h,u.suspendedLanes&=~h;var v=31-zn(h);u.entangledLanes|=h,u.entanglements[v]=u.entanglements[v]|1073741824|m&4194090}function ER(u,h){var m=u.entangledLanes|=h;for(u=u.entanglements;m;){var v=31-zn(m),C=1<<v;C&h|u[v]&h&&(u[v]|=h),m&=~C}}function R1(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function D1(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function IR(){var u=j.p;return u!==0?u:(u=window.event,u===void 0?32:lF(u.type))}function MQ(u,h){var m=j.p;try{return j.p=u,h()}finally{j.p=m}}var so=Math.random().toString(36).slice(2),Sr="__reactFiber$"+so,Zr="__reactProps$"+so,Vc="__reactContainer$"+so,M1="__reactEvents$"+so,PQ="__reactListeners$"+so,FQ="__reactHandles$"+so,NR="__reactResources$"+so,yh="__reactMarker$"+so;function P1(u){delete u[Sr],delete u[Zr],delete u[M1],delete u[PQ],delete u[FQ]}function Uc(u){var h=u[Sr];if(h)return h;for(var m=u.parentNode;m;){if(h=m[Vc]||m[Sr]){if(m=h.alternate,h.child!==null||m!==null&&m.child!==null)for(u=HP(u);u!==null;){if(m=u[Sr])return m;u=HP(u)}return h}u=m,m=u.parentNode}return null}function Wc(u){if(u=u[Sr]||u[Vc]){var h=u.tag;if(h===5||h===6||h===13||h===26||h===27||h===3)return u}return null}function vh(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u.stateNode;throw Error(r(33))}function Gc(u){var h=u[NR];return h||(h=u[NR]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function Zn(u){u[yh]=!0}var OR=new Set,_R={};function yl(u,h){qc(u,h),qc(u+"Capture",h)}function qc(u,h){for(_R[u]=h,u=0;u<h.length;u++)OR.add(h[u])}var LQ=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),RR={},DR={};function BQ(u){return ye.call(DR,u)?!0:ye.call(RR,u)?!1:LQ.test(u)?DR[u]=!0:(RR[u]=!0,!1)}function Mg(u,h,m){if(BQ(h))if(m===null)u.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":u.removeAttribute(h);return;case"boolean":var v=h.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){u.removeAttribute(h);return}}u.setAttribute(h,""+m)}}function Pg(u,h,m){if(m===null)u.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(h);return}u.setAttribute(h,""+m)}}function ca(u,h,m,v){if(v===null)u.removeAttribute(m);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(m);return}u.setAttributeNS(h,m,""+v)}}var F1,MR;function Hc(u){if(F1===void 0)try{throw Error()}catch(m){var h=m.stack.trim().match(/\n( *(at )?)/);F1=h&&h[1]||"",MR=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+F1+u+MR}var L1=!1;function B1(u,h){if(!u||L1)return"";L1=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(h){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(de){var he=de}Reflect.construct(u,[],Ce)}else{try{Ce.call()}catch(de){he=de}u.call(Ce.prototype)}}else{try{throw Error()}catch(de){he=de}(Ce=u())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(de){if(de&&he&&typeof de.stack=="string")return[de.stack,he.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var $=v.DetermineComponentFrameRoot(),D=$[0],B=$[1];if(D&&B){var Y=D.split(`
`),ue=B.split(`
`);for(C=v=0;v<Y.length&&!Y[v].includes("DetermineComponentFrameRoot");)v++;for(;C<ue.length&&!ue[C].includes("DetermineComponentFrameRoot");)C++;if(v===Y.length||C===ue.length)for(v=Y.length-1,C=ue.length-1;1<=v&&0<=C&&Y[v]!==ue[C];)C--;for(;1<=v&&0<=C;v--,C--)if(Y[v]!==ue[C]){if(v!==1||C!==1)do if(v--,C--,0>C||Y[v]!==ue[C]){var we=`
`+Y[v].replace(" at new "," at ");return u.displayName&&we.includes("<anonymous>")&&(we=we.replace("<anonymous>",u.displayName)),we}while(1<=v&&0<=C);break}}}finally{L1=!1,Error.prepareStackTrace=m}return(m=u?u.displayName||u.name:"")?Hc(m):""}function zQ(u){switch(u.tag){case 26:case 27:case 5:return Hc(u.type);case 16:return Hc("Lazy");case 13:return Hc("Suspense");case 19:return Hc("SuspenseList");case 0:case 15:return B1(u.type,!1);case 11:return B1(u.type.render,!1);case 1:return B1(u.type,!0);case 31:return Hc("Activity");default:return""}}function PR(u){try{var h="";do h+=zQ(u),u=u.return;while(u);return h}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function Ii(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function FR(u){var h=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function jQ(u){var h=FR(u)?"checked":"value",m=Object.getOwnPropertyDescriptor(u.constructor.prototype,h),v=""+u[h];if(!u.hasOwnProperty(h)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var C=m.get,$=m.set;return Object.defineProperty(u,h,{configurable:!0,get:function(){return C.call(this)},set:function(D){v=""+D,$.call(this,D)}}),Object.defineProperty(u,h,{enumerable:m.enumerable}),{getValue:function(){return v},setValue:function(D){v=""+D},stopTracking:function(){u._valueTracker=null,delete u[h]}}}}function Fg(u){u._valueTracker||(u._valueTracker=jQ(u))}function LR(u){if(!u)return!1;var h=u._valueTracker;if(!h)return!0;var m=h.getValue(),v="";return u&&(v=FR(u)?u.checked?"true":"false":u.value),u=v,u!==m?(h.setValue(u),!0):!1}function Lg(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var VQ=/[\n"\\]/g;function Ni(u){return u.replace(VQ,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function z1(u,h,m,v,C,$,D,B){u.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?u.type=D:u.removeAttribute("type"),h!=null?D==="number"?(h===0&&u.value===""||u.value!=h)&&(u.value=""+Ii(h)):u.value!==""+Ii(h)&&(u.value=""+Ii(h)):D!=="submit"&&D!=="reset"||u.removeAttribute("value"),h!=null?j1(u,D,Ii(h)):m!=null?j1(u,D,Ii(m)):v!=null&&u.removeAttribute("value"),C==null&&$!=null&&(u.defaultChecked=!!$),C!=null&&(u.checked=C&&typeof C!="function"&&typeof C!="symbol"),B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?u.name=""+Ii(B):u.removeAttribute("name")}function BR(u,h,m,v,C,$,D,B){if($!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"&&(u.type=$),h!=null||m!=null){if(!($!=="submit"&&$!=="reset"||h!=null))return;m=m!=null?""+Ii(m):"",h=h!=null?""+Ii(h):m,B||h===u.value||(u.value=h),u.defaultValue=h}v=v??C,v=typeof v!="function"&&typeof v!="symbol"&&!!v,u.checked=B?u.checked:!!v,u.defaultChecked=!!v,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(u.name=D)}function j1(u,h,m){h==="number"&&Lg(u.ownerDocument)===u||u.defaultValue===""+m||(u.defaultValue=""+m)}function Kc(u,h,m,v){if(u=u.options,h){h={};for(var C=0;C<m.length;C++)h["$"+m[C]]=!0;for(m=0;m<u.length;m++)C=h.hasOwnProperty("$"+u[m].value),u[m].selected!==C&&(u[m].selected=C),C&&v&&(u[m].defaultSelected=!0)}else{for(m=""+Ii(m),h=null,C=0;C<u.length;C++){if(u[C].value===m){u[C].selected=!0,v&&(u[C].defaultSelected=!0);return}h!==null||u[C].disabled||(h=u[C])}h!==null&&(h.selected=!0)}}function zR(u,h,m){if(h!=null&&(h=""+Ii(h),h!==u.value&&(u.value=h),m==null)){u.defaultValue!==h&&(u.defaultValue=h);return}u.defaultValue=m!=null?""+Ii(m):""}function jR(u,h,m,v){if(h==null){if(v!=null){if(m!=null)throw Error(r(92));if(P(v)){if(1<v.length)throw Error(r(93));v=v[0]}m=v}m==null&&(m=""),h=m}m=Ii(h),u.defaultValue=m,v=u.textContent,v===m&&v!==""&&v!==null&&(u.value=v)}function Xc(u,h){if(h){var m=u.firstChild;if(m&&m===u.lastChild&&m.nodeType===3){m.nodeValue=h;return}}u.textContent=h}var UQ=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function VR(u,h,m){var v=h.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?v?u.setProperty(h,""):h==="float"?u.cssFloat="":u[h]="":v?u.setProperty(h,m):typeof m!="number"||m===0||UQ.has(h)?h==="float"?u.cssFloat=m:u[h]=(""+m).trim():u[h]=m+"px"}function UR(u,h,m){if(h!=null&&typeof h!="object")throw Error(r(62));if(u=u.style,m!=null){for(var v in m)!m.hasOwnProperty(v)||h!=null&&h.hasOwnProperty(v)||(v.indexOf("--")===0?u.setProperty(v,""):v==="float"?u.cssFloat="":u[v]="");for(var C in h)v=h[C],h.hasOwnProperty(C)&&m[C]!==v&&VR(u,C,v)}else for(var $ in h)h.hasOwnProperty($)&&VR(u,$,h[$])}function V1(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var WQ=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),GQ=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bg(u){return GQ.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var U1=null;function W1(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var Yc=null,Zc=null;function WR(u){var h=Wc(u);if(h&&(u=h.stateNode)){var m=u[Zr]||null;e:switch(u=h.stateNode,h.type){case"input":if(z1(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),h=m.name,m.type==="radio"&&h!=null){for(m=u;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+Ni(""+h)+'"][type="radio"]'),h=0;h<m.length;h++){var v=m[h];if(v!==u&&v.form===u.form){var C=v[Zr]||null;if(!C)throw Error(r(90));z1(v,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(h=0;h<m.length;h++)v=m[h],v.form===u.form&&LR(v)}break e;case"textarea":zR(u,m.value,m.defaultValue);break e;case"select":h=m.value,h!=null&&Kc(u,!!m.multiple,h,!1)}}}var G1=!1;function GR(u,h,m){if(G1)return u(h,m);G1=!0;try{var v=u(h);return v}finally{if(G1=!1,(Yc!==null||Zc!==null)&&(Ty(),Yc&&(h=Yc,u=Zc,Zc=Yc=null,WR(h),u)))for(h=0;h<u.length;h++)WR(u[h])}}function bh(u,h){var m=u.stateNode;if(m===null)return null;var v=m[Zr]||null;if(v===null)return null;m=v[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(u=u.type,v=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!v;break e;default:u=!1}if(u)return null;if(m&&typeof m!="function")throw Error(r(231,h,typeof m));return m}var ua=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),q1=!1;if(ua)try{var xh={};Object.defineProperty(xh,"passive",{get:function(){q1=!0}}),window.addEventListener("test",xh,xh),window.removeEventListener("test",xh,xh)}catch{q1=!1}var ao=null,H1=null,zg=null;function qR(){if(zg)return zg;var u,h=H1,m=h.length,v,C="value"in ao?ao.value:ao.textContent,$=C.length;for(u=0;u<m&&h[u]===C[u];u++);var D=m-u;for(v=1;v<=D&&h[m-v]===C[$-v];v++);return zg=C.slice(u,1<v?1-v:void 0)}function jg(u){var h=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&h===13&&(u=13)):u=h,u===10&&(u=13),32<=u||u===13?u:0}function Vg(){return!0}function HR(){return!1}function Qr(u){function h(m,v,C,$,D){this._reactName=m,this._targetInst=C,this.type=v,this.nativeEvent=$,this.target=D,this.currentTarget=null;for(var B in u)u.hasOwnProperty(B)&&(m=u[B],this[B]=m?m($):$[B]);return this.isDefaultPrevented=($.defaultPrevented!=null?$.defaultPrevented:$.returnValue===!1)?Vg:HR,this.isPropagationStopped=HR,this}return f(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Vg)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Vg)},persist:function(){},isPersistent:Vg}),h}var vl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ug=Qr(vl),wh=f({},vl,{view:0,detail:0}),qQ=Qr(wh),K1,X1,Sh,Wg=f({},wh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Z1,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Sh&&(Sh&&u.type==="mousemove"?(K1=u.screenX-Sh.screenX,X1=u.screenY-Sh.screenY):X1=K1=0,Sh=u),K1)},movementY:function(u){return"movementY"in u?u.movementY:X1}}),KR=Qr(Wg),HQ=f({},Wg,{dataTransfer:0}),KQ=Qr(HQ),XQ=f({},wh,{relatedTarget:0}),Y1=Qr(XQ),YQ=f({},vl,{animationName:0,elapsedTime:0,pseudoElement:0}),ZQ=Qr(YQ),QQ=f({},vl,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),JQ=Qr(QQ),eJ=f({},vl,{data:0}),XR=Qr(eJ),tJ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nJ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rJ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iJ(u){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(u):(u=rJ[u])?!!h[u]:!1}function Z1(){return iJ}var sJ=f({},wh,{key:function(u){if(u.key){var h=tJ[u.key]||u.key;if(h!=="Unidentified")return h}return u.type==="keypress"?(u=jg(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?nJ[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Z1,charCode:function(u){return u.type==="keypress"?jg(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?jg(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),aJ=Qr(sJ),oJ=f({},Wg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),YR=Qr(oJ),lJ=f({},wh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Z1}),cJ=Qr(lJ),uJ=f({},vl,{propertyName:0,elapsedTime:0,pseudoElement:0}),fJ=Qr(uJ),hJ=f({},Wg,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),dJ=Qr(hJ),pJ=f({},vl,{newState:0,oldState:0}),mJ=Qr(pJ),gJ=[9,13,27,32],Q1=ua&&"CompositionEvent"in window,Ch=null;ua&&"documentMode"in document&&(Ch=document.documentMode);var yJ=ua&&"TextEvent"in window&&!Ch,ZR=ua&&(!Q1||Ch&&8<Ch&&11>=Ch),QR=" ",JR=!1;function eD(u,h){switch(u){case"keyup":return gJ.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tD(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Qc=!1;function vJ(u,h){switch(u){case"compositionend":return tD(h);case"keypress":return h.which!==32?null:(JR=!0,QR);case"textInput":return u=h.data,u===QR&&JR?null:u;default:return null}}function bJ(u,h){if(Qc)return u==="compositionend"||!Q1&&eD(u,h)?(u=qR(),zg=H1=ao=null,Qc=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return ZR&&h.locale!=="ko"?null:h.data;default:return null}}var xJ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nD(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h==="input"?!!xJ[u.type]:h==="textarea"}function rD(u,h,m,v){Yc?Zc?Zc.push(v):Zc=[v]:Yc=v,h=Ny(h,"onChange"),0<h.length&&(m=new Ug("onChange","change",null,m,v),u.push({event:m,listeners:h}))}var Th=null,Ah=null;function wJ(u){FP(u,0)}function Gg(u){var h=vh(u);if(LR(h))return u}function iD(u,h){if(u==="change")return h}var sD=!1;if(ua){var J1;if(ua){var ew="oninput"in document;if(!ew){var aD=document.createElement("div");aD.setAttribute("oninput","return;"),ew=typeof aD.oninput=="function"}J1=ew}else J1=!1;sD=J1&&(!document.documentMode||9<document.documentMode)}function oD(){Th&&(Th.detachEvent("onpropertychange",lD),Ah=Th=null)}function lD(u){if(u.propertyName==="value"&&Gg(Ah)){var h=[];rD(h,Ah,u,W1(u)),GR(wJ,h)}}function SJ(u,h,m){u==="focusin"?(oD(),Th=h,Ah=m,Th.attachEvent("onpropertychange",lD)):u==="focusout"&&oD()}function CJ(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return Gg(Ah)}function TJ(u,h){if(u==="click")return Gg(h)}function AJ(u,h){if(u==="input"||u==="change")return Gg(h)}function kJ(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var hi=typeof Object.is=="function"?Object.is:kJ;function kh(u,h){if(hi(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var m=Object.keys(u),v=Object.keys(h);if(m.length!==v.length)return!1;for(v=0;v<m.length;v++){var C=m[v];if(!ye.call(h,C)||!hi(u[C],h[C]))return!1}return!0}function cD(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function uD(u,h){var m=cD(u);u=0;for(var v;m;){if(m.nodeType===3){if(v=u+m.textContent.length,u<=h&&v>=h)return{node:m,offset:h-u};u=v}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=cD(m)}}function fD(u,h){return u&&h?u===h?!0:u&&u.nodeType===3?!1:h&&h.nodeType===3?fD(u,h.parentNode):"contains"in u?u.contains(h):u.compareDocumentPosition?!!(u.compareDocumentPosition(h)&16):!1:!1}function hD(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var h=Lg(u.document);h instanceof u.HTMLIFrameElement;){try{var m=typeof h.contentWindow.location.href=="string"}catch{m=!1}if(m)u=h.contentWindow;else break;h=Lg(u.document)}return h}function tw(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h&&(h==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||h==="textarea"||u.contentEditable==="true")}var $J=ua&&"documentMode"in document&&11>=document.documentMode,Jc=null,nw=null,$h=null,rw=!1;function dD(u,h,m){var v=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;rw||Jc==null||Jc!==Lg(v)||(v=Jc,"selectionStart"in v&&tw(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),$h&&kh($h,v)||($h=v,v=Ny(nw,"onSelect"),0<v.length&&(h=new Ug("onSelect","select",null,h,m),u.push({event:h,listeners:v}),h.target=Jc)))}function bl(u,h){var m={};return m[u.toLowerCase()]=h.toLowerCase(),m["Webkit"+u]="webkit"+h,m["Moz"+u]="moz"+h,m}var eu={animationend:bl("Animation","AnimationEnd"),animationiteration:bl("Animation","AnimationIteration"),animationstart:bl("Animation","AnimationStart"),transitionrun:bl("Transition","TransitionRun"),transitionstart:bl("Transition","TransitionStart"),transitioncancel:bl("Transition","TransitionCancel"),transitionend:bl("Transition","TransitionEnd")},iw={},pD={};ua&&(pD=document.createElement("div").style,"AnimationEvent"in window||(delete eu.animationend.animation,delete eu.animationiteration.animation,delete eu.animationstart.animation),"TransitionEvent"in window||delete eu.transitionend.transition);function xl(u){if(iw[u])return iw[u];if(!eu[u])return u;var h=eu[u],m;for(m in h)if(h.hasOwnProperty(m)&&m in pD)return iw[u]=h[m];return u}var mD=xl("animationend"),gD=xl("animationiteration"),yD=xl("animationstart"),EJ=xl("transitionrun"),IJ=xl("transitionstart"),NJ=xl("transitioncancel"),vD=xl("transitionend"),bD=new Map,sw="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sw.push("scrollEnd");function ss(u,h){bD.set(u,h),yl(h,[u])}var xD=new WeakMap;function Oi(u,h){if(typeof u=="object"&&u!==null){var m=xD.get(u);return m!==void 0?m:(h={value:u,source:h,stack:PR(h)},xD.set(u,h),h)}return{value:u,source:h,stack:PR(h)}}var _i=[],tu=0,aw=0;function qg(){for(var u=tu,h=aw=tu=0;h<u;){var m=_i[h];_i[h++]=null;var v=_i[h];_i[h++]=null;var C=_i[h];_i[h++]=null;var $=_i[h];if(_i[h++]=null,v!==null&&C!==null){var D=v.pending;D===null?C.next=C:(C.next=D.next,D.next=C),v.pending=C}$!==0&&wD(m,C,$)}}function Hg(u,h,m,v){_i[tu++]=u,_i[tu++]=h,_i[tu++]=m,_i[tu++]=v,aw|=v,u.lanes|=v,u=u.alternate,u!==null&&(u.lanes|=v)}function ow(u,h,m,v){return Hg(u,h,m,v),Kg(u)}function nu(u,h){return Hg(u,null,null,h),Kg(u)}function wD(u,h,m){u.lanes|=m;var v=u.alternate;v!==null&&(v.lanes|=m);for(var C=!1,$=u.return;$!==null;)$.childLanes|=m,v=$.alternate,v!==null&&(v.childLanes|=m),$.tag===22&&(u=$.stateNode,u===null||u._visibility&1||(C=!0)),u=$,$=$.return;return u.tag===3?($=u.stateNode,C&&h!==null&&(C=31-zn(m),u=$.hiddenUpdates,v=u[C],v===null?u[C]=[h]:v.push(h),h.lane=m|536870912),$):null}function Kg(u){if(50<Qh)throw Qh=0,dS=null,Error(r(185));for(var h=u.return;h!==null;)u=h,h=u.return;return u.tag===3?u.stateNode:null}var ru={};function OJ(u,h,m,v){this.tag=u,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function di(u,h,m,v){return new OJ(u,h,m,v)}function lw(u){return u=u.prototype,!(!u||!u.isReactComponent)}function fa(u,h){var m=u.alternate;return m===null?(m=di(u.tag,h,u.key,u.mode),m.elementType=u.elementType,m.type=u.type,m.stateNode=u.stateNode,m.alternate=u,u.alternate=m):(m.pendingProps=h,m.type=u.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=u.flags&65011712,m.childLanes=u.childLanes,m.lanes=u.lanes,m.child=u.child,m.memoizedProps=u.memoizedProps,m.memoizedState=u.memoizedState,m.updateQueue=u.updateQueue,h=u.dependencies,m.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},m.sibling=u.sibling,m.index=u.index,m.ref=u.ref,m.refCleanup=u.refCleanup,m}function SD(u,h){u.flags&=65011714;var m=u.alternate;return m===null?(u.childLanes=0,u.lanes=h,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=m.childLanes,u.lanes=m.lanes,u.child=m.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=m.memoizedProps,u.memoizedState=m.memoizedState,u.updateQueue=m.updateQueue,u.type=m.type,h=m.dependencies,u.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),u}function Xg(u,h,m,v,C,$){var D=0;if(v=u,typeof u=="function")lw(u)&&(D=1);else if(typeof u=="string")D=Ree(u,m,oe.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case _:return u=di(31,m,h,C),u.elementType=_,u.lanes=$,u;case y:return wl(m.children,C,$,h);case x:D=8,C|=24;break;case b:return u=di(12,m,h,C|2),u.elementType=b,u.lanes=$,u;case A:return u=di(13,m,h,C),u.elementType=A,u.lanes=$,u;case E:return u=di(19,m,h,C),u.elementType=E,u.lanes=$,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case w:case T:D=10;break e;case S:D=9;break e;case k:D=11;break e;case I:D=14;break e;case N:D=16,v=null;break e}D=29,m=Error(r(130,u===null?"null":typeof u,"")),v=null}return h=di(D,m,h,C),h.elementType=u,h.type=v,h.lanes=$,h}function wl(u,h,m,v){return u=di(7,u,v,h),u.lanes=m,u}function cw(u,h,m){return u=di(6,u,null,h),u.lanes=m,u}function uw(u,h,m){return h=di(4,u.children!==null?u.children:[],u.key,h),h.lanes=m,h.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},h}var iu=[],su=0,Yg=null,Zg=0,Ri=[],Di=0,Sl=null,ha=1,da="";function Cl(u,h){iu[su++]=Zg,iu[su++]=Yg,Yg=u,Zg=h}function CD(u,h,m){Ri[Di++]=ha,Ri[Di++]=da,Ri[Di++]=Sl,Sl=u;var v=ha;u=da;var C=32-zn(v)-1;v&=~(1<<C),m+=1;var $=32-zn(h)+C;if(30<$){var D=C-C%5;$=(v&(1<<D)-1).toString(32),v>>=D,C-=D,ha=1<<32-zn(h)+C|m<<C|v,da=$+u}else ha=1<<$|m<<C|v,da=u}function fw(u){u.return!==null&&(Cl(u,1),CD(u,1,0))}function hw(u){for(;u===Yg;)Yg=iu[--su],iu[su]=null,Zg=iu[--su],iu[su]=null;for(;u===Sl;)Sl=Ri[--Di],Ri[Di]=null,da=Ri[--Di],Ri[Di]=null,ha=Ri[--Di],Ri[Di]=null}var Fr=null,hn=null,It=!1,Tl=null,Is=!1,dw=Error(r(519));function Al(u){var h=Error(r(418,""));throw Nh(Oi(h,u)),dw}function TD(u){var h=u.stateNode,m=u.type,v=u.memoizedProps;switch(h[Sr]=u,h[Zr]=v,m){case"dialog":pt("cancel",h),pt("close",h);break;case"iframe":case"object":case"embed":pt("load",h);break;case"video":case"audio":for(m=0;m<ed.length;m++)pt(ed[m],h);break;case"source":pt("error",h);break;case"img":case"image":case"link":pt("error",h),pt("load",h);break;case"details":pt("toggle",h);break;case"input":pt("invalid",h),BR(h,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0),Fg(h);break;case"select":pt("invalid",h);break;case"textarea":pt("invalid",h),jR(h,v.value,v.defaultValue,v.children),Fg(h)}m=v.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||h.textContent===""+m||v.suppressHydrationWarning===!0||jP(h.textContent,m)?(v.popover!=null&&(pt("beforetoggle",h),pt("toggle",h)),v.onScroll!=null&&pt("scroll",h),v.onScrollEnd!=null&&pt("scrollend",h),v.onClick!=null&&(h.onclick=Oy),h=!0):h=!1,h||Al(u)}function AD(u){for(Fr=u.return;Fr;)switch(Fr.tag){case 5:case 13:Is=!1;return;case 27:case 3:Is=!0;return;default:Fr=Fr.return}}function Eh(u){if(u!==Fr)return!1;if(!It)return AD(u),It=!0,!1;var h=u.tag,m;if((m=h!==3&&h!==27)&&((m=h===5)&&(m=u.type,m=!(m!=="form"&&m!=="button")||IS(u.type,u.memoizedProps)),m=!m),m&&hn&&Al(u),AD(u),h===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));e:{for(u=u.nextSibling,h=0;u;){if(u.nodeType===8)if(m=u.data,m==="/$"){if(h===0){hn=os(u.nextSibling);break e}h--}else m!=="$"&&m!=="$!"&&m!=="$?"||h++;u=u.nextSibling}hn=null}}else h===27?(h=hn,Co(u.type)?(u=RS,RS=null,hn=u):hn=h):hn=Fr?os(u.stateNode.nextSibling):null;return!0}function Ih(){hn=Fr=null,It=!1}function kD(){var u=Tl;return u!==null&&(ti===null?ti=u:ti.push.apply(ti,u),Tl=null),u}function Nh(u){Tl===null?Tl=[u]:Tl.push(u)}var pw=G(null),kl=null,pa=null;function oo(u,h,m){K(pw,h._currentValue),h._currentValue=m}function ma(u){u._currentValue=pw.current,H(pw)}function mw(u,h,m){for(;u!==null;){var v=u.alternate;if((u.childLanes&h)!==h?(u.childLanes|=h,v!==null&&(v.childLanes|=h)):v!==null&&(v.childLanes&h)!==h&&(v.childLanes|=h),u===m)break;u=u.return}}function gw(u,h,m,v){var C=u.child;for(C!==null&&(C.return=u);C!==null;){var $=C.dependencies;if($!==null){var D=C.child;$=$.firstContext;e:for(;$!==null;){var B=$;$=C;for(var Y=0;Y<h.length;Y++)if(B.context===h[Y]){$.lanes|=m,B=$.alternate,B!==null&&(B.lanes|=m),mw($.return,m,u),v||(D=null);break e}$=B.next}}else if(C.tag===18){if(D=C.return,D===null)throw Error(r(341));D.lanes|=m,$=D.alternate,$!==null&&($.lanes|=m),mw(D,m,u),D=null}else D=C.child;if(D!==null)D.return=C;else for(D=C;D!==null;){if(D===u){D=null;break}if(C=D.sibling,C!==null){C.return=D.return,D=C;break}D=D.return}C=D}}function Oh(u,h,m,v){u=null;for(var C=h,$=!1;C!==null;){if(!$){if((C.flags&524288)!==0)$=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var D=C.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var B=C.type;hi(C.pendingProps.value,D.value)||(u!==null?u.push(B):u=[B])}}else if(C===Ae.current){if(D=C.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(u!==null?u.push(ad):u=[ad])}C=C.return}u!==null&&gw(h,u,m,v),h.flags|=262144}function Qg(u){for(u=u.firstContext;u!==null;){if(!hi(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function $l(u){kl=u,pa=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function Cr(u){return $D(kl,u)}function Jg(u,h){return kl===null&&$l(u),$D(u,h)}function $D(u,h){var m=h._currentValue;if(h={context:h,memoizedValue:m,next:null},pa===null){if(u===null)throw Error(r(308));pa=h,u.dependencies={lanes:0,firstContext:h},u.flags|=524288}else pa=pa.next=h;return m}var _J=typeof AbortController<"u"?AbortController:function(){var u=[],h=this.signal={aborted:!1,addEventListener:function(m,v){u.push(v)}};this.abort=function(){h.aborted=!0,u.forEach(function(m){return m()})}},RJ=t.unstable_scheduleCallback,DJ=t.unstable_NormalPriority,jn={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yw(){return{controller:new _J,data:new Map,refCount:0}}function _h(u){u.refCount--,u.refCount===0&&RJ(DJ,function(){u.controller.abort()})}var Rh=null,vw=0,au=0,ou=null;function MJ(u,h){if(Rh===null){var m=Rh=[];vw=0,au=xS(),ou={status:"pending",value:void 0,then:function(v){m.push(v)}}}return vw++,h.then(ED,ED),h}function ED(){if(--vw===0&&Rh!==null){ou!==null&&(ou.status="fulfilled");var u=Rh;Rh=null,au=0,ou=null;for(var h=0;h<u.length;h++)(0,u[h])()}}function PJ(u,h){var m=[],v={status:"pending",value:null,reason:null,then:function(C){m.push(C)}};return u.then(function(){v.status="fulfilled",v.value=h;for(var C=0;C<m.length;C++)(0,m[C])(h)},function(C){for(v.status="rejected",v.reason=C,C=0;C<m.length;C++)(0,m[C])(void 0)}),v}var ID=M.S;M.S=function(u,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&MJ(u,h),ID!==null&&ID(u,h)};var El=G(null);function bw(){var u=El.current;return u!==null?u:Xt.pooledCache}function ey(u,h){h===null?K(El,El.current):K(El,h.pool)}function ND(){var u=bw();return u===null?null:{parent:jn._currentValue,pool:u}}var Dh=Error(r(460)),OD=Error(r(474)),ty=Error(r(542)),xw={then:function(){}};function _D(u){return u=u.status,u==="fulfilled"||u==="rejected"}function ny(){}function RD(u,h,m){switch(m=u[m],m===void 0?u.push(h):m!==h&&(h.then(ny,ny),h=m),h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,MD(u),u;default:if(typeof h.status=="string")h.then(ny,ny);else{if(u=Xt,u!==null&&100<u.shellSuspendCounter)throw Error(r(482));u=h,u.status="pending",u.then(function(v){if(h.status==="pending"){var C=h;C.status="fulfilled",C.value=v}},function(v){if(h.status==="pending"){var C=h;C.status="rejected",C.reason=v}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,MD(u),u}throw Mh=h,Dh}}var Mh=null;function DD(){if(Mh===null)throw Error(r(459));var u=Mh;return Mh=null,u}function MD(u){if(u===Dh||u===ty)throw Error(r(483))}var lo=!1;function ww(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sw(u,h){u=u.updateQueue,h.updateQueue===u&&(h.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function co(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function uo(u,h,m){var v=u.updateQueue;if(v===null)return null;if(v=v.shared,(Dt&2)!==0){var C=v.pending;return C===null?h.next=h:(h.next=C.next,C.next=h),v.pending=h,h=Kg(u),wD(u,null,m),h}return Hg(u,v,h,m),Kg(u)}function Ph(u,h,m){if(h=h.updateQueue,h!==null&&(h=h.shared,(m&4194048)!==0)){var v=h.lanes;v&=u.pendingLanes,m|=v,h.lanes=m,ER(u,m)}}function Cw(u,h){var m=u.updateQueue,v=u.alternate;if(v!==null&&(v=v.updateQueue,m===v)){var C=null,$=null;if(m=m.firstBaseUpdate,m!==null){do{var D={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};$===null?C=$=D:$=$.next=D,m=m.next}while(m!==null);$===null?C=$=h:$=$.next=h}else C=$=h;m={baseState:v.baseState,firstBaseUpdate:C,lastBaseUpdate:$,shared:v.shared,callbacks:v.callbacks},u.updateQueue=m;return}u=m.lastBaseUpdate,u===null?m.firstBaseUpdate=h:u.next=h,m.lastBaseUpdate=h}var Tw=!1;function Fh(){if(Tw){var u=ou;if(u!==null)throw u}}function Lh(u,h,m,v){Tw=!1;var C=u.updateQueue;lo=!1;var $=C.firstBaseUpdate,D=C.lastBaseUpdate,B=C.shared.pending;if(B!==null){C.shared.pending=null;var Y=B,ue=Y.next;Y.next=null,D===null?$=ue:D.next=ue,D=Y;var we=u.alternate;we!==null&&(we=we.updateQueue,B=we.lastBaseUpdate,B!==D&&(B===null?we.firstBaseUpdate=ue:B.next=ue,we.lastBaseUpdate=Y))}if($!==null){var Ce=C.baseState;D=0,we=ue=Y=null,B=$;do{var he=B.lane&-536870913,de=he!==B.lane;if(de?(wt&he)===he:(v&he)===he){he!==0&&he===au&&(Tw=!0),we!==null&&(we=we.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});e:{var et=u,He=B;he=h;var Bt=m;switch(He.tag){case 1:if(et=He.payload,typeof et=="function"){Ce=et.call(Bt,Ce,he);break e}Ce=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=He.payload,he=typeof et=="function"?et.call(Bt,Ce,he):et,he==null)break e;Ce=f({},Ce,he);break e;case 2:lo=!0}}he=B.callback,he!==null&&(u.flags|=64,de&&(u.flags|=8192),de=C.callbacks,de===null?C.callbacks=[he]:de.push(he))}else de={lane:he,tag:B.tag,payload:B.payload,callback:B.callback,next:null},we===null?(ue=we=de,Y=Ce):we=we.next=de,D|=he;if(B=B.next,B===null){if(B=C.shared.pending,B===null)break;de=B,B=de.next,de.next=null,C.lastBaseUpdate=de,C.shared.pending=null}}while(!0);we===null&&(Y=Ce),C.baseState=Y,C.firstBaseUpdate=ue,C.lastBaseUpdate=we,$===null&&(C.shared.lanes=0),bo|=D,u.lanes=D,u.memoizedState=Ce}}function PD(u,h){if(typeof u!="function")throw Error(r(191,u));u.call(h)}function FD(u,h){var m=u.callbacks;if(m!==null)for(u.callbacks=null,u=0;u<m.length;u++)PD(m[u],h)}var lu=G(null),ry=G(0);function LD(u,h){u=Sa,K(ry,u),K(lu,h),Sa=u|h.baseLanes}function Aw(){K(ry,Sa),K(lu,lu.current)}function kw(){Sa=ry.current,H(lu),H(ry)}var fo=0,ct=null,Ft=null,En=null,iy=!1,cu=!1,Il=!1,sy=0,Bh=0,uu=null,FJ=0;function Cn(){throw Error(r(321))}function $w(u,h){if(h===null)return!1;for(var m=0;m<h.length&&m<u.length;m++)if(!hi(u[m],h[m]))return!1;return!0}function Ew(u,h,m,v,C,$){return fo=$,ct=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,M.H=u===null||u.memoizedState===null?wM:SM,Il=!1,$=m(v,C),Il=!1,cu&&($=zD(h,m,v,C)),BD(u),$}function BD(u){M.H=fy;var h=Ft!==null&&Ft.next!==null;if(fo=0,En=Ft=ct=null,iy=!1,Bh=0,uu=null,h)throw Error(r(300));u===null||Qn||(u=u.dependencies,u!==null&&Qg(u)&&(Qn=!0))}function zD(u,h,m,v){ct=u;var C=0;do{if(cu&&(uu=null),Bh=0,cu=!1,25<=C)throw Error(r(301));if(C+=1,En=Ft=null,u.updateQueue!=null){var $=u.updateQueue;$.lastEffect=null,$.events=null,$.stores=null,$.memoCache!=null&&($.memoCache.index=0)}M.H=WJ,$=h(m,v)}while(cu);return $}function LJ(){var u=M.H,h=u.useState()[0];return h=typeof h.then=="function"?zh(h):h,u=u.useState()[0],(Ft!==null?Ft.memoizedState:null)!==u&&(ct.flags|=1024),h}function Iw(){var u=sy!==0;return sy=0,u}function Nw(u,h,m){h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~m}function Ow(u){if(iy){for(u=u.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}iy=!1}fo=0,En=Ft=ct=null,cu=!1,Bh=sy=0,uu=null}function Jr(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?ct.memoizedState=En=u:En=En.next=u,En}function In(){if(Ft===null){var u=ct.alternate;u=u!==null?u.memoizedState:null}else u=Ft.next;var h=En===null?ct.memoizedState:En.next;if(h!==null)En=h,Ft=u;else{if(u===null)throw ct.alternate===null?Error(r(467)):Error(r(310));Ft=u,u={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},En===null?ct.memoizedState=En=u:En=En.next=u}return En}function _w(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zh(u){var h=Bh;return Bh+=1,uu===null&&(uu=[]),u=RD(uu,u,h),h=ct,(En===null?h.memoizedState:En.next)===null&&(h=h.alternate,M.H=h===null||h.memoizedState===null?wM:SM),u}function ay(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return zh(u);if(u.$$typeof===T)return Cr(u)}throw Error(r(438,String(u)))}function Rw(u){var h=null,m=ct.updateQueue;if(m!==null&&(h=m.memoCache),h==null){var v=ct.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(h={data:v.data.map(function(C){return C.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),m===null&&(m=_w(),ct.updateQueue=m),m.memoCache=h,m=h.data[h.index],m===void 0)for(m=h.data[h.index]=Array(u),v=0;v<u;v++)m[v]=R;return h.index++,m}function ga(u,h){return typeof h=="function"?h(u):h}function oy(u){var h=In();return Dw(h,Ft,u)}function Dw(u,h,m){var v=u.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=m;var C=u.baseQueue,$=v.pending;if($!==null){if(C!==null){var D=C.next;C.next=$.next,$.next=D}h.baseQueue=C=$,v.pending=null}if($=u.baseState,C===null)u.memoizedState=$;else{h=C.next;var B=D=null,Y=null,ue=h,we=!1;do{var Ce=ue.lane&-536870913;if(Ce!==ue.lane?(wt&Ce)===Ce:(fo&Ce)===Ce){var he=ue.revertLane;if(he===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),Ce===au&&(we=!0);else if((fo&he)===he){ue=ue.next,he===au&&(we=!0);continue}else Ce={lane:0,revertLane:ue.revertLane,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},Y===null?(B=Y=Ce,D=$):Y=Y.next=Ce,ct.lanes|=he,bo|=he;Ce=ue.action,Il&&m($,Ce),$=ue.hasEagerState?ue.eagerState:m($,Ce)}else he={lane:Ce,revertLane:ue.revertLane,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},Y===null?(B=Y=he,D=$):Y=Y.next=he,ct.lanes|=Ce,bo|=Ce;ue=ue.next}while(ue!==null&&ue!==h);if(Y===null?D=$:Y.next=B,!hi($,u.memoizedState)&&(Qn=!0,we&&(m=ou,m!==null)))throw m;u.memoizedState=$,u.baseState=D,u.baseQueue=Y,v.lastRenderedState=$}return C===null&&(v.lanes=0),[u.memoizedState,v.dispatch]}function Mw(u){var h=In(),m=h.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=u;var v=m.dispatch,C=m.pending,$=h.memoizedState;if(C!==null){m.pending=null;var D=C=C.next;do $=u($,D.action),D=D.next;while(D!==C);hi($,h.memoizedState)||(Qn=!0),h.memoizedState=$,h.baseQueue===null&&(h.baseState=$),m.lastRenderedState=$}return[$,v]}function jD(u,h,m){var v=ct,C=In(),$=It;if($){if(m===void 0)throw Error(r(407));m=m()}else m=h();var D=!hi((Ft||C).memoizedState,m);D&&(C.memoizedState=m,Qn=!0),C=C.queue;var B=WD.bind(null,v,C,u);if(jh(2048,8,B,[u]),C.getSnapshot!==h||D||En!==null&&En.memoizedState.tag&1){if(v.flags|=2048,fu(9,ly(),UD.bind(null,v,C,m,h),null),Xt===null)throw Error(r(349));$||(fo&124)!==0||VD(v,h,m)}return m}function VD(u,h,m){u.flags|=16384,u={getSnapshot:h,value:m},h=ct.updateQueue,h===null?(h=_w(),ct.updateQueue=h,h.stores=[u]):(m=h.stores,m===null?h.stores=[u]:m.push(u))}function UD(u,h,m,v){h.value=m,h.getSnapshot=v,GD(h)&&qD(u)}function WD(u,h,m){return m(function(){GD(h)&&qD(u)})}function GD(u){var h=u.getSnapshot;u=u.value;try{var m=h();return!hi(u,m)}catch{return!0}}function qD(u){var h=nu(u,2);h!==null&&vi(h,u,2)}function Pw(u){var h=Jr();if(typeof u=="function"){var m=u;if(u=m(),Il){lr(!0);try{m()}finally{lr(!1)}}}return h.memoizedState=h.baseState=u,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:u},h}function HD(u,h,m,v){return u.baseState=m,Dw(u,Ft,typeof v=="function"?v:ga)}function BJ(u,h,m,v,C){if(uy(u))throw Error(r(485));if(u=h.action,u!==null){var $={payload:C,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){$.listeners.push(D)}};M.T!==null?m(!0):$.isTransition=!1,v($),m=h.pending,m===null?($.next=h.pending=$,KD(h,$)):($.next=m.next,h.pending=m.next=$)}}function KD(u,h){var m=h.action,v=h.payload,C=u.state;if(h.isTransition){var $=M.T,D={};M.T=D;try{var B=m(C,v),Y=M.S;Y!==null&&Y(D,B),XD(u,h,B)}catch(ue){Fw(u,h,ue)}finally{M.T=$}}else try{$=m(C,v),XD(u,h,$)}catch(ue){Fw(u,h,ue)}}function XD(u,h,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(v){YD(u,h,v)},function(v){return Fw(u,h,v)}):YD(u,h,m)}function YD(u,h,m){h.status="fulfilled",h.value=m,ZD(h),u.state=m,h=u.pending,h!==null&&(m=h.next,m===h?u.pending=null:(m=m.next,h.next=m,KD(u,m)))}function Fw(u,h,m){var v=u.pending;if(u.pending=null,v!==null){v=v.next;do h.status="rejected",h.reason=m,ZD(h),h=h.next;while(h!==v)}u.action=null}function ZD(u){u=u.listeners;for(var h=0;h<u.length;h++)(0,u[h])()}function QD(u,h){return h}function JD(u,h){if(It){var m=Xt.formState;if(m!==null){e:{var v=ct;if(It){if(hn){t:{for(var C=hn,$=Is;C.nodeType!==8;){if(!$){C=null;break t}if(C=os(C.nextSibling),C===null){C=null;break t}}$=C.data,C=$==="F!"||$==="F"?C:null}if(C){hn=os(C.nextSibling),v=C.data==="F!";break e}}Al(v)}v=!1}v&&(h=m[0])}}return m=Jr(),m.memoizedState=m.baseState=h,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:QD,lastRenderedState:h},m.queue=v,m=vM.bind(null,ct,v),v.dispatch=m,v=Pw(!1),$=Vw.bind(null,ct,!1,v.queue),v=Jr(),C={state:h,dispatch:null,action:u,pending:null},v.queue=C,m=BJ.bind(null,ct,C,$,m),C.dispatch=m,v.memoizedState=u,[h,m,!1]}function eM(u){var h=In();return tM(h,Ft,u)}function tM(u,h,m){if(h=Dw(u,h,QD)[0],u=oy(ga)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var v=zh(h)}catch(D){throw D===Dh?ty:D}else v=h;h=In();var C=h.queue,$=C.dispatch;return m!==h.memoizedState&&(ct.flags|=2048,fu(9,ly(),zJ.bind(null,C,m),null)),[v,$,u]}function zJ(u,h){u.action=h}function nM(u){var h=In(),m=Ft;if(m!==null)return tM(h,m,u);In(),h=h.memoizedState,m=In();var v=m.queue.dispatch;return m.memoizedState=u,[h,v,!1]}function fu(u,h,m,v){return u={tag:u,create:m,deps:v,inst:h,next:null},h=ct.updateQueue,h===null&&(h=_w(),ct.updateQueue=h),m=h.lastEffect,m===null?h.lastEffect=u.next=u:(v=m.next,m.next=u,u.next=v,h.lastEffect=u),u}function ly(){return{destroy:void 0,resource:void 0}}function rM(){return In().memoizedState}function cy(u,h,m,v){var C=Jr();v=v===void 0?null:v,ct.flags|=u,C.memoizedState=fu(1|h,ly(),m,v)}function jh(u,h,m,v){var C=In();v=v===void 0?null:v;var $=C.memoizedState.inst;Ft!==null&&v!==null&&$w(v,Ft.memoizedState.deps)?C.memoizedState=fu(h,$,m,v):(ct.flags|=u,C.memoizedState=fu(1|h,$,m,v))}function iM(u,h){cy(8390656,8,u,h)}function sM(u,h){jh(2048,8,u,h)}function aM(u,h){return jh(4,2,u,h)}function oM(u,h){return jh(4,4,u,h)}function lM(u,h){if(typeof h=="function"){u=u();var m=h(u);return function(){typeof m=="function"?m():h(null)}}if(h!=null)return u=u(),h.current=u,function(){h.current=null}}function cM(u,h,m){m=m!=null?m.concat([u]):null,jh(4,4,lM.bind(null,h,u),m)}function Lw(){}function uM(u,h){var m=In();h=h===void 0?null:h;var v=m.memoizedState;return h!==null&&$w(h,v[1])?v[0]:(m.memoizedState=[u,h],u)}function fM(u,h){var m=In();h=h===void 0?null:h;var v=m.memoizedState;if(h!==null&&$w(h,v[1]))return v[0];if(v=u(),Il){lr(!0);try{u()}finally{lr(!1)}}return m.memoizedState=[v,h],v}function Bw(u,h,m){return m===void 0||(fo&1073741824)!==0?u.memoizedState=h:(u.memoizedState=m,u=pP(),ct.lanes|=u,bo|=u,m)}function hM(u,h,m,v){return hi(m,h)?m:lu.current!==null?(u=Bw(u,m,v),hi(u,h)||(Qn=!0),u):(fo&42)===0?(Qn=!0,u.memoizedState=m):(u=pP(),ct.lanes|=u,bo|=u,h)}function dM(u,h,m,v,C){var $=j.p;j.p=$!==0&&8>$?$:8;var D=M.T,B={};M.T=B,Vw(u,!1,h,m);try{var Y=C(),ue=M.S;if(ue!==null&&ue(B,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var we=PJ(Y,v);Vh(u,h,we,yi(u))}else Vh(u,h,v,yi(u))}catch(Ce){Vh(u,h,{then:function(){},status:"rejected",reason:Ce},yi())}finally{j.p=$,M.T=D}}function jJ(){}function zw(u,h,m,v){if(u.tag!==5)throw Error(r(476));var C=pM(u).queue;dM(u,C,h,V,m===null?jJ:function(){return mM(u),m(v)})}function pM(u){var h=u.memoizedState;if(h!==null)return h;h={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:V},next:null};var m={};return h.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:m},next:null},u.memoizedState=h,u=u.alternate,u!==null&&(u.memoizedState=h),h}function mM(u){var h=pM(u).next.queue;Vh(u,h,{},yi())}function jw(){return Cr(ad)}function gM(){return In().memoizedState}function yM(){return In().memoizedState}function VJ(u){for(var h=u.return;h!==null;){switch(h.tag){case 24:case 3:var m=yi();u=co(m);var v=uo(h,u,m);v!==null&&(vi(v,h,m),Ph(v,h,m)),h={cache:yw()},u.payload=h;return}h=h.return}}function UJ(u,h,m){var v=yi();m={lane:v,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},uy(u)?bM(h,m):(m=ow(u,h,m,v),m!==null&&(vi(m,u,v),xM(m,h,v)))}function vM(u,h,m){var v=yi();Vh(u,h,m,v)}function Vh(u,h,m,v){var C={lane:v,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(uy(u))bM(h,C);else{var $=u.alternate;if(u.lanes===0&&($===null||$.lanes===0)&&($=h.lastRenderedReducer,$!==null))try{var D=h.lastRenderedState,B=$(D,m);if(C.hasEagerState=!0,C.eagerState=B,hi(B,D))return Hg(u,h,C,0),Xt===null&&qg(),!1}catch{}finally{}if(m=ow(u,h,C,v),m!==null)return vi(m,u,v),xM(m,h,v),!0}return!1}function Vw(u,h,m,v){if(v={lane:2,revertLane:xS(),action:v,hasEagerState:!1,eagerState:null,next:null},uy(u)){if(h)throw Error(r(479))}else h=ow(u,m,v,2),h!==null&&vi(h,u,2)}function uy(u){var h=u.alternate;return u===ct||h!==null&&h===ct}function bM(u,h){cu=iy=!0;var m=u.pending;m===null?h.next=h:(h.next=m.next,m.next=h),u.pending=h}function xM(u,h,m){if((m&4194048)!==0){var v=h.lanes;v&=u.pendingLanes,m|=v,h.lanes=m,ER(u,m)}}var fy={readContext:Cr,use:ay,useCallback:Cn,useContext:Cn,useEffect:Cn,useImperativeHandle:Cn,useLayoutEffect:Cn,useInsertionEffect:Cn,useMemo:Cn,useReducer:Cn,useRef:Cn,useState:Cn,useDebugValue:Cn,useDeferredValue:Cn,useTransition:Cn,useSyncExternalStore:Cn,useId:Cn,useHostTransitionStatus:Cn,useFormState:Cn,useActionState:Cn,useOptimistic:Cn,useMemoCache:Cn,useCacheRefresh:Cn},wM={readContext:Cr,use:ay,useCallback:function(u,h){return Jr().memoizedState=[u,h===void 0?null:h],u},useContext:Cr,useEffect:iM,useImperativeHandle:function(u,h,m){m=m!=null?m.concat([u]):null,cy(4194308,4,lM.bind(null,h,u),m)},useLayoutEffect:function(u,h){return cy(4194308,4,u,h)},useInsertionEffect:function(u,h){cy(4,2,u,h)},useMemo:function(u,h){var m=Jr();h=h===void 0?null:h;var v=u();if(Il){lr(!0);try{u()}finally{lr(!1)}}return m.memoizedState=[v,h],v},useReducer:function(u,h,m){var v=Jr();if(m!==void 0){var C=m(h);if(Il){lr(!0);try{m(h)}finally{lr(!1)}}}else C=h;return v.memoizedState=v.baseState=C,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:C},v.queue=u,u=u.dispatch=UJ.bind(null,ct,u),[v.memoizedState,u]},useRef:function(u){var h=Jr();return u={current:u},h.memoizedState=u},useState:function(u){u=Pw(u);var h=u.queue,m=vM.bind(null,ct,h);return h.dispatch=m,[u.memoizedState,m]},useDebugValue:Lw,useDeferredValue:function(u,h){var m=Jr();return Bw(m,u,h)},useTransition:function(){var u=Pw(!1);return u=dM.bind(null,ct,u.queue,!0,!1),Jr().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,h,m){var v=ct,C=Jr();if(It){if(m===void 0)throw Error(r(407));m=m()}else{if(m=h(),Xt===null)throw Error(r(349));(wt&124)!==0||VD(v,h,m)}C.memoizedState=m;var $={value:m,getSnapshot:h};return C.queue=$,iM(WD.bind(null,v,$,u),[u]),v.flags|=2048,fu(9,ly(),UD.bind(null,v,$,m,h),null),m},useId:function(){var u=Jr(),h=Xt.identifierPrefix;if(It){var m=da,v=ha;m=(v&~(1<<32-zn(v)-1)).toString(32)+m,h=""+h+"R"+m,m=sy++,0<m&&(h+="H"+m.toString(32)),h+=""}else m=FJ++,h=""+h+"r"+m.toString(32)+"";return u.memoizedState=h},useHostTransitionStatus:jw,useFormState:JD,useActionState:JD,useOptimistic:function(u){var h=Jr();h.memoizedState=h.baseState=u;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=m,h=Vw.bind(null,ct,!0,m),m.dispatch=h,[u,h]},useMemoCache:Rw,useCacheRefresh:function(){return Jr().memoizedState=VJ.bind(null,ct)}},SM={readContext:Cr,use:ay,useCallback:uM,useContext:Cr,useEffect:sM,useImperativeHandle:cM,useInsertionEffect:aM,useLayoutEffect:oM,useMemo:fM,useReducer:oy,useRef:rM,useState:function(){return oy(ga)},useDebugValue:Lw,useDeferredValue:function(u,h){var m=In();return hM(m,Ft.memoizedState,u,h)},useTransition:function(){var u=oy(ga)[0],h=In().memoizedState;return[typeof u=="boolean"?u:zh(u),h]},useSyncExternalStore:jD,useId:gM,useHostTransitionStatus:jw,useFormState:eM,useActionState:eM,useOptimistic:function(u,h){var m=In();return HD(m,Ft,u,h)},useMemoCache:Rw,useCacheRefresh:yM},WJ={readContext:Cr,use:ay,useCallback:uM,useContext:Cr,useEffect:sM,useImperativeHandle:cM,useInsertionEffect:aM,useLayoutEffect:oM,useMemo:fM,useReducer:Mw,useRef:rM,useState:function(){return Mw(ga)},useDebugValue:Lw,useDeferredValue:function(u,h){var m=In();return Ft===null?Bw(m,u,h):hM(m,Ft.memoizedState,u,h)},useTransition:function(){var u=Mw(ga)[0],h=In().memoizedState;return[typeof u=="boolean"?u:zh(u),h]},useSyncExternalStore:jD,useId:gM,useHostTransitionStatus:jw,useFormState:nM,useActionState:nM,useOptimistic:function(u,h){var m=In();return Ft!==null?HD(m,Ft,u,h):(m.baseState=u,[u,m.queue.dispatch])},useMemoCache:Rw,useCacheRefresh:yM},hu=null,Uh=0;function hy(u){var h=Uh;return Uh+=1,hu===null&&(hu=[]),RD(hu,u,h)}function Wh(u,h){h=h.props.ref,u.ref=h!==void 0?h:null}function dy(u,h){throw h.$$typeof===d?Error(r(525)):(u=Object.prototype.toString.call(h),Error(r(31,u==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":u)))}function CM(u){var h=u._init;return h(u._payload)}function TM(u){function h(ae,te){if(u){var le=ae.deletions;le===null?(ae.deletions=[te],ae.flags|=16):le.push(te)}}function m(ae,te){if(!u)return null;for(;te!==null;)h(ae,te),te=te.sibling;return null}function v(ae){for(var te=new Map;ae!==null;)ae.key!==null?te.set(ae.key,ae):te.set(ae.index,ae),ae=ae.sibling;return te}function C(ae,te){return ae=fa(ae,te),ae.index=0,ae.sibling=null,ae}function $(ae,te,le){return ae.index=le,u?(le=ae.alternate,le!==null?(le=le.index,le<te?(ae.flags|=67108866,te):le):(ae.flags|=67108866,te)):(ae.flags|=1048576,te)}function D(ae){return u&&ae.alternate===null&&(ae.flags|=67108866),ae}function B(ae,te,le,Se){return te===null||te.tag!==6?(te=cw(le,ae.mode,Se),te.return=ae,te):(te=C(te,le),te.return=ae,te)}function Y(ae,te,le,Se){var Pe=le.type;return Pe===y?we(ae,te,le.props.children,Se,le.key):te!==null&&(te.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===N&&CM(Pe)===te.type)?(te=C(te,le.props),Wh(te,le),te.return=ae,te):(te=Xg(le.type,le.key,le.props,null,ae.mode,Se),Wh(te,le),te.return=ae,te)}function ue(ae,te,le,Se){return te===null||te.tag!==4||te.stateNode.containerInfo!==le.containerInfo||te.stateNode.implementation!==le.implementation?(te=uw(le,ae.mode,Se),te.return=ae,te):(te=C(te,le.children||[]),te.return=ae,te)}function we(ae,te,le,Se,Pe){return te===null||te.tag!==7?(te=wl(le,ae.mode,Se,Pe),te.return=ae,te):(te=C(te,le),te.return=ae,te)}function Ce(ae,te,le){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return te=cw(""+te,ae.mode,le),te.return=ae,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case p:return le=Xg(te.type,te.key,te.props,null,ae.mode,le),Wh(le,te),le.return=ae,le;case g:return te=uw(te,ae.mode,le),te.return=ae,te;case N:var Se=te._init;return te=Se(te._payload),Ce(ae,te,le)}if(P(te)||F(te))return te=wl(te,ae.mode,le,null),te.return=ae,te;if(typeof te.then=="function")return Ce(ae,hy(te),le);if(te.$$typeof===T)return Ce(ae,Jg(ae,te),le);dy(ae,te)}return null}function he(ae,te,le,Se){var Pe=te!==null?te.key:null;if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return Pe!==null?null:B(ae,te,""+le,Se);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case p:return le.key===Pe?Y(ae,te,le,Se):null;case g:return le.key===Pe?ue(ae,te,le,Se):null;case N:return Pe=le._init,le=Pe(le._payload),he(ae,te,le,Se)}if(P(le)||F(le))return Pe!==null?null:we(ae,te,le,Se,null);if(typeof le.then=="function")return he(ae,te,hy(le),Se);if(le.$$typeof===T)return he(ae,te,Jg(ae,le),Se);dy(ae,le)}return null}function de(ae,te,le,Se,Pe){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return ae=ae.get(le)||null,B(te,ae,""+Se,Pe);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case p:return ae=ae.get(Se.key===null?le:Se.key)||null,Y(te,ae,Se,Pe);case g:return ae=ae.get(Se.key===null?le:Se.key)||null,ue(te,ae,Se,Pe);case N:var ht=Se._init;return Se=ht(Se._payload),de(ae,te,le,Se,Pe)}if(P(Se)||F(Se))return ae=ae.get(le)||null,we(te,ae,Se,Pe,null);if(typeof Se.then=="function")return de(ae,te,le,hy(Se),Pe);if(Se.$$typeof===T)return de(ae,te,le,Jg(te,Se),Pe);dy(te,Se)}return null}function et(ae,te,le,Se){for(var Pe=null,ht=null,Ve=te,Ye=te=0,er=null;Ve!==null&&Ye<le.length;Ye++){Ve.index>Ye?(er=Ve,Ve=null):er=Ve.sibling;var Tt=he(ae,Ve,le[Ye],Se);if(Tt===null){Ve===null&&(Ve=er);break}u&&Ve&&Tt.alternate===null&&h(ae,Ve),te=$(Tt,te,Ye),ht===null?Pe=Tt:ht.sibling=Tt,ht=Tt,Ve=er}if(Ye===le.length)return m(ae,Ve),It&&Cl(ae,Ye),Pe;if(Ve===null){for(;Ye<le.length;Ye++)Ve=Ce(ae,le[Ye],Se),Ve!==null&&(te=$(Ve,te,Ye),ht===null?Pe=Ve:ht.sibling=Ve,ht=Ve);return It&&Cl(ae,Ye),Pe}for(Ve=v(Ve);Ye<le.length;Ye++)er=de(Ve,ae,Ye,le[Ye],Se),er!==null&&(u&&er.alternate!==null&&Ve.delete(er.key===null?Ye:er.key),te=$(er,te,Ye),ht===null?Pe=er:ht.sibling=er,ht=er);return u&&Ve.forEach(function(Eo){return h(ae,Eo)}),It&&Cl(ae,Ye),Pe}function He(ae,te,le,Se){if(le==null)throw Error(r(151));for(var Pe=null,ht=null,Ve=te,Ye=te=0,er=null,Tt=le.next();Ve!==null&&!Tt.done;Ye++,Tt=le.next()){Ve.index>Ye?(er=Ve,Ve=null):er=Ve.sibling;var Eo=he(ae,Ve,Tt.value,Se);if(Eo===null){Ve===null&&(Ve=er);break}u&&Ve&&Eo.alternate===null&&h(ae,Ve),te=$(Eo,te,Ye),ht===null?Pe=Eo:ht.sibling=Eo,ht=Eo,Ve=er}if(Tt.done)return m(ae,Ve),It&&Cl(ae,Ye),Pe;if(Ve===null){for(;!Tt.done;Ye++,Tt=le.next())Tt=Ce(ae,Tt.value,Se),Tt!==null&&(te=$(Tt,te,Ye),ht===null?Pe=Tt:ht.sibling=Tt,ht=Tt);return It&&Cl(ae,Ye),Pe}for(Ve=v(Ve);!Tt.done;Ye++,Tt=le.next())Tt=de(Ve,ae,Ye,Tt.value,Se),Tt!==null&&(u&&Tt.alternate!==null&&Ve.delete(Tt.key===null?Ye:Tt.key),te=$(Tt,te,Ye),ht===null?Pe=Tt:ht.sibling=Tt,ht=Tt);return u&&Ve.forEach(function(Gee){return h(ae,Gee)}),It&&Cl(ae,Ye),Pe}function Bt(ae,te,le,Se){if(typeof le=="object"&&le!==null&&le.type===y&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case p:e:{for(var Pe=le.key;te!==null;){if(te.key===Pe){if(Pe=le.type,Pe===y){if(te.tag===7){m(ae,te.sibling),Se=C(te,le.props.children),Se.return=ae,ae=Se;break e}}else if(te.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===N&&CM(Pe)===te.type){m(ae,te.sibling),Se=C(te,le.props),Wh(Se,le),Se.return=ae,ae=Se;break e}m(ae,te);break}else h(ae,te);te=te.sibling}le.type===y?(Se=wl(le.props.children,ae.mode,Se,le.key),Se.return=ae,ae=Se):(Se=Xg(le.type,le.key,le.props,null,ae.mode,Se),Wh(Se,le),Se.return=ae,ae=Se)}return D(ae);case g:e:{for(Pe=le.key;te!==null;){if(te.key===Pe)if(te.tag===4&&te.stateNode.containerInfo===le.containerInfo&&te.stateNode.implementation===le.implementation){m(ae,te.sibling),Se=C(te,le.children||[]),Se.return=ae,ae=Se;break e}else{m(ae,te);break}else h(ae,te);te=te.sibling}Se=uw(le,ae.mode,Se),Se.return=ae,ae=Se}return D(ae);case N:return Pe=le._init,le=Pe(le._payload),Bt(ae,te,le,Se)}if(P(le))return et(ae,te,le,Se);if(F(le)){if(Pe=F(le),typeof Pe!="function")throw Error(r(150));return le=Pe.call(le),He(ae,te,le,Se)}if(typeof le.then=="function")return Bt(ae,te,hy(le),Se);if(le.$$typeof===T)return Bt(ae,te,Jg(ae,le),Se);dy(ae,le)}return typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint"?(le=""+le,te!==null&&te.tag===6?(m(ae,te.sibling),Se=C(te,le),Se.return=ae,ae=Se):(m(ae,te),Se=cw(le,ae.mode,Se),Se.return=ae,ae=Se),D(ae)):m(ae,te)}return function(ae,te,le,Se){try{Uh=0;var Pe=Bt(ae,te,le,Se);return hu=null,Pe}catch(Ve){if(Ve===Dh||Ve===ty)throw Ve;var ht=di(29,Ve,null,ae.mode);return ht.lanes=Se,ht.return=ae,ht}finally{}}}var du=TM(!0),AM=TM(!1),Mi=G(null),Ns=null;function ho(u){var h=u.alternate;K(Vn,Vn.current&1),K(Mi,u),Ns===null&&(h===null||lu.current!==null||h.memoizedState!==null)&&(Ns=u)}function kM(u){if(u.tag===22){if(K(Vn,Vn.current),K(Mi,u),Ns===null){var h=u.alternate;h!==null&&h.memoizedState!==null&&(Ns=u)}}else po()}function po(){K(Vn,Vn.current),K(Mi,Mi.current)}function ya(u){H(Mi),Ns===u&&(Ns=null),H(Vn)}var Vn=G(0);function py(u){for(var h=u;h!==null;){if(h.tag===13){var m=h.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||_S(m)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function Uw(u,h,m,v){h=u.memoizedState,m=m(v,h),m=m==null?h:f({},h,m),u.memoizedState=m,u.lanes===0&&(u.updateQueue.baseState=m)}var Ww={enqueueSetState:function(u,h,m){u=u._reactInternals;var v=yi(),C=co(v);C.payload=h,m!=null&&(C.callback=m),h=uo(u,C,v),h!==null&&(vi(h,u,v),Ph(h,u,v))},enqueueReplaceState:function(u,h,m){u=u._reactInternals;var v=yi(),C=co(v);C.tag=1,C.payload=h,m!=null&&(C.callback=m),h=uo(u,C,v),h!==null&&(vi(h,u,v),Ph(h,u,v))},enqueueForceUpdate:function(u,h){u=u._reactInternals;var m=yi(),v=co(m);v.tag=2,h!=null&&(v.callback=h),h=uo(u,v,m),h!==null&&(vi(h,u,m),Ph(h,u,m))}};function $M(u,h,m,v,C,$,D){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(v,$,D):h.prototype&&h.prototype.isPureReactComponent?!kh(m,v)||!kh(C,$):!0}function EM(u,h,m,v){u=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(m,v),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(m,v),h.state!==u&&Ww.enqueueReplaceState(h,h.state,null)}function Nl(u,h){var m=h;if("ref"in h){m={};for(var v in h)v!=="ref"&&(m[v]=h[v])}if(u=u.defaultProps){m===h&&(m=f({},m));for(var C in u)m[C]===void 0&&(m[C]=u[C])}return m}var my=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)};function IM(u){my(u)}function NM(u){console.error(u)}function OM(u){my(u)}function gy(u,h){try{var m=u.onUncaughtError;m(h.value,{componentStack:h.stack})}catch(v){setTimeout(function(){throw v})}}function _M(u,h,m){try{var v=u.onCaughtError;v(m.value,{componentStack:m.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function Gw(u,h,m){return m=co(m),m.tag=3,m.payload={element:null},m.callback=function(){gy(u,h)},m}function RM(u){return u=co(u),u.tag=3,u}function DM(u,h,m,v){var C=m.type.getDerivedStateFromError;if(typeof C=="function"){var $=v.value;u.payload=function(){return C($)},u.callback=function(){_M(h,m,v)}}var D=m.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(u.callback=function(){_M(h,m,v),typeof C!="function"&&(xo===null?xo=new Set([this]):xo.add(this));var B=v.stack;this.componentDidCatch(v.value,{componentStack:B!==null?B:""})})}function GJ(u,h,m,v,C){if(m.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(h=m.alternate,h!==null&&Oh(h,m,C,!0),m=Mi.current,m!==null){switch(m.tag){case 13:return Ns===null?mS():m.alternate===null&&dn===0&&(dn=3),m.flags&=-257,m.flags|=65536,m.lanes=C,v===xw?m.flags|=16384:(h=m.updateQueue,h===null?m.updateQueue=new Set([v]):h.add(v),yS(u,v,C)),!1;case 22:return m.flags|=65536,v===xw?m.flags|=16384:(h=m.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([v])},m.updateQueue=h):(m=h.retryQueue,m===null?h.retryQueue=new Set([v]):m.add(v)),yS(u,v,C)),!1}throw Error(r(435,m.tag))}return yS(u,v,C),mS(),!1}if(It)return h=Mi.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=C,v!==dw&&(u=Error(r(422),{cause:v}),Nh(Oi(u,m)))):(v!==dw&&(h=Error(r(423),{cause:v}),Nh(Oi(h,m))),u=u.current.alternate,u.flags|=65536,C&=-C,u.lanes|=C,v=Oi(v,m),C=Gw(u.stateNode,v,C),Cw(u,C),dn!==4&&(dn=2)),!1;var $=Error(r(520),{cause:v});if($=Oi($,m),Zh===null?Zh=[$]:Zh.push($),dn!==4&&(dn=2),h===null)return!0;v=Oi(v,m),m=h;do{switch(m.tag){case 3:return m.flags|=65536,u=C&-C,m.lanes|=u,u=Gw(m.stateNode,v,u),Cw(m,u),!1;case 1:if(h=m.type,$=m.stateNode,(m.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(xo===null||!xo.has($))))return m.flags|=65536,C&=-C,m.lanes|=C,C=RM(C),DM(C,u,m,v),Cw(m,C),!1}m=m.return}while(m!==null);return!1}var MM=Error(r(461)),Qn=!1;function cr(u,h,m,v){h.child=u===null?AM(h,null,m,v):du(h,u.child,m,v)}function PM(u,h,m,v,C){m=m.render;var $=h.ref;if("ref"in v){var D={};for(var B in v)B!=="ref"&&(D[B]=v[B])}else D=v;return $l(h),v=Ew(u,h,m,D,$,C),B=Iw(),u!==null&&!Qn?(Nw(u,h,C),va(u,h,C)):(It&&B&&fw(h),h.flags|=1,cr(u,h,v,C),h.child)}function FM(u,h,m,v,C){if(u===null){var $=m.type;return typeof $=="function"&&!lw($)&&$.defaultProps===void 0&&m.compare===null?(h.tag=15,h.type=$,LM(u,h,$,v,C)):(u=Xg(m.type,null,v,h,h.mode,C),u.ref=h.ref,u.return=h,h.child=u)}if($=u.child,!Jw(u,C)){var D=$.memoizedProps;if(m=m.compare,m=m!==null?m:kh,m(D,v)&&u.ref===h.ref)return va(u,h,C)}return h.flags|=1,u=fa($,v),u.ref=h.ref,u.return=h,h.child=u}function LM(u,h,m,v,C){if(u!==null){var $=u.memoizedProps;if(kh($,v)&&u.ref===h.ref)if(Qn=!1,h.pendingProps=v=$,Jw(u,C))(u.flags&131072)!==0&&(Qn=!0);else return h.lanes=u.lanes,va(u,h,C)}return qw(u,h,m,v,C)}function BM(u,h,m){var v=h.pendingProps,C=v.children,$=u!==null?u.memoizedState:null;if(v.mode==="hidden"){if((h.flags&128)!==0){if(v=$!==null?$.baseLanes|m:m,u!==null){for(C=h.child=u.child,$=0;C!==null;)$=$|C.lanes|C.childLanes,C=C.sibling;h.childLanes=$&~v}else h.childLanes=0,h.child=null;return zM(u,h,v,m)}if((m&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},u!==null&&ey(h,$!==null?$.cachePool:null),$!==null?LD(h,$):Aw(),kM(h);else return h.lanes=h.childLanes=536870912,zM(u,h,$!==null?$.baseLanes|m:m,m)}else $!==null?(ey(h,$.cachePool),LD(h,$),po(),h.memoizedState=null):(u!==null&&ey(h,null),Aw(),po());return cr(u,h,C,m),h.child}function zM(u,h,m,v){var C=bw();return C=C===null?null:{parent:jn._currentValue,pool:C},h.memoizedState={baseLanes:m,cachePool:C},u!==null&&ey(h,null),Aw(),kM(h),u!==null&&Oh(u,h,v,!0),null}function yy(u,h){var m=h.ref;if(m===null)u!==null&&u.ref!==null&&(h.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(u===null||u.ref!==m)&&(h.flags|=4194816)}}function qw(u,h,m,v,C){return $l(h),m=Ew(u,h,m,v,void 0,C),v=Iw(),u!==null&&!Qn?(Nw(u,h,C),va(u,h,C)):(It&&v&&fw(h),h.flags|=1,cr(u,h,m,C),h.child)}function jM(u,h,m,v,C,$){return $l(h),h.updateQueue=null,m=zD(h,v,m,C),BD(u),v=Iw(),u!==null&&!Qn?(Nw(u,h,$),va(u,h,$)):(It&&v&&fw(h),h.flags|=1,cr(u,h,m,$),h.child)}function VM(u,h,m,v,C){if($l(h),h.stateNode===null){var $=ru,D=m.contextType;typeof D=="object"&&D!==null&&($=Cr(D)),$=new m(v,$),h.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,$.updater=Ww,h.stateNode=$,$._reactInternals=h,$=h.stateNode,$.props=v,$.state=h.memoizedState,$.refs={},ww(h),D=m.contextType,$.context=typeof D=="object"&&D!==null?Cr(D):ru,$.state=h.memoizedState,D=m.getDerivedStateFromProps,typeof D=="function"&&(Uw(h,m,D,v),$.state=h.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof $.getSnapshotBeforeUpdate=="function"||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(D=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),D!==$.state&&Ww.enqueueReplaceState($,$.state,null),Lh(h,v,$,C),Fh(),$.state=h.memoizedState),typeof $.componentDidMount=="function"&&(h.flags|=4194308),v=!0}else if(u===null){$=h.stateNode;var B=h.memoizedProps,Y=Nl(m,B);$.props=Y;var ue=$.context,we=m.contextType;D=ru,typeof we=="object"&&we!==null&&(D=Cr(we));var Ce=m.getDerivedStateFromProps;we=typeof Ce=="function"||typeof $.getSnapshotBeforeUpdate=="function",B=h.pendingProps!==B,we||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(B||ue!==D)&&EM(h,$,v,D),lo=!1;var he=h.memoizedState;$.state=he,Lh(h,v,$,C),Fh(),ue=h.memoizedState,B||he!==ue||lo?(typeof Ce=="function"&&(Uw(h,m,Ce,v),ue=h.memoizedState),(Y=lo||$M(h,m,Y,v,he,ue,D))?(we||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(h.flags|=4194308)):(typeof $.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=v,h.memoizedState=ue),$.props=v,$.state=ue,$.context=D,v=Y):(typeof $.componentDidMount=="function"&&(h.flags|=4194308),v=!1)}else{$=h.stateNode,Sw(u,h),D=h.memoizedProps,we=Nl(m,D),$.props=we,Ce=h.pendingProps,he=$.context,ue=m.contextType,Y=ru,typeof ue=="object"&&ue!==null&&(Y=Cr(ue)),B=m.getDerivedStateFromProps,(ue=typeof B=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(D!==Ce||he!==Y)&&EM(h,$,v,Y),lo=!1,he=h.memoizedState,$.state=he,Lh(h,v,$,C),Fh();var de=h.memoizedState;D!==Ce||he!==de||lo||u!==null&&u.dependencies!==null&&Qg(u.dependencies)?(typeof B=="function"&&(Uw(h,m,B,v),de=h.memoizedState),(we=lo||$M(h,m,we,v,he,de,Y)||u!==null&&u.dependencies!==null&&Qg(u.dependencies))?(ue||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(v,de,Y),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(v,de,Y)),typeof $.componentDidUpdate=="function"&&(h.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof $.componentDidUpdate!="function"||D===u.memoizedProps&&he===u.memoizedState||(h.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||D===u.memoizedProps&&he===u.memoizedState||(h.flags|=1024),h.memoizedProps=v,h.memoizedState=de),$.props=v,$.state=de,$.context=Y,v=we):(typeof $.componentDidUpdate!="function"||D===u.memoizedProps&&he===u.memoizedState||(h.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||D===u.memoizedProps&&he===u.memoizedState||(h.flags|=1024),v=!1)}return $=v,yy(u,h),v=(h.flags&128)!==0,$||v?($=h.stateNode,m=v&&typeof m.getDerivedStateFromError!="function"?null:$.render(),h.flags|=1,u!==null&&v?(h.child=du(h,u.child,null,C),h.child=du(h,null,m,C)):cr(u,h,m,C),h.memoizedState=$.state,u=h.child):u=va(u,h,C),u}function UM(u,h,m,v){return Ih(),h.flags|=256,cr(u,h,m,v),h.child}var Hw={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kw(u){return{baseLanes:u,cachePool:ND()}}function Xw(u,h,m){return u=u!==null?u.childLanes&~m:0,h&&(u|=Pi),u}function WM(u,h,m){var v=h.pendingProps,C=!1,$=(h.flags&128)!==0,D;if((D=$)||(D=u!==null&&u.memoizedState===null?!1:(Vn.current&2)!==0),D&&(C=!0,h.flags&=-129),D=(h.flags&32)!==0,h.flags&=-33,u===null){if(It){if(C?ho(h):po(),It){var B=hn,Y;if(Y=B){e:{for(Y=B,B=Is;Y.nodeType!==8;){if(!B){B=null;break e}if(Y=os(Y.nextSibling),Y===null){B=null;break e}}B=Y}B!==null?(h.memoizedState={dehydrated:B,treeContext:Sl!==null?{id:ha,overflow:da}:null,retryLane:536870912,hydrationErrors:null},Y=di(18,null,null,0),Y.stateNode=B,Y.return=h,h.child=Y,Fr=h,hn=null,Y=!0):Y=!1}Y||Al(h)}if(B=h.memoizedState,B!==null&&(B=B.dehydrated,B!==null))return _S(B)?h.lanes=32:h.lanes=536870912,null;ya(h)}return B=v.children,v=v.fallback,C?(po(),C=h.mode,B=vy({mode:"hidden",children:B},C),v=wl(v,C,m,null),B.return=h,v.return=h,B.sibling=v,h.child=B,C=h.child,C.memoizedState=Kw(m),C.childLanes=Xw(u,D,m),h.memoizedState=Hw,v):(ho(h),Yw(h,B))}if(Y=u.memoizedState,Y!==null&&(B=Y.dehydrated,B!==null)){if($)h.flags&256?(ho(h),h.flags&=-257,h=Zw(u,h,m)):h.memoizedState!==null?(po(),h.child=u.child,h.flags|=128,h=null):(po(),C=v.fallback,B=h.mode,v=vy({mode:"visible",children:v.children},B),C=wl(C,B,m,null),C.flags|=2,v.return=h,C.return=h,v.sibling=C,h.child=v,du(h,u.child,null,m),v=h.child,v.memoizedState=Kw(m),v.childLanes=Xw(u,D,m),h.memoizedState=Hw,h=C);else if(ho(h),_S(B)){if(D=B.nextSibling&&B.nextSibling.dataset,D)var ue=D.dgst;D=ue,v=Error(r(419)),v.stack="",v.digest=D,Nh({value:v,source:null,stack:null}),h=Zw(u,h,m)}else if(Qn||Oh(u,h,m,!1),D=(m&u.childLanes)!==0,Qn||D){if(D=Xt,D!==null&&(v=m&-m,v=(v&42)!==0?1:R1(v),v=(v&(D.suspendedLanes|m))!==0?0:v,v!==0&&v!==Y.retryLane))throw Y.retryLane=v,nu(u,v),vi(D,u,v),MM;B.data==="$?"||mS(),h=Zw(u,h,m)}else B.data==="$?"?(h.flags|=192,h.child=u.child,h=null):(u=Y.treeContext,hn=os(B.nextSibling),Fr=h,It=!0,Tl=null,Is=!1,u!==null&&(Ri[Di++]=ha,Ri[Di++]=da,Ri[Di++]=Sl,ha=u.id,da=u.overflow,Sl=h),h=Yw(h,v.children),h.flags|=4096);return h}return C?(po(),C=v.fallback,B=h.mode,Y=u.child,ue=Y.sibling,v=fa(Y,{mode:"hidden",children:v.children}),v.subtreeFlags=Y.subtreeFlags&65011712,ue!==null?C=fa(ue,C):(C=wl(C,B,m,null),C.flags|=2),C.return=h,v.return=h,v.sibling=C,h.child=v,v=C,C=h.child,B=u.child.memoizedState,B===null?B=Kw(m):(Y=B.cachePool,Y!==null?(ue=jn._currentValue,Y=Y.parent!==ue?{parent:ue,pool:ue}:Y):Y=ND(),B={baseLanes:B.baseLanes|m,cachePool:Y}),C.memoizedState=B,C.childLanes=Xw(u,D,m),h.memoizedState=Hw,v):(ho(h),m=u.child,u=m.sibling,m=fa(m,{mode:"visible",children:v.children}),m.return=h,m.sibling=null,u!==null&&(D=h.deletions,D===null?(h.deletions=[u],h.flags|=16):D.push(u)),h.child=m,h.memoizedState=null,m)}function Yw(u,h){return h=vy({mode:"visible",children:h},u.mode),h.return=u,u.child=h}function vy(u,h){return u=di(22,u,null,h),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function Zw(u,h,m){return du(h,u.child,null,m),u=Yw(h,h.pendingProps.children),u.flags|=2,h.memoizedState=null,u}function GM(u,h,m){u.lanes|=h;var v=u.alternate;v!==null&&(v.lanes|=h),mw(u.return,h,m)}function Qw(u,h,m,v,C){var $=u.memoizedState;$===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:v,tail:m,tailMode:C}:($.isBackwards=h,$.rendering=null,$.renderingStartTime=0,$.last=v,$.tail=m,$.tailMode=C)}function qM(u,h,m){var v=h.pendingProps,C=v.revealOrder,$=v.tail;if(cr(u,h,v.children,m),v=Vn.current,(v&2)!==0)v=v&1|2,h.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=h.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&GM(u,m,h);else if(u.tag===19)GM(u,m,h);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break e;for(;u.sibling===null;){if(u.return===null||u.return===h)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}v&=1}switch(K(Vn,v),C){case"forwards":for(m=h.child,C=null;m!==null;)u=m.alternate,u!==null&&py(u)===null&&(C=m),m=m.sibling;m=C,m===null?(C=h.child,h.child=null):(C=m.sibling,m.sibling=null),Qw(h,!1,C,m,$);break;case"backwards":for(m=null,C=h.child,h.child=null;C!==null;){if(u=C.alternate,u!==null&&py(u)===null){h.child=C;break}u=C.sibling,C.sibling=m,m=C,C=u}Qw(h,!0,m,null,$);break;case"together":Qw(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function va(u,h,m){if(u!==null&&(h.dependencies=u.dependencies),bo|=h.lanes,(m&h.childLanes)===0)if(u!==null){if(Oh(u,h,m,!1),(m&h.childLanes)===0)return null}else return null;if(u!==null&&h.child!==u.child)throw Error(r(153));if(h.child!==null){for(u=h.child,m=fa(u,u.pendingProps),h.child=m,m.return=h;u.sibling!==null;)u=u.sibling,m=m.sibling=fa(u,u.pendingProps),m.return=h;m.sibling=null}return h.child}function Jw(u,h){return(u.lanes&h)!==0?!0:(u=u.dependencies,!!(u!==null&&Qg(u)))}function qJ(u,h,m){switch(h.tag){case 3:$e(h,h.stateNode.containerInfo),oo(h,jn,u.memoizedState.cache),Ih();break;case 27:case 5:Ee(h);break;case 4:$e(h,h.stateNode.containerInfo);break;case 10:oo(h,h.type,h.memoizedProps.value);break;case 13:var v=h.memoizedState;if(v!==null)return v.dehydrated!==null?(ho(h),h.flags|=128,null):(m&h.child.childLanes)!==0?WM(u,h,m):(ho(h),u=va(u,h,m),u!==null?u.sibling:null);ho(h);break;case 19:var C=(u.flags&128)!==0;if(v=(m&h.childLanes)!==0,v||(Oh(u,h,m,!1),v=(m&h.childLanes)!==0),C){if(v)return qM(u,h,m);h.flags|=128}if(C=h.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),K(Vn,Vn.current),v)break;return null;case 22:case 23:return h.lanes=0,BM(u,h,m);case 24:oo(h,jn,u.memoizedState.cache)}return va(u,h,m)}function HM(u,h,m){if(u!==null)if(u.memoizedProps!==h.pendingProps)Qn=!0;else{if(!Jw(u,m)&&(h.flags&128)===0)return Qn=!1,qJ(u,h,m);Qn=(u.flags&131072)!==0}else Qn=!1,It&&(h.flags&1048576)!==0&&CD(h,Zg,h.index);switch(h.lanes=0,h.tag){case 16:e:{u=h.pendingProps;var v=h.elementType,C=v._init;if(v=C(v._payload),h.type=v,typeof v=="function")lw(v)?(u=Nl(v,u),h.tag=1,h=VM(null,h,v,u,m)):(h.tag=0,h=qw(null,h,v,u,m));else{if(v!=null){if(C=v.$$typeof,C===k){h.tag=11,h=PM(null,h,v,u,m);break e}else if(C===I){h.tag=14,h=FM(null,h,v,u,m);break e}}throw h=W(v)||v,Error(r(306,h,""))}}return h;case 0:return qw(u,h,h.type,h.pendingProps,m);case 1:return v=h.type,C=Nl(v,h.pendingProps),VM(u,h,v,C,m);case 3:e:{if($e(h,h.stateNode.containerInfo),u===null)throw Error(r(387));v=h.pendingProps;var $=h.memoizedState;C=$.element,Sw(u,h),Lh(h,v,null,m);var D=h.memoizedState;if(v=D.cache,oo(h,jn,v),v!==$.cache&&gw(h,[jn],m,!0),Fh(),v=D.element,$.isDehydrated)if($={element:v,isDehydrated:!1,cache:D.cache},h.updateQueue.baseState=$,h.memoizedState=$,h.flags&256){h=UM(u,h,v,m);break e}else if(v!==C){C=Oi(Error(r(424)),h),Nh(C),h=UM(u,h,v,m);break e}else{switch(u=h.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(hn=os(u.firstChild),Fr=h,It=!0,Tl=null,Is=!0,m=AM(h,null,v,m),h.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(Ih(),v===C){h=va(u,h,m);break e}cr(u,h,v,m)}h=h.child}return h;case 26:return yy(u,h),u===null?(m=ZP(h.type,null,h.pendingProps,null))?h.memoizedState=m:It||(m=h.type,u=h.pendingProps,v=_y(be.current).createElement(m),v[Sr]=h,v[Zr]=u,fr(v,m,u),Zn(v),h.stateNode=v):h.memoizedState=ZP(h.type,u.memoizedProps,h.pendingProps,u.memoizedState),null;case 27:return Ee(h),u===null&&It&&(v=h.stateNode=KP(h.type,h.pendingProps,be.current),Fr=h,Is=!0,C=hn,Co(h.type)?(RS=C,hn=os(v.firstChild)):hn=C),cr(u,h,h.pendingProps.children,m),yy(u,h),u===null&&(h.flags|=4194304),h.child;case 5:return u===null&&It&&((C=v=hn)&&(v=xee(v,h.type,h.pendingProps,Is),v!==null?(h.stateNode=v,Fr=h,hn=os(v.firstChild),Is=!1,C=!0):C=!1),C||Al(h)),Ee(h),C=h.type,$=h.pendingProps,D=u!==null?u.memoizedProps:null,v=$.children,IS(C,$)?v=null:D!==null&&IS(C,D)&&(h.flags|=32),h.memoizedState!==null&&(C=Ew(u,h,LJ,null,null,m),ad._currentValue=C),yy(u,h),cr(u,h,v,m),h.child;case 6:return u===null&&It&&((u=m=hn)&&(m=wee(m,h.pendingProps,Is),m!==null?(h.stateNode=m,Fr=h,hn=null,u=!0):u=!1),u||Al(h)),null;case 13:return WM(u,h,m);case 4:return $e(h,h.stateNode.containerInfo),v=h.pendingProps,u===null?h.child=du(h,null,v,m):cr(u,h,v,m),h.child;case 11:return PM(u,h,h.type,h.pendingProps,m);case 7:return cr(u,h,h.pendingProps,m),h.child;case 8:return cr(u,h,h.pendingProps.children,m),h.child;case 12:return cr(u,h,h.pendingProps.children,m),h.child;case 10:return v=h.pendingProps,oo(h,h.type,v.value),cr(u,h,v.children,m),h.child;case 9:return C=h.type._context,v=h.pendingProps.children,$l(h),C=Cr(C),v=v(C),h.flags|=1,cr(u,h,v,m),h.child;case 14:return FM(u,h,h.type,h.pendingProps,m);case 15:return LM(u,h,h.type,h.pendingProps,m);case 19:return qM(u,h,m);case 31:return v=h.pendingProps,m=h.mode,v={mode:v.mode,children:v.children},u===null?(m=vy(v,m),m.ref=h.ref,h.child=m,m.return=h,h=m):(m=fa(u.child,v),m.ref=h.ref,h.child=m,m.return=h,h=m),h;case 22:return BM(u,h,m);case 24:return $l(h),v=Cr(jn),u===null?(C=bw(),C===null&&(C=Xt,$=yw(),C.pooledCache=$,$.refCount++,$!==null&&(C.pooledCacheLanes|=m),C=$),h.memoizedState={parent:v,cache:C},ww(h),oo(h,jn,C)):((u.lanes&m)!==0&&(Sw(u,h),Lh(h,null,null,m),Fh()),C=u.memoizedState,$=h.memoizedState,C.parent!==v?(C={parent:v,cache:v},h.memoizedState=C,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=C),oo(h,jn,v)):(v=$.cache,oo(h,jn,v),v!==C.cache&&gw(h,[jn],m,!0))),cr(u,h,h.pendingProps.children,m),h.child;case 29:throw h.pendingProps}throw Error(r(156,h.tag))}function ba(u){u.flags|=4}function KM(u,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!nF(h)){if(h=Mi.current,h!==null&&((wt&4194048)===wt?Ns!==null:(wt&62914560)!==wt&&(wt&536870912)===0||h!==Ns))throw Mh=xw,OD;u.flags|=8192}}function by(u,h){h!==null&&(u.flags|=4),u.flags&16384&&(h=u.tag!==22?kR():536870912,u.lanes|=h,yu|=h)}function Gh(u,h){if(!It)switch(u.tailMode){case"hidden":h=u.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?u.tail=null:m.sibling=null;break;case"collapsed":m=u.tail;for(var v=null;m!==null;)m.alternate!==null&&(v=m),m=m.sibling;v===null?h||u.tail===null?u.tail=null:u.tail.sibling=null:v.sibling=null}}function on(u){var h=u.alternate!==null&&u.alternate.child===u.child,m=0,v=0;if(h)for(var C=u.child;C!==null;)m|=C.lanes|C.childLanes,v|=C.subtreeFlags&65011712,v|=C.flags&65011712,C.return=u,C=C.sibling;else for(C=u.child;C!==null;)m|=C.lanes|C.childLanes,v|=C.subtreeFlags,v|=C.flags,C.return=u,C=C.sibling;return u.subtreeFlags|=v,u.childLanes=m,h}function HJ(u,h,m){var v=h.pendingProps;switch(hw(h),h.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return on(h),null;case 1:return on(h),null;case 3:return m=h.stateNode,v=null,u!==null&&(v=u.memoizedState.cache),h.memoizedState.cache!==v&&(h.flags|=2048),ma(jn),ge(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(u===null||u.child===null)&&(Eh(h)?ba(h):u===null||u.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,kD())),on(h),null;case 26:return m=h.memoizedState,u===null?(ba(h),m!==null?(on(h),KM(h,m)):(on(h),h.flags&=-16777217)):m?m!==u.memoizedState?(ba(h),on(h),KM(h,m)):(on(h),h.flags&=-16777217):(u.memoizedProps!==v&&ba(h),on(h),h.flags&=-16777217),null;case 27:Ie(h),m=be.current;var C=h.type;if(u!==null&&h.stateNode!=null)u.memoizedProps!==v&&ba(h);else{if(!v){if(h.stateNode===null)throw Error(r(166));return on(h),null}u=oe.current,Eh(h)?TD(h):(u=KP(C,v,m),h.stateNode=u,ba(h))}return on(h),null;case 5:if(Ie(h),m=h.type,u!==null&&h.stateNode!=null)u.memoizedProps!==v&&ba(h);else{if(!v){if(h.stateNode===null)throw Error(r(166));return on(h),null}if(u=oe.current,Eh(h))TD(h);else{switch(C=_y(be.current),u){case 1:u=C.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:u=C.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":u=C.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":u=C.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":u=C.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof v.is=="string"?C.createElement("select",{is:v.is}):C.createElement("select"),v.multiple?u.multiple=!0:v.size&&(u.size=v.size);break;default:u=typeof v.is=="string"?C.createElement(m,{is:v.is}):C.createElement(m)}}u[Sr]=h,u[Zr]=v;e:for(C=h.child;C!==null;){if(C.tag===5||C.tag===6)u.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===h)break e;for(;C.sibling===null;){if(C.return===null||C.return===h)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}h.stateNode=u;e:switch(fr(u,m,v),m){case"button":case"input":case"select":case"textarea":u=!!v.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ba(h)}}return on(h),h.flags&=-16777217,null;case 6:if(u&&h.stateNode!=null)u.memoizedProps!==v&&ba(h);else{if(typeof v!="string"&&h.stateNode===null)throw Error(r(166));if(u=be.current,Eh(h)){if(u=h.stateNode,m=h.memoizedProps,v=null,C=Fr,C!==null)switch(C.tag){case 27:case 5:v=C.memoizedProps}u[Sr]=h,u=!!(u.nodeValue===m||v!==null&&v.suppressHydrationWarning===!0||jP(u.nodeValue,m)),u||Al(h)}else u=_y(u).createTextNode(v),u[Sr]=h,h.stateNode=u}return on(h),null;case 13:if(v=h.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(C=Eh(h),v!==null&&v.dehydrated!==null){if(u===null){if(!C)throw Error(r(318));if(C=h.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(r(317));C[Sr]=h}else Ih(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;on(h),C=!1}else C=kD(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=C),C=!0;if(!C)return h.flags&256?(ya(h),h):(ya(h),null)}if(ya(h),(h.flags&128)!==0)return h.lanes=m,h;if(m=v!==null,u=u!==null&&u.memoizedState!==null,m){v=h.child,C=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(C=v.alternate.memoizedState.cachePool.pool);var $=null;v.memoizedState!==null&&v.memoizedState.cachePool!==null&&($=v.memoizedState.cachePool.pool),$!==C&&(v.flags|=2048)}return m!==u&&m&&(h.child.flags|=8192),by(h,h.updateQueue),on(h),null;case 4:return ge(),u===null&&TS(h.stateNode.containerInfo),on(h),null;case 10:return ma(h.type),on(h),null;case 19:if(H(Vn),C=h.memoizedState,C===null)return on(h),null;if(v=(h.flags&128)!==0,$=C.rendering,$===null)if(v)Gh(C,!1);else{if(dn!==0||u!==null&&(u.flags&128)!==0)for(u=h.child;u!==null;){if($=py(u),$!==null){for(h.flags|=128,Gh(C,!1),u=$.updateQueue,h.updateQueue=u,by(h,u),h.subtreeFlags=0,u=m,m=h.child;m!==null;)SD(m,u),m=m.sibling;return K(Vn,Vn.current&1|2),h.child}u=u.sibling}C.tail!==null&&Xe()>Sy&&(h.flags|=128,v=!0,Gh(C,!1),h.lanes=4194304)}else{if(!v)if(u=py($),u!==null){if(h.flags|=128,v=!0,u=u.updateQueue,h.updateQueue=u,by(h,u),Gh(C,!0),C.tail===null&&C.tailMode==="hidden"&&!$.alternate&&!It)return on(h),null}else 2*Xe()-C.renderingStartTime>Sy&&m!==536870912&&(h.flags|=128,v=!0,Gh(C,!1),h.lanes=4194304);C.isBackwards?($.sibling=h.child,h.child=$):(u=C.last,u!==null?u.sibling=$:h.child=$,C.last=$)}return C.tail!==null?(h=C.tail,C.rendering=h,C.tail=h.sibling,C.renderingStartTime=Xe(),h.sibling=null,u=Vn.current,K(Vn,v?u&1|2:u&1),h):(on(h),null);case 22:case 23:return ya(h),kw(),v=h.memoizedState!==null,u!==null?u.memoizedState!==null!==v&&(h.flags|=8192):v&&(h.flags|=8192),v?(m&536870912)!==0&&(h.flags&128)===0&&(on(h),h.subtreeFlags&6&&(h.flags|=8192)):on(h),m=h.updateQueue,m!==null&&by(h,m.retryQueue),m=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),v=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(v=h.memoizedState.cachePool.pool),v!==m&&(h.flags|=2048),u!==null&&H(El),null;case 24:return m=null,u!==null&&(m=u.memoizedState.cache),h.memoizedState.cache!==m&&(h.flags|=2048),ma(jn),on(h),null;case 25:return null;case 30:return null}throw Error(r(156,h.tag))}function KJ(u,h){switch(hw(h),h.tag){case 1:return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 3:return ma(jn),ge(),u=h.flags,(u&65536)!==0&&(u&128)===0?(h.flags=u&-65537|128,h):null;case 26:case 27:case 5:return Ie(h),null;case 13:if(ya(h),u=h.memoizedState,u!==null&&u.dehydrated!==null){if(h.alternate===null)throw Error(r(340));Ih()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 19:return H(Vn),null;case 4:return ge(),null;case 10:return ma(h.type),null;case 22:case 23:return ya(h),kw(),u!==null&&H(El),u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 24:return ma(jn),null;case 25:return null;default:return null}}function XM(u,h){switch(hw(h),h.tag){case 3:ma(jn),ge();break;case 26:case 27:case 5:Ie(h);break;case 4:ge();break;case 13:ya(h);break;case 19:H(Vn);break;case 10:ma(h.type);break;case 22:case 23:ya(h),kw(),u!==null&&H(El);break;case 24:ma(jn)}}function qh(u,h){try{var m=h.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var C=v.next;m=C;do{if((m.tag&u)===u){v=void 0;var $=m.create,D=m.inst;v=$(),D.destroy=v}m=m.next}while(m!==C)}}catch(B){Ut(h,h.return,B)}}function mo(u,h,m){try{var v=h.updateQueue,C=v!==null?v.lastEffect:null;if(C!==null){var $=C.next;v=$;do{if((v.tag&u)===u){var D=v.inst,B=D.destroy;if(B!==void 0){D.destroy=void 0,C=h;var Y=m,ue=B;try{ue()}catch(we){Ut(C,Y,we)}}}v=v.next}while(v!==$)}}catch(we){Ut(h,h.return,we)}}function YM(u){var h=u.updateQueue;if(h!==null){var m=u.stateNode;try{FD(h,m)}catch(v){Ut(u,u.return,v)}}}function ZM(u,h,m){m.props=Nl(u.type,u.memoizedProps),m.state=u.memoizedState;try{m.componentWillUnmount()}catch(v){Ut(u,h,v)}}function Hh(u,h){try{var m=u.ref;if(m!==null){switch(u.tag){case 26:case 27:case 5:var v=u.stateNode;break;case 30:v=u.stateNode;break;default:v=u.stateNode}typeof m=="function"?u.refCleanup=m(v):m.current=v}}catch(C){Ut(u,h,C)}}function Os(u,h){var m=u.ref,v=u.refCleanup;if(m!==null)if(typeof v=="function")try{v()}catch(C){Ut(u,h,C)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(C){Ut(u,h,C)}else m.current=null}function QM(u){var h=u.type,m=u.memoizedProps,v=u.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":m.autoFocus&&v.focus();break e;case"img":m.src?v.src=m.src:m.srcSet&&(v.srcset=m.srcSet)}}catch(C){Ut(u,u.return,C)}}function eS(u,h,m){try{var v=u.stateNode;mee(v,u.type,m,h),v[Zr]=h}catch(C){Ut(u,u.return,C)}}function JM(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&Co(u.type)||u.tag===4}function tS(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||JM(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&Co(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function nS(u,h,m){var v=u.tag;if(v===5||v===6)u=u.stateNode,h?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(u,h):(h=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,h.appendChild(u),m=m._reactRootContainer,m!=null||h.onclick!==null||(h.onclick=Oy));else if(v!==4&&(v===27&&Co(u.type)&&(m=u.stateNode,h=null),u=u.child,u!==null))for(nS(u,h,m),u=u.sibling;u!==null;)nS(u,h,m),u=u.sibling}function xy(u,h,m){var v=u.tag;if(v===5||v===6)u=u.stateNode,h?m.insertBefore(u,h):m.appendChild(u);else if(v!==4&&(v===27&&Co(u.type)&&(m=u.stateNode),u=u.child,u!==null))for(xy(u,h,m),u=u.sibling;u!==null;)xy(u,h,m),u=u.sibling}function eP(u){var h=u.stateNode,m=u.memoizedProps;try{for(var v=u.type,C=h.attributes;C.length;)h.removeAttributeNode(C[0]);fr(h,v,m),h[Sr]=u,h[Zr]=m}catch($){Ut(u,u.return,$)}}var xa=!1,Tn=!1,rS=!1,tP=typeof WeakSet=="function"?WeakSet:Set,Jn=null;function XJ(u,h){if(u=u.containerInfo,$S=Ly,u=hD(u),tw(u)){if("selectionStart"in u)var m={start:u.selectionStart,end:u.selectionEnd};else e:{m=(m=u.ownerDocument)&&m.defaultView||window;var v=m.getSelection&&m.getSelection();if(v&&v.rangeCount!==0){m=v.anchorNode;var C=v.anchorOffset,$=v.focusNode;v=v.focusOffset;try{m.nodeType,$.nodeType}catch{m=null;break e}var D=0,B=-1,Y=-1,ue=0,we=0,Ce=u,he=null;t:for(;;){for(var de;Ce!==m||C!==0&&Ce.nodeType!==3||(B=D+C),Ce!==$||v!==0&&Ce.nodeType!==3||(Y=D+v),Ce.nodeType===3&&(D+=Ce.nodeValue.length),(de=Ce.firstChild)!==null;)he=Ce,Ce=de;for(;;){if(Ce===u)break t;if(he===m&&++ue===C&&(B=D),he===$&&++we===v&&(Y=D),(de=Ce.nextSibling)!==null)break;Ce=he,he=Ce.parentNode}Ce=de}m=B===-1||Y===-1?null:{start:B,end:Y}}else m=null}m=m||{start:0,end:0}}else m=null;for(ES={focusedElem:u,selectionRange:m},Ly=!1,Jn=h;Jn!==null;)if(h=Jn,u=h.child,(h.subtreeFlags&1024)!==0&&u!==null)u.return=h,Jn=u;else for(;Jn!==null;){switch(h=Jn,$=h.alternate,u=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&$!==null){u=void 0,m=h,C=$.memoizedProps,$=$.memoizedState,v=m.stateNode;try{var et=Nl(m.type,C,m.elementType===m.type);u=v.getSnapshotBeforeUpdate(et,$),v.__reactInternalSnapshotBeforeUpdate=u}catch(He){Ut(m,m.return,He)}}break;case 3:if((u&1024)!==0){if(u=h.stateNode.containerInfo,m=u.nodeType,m===9)OS(u);else if(m===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":OS(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(r(163))}if(u=h.sibling,u!==null){u.return=h.return,Jn=u;break}Jn=h.return}}function nP(u,h,m){var v=m.flags;switch(m.tag){case 0:case 11:case 15:go(u,m),v&4&&qh(5,m);break;case 1:if(go(u,m),v&4)if(u=m.stateNode,h===null)try{u.componentDidMount()}catch(D){Ut(m,m.return,D)}else{var C=Nl(m.type,h.memoizedProps);h=h.memoizedState;try{u.componentDidUpdate(C,h,u.__reactInternalSnapshotBeforeUpdate)}catch(D){Ut(m,m.return,D)}}v&64&&YM(m),v&512&&Hh(m,m.return);break;case 3:if(go(u,m),v&64&&(u=m.updateQueue,u!==null)){if(h=null,m.child!==null)switch(m.child.tag){case 27:case 5:h=m.child.stateNode;break;case 1:h=m.child.stateNode}try{FD(u,h)}catch(D){Ut(m,m.return,D)}}break;case 27:h===null&&v&4&&eP(m);case 26:case 5:go(u,m),h===null&&v&4&&QM(m),v&512&&Hh(m,m.return);break;case 12:go(u,m);break;case 13:go(u,m),v&4&&sP(u,m),v&64&&(u=m.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(m=iee.bind(null,m),See(u,m))));break;case 22:if(v=m.memoizedState!==null||xa,!v){h=h!==null&&h.memoizedState!==null||Tn,C=xa;var $=Tn;xa=v,(Tn=h)&&!$?yo(u,m,(m.subtreeFlags&8772)!==0):go(u,m),xa=C,Tn=$}break;case 30:break;default:go(u,m)}}function rP(u){var h=u.alternate;h!==null&&(u.alternate=null,rP(h)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(h=u.stateNode,h!==null&&P1(h)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var tn=null,ei=!1;function wa(u,h,m){for(m=m.child;m!==null;)iP(u,h,m),m=m.sibling}function iP(u,h,m){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(Yr,m)}catch{}switch(m.tag){case 26:Tn||Os(m,h),wa(u,h,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Tn||Os(m,h);var v=tn,C=ei;Co(m.type)&&(tn=m.stateNode,ei=!1),wa(u,h,m),nd(m.stateNode),tn=v,ei=C;break;case 5:Tn||Os(m,h);case 6:if(v=tn,C=ei,tn=null,wa(u,h,m),tn=v,ei=C,tn!==null)if(ei)try{(tn.nodeType===9?tn.body:tn.nodeName==="HTML"?tn.ownerDocument.body:tn).removeChild(m.stateNode)}catch($){Ut(m,h,$)}else try{tn.removeChild(m.stateNode)}catch($){Ut(m,h,$)}break;case 18:tn!==null&&(ei?(u=tn,qP(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,m.stateNode),ud(u)):qP(tn,m.stateNode));break;case 4:v=tn,C=ei,tn=m.stateNode.containerInfo,ei=!0,wa(u,h,m),tn=v,ei=C;break;case 0:case 11:case 14:case 15:Tn||mo(2,m,h),Tn||mo(4,m,h),wa(u,h,m);break;case 1:Tn||(Os(m,h),v=m.stateNode,typeof v.componentWillUnmount=="function"&&ZM(m,h,v)),wa(u,h,m);break;case 21:wa(u,h,m);break;case 22:Tn=(v=Tn)||m.memoizedState!==null,wa(u,h,m),Tn=v;break;default:wa(u,h,m)}}function sP(u,h){if(h.memoizedState===null&&(u=h.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{ud(u)}catch(m){Ut(h,h.return,m)}}function YJ(u){switch(u.tag){case 13:case 19:var h=u.stateNode;return h===null&&(h=u.stateNode=new tP),h;case 22:return u=u.stateNode,h=u._retryCache,h===null&&(h=u._retryCache=new tP),h;default:throw Error(r(435,u.tag))}}function iS(u,h){var m=YJ(u);h.forEach(function(v){var C=see.bind(null,u,v);m.has(v)||(m.add(v),v.then(C,C))})}function pi(u,h){var m=h.deletions;if(m!==null)for(var v=0;v<m.length;v++){var C=m[v],$=u,D=h,B=D;e:for(;B!==null;){switch(B.tag){case 27:if(Co(B.type)){tn=B.stateNode,ei=!1;break e}break;case 5:tn=B.stateNode,ei=!1;break e;case 3:case 4:tn=B.stateNode.containerInfo,ei=!0;break e}B=B.return}if(tn===null)throw Error(r(160));iP($,D,C),tn=null,ei=!1,$=C.alternate,$!==null&&($.return=null),C.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)aP(h,u),h=h.sibling}var as=null;function aP(u,h){var m=u.alternate,v=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:pi(h,u),mi(u),v&4&&(mo(3,u,u.return),qh(3,u),mo(5,u,u.return));break;case 1:pi(h,u),mi(u),v&512&&(Tn||m===null||Os(m,m.return)),v&64&&xa&&(u=u.updateQueue,u!==null&&(v=u.callbacks,v!==null&&(m=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=m===null?v:m.concat(v))));break;case 26:var C=as;if(pi(h,u),mi(u),v&512&&(Tn||m===null||Os(m,m.return)),v&4){var $=m!==null?m.memoizedState:null;if(v=u.memoizedState,m===null)if(v===null)if(u.stateNode===null){e:{v=u.type,m=u.memoizedProps,C=C.ownerDocument||C;t:switch(v){case"title":$=C.getElementsByTagName("title")[0],(!$||$[yh]||$[Sr]||$.namespaceURI==="http://www.w3.org/2000/svg"||$.hasAttribute("itemprop"))&&($=C.createElement(v),C.head.insertBefore($,C.querySelector("head > title"))),fr($,v,m),$[Sr]=u,Zn($),v=$;break e;case"link":var D=eF("link","href",C).get(v+(m.href||""));if(D){for(var B=0;B<D.length;B++)if($=D[B],$.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&$.getAttribute("rel")===(m.rel==null?null:m.rel)&&$.getAttribute("title")===(m.title==null?null:m.title)&&$.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){D.splice(B,1);break t}}$=C.createElement(v),fr($,v,m),C.head.appendChild($);break;case"meta":if(D=eF("meta","content",C).get(v+(m.content||""))){for(B=0;B<D.length;B++)if($=D[B],$.getAttribute("content")===(m.content==null?null:""+m.content)&&$.getAttribute("name")===(m.name==null?null:m.name)&&$.getAttribute("property")===(m.property==null?null:m.property)&&$.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&$.getAttribute("charset")===(m.charSet==null?null:m.charSet)){D.splice(B,1);break t}}$=C.createElement(v),fr($,v,m),C.head.appendChild($);break;default:throw Error(r(468,v))}$[Sr]=u,Zn($),v=$}u.stateNode=v}else tF(C,u.type,u.stateNode);else u.stateNode=JP(C,v,u.memoizedProps);else $!==v?($===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):$.count--,v===null?tF(C,u.type,u.stateNode):JP(C,v,u.memoizedProps)):v===null&&u.stateNode!==null&&eS(u,u.memoizedProps,m.memoizedProps)}break;case 27:pi(h,u),mi(u),v&512&&(Tn||m===null||Os(m,m.return)),m!==null&&v&4&&eS(u,u.memoizedProps,m.memoizedProps);break;case 5:if(pi(h,u),mi(u),v&512&&(Tn||m===null||Os(m,m.return)),u.flags&32){C=u.stateNode;try{Xc(C,"")}catch(de){Ut(u,u.return,de)}}v&4&&u.stateNode!=null&&(C=u.memoizedProps,eS(u,C,m!==null?m.memoizedProps:C)),v&1024&&(rS=!0);break;case 6:if(pi(h,u),mi(u),v&4){if(u.stateNode===null)throw Error(r(162));v=u.memoizedProps,m=u.stateNode;try{m.nodeValue=v}catch(de){Ut(u,u.return,de)}}break;case 3:if(My=null,C=as,as=Ry(h.containerInfo),pi(h,u),as=C,mi(u),v&4&&m!==null&&m.memoizedState.isDehydrated)try{ud(h.containerInfo)}catch(de){Ut(u,u.return,de)}rS&&(rS=!1,oP(u));break;case 4:v=as,as=Ry(u.stateNode.containerInfo),pi(h,u),mi(u),as=v;break;case 12:pi(h,u),mi(u);break;case 13:pi(h,u),mi(u),u.child.flags&8192&&u.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(uS=Xe()),v&4&&(v=u.updateQueue,v!==null&&(u.updateQueue=null,iS(u,v)));break;case 22:C=u.memoizedState!==null;var Y=m!==null&&m.memoizedState!==null,ue=xa,we=Tn;if(xa=ue||C,Tn=we||Y,pi(h,u),Tn=we,xa=ue,mi(u),v&8192)e:for(h=u.stateNode,h._visibility=C?h._visibility&-2:h._visibility|1,C&&(m===null||Y||xa||Tn||Ol(u)),m=null,h=u;;){if(h.tag===5||h.tag===26){if(m===null){Y=m=h;try{if($=Y.stateNode,C)D=$.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{B=Y.stateNode;var Ce=Y.memoizedProps.style,he=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;B.style.display=he==null||typeof he=="boolean"?"":(""+he).trim()}}catch(de){Ut(Y,Y.return,de)}}}else if(h.tag===6){if(m===null){Y=h;try{Y.stateNode.nodeValue=C?"":Y.memoizedProps}catch(de){Ut(Y,Y.return,de)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===u)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break e;for(;h.sibling===null;){if(h.return===null||h.return===u)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}v&4&&(v=u.updateQueue,v!==null&&(m=v.retryQueue,m!==null&&(v.retryQueue=null,iS(u,m))));break;case 19:pi(h,u),mi(u),v&4&&(v=u.updateQueue,v!==null&&(u.updateQueue=null,iS(u,v)));break;case 30:break;case 21:break;default:pi(h,u),mi(u)}}function mi(u){var h=u.flags;if(h&2){try{for(var m,v=u.return;v!==null;){if(JM(v)){m=v;break}v=v.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:var C=m.stateNode,$=tS(u);xy(u,$,C);break;case 5:var D=m.stateNode;m.flags&32&&(Xc(D,""),m.flags&=-33);var B=tS(u);xy(u,B,D);break;case 3:case 4:var Y=m.stateNode.containerInfo,ue=tS(u);nS(u,ue,Y);break;default:throw Error(r(161))}}catch(we){Ut(u,u.return,we)}u.flags&=-3}h&4096&&(u.flags&=-4097)}function oP(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var h=u;oP(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),u=u.sibling}}function go(u,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)nP(u,h.alternate,h),h=h.sibling}function Ol(u){for(u=u.child;u!==null;){var h=u;switch(h.tag){case 0:case 11:case 14:case 15:mo(4,h,h.return),Ol(h);break;case 1:Os(h,h.return);var m=h.stateNode;typeof m.componentWillUnmount=="function"&&ZM(h,h.return,m),Ol(h);break;case 27:nd(h.stateNode);case 26:case 5:Os(h,h.return),Ol(h);break;case 22:h.memoizedState===null&&Ol(h);break;case 30:Ol(h);break;default:Ol(h)}u=u.sibling}}function yo(u,h,m){for(m=m&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var v=h.alternate,C=u,$=h,D=$.flags;switch($.tag){case 0:case 11:case 15:yo(C,$,m),qh(4,$);break;case 1:if(yo(C,$,m),v=$,C=v.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(ue){Ut(v,v.return,ue)}if(v=$,C=v.updateQueue,C!==null){var B=v.stateNode;try{var Y=C.shared.hiddenCallbacks;if(Y!==null)for(C.shared.hiddenCallbacks=null,C=0;C<Y.length;C++)PD(Y[C],B)}catch(ue){Ut(v,v.return,ue)}}m&&D&64&&YM($),Hh($,$.return);break;case 27:eP($);case 26:case 5:yo(C,$,m),m&&v===null&&D&4&&QM($),Hh($,$.return);break;case 12:yo(C,$,m);break;case 13:yo(C,$,m),m&&D&4&&sP(C,$);break;case 22:$.memoizedState===null&&yo(C,$,m),Hh($,$.return);break;case 30:break;default:yo(C,$,m)}h=h.sibling}}function sS(u,h){var m=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),u=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(u=h.memoizedState.cachePool.pool),u!==m&&(u!=null&&u.refCount++,m!=null&&_h(m))}function aS(u,h){u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&_h(u))}function _s(u,h,m,v){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)lP(u,h,m,v),h=h.sibling}function lP(u,h,m,v){var C=h.flags;switch(h.tag){case 0:case 11:case 15:_s(u,h,m,v),C&2048&&qh(9,h);break;case 1:_s(u,h,m,v);break;case 3:_s(u,h,m,v),C&2048&&(u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&_h(u)));break;case 12:if(C&2048){_s(u,h,m,v),u=h.stateNode;try{var $=h.memoizedProps,D=$.id,B=$.onPostCommit;typeof B=="function"&&B(D,h.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(Y){Ut(h,h.return,Y)}}else _s(u,h,m,v);break;case 13:_s(u,h,m,v);break;case 23:break;case 22:$=h.stateNode,D=h.alternate,h.memoizedState!==null?$._visibility&2?_s(u,h,m,v):Kh(u,h):$._visibility&2?_s(u,h,m,v):($._visibility|=2,pu(u,h,m,v,(h.subtreeFlags&10256)!==0)),C&2048&&sS(D,h);break;case 24:_s(u,h,m,v),C&2048&&aS(h.alternate,h);break;default:_s(u,h,m,v)}}function pu(u,h,m,v,C){for(C=C&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var $=u,D=h,B=m,Y=v,ue=D.flags;switch(D.tag){case 0:case 11:case 15:pu($,D,B,Y,C),qh(8,D);break;case 23:break;case 22:var we=D.stateNode;D.memoizedState!==null?we._visibility&2?pu($,D,B,Y,C):Kh($,D):(we._visibility|=2,pu($,D,B,Y,C)),C&&ue&2048&&sS(D.alternate,D);break;case 24:pu($,D,B,Y,C),C&&ue&2048&&aS(D.alternate,D);break;default:pu($,D,B,Y,C)}h=h.sibling}}function Kh(u,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var m=u,v=h,C=v.flags;switch(v.tag){case 22:Kh(m,v),C&2048&&sS(v.alternate,v);break;case 24:Kh(m,v),C&2048&&aS(v.alternate,v);break;default:Kh(m,v)}h=h.sibling}}var Xh=8192;function mu(u){if(u.subtreeFlags&Xh)for(u=u.child;u!==null;)cP(u),u=u.sibling}function cP(u){switch(u.tag){case 26:mu(u),u.flags&Xh&&u.memoizedState!==null&&Mee(as,u.memoizedState,u.memoizedProps);break;case 5:mu(u);break;case 3:case 4:var h=as;as=Ry(u.stateNode.containerInfo),mu(u),as=h;break;case 22:u.memoizedState===null&&(h=u.alternate,h!==null&&h.memoizedState!==null?(h=Xh,Xh=16777216,mu(u),Xh=h):mu(u));break;default:mu(u)}}function uP(u){var h=u.alternate;if(h!==null&&(u=h.child,u!==null)){h.child=null;do h=u.sibling,u.sibling=null,u=h;while(u!==null)}}function Yh(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var v=h[m];Jn=v,hP(v,u)}uP(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)fP(u),u=u.sibling}function fP(u){switch(u.tag){case 0:case 11:case 15:Yh(u),u.flags&2048&&mo(9,u,u.return);break;case 3:Yh(u);break;case 12:Yh(u);break;case 22:var h=u.stateNode;u.memoizedState!==null&&h._visibility&2&&(u.return===null||u.return.tag!==13)?(h._visibility&=-3,wy(u)):Yh(u);break;default:Yh(u)}}function wy(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var v=h[m];Jn=v,hP(v,u)}uP(u)}for(u=u.child;u!==null;){switch(h=u,h.tag){case 0:case 11:case 15:mo(8,h,h.return),wy(h);break;case 22:m=h.stateNode,m._visibility&2&&(m._visibility&=-3,wy(h));break;default:wy(h)}u=u.sibling}}function hP(u,h){for(;Jn!==null;){var m=Jn;switch(m.tag){case 0:case 11:case 15:mo(8,m,h);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var v=m.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:_h(m.memoizedState.cache)}if(v=m.child,v!==null)v.return=m,Jn=v;else e:for(m=u;Jn!==null;){v=Jn;var C=v.sibling,$=v.return;if(rP(v),v===m){Jn=null;break e}if(C!==null){C.return=$,Jn=C;break e}Jn=$}}}var ZJ={getCacheForType:function(u){var h=Cr(jn),m=h.data.get(u);return m===void 0&&(m=u(),h.data.set(u,m)),m}},QJ=typeof WeakMap=="function"?WeakMap:Map,Dt=0,Xt=null,dt=null,wt=0,Mt=0,gi=null,vo=!1,gu=!1,oS=!1,Sa=0,dn=0,bo=0,_l=0,lS=0,Pi=0,yu=0,Zh=null,ti=null,cS=!1,uS=0,Sy=1/0,Cy=null,xo=null,ur=0,wo=null,vu=null,bu=0,fS=0,hS=null,dP=null,Qh=0,dS=null;function yi(){if((Dt&2)!==0&&wt!==0)return wt&-wt;if(M.T!==null){var u=au;return u!==0?u:xS()}return IR()}function pP(){Pi===0&&(Pi=(wt&536870912)===0||It?AR():536870912);var u=Mi.current;return u!==null&&(u.flags|=32),Pi}function vi(u,h,m){(u===Xt&&(Mt===2||Mt===9)||u.cancelPendingCommit!==null)&&(xu(u,0),So(u,wt,Pi,!1)),gh(u,m),((Dt&2)===0||u!==Xt)&&(u===Xt&&((Dt&2)===0&&(_l|=m),dn===4&&So(u,wt,Pi,!1)),Rs(u))}function mP(u,h,m){if((Dt&6)!==0)throw Error(r(327));var v=!m&&(h&124)===0&&(h&u.expiredLanes)===0||mh(u,h),C=v?tee(u,h):gS(u,h,!0),$=v;do{if(C===0){gu&&!v&&So(u,h,0,!1);break}else{if(m=u.current.alternate,$&&!JJ(m)){C=gS(u,h,!1),$=!1;continue}if(C===2){if($=h,u.errorRecoveryDisabledLanes&$)var D=0;else D=u.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){h=D;e:{var B=u;C=Zh;var Y=B.current.memoizedState.isDehydrated;if(Y&&(xu(B,D).flags|=256),D=gS(B,D,!1),D!==2){if(oS&&!Y){B.errorRecoveryDisabledLanes|=$,_l|=$,C=4;break e}$=ti,ti=C,$!==null&&(ti===null?ti=$:ti.push.apply(ti,$))}C=D}if($=!1,C!==2)continue}}if(C===1){xu(u,0),So(u,h,0,!0);break}e:{switch(v=u,$=C,$){case 0:case 1:throw Error(r(345));case 4:if((h&4194048)!==h)break;case 6:So(v,h,Pi,!vo);break e;case 2:ti=null;break;case 3:case 5:break;default:throw Error(r(329))}if((h&62914560)===h&&(C=uS+300-Xe(),10<C)){if(So(v,h,Pi,!vo),Dg(v,0,!0)!==0)break e;v.timeoutHandle=WP(gP.bind(null,v,m,ti,Cy,cS,h,Pi,_l,yu,vo,$,2,-0,0),C);break e}gP(v,m,ti,Cy,cS,h,Pi,_l,yu,vo,$,0,-0,0)}}break}while(!0);Rs(u)}function gP(u,h,m,v,C,$,D,B,Y,ue,we,Ce,he,de){if(u.timeoutHandle=-1,Ce=h.subtreeFlags,(Ce&8192||(Ce&16785408)===16785408)&&(sd={stylesheets:null,count:0,unsuspend:Dee},cP(h),Ce=Pee(),Ce!==null)){u.cancelPendingCommit=Ce(CP.bind(null,u,h,$,m,v,C,D,B,Y,we,1,he,de)),So(u,$,D,!ue);return}CP(u,h,$,m,v,C,D,B,Y)}function JJ(u){for(var h=u;;){var m=h.tag;if((m===0||m===11||m===15)&&h.flags&16384&&(m=h.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var v=0;v<m.length;v++){var C=m[v],$=C.getSnapshot;C=C.value;try{if(!hi($(),C))return!1}catch{return!1}}if(m=h.child,h.subtreeFlags&16384&&m!==null)m.return=h,h=m;else{if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function So(u,h,m,v){h&=~lS,h&=~_l,u.suspendedLanes|=h,u.pingedLanes&=~h,v&&(u.warmLanes|=h),v=u.expirationTimes;for(var C=h;0<C;){var $=31-zn(C),D=1<<$;v[$]=-1,C&=~D}m!==0&&$R(u,m,h)}function Ty(){return(Dt&6)===0?(Jh(0),!1):!0}function pS(){if(dt!==null){if(Mt===0)var u=dt.return;else u=dt,pa=kl=null,Ow(u),hu=null,Uh=0,u=dt;for(;u!==null;)XM(u.alternate,u),u=u.return;dt=null}}function xu(u,h){var m=u.timeoutHandle;m!==-1&&(u.timeoutHandle=-1,yee(m)),m=u.cancelPendingCommit,m!==null&&(u.cancelPendingCommit=null,m()),pS(),Xt=u,dt=m=fa(u.current,null),wt=h,Mt=0,gi=null,vo=!1,gu=mh(u,h),oS=!1,yu=Pi=lS=_l=bo=dn=0,ti=Zh=null,cS=!1,(h&8)!==0&&(h|=h&32);var v=u.entangledLanes;if(v!==0)for(u=u.entanglements,v&=h;0<v;){var C=31-zn(v),$=1<<C;h|=u[C],v&=~$}return Sa=h,qg(),m}function yP(u,h){ct=null,M.H=fy,h===Dh||h===ty?(h=DD(),Mt=3):h===OD?(h=DD(),Mt=4):Mt=h===MM?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,gi=h,dt===null&&(dn=1,gy(u,Oi(h,u.current)))}function vP(){var u=M.H;return M.H=fy,u===null?fy:u}function bP(){var u=M.A;return M.A=ZJ,u}function mS(){dn=4,vo||(wt&4194048)!==wt&&Mi.current!==null||(gu=!0),(bo&134217727)===0&&(_l&134217727)===0||Xt===null||So(Xt,wt,Pi,!1)}function gS(u,h,m){var v=Dt;Dt|=2;var C=vP(),$=bP();(Xt!==u||wt!==h)&&(Cy=null,xu(u,h)),h=!1;var D=dn;e:do try{if(Mt!==0&&dt!==null){var B=dt,Y=gi;switch(Mt){case 8:pS(),D=6;break e;case 3:case 2:case 9:case 6:Mi.current===null&&(h=!0);var ue=Mt;if(Mt=0,gi=null,wu(u,B,Y,ue),m&&gu){D=0;break e}break;default:ue=Mt,Mt=0,gi=null,wu(u,B,Y,ue)}}eee(),D=dn;break}catch(we){yP(u,we)}while(!0);return h&&u.shellSuspendCounter++,pa=kl=null,Dt=v,M.H=C,M.A=$,dt===null&&(Xt=null,wt=0,qg()),D}function eee(){for(;dt!==null;)xP(dt)}function tee(u,h){var m=Dt;Dt|=2;var v=vP(),C=bP();Xt!==u||wt!==h?(Cy=null,Sy=Xe()+500,xu(u,h)):gu=mh(u,h);e:do try{if(Mt!==0&&dt!==null){h=dt;var $=gi;t:switch(Mt){case 1:Mt=0,gi=null,wu(u,h,$,1);break;case 2:case 9:if(_D($)){Mt=0,gi=null,wP(h);break}h=function(){Mt!==2&&Mt!==9||Xt!==u||(Mt=7),Rs(u)},$.then(h,h);break e;case 3:Mt=7;break e;case 4:Mt=5;break e;case 7:_D($)?(Mt=0,gi=null,wP(h)):(Mt=0,gi=null,wu(u,h,$,7));break;case 5:var D=null;switch(dt.tag){case 26:D=dt.memoizedState;case 5:case 27:var B=dt;if(!D||nF(D)){Mt=0,gi=null;var Y=B.sibling;if(Y!==null)dt=Y;else{var ue=B.return;ue!==null?(dt=ue,Ay(ue)):dt=null}break t}}Mt=0,gi=null,wu(u,h,$,5);break;case 6:Mt=0,gi=null,wu(u,h,$,6);break;case 8:pS(),dn=6;break e;default:throw Error(r(462))}}nee();break}catch(we){yP(u,we)}while(!0);return pa=kl=null,M.H=v,M.A=C,Dt=m,dt!==null?0:(Xt=null,wt=0,qg(),dn)}function nee(){for(;dt!==null&&!Je();)xP(dt)}function xP(u){var h=HM(u.alternate,u,Sa);u.memoizedProps=u.pendingProps,h===null?Ay(u):dt=h}function wP(u){var h=u,m=h.alternate;switch(h.tag){case 15:case 0:h=jM(m,h,h.pendingProps,h.type,void 0,wt);break;case 11:h=jM(m,h,h.pendingProps,h.type.render,h.ref,wt);break;case 5:Ow(h);default:XM(m,h),h=dt=SD(h,Sa),h=HM(m,h,Sa)}u.memoizedProps=u.pendingProps,h===null?Ay(u):dt=h}function wu(u,h,m,v){pa=kl=null,Ow(h),hu=null,Uh=0;var C=h.return;try{if(GJ(u,C,h,m,wt)){dn=1,gy(u,Oi(m,u.current)),dt=null;return}}catch($){if(C!==null)throw dt=C,$;dn=1,gy(u,Oi(m,u.current)),dt=null;return}h.flags&32768?(It||v===1?u=!0:gu||(wt&536870912)!==0?u=!1:(vo=u=!0,(v===2||v===9||v===3||v===6)&&(v=Mi.current,v!==null&&v.tag===13&&(v.flags|=16384))),SP(h,u)):Ay(h)}function Ay(u){var h=u;do{if((h.flags&32768)!==0){SP(h,vo);return}u=h.return;var m=HJ(h.alternate,h,Sa);if(m!==null){dt=m;return}if(h=h.sibling,h!==null){dt=h;return}dt=h=u}while(h!==null);dn===0&&(dn=5)}function SP(u,h){do{var m=KJ(u.alternate,u);if(m!==null){m.flags&=32767,dt=m;return}if(m=u.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!h&&(u=u.sibling,u!==null)){dt=u;return}dt=u=m}while(u!==null);dn=6,dt=null}function CP(u,h,m,v,C,$,D,B,Y){u.cancelPendingCommit=null;do ky();while(ur!==0);if((Dt&6)!==0)throw Error(r(327));if(h!==null){if(h===u.current)throw Error(r(177));if($=h.lanes|h.childLanes,$|=aw,DQ(u,m,$,D,B,Y),u===Xt&&(dt=Xt=null,wt=0),vu=h,wo=u,bu=m,fS=$,hS=C,dP=v,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,aee(Sn,function(){return EP(),null})):(u.callbackNode=null,u.callbackPriority=0),v=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||v){v=M.T,M.T=null,C=j.p,j.p=2,D=Dt,Dt|=4;try{XJ(u,h,m)}finally{Dt=D,j.p=C,M.T=v}}ur=1,TP(),AP(),kP()}}function TP(){if(ur===1){ur=0;var u=wo,h=vu,m=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||m){m=M.T,M.T=null;var v=j.p;j.p=2;var C=Dt;Dt|=4;try{aP(h,u);var $=ES,D=hD(u.containerInfo),B=$.focusedElem,Y=$.selectionRange;if(D!==B&&B&&B.ownerDocument&&fD(B.ownerDocument.documentElement,B)){if(Y!==null&&tw(B)){var ue=Y.start,we=Y.end;if(we===void 0&&(we=ue),"selectionStart"in B)B.selectionStart=ue,B.selectionEnd=Math.min(we,B.value.length);else{var Ce=B.ownerDocument||document,he=Ce&&Ce.defaultView||window;if(he.getSelection){var de=he.getSelection(),et=B.textContent.length,He=Math.min(Y.start,et),Bt=Y.end===void 0?He:Math.min(Y.end,et);!de.extend&&He>Bt&&(D=Bt,Bt=He,He=D);var ae=uD(B,He),te=uD(B,Bt);if(ae&&te&&(de.rangeCount!==1||de.anchorNode!==ae.node||de.anchorOffset!==ae.offset||de.focusNode!==te.node||de.focusOffset!==te.offset)){var le=Ce.createRange();le.setStart(ae.node,ae.offset),de.removeAllRanges(),He>Bt?(de.addRange(le),de.extend(te.node,te.offset)):(le.setEnd(te.node,te.offset),de.addRange(le))}}}}for(Ce=[],de=B;de=de.parentNode;)de.nodeType===1&&Ce.push({element:de,left:de.scrollLeft,top:de.scrollTop});for(typeof B.focus=="function"&&B.focus(),B=0;B<Ce.length;B++){var Se=Ce[B];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}Ly=!!$S,ES=$S=null}finally{Dt=C,j.p=v,M.T=m}}u.current=h,ur=2}}function AP(){if(ur===2){ur=0;var u=wo,h=vu,m=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||m){m=M.T,M.T=null;var v=j.p;j.p=2;var C=Dt;Dt|=4;try{nP(u,h.alternate,h)}finally{Dt=C,j.p=v,M.T=m}}ur=3}}function kP(){if(ur===4||ur===3){ur=0,qe();var u=wo,h=vu,m=bu,v=dP;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?ur=5:(ur=0,vu=wo=null,$P(u,u.pendingLanes));var C=u.pendingLanes;if(C===0&&(xo=null),D1(m),h=h.stateNode,fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(Yr,h,void 0,(h.current.flags&128)===128)}catch{}if(v!==null){h=M.T,C=j.p,j.p=2,M.T=null;try{for(var $=u.onRecoverableError,D=0;D<v.length;D++){var B=v[D];$(B.value,{componentStack:B.stack})}}finally{M.T=h,j.p=C}}(bu&3)!==0&&ky(),Rs(u),C=u.pendingLanes,(m&4194090)!==0&&(C&42)!==0?u===dS?Qh++:(Qh=0,dS=u):Qh=0,Jh(0)}}function $P(u,h){(u.pooledCacheLanes&=h)===0&&(h=u.pooledCache,h!=null&&(u.pooledCache=null,_h(h)))}function ky(u){return TP(),AP(),kP(),EP()}function EP(){if(ur!==5)return!1;var u=wo,h=fS;fS=0;var m=D1(bu),v=M.T,C=j.p;try{j.p=32>m?32:m,M.T=null,m=hS,hS=null;var $=wo,D=bu;if(ur=0,vu=wo=null,bu=0,(Dt&6)!==0)throw Error(r(331));var B=Dt;if(Dt|=4,fP($.current),lP($,$.current,D,m),Dt=B,Jh(0,!1),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(Yr,$)}catch{}return!0}finally{j.p=C,M.T=v,$P(u,h)}}function IP(u,h,m){h=Oi(m,h),h=Gw(u.stateNode,h,2),u=uo(u,h,2),u!==null&&(gh(u,2),Rs(u))}function Ut(u,h,m){if(u.tag===3)IP(u,u,m);else for(;h!==null;){if(h.tag===3){IP(h,u,m);break}else if(h.tag===1){var v=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(xo===null||!xo.has(v))){u=Oi(m,u),m=RM(2),v=uo(h,m,2),v!==null&&(DM(m,v,h,u),gh(v,2),Rs(v));break}}h=h.return}}function yS(u,h,m){var v=u.pingCache;if(v===null){v=u.pingCache=new QJ;var C=new Set;v.set(h,C)}else C=v.get(h),C===void 0&&(C=new Set,v.set(h,C));C.has(m)||(oS=!0,C.add(m),u=ree.bind(null,u,h,m),h.then(u,u))}function ree(u,h,m){var v=u.pingCache;v!==null&&v.delete(h),u.pingedLanes|=u.suspendedLanes&m,u.warmLanes&=~m,Xt===u&&(wt&m)===m&&(dn===4||dn===3&&(wt&62914560)===wt&&300>Xe()-uS?(Dt&2)===0&&xu(u,0):lS|=m,yu===wt&&(yu=0)),Rs(u)}function NP(u,h){h===0&&(h=kR()),u=nu(u,h),u!==null&&(gh(u,h),Rs(u))}function iee(u){var h=u.memoizedState,m=0;h!==null&&(m=h.retryLane),NP(u,m)}function see(u,h){var m=0;switch(u.tag){case 13:var v=u.stateNode,C=u.memoizedState;C!==null&&(m=C.retryLane);break;case 19:v=u.stateNode;break;case 22:v=u.stateNode._retryCache;break;default:throw Error(r(314))}v!==null&&v.delete(h),NP(u,m)}function aee(u,h){return Ge(u,h)}var $y=null,Su=null,vS=!1,Ey=!1,bS=!1,Rl=0;function Rs(u){u!==Su&&u.next===null&&(Su===null?$y=Su=u:Su=Su.next=u),Ey=!0,vS||(vS=!0,lee())}function Jh(u,h){if(!bS&&Ey){bS=!0;do for(var m=!1,v=$y;v!==null;){if(u!==0){var C=v.pendingLanes;if(C===0)var $=0;else{var D=v.suspendedLanes,B=v.pingedLanes;$=(1<<31-zn(42|u)+1)-1,$&=C&~(D&~B),$=$&201326741?$&201326741|1:$?$|2:0}$!==0&&(m=!0,DP(v,$))}else $=wt,$=Dg(v,v===Xt?$:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),($&3)===0||mh(v,$)||(m=!0,DP(v,$));v=v.next}while(m);bS=!1}}function oee(){OP()}function OP(){Ey=vS=!1;var u=0;Rl!==0&&(gee()&&(u=Rl),Rl=0);for(var h=Xe(),m=null,v=$y;v!==null;){var C=v.next,$=_P(v,h);$===0?(v.next=null,m===null?$y=C:m.next=C,C===null&&(Su=m)):(m=v,(u!==0||($&3)!==0)&&(Ey=!0)),v=C}Jh(u)}function _P(u,h){for(var m=u.suspendedLanes,v=u.pingedLanes,C=u.expirationTimes,$=u.pendingLanes&-62914561;0<$;){var D=31-zn($),B=1<<D,Y=C[D];Y===-1?((B&m)===0||(B&v)!==0)&&(C[D]=RQ(B,h)):Y<=h&&(u.expiredLanes|=B),$&=~B}if(h=Xt,m=wt,m=Dg(u,u===h?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),v=u.callbackNode,m===0||u===h&&(Mt===2||Mt===9)||u.cancelPendingCommit!==null)return v!==null&&v!==null&&ze(v),u.callbackNode=null,u.callbackPriority=0;if((m&3)===0||mh(u,m)){if(h=m&-m,h===u.callbackPriority)return h;switch(v!==null&&ze(v),D1(m)){case 2:case 8:m=Kt;break;case 32:m=Sn;break;case 268435456:m=Kr;break;default:m=Sn}return v=RP.bind(null,u),m=Ge(m,v),u.callbackPriority=h,u.callbackNode=m,h}return v!==null&&v!==null&&ze(v),u.callbackPriority=2,u.callbackNode=null,2}function RP(u,h){if(ur!==0&&ur!==5)return u.callbackNode=null,u.callbackPriority=0,null;var m=u.callbackNode;if(ky()&&u.callbackNode!==m)return null;var v=wt;return v=Dg(u,u===Xt?v:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),v===0?null:(mP(u,v,h),_P(u,Xe()),u.callbackNode!=null&&u.callbackNode===m?RP.bind(null,u):null)}function DP(u,h){if(ky())return null;mP(u,h,!0)}function lee(){vee(function(){(Dt&6)!==0?Ge(Bn,oee):OP()})}function xS(){return Rl===0&&(Rl=AR()),Rl}function MP(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:Bg(""+u)}function PP(u,h){var m=h.ownerDocument.createElement("input");return m.name=h.name,m.value=h.value,u.id&&m.setAttribute("form",u.id),h.parentNode.insertBefore(m,h),u=new FormData(u),m.parentNode.removeChild(m),u}function cee(u,h,m,v,C){if(h==="submit"&&m&&m.stateNode===C){var $=MP((C[Zr]||null).action),D=v.submitter;D&&(h=(h=D[Zr]||null)?MP(h.formAction):D.getAttribute("formAction"),h!==null&&($=h,D=null));var B=new Ug("action","action",null,v,C);u.push({event:B,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(Rl!==0){var Y=D?PP(C,D):new FormData(C);zw(m,{pending:!0,data:Y,method:C.method,action:$},null,Y)}}else typeof $=="function"&&(B.preventDefault(),Y=D?PP(C,D):new FormData(C),zw(m,{pending:!0,data:Y,method:C.method,action:$},$,Y))},currentTarget:C}]})}}for(var wS=0;wS<sw.length;wS++){var SS=sw[wS],uee=SS.toLowerCase(),fee=SS[0].toUpperCase()+SS.slice(1);ss(uee,"on"+fee)}ss(mD,"onAnimationEnd"),ss(gD,"onAnimationIteration"),ss(yD,"onAnimationStart"),ss("dblclick","onDoubleClick"),ss("focusin","onFocus"),ss("focusout","onBlur"),ss(EJ,"onTransitionRun"),ss(IJ,"onTransitionStart"),ss(NJ,"onTransitionCancel"),ss(vD,"onTransitionEnd"),qc("onMouseEnter",["mouseout","mouseover"]),qc("onMouseLeave",["mouseout","mouseover"]),qc("onPointerEnter",["pointerout","pointerover"]),qc("onPointerLeave",["pointerout","pointerover"]),yl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yl("onBeforeInput",["compositionend","keypress","textInput","paste"]),yl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ed="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hee=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ed));function FP(u,h){h=(h&4)!==0;for(var m=0;m<u.length;m++){var v=u[m],C=v.event;v=v.listeners;e:{var $=void 0;if(h)for(var D=v.length-1;0<=D;D--){var B=v[D],Y=B.instance,ue=B.currentTarget;if(B=B.listener,Y!==$&&C.isPropagationStopped())break e;$=B,C.currentTarget=ue;try{$(C)}catch(we){my(we)}C.currentTarget=null,$=Y}else for(D=0;D<v.length;D++){if(B=v[D],Y=B.instance,ue=B.currentTarget,B=B.listener,Y!==$&&C.isPropagationStopped())break e;$=B,C.currentTarget=ue;try{$(C)}catch(we){my(we)}C.currentTarget=null,$=Y}}}}function pt(u,h){var m=h[M1];m===void 0&&(m=h[M1]=new Set);var v=u+"__bubble";m.has(v)||(LP(h,u,2,!1),m.add(v))}function CS(u,h,m){var v=0;h&&(v|=4),LP(m,u,v,h)}var Iy="_reactListening"+Math.random().toString(36).slice(2);function TS(u){if(!u[Iy]){u[Iy]=!0,OR.forEach(function(m){m!=="selectionchange"&&(hee.has(m)||CS(m,!1,u),CS(m,!0,u))});var h=u.nodeType===9?u:u.ownerDocument;h===null||h[Iy]||(h[Iy]=!0,CS("selectionchange",!1,h))}}function LP(u,h,m,v){switch(lF(h)){case 2:var C=Bee;break;case 8:C=zee;break;default:C=LS}m=C.bind(null,h,m,u),C=void 0,!q1||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(C=!0),v?C!==void 0?u.addEventListener(h,m,{capture:!0,passive:C}):u.addEventListener(h,m,!0):C!==void 0?u.addEventListener(h,m,{passive:C}):u.addEventListener(h,m,!1)}function AS(u,h,m,v,C){var $=v;if((h&1)===0&&(h&2)===0&&v!==null)e:for(;;){if(v===null)return;var D=v.tag;if(D===3||D===4){var B=v.stateNode.containerInfo;if(B===C)break;if(D===4)for(D=v.return;D!==null;){var Y=D.tag;if((Y===3||Y===4)&&D.stateNode.containerInfo===C)return;D=D.return}for(;B!==null;){if(D=Uc(B),D===null)return;if(Y=D.tag,Y===5||Y===6||Y===26||Y===27){v=$=D;continue e}B=B.parentNode}}v=v.return}GR(function(){var ue=$,we=W1(m),Ce=[];e:{var he=bD.get(u);if(he!==void 0){var de=Ug,et=u;switch(u){case"keypress":if(jg(m)===0)break e;case"keydown":case"keyup":de=aJ;break;case"focusin":et="focus",de=Y1;break;case"focusout":et="blur",de=Y1;break;case"beforeblur":case"afterblur":de=Y1;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=KR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=KQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=cJ;break;case mD:case gD:case yD:de=ZQ;break;case vD:de=fJ;break;case"scroll":case"scrollend":de=qQ;break;case"wheel":de=dJ;break;case"copy":case"cut":case"paste":de=JQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=YR;break;case"toggle":case"beforetoggle":de=mJ}var He=(h&4)!==0,Bt=!He&&(u==="scroll"||u==="scrollend"),ae=He?he!==null?he+"Capture":null:he;He=[];for(var te=ue,le;te!==null;){var Se=te;if(le=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||le===null||ae===null||(Se=bh(te,ae),Se!=null&&He.push(td(te,Se,le))),Bt)break;te=te.return}0<He.length&&(he=new de(he,et,null,m,we),Ce.push({event:he,listeners:He}))}}if((h&7)===0){e:{if(he=u==="mouseover"||u==="pointerover",de=u==="mouseout"||u==="pointerout",he&&m!==U1&&(et=m.relatedTarget||m.fromElement)&&(Uc(et)||et[Vc]))break e;if((de||he)&&(he=we.window===we?we:(he=we.ownerDocument)?he.defaultView||he.parentWindow:window,de?(et=m.relatedTarget||m.toElement,de=ue,et=et?Uc(et):null,et!==null&&(Bt=s(et),He=et.tag,et!==Bt||He!==5&&He!==27&&He!==6)&&(et=null)):(de=null,et=ue),de!==et)){if(He=KR,Se="onMouseLeave",ae="onMouseEnter",te="mouse",(u==="pointerout"||u==="pointerover")&&(He=YR,Se="onPointerLeave",ae="onPointerEnter",te="pointer"),Bt=de==null?he:vh(de),le=et==null?he:vh(et),he=new He(Se,te+"leave",de,m,we),he.target=Bt,he.relatedTarget=le,Se=null,Uc(we)===ue&&(He=new He(ae,te+"enter",et,m,we),He.target=le,He.relatedTarget=Bt,Se=He),Bt=Se,de&&et)t:{for(He=de,ae=et,te=0,le=He;le;le=Cu(le))te++;for(le=0,Se=ae;Se;Se=Cu(Se))le++;for(;0<te-le;)He=Cu(He),te--;for(;0<le-te;)ae=Cu(ae),le--;for(;te--;){if(He===ae||ae!==null&&He===ae.alternate)break t;He=Cu(He),ae=Cu(ae)}He=null}else He=null;de!==null&&BP(Ce,he,de,He,!1),et!==null&&Bt!==null&&BP(Ce,Bt,et,He,!0)}}e:{if(he=ue?vh(ue):window,de=he.nodeName&&he.nodeName.toLowerCase(),de==="select"||de==="input"&&he.type==="file")var Pe=iD;else if(nD(he))if(sD)Pe=AJ;else{Pe=CJ;var ht=SJ}else de=he.nodeName,!de||de.toLowerCase()!=="input"||he.type!=="checkbox"&&he.type!=="radio"?ue&&V1(ue.elementType)&&(Pe=iD):Pe=TJ;if(Pe&&(Pe=Pe(u,ue))){rD(Ce,Pe,m,we);break e}ht&&ht(u,he,ue),u==="focusout"&&ue&&he.type==="number"&&ue.memoizedProps.value!=null&&j1(he,"number",he.value)}switch(ht=ue?vh(ue):window,u){case"focusin":(nD(ht)||ht.contentEditable==="true")&&(Jc=ht,nw=ue,$h=null);break;case"focusout":$h=nw=Jc=null;break;case"mousedown":rw=!0;break;case"contextmenu":case"mouseup":case"dragend":rw=!1,dD(Ce,m,we);break;case"selectionchange":if($J)break;case"keydown":case"keyup":dD(Ce,m,we)}var Ve;if(Q1)e:{switch(u){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else Qc?eD(u,m)&&(Ye="onCompositionEnd"):u==="keydown"&&m.keyCode===229&&(Ye="onCompositionStart");Ye&&(ZR&&m.locale!=="ko"&&(Qc||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&Qc&&(Ve=qR()):(ao=we,H1="value"in ao?ao.value:ao.textContent,Qc=!0)),ht=Ny(ue,Ye),0<ht.length&&(Ye=new XR(Ye,u,null,m,we),Ce.push({event:Ye,listeners:ht}),Ve?Ye.data=Ve:(Ve=tD(m),Ve!==null&&(Ye.data=Ve)))),(Ve=yJ?vJ(u,m):bJ(u,m))&&(Ye=Ny(ue,"onBeforeInput"),0<Ye.length&&(ht=new XR("onBeforeInput","beforeinput",null,m,we),Ce.push({event:ht,listeners:Ye}),ht.data=Ve)),cee(Ce,u,ue,m,we)}FP(Ce,h)})}function td(u,h,m){return{instance:u,listener:h,currentTarget:m}}function Ny(u,h){for(var m=h+"Capture",v=[];u!==null;){var C=u,$=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||$===null||(C=bh(u,m),C!=null&&v.unshift(td(u,C,$)),C=bh(u,h),C!=null&&v.push(td(u,C,$))),u.tag===3)return v;u=u.return}return[]}function Cu(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function BP(u,h,m,v,C){for(var $=h._reactName,D=[];m!==null&&m!==v;){var B=m,Y=B.alternate,ue=B.stateNode;if(B=B.tag,Y!==null&&Y===v)break;B!==5&&B!==26&&B!==27||ue===null||(Y=ue,C?(ue=bh(m,$),ue!=null&&D.unshift(td(m,ue,Y))):C||(ue=bh(m,$),ue!=null&&D.push(td(m,ue,Y)))),m=m.return}D.length!==0&&u.push({event:h,listeners:D})}var dee=/\r\n?/g,pee=/\u0000|\uFFFD/g;function zP(u){return(typeof u=="string"?u:""+u).replace(dee,`
`).replace(pee,"")}function jP(u,h){return h=zP(h),zP(u)===h}function Oy(){}function Lt(u,h,m,v,C,$){switch(m){case"children":typeof v=="string"?h==="body"||h==="textarea"&&v===""||Xc(u,v):(typeof v=="number"||typeof v=="bigint")&&h!=="body"&&Xc(u,""+v);break;case"className":Pg(u,"class",v);break;case"tabIndex":Pg(u,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Pg(u,m,v);break;case"style":UR(u,v,$);break;case"data":if(h!=="object"){Pg(u,"data",v);break}case"src":case"href":if(v===""&&(h!=="a"||m!=="href")){u.removeAttribute(m);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){u.removeAttribute(m);break}v=Bg(""+v),u.setAttribute(m,v);break;case"action":case"formAction":if(typeof v=="function"){u.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof $=="function"&&(m==="formAction"?(h!=="input"&&Lt(u,h,"name",C.name,C,null),Lt(u,h,"formEncType",C.formEncType,C,null),Lt(u,h,"formMethod",C.formMethod,C,null),Lt(u,h,"formTarget",C.formTarget,C,null)):(Lt(u,h,"encType",C.encType,C,null),Lt(u,h,"method",C.method,C,null),Lt(u,h,"target",C.target,C,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){u.removeAttribute(m);break}v=Bg(""+v),u.setAttribute(m,v);break;case"onClick":v!=null&&(u.onclick=Oy);break;case"onScroll":v!=null&&pt("scroll",u);break;case"onScrollEnd":v!=null&&pt("scrollend",u);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(m=v.__html,m!=null){if(C.children!=null)throw Error(r(60));u.innerHTML=m}}break;case"multiple":u.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":u.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){u.removeAttribute("xlink:href");break}m=Bg(""+v),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?u.setAttribute(m,""+v):u.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?u.setAttribute(m,""):u.removeAttribute(m);break;case"capture":case"download":v===!0?u.setAttribute(m,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?u.setAttribute(m,v):u.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?u.setAttribute(m,v):u.removeAttribute(m);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?u.removeAttribute(m):u.setAttribute(m,v);break;case"popover":pt("beforetoggle",u),pt("toggle",u),Mg(u,"popover",v);break;case"xlinkActuate":ca(u,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":ca(u,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":ca(u,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":ca(u,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":ca(u,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":ca(u,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":ca(u,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":ca(u,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":ca(u,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Mg(u,"is",v);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=WQ.get(m)||m,Mg(u,m,v))}}function kS(u,h,m,v,C,$){switch(m){case"style":UR(u,v,$);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(m=v.__html,m!=null){if(C.children!=null)throw Error(r(60));u.innerHTML=m}}break;case"children":typeof v=="string"?Xc(u,v):(typeof v=="number"||typeof v=="bigint")&&Xc(u,""+v);break;case"onScroll":v!=null&&pt("scroll",u);break;case"onScrollEnd":v!=null&&pt("scrollend",u);break;case"onClick":v!=null&&(u.onclick=Oy);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_R.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(C=m.endsWith("Capture"),h=m.slice(2,C?m.length-7:void 0),$=u[Zr]||null,$=$!=null?$[m]:null,typeof $=="function"&&u.removeEventListener(h,$,C),typeof v=="function")){typeof $!="function"&&$!==null&&(m in u?u[m]=null:u.hasAttribute(m)&&u.removeAttribute(m)),u.addEventListener(h,v,C);break e}m in u?u[m]=v:v===!0?u.setAttribute(m,""):Mg(u,m,v)}}}function fr(u,h,m){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pt("error",u),pt("load",u);var v=!1,C=!1,$;for($ in m)if(m.hasOwnProperty($)){var D=m[$];if(D!=null)switch($){case"src":v=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,h));default:Lt(u,h,$,D,m,null)}}C&&Lt(u,h,"srcSet",m.srcSet,m,null),v&&Lt(u,h,"src",m.src,m,null);return;case"input":pt("invalid",u);var B=$=D=C=null,Y=null,ue=null;for(v in m)if(m.hasOwnProperty(v)){var we=m[v];if(we!=null)switch(v){case"name":C=we;break;case"type":D=we;break;case"checked":Y=we;break;case"defaultChecked":ue=we;break;case"value":$=we;break;case"defaultValue":B=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(r(137,h));break;default:Lt(u,h,v,we,m,null)}}BR(u,$,B,Y,ue,D,C,!1),Fg(u);return;case"select":pt("invalid",u),v=D=$=null;for(C in m)if(m.hasOwnProperty(C)&&(B=m[C],B!=null))switch(C){case"value":$=B;break;case"defaultValue":D=B;break;case"multiple":v=B;default:Lt(u,h,C,B,m,null)}h=$,m=D,u.multiple=!!v,h!=null?Kc(u,!!v,h,!1):m!=null&&Kc(u,!!v,m,!0);return;case"textarea":pt("invalid",u),$=C=v=null;for(D in m)if(m.hasOwnProperty(D)&&(B=m[D],B!=null))switch(D){case"value":v=B;break;case"defaultValue":C=B;break;case"children":$=B;break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(91));break;default:Lt(u,h,D,B,m,null)}jR(u,v,C,$),Fg(u);return;case"option":for(Y in m)if(m.hasOwnProperty(Y)&&(v=m[Y],v!=null))switch(Y){case"selected":u.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:Lt(u,h,Y,v,m,null)}return;case"dialog":pt("beforetoggle",u),pt("toggle",u),pt("cancel",u),pt("close",u);break;case"iframe":case"object":pt("load",u);break;case"video":case"audio":for(v=0;v<ed.length;v++)pt(ed[v],u);break;case"image":pt("error",u),pt("load",u);break;case"details":pt("toggle",u);break;case"embed":case"source":case"link":pt("error",u),pt("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ue in m)if(m.hasOwnProperty(ue)&&(v=m[ue],v!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,h));default:Lt(u,h,ue,v,m,null)}return;default:if(V1(h)){for(we in m)m.hasOwnProperty(we)&&(v=m[we],v!==void 0&&kS(u,h,we,v,m,void 0));return}}for(B in m)m.hasOwnProperty(B)&&(v=m[B],v!=null&&Lt(u,h,B,v,m,null))}function mee(u,h,m,v){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,$=null,D=null,B=null,Y=null,ue=null,we=null;for(de in m){var Ce=m[de];if(m.hasOwnProperty(de)&&Ce!=null)switch(de){case"checked":break;case"value":break;case"defaultValue":Y=Ce;default:v.hasOwnProperty(de)||Lt(u,h,de,null,v,Ce)}}for(var he in v){var de=v[he];if(Ce=m[he],v.hasOwnProperty(he)&&(de!=null||Ce!=null))switch(he){case"type":$=de;break;case"name":C=de;break;case"checked":ue=de;break;case"defaultChecked":we=de;break;case"value":D=de;break;case"defaultValue":B=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,h));break;default:de!==Ce&&Lt(u,h,he,de,v,Ce)}}z1(u,D,B,Y,ue,we,$,C);return;case"select":de=D=B=he=null;for($ in m)if(Y=m[$],m.hasOwnProperty($)&&Y!=null)switch($){case"value":break;case"multiple":de=Y;default:v.hasOwnProperty($)||Lt(u,h,$,null,v,Y)}for(C in v)if($=v[C],Y=m[C],v.hasOwnProperty(C)&&($!=null||Y!=null))switch(C){case"value":he=$;break;case"defaultValue":B=$;break;case"multiple":D=$;default:$!==Y&&Lt(u,h,C,$,v,Y)}h=B,m=D,v=de,he!=null?Kc(u,!!m,he,!1):!!v!=!!m&&(h!=null?Kc(u,!!m,h,!0):Kc(u,!!m,m?[]:"",!1));return;case"textarea":de=he=null;for(B in m)if(C=m[B],m.hasOwnProperty(B)&&C!=null&&!v.hasOwnProperty(B))switch(B){case"value":break;case"children":break;default:Lt(u,h,B,null,v,C)}for(D in v)if(C=v[D],$=m[D],v.hasOwnProperty(D)&&(C!=null||$!=null))switch(D){case"value":he=C;break;case"defaultValue":de=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(r(91));break;default:C!==$&&Lt(u,h,D,C,v,$)}zR(u,he,de);return;case"option":for(var et in m)if(he=m[et],m.hasOwnProperty(et)&&he!=null&&!v.hasOwnProperty(et))switch(et){case"selected":u.selected=!1;break;default:Lt(u,h,et,null,v,he)}for(Y in v)if(he=v[Y],de=m[Y],v.hasOwnProperty(Y)&&he!==de&&(he!=null||de!=null))switch(Y){case"selected":u.selected=he&&typeof he!="function"&&typeof he!="symbol";break;default:Lt(u,h,Y,he,v,de)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in m)he=m[He],m.hasOwnProperty(He)&&he!=null&&!v.hasOwnProperty(He)&&Lt(u,h,He,null,v,he);for(ue in v)if(he=v[ue],de=m[ue],v.hasOwnProperty(ue)&&he!==de&&(he!=null||de!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(137,h));break;default:Lt(u,h,ue,he,v,de)}return;default:if(V1(h)){for(var Bt in m)he=m[Bt],m.hasOwnProperty(Bt)&&he!==void 0&&!v.hasOwnProperty(Bt)&&kS(u,h,Bt,void 0,v,he);for(we in v)he=v[we],de=m[we],!v.hasOwnProperty(we)||he===de||he===void 0&&de===void 0||kS(u,h,we,he,v,de);return}}for(var ae in m)he=m[ae],m.hasOwnProperty(ae)&&he!=null&&!v.hasOwnProperty(ae)&&Lt(u,h,ae,null,v,he);for(Ce in v)he=v[Ce],de=m[Ce],!v.hasOwnProperty(Ce)||he===de||he==null&&de==null||Lt(u,h,Ce,he,v,de)}var $S=null,ES=null;function _y(u){return u.nodeType===9?u:u.ownerDocument}function VP(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function UP(u,h){if(u===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&h==="foreignObject"?0:u}function IS(u,h){return u==="textarea"||u==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var NS=null;function gee(){var u=window.event;return u&&u.type==="popstate"?u===NS?!1:(NS=u,!0):(NS=null,!1)}var WP=typeof setTimeout=="function"?setTimeout:void 0,yee=typeof clearTimeout=="function"?clearTimeout:void 0,GP=typeof Promise=="function"?Promise:void 0,vee=typeof queueMicrotask=="function"?queueMicrotask:typeof GP<"u"?function(u){return GP.resolve(null).then(u).catch(bee)}:WP;function bee(u){setTimeout(function(){throw u})}function Co(u){return u==="head"}function qP(u,h){var m=h,v=0,C=0;do{var $=m.nextSibling;if(u.removeChild(m),$&&$.nodeType===8)if(m=$.data,m==="/$"){if(0<v&&8>v){m=v;var D=u.ownerDocument;if(m&1&&nd(D.documentElement),m&2&&nd(D.body),m&4)for(m=D.head,nd(m),D=m.firstChild;D;){var B=D.nextSibling,Y=D.nodeName;D[yh]||Y==="SCRIPT"||Y==="STYLE"||Y==="LINK"&&D.rel.toLowerCase()==="stylesheet"||m.removeChild(D),D=B}}if(C===0){u.removeChild($),ud(h);return}C--}else m==="$"||m==="$?"||m==="$!"?C++:v=m.charCodeAt(0)-48;else v=0;m=$}while(m);ud(h)}function OS(u){var h=u.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var m=h;switch(h=h.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":OS(m),P1(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}u.removeChild(m)}}function xee(u,h,m,v){for(;u.nodeType===1;){var C=m;if(u.nodeName.toLowerCase()!==h.toLowerCase()){if(!v&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(v){if(!u[yh])switch(h){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if($=u.getAttribute("rel"),$==="stylesheet"&&u.hasAttribute("data-precedence"))break;if($!==C.rel||u.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||u.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||u.getAttribute("title")!==(C.title==null?null:C.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if($=u.getAttribute("src"),($!==(C.src==null?null:C.src)||u.getAttribute("type")!==(C.type==null?null:C.type)||u.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&$&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(h==="input"&&u.type==="hidden"){var $=C.name==null?null:""+C.name;if(C.type==="hidden"&&u.getAttribute("name")===$)return u}else return u;if(u=os(u.nextSibling),u===null)break}return null}function wee(u,h,m){if(h==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!m||(u=os(u.nextSibling),u===null))return null;return u}function _S(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState==="complete"}function See(u,h){var m=u.ownerDocument;if(u.data!=="$?"||m.readyState==="complete")h();else{var v=function(){h(),m.removeEventListener("DOMContentLoaded",v)};m.addEventListener("DOMContentLoaded",v),u._reactRetry=v}}function os(u){for(;u!=null;u=u.nextSibling){var h=u.nodeType;if(h===1||h===3)break;if(h===8){if(h=u.data,h==="$"||h==="$!"||h==="$?"||h==="F!"||h==="F")break;if(h==="/$")return null}}return u}var RS=null;function HP(u){u=u.previousSibling;for(var h=0;u;){if(u.nodeType===8){var m=u.data;if(m==="$"||m==="$!"||m==="$?"){if(h===0)return u;h--}else m==="/$"&&h++}u=u.previousSibling}return null}function KP(u,h,m){switch(h=_y(m),u){case"html":if(u=h.documentElement,!u)throw Error(r(452));return u;case"head":if(u=h.head,!u)throw Error(r(453));return u;case"body":if(u=h.body,!u)throw Error(r(454));return u;default:throw Error(r(451))}}function nd(u){for(var h=u.attributes;h.length;)u.removeAttributeNode(h[0]);P1(u)}var Fi=new Map,XP=new Set;function Ry(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var Ca=j.d;j.d={f:Cee,r:Tee,D:Aee,C:kee,L:$ee,m:Eee,X:Nee,S:Iee,M:Oee};function Cee(){var u=Ca.f(),h=Ty();return u||h}function Tee(u){var h=Wc(u);h!==null&&h.tag===5&&h.type==="form"?mM(h):Ca.r(u)}var Tu=typeof document>"u"?null:document;function YP(u,h,m){var v=Tu;if(v&&typeof h=="string"&&h){var C=Ni(h);C='link[rel="'+u+'"][href="'+C+'"]',typeof m=="string"&&(C+='[crossorigin="'+m+'"]'),XP.has(C)||(XP.add(C),u={rel:u,crossOrigin:m,href:h},v.querySelector(C)===null&&(h=v.createElement("link"),fr(h,"link",u),Zn(h),v.head.appendChild(h)))}}function Aee(u){Ca.D(u),YP("dns-prefetch",u,null)}function kee(u,h){Ca.C(u,h),YP("preconnect",u,h)}function $ee(u,h,m){Ca.L(u,h,m);var v=Tu;if(v&&u&&h){var C='link[rel="preload"][as="'+Ni(h)+'"]';h==="image"&&m&&m.imageSrcSet?(C+='[imagesrcset="'+Ni(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(C+='[imagesizes="'+Ni(m.imageSizes)+'"]')):C+='[href="'+Ni(u)+'"]';var $=C;switch(h){case"style":$=Au(u);break;case"script":$=ku(u)}Fi.has($)||(u=f({rel:"preload",href:h==="image"&&m&&m.imageSrcSet?void 0:u,as:h},m),Fi.set($,u),v.querySelector(C)!==null||h==="style"&&v.querySelector(rd($))||h==="script"&&v.querySelector(id($))||(h=v.createElement("link"),fr(h,"link",u),Zn(h),v.head.appendChild(h)))}}function Eee(u,h){Ca.m(u,h);var m=Tu;if(m&&u){var v=h&&typeof h.as=="string"?h.as:"script",C='link[rel="modulepreload"][as="'+Ni(v)+'"][href="'+Ni(u)+'"]',$=C;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":$=ku(u)}if(!Fi.has($)&&(u=f({rel:"modulepreload",href:u},h),Fi.set($,u),m.querySelector(C)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(id($)))return}v=m.createElement("link"),fr(v,"link",u),Zn(v),m.head.appendChild(v)}}}function Iee(u,h,m){Ca.S(u,h,m);var v=Tu;if(v&&u){var C=Gc(v).hoistableStyles,$=Au(u);h=h||"default";var D=C.get($);if(!D){var B={loading:0,preload:null};if(D=v.querySelector(rd($)))B.loading=5;else{u=f({rel:"stylesheet",href:u,"data-precedence":h},m),(m=Fi.get($))&&DS(u,m);var Y=D=v.createElement("link");Zn(Y),fr(Y,"link",u),Y._p=new Promise(function(ue,we){Y.onload=ue,Y.onerror=we}),Y.addEventListener("load",function(){B.loading|=1}),Y.addEventListener("error",function(){B.loading|=2}),B.loading|=4,Dy(D,h,v)}D={type:"stylesheet",instance:D,count:1,state:B},C.set($,D)}}}function Nee(u,h){Ca.X(u,h);var m=Tu;if(m&&u){var v=Gc(m).hoistableScripts,C=ku(u),$=v.get(C);$||($=m.querySelector(id(C)),$||(u=f({src:u,async:!0},h),(h=Fi.get(C))&&MS(u,h),$=m.createElement("script"),Zn($),fr($,"link",u),m.head.appendChild($)),$={type:"script",instance:$,count:1,state:null},v.set(C,$))}}function Oee(u,h){Ca.M(u,h);var m=Tu;if(m&&u){var v=Gc(m).hoistableScripts,C=ku(u),$=v.get(C);$||($=m.querySelector(id(C)),$||(u=f({src:u,async:!0,type:"module"},h),(h=Fi.get(C))&&MS(u,h),$=m.createElement("script"),Zn($),fr($,"link",u),m.head.appendChild($)),$={type:"script",instance:$,count:1,state:null},v.set(C,$))}}function ZP(u,h,m,v){var C=(C=be.current)?Ry(C):null;if(!C)throw Error(r(446));switch(u){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(h=Au(m.href),m=Gc(C).hoistableStyles,v=m.get(h),v||(v={type:"style",instance:null,count:0,state:null},m.set(h,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){u=Au(m.href);var $=Gc(C).hoistableStyles,D=$.get(u);if(D||(C=C.ownerDocument||C,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},$.set(u,D),($=C.querySelector(rd(u)))&&!$._p&&(D.instance=$,D.state.loading=5),Fi.has(u)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Fi.set(u,m),$||_ee(C,u,m,D.state))),h&&v===null)throw Error(r(528,""));return D}if(h&&v!==null)throw Error(r(529,""));return null;case"script":return h=m.async,m=m.src,typeof m=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=ku(m),m=Gc(C).hoistableScripts,v=m.get(h),v||(v={type:"script",instance:null,count:0,state:null},m.set(h,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,u))}}function Au(u){return'href="'+Ni(u)+'"'}function rd(u){return'link[rel="stylesheet"]['+u+"]"}function QP(u){return f({},u,{"data-precedence":u.precedence,precedence:null})}function _ee(u,h,m,v){u.querySelector('link[rel="preload"][as="style"]['+h+"]")?v.loading=1:(h=u.createElement("link"),v.preload=h,h.addEventListener("load",function(){return v.loading|=1}),h.addEventListener("error",function(){return v.loading|=2}),fr(h,"link",m),Zn(h),u.head.appendChild(h))}function ku(u){return'[src="'+Ni(u)+'"]'}function id(u){return"script[async]"+u}function JP(u,h,m){if(h.count++,h.instance===null)switch(h.type){case"style":var v=u.querySelector('style[data-href~="'+Ni(m.href)+'"]');if(v)return h.instance=v,Zn(v),v;var C=f({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return v=(u.ownerDocument||u).createElement("style"),Zn(v),fr(v,"style",C),Dy(v,m.precedence,u),h.instance=v;case"stylesheet":C=Au(m.href);var $=u.querySelector(rd(C));if($)return h.state.loading|=4,h.instance=$,Zn($),$;v=QP(m),(C=Fi.get(C))&&DS(v,C),$=(u.ownerDocument||u).createElement("link"),Zn($);var D=$;return D._p=new Promise(function(B,Y){D.onload=B,D.onerror=Y}),fr($,"link",v),h.state.loading|=4,Dy($,m.precedence,u),h.instance=$;case"script":return $=ku(m.src),(C=u.querySelector(id($)))?(h.instance=C,Zn(C),C):(v=m,(C=Fi.get($))&&(v=f({},m),MS(v,C)),u=u.ownerDocument||u,C=u.createElement("script"),Zn(C),fr(C,"link",v),u.head.appendChild(C),h.instance=C);case"void":return null;default:throw Error(r(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(v=h.instance,h.state.loading|=4,Dy(v,m.precedence,u));return h.instance}function Dy(u,h,m){for(var v=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=v.length?v[v.length-1]:null,$=C,D=0;D<v.length;D++){var B=v[D];if(B.dataset.precedence===h)$=B;else if($!==C)break}$?$.parentNode.insertBefore(u,$.nextSibling):(h=m.nodeType===9?m.head:m,h.insertBefore(u,h.firstChild))}function DS(u,h){u.crossOrigin==null&&(u.crossOrigin=h.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=h.referrerPolicy),u.title==null&&(u.title=h.title)}function MS(u,h){u.crossOrigin==null&&(u.crossOrigin=h.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=h.referrerPolicy),u.integrity==null&&(u.integrity=h.integrity)}var My=null;function eF(u,h,m){if(My===null){var v=new Map,C=My=new Map;C.set(m,v)}else C=My,v=C.get(m),v||(v=new Map,C.set(m,v));if(v.has(u))return v;for(v.set(u,null),m=m.getElementsByTagName(u),C=0;C<m.length;C++){var $=m[C];if(!($[yh]||$[Sr]||u==="link"&&$.getAttribute("rel")==="stylesheet")&&$.namespaceURI!=="http://www.w3.org/2000/svg"){var D=$.getAttribute(h)||"";D=u+D;var B=v.get(D);B?B.push($):v.set(D,[$])}}return v}function tF(u,h,m){u=u.ownerDocument||u,u.head.insertBefore(m,h==="title"?u.querySelector("head > title"):null)}function Ree(u,h,m){if(m===1||h.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return u=h.disabled,typeof h.precedence=="string"&&u==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function nF(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}var sd=null;function Dee(){}function Mee(u,h,m){if(sd===null)throw Error(r(475));var v=sd;if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var C=Au(m.href),$=u.querySelector(rd(C));if($){u=$._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(v.count++,v=Py.bind(v),u.then(v,v)),h.state.loading|=4,h.instance=$,Zn($);return}$=u.ownerDocument||u,m=QP(m),(C=Fi.get(C))&&DS(m,C),$=$.createElement("link"),Zn($);var D=$;D._p=new Promise(function(B,Y){D.onload=B,D.onerror=Y}),fr($,"link",m),h.instance=$}v.stylesheets===null&&(v.stylesheets=new Map),v.stylesheets.set(h,u),(u=h.state.preload)&&(h.state.loading&3)===0&&(v.count++,h=Py.bind(v),u.addEventListener("load",h),u.addEventListener("error",h))}}function Pee(){if(sd===null)throw Error(r(475));var u=sd;return u.stylesheets&&u.count===0&&PS(u,u.stylesheets),0<u.count?function(h){var m=setTimeout(function(){if(u.stylesheets&&PS(u,u.stylesheets),u.unsuspend){var v=u.unsuspend;u.unsuspend=null,v()}},6e4);return u.unsuspend=h,function(){u.unsuspend=null,clearTimeout(m)}}:null}function Py(){if(this.count--,this.count===0){if(this.stylesheets)PS(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var Fy=null;function PS(u,h){u.stylesheets=null,u.unsuspend!==null&&(u.count++,Fy=new Map,h.forEach(Fee,u),Fy=null,Py.call(u))}function Fee(u,h){if(!(h.state.loading&4)){var m=Fy.get(u);if(m)var v=m.get(null);else{m=new Map,Fy.set(u,m);for(var C=u.querySelectorAll("link[data-precedence],style[data-precedence]"),$=0;$<C.length;$++){var D=C[$];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(m.set(D.dataset.precedence,D),v=D)}v&&m.set(null,v)}C=h.instance,D=C.getAttribute("data-precedence"),$=m.get(D)||v,$===v&&m.set(null,C),m.set(D,C),this.count++,v=Py.bind(this),C.addEventListener("load",v),C.addEventListener("error",v),$?$.parentNode.insertBefore(C,$.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(C,u.firstChild)),h.state.loading|=4}}var ad={$$typeof:T,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function Lee(u,h,m,v,C,$,D,B){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_1(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_1(0),this.hiddenUpdates=_1(null),this.identifierPrefix=v,this.onUncaughtError=C,this.onCaughtError=$,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function rF(u,h,m,v,C,$,D,B,Y,ue,we,Ce){return u=new Lee(u,h,m,D,B,Y,ue,Ce),h=1,$===!0&&(h|=24),$=di(3,null,null,h),u.current=$,$.stateNode=u,h=yw(),h.refCount++,u.pooledCache=h,h.refCount++,$.memoizedState={element:v,isDehydrated:m,cache:h},ww($),u}function iF(u){return u?(u=ru,u):ru}function sF(u,h,m,v,C,$){C=iF(C),v.context===null?v.context=C:v.pendingContext=C,v=co(h),v.payload={element:m},$=$===void 0?null:$,$!==null&&(v.callback=$),m=uo(u,v,h),m!==null&&(vi(m,u,h),Ph(m,u,h))}function aF(u,h){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var m=u.retryLane;u.retryLane=m!==0&&m<h?m:h}}function FS(u,h){aF(u,h),(u=u.alternate)&&aF(u,h)}function oF(u){if(u.tag===13){var h=nu(u,67108864);h!==null&&vi(h,u,67108864),FS(u,67108864)}}var Ly=!0;function Bee(u,h,m,v){var C=M.T;M.T=null;var $=j.p;try{j.p=2,LS(u,h,m,v)}finally{j.p=$,M.T=C}}function zee(u,h,m,v){var C=M.T;M.T=null;var $=j.p;try{j.p=8,LS(u,h,m,v)}finally{j.p=$,M.T=C}}function LS(u,h,m,v){if(Ly){var C=BS(v);if(C===null)AS(u,h,v,By,m),cF(u,v);else if(Vee(C,u,h,m,v))v.stopPropagation();else if(cF(u,v),h&4&&-1<jee.indexOf(u)){for(;C!==null;){var $=Wc(C);if($!==null)switch($.tag){case 3:if($=$.stateNode,$.current.memoizedState.isDehydrated){var D=la($.pendingLanes);if(D!==0){var B=$;for(B.pendingLanes|=2,B.entangledLanes|=2;D;){var Y=1<<31-zn(D);B.entanglements[1]|=Y,D&=~Y}Rs($),(Dt&6)===0&&(Sy=Xe()+500,Jh(0))}}break;case 13:B=nu($,2),B!==null&&vi(B,$,2),Ty(),FS($,2)}if($=BS(v),$===null&&AS(u,h,v,By,m),$===C)break;C=$}C!==null&&v.stopPropagation()}else AS(u,h,v,null,m)}}function BS(u){return u=W1(u),zS(u)}var By=null;function zS(u){if(By=null,u=Uc(u),u!==null){var h=s(u);if(h===null)u=null;else{var m=h.tag;if(m===13){if(u=a(h),u!==null)return u;u=null}else if(m===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;u=null}else h!==u&&(u=null)}}return By=u,null}function lF(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gt()){case Bn:return 2;case Kt:return 8;case Sn:case an:return 32;case Kr:return 268435456;default:return 32}default:return 32}}var jS=!1,To=null,Ao=null,ko=null,od=new Map,ld=new Map,$o=[],jee="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cF(u,h){switch(u){case"focusin":case"focusout":To=null;break;case"dragenter":case"dragleave":Ao=null;break;case"mouseover":case"mouseout":ko=null;break;case"pointerover":case"pointerout":od.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":ld.delete(h.pointerId)}}function cd(u,h,m,v,C,$){return u===null||u.nativeEvent!==$?(u={blockedOn:h,domEventName:m,eventSystemFlags:v,nativeEvent:$,targetContainers:[C]},h!==null&&(h=Wc(h),h!==null&&oF(h)),u):(u.eventSystemFlags|=v,h=u.targetContainers,C!==null&&h.indexOf(C)===-1&&h.push(C),u)}function Vee(u,h,m,v,C){switch(h){case"focusin":return To=cd(To,u,h,m,v,C),!0;case"dragenter":return Ao=cd(Ao,u,h,m,v,C),!0;case"mouseover":return ko=cd(ko,u,h,m,v,C),!0;case"pointerover":var $=C.pointerId;return od.set($,cd(od.get($)||null,u,h,m,v,C)),!0;case"gotpointercapture":return $=C.pointerId,ld.set($,cd(ld.get($)||null,u,h,m,v,C)),!0}return!1}function uF(u){var h=Uc(u.target);if(h!==null){var m=s(h);if(m!==null){if(h=m.tag,h===13){if(h=a(m),h!==null){u.blockedOn=h,MQ(u.priority,function(){if(m.tag===13){var v=yi();v=R1(v);var C=nu(m,v);C!==null&&vi(C,m,v),FS(m,v)}});return}}else if(h===3&&m.stateNode.current.memoizedState.isDehydrated){u.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}u.blockedOn=null}function zy(u){if(u.blockedOn!==null)return!1;for(var h=u.targetContainers;0<h.length;){var m=BS(u.nativeEvent);if(m===null){m=u.nativeEvent;var v=new m.constructor(m.type,m);U1=v,m.target.dispatchEvent(v),U1=null}else return h=Wc(m),h!==null&&oF(h),u.blockedOn=m,!1;h.shift()}return!0}function fF(u,h,m){zy(u)&&m.delete(h)}function Uee(){jS=!1,To!==null&&zy(To)&&(To=null),Ao!==null&&zy(Ao)&&(Ao=null),ko!==null&&zy(ko)&&(ko=null),od.forEach(fF),ld.forEach(fF)}function jy(u,h){u.blockedOn===h&&(u.blockedOn=null,jS||(jS=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Uee)))}var Vy=null;function hF(u){Vy!==u&&(Vy=u,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Vy===u&&(Vy=null);for(var h=0;h<u.length;h+=3){var m=u[h],v=u[h+1],C=u[h+2];if(typeof v!="function"){if(zS(v||m)===null)continue;break}var $=Wc(m);$!==null&&(u.splice(h,3),h-=3,zw($,{pending:!0,data:C,method:m.method,action:v},v,C))}}))}function ud(u){function h(Y){return jy(Y,u)}To!==null&&jy(To,u),Ao!==null&&jy(Ao,u),ko!==null&&jy(ko,u),od.forEach(h),ld.forEach(h);for(var m=0;m<$o.length;m++){var v=$o[m];v.blockedOn===u&&(v.blockedOn=null)}for(;0<$o.length&&(m=$o[0],m.blockedOn===null);)uF(m),m.blockedOn===null&&$o.shift();if(m=(u.ownerDocument||u).$$reactFormReplay,m!=null)for(v=0;v<m.length;v+=3){var C=m[v],$=m[v+1],D=C[Zr]||null;if(typeof $=="function")D||hF(m);else if(D){var B=null;if($&&$.hasAttribute("formAction")){if(C=$,D=$[Zr]||null)B=D.formAction;else if(zS(C)!==null)continue}else B=D.action;typeof B=="function"?m[v+1]=B:(m.splice(v,3),v-=3),hF(m)}}}function VS(u){this._internalRoot=u}Uy.prototype.render=VS.prototype.render=function(u){var h=this._internalRoot;if(h===null)throw Error(r(409));var m=h.current,v=yi();sF(m,v,u,h,null,null)},Uy.prototype.unmount=VS.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var h=u.containerInfo;sF(u.current,2,null,u,null,null),Ty(),h[Vc]=null}};function Uy(u){this._internalRoot=u}Uy.prototype.unstable_scheduleHydration=function(u){if(u){var h=IR();u={blockedOn:null,target:u,priority:h};for(var m=0;m<$o.length&&h!==0&&h<$o[m].priority;m++);$o.splice(m,0,u),m===0&&uF(u)}};var dF=e.version;if(dF!=="19.1.0")throw Error(r(527,dF,"19.1.0"));j.findDOMNode=function(u){var h=u._reactInternals;if(h===void 0)throw typeof u.render=="function"?Error(r(188)):(u=Object.keys(u).join(","),Error(r(268,u)));return u=l(h),u=u!==null?c(u):null,u=u===null?null:u.stateNode,u};var Wee={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wy.isDisabled&&Wy.supportsFiber)try{Yr=Wy.inject(Wee),fn=Wy}catch{}}return hd.createRoot=function(u,h){if(!i(u))throw Error(r(299));var m=!1,v="",C=IM,$=NM,D=OM,B=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(v=h.identifierPrefix),h.onUncaughtError!==void 0&&(C=h.onUncaughtError),h.onCaughtError!==void 0&&($=h.onCaughtError),h.onRecoverableError!==void 0&&(D=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(B=h.unstable_transitionCallbacks)),h=rF(u,1,!1,null,null,m,v,C,$,D,B,null),u[Vc]=h.current,TS(u),new VS(h)},hd.hydrateRoot=function(u,h,m){if(!i(u))throw Error(r(299));var v=!1,C="",$=IM,D=NM,B=OM,Y=null,ue=null;return m!=null&&(m.unstable_strictMode===!0&&(v=!0),m.identifierPrefix!==void 0&&(C=m.identifierPrefix),m.onUncaughtError!==void 0&&($=m.onUncaughtError),m.onCaughtError!==void 0&&(D=m.onCaughtError),m.onRecoverableError!==void 0&&(B=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(Y=m.unstable_transitionCallbacks),m.formState!==void 0&&(ue=m.formState)),h=rF(u,1,!0,h,m??null,v,C,$,D,B,Y,ue),h.context=iF(null),m=h.current,v=yi(),v=R1(v),C=co(v),C.callback=null,uo(m,C,v),m=v,h.current.lanes=m,gh(h,m),Rs(h),u[Vc]=h.current,TS(u),new Uy(h)},hd.version="19.1.0",hd}var CF;function ete(){if(CF)return GS.exports;CF=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),GS.exports=Jee(),GS.exports}var tte=ete();const eI=Q.createContext({});function tI(t){const e=Q.useRef(null);return e.current===null&&(e.current=t()),e.current}const nI=typeof window<"u",EG=nI?Q.useLayoutEffect:Q.useEffect,y0=Q.createContext(null);function rI(t,e){t.indexOf(e)===-1&&t.push(e)}function iI(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ja=(t,e,n)=>n>e?e:n<t?t:n;let sI=()=>{};const Va={},IG=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function NG(t){return typeof t=="object"&&t!==null}const OG=t=>/^0[^.\s]+$/u.test(t);function aI(t){let e;return()=>(e===void 0&&(e=t()),e)}const Yi=t=>t,nte=(t,e)=>n=>e(t(n)),rm=(...t)=>t.reduce(nte),ep=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class oI{constructor(){this.subscriptions=[]}add(e){return rI(this.subscriptions,e),()=>iI(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Us=t=>t*1e3,Ws=t=>t/1e3;function _G(t,e){return e?t*(1e3/e):0}const RG=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,rte=1e-7,ite=12;function ste(t,e,n,r,i){let s,a,o=0;do a=e+(n-e)/2,s=RG(a,r,i)-t,s>0?n=a:e=a;while(Math.abs(s)>rte&&++o<ite);return a}function im(t,e,n,r){if(t===e&&n===r)return Yi;const i=s=>ste(s,0,1,t,n);return s=>s===0||s===1?s:RG(i(s),e,r)}const DG=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,MG=t=>e=>1-t(1-e),PG=im(.33,1.53,.69,.99),lI=MG(PG),FG=DG(lI),LG=t=>(t*=2)<1?.5*lI(t):.5*(2-Math.pow(2,-10*(t-1))),cI=t=>1-Math.sin(Math.acos(t)),BG=MG(cI),zG=DG(cI),ate=im(.42,0,1,1),ote=im(0,0,.58,1),jG=im(.42,0,.58,1),lte=t=>Array.isArray(t)&&typeof t[0]!="number",VG=t=>Array.isArray(t)&&typeof t[0]=="number",cte={linear:Yi,easeIn:ate,easeInOut:jG,easeOut:ote,circIn:cI,circInOut:zG,circOut:BG,backIn:lI,backInOut:FG,backOut:PG,anticipate:LG},ute=t=>typeof t=="string",TF=t=>{if(VG(t)){sI(t.length===4);const[e,n,r,i]=t;return im(e,n,r,i)}else if(ute(t))return cte[t];return t},qy=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],AF={value:null};function fte(t,e){let n=new Set,r=new Set,i=!1,s=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function c(d){a.has(d)&&(f.schedule(d),t()),l++,d(o)}const f={schedule:(d,p=!1,g=!1)=>{const x=g&&i?n:r;return p&&a.add(d),x.has(d)||x.add(d),d},cancel:d=>{r.delete(d),a.delete(d)},process:d=>{if(o=d,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),e&&AF.value&&AF.value.frameloop[e].push(l),l=0,n.clear(),i=!1,s&&(s=!1,f.process(d))}};return f}const hte=40;function UG(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=qy.reduce((T,k)=>(T[k]=fte(s,e?k:void 0),T),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:f,update:d,preRender:p,render:g,postRender:y}=a,x=()=>{const T=Va.useManualTiming?i.timestamp:performance.now();n=!1,Va.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(T-i.timestamp,hte),1)),i.timestamp=T,i.isProcessing=!0,o.process(i),l.process(i),c.process(i),f.process(i),d.process(i),p.process(i),g.process(i),y.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(x))},b=()=>{n=!0,r=!0,i.isProcessing||t(x)};return{schedule:qy.reduce((T,k)=>{const A=a[k];return T[k]=(E,I=!1,N=!1)=>(n||b(),A.schedule(E,I,N)),T},{}),cancel:T=>{for(let k=0;k<qy.length;k++)a[qy[k]].cancel(T)},state:i,steps:a}}const{schedule:un,cancel:qo,state:dr,steps:XS}=UG(typeof requestAnimationFrame<"u"?requestAnimationFrame:Yi,!0);let kv;function dte(){kv=void 0}const ii={now:()=>(kv===void 0&&ii.set(dr.isProcessing||Va.useManualTiming?dr.timestamp:performance.now()),kv),set:t=>{kv=t,queueMicrotask(dte)}},WG=t=>e=>typeof e=="string"&&e.startsWith(t),uI=WG("--"),pte=WG("var(--"),fI=t=>pte(t)?mte.test(t.split("/*")[0].trim()):!1,mte=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Pf={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},tp={...Pf,transform:t=>ja(0,1,t)},Hy={...Pf,default:1},Vd=t=>Math.round(t*1e5)/1e5,hI=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function gte(t){return t==null}const yte=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,dI=(t,e)=>n=>!!(typeof n=="string"&&yte.test(n)&&n.startsWith(t)||e&&!gte(n)&&Object.prototype.hasOwnProperty.call(n,e)),GG=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,a,o]=r.match(hI);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},vte=t=>ja(0,255,t),YS={...Pf,transform:t=>Math.round(vte(t))},ql={test:dI("rgb","red"),parse:GG("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+YS.transform(t)+", "+YS.transform(e)+", "+YS.transform(n)+", "+Vd(tp.transform(r))+")"};function bte(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const N2={test:dI("#"),parse:bte,transform:ql.transform},sm=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),No=sm("deg"),Gs=sm("%"),tt=sm("px"),xte=sm("vh"),wte=sm("vw"),kF={...Gs,parse:t=>Gs.parse(t)/100,transform:t=>Gs.transform(t*100)},Fu={test:dI("hsl","hue"),parse:GG("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Gs.transform(Vd(e))+", "+Gs.transform(Vd(n))+", "+Vd(tp.transform(r))+")"},Ar={test:t=>ql.test(t)||N2.test(t)||Fu.test(t),parse:t=>ql.test(t)?ql.parse(t):Fu.test(t)?Fu.parse(t):N2.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ql.transform(t):Fu.transform(t)},Ste=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Cte(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(hI))==null?void 0:e.length)||0)+(((n=t.match(Ste))==null?void 0:n.length)||0)>0}const qG="number",HG="color",Tte="var",Ate="var(",$F="${}",kte=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function np(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=e.replace(kte,l=>(Ar.test(l)?(r.color.push(s),i.push(HG),n.push(Ar.parse(l))):l.startsWith(Ate)?(r.var.push(s),i.push(Tte),n.push(l)):(r.number.push(s),i.push(qG),n.push(parseFloat(l))),++s,$F)).split($F);return{values:n,split:o,indexes:r,types:i}}function KG(t){return np(t).values}function XG(t){const{split:e,types:n}=np(t),r=e.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=e[a],i[a]!==void 0){const o=n[a];o===qG?s+=Vd(i[a]):o===HG?s+=Ar.transform(i[a]):s+=i[a]}return s}}const $te=t=>typeof t=="number"?0:t;function Ete(t){const e=KG(t);return XG(t)(e.map($te))}const Ho={test:Cte,parse:KG,createTransformer:XG,getAnimatableNone:Ete};function ZS(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Ite({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,a=0;if(!e)i=s=a=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;i=ZS(l,o,t+1/3),s=ZS(l,o,t),a=ZS(l,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function Bv(t,e){return n=>n>0?e:t}const ln=(t,e,n)=>t+(e-t)*n,QS=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Nte=[N2,ql,Fu],Ote=t=>Nte.find(e=>e.test(t));function EF(t){const e=Ote(t);if(!e)return!1;let n=e.parse(t);return e===Fu&&(n=Ite(n)),n}const IF=(t,e)=>{const n=EF(t),r=EF(e);if(!n||!r)return Bv(t,e);const i={...n};return s=>(i.red=QS(n.red,r.red,s),i.green=QS(n.green,r.green,s),i.blue=QS(n.blue,r.blue,s),i.alpha=ln(n.alpha,r.alpha,s),ql.transform(i))},O2=new Set(["none","hidden"]);function _te(t,e){return O2.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Rte(t,e){return n=>ln(t,e,n)}function pI(t){return typeof t=="number"?Rte:typeof t=="string"?fI(t)?Bv:Ar.test(t)?IF:Pte:Array.isArray(t)?YG:typeof t=="object"?Ar.test(t)?IF:Dte:Bv}function YG(t,e){const n=[...t],r=n.length,i=t.map((s,a)=>pI(s)(s,e[a]));return s=>{for(let a=0;a<r;a++)n[a]=i[a](s);return n}}function Dte(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=pI(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function Mte(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],a=t.indexes[s][r[s]],o=t.values[a]??0;n[i]=o,r[s]++}return n}const Pte=(t,e)=>{const n=Ho.createTransformer(e),r=np(t),i=np(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?O2.has(t)&&!i.values.length||O2.has(e)&&!r.values.length?_te(t,e):rm(YG(Mte(r,i),i.values),n):Bv(t,e)};function ZG(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ln(t,e,n):pI(t)(t,e)}const Fte=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>un.update(e,n),stop:()=>qo(e),now:()=>dr.isProcessing?dr.timestamp:ii.now()}},QG=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(s/(i-1))+", ";return`linear(${r.substring(0,r.length-2)})`},zv=2e4;function mI(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<zv;)e+=n,r=t.next(e);return e>=zv?1/0:e}function Lte(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(mI(r),zv);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:Ws(i)}}const Bte=5;function JG(t,e,n){const r=Math.max(e-Bte,0);return _G(n-t(r),e-r)}const pn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},NF=.001;function zte({duration:t=pn.duration,bounce:e=pn.bounce,velocity:n=pn.velocity,mass:r=pn.mass}){let i,s,a=1-e;a=ja(pn.minDamping,pn.maxDamping,a),t=ja(pn.minDuration,pn.maxDuration,Ws(t)),a<1?(i=c=>{const f=c*a,d=f*t,p=f-n,g=_2(c,a),y=Math.exp(-d);return NF-p/g*y},s=c=>{const d=c*a*t,p=d*n+n,g=Math.pow(a,2)*Math.pow(c,2)*t,y=Math.exp(-d),x=_2(Math.pow(c,2),a);return(-i(c)+NF>0?-1:1)*((p-g)*y)/x}):(i=c=>{const f=Math.exp(-c*t),d=(c-n)*t+1;return-.001+f*d},s=c=>{const f=Math.exp(-c*t),d=(n-c)*(t*t);return f*d});const o=5/t,l=Vte(i,s,o);if(t=Us(t),isNaN(l))return{stiffness:pn.stiffness,damping:pn.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:a*2*Math.sqrt(r*c),duration:t}}}const jte=12;function Vte(t,e,n){let r=n;for(let i=1;i<jte;i++)r=r-t(r)/e(r);return r}function _2(t,e){return t*Math.sqrt(1-e*e)}const Ute=["duration","bounce"],Wte=["stiffness","damping","mass"];function OF(t,e){return e.some(n=>t[n]!==void 0)}function Gte(t){let e={velocity:pn.velocity,stiffness:pn.stiffness,damping:pn.damping,mass:pn.mass,isResolvedFromDuration:!1,...t};if(!OF(t,Wte)&&OF(t,Ute))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*ja(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:pn.mass,stiffness:i,damping:s}}else{const n=zte(t);e={...e,...n,mass:pn.mass},e.isResolvedFromDuration=!0}return e}function jv(t=pn.visualDuration,e=pn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:f,duration:d,velocity:p,isResolvedFromDuration:g}=Gte({...n,velocity:-Ws(n.velocity||0)}),y=p||0,x=c/(2*Math.sqrt(l*f)),b=a-s,w=Ws(Math.sqrt(l/f)),S=Math.abs(b)<5;r||(r=S?pn.restSpeed.granular:pn.restSpeed.default),i||(i=S?pn.restDelta.granular:pn.restDelta.default);let T;if(x<1){const A=_2(w,x);T=E=>{const I=Math.exp(-x*w*E);return a-I*((y+x*w*b)/A*Math.sin(A*E)+b*Math.cos(A*E))}}else if(x===1)T=A=>a-Math.exp(-w*A)*(b+(y+w*b)*A);else{const A=w*Math.sqrt(x*x-1);T=E=>{const I=Math.exp(-x*w*E),N=Math.min(A*E,300);return a-I*((y+x*w*b)*Math.sinh(N)+A*b*Math.cosh(N))/A}}const k={calculatedDuration:g&&d||null,next:A=>{const E=T(A);if(g)o.done=A>=d;else{let I=A===0?y:0;x<1&&(I=A===0?Us(y):JG(T,A,E));const N=Math.abs(I)<=r,_=Math.abs(a-E)<=i;o.done=N&&_}return o.value=o.done?a:E,o},toString:()=>{const A=Math.min(mI(k),zv),E=QG(I=>k.next(A*I).value,A,30);return A+"ms "+E},toTransition:()=>{}};return k}jv.applyToOptions=t=>{const e=Lte(t,100,jv);return t.ease=e.ease,t.duration=Us(e.duration),t.type="keyframes",t};function R2({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:f}){const d=t[0],p={done:!1,value:d},g=N=>o!==void 0&&N<o||l!==void 0&&N>l,y=N=>o===void 0?l:l===void 0||Math.abs(o-N)<Math.abs(l-N)?o:l;let x=n*e;const b=d+x,w=a===void 0?b:a(b);w!==b&&(x=w-d);const S=N=>-x*Math.exp(-N/r),T=N=>w+S(N),k=N=>{const _=S(N),R=T(N);p.done=Math.abs(_)<=c,p.value=p.done?w:R};let A,E;const I=N=>{g(p.value)&&(A=N,E=jv({keyframes:[p.value,y(p.value)],velocity:JG(T,N,p.value),damping:i,stiffness:s,restDelta:c,restSpeed:f}))};return I(0),{calculatedDuration:null,next:N=>{let _=!1;return!E&&A===void 0&&(_=!0,k(N),I(N)),A!==void 0&&N>=A?E.next(N-A):(!_&&k(N),p)}}}function qte(t,e,n){const r=[],i=n||Va.mix||ZG,s=t.length-1;for(let a=0;a<s;a++){let o=i(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||Yi:e;o=rm(l,o)}r.push(o)}return r}function Hte(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(sI(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=qte(e,r,i),l=o.length,c=f=>{if(a&&f<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(f<t[d+1]);d++);const p=ep(t[d],t[d+1],f);return o[d](p)};return n?f=>c(ja(t[0],t[s-1],f)):c}function Kte(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=ep(0,e,r);t.push(ln(n,1,i))}}function Xte(t){const e=[0];return Kte(e,t.length-1),e}function Yte(t,e){return t.map(n=>n*e)}function Zte(t,e){return t.map(()=>e||jG).splice(0,t.length-1)}function Ud({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=lte(r)?r.map(TF):TF(r),s={done:!1,value:e[0]},a=Yte(n&&n.length===e.length?n:Xte(e),t),o=Hte(a,e,{ease:Array.isArray(i)?i:Zte(e,i)});return{calculatedDuration:t,next:l=>(s.value=o(l),s.done=l>=t,s)}}const Qte=t=>t!==null;function gI(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(Qte),o=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const Jte={decay:R2,inertia:R2,tween:Ud,keyframes:Ud,spring:jv};function eq(t){typeof t.type=="string"&&(t.type=Jte[t.type])}class yI{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const ene=t=>t/100;class vI extends yI{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==ii.now()&&this.tick(ii.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;eq(e);const{type:n=Ud,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=e;let{keyframes:o}=e;const l=n||Ud;l!==Ud&&typeof o[0]!="number"&&(this.mixKeyframes=rm(ene,ZG(o[0],o[1])),o=[0,100]);const c=l({...e,keyframes:o});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...o].reverse(),velocity:-a})),c.calculatedDuration===null&&(c.calculatedDuration=mI(c));const{calculatedDuration:f}=c;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:f,repeat:d,repeatType:p,repeatDelay:g,type:y,onUpdate:x,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const w=this.currentTime-c*(this.playbackSpeed>=0?1:-1),S=this.playbackSpeed>=0?w<0:w>i;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let T=this.currentTime,k=r;if(d){const N=Math.min(this.currentTime,i)/o;let _=Math.floor(N),R=N%1;!R&&N>=1&&(R=1),R===1&&_--,_=Math.min(_,d+1),!!(_%2)&&(p==="reverse"?(R=1-R,g&&(R-=g/o)):p==="mirror"&&(k=a)),T=ja(0,1,R)*o}const A=S?{done:!1,value:f[0]}:k.next(T);s&&(A.value=s(A.value));let{done:E}=A;!S&&l!==null&&(E=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return I&&y!==R2&&(A.value=gI(f,this.options,b,this.speed)),x&&x(A.value),I&&this.finish(),A}then(e,n){return this.finished.then(e,n)}get duration(){return Ws(this.calculatedDuration)}get time(){return Ws(this.currentTime)}set time(e){var n;e=Us(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ii.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ws(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=Fte,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ii.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function tne(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Hl=t=>t*180/Math.PI,D2=t=>{const e=Hl(Math.atan2(t[1],t[0]));return M2(e)},nne={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:D2,rotateZ:D2,skewX:t=>Hl(Math.atan(t[1])),skewY:t=>Hl(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},M2=t=>(t=t%360,t<0&&(t+=360),t),_F=D2,RF=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),DF=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),rne={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:RF,scaleY:DF,scale:t=>(RF(t)+DF(t))/2,rotateX:t=>M2(Hl(Math.atan2(t[6],t[5]))),rotateY:t=>M2(Hl(Math.atan2(-t[2],t[0]))),rotateZ:_F,rotate:_F,skewX:t=>Hl(Math.atan(t[4])),skewY:t=>Hl(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function P2(t){return t.includes("scale")?1:0}function F2(t,e){if(!t||t==="none")return P2(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=rne,i=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=nne,i=o}if(!i)return P2(e);const s=r[e],a=i[1].split(",").map(sne);return typeof s=="function"?s(a):a[s]}const ine=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return F2(n,e)};function sne(t){return parseFloat(t.trim())}const Ff=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Lf=new Set(Ff),MF=t=>t===Pf||t===tt,ane=new Set(["x","y","z"]),one=Ff.filter(t=>!ane.has(t));function lne(t){const e=[];return one.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const tc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>F2(e,"x"),y:(t,{transform:e})=>F2(e,"y")};tc.translateX=tc.x;tc.translateY=tc.y;const nc=new Set;let L2=!1,B2=!1,z2=!1;function tq(){if(B2){const t=Array.from(nc).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=lne(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,a])=>{var o;(o=r.getValue(s))==null||o.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}B2=!1,L2=!1,nc.forEach(t=>t.complete(z2)),nc.clear()}function nq(){nc.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(B2=!0)})}function cne(){z2=!0,nq(),tq(),z2=!1}class bI{constructor(e,n,r,i,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(nc.add(this),L2||(L2=!0,un.read(nq),un.resolveKeyframes(tq))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),a=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const o=r.readValue(n,a);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=a),i&&s===void 0&&i.set(e[0])}tne(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),nc.delete(this)}cancel(){this.state==="scheduled"&&(nc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const une=t=>t.startsWith("--");function fne(t,e,n){une(e)?t.style.setProperty(e,n):t.style[e]=n}const hne=aI(()=>window.ScrollTimeline!==void 0),dne={};function pne(t,e){const n=aI(t);return()=>dne[e]??n()}const rq=pne(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),_d=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,PF={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:_d([0,.65,.55,1]),circOut:_d([.55,0,1,.45]),backIn:_d([.31,.01,.66,-.59]),backOut:_d([.33,1.53,.69,.99])};function iq(t,e){if(t)return typeof t=="function"?rq()?QG(t,e):"ease-out":VG(t)?_d(t):Array.isArray(t)?t.map(n=>iq(n,e)||PF.easeOut):PF[t]}function mne(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeOut",times:l}={},c=void 0){const f={[e]:n};l&&(f.offset=l);const d=iq(o,i);Array.isArray(d)&&(f.easing=d);const p={delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return c&&(p.pseudoElement=c),t.animate(f,p)}function sq(t){return typeof t=="function"&&"applyToOptions"in t}function gne({type:t,...e}){return sq(t)&&rq()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class yne extends yI{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=e,sI(typeof e.type!="string");const c=gne(e);this.animation=mne(n,r,i,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const f=gI(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(f):fne(n,r,f),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Ws(Number(e))}get time(){return Ws(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Us(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&hne()?(this.animation.timeline=e,Yi):n(this)}}const aq={anticipate:LG,backInOut:FG,circInOut:zG};function vne(t){return t in aq}function bne(t){typeof t.ease=="string"&&vne(t.ease)&&(t.ease=aq[t.ease])}const FF=10;class xne extends yne{constructor(e){bne(e),eq(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...a}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new vI({...a,autoplay:!1}),l=Us(this.finishedTime??this.time);n.setWithVelocity(o.sample(l-FF).value,o.sample(l).value,FF),o.stop()}}const LF=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ho.test(t)||t==="0")&&!t.startsWith("url("));function wne(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Sne(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],a=LF(i,e),o=LF(s,e);return!a||!o?!1:wne(t)||(n==="spring"||sq(n))&&r}function xI(t){return NG(t)&&"offsetHeight"in t}const Cne=new Set(["opacity","clipPath","filter","transform"]),Tne=aI(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Ane(t){var c;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:a}=t;if(!xI((c=e==null?void 0:e.owner)==null?void 0:c.current))return!1;const{onUpdate:o,transformTemplate:l}=e.owner.getProps();return Tne()&&n&&Cne.has(n)&&(n!=="transform"||!l)&&!o&&!r&&i!=="mirror"&&s!==0&&a!=="inertia"}const kne=40;class $ne extends yI{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",keyframes:o,name:l,motionValue:c,element:f,...d}){var y;super(),this.stop=()=>{var x,b;this._animation&&(this._animation.stop(),(x=this.stopTimeline)==null||x.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=ii.now();const p={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:a,name:l,motionValue:c,element:f,...d},g=(f==null?void 0:f.KeyframeResolver)||bI;this.keyframeResolver=new g(o,(x,b,w)=>this.onKeyframesResolved(x,b,p,!w),l,c,f),(y=this.keyframeResolver)==null||y.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:a,velocity:o,delay:l,isHandoff:c,onUpdate:f}=r;this.resolvedAt=ii.now(),Sne(e,s,a,o)||((Va.instantAnimations||!l)&&(f==null||f(gI(e,r,n))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const p={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>kne?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},g=!c&&Ane(p)?new xne({...p,element:p.motionValue.owner.current}):new vI(p);g.finished.then(()=>this.notifyFinished()).catch(Yi),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),cne()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const Ene=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Ine(t){const e=Ene.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function oq(t,e,n=1){const[r,i]=Ine(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return IG(a)?parseFloat(a):a}return fI(i)?oq(i,e,n+1):i}function wI(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const lq=new Set(["width","height","top","left","right","bottom",...Ff]),Nne={test:t=>t==="auto",parse:t=>t},cq=t=>e=>e.test(t),uq=[Pf,tt,Gs,No,wte,xte,Nne],BF=t=>uq.find(cq(t));function One(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||OG(t):!0}const _ne=new Set(["brightness","contrast","saturate","opacity"]);function Rne(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(hI)||[];if(!r)return t;const i=n.replace(r,"");let s=_ne.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const Dne=/\b([a-z-]*)\(.*?\)/gu,j2={...Ho,getAnimatableNone:t=>{const e=t.match(Dne);return e?e.map(Rne).join(" "):t}},zF={...Pf,transform:Math.round},Mne={rotate:No,rotateX:No,rotateY:No,rotateZ:No,scale:Hy,scaleX:Hy,scaleY:Hy,scaleZ:Hy,skew:No,skewX:No,skewY:No,distance:tt,translateX:tt,translateY:tt,translateZ:tt,x:tt,y:tt,z:tt,perspective:tt,transformPerspective:tt,opacity:tp,originX:kF,originY:kF,originZ:tt},SI={borderWidth:tt,borderTopWidth:tt,borderRightWidth:tt,borderBottomWidth:tt,borderLeftWidth:tt,borderRadius:tt,radius:tt,borderTopLeftRadius:tt,borderTopRightRadius:tt,borderBottomRightRadius:tt,borderBottomLeftRadius:tt,width:tt,maxWidth:tt,height:tt,maxHeight:tt,top:tt,right:tt,bottom:tt,left:tt,padding:tt,paddingTop:tt,paddingRight:tt,paddingBottom:tt,paddingLeft:tt,margin:tt,marginTop:tt,marginRight:tt,marginBottom:tt,marginLeft:tt,backgroundPositionX:tt,backgroundPositionY:tt,...Mne,zIndex:zF,fillOpacity:tp,strokeOpacity:tp,numOctaves:zF},Pne={...SI,color:Ar,backgroundColor:Ar,outlineColor:Ar,fill:Ar,stroke:Ar,borderColor:Ar,borderTopColor:Ar,borderRightColor:Ar,borderBottomColor:Ar,borderLeftColor:Ar,filter:j2,WebkitFilter:j2},fq=t=>Pne[t];function hq(t,e){let n=fq(t);return n!==j2&&(n=Ho),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Fne=new Set(["auto","none","0"]);function Lne(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!Fne.has(s)&&np(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=hq(n,i)}class Bne extends bI{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),fI(c))){const f=oq(c,n.current);f!==void 0&&(e[l]=f),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!lq.has(r)||e.length!==2)return;const[i,s]=e,a=BF(i),o=BF(s);if(a!==o)if(MF(a)&&MF(o))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else tc[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||One(e[i]))&&r.push(i);r.length&&Lne(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=tc[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var o;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,a=r[s];r[s]=tc[n](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function zne(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const dq=(t,e)=>e&&typeof t=="number"?e.transform(t):t,jF=30,jne=t=>!isNaN(parseFloat(t));class Vne{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{var a,o;const s=ii.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();i&&((o=this.events.renderRequest)==null||o.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ii.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=jne(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new oI);const r=this.events[e].add(n);return e==="change"?()=>{r(),un.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ii.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>jF)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,jF);return _G(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ef(t,e){return new Vne(t,e)}const{schedule:CI}=UG(queueMicrotask,!1),fs={x:!1,y:!1};function pq(){return fs.x||fs.y}function Une(t){return t==="x"||t==="y"?fs[t]?null:(fs[t]=!0,()=>{fs[t]=!1}):fs.x||fs.y?null:(fs.x=fs.y=!0,()=>{fs.x=fs.y=!1})}function mq(t,e){const n=zne(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function VF(t){return!(t.pointerType==="touch"||pq())}function Wne(t,e,n={}){const[r,i,s]=mq(t,n),a=o=>{if(!VF(o))return;const{target:l}=o,c=e(l,o);if(typeof c!="function"||!l)return;const f=d=>{VF(d)&&(c(d),l.removeEventListener("pointerleave",f))};l.addEventListener("pointerleave",f,i)};return r.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const gq=(t,e)=>e?t===e?!0:gq(t,e.parentElement):!1,TI=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Gne=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function qne(t){return Gne.has(t.tagName)||t.tabIndex!==-1}const $v=new WeakSet;function UF(t){return e=>{e.key==="Enter"&&t(e)}}function JS(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Hne=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=UF(()=>{if($v.has(n))return;JS(n,"down");const i=UF(()=>{JS(n,"up")}),s=()=>JS(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function WF(t){return TI(t)&&!pq()}function Kne(t,e,n={}){const[r,i,s]=mq(t,n),a=o=>{const l=o.currentTarget;if(!WF(o))return;$v.add(l);const c=e(l,o),f=(g,y)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",p),$v.has(l)&&$v.delete(l),WF(g)&&typeof c=="function"&&c(g,{success:y})},d=g=>{f(g,l===window||l===document||n.useGlobalTarget||gq(l,g.target))},p=g=>{f(g,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",p,i)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),xI(o)&&(o.addEventListener("focus",c=>Hne(c,i)),!qne(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),s}function yq(t){return NG(t)&&"ownerSVGElement"in t}function Xne(t){return yq(t)&&t.tagName==="svg"}const Rr=t=>!!(t&&t.getVelocity),Yne=[...uq,Ar,Ho],Zne=t=>Yne.find(cq(t)),AI=Q.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class Qne extends Q.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=xI(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Jne({children:t,isPresent:e,anchorX:n}){const r=Q.useId(),i=Q.useRef(null),s=Q.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=Q.useContext(AI);return Q.useInsertionEffect(()=>{const{width:o,height:l,top:c,left:f,right:d}=s.current;if(e||!i.current||!o||!l)return;const p=n==="left"?`left: ${f}`:`right: ${d}`;i.current.dataset.motionPopId=r;const g=document.createElement("style");return a&&(g.nonce=a),document.head.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            ${p}px !important;
            top: ${c}px !important;
          }
        `),()=>{document.head.contains(g)&&document.head.removeChild(g)}},[e]),Z.jsx(Qne,{isPresent:e,childRef:i,sizeRef:s,children:Q.cloneElement(t,{ref:i})})}const ere=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a,anchorX:o})=>{const l=tI(tre),c=Q.useId();let f=!0,d=Q.useMemo(()=>(f=!1,{id:c,initial:e,isPresent:n,custom:i,onExitComplete:p=>{l.set(p,!0);for(const g of l.values())if(!g)return;r&&r()},register:p=>(l.set(p,!1),()=>l.delete(p))}),[n,l,r]);return s&&f&&(d={...d}),Q.useMemo(()=>{l.forEach((p,g)=>l.set(g,!1))},[n]),Q.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),a==="popLayout"&&(t=Z.jsx(Jne,{isPresent:n,anchorX:o,children:t})),Z.jsx(y0.Provider,{value:d,children:t})};function tre(){return new Map}function vq(t=!0){const e=Q.useContext(y0);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=Q.useId();Q.useEffect(()=>{if(t)return i(s)},[t]);const a=Q.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,a]:[!0]}const Ky=t=>t.key||"";function GF(t){const e=[];return Q.Children.forEach(t,n=>{Q.isValidElement(n)&&e.push(n)}),e}const qF=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:a=!1,anchorX:o="left"})=>{const[l,c]=vq(a),f=Q.useMemo(()=>GF(t),[t]),d=a&&!l?[]:f.map(Ky),p=Q.useRef(!0),g=Q.useRef(f),y=tI(()=>new Map),[x,b]=Q.useState(f),[w,S]=Q.useState(f);EG(()=>{p.current=!1,g.current=f;for(let A=0;A<w.length;A++){const E=Ky(w[A]);d.includes(E)?y.delete(E):y.get(E)!==!0&&y.set(E,!1)}},[w,d.length,d.join("-")]);const T=[];if(f!==x){let A=[...f];for(let E=0;E<w.length;E++){const I=w[E],N=Ky(I);d.includes(N)||(A.splice(E,0,I),T.push(I))}return s==="wait"&&T.length&&(A=T),S(GF(A)),b(f),null}const{forceRender:k}=Q.useContext(eI);return Z.jsx(Z.Fragment,{children:w.map(A=>{const E=Ky(A),I=a&&!l?!1:f===w||d.includes(E),N=()=>{if(y.has(E))y.set(E,!0);else return;let _=!0;y.forEach(R=>{R||(_=!1)}),_&&(k==null||k(),S(g.current),a&&(c==null||c()),r&&r())};return Z.jsx(ere,{isPresent:I,initial:!p.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,onExitComplete:I?void 0:N,anchorX:o,children:A},E)})})},bq=Q.createContext({strict:!1}),HF={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},tf={};for(const t in HF)tf[t]={isEnabled:e=>HF[t].some(n=>!!e[n])};function nre(t){for(const e in t)tf[e]={...tf[e],...t[e]}}const rre=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Vv(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||rre.has(t)}let xq=t=>!Vv(t);function ire(t){t&&(xq=e=>e.startsWith("on")?!Vv(e):t(e))}try{ire(require("@emotion/is-prop-valid").default)}catch{}function sre(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(xq(i)||n===!0&&Vv(i)||!e&&!Vv(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function are(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const v0=Q.createContext({});function b0(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function rp(t){return typeof t=="string"||Array.isArray(t)}const kI=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],$I=["initial",...kI];function x0(t){return b0(t.animate)||$I.some(e=>rp(t[e]))}function wq(t){return!!(x0(t)||t.variants)}function ore(t,e){if(x0(t)){const{initial:n,animate:r}=t;return{initial:n===!1||rp(n)?n:void 0,animate:rp(r)?r:void 0}}return t.inherit!==!1?e:{}}function lre(t){const{initial:e,animate:n}=ore(t,Q.useContext(v0));return Q.useMemo(()=>({initial:e,animate:n}),[KF(e),KF(n)])}function KF(t){return Array.isArray(t)?t.join(" "):t}const cre=Symbol.for("motionComponentSymbol");function Lu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function ure(t,e,n){return Q.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Lu(n)&&(n.current=r))},[e])}const EI=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),fre="framerAppearId",Sq="data-"+EI(fre),Cq=Q.createContext({});function hre(t,e,n,r,i){var x,b;const{visualElement:s}=Q.useContext(v0),a=Q.useContext(bq),o=Q.useContext(y0),l=Q.useContext(AI).reducedMotion,c=Q.useRef(null);r=r||a.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const f=c.current,d=Q.useContext(Cq);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&dre(c.current,n,i,d);const p=Q.useRef(!1);Q.useInsertionEffect(()=>{f&&p.current&&f.update(n,o)});const g=n[Sq],y=Q.useRef(!!g&&!((x=window.MotionHandoffIsComplete)!=null&&x.call(window,g))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,g)));return EG(()=>{f&&(p.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),CI.render(f.render),y.current&&f.animationState&&f.animationState.animateChanges())}),Q.useEffect(()=>{f&&(!y.current&&f.animationState&&f.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)==null||w.call(window,g)}),y.current=!1))}),f}function dre(t,e,n,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Tq(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&Lu(o),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:l,layoutRoot:c})}function Tq(t){if(t)return t.options.allowProjection!==!1?t.projection:Tq(t.parent)}function pre({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&nre(t);function s(o,l){let c;const f={...Q.useContext(AI),...o,layoutId:mre(o)},{isStatic:d}=f,p=lre(o),g=r(o,d);if(!d&&nI){gre();const y=yre(f);c=y.MeasureLayout,p.visualElement=hre(i,g,f,e,y.ProjectionNode)}return Z.jsxs(v0.Provider,{value:p,children:[c&&p.visualElement?Z.jsx(c,{visualElement:p.visualElement,...f}):null,n(i,o,ure(g,p.visualElement,l),g,d,p.visualElement)]})}s.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const a=Q.forwardRef(s);return a[cre]=i,a}function mre({layoutId:t}){const e=Q.useContext(eI).id;return e&&t!==void 0?e+"-"+t:t}function gre(t,e){Q.useContext(bq).strict}function yre(t){const{drag:e,layout:n}=tf;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const ip={};function vre(t){for(const e in t)ip[e]=t[e],uI(e)&&(ip[e].isCSSVariable=!0)}function Aq(t,{layout:e,layoutId:n}){return Lf.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!ip[t]||t==="opacity")}const bre={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},xre=Ff.length;function wre(t,e,n){let r="",i=!0;for(let s=0;s<xre;s++){const a=Ff[s],o=t[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const c=dq(o,SI[a]);if(!l){i=!1;const f=bre[a]||a;r+=`${f}(${c}) `}n&&(e[a]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function II(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let a=!1,o=!1;for(const l in e){const c=e[l];if(Lf.has(l)){a=!0;continue}else if(uI(l)){i[l]=c;continue}else{const f=dq(c,SI[l]);l.startsWith("origin")?(o=!0,s[l]=f):r[l]=f}}if(e.transform||(a||n?r.transform=wre(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:f=0}=s;r.transformOrigin=`${l} ${c} ${f}`}}const NI=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function kq(t,e,n){for(const r in e)!Rr(e[r])&&!Aq(r,n)&&(t[r]=e[r])}function Sre({transformTemplate:t},e){return Q.useMemo(()=>{const n=NI();return II(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Cre(t,e){const n=t.style||{},r={};return kq(r,n,t),Object.assign(r,Sre(t,e)),r}function Tre(t,e){const n={},r=Cre(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const Are={offset:"stroke-dashoffset",array:"stroke-dasharray"},kre={offset:"strokeDashoffset",array:"strokeDasharray"};function $re(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?Are:kre;t[s.offset]=tt.transform(-r);const a=tt.transform(e),o=tt.transform(n);t[s.array]=`${a} ${o}`}function $q(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:a=0,...o},l,c,f){if(II(t,o,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:p}=t;d.transform&&(p.transform=d.transform,delete d.transform),(p.transform||d.transformOrigin)&&(p.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),p.transform&&(p.transformBox=(f==null?void 0:f.transformBox)??"fill-box",delete d.transformBox),e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),i!==void 0&&$re(d,i,s,a,!1)}const Eq=()=>({...NI(),attrs:{}}),Iq=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Ere(t,e,n,r){const i=Q.useMemo(()=>{const s=Eq();return $q(s,e,Iq(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};kq(s,t.style,t),i.style={...s,...i.style}}return i}const Ire=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function OI(t){return typeof t!="string"||t.includes("-")?!1:!!(Ire.indexOf(t)>-1||/[A-Z]/u.test(t))}function Nre(t=!1){return(n,r,i,{latestValues:s},a)=>{const l=(OI(n)?Ere:Tre)(r,s,a,n),c=sre(r,typeof n=="string",t),f=n!==Q.Fragment?{...c,...l,ref:i}:{},{children:d}=r,p=Q.useMemo(()=>Rr(d)?d.get():d,[d]);return Q.createElement(n,{...f,children:p})}}function XF(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function _I(t,e,n,r){if(typeof e=="function"){const[i,s]=XF(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=XF(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function Ev(t){return Rr(t)?t.get():t}function Ore({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:_re(n,r,i,t),renderState:e()}}const Nq=t=>(e,n)=>{const r=Q.useContext(v0),i=Q.useContext(y0),s=()=>Ore(t,e,r,i);return n?s():tI(s)};function _re(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=Ev(s[p]);let{initial:a,animate:o}=t;const l=x0(t),c=wq(t);e&&c&&!l&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let f=n?n.initial===!1:!1;f=f||a===!1;const d=f?o:a;if(d&&typeof d!="boolean"&&!b0(d)){const p=Array.isArray(d)?d:[d];for(let g=0;g<p.length;g++){const y=_I(t,p[g]);if(y){const{transitionEnd:x,transition:b,...w}=y;for(const S in w){let T=w[S];if(Array.isArray(T)){const k=f?T.length-1:0;T=T[k]}T!==null&&(i[S]=T)}for(const S in x)i[S]=x[S]}}}return i}function RI(t,e,n){var s;const{style:r}=t,i={};for(const a in r)(Rr(r[a])||e.style&&Rr(e.style[a])||Aq(a,t)||((s=n==null?void 0:n.getValue(a))==null?void 0:s.liveStyle)!==void 0)&&(i[a]=r[a]);return i}const Rre={useVisualState:Nq({scrapeMotionValuesFromProps:RI,createRenderState:NI})};function Oq(t,e,n){const r=RI(t,e,n);for(const i in t)if(Rr(t[i])||Rr(e[i])){const s=Ff.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const Dre={useVisualState:Nq({scrapeMotionValuesFromProps:Oq,createRenderState:Eq})};function Mre(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...OI(r)?Dre:Rre,preloadedFeatures:t,useRender:Nre(i),createVisualElement:e,Component:r};return pre(a)}}function sp(t,e,n){const r=t.getProps();return _I(r,e,n!==void 0?n:r.custom,t)}const V2=t=>Array.isArray(t);function Pre(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ef(n))}function Fre(t){return V2(t)?t[t.length-1]||0:t}function Lre(t,e){const n=sp(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const a in s){const o=Fre(s[a]);Pre(t,a,o)}}function Bre(t){return!!(Rr(t)&&t.add)}function U2(t,e){const n=t.getValue("willChange");if(Bre(n))return n.add(e);if(!n&&Va.WillChange){const r=new Va.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function _q(t){return t.props[Sq]}const zre=t=>t!==null;function jre(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(zre),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const Vre={type:"spring",stiffness:500,damping:25,restSpeed:10},Ure=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Wre={type:"keyframes",duration:.8},Gre={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},qre=(t,{keyframes:e})=>e.length>2?Wre:Lf.has(t)?t.startsWith("scale")?Ure(e[1]):Vre:Gre;function Hre({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:c,...f}){return!!Object.keys(f).length}const DI=(t,e,n,r={},i,s)=>a=>{const o=wI(r,t)||{},l=o.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Us(l);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-c,onUpdate:p=>{e.set(p),o.onUpdate&&o.onUpdate(p)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:s?void 0:i};Hre(o)||Object.assign(f,qre(t,f)),f.duration&&(f.duration=Us(f.duration)),f.repeatDelay&&(f.repeatDelay=Us(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let d=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(f.duration=0,f.delay===0&&(d=!0)),(Va.instantAnimations||Va.skipAnimations)&&(d=!0,f.duration=0,f.delay=0),f.allowFlatten=!o.type&&!o.ease,d&&!s&&e.get()!==void 0){const p=jre(f.keyframes,o);if(p!==void 0){un.update(()=>{f.onUpdate(p),f.onComplete()});return}}return o.isSync?new vI(f):new $ne(f)};function Kre({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Rq(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:a,...o}=e;r&&(s=r);const l=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const f in o){const d=t.getValue(f,t.latestValues[f]??null),p=o[f];if(p===void 0||c&&Kre(c,f))continue;const g={delay:n,...wI(s||{},f)},y=d.get();if(y!==void 0&&!d.isAnimating&&!Array.isArray(p)&&p===y&&!g.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const w=_q(t);if(w){const S=window.MotionHandoffAnimation(w,f,un);S!==null&&(g.startTime=S,x=!0)}}U2(t,f),d.start(DI(f,d,p,t.shouldReduceMotion&&lq.has(f)?{type:!1}:g,t,x));const b=d.animation;b&&l.push(b)}return a&&Promise.all(l).then(()=>{un.update(()=>{a&&Lre(t,a)})}),l}function W2(t,e,n={}){var l;const r=sp(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(Rq(t,r,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:f=0,staggerChildren:d,staggerDirection:p}=i;return Xre(t,e,f+c,d,p,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[c,f]=o==="beforeChildren"?[s,a]:[a,s];return c().then(()=>f())}else return Promise.all([s(),a(n.delay)])}function Xre(t,e,n=0,r=0,i=1,s){const a=[],o=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>o-c*r;return Array.from(t.variantChildren).sort(Yre).forEach((c,f)=>{c.notify("AnimationStart",e),a.push(W2(c,e,{...s,delay:n+l(f)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(a)}function Yre(t,e){return t.sortNodePosition(e)}function Zre(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>W2(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=W2(t,e,n);else{const i=typeof e=="function"?sp(t,e,n.custom):e;r=Promise.all(Rq(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function Dq(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const Qre=$I.length;function Mq(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Mq(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Qre;n++){const r=$I[n],i=t.props[r];(rp(i)||i===!1)&&(e[r]=i)}return e}const Jre=[...kI].reverse(),eie=kI.length;function tie(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Zre(t,n,r)))}function nie(t){let e=tie(t),n=YF(),r=!0;const i=l=>(c,f)=>{var p;const d=sp(t,f,l==="exit"?(p=t.presenceContext)==null?void 0:p.custom:void 0);if(d){const{transition:g,transitionEnd:y,...x}=d;c={...c,...x,...y}}return c};function s(l){e=l(t)}function a(l){const{props:c}=t,f=Mq(t.parent)||{},d=[],p=new Set;let g={},y=1/0;for(let b=0;b<eie;b++){const w=Jre[b],S=n[w],T=c[w]!==void 0?c[w]:f[w],k=rp(T),A=w===l?S.isActive:null;A===!1&&(y=b);let E=T===f[w]&&T!==c[w]&&k;if(E&&r&&t.manuallyAnimateOnMount&&(E=!1),S.protectedKeys={...g},!S.isActive&&A===null||!T&&!S.prevProp||b0(T)||typeof T=="boolean")continue;const I=rie(S.prevProp,T);let N=I||w===l&&S.isActive&&!E&&k||b>y&&k,_=!1;const R=Array.isArray(T)?T:[T];let O=R.reduce(i(w),{});A===!1&&(O={});const{prevResolvedValues:F={}}=S,z={...F,...O},W=j=>{N=!0,p.has(j)&&(_=!0,p.delete(j)),S.needsAnimating[j]=!0;const V=t.getValue(j);V&&(V.liveStyle=!1)};for(const j in z){const V=O[j],q=F[j];if(g.hasOwnProperty(j))continue;let L=!1;V2(V)&&V2(q)?L=!Dq(V,q):L=V!==q,L?V!=null?W(j):p.add(j):V!==void 0&&p.has(j)?W(j):S.protectedKeys[j]=!0}S.prevProp=T,S.prevResolvedValues=O,S.isActive&&(g={...g,...O}),r&&t.blockInitialAnimation&&(N=!1),N&&(!(E&&I)||_)&&d.push(...R.map(j=>({animation:j,options:{type:w}})))}if(p.size){const b={};if(typeof c.initial!="boolean"){const w=sp(t,Array.isArray(c.initial)?c.initial[0]:c.initial);w&&w.transition&&(b.transition=w.transition)}p.forEach(w=>{const S=t.getBaseTarget(w),T=t.getValue(w);T&&(T.liveStyle=!0),b[w]=S??null}),d.push({animation:b})}let x=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(d):Promise.resolve()}function o(l,c){var d;if(n[l].isActive===c)return Promise.resolve();(d=t.variantChildren)==null||d.forEach(p=>{var g;return(g=p.animationState)==null?void 0:g.setActive(l,c)}),n[l].isActive=c;const f=a(l);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>n,reset:()=>{n=YF(),r=!0}}}function rie(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Dq(e,t):!1}function Dl(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function YF(){return{animate:Dl(!0),whileInView:Dl(),whileHover:Dl(),whileTap:Dl(),whileDrag:Dl(),whileFocus:Dl(),exit:Dl()}}class el{constructor(e){this.isMounted=!1,this.node=e}update(){}}class iie extends el{constructor(e){super(e),e.animationState||(e.animationState=nie(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();b0(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let sie=0;class aie extends el{constructor(){super(...arguments),this.id=sie++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const oie={animation:{Feature:iie},exit:{Feature:aie}};function ap(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function am(t){return{point:{x:t.pageX,y:t.pageY}}}const lie=t=>e=>TI(e)&&t(e,am(e));function Wd(t,e,n,r){return ap(t,e,lie(n),r)}function Pq({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function cie({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function uie(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const Fq=1e-4,fie=1-Fq,hie=1+Fq,Lq=.01,die=0-Lq,pie=0+Lq;function Vr(t){return t.max-t.min}function mie(t,e,n){return Math.abs(t-e)<=n}function ZF(t,e,n,r=.5){t.origin=r,t.originPoint=ln(e.min,e.max,t.origin),t.scale=Vr(n)/Vr(e),t.translate=ln(n.min,n.max,t.origin)-t.originPoint,(t.scale>=fie&&t.scale<=hie||isNaN(t.scale))&&(t.scale=1),(t.translate>=die&&t.translate<=pie||isNaN(t.translate))&&(t.translate=0)}function Gd(t,e,n,r){ZF(t.x,e.x,n.x,r?r.originX:void 0),ZF(t.y,e.y,n.y,r?r.originY:void 0)}function QF(t,e,n){t.min=n.min+e.min,t.max=t.min+Vr(e)}function gie(t,e,n){QF(t.x,e.x,n.x),QF(t.y,e.y,n.y)}function JF(t,e,n){t.min=e.min-n.min,t.max=t.min+Vr(e)}function qd(t,e,n){JF(t.x,e.x,n.x),JF(t.y,e.y,n.y)}const eL=()=>({translate:0,scale:1,origin:0,originPoint:0}),Bu=()=>({x:eL(),y:eL()}),tL=()=>({min:0,max:0}),An=()=>({x:tL(),y:tL()});function Ui(t){return[t("x"),t("y")]}function eC(t){return t===void 0||t===1}function G2({scale:t,scaleX:e,scaleY:n}){return!eC(t)||!eC(e)||!eC(n)}function Bl(t){return G2(t)||Bq(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Bq(t){return nL(t.x)||nL(t.y)}function nL(t){return t&&t!=="0%"}function Uv(t,e,n){const r=t-n,i=e*r;return n+i}function rL(t,e,n,r,i){return i!==void 0&&(t=Uv(t,i,r)),Uv(t,n,r)+e}function q2(t,e=0,n=1,r,i){t.min=rL(t.min,e,n,r,i),t.max=rL(t.max,e,n,r,i)}function zq(t,{x:e,y:n}){q2(t.x,e.translate,e.scale,e.originPoint),q2(t.y,n.translate,n.scale,n.originPoint)}const iL=.999999999999,sL=1.0000000000001;function yie(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,a;for(let o=0;o<i;o++){s=n[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ju(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,zq(t,a)),r&&Bl(s.latestValues)&&ju(t,s.latestValues))}e.x<sL&&e.x>iL&&(e.x=1),e.y<sL&&e.y>iL&&(e.y=1)}function zu(t,e){t.min=t.min+e,t.max=t.max+e}function aL(t,e,n,r,i=.5){const s=ln(t.min,t.max,i);q2(t,e,n,s,r)}function ju(t,e){aL(t.x,e.x,e.scaleX,e.scale,e.originX),aL(t.y,e.y,e.scaleY,e.scale,e.originY)}function jq(t,e){return Pq(uie(t.getBoundingClientRect(),e))}function vie(t,e,n){const r=jq(t,n),{scroll:i}=e;return i&&(zu(r.x,i.offset.x),zu(r.y,i.offset.y)),r}const Vq=({current:t})=>t?t.ownerDocument.defaultView:null,oL=(t,e)=>Math.abs(t-e);function bie(t,e){const n=oL(t.x,e.x),r=oL(t.y,e.y);return Math.sqrt(n**2+r**2)}class Uq{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=nC(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=bie(d.offset,{x:0,y:0})>=3;if(!p&&!g)return;const{point:y}=d,{timestamp:x}=dr;this.history.push({...y,timestamp:x});const{onStart:b,onMove:w}=this.handlers;p||(b&&b(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,d)},this.handlePointerMove=(d,p)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=tC(p,this.transformPagePoint),un.update(this.updatePoint,!0)},this.handlePointerUp=(d,p)=>{this.end();const{onEnd:g,onSessionEnd:y,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=nC(d.type==="pointercancel"?this.lastMoveEventInfo:tC(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(d,b),y&&y(d,b)},!TI(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const a=am(e),o=tC(a,this.transformPagePoint),{point:l}=o,{timestamp:c}=dr;this.history=[{...l,timestamp:c}];const{onSessionStart:f}=n;f&&f(e,nC(o,this.history)),this.removeListeners=rm(Wd(this.contextWindow,"pointermove",this.handlePointerMove),Wd(this.contextWindow,"pointerup",this.handlePointerUp),Wd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),qo(this.updatePoint)}}function tC(t,e){return e?{point:e(t.point)}:t}function lL(t,e){return{x:t.x-e.x,y:t.y-e.y}}function nC({point:t},e){return{point:t,delta:lL(t,Wq(e)),offset:lL(t,xie(e)),velocity:wie(e,.1)}}function xie(t){return t[0]}function Wq(t){return t[t.length-1]}function wie(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=Wq(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Us(e)));)n--;if(!r)return{x:0,y:0};const s=Ws(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Sie(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ln(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ln(n,t,r.max):Math.min(t,n)),t}function cL(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Cie(t,{top:e,left:n,bottom:r,right:i}){return{x:cL(t.x,n,i),y:cL(t.y,e,r)}}function uL(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Tie(t,e){return{x:uL(t.x,e.x),y:uL(t.y,e.y)}}function Aie(t,e){let n=.5;const r=Vr(t),i=Vr(e);return i>r?n=ep(e.min,e.max-r,t.min):r>i&&(n=ep(t.min,t.max-i,e.min)),ja(0,1,n)}function kie(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const H2=.35;function $ie(t=H2){return t===!1?t=0:t===!0&&(t=H2),{x:fL(t,"left","right"),y:fL(t,"top","bottom")}}function fL(t,e,n){return{min:hL(t,e),max:hL(t,n)}}function hL(t,e){return typeof t=="number"?t:t[e]||0}const Eie=new WeakMap;class Iie{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=An(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(am(f).point)},s=(f,d)=>{const{drag:p,dragPropagation:g,onDragStart:y}=this.getProps();if(p&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Une(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ui(b=>{let w=this.getAxisMotionValue(b).get()||0;if(Gs.test(w)){const{projection:S}=this.visualElement;if(S&&S.layout){const T=S.layout.layoutBox[b];T&&(w=Vr(T)*(parseFloat(w)/100))}}this.originPoint[b]=w}),y&&un.postRender(()=>y(f,d)),U2(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},a=(f,d)=>{const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:y,onDrag:x}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:b}=d;if(g&&this.currentDirection===null){this.currentDirection=Nie(b),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",d.point,b),this.updateAxis("y",d.point,b),this.visualElement.render(),x&&x(f,d)},o=(f,d)=>this.stop(f,d),l=()=>Ui(f=>{var d;return this.getAnimationState(f)==="paused"&&((d=this.getAxisMotionValue(f).animation)==null?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Uq(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:Vq(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&un.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Xy(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=Sie(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&Lu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Cie(r.layoutBox,e):this.constraints=!1,this.elastic=$ie(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ui(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=kie(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Lu(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=vie(r,i.root,this.visualElement.getTransformPagePoint());let a=Tie(i.layout.layoutBox,s);if(n){const o=n(cie(a));this.hasMutatedConstraints=!!o,o&&(a=Pq(o))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=Ui(f=>{if(!Xy(f,n,this.currentDirection))return;let d=l&&l[f]||{};a&&(d={min:0,max:0});const p=i?200:1e6,g=i?40:1e7,y={type:"inertia",velocity:r?e[f]:0,bounceStiffness:p,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(f,y)});return Promise.all(c).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return U2(this.visualElement,e),r.start(DI(e,r,0,n,this.visualElement,!1))}stopAnimation(){Ui(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ui(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ui(n=>{const{drag:r}=this.getProps();if(!Xy(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[n];s.set(e[n]-ln(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Lu(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ui(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=Aie({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ui(a=>{if(!Xy(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set(ln(l,c,i[a]))})}addListeners(){if(!this.visualElement.current)return;Eie.set(this.visualElement,this);const e=this.visualElement.current,n=Wd(e,"pointerdown",l=>{const{drag:c,dragListener:f=!0}=this.getProps();c&&f&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Lu(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),un.read(r);const a=ap(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Ui(f=>{const d=this.getAxisMotionValue(f);d&&(this.originPoint[f]+=l[f].translate,d.set(d.get()+l[f].translate))}),this.visualElement.render())});return()=>{a(),n(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=H2,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function Xy(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Nie(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Oie extends el{constructor(e){super(e),this.removeGroupControls=Yi,this.removeListeners=Yi,this.controls=new Iie(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Yi}unmount(){this.removeGroupControls(),this.removeListeners()}}const dL=t=>(e,n)=>{t&&un.postRender(()=>t(e,n))};class _ie extends el{constructor(){super(...arguments),this.removePointerDownListener=Yi}onPointerDown(e){this.session=new Uq(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Vq(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:dL(e),onStart:dL(n),onMove:r,onEnd:(s,a)=>{delete this.session,i&&un.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=Wd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Iv={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pL(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const dd={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(tt.test(t))t=parseFloat(t);else return t;const n=pL(t,e.target.x),r=pL(t,e.target.y);return`${n}% ${r}%`}},Rie={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Ho.parse(t);if(i.length>5)return r;const s=Ho.createTransformer(t),a=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;i[0+a]/=o,i[1+a]/=l;const c=ln(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=c),typeof i[3+a]=="number"&&(i[3+a]/=c),s(i)}};class Die extends Q.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;vre(Mie),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Iv.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:a}=r;return a&&(a.isPresent=s,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||un.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),CI.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Gq(t){const[e,n]=vq(),r=Q.useContext(eI);return Z.jsx(Die,{...t,layoutGroup:r,switchLayoutGroup:Q.useContext(Cq),isPresent:e,safeToRemove:n})}const Mie={borderRadius:{...dd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:dd,borderTopRightRadius:dd,borderBottomLeftRadius:dd,borderBottomRightRadius:dd,boxShadow:Rie};function Pie(t,e,n){const r=Rr(t)?t:ef(t);return r.start(DI("",r,e,n)),r.animation}const Fie=(t,e)=>t.depth-e.depth;class Lie{constructor(){this.children=[],this.isDirty=!1}add(e){rI(this.children,e),this.isDirty=!0}remove(e){iI(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Fie),this.isDirty=!1,this.children.forEach(e)}}function Bie(t,e){const n=ii.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(qo(r),t(s-e))};return un.setup(r,!0),()=>qo(r)}const qq=["TopLeft","TopRight","BottomLeft","BottomRight"],zie=qq.length,mL=t=>typeof t=="string"?parseFloat(t):t,gL=t=>typeof t=="number"||tt.test(t);function jie(t,e,n,r,i,s){i?(t.opacity=ln(0,n.opacity??1,Vie(r)),t.opacityExit=ln(e.opacity??1,0,Uie(r))):s&&(t.opacity=ln(e.opacity??1,n.opacity??1,r));for(let a=0;a<zie;a++){const o=`border${qq[a]}Radius`;let l=yL(e,o),c=yL(n,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||gL(l)===gL(c)?(t[o]=Math.max(ln(mL(l),mL(c),r),0),(Gs.test(c)||Gs.test(l))&&(t[o]+="%")):t[o]=c}(e.rotate||n.rotate)&&(t.rotate=ln(e.rotate||0,n.rotate||0,r))}function yL(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Vie=Hq(0,.5,BG),Uie=Hq(.5,.95,Yi);function Hq(t,e,n){return r=>r<t?0:r>e?1:n(ep(t,e,r))}function vL(t,e){t.min=e.min,t.max=e.max}function Li(t,e){vL(t.x,e.x),vL(t.y,e.y)}function bL(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function xL(t,e,n,r,i){return t-=e,t=Uv(t,1/n,r),i!==void 0&&(t=Uv(t,1/i,r)),t}function Wie(t,e=0,n=1,r=.5,i,s=t,a=t){if(Gs.test(e)&&(e=parseFloat(e),e=ln(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=ln(s.min,s.max,r);t===s&&(o-=e),t.min=xL(t.min,e,n,o,i),t.max=xL(t.max,e,n,o,i)}function wL(t,e,[n,r,i],s,a){Wie(t,e[n],e[r],e[i],e.scale,s,a)}const Gie=["x","scaleX","originX"],qie=["y","scaleY","originY"];function SL(t,e,n,r){wL(t.x,e,Gie,n?n.x:void 0,r?r.x:void 0),wL(t.y,e,qie,n?n.y:void 0,r?r.y:void 0)}function CL(t){return t.translate===0&&t.scale===1}function Kq(t){return CL(t.x)&&CL(t.y)}function TL(t,e){return t.min===e.min&&t.max===e.max}function Hie(t,e){return TL(t.x,e.x)&&TL(t.y,e.y)}function AL(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Xq(t,e){return AL(t.x,e.x)&&AL(t.y,e.y)}function kL(t){return Vr(t.x)/Vr(t.y)}function $L(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Kie{constructor(){this.members=[]}add(e){rI(this.members,e),e.scheduleRender()}remove(e){if(iI(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Xie(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:f,rotateX:d,rotateY:p,skewX:g,skewY:y}=n;c&&(r=`perspective(${c}px) ${r}`),f&&(r+=`rotate(${f}deg) `),d&&(r+=`rotateX(${d}deg) `),p&&(r+=`rotateY(${p}deg) `),g&&(r+=`skewX(${g}deg) `),y&&(r+=`skewY(${y}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const rC=["","X","Y","Z"],Yie={visibility:"hidden"},Zie=1e3;let Qie=0;function iC(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Yq(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=_q(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",un,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Yq(r)}function Zq({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},o=e==null?void 0:e()){this.id=Qie++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(tse),this.nodes.forEach(ase),this.nodes.forEach(ose),this.nodes.forEach(nse)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Lie)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new oI),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=yq(a)&&!Xne(a),this.instance=a;const{layoutId:o,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),t){let f;const d=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Bie(d,250),Iv.hasAnimatedSinceResize&&(Iv.hasAnimatedSinceResize=!1,this.nodes.forEach(IL))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&c&&(o||l)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:d,hasRelativeLayoutChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||c.getDefaultTransition()||hse,{onLayoutAnimationStart:x,onLayoutAnimationComplete:b}=c.getProps(),w=!this.targetLayout||!Xq(this.targetLayout,g),S=!d&&p;if(this.options.layoutRoot||this.resumeFrom||S||d&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const T={...wI(y,"layout"),onPlay:x,onComplete:b};(c.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T),this.setAnimationOrigin(f,S)}else d||IL(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),qo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(lse),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Yq(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const d=this.path[f];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(EL);return}this.isUpdating||this.nodes.forEach(ise),this.isUpdating=!1,this.nodes.forEach(sse),this.nodes.forEach(Jie),this.nodes.forEach(ese),this.clearAllSnapshots();const o=ii.now();dr.delta=ja(0,1e3/60,o-dr.timestamp),dr.timestamp=o,dr.isProcessing=!0,XS.update.process(dr),XS.preRender.process(dr),XS.render.process(dr),dr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,CI.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(rse),this.sharedNodes.forEach(cse)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,un.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){un.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Vr(this.snapshot.measuredBox.x)&&!Vr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=An(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!Kq(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,f=c!==this.prevTransformTemplateValue;a&&this.instance&&(o||Bl(this.latestValues)||f)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),dse(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:a}=this.options;if(!a)return An();const o=a.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(pse))){const{scroll:f}=this.root;f&&(zu(o.x,f.offset.x),zu(o.y,f.offset.y))}return o}removeElementScroll(a){var l;const o=An();if(Li(o,a),(l=this.scroll)!=null&&l.wasRoot)return o;for(let c=0;c<this.path.length;c++){const f=this.path[c],{scroll:d,options:p}=f;f!==this.root&&d&&p.layoutScroll&&(d.wasRoot&&Li(o,a),zu(o.x,d.offset.x),zu(o.y,d.offset.y))}return o}applyTransform(a,o=!1){const l=An();Li(l,a);for(let c=0;c<this.path.length;c++){const f=this.path[c];!o&&f.options.layoutScroll&&f.scroll&&f!==f.root&&ju(l,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Bl(f.latestValues)&&ju(l,f.latestValues)}return Bl(this.latestValues)&&ju(l,this.latestValues),l}removeTransform(a){const o=An();Li(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Bl(c.latestValues))continue;G2(c.latestValues)&&c.updateSnapshot();const f=An(),d=c.measurePageBox();Li(f,d),SL(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,f)}return Bl(this.latestValues)&&SL(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==dr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var p;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:d}=this.options;if(!(!this.layout||!(f||d))){if(this.resolvedRelativeTargetAt=dr.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=An(),this.relativeTargetOrigin=An(),qd(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Li(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=An(),this.targetWithTransforms=An()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),gie(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Li(this.target,this.layout.layoutBox),zq(this.target,this.targetDelta)):Li(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=An(),this.relativeTargetOrigin=An(),qd(this.relativeTargetOrigin,this.target,g.target),Li(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||G2(this.parent.latestValues)||Bq(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var y;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===dr.timestamp&&(l=!1),l)return;const{layout:c,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||f))return;Li(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,p=this.treeScale.y;yie(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=An());const{target:g}=a;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(bL(this.prevProjectionDelta.x,this.projectionDelta.x),bL(this.prevProjectionDelta.y,this.projectionDelta.y)),Gd(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==p||!$L(this.projectionDelta.x,this.prevProjectionDelta.x)||!$L(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Bu(),this.projectionDelta=Bu(),this.projectionDeltaWithTransform=Bu()}setAnimationOrigin(a,o=!1){const l=this.snapshot,c=l?l.latestValues:{},f={...this.latestValues},d=Bu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const p=An(),g=l?l.source:void 0,y=this.layout?this.layout.source:void 0,x=g!==y,b=this.getStack(),w=!b||b.members.length<=1,S=!!(x&&!w&&this.options.crossfade===!0&&!this.path.some(fse));this.animationProgress=0;let T;this.mixTargetDelta=k=>{const A=k/1e3;NL(d.x,a.x,A),NL(d.y,a.y,A),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(qd(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),use(this.relativeTarget,this.relativeTargetOrigin,p,A),T&&Hie(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=An()),Li(T,this.relativeTarget)),x&&(this.animationValues=f,jie(f,c,this.latestValues,A,S,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var o,l,c;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(qo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=un.update(()=>{Iv.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ef(0)),this.currentAnimation=Pie(this.motionValue,[0,1e3],{...a,isSync:!0,onUpdate:f=>{this.mixTargetDelta(f),a.onUpdate&&a.onUpdate(f)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Zie),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:f}=a;if(!(!o||!l||!c)){if(this!==a&&this.layout&&c&&Qq(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||An();const d=Vr(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const p=Vr(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+p}Li(o,l),ju(o,f),Gd(this.projectionDeltaWithTransform,this.layoutCorrected,o,f)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Kie),this.sharedNodes.get(a).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&iC("z",a,c,this.animationValues);for(let f=0;f<rC.length;f++)iC(`rotate${rC[f]}`,a,c,this.animationValues),iC(`skew${rC[f]}`,a,c,this.animationValues);a.render();for(const f in c)a.setStaticValue(f,c[f]),this.animationValues&&(this.animationValues[f]=c[f]);a.scheduleRender()}getProjectionStyles(a){if(!this.instance||this.isSVG)return;if(!this.isVisible)return Yie;const o={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,o.opacity="",o.pointerEvents=Ev(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none",o;const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Ev(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Bl(this.latestValues)&&(g.transform=l?l({},""):"none",this.hasProjected=!1),g}const f=c.animationValues||c.latestValues;this.applyTransformsToTarget(),o.transform=Xie(this.projectionDeltaWithTransform,this.treeScale,f),l&&(o.transform=l(f,o.transform));const{x:d,y:p}=this.projectionDelta;o.transformOrigin=`${d.origin*100}% ${p.origin*100}% 0`,c.animationValues?o.opacity=c===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:o.opacity=c===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const g in ip){if(f[g]===void 0)continue;const{correct:y,applyTo:x,isCSSVariable:b}=ip[g],w=o.transform==="none"?f[g]:y(f[g],c);if(x){const S=x.length;for(let T=0;T<S;T++)o[x[T]]=w}else b?this.options.visualElement.renderState.vars[g]=w:o[g]=w}return this.options.layoutId&&(o.pointerEvents=c===this?Ev(a==null?void 0:a.pointerEvents)||"":"none"),o}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(EL),this.root.sharedNodes.clear()}}}function Jie(t){t.updateLayout()}function ese(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,a=e.source!==t.layout.source;s==="size"?Ui(d=>{const p=a?e.measuredBox[d]:e.layoutBox[d],g=Vr(p);p.min=r[d].min,p.max=p.min+g}):Qq(s,e.layoutBox,r)&&Ui(d=>{const p=a?e.measuredBox[d]:e.layoutBox[d],g=Vr(r[d]);p.max=p.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+g)});const o=Bu();Gd(o,r,e.layoutBox);const l=Bu();a?Gd(l,t.applyTransform(i,!0),e.measuredBox):Gd(l,r,e.layoutBox);const c=!Kq(o);let f=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:p,layout:g}=d;if(p&&g){const y=An();qd(y,e.layoutBox,p.layoutBox);const x=An();qd(x,r,g.layoutBox),Xq(y,x)||(f=!0),d.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=y,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:f})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function tse(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function nse(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function rse(t){t.clearSnapshot()}function EL(t){t.clearMeasurements()}function ise(t){t.isLayoutDirty=!1}function sse(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function IL(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function ase(t){t.resolveTargetDelta()}function ose(t){t.calcProjection()}function lse(t){t.resetSkewAndRotation()}function cse(t){t.removeLeadSnapshot()}function NL(t,e,n){t.translate=ln(e.translate,0,n),t.scale=ln(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function OL(t,e,n,r){t.min=ln(e.min,n.min,r),t.max=ln(e.max,n.max,r)}function use(t,e,n,r){OL(t.x,e.x,n.x,r),OL(t.y,e.y,n.y,r)}function fse(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const hse={duration:.45,ease:[.4,0,.1,1]},_L=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),RL=_L("applewebkit/")&&!_L("chrome/")?Math.round:Yi;function DL(t){t.min=RL(t.min),t.max=RL(t.max)}function dse(t){DL(t.x),DL(t.y)}function Qq(t,e,n){return t==="position"||t==="preserve-aspect"&&!mie(kL(e),kL(n),.2)}function pse(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const mse=Zq({attachResizeListener:(t,e)=>ap(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),sC={current:void 0},Jq=Zq({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!sC.current){const t=new mse({});t.mount(window),t.setOptions({layoutScroll:!0}),sC.current=t}return sC.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),gse={pan:{Feature:_ie},drag:{Feature:Oie,ProjectionNode:Jq,MeasureLayout:Gq}};function ML(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&un.postRender(()=>s(e,am(e)))}class yse extends el{mount(){const{current:e}=this.node;e&&(this.unmount=Wne(e,(n,r)=>(ML(this.node,r,"Start"),i=>ML(this.node,i,"End"))))}unmount(){}}class vse extends el{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=rm(ap(this.node.current,"focus",()=>this.onFocus()),ap(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function PL(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&un.postRender(()=>s(e,am(e)))}class bse extends el{mount(){const{current:e}=this.node;e&&(this.unmount=Kne(e,(n,r)=>(PL(this.node,r,"Start"),(i,{success:s})=>PL(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const K2=new WeakMap,aC=new WeakMap,xse=t=>{const e=K2.get(t.target);e&&e(t)},wse=t=>{t.forEach(xse)};function Sse({root:t,...e}){const n=t||document;aC.has(n)||aC.set(n,{});const r=aC.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(wse,{root:t,...e})),r[i]}function Cse(t,e,n){const r=Sse(e);return K2.set(t,n),r.observe(t),()=>{K2.delete(t),r.unobserve(t)}}const Tse={some:0,all:1};class Ase extends el{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Tse[i]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:f,onViewportLeave:d}=this.node.getProps(),p=c?f:d;p&&p(l)};return Cse(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(kse(e,n))&&this.startObserver()}unmount(){}}function kse({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const $se={inView:{Feature:Ase},tap:{Feature:bse},focus:{Feature:vse},hover:{Feature:yse}},Ese={layout:{ProjectionNode:Jq,MeasureLayout:Gq}},X2={current:null},eH={current:!1};function Ise(){if(eH.current=!0,!!nI)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>X2.current=t.matches;t.addListener(e),e()}else X2.current=!1}const Nse=new WeakMap;function Ose(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Rr(i))t.addValue(r,i);else if(Rr(s))t.addValue(r,ef(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=t.getStaticValue(r);t.addValue(r,ef(a!==void 0?a:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const FL=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class _se{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=bI,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=ii.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,un.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=x0(n),this.isVariantNode=wq(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in d){const g=d[p];l[p]!==void 0&&Rr(g)&&g.set(l[p],!1)}}mount(e){this.current=e,Nse.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),eH.current||Ise(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:X2.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),qo(this.notifyUpdate),qo(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Lf.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&un.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in tf){const n=tf[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):An()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<FL.length;r++){const i=FL[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=Ose(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=ef(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(IG(r)||OG(r))?r=parseFloat(r):!Zne(r)&&Ho.test(n)&&(r=hq(e,n)),this.setBaseTarget(e,Rr(r)?r.get():r)),Rr(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=_I(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Rr(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new oI),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class tH extends _se{constructor(){super(...arguments),this.KeyframeResolver=Bne}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Rr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function nH(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}function Rse(t){return window.getComputedStyle(t)}class Dse extends tH{constructor(){super(...arguments),this.type="html",this.renderInstance=nH}readValueFromInstance(e,n){var r;if(Lf.has(n))return(r=this.projection)!=null&&r.isProjecting?P2(n):ine(e,n);{const i=Rse(e),s=(uI(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return jq(e,n)}build(e,n,r){II(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return RI(e,n,r)}}const rH=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Mse(t,e,n,r){nH(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(rH.has(i)?i:EI(i),e.attrs[i])}class Pse extends tH{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=An}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Lf.has(n)){const r=fq(n);return r&&r.default||0}return n=rH.has(n)?n:EI(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Oq(e,n,r)}build(e,n,r){$q(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){Mse(e,n,r,i)}mount(e){this.isSVGTag=Iq(e.tagName),super.mount(e)}}const Fse=(t,e)=>OI(t)?new Pse(e):new Dse(e,{allowProjection:t!==Q.Fragment}),Lse=Mre({...oie,...$se,...gse,...Ese},Fse),pd=are(Lse);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bse=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),zse=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),LL=t=>{const e=zse(t);return e.charAt(0).toUpperCase()+e.slice(1)},iH=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),jse=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vse={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Use=Q.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...o},l)=>Q.createElement("svg",{ref:l,...Vse,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:iH("lucide",i),...!s&&!jse(o)&&{"aria-hidden":"true"},...o},[...a.map(([c,f])=>Q.createElement(c,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=(t,e)=>{const n=Q.forwardRef(({className:r,...i},s)=>Q.createElement(Use,{ref:s,iconNode:e,className:iH(`lucide-${Bse(LL(t))}`,`lucide-${t}`,r),...i}));return n.displayName=LL(t),n};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wse=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Gse=ui("activity",Wse);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qse=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],Hse=ui("brain",qse);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kse=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],BL=ui("circle-check-big",Kse);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xse=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],zL=ui("dollar-sign",Xse);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Zse=ui("globe",Yse);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qse=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Jse=ui("heart",Qse);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eae=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],tae=ui("pause",eae);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nae=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],rae=ui("phone",nae);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iae=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],sae=ui("play",iae);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aae=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],jL=ui("shield",aae);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oae=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],VL=ui("trending-up",oae);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lae=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],oC=ui("triangle-alert",lae);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cae=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],uae=ui("users",cae);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fae=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],hae=ui("zap",fae);function sH(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=sH(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function St(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=sH(t))&&(r&&(r+=" "),r+=e);return r}const MI="-",dae=t=>{const e=mae(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const o=a.split(MI);return o[0]===""&&o.length!==1&&o.shift(),aH(o,e)||pae(a)},getConflictingClassGroupIds:(a,o)=>{const l=n[a]||[];return o&&r[a]?[...l,...r[a]]:l}}},aH=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?aH(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(MI);return(a=e.validators.find(({validator:o})=>o(s)))==null?void 0:a.classGroupId},UL=/^\[(.+)\]$/,pae=t=>{if(UL.test(t)){const e=UL.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},mae=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const i in n)Y2(n[i],r,i,e);return r},Y2=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:WL(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(gae(i)){Y2(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,a])=>{Y2(a,WL(e,s),n,r)})})},WL=(t,e)=>{let n=t;return e.split(MI).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},gae=t=>t.isThemeGetter,yae=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,a)=>{n.set(s,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let a=n.get(s);if(a!==void 0)return a;if((a=r.get(s))!==void 0)return i(s,a),a},set(s,a){n.has(s)?n.set(s,a):i(s,a)}}},Z2="!",Q2=":",vae=Q2.length,bae=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const s=[];let a=0,o=0,l=0,c;for(let y=0;y<i.length;y++){let x=i[y];if(a===0&&o===0){if(x===Q2){s.push(i.slice(l,y)),l=y+vae;continue}if(x==="/"){c=y;continue}}x==="["?a++:x==="]"?a--:x==="("?o++:x===")"&&o--}const f=s.length===0?i:i.substring(l),d=xae(f),p=d!==f,g=c&&c>l?c-l:void 0;return{modifiers:s,hasImportantModifier:p,baseClassName:d,maybePostfixModifierPosition:g}};if(e){const i=e+Q2,s=r;r=a=>a.startsWith(i)?s(a.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},xae=t=>t.endsWith(Z2)?t.substring(0,t.length-1):t.startsWith(Z2)?t.substring(1):t,wae=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let s=[];return r.forEach(a=>{a[0]==="["||e[a]?(i.push(...s.sort(),a),s=[]):s.push(a)}),i.push(...s.sort()),i}},Sae=t=>({cache:yae(t.cacheSize),parseClassName:bae(t),sortModifiers:wae(t),...dae(t)}),Cae=/\s+/,Tae=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=e,a=[],o=t.trim().split(Cae);let l="";for(let c=o.length-1;c>=0;c-=1){const f=o[c],{isExternal:d,modifiers:p,hasImportantModifier:g,baseClassName:y,maybePostfixModifierPosition:x}=n(f);if(d){l=f+(l.length>0?" "+l:l);continue}let b=!!x,w=r(b?y.substring(0,x):y);if(!w){if(!b){l=f+(l.length>0?" "+l:l);continue}if(w=r(y),!w){l=f+(l.length>0?" "+l:l);continue}b=!1}const S=s(p).join(":"),T=g?S+Z2:S,k=T+w;if(a.includes(k))continue;a.push(k);const A=i(w,b);for(let E=0;E<A.length;++E){const I=A[E];a.push(T+I)}l=f+(l.length>0?" "+l:l)}return l};function Aae(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=oH(e))&&(r&&(r+=" "),r+=n);return r}const oH=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=oH(t[r]))&&(n&&(n+=" "),n+=e);return n};function kae(t,...e){let n,r,i,s=a;function a(l){const c=e.reduce((f,d)=>d(f),t());return n=Sae(c),r=n.cache.get,i=n.cache.set,s=o,o(l)}function o(l){const c=r(l);if(c)return c;const f=Tae(l,n);return i(l,f),f}return function(){return s(Aae.apply(null,arguments))}}const Un=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},lH=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,cH=/^\((?:(\w[\w-]*):)?(.+)\)$/i,$ae=/^\d+\/\d+$/,Eae=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Iae=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Nae=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Oae=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,_ae=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,$u=t=>$ae.test(t),ut=t=>!!t&&!Number.isNaN(Number(t)),Io=t=>!!t&&Number.isInteger(Number(t)),lC=t=>t.endsWith("%")&&ut(t.slice(0,-1)),Ta=t=>Eae.test(t),Rae=()=>!0,Dae=t=>Iae.test(t)&&!Nae.test(t),uH=()=>!1,Mae=t=>Oae.test(t),Pae=t=>_ae.test(t),Fae=t=>!Fe(t)&&!Le(t),Lae=t=>Bf(t,dH,uH),Fe=t=>lH.test(t),Ml=t=>Bf(t,pH,Dae),cC=t=>Bf(t,Uae,ut),GL=t=>Bf(t,fH,uH),Bae=t=>Bf(t,hH,Pae),Yy=t=>Bf(t,mH,Mae),Le=t=>cH.test(t),md=t=>zf(t,pH),zae=t=>zf(t,Wae),qL=t=>zf(t,fH),jae=t=>zf(t,dH),Vae=t=>zf(t,hH),Zy=t=>zf(t,mH,!0),Bf=(t,e,n)=>{const r=lH.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},zf=(t,e,n=!1)=>{const r=cH.exec(t);return r?r[1]?e(r[1]):n:!1},fH=t=>t==="position"||t==="percentage",hH=t=>t==="image"||t==="url",dH=t=>t==="length"||t==="size"||t==="bg-size",pH=t=>t==="length",Uae=t=>t==="number",Wae=t=>t==="family-name",mH=t=>t==="shadow",Gae=()=>{const t=Un("color"),e=Un("font"),n=Un("text"),r=Un("font-weight"),i=Un("tracking"),s=Un("leading"),a=Un("breakpoint"),o=Un("container"),l=Un("spacing"),c=Un("radius"),f=Un("shadow"),d=Un("inset-shadow"),p=Un("text-shadow"),g=Un("drop-shadow"),y=Un("blur"),x=Un("perspective"),b=Un("aspect"),w=Un("ease"),S=Un("animate"),T=()=>["auto","avoid","all","avoid-page","page","left","right","column"],k=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],A=()=>[...k(),Le,Fe],E=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],N=()=>[Le,Fe,l],_=()=>[$u,"full","auto",...N()],R=()=>[Io,"none","subgrid",Le,Fe],O=()=>["auto",{span:["full",Io,Le,Fe]},Io,Le,Fe],F=()=>[Io,"auto",Le,Fe],z=()=>["auto","min","max","fr",Le,Fe],W=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],P=()=>["start","end","center","stretch","center-safe","end-safe"],M=()=>["auto",...N()],j=()=>[$u,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],V=()=>[t,Le,Fe],q=()=>[...k(),qL,GL,{position:[Le,Fe]}],L=()=>["no-repeat",{repeat:["","x","y","space","round"]}],G=()=>["auto","cover","contain",jae,Lae,{size:[Le,Fe]}],H=()=>[lC,md,Ml],K=()=>["","none","full",c,Le,Fe],oe=()=>["",ut,md,Ml],pe=()=>["solid","dashed","dotted","double"],be=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ae=()=>[ut,lC,qL,GL],$e=()=>["","none",y,Le,Fe],ge=()=>["none",ut,Le,Fe],Ee=()=>["none",ut,Le,Fe],Ie=()=>[ut,Le,Fe],ye=()=>[$u,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ta],breakpoint:[Ta],color:[Rae],container:[Ta],"drop-shadow":[Ta],ease:["in","out","in-out"],font:[Fae],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ta],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ta],shadow:[Ta],spacing:["px",ut],text:[Ta],"text-shadow":[Ta],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",$u,Fe,Le,b]}],container:["container"],columns:[{columns:[ut,Fe,Le,o]}],"break-after":[{"break-after":T()}],"break-before":[{"break-before":T()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:A()}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:_()}],"inset-x":[{"inset-x":_()}],"inset-y":[{"inset-y":_()}],start:[{start:_()}],end:[{end:_()}],top:[{top:_()}],right:[{right:_()}],bottom:[{bottom:_()}],left:[{left:_()}],visibility:["visible","invisible","collapse"],z:[{z:[Io,"auto",Le,Fe]}],basis:[{basis:[$u,"full","auto",o,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ut,$u,"auto","initial","none",Fe]}],grow:[{grow:["",ut,Le,Fe]}],shrink:[{shrink:["",ut,Le,Fe]}],order:[{order:[Io,"first","last","none",Le,Fe]}],"grid-cols":[{"grid-cols":R()}],"col-start-end":[{col:O()}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":R()}],"row-start-end":[{row:O()}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":z()}],"auto-rows":[{"auto-rows":z()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[...W(),"normal"]}],"justify-items":[{"justify-items":[...P(),"normal"]}],"justify-self":[{"justify-self":["auto",...P()]}],"align-content":[{content:["normal",...W()]}],"align-items":[{items:[...P(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...P(),{baseline:["","last"]}]}],"place-content":[{"place-content":W()}],"place-items":[{"place-items":[...P(),"baseline"]}],"place-self":[{"place-self":["auto",...P()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:M()}],mx:[{mx:M()}],my:[{my:M()}],ms:[{ms:M()}],me:[{me:M()}],mt:[{mt:M()}],mr:[{mr:M()}],mb:[{mb:M()}],ml:[{ml:M()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:j()}],w:[{w:[o,"screen",...j()]}],"min-w":[{"min-w":[o,"screen","none",...j()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[a]},...j()]}],h:[{h:["screen","lh",...j()]}],"min-h":[{"min-h":["screen","lh","none",...j()]}],"max-h":[{"max-h":["screen","lh",...j()]}],"font-size":[{text:["base",n,md,Ml]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Le,cC]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",lC,Fe]}],"font-family":[{font:[zae,Fe,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Le,Fe]}],"line-clamp":[{"line-clamp":[ut,"none",Le,cC]}],leading:[{leading:[s,...N()]}],"list-image":[{"list-image":["none",Le,Fe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Le,Fe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:V()}],"text-color":[{text:V()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...pe(),"wavy"]}],"text-decoration-thickness":[{decoration:[ut,"from-font","auto",Le,Ml]}],"text-decoration-color":[{decoration:V()}],"underline-offset":[{"underline-offset":[ut,"auto",Le,Fe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Le,Fe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Le,Fe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:q()}],"bg-repeat":[{bg:L()}],"bg-size":[{bg:G()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Io,Le,Fe],radial:["",Le,Fe],conic:[Io,Le,Fe]},Vae,Bae]}],"bg-color":[{bg:V()}],"gradient-from-pos":[{from:H()}],"gradient-via-pos":[{via:H()}],"gradient-to-pos":[{to:H()}],"gradient-from":[{from:V()}],"gradient-via":[{via:V()}],"gradient-to":[{to:V()}],rounded:[{rounded:K()}],"rounded-s":[{"rounded-s":K()}],"rounded-e":[{"rounded-e":K()}],"rounded-t":[{"rounded-t":K()}],"rounded-r":[{"rounded-r":K()}],"rounded-b":[{"rounded-b":K()}],"rounded-l":[{"rounded-l":K()}],"rounded-ss":[{"rounded-ss":K()}],"rounded-se":[{"rounded-se":K()}],"rounded-ee":[{"rounded-ee":K()}],"rounded-es":[{"rounded-es":K()}],"rounded-tl":[{"rounded-tl":K()}],"rounded-tr":[{"rounded-tr":K()}],"rounded-br":[{"rounded-br":K()}],"rounded-bl":[{"rounded-bl":K()}],"border-w":[{border:oe()}],"border-w-x":[{"border-x":oe()}],"border-w-y":[{"border-y":oe()}],"border-w-s":[{"border-s":oe()}],"border-w-e":[{"border-e":oe()}],"border-w-t":[{"border-t":oe()}],"border-w-r":[{"border-r":oe()}],"border-w-b":[{"border-b":oe()}],"border-w-l":[{"border-l":oe()}],"divide-x":[{"divide-x":oe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":oe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...pe(),"hidden","none"]}],"divide-style":[{divide:[...pe(),"hidden","none"]}],"border-color":[{border:V()}],"border-color-x":[{"border-x":V()}],"border-color-y":[{"border-y":V()}],"border-color-s":[{"border-s":V()}],"border-color-e":[{"border-e":V()}],"border-color-t":[{"border-t":V()}],"border-color-r":[{"border-r":V()}],"border-color-b":[{"border-b":V()}],"border-color-l":[{"border-l":V()}],"divide-color":[{divide:V()}],"outline-style":[{outline:[...pe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ut,Le,Fe]}],"outline-w":[{outline:["",ut,md,Ml]}],"outline-color":[{outline:V()}],shadow:[{shadow:["","none",f,Zy,Yy]}],"shadow-color":[{shadow:V()}],"inset-shadow":[{"inset-shadow":["none",d,Zy,Yy]}],"inset-shadow-color":[{"inset-shadow":V()}],"ring-w":[{ring:oe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:V()}],"ring-offset-w":[{"ring-offset":[ut,Ml]}],"ring-offset-color":[{"ring-offset":V()}],"inset-ring-w":[{"inset-ring":oe()}],"inset-ring-color":[{"inset-ring":V()}],"text-shadow":[{"text-shadow":["none",p,Zy,Yy]}],"text-shadow-color":[{"text-shadow":V()}],opacity:[{opacity:[ut,Le,Fe]}],"mix-blend":[{"mix-blend":[...be(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":be()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ut]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ae()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ae()}],"mask-image-linear-from-color":[{"mask-linear-from":V()}],"mask-image-linear-to-color":[{"mask-linear-to":V()}],"mask-image-t-from-pos":[{"mask-t-from":Ae()}],"mask-image-t-to-pos":[{"mask-t-to":Ae()}],"mask-image-t-from-color":[{"mask-t-from":V()}],"mask-image-t-to-color":[{"mask-t-to":V()}],"mask-image-r-from-pos":[{"mask-r-from":Ae()}],"mask-image-r-to-pos":[{"mask-r-to":Ae()}],"mask-image-r-from-color":[{"mask-r-from":V()}],"mask-image-r-to-color":[{"mask-r-to":V()}],"mask-image-b-from-pos":[{"mask-b-from":Ae()}],"mask-image-b-to-pos":[{"mask-b-to":Ae()}],"mask-image-b-from-color":[{"mask-b-from":V()}],"mask-image-b-to-color":[{"mask-b-to":V()}],"mask-image-l-from-pos":[{"mask-l-from":Ae()}],"mask-image-l-to-pos":[{"mask-l-to":Ae()}],"mask-image-l-from-color":[{"mask-l-from":V()}],"mask-image-l-to-color":[{"mask-l-to":V()}],"mask-image-x-from-pos":[{"mask-x-from":Ae()}],"mask-image-x-to-pos":[{"mask-x-to":Ae()}],"mask-image-x-from-color":[{"mask-x-from":V()}],"mask-image-x-to-color":[{"mask-x-to":V()}],"mask-image-y-from-pos":[{"mask-y-from":Ae()}],"mask-image-y-to-pos":[{"mask-y-to":Ae()}],"mask-image-y-from-color":[{"mask-y-from":V()}],"mask-image-y-to-color":[{"mask-y-to":V()}],"mask-image-radial":[{"mask-radial":[Le,Fe]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ae()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ae()}],"mask-image-radial-from-color":[{"mask-radial-from":V()}],"mask-image-radial-to-color":[{"mask-radial-to":V()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":k()}],"mask-image-conic-pos":[{"mask-conic":[ut]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ae()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ae()}],"mask-image-conic-from-color":[{"mask-conic-from":V()}],"mask-image-conic-to-color":[{"mask-conic-to":V()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:q()}],"mask-repeat":[{mask:L()}],"mask-size":[{mask:G()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Le,Fe]}],filter:[{filter:["","none",Le,Fe]}],blur:[{blur:$e()}],brightness:[{brightness:[ut,Le,Fe]}],contrast:[{contrast:[ut,Le,Fe]}],"drop-shadow":[{"drop-shadow":["","none",g,Zy,Yy]}],"drop-shadow-color":[{"drop-shadow":V()}],grayscale:[{grayscale:["",ut,Le,Fe]}],"hue-rotate":[{"hue-rotate":[ut,Le,Fe]}],invert:[{invert:["",ut,Le,Fe]}],saturate:[{saturate:[ut,Le,Fe]}],sepia:[{sepia:["",ut,Le,Fe]}],"backdrop-filter":[{"backdrop-filter":["","none",Le,Fe]}],"backdrop-blur":[{"backdrop-blur":$e()}],"backdrop-brightness":[{"backdrop-brightness":[ut,Le,Fe]}],"backdrop-contrast":[{"backdrop-contrast":[ut,Le,Fe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ut,Le,Fe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ut,Le,Fe]}],"backdrop-invert":[{"backdrop-invert":["",ut,Le,Fe]}],"backdrop-opacity":[{"backdrop-opacity":[ut,Le,Fe]}],"backdrop-saturate":[{"backdrop-saturate":[ut,Le,Fe]}],"backdrop-sepia":[{"backdrop-sepia":["",ut,Le,Fe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Le,Fe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ut,"initial",Le,Fe]}],ease:[{ease:["linear","initial",w,Le,Fe]}],delay:[{delay:[ut,Le,Fe]}],animate:[{animate:["none",S,Le,Fe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,Le,Fe]}],"perspective-origin":[{"perspective-origin":A()}],rotate:[{rotate:ge()}],"rotate-x":[{"rotate-x":ge()}],"rotate-y":[{"rotate-y":ge()}],"rotate-z":[{"rotate-z":ge()}],scale:[{scale:Ee()}],"scale-x":[{"scale-x":Ee()}],"scale-y":[{"scale-y":Ee()}],"scale-z":[{"scale-z":Ee()}],"scale-3d":["scale-3d"],skew:[{skew:Ie()}],"skew-x":[{"skew-x":Ie()}],"skew-y":[{"skew-y":Ie()}],transform:[{transform:[Le,Fe,"","none","gpu","cpu"]}],"transform-origin":[{origin:A()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ye()}],"translate-x":[{"translate-x":ye()}],"translate-y":[{"translate-y":ye()}],"translate-z":[{"translate-z":ye()}],"translate-none":["translate-none"],accent:[{accent:V()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:V()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Le,Fe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Le,Fe]}],fill:[{fill:["none",...V()]}],"stroke-w":[{stroke:[ut,md,Ml,cC]}],stroke:[{stroke:["none",...V()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},qae=kae(Gae);function ks(...t){return qae(St(t))}function Aa({className:t,...e}){return Z.jsx("div",{"data-slot":"card",className:ks("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...e})}function ka({className:t,...e}){return Z.jsx("div",{"data-slot":"card-header",className:ks("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...e})}function $a({className:t,...e}){return Z.jsx("div",{"data-slot":"card-title",className:ks("leading-none font-semibold",t),...e})}function Ea({className:t,...e}){return Z.jsx("div",{"data-slot":"card-content",className:ks("px-6",t),...e})}function HL(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Hae(...t){return e=>{let n=!1;const r=t.map(i=>{const s=HL(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():HL(t[i],null)}}}}function op(...t){return Q.useCallback(Hae(...t),t)}function Wv(t){const e=Kae(t),n=Q.forwardRef((r,i)=>{const{children:s,...a}=r,o=Q.Children.toArray(s),l=o.find(Yae);if(l){const c=l.props.children,f=o.map(d=>d===l?Q.Children.count(c)>1?Q.Children.only(null):Q.isValidElement(c)?c.props.children:null:d);return Z.jsx(e,{...a,ref:i,children:Q.isValidElement(c)?Q.cloneElement(c,void 0,f):null})}return Z.jsx(e,{...a,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var gH=Wv("Slot");function Kae(t){const e=Q.forwardRef((n,r)=>{const{children:i,...s}=n,a=Q.isValidElement(i)?Qae(i):void 0,o=op(a,r);if(Q.isValidElement(i)){const l=Zae(s,i.props);return i.type!==Q.Fragment&&(l.ref=o),Q.cloneElement(i,l)}return Q.Children.count(i)>1?Q.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Xae=Symbol("radix.slottable");function Yae(t){return Q.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Xae}function Zae(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...o)=>{const l=s(...o);return i(...o),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function Qae(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const KL=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,XL=St,yH=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return XL(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,a=Object.keys(i).map(c=>{const f=n==null?void 0:n[c],d=s==null?void 0:s[c];if(f===null)return null;const p=KL(f)||KL(d);return i[c][p]}),o=n&&Object.entries(n).reduce((c,f)=>{let[d,p]=f;return p===void 0||(c[d]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,f)=>{let{class:d,className:p,...g}=f;return Object.entries(g).every(y=>{let[x,b]=y;return Array.isArray(b)?b.includes({...s,...o}[x]):{...s,...o}[x]===b})?[...c,d,p]:c},[]);return XL(t,a,l,n==null?void 0:n.class,n==null?void 0:n.className)},Jae=yH("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function gd({className:t,variant:e,asChild:n=!1,...r}){const i=n?gH:"span";return Z.jsx(i,{"data-slot":"badge",className:ks(Jae({variant:e}),t),...r})}const eoe=yH("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function toe({className:t,variant:e,size:n,asChild:r=!1,...i}){const s=r?gH:"button";return Z.jsx(s,{"data-slot":"button",className:ks(eoe({variant:e,size:n,className:t})),...i})}function w0(t,e=[]){let n=[];function r(s,a){const o=Q.createContext(a),l=n.length;n=[...n,a];const c=d=>{var w;const{scope:p,children:g,...y}=d,x=((w=p==null?void 0:p[t])==null?void 0:w[l])||o,b=Q.useMemo(()=>y,Object.values(y));return Z.jsx(x.Provider,{value:b,children:g})};c.displayName=s+"Provider";function f(d,p){var x;const g=((x=p==null?void 0:p[t])==null?void 0:x[l])||o,y=Q.useContext(g);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,f]}const i=()=>{const s=n.map(a=>Q.createContext(a));return function(o){const l=(o==null?void 0:o[t])||s;return Q.useMemo(()=>({[`__scope${t}`]:{...o,[t]:l}}),[o,l])}};return i.scopeName=t,[r,noe(i,...e)]}function noe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((o,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...o,...d}},{});return Q.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}$G();var roe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],tl=roe.reduce((t,e)=>{const n=Wv(`Primitive.${e}`),r=Q.forwardRef((i,s)=>{const{asChild:a,...o}=i,l=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),Z.jsx(l,{...o,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),PI="Progress",FI=100,[ioe,X6e]=w0(PI),[soe,aoe]=ioe(PI),vH=Q.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:s=ooe,...a}=t;(i||i===0)&&!YL(i)&&console.error(loe(`${i}`,"Progress"));const o=YL(i)?i:FI;r!==null&&!ZL(r,o)&&console.error(coe(`${r}`,"Progress"));const l=ZL(r,o)?r:null,c=Gv(l)?s(l,o):void 0;return Z.jsx(soe,{scope:n,value:l,max:o,children:Z.jsx(tl.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":Gv(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":wH(l,o),"data-value":l??void 0,"data-max":o,...a,ref:e})})});vH.displayName=PI;var bH="ProgressIndicator",xH=Q.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,i=aoe(bH,n);return Z.jsx(tl.div,{"data-state":wH(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});xH.displayName=bH;function ooe(t,e){return`${Math.round(t/e*100)}%`}function wH(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Gv(t){return typeof t=="number"}function YL(t){return Gv(t)&&!isNaN(t)&&t>0}function ZL(t,e){return Gv(t)&&!isNaN(t)&&t<=e&&t>=0}function loe(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${FI}\`.`}function coe(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${FI} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var uoe=vH,foe=xH;function hoe({className:t,value:e,...n}){return Z.jsx(uoe,{"data-slot":"progress",className:ks("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...n,children:Z.jsx(foe,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})})}function Pa(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function doe(t){const e=t+"CollectionProvider",[n,r]=w0(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=x=>{const{scope:b,children:w}=x,S=J.useRef(null),T=J.useRef(new Map).current;return Z.jsx(i,{scope:b,itemMap:T,collectionRef:S,children:w})};a.displayName=e;const o=t+"CollectionSlot",l=Wv(o),c=J.forwardRef((x,b)=>{const{scope:w,children:S}=x,T=s(o,w),k=op(b,T.collectionRef);return Z.jsx(l,{ref:k,children:S})});c.displayName=o;const f=t+"CollectionItemSlot",d="data-radix-collection-item",p=Wv(f),g=J.forwardRef((x,b)=>{const{scope:w,children:S,...T}=x,k=J.useRef(null),A=op(b,k),E=s(f,w);return J.useEffect(()=>(E.itemMap.set(k,{ref:k,...T}),()=>void E.itemMap.delete(k))),Z.jsx(p,{[d]:"",ref:A,children:S})});g.displayName=f;function y(x){const b=s(t+"CollectionConsumer",x);return J.useCallback(()=>{const S=b.collectionRef.current;if(!S)return[];const T=Array.from(S.querySelectorAll(`[${d}]`));return Array.from(b.itemMap.values()).sort((E,I)=>T.indexOf(E.ref.current)-T.indexOf(I.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:a,Slot:c,ItemSlot:g},y,r]}var qv=globalThis!=null&&globalThis.document?Q.useLayoutEffect:()=>{},poe=kG[" useId ".trim().toString()]||(()=>{}),moe=0;function SH(t){const[e,n]=Q.useState(poe());return qv(()=>{n(r=>r??String(moe++))},[t]),t||(e?`radix-${e}`:"")}function goe(t){const e=Q.useRef(t);return Q.useEffect(()=>{e.current=t}),Q.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}var yoe=kG[" useInsertionEffect ".trim().toString()]||qv;function CH({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,a]=voe({defaultProp:e,onChange:n}),o=t!==void 0,l=o?t:i;{const f=Q.useRef(t!==void 0);Q.useEffect(()=>{const d=f.current;d!==o&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=o},[o,r])}const c=Q.useCallback(f=>{var d;if(o){const p=boe(f)?f(t):f;p!==t&&((d=a.current)==null||d.call(a,p))}else s(f)},[o,t,s,a]);return[l,c]}function voe({defaultProp:t,onChange:e}){const[n,r]=Q.useState(t),i=Q.useRef(n),s=Q.useRef(e);return yoe(()=>{s.current=e},[e]),Q.useEffect(()=>{var a;i.current!==n&&((a=s.current)==null||a.call(s,n),i.current=n)},[n,i]),[n,r,s]}function boe(t){return typeof t=="function"}var xoe=Q.createContext(void 0);function TH(t){const e=Q.useContext(xoe);return t||e||"ltr"}var uC="rovingFocusGroup.onEntryFocus",woe={bubbles:!1,cancelable:!0},om="RovingFocusGroup",[J2,AH,Soe]=doe(om),[Coe,kH]=w0(om,[Soe]),[Toe,Aoe]=Coe(om),$H=Q.forwardRef((t,e)=>Z.jsx(J2.Provider,{scope:t.__scopeRovingFocusGroup,children:Z.jsx(J2.Slot,{scope:t.__scopeRovingFocusGroup,children:Z.jsx(koe,{...t,ref:e})})}));$H.displayName=om;var koe=Q.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:f=!1,...d}=t,p=Q.useRef(null),g=op(e,p),y=TH(s),[x,b]=CH({prop:a,defaultProp:o??null,onChange:l,caller:om}),[w,S]=Q.useState(!1),T=goe(c),k=AH(n),A=Q.useRef(!1),[E,I]=Q.useState(0);return Q.useEffect(()=>{const N=p.current;if(N)return N.addEventListener(uC,T),()=>N.removeEventListener(uC,T)},[T]),Z.jsx(Toe,{scope:n,orientation:r,dir:y,loop:i,currentTabStopId:x,onItemFocus:Q.useCallback(N=>b(N),[b]),onItemShiftTab:Q.useCallback(()=>S(!0),[]),onFocusableItemAdd:Q.useCallback(()=>I(N=>N+1),[]),onFocusableItemRemove:Q.useCallback(()=>I(N=>N-1),[]),children:Z.jsx(tl.div,{tabIndex:w||E===0?-1:0,"data-orientation":r,...d,ref:g,style:{outline:"none",...t.style},onMouseDown:Pa(t.onMouseDown,()=>{A.current=!0}),onFocus:Pa(t.onFocus,N=>{const _=!A.current;if(N.target===N.currentTarget&&_&&!w){const R=new CustomEvent(uC,woe);if(N.currentTarget.dispatchEvent(R),!R.defaultPrevented){const O=k().filter(M=>M.focusable),F=O.find(M=>M.active),z=O.find(M=>M.id===x),P=[F,z,...O].filter(Boolean).map(M=>M.ref.current);NH(P,f)}}A.current=!1}),onBlur:Pa(t.onBlur,()=>S(!1))})})}),EH="RovingFocusGroupItem",IH=Q.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:a,...o}=t,l=SH(),c=s||l,f=Aoe(EH,n),d=f.currentTabStopId===c,p=AH(n),{onFocusableItemAdd:g,onFocusableItemRemove:y,currentTabStopId:x}=f;return Q.useEffect(()=>{if(r)return g(),()=>y()},[r,g,y]),Z.jsx(J2.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:Z.jsx(tl.span,{tabIndex:d?0:-1,"data-orientation":f.orientation,...o,ref:e,onMouseDown:Pa(t.onMouseDown,b=>{r?f.onItemFocus(c):b.preventDefault()}),onFocus:Pa(t.onFocus,()=>f.onItemFocus(c)),onKeyDown:Pa(t.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){f.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const w=Ioe(b,f.orientation,f.dir);if(w!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let T=p().filter(k=>k.focusable).map(k=>k.ref.current);if(w==="last")T.reverse();else if(w==="prev"||w==="next"){w==="prev"&&T.reverse();const k=T.indexOf(b.currentTarget);T=f.loop?Noe(T,k+1):T.slice(k+1)}setTimeout(()=>NH(T))}}),children:typeof a=="function"?a({isCurrentTabStop:d,hasTabStop:x!=null}):a})})});IH.displayName=EH;var $oe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Eoe(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Ioe(t,e,n){const r=Eoe(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return $oe[r]}function NH(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Noe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Ooe=$H,_oe=IH;function Roe(t,e){return Q.useReducer((n,r)=>e[n][r]??n,t)}var OH=t=>{const{present:e,children:n}=t,r=Doe(e),i=typeof n=="function"?n({present:r.isPresent}):Q.Children.only(n),s=op(r.ref,Moe(i));return typeof n=="function"||r.isPresent?Q.cloneElement(i,{ref:s}):null};OH.displayName="Presence";function Doe(t){const[e,n]=Q.useState(),r=Q.useRef(null),i=Q.useRef(t),s=Q.useRef("none"),a=t?"mounted":"unmounted",[o,l]=Roe(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return Q.useEffect(()=>{const c=Qy(r.current);s.current=o==="mounted"?c:"none"},[o]),qv(()=>{const c=r.current,f=i.current;if(f!==t){const p=s.current,g=Qy(c);t?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(f&&p!==g?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),qv(()=>{if(e){let c;const f=e.ownerDocument.defaultView??window,d=g=>{const x=Qy(r.current).includes(g.animationName);if(g.target===e&&x&&(l("ANIMATION_END"),!i.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",c=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},p=g=>{g.target===e&&(s.current=Qy(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{f.clearTimeout(c),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:Q.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function Qy(t){return(t==null?void 0:t.animationName)||"none"}function Moe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var S0="Tabs",[Poe,Y6e]=w0(S0,[kH]),_H=kH(),[Foe,LI]=Poe(S0),RH=Q.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:a="horizontal",dir:o,activationMode:l="automatic",...c}=t,f=TH(o),[d,p]=CH({prop:r,onChange:i,defaultProp:s??"",caller:S0});return Z.jsx(Foe,{scope:n,baseId:SH(),value:d,onValueChange:p,orientation:a,dir:f,activationMode:l,children:Z.jsx(tl.div,{dir:f,"data-orientation":a,...c,ref:e})})});RH.displayName=S0;var DH="TabsList",MH=Q.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=LI(DH,n),a=_H(n);return Z.jsx(Ooe,{asChild:!0,...a,orientation:s.orientation,dir:s.dir,loop:r,children:Z.jsx(tl.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});MH.displayName=DH;var PH="TabsTrigger",FH=Q.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,a=LI(PH,n),o=_H(n),l=zH(a.baseId,r),c=jH(a.baseId,r),f=r===a.value;return Z.jsx(_oe,{asChild:!0,...o,focusable:!i,active:f,children:Z.jsx(tl.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":c,"data-state":f?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:e,onMouseDown:Pa(t.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?a.onValueChange(r):d.preventDefault()}),onKeyDown:Pa(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&a.onValueChange(r)}),onFocus:Pa(t.onFocus,()=>{const d=a.activationMode!=="manual";!f&&!i&&d&&a.onValueChange(r)})})})});FH.displayName=PH;var LH="TabsContent",BH=Q.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...a}=t,o=LI(LH,n),l=zH(o.baseId,r),c=jH(o.baseId,r),f=r===o.value,d=Q.useRef(f);return Q.useEffect(()=>{const p=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(p)},[]),Z.jsx(OH,{present:i||f,children:({present:p})=>Z.jsx(tl.div,{"data-state":f?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!p,id:c,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:p&&s})})});BH.displayName=LH;function zH(t,e){return`${t}-trigger-${e}`}function jH(t,e){return`${t}-content-${e}`}var Loe=RH,Boe=MH,zoe=FH,joe=BH;function Voe({className:t,...e}){return Z.jsx(Loe,{"data-slot":"tabs",className:ks("flex flex-col gap-2",t),...e})}function Uoe({className:t,...e}){return Z.jsx(Boe,{"data-slot":"tabs-list",className:ks("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...e})}function yd({className:t,...e}){return Z.jsx(zoe,{"data-slot":"tabs-trigger",className:ks("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...e})}function vd({className:t,...e}){return Z.jsx(joe,{"data-slot":"tabs-content",className:ks("flex-1 outline-none",t),...e})}var fC,QL;function fi(){if(QL)return fC;QL=1;var t=Array.isArray;return fC=t,fC}var hC,JL;function VH(){if(JL)return hC;JL=1;var t=typeof Gy=="object"&&Gy&&Gy.Object===Object&&Gy;return hC=t,hC}var dC,e3;function sa(){if(e3)return dC;e3=1;var t=VH(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return dC=n,dC}var pC,t3;function lm(){if(t3)return pC;t3=1;var t=sa(),e=t.Symbol;return pC=e,pC}var mC,n3;function Woe(){if(n3)return mC;n3=1;var t=lm(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function s(a){var o=n.call(a,i),l=a[i];try{a[i]=void 0;var c=!0}catch{}var f=r.call(a);return c&&(o?a[i]=l:delete a[i]),f}return mC=s,mC}var gC,r3;function Goe(){if(r3)return gC;r3=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return gC=n,gC}var yC,i3;function Qa(){if(i3)return yC;i3=1;var t=lm(),e=Woe(),n=Goe(),r="[object Null]",i="[object Undefined]",s=t?t.toStringTag:void 0;function a(o){return o==null?o===void 0?i:r:s&&s in Object(o)?e(o):n(o)}return yC=a,yC}var vC,s3;function Ja(){if(s3)return vC;s3=1;function t(e){return e!=null&&typeof e=="object"}return vC=t,vC}var bC,a3;function jf(){if(a3)return bC;a3=1;var t=Qa(),e=Ja(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return bC=r,bC}var xC,o3;function BI(){if(o3)return xC;o3=1;var t=fi(),e=jf(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,a){if(t(s))return!1;var o=typeof s;return o=="number"||o=="symbol"||o=="boolean"||s==null||e(s)?!0:r.test(s)||!n.test(s)||a!=null&&s in Object(a)}return xC=i,xC}var wC,l3;function nl(){if(l3)return wC;l3=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return wC=t,wC}var SC,c3;function zI(){if(c3)return SC;c3=1;var t=Qa(),e=nl(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function a(o){if(!e(o))return!1;var l=t(o);return l==r||l==i||l==n||l==s}return SC=a,SC}var CC,u3;function qoe(){if(u3)return CC;u3=1;var t=sa(),e=t["__core-js_shared__"];return CC=e,CC}var TC,f3;function Hoe(){if(f3)return TC;f3=1;var t=qoe(),e=function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!e&&e in r}return TC=n,TC}var AC,h3;function UH(){if(h3)return AC;h3=1;var t=Function.prototype,e=t.toString;function n(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return AC=n,AC}var kC,d3;function Koe(){if(d3)return kC;d3=1;var t=zI(),e=Hoe(),n=nl(),r=UH(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,a=Function.prototype,o=Object.prototype,l=a.toString,c=o.hasOwnProperty,f=RegExp("^"+l.call(c).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(p){if(!n(p)||e(p))return!1;var g=t(p)?f:s;return g.test(r(p))}return kC=d,kC}var $C,p3;function Xoe(){if(p3)return $C;p3=1;function t(e,n){return e==null?void 0:e[n]}return $C=t,$C}var EC,m3;function $c(){if(m3)return EC;m3=1;var t=Koe(),e=Xoe();function n(r,i){var s=e(r,i);return t(s)?s:void 0}return EC=n,EC}var IC,g3;function C0(){if(g3)return IC;g3=1;var t=$c(),e=t(Object,"create");return IC=e,IC}var NC,y3;function Yoe(){if(y3)return NC;y3=1;var t=C0();function e(){this.__data__=t?t(null):{},this.size=0}return NC=e,NC}var OC,v3;function Zoe(){if(v3)return OC;v3=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return OC=t,OC}var _C,b3;function Qoe(){if(b3)return _C;b3=1;var t=C0(),e="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(s){var a=this.__data__;if(t){var o=a[s];return o===e?void 0:o}return r.call(a,s)?a[s]:void 0}return _C=i,_C}var RC,x3;function Joe(){if(x3)return RC;x3=1;var t=C0(),e=Object.prototype,n=e.hasOwnProperty;function r(i){var s=this.__data__;return t?s[i]!==void 0:n.call(s,i)}return RC=r,RC}var DC,w3;function ele(){if(w3)return DC;w3=1;var t=C0(),e="__lodash_hash_undefined__";function n(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=t&&i===void 0?e:i,this}return DC=n,DC}var MC,S3;function tle(){if(S3)return MC;S3=1;var t=Yoe(),e=Zoe(),n=Qoe(),r=Joe(),i=ele();function s(a){var o=-1,l=a==null?0:a.length;for(this.clear();++o<l;){var c=a[o];this.set(c[0],c[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,MC=s,MC}var PC,C3;function nle(){if(C3)return PC;C3=1;function t(){this.__data__=[],this.size=0}return PC=t,PC}var FC,T3;function jI(){if(T3)return FC;T3=1;function t(e,n){return e===n||e!==e&&n!==n}return FC=t,FC}var LC,A3;function T0(){if(A3)return LC;A3=1;var t=jI();function e(n,r){for(var i=n.length;i--;)if(t(n[i][0],r))return i;return-1}return LC=e,LC}var BC,k3;function rle(){if(k3)return BC;k3=1;var t=T0(),e=Array.prototype,n=e.splice;function r(i){var s=this.__data__,a=t(s,i);if(a<0)return!1;var o=s.length-1;return a==o?s.pop():n.call(s,a,1),--this.size,!0}return BC=r,BC}var zC,$3;function ile(){if($3)return zC;$3=1;var t=T0();function e(n){var r=this.__data__,i=t(r,n);return i<0?void 0:r[i][1]}return zC=e,zC}var jC,E3;function sle(){if(E3)return jC;E3=1;var t=T0();function e(n){return t(this.__data__,n)>-1}return jC=e,jC}var VC,I3;function ale(){if(I3)return VC;I3=1;var t=T0();function e(n,r){var i=this.__data__,s=t(i,n);return s<0?(++this.size,i.push([n,r])):i[s][1]=r,this}return VC=e,VC}var UC,N3;function A0(){if(N3)return UC;N3=1;var t=nle(),e=rle(),n=ile(),r=sle(),i=ale();function s(a){var o=-1,l=a==null?0:a.length;for(this.clear();++o<l;){var c=a[o];this.set(c[0],c[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,UC=s,UC}var WC,O3;function VI(){if(O3)return WC;O3=1;var t=$c(),e=sa(),n=t(e,"Map");return WC=n,WC}var GC,_3;function ole(){if(_3)return GC;_3=1;var t=tle(),e=A0(),n=VI();function r(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return GC=r,GC}var qC,R3;function lle(){if(R3)return qC;R3=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return qC=t,qC}var HC,D3;function k0(){if(D3)return HC;D3=1;var t=lle();function e(n,r){var i=n.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return HC=e,HC}var KC,M3;function cle(){if(M3)return KC;M3=1;var t=k0();function e(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}return KC=e,KC}var XC,P3;function ule(){if(P3)return XC;P3=1;var t=k0();function e(n){return t(this,n).get(n)}return XC=e,XC}var YC,F3;function fle(){if(F3)return YC;F3=1;var t=k0();function e(n){return t(this,n).has(n)}return YC=e,YC}var ZC,L3;function hle(){if(L3)return ZC;L3=1;var t=k0();function e(n,r){var i=t(this,n),s=i.size;return i.set(n,r),this.size+=i.size==s?0:1,this}return ZC=e,ZC}var QC,B3;function UI(){if(B3)return QC;B3=1;var t=ole(),e=cle(),n=ule(),r=fle(),i=hle();function s(a){var o=-1,l=a==null?0:a.length;for(this.clear();++o<l;){var c=a[o];this.set(c[0],c[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,QC=s,QC}var JC,z3;function WH(){if(z3)return JC;z3=1;var t=UI(),e="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var a=arguments,o=i?i.apply(this,a):a[0],l=s.cache;if(l.has(o))return l.get(o);var c=r.apply(this,a);return s.cache=l.set(o,c)||l,c};return s.cache=new(n.Cache||t),s}return n.Cache=t,JC=n,JC}var eT,j3;function dle(){if(j3)return eT;j3=1;var t=WH(),e=500;function n(r){var i=t(r,function(a){return s.size===e&&s.clear(),a}),s=i.cache;return i}return eT=n,eT}var tT,V3;function ple(){if(V3)return tT;V3=1;var t=dle(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(a,o,l,c){s.push(l?c.replace(n,"$1"):o||a)}),s});return tT=r,tT}var nT,U3;function WI(){if(U3)return nT;U3=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,s=Array(i);++r<i;)s[r]=n(e[r],r,e);return s}return nT=t,nT}var rT,W3;function mle(){if(W3)return rT;W3=1;var t=lm(),e=WI(),n=fi(),r=jf(),i=t?t.prototype:void 0,s=i?i.toString:void 0;function a(o){if(typeof o=="string")return o;if(n(o))return e(o,a)+"";if(r(o))return s?s.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}return rT=a,rT}var iT,G3;function GH(){if(G3)return iT;G3=1;var t=mle();function e(n){return n==null?"":t(n)}return iT=e,iT}var sT,q3;function qH(){if(q3)return sT;q3=1;var t=fi(),e=BI(),n=ple(),r=GH();function i(s,a){return t(s)?s:e(s,a)?[s]:n(r(s))}return sT=i,sT}var aT,H3;function $0(){if(H3)return aT;H3=1;var t=jf();function e(n){if(typeof n=="string"||t(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return aT=e,aT}var oT,K3;function GI(){if(K3)return oT;K3=1;var t=qH(),e=$0();function n(r,i){i=t(i,r);for(var s=0,a=i.length;r!=null&&s<a;)r=r[e(i[s++])];return s&&s==a?r:void 0}return oT=n,oT}var lT,X3;function HH(){if(X3)return lT;X3=1;var t=GI();function e(n,r,i){var s=n==null?void 0:t(n,r);return s===void 0?i:s}return lT=e,lT}var gle=HH();const Zi=Vt(gle);var cT,Y3;function yle(){if(Y3)return cT;Y3=1;function t(e){return e==null}return cT=t,cT}var vle=yle();const yt=Vt(vle);var uT,Z3;function ble(){if(Z3)return uT;Z3=1;var t=Qa(),e=fi(),n=Ja(),r="[object String]";function i(s){return typeof s=="string"||!e(s)&&n(s)&&t(s)==r}return uT=i,uT}var xle=ble();const lc=Vt(xle);var wle=zI();const st=Vt(wle);var Sle=nl();const Vf=Vt(Sle);var fT={exports:{}},Nt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q3;function Cle(){if(Q3)return Nt;Q3=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen"),y;y=Symbol.for("react.module.reference");function x(b){if(typeof b=="object"&&b!==null){var w=b.$$typeof;switch(w){case t:switch(b=b.type,b){case n:case i:case r:case c:case f:return b;default:switch(b=b&&b.$$typeof,b){case o:case a:case l:case p:case d:case s:return b;default:return w}}case e:return w}}}return Nt.ContextConsumer=a,Nt.ContextProvider=s,Nt.Element=t,Nt.ForwardRef=l,Nt.Fragment=n,Nt.Lazy=p,Nt.Memo=d,Nt.Portal=e,Nt.Profiler=i,Nt.StrictMode=r,Nt.Suspense=c,Nt.SuspenseList=f,Nt.isAsyncMode=function(){return!1},Nt.isConcurrentMode=function(){return!1},Nt.isContextConsumer=function(b){return x(b)===a},Nt.isContextProvider=function(b){return x(b)===s},Nt.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===t},Nt.isForwardRef=function(b){return x(b)===l},Nt.isFragment=function(b){return x(b)===n},Nt.isLazy=function(b){return x(b)===p},Nt.isMemo=function(b){return x(b)===d},Nt.isPortal=function(b){return x(b)===e},Nt.isProfiler=function(b){return x(b)===i},Nt.isStrictMode=function(b){return x(b)===r},Nt.isSuspense=function(b){return x(b)===c},Nt.isSuspenseList=function(b){return x(b)===f},Nt.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===n||b===i||b===r||b===c||b===f||b===g||typeof b=="object"&&b!==null&&(b.$$typeof===p||b.$$typeof===d||b.$$typeof===s||b.$$typeof===a||b.$$typeof===l||b.$$typeof===y||b.getModuleId!==void 0)},Nt.typeOf=x,Nt}var J3;function Tle(){return J3||(J3=1,fT.exports=Cle()),fT.exports}var Ale=Tle(),hT,eB;function KH(){if(eB)return hT;eB=1;var t=Qa(),e=Ja(),n="[object Number]";function r(i){return typeof i=="number"||e(i)&&t(i)==n}return hT=r,hT}var dT,tB;function kle(){if(tB)return dT;tB=1;var t=KH();function e(n){return t(n)&&n!=+n}return dT=e,dT}var $le=kle();const Uf=Vt($le);var Ele=KH();const Ile=Vt(Ele);var ys=function(e){return e===0?0:e>0?1:-1},Kl=function(e){return lc(e)&&e.indexOf("%")===e.length-1},Ne=function(e){return Ile(e)&&!Uf(e)},Hn=function(e){return Ne(e)||lc(e)},Nle=0,cm=function(e){var n=++Nle;return"".concat(e||"").concat(n)},cc=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ne(e)&&!lc(e))return r;var s;if(Kl(e)){var a=e.indexOf("%");s=n*parseFloat(e.slice(0,a))/100}else s=+e;return Uf(s)&&(s=r),i&&s>n&&(s=n),s},Do=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},Ole=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},Gi=function(e,n){return Ne(e)&&Ne(n)?function(r){return e+r*(n-e)}:function(){return n}};function Hv(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Zi(r,e))===n})}var _le=function(e,n){return Ne(e)&&Ne(n)?e-n:lc(e)&&lc(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function Gu(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function e$(t){"@babel/helpers - typeof";return e$=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e$(t)}var Rle=["viewBox","children"],Dle=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],nB=["points","pathLength"],pT={svg:Rle,polygon:nB,polyline:nB},qI=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Kv=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(Q.isValidElement(e)&&(r=e.props),!Vf(r))return null;var i={};return Object.keys(r).forEach(function(s){qI.includes(s)&&(i[s]=n||function(a){return r[s](r,a)})}),i},Mle=function(e,n,r){return function(i){return e(n,r,i),null}},Xv=function(e,n,r){if(!Vf(e)||e$(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(s){var a=e[s];qI.includes(s)&&typeof a=="function"&&(i||(i={}),i[s]=Mle(a,n,r))}),i},Ple=["children"],Fle=["children"];function rB(t,e){if(t==null)return{};var n=Lle(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Lle(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function t$(t){"@babel/helpers - typeof";return t$=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t$(t)}var iB={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Fa=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},sB=null,mT=null,HI=function t(e){if(e===sB&&Array.isArray(mT))return mT;var n=[];return Q.Children.forEach(e,function(r){yt(r)||(Ale.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),mT=n,sB=e,n};function bs(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return Fa(i)}):r=[Fa(e)],HI(t).forEach(function(i){var s=Zi(i,"type.displayName")||Zi(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}function xi(t,e){var n=bs(t,e);return n&&n[0]}var aB=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!Ne(r)||r<=0||!Ne(i)||i<=0)},Ble=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],zle=function(e){return e&&e.type&&lc(e.type)&&Ble.indexOf(e.type)>=0},jle=function(e){return e&&t$(e)==="object"&&"clipDot"in e},Vle=function(e,n,r,i){var s,a=(s=pT==null?void 0:pT[i])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!st(e)&&(i&&a.includes(n)||Dle.includes(n))||r&&qI.includes(n)},mt=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(Q.isValidElement(e)&&(i=e.props),!Vf(i))return null;var s={};return Object.keys(i).forEach(function(a){var o;Vle((o=i)===null||o===void 0?void 0:o[a],a,n,r)&&(s[a]=i[a])}),s},n$=function t(e,n){if(e===n)return!0;var r=Q.Children.count(e);if(r!==Q.Children.count(n))return!1;if(r===0)return!0;if(r===1)return oB(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var s=e[i],a=n[i];if(Array.isArray(s)||Array.isArray(a)){if(!t(s,a))return!1}else if(!oB(s,a))return!1}return!0},oB=function(e,n){if(yt(e)&&yt(n))return!0;if(!yt(e)&&!yt(n)){var r=e.props||{},i=r.children,s=rB(r,Ple),a=n.props||{},o=a.children,l=rB(a,Fle);return i&&o?Gu(s,l)&&n$(i,o):!i&&!o?Gu(s,l):!1}return!1},lB=function(e,n){var r=[],i={};return HI(e).forEach(function(s,a){if(zle(s))r.push(s);else if(s){var o=Fa(s.type),l=n[o]||{},c=l.handler,f=l.once;if(c&&(!f||!i[o])){var d=c(s,o,a);r.push(d),i[o]=!0}}}),r},Ule=function(e){var n=e&&e.type;return n&&iB[n]?iB[n]:null},Wle=function(e,n){return HI(n).indexOf(e)},Gle=["children","width","height","viewBox","className","style","title","desc"];function r$(){return r$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r$.apply(this,arguments)}function qle(t,e){if(t==null)return{};var n=Hle(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Hle(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function i$(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,s=t.className,a=t.style,o=t.title,l=t.desc,c=qle(t,Gle),f=i||{width:n,height:r,x:0,y:0},d=St("recharts-surface",s);return J.createElement("svg",r$({},mt(c,!0,"svg"),{className:d,width:n,height:r,style:a,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),J.createElement("title",null,o),J.createElement("desc",null,l),e)}var Kle=["children","className"];function s$(){return s$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s$.apply(this,arguments)}function Xle(t,e){if(t==null)return{};var n=Yle(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Yle(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var cn=J.forwardRef(function(t,e){var n=t.children,r=t.className,i=Xle(t,Kle),s=St("recharts-layer",r);return J.createElement("g",s$({className:s},mt(i,!0),{ref:e}),n)}),La=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]},gT,cB;function Zle(){if(cB)return gT;cB=1;function t(e,n,r){var i=-1,s=e.length;n<0&&(n=-n>s?0:s+n),r=r>s?s:r,r<0&&(r+=s),s=n>r?0:r-n>>>0,n>>>=0;for(var a=Array(s);++i<s;)a[i]=e[i+n];return a}return gT=t,gT}var yT,uB;function Qle(){if(uB)return yT;uB=1;var t=Zle();function e(n,r,i){var s=n.length;return i=i===void 0?s:i,!r&&i>=s?n:t(n,r,i)}return yT=e,yT}var vT,fB;function XH(){if(fB)return vT;fB=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,s="\\ufe0e\\ufe0f",a="\\u200d",o=RegExp("["+a+t+i+s+"]");function l(c){return o.test(c)}return vT=l,vT}var bT,hB;function Jle(){if(hB)return bT;hB=1;function t(e){return e.split("")}return bT=t,bT}var xT,dB;function ece(){if(dB)return xT;dB=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,s="\\ufe0e\\ufe0f",a="["+t+"]",o="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",c="(?:"+o+"|"+l+")",f="[^"+t+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",y=c+"?",x="["+s+"]?",b="(?:"+g+"(?:"+[f,d,p].join("|")+")"+x+y+")*",w=x+y+b,S="(?:"+[f+o+"?",o,d,p,a].join("|")+")",T=RegExp(l+"(?="+l+")|"+S+w,"g");function k(A){return A.match(T)||[]}return xT=k,xT}var wT,pB;function tce(){if(pB)return wT;pB=1;var t=Jle(),e=XH(),n=ece();function r(i){return e(i)?n(i):t(i)}return wT=r,wT}var ST,mB;function nce(){if(mB)return ST;mB=1;var t=Qle(),e=XH(),n=tce(),r=GH();function i(s){return function(a){a=r(a);var o=e(a)?n(a):void 0,l=o?o[0]:a.charAt(0),c=o?t(o,1).join(""):a.slice(1);return l[s]()+c}}return ST=i,ST}var CT,gB;function rce(){if(gB)return CT;gB=1;var t=nce(),e=t("toUpperCase");return CT=e,CT}var ice=rce();const E0=Vt(ice);function Yt(t){return function(){return t}}const YH=Math.cos,Yv=Math.sin,$s=Math.sqrt,Zv=Math.PI,I0=2*Zv,a$=Math.PI,o$=2*a$,zl=1e-6,sce=o$-zl;function ZH(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function ace(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return ZH;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class oce{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?ZH:ace(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,l=r-e,c=i-n,f=a-e,d=o-n,p=f*f+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(p>zl)if(!(Math.abs(d*l-c*f)>zl)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-a,y=i-o,x=l*l+c*c,b=g*g+y*y,w=Math.sqrt(x),S=Math.sqrt(p),T=s*Math.tan((a$-Math.acos((x+p-b)/(2*w*S)))/2),k=T/S,A=T/w;Math.abs(k-1)>zl&&this._append`L${e+k*f},${n+k*d}`,this._append`A${s},${s},0,0,${+(d*g>f*y)},${this._x1=e+A*l},${this._y1=n+A*c}`}}arc(e,n,r,i,s,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),c=e+o,f=n+l,d=1^a,p=a?i-s:s-i;this._x1===null?this._append`M${c},${f}`:(Math.abs(this._x1-c)>zl||Math.abs(this._y1-f)>zl)&&this._append`L${c},${f}`,r&&(p<0&&(p=p%o$+o$),p>sce?this._append`A${r},${r},0,1,${d},${e-o},${n-l}A${r},${r},0,1,${d},${this._x1=c},${this._y1=f}`:p>zl&&this._append`A${r},${r},0,${+(p>=a$)},${d},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function KI(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new oce(e)}function XI(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function QH(t){this._context=t}QH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function N0(t){return new QH(t)}function JH(t){return t[0]}function e6(t){return t[1]}function t6(t,e){var n=Yt(!0),r=null,i=N0,s=null,a=KI(o);t=typeof t=="function"?t:t===void 0?JH:Yt(t),e=typeof e=="function"?e:e===void 0?e6:Yt(e);function o(l){var c,f=(l=XI(l)).length,d,p=!1,g;for(r==null&&(s=i(g=a())),c=0;c<=f;++c)!(c<f&&n(d=l[c],c,l))===p&&((p=!p)?s.lineStart():s.lineEnd()),p&&s.point(+t(d,c,l),+e(d,c,l));if(g)return s=null,g+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:Yt(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:Yt(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Yt(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),o):r},o}function Jy(t,e,n){var r=null,i=Yt(!0),s=null,a=N0,o=null,l=KI(c);t=typeof t=="function"?t:t===void 0?JH:Yt(+t),e=typeof e=="function"?e:Yt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?e6:Yt(+n);function c(d){var p,g,y,x=(d=XI(d)).length,b,w=!1,S,T=new Array(x),k=new Array(x);for(s==null&&(o=a(S=l())),p=0;p<=x;++p){if(!(p<x&&i(b=d[p],p,d))===w)if(w=!w)g=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),y=p-1;y>=g;--y)o.point(T[y],k[y]);o.lineEnd(),o.areaEnd()}w&&(T[p]=+t(b,p,d),k[p]=+e(b,p,d),o.point(r?+r(b,p,d):T[p],n?+n(b,p,d):k[p]))}if(S)return o=null,S+""||null}function f(){return t6().defined(i).curve(a).context(s)}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:Yt(+d),r=null,c):t},c.x0=function(d){return arguments.length?(t=typeof d=="function"?d:Yt(+d),c):t},c.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Yt(+d),c):r},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:Yt(+d),n=null,c):e},c.y0=function(d){return arguments.length?(e=typeof d=="function"?d:Yt(+d),c):e},c.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Yt(+d),c):n},c.lineX0=c.lineY0=function(){return f().x(t).y(e)},c.lineY1=function(){return f().x(t).y(n)},c.lineX1=function(){return f().x(r).y(e)},c.defined=function(d){return arguments.length?(i=typeof d=="function"?d:Yt(!!d),c):i},c.curve=function(d){return arguments.length?(a=d,s!=null&&(o=a(s)),c):a},c.context=function(d){return arguments.length?(d==null?s=o=null:o=a(s=d),c):s},c}class n6{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function lce(t){return new n6(t,!0)}function cce(t){return new n6(t,!1)}const YI={draw(t,e){const n=$s(e/Zv);t.moveTo(n,0),t.arc(0,0,n,0,I0)}},uce={draw(t,e){const n=$s(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},r6=$s(1/3),fce=r6*2,hce={draw(t,e){const n=$s(e/fce),r=n*r6;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},dce={draw(t,e){const n=$s(e),r=-n/2;t.rect(r,r,n,n)}},pce=.8908130915292852,i6=Yv(Zv/10)/Yv(7*Zv/10),mce=Yv(I0/10)*i6,gce=-YH(I0/10)*i6,yce={draw(t,e){const n=$s(e*pce),r=mce*n,i=gce*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const a=I0*s/5,o=YH(a),l=Yv(a);t.lineTo(l*n,-o*n),t.lineTo(o*r-l*i,l*r+o*i)}t.closePath()}},TT=$s(3),vce={draw(t,e){const n=-$s(e/(TT*3));t.moveTo(0,n*2),t.lineTo(-TT*n,-n),t.lineTo(TT*n,-n),t.closePath()}},Bi=-.5,zi=$s(3)/2,l$=1/$s(12),bce=(l$/2+1)*3,xce={draw(t,e){const n=$s(e/bce),r=n/2,i=n*l$,s=r,a=n*l$+n,o=-s,l=a;t.moveTo(r,i),t.lineTo(s,a),t.lineTo(o,l),t.lineTo(Bi*r-zi*i,zi*r+Bi*i),t.lineTo(Bi*s-zi*a,zi*s+Bi*a),t.lineTo(Bi*o-zi*l,zi*o+Bi*l),t.lineTo(Bi*r+zi*i,Bi*i-zi*r),t.lineTo(Bi*s+zi*a,Bi*a-zi*s),t.lineTo(Bi*o+zi*l,Bi*l-zi*o),t.closePath()}};function wce(t,e){let n=null,r=KI(i);t=typeof t=="function"?t:Yt(t||YI),e=typeof e=="function"?e:Yt(e===void 0?64:+e);function i(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:Yt(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:Yt(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Qv(){}function Jv(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function s6(t){this._context=t}s6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Jv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Jv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Sce(t){return new s6(t)}function a6(t){this._context=t}a6.prototype={areaStart:Qv,areaEnd:Qv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Jv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Cce(t){return new a6(t)}function o6(t){this._context=t}o6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Jv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Tce(t){return new o6(t)}function l6(t){this._context=t}l6.prototype={areaStart:Qv,areaEnd:Qv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Ace(t){return new l6(t)}function yB(t){return t<0?-1:1}function vB(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),o=(s*i+a*r)/(r+i);return(yB(s)+yB(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function bB(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function AT(t,e,n){var r=t._x0,i=t._y0,s=t._x1,a=t._y1,o=(s-r)/3;t._context.bezierCurveTo(r+o,i+o*e,s-o,a-o*n,s,a)}function eb(t){this._context=t}eb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:AT(this,this._t0,bB(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,AT(this,bB(this,n=vB(this,t,e)),n);break;default:AT(this,this._t0,n=vB(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function c6(t){this._context=new u6(t)}(c6.prototype=Object.create(eb.prototype)).point=function(t,e){eb.prototype.point.call(this,e,t)};function u6(t){this._context=t}u6.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function kce(t){return new eb(t)}function $ce(t){return new c6(t)}function f6(t){this._context=t}f6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=xB(t),i=xB(e),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function xB(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function Ece(t){return new f6(t)}function O0(t,e){this._context=t,this._t=e}O0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Ice(t){return new O0(t,.5)}function Nce(t){return new O0(t,0)}function Oce(t){return new O0(t,1)}function nf(t,e){if((a=t.length)>1)for(var n=1,r,i,s=t[e[0]],a,o=s.length;n<a;++n)for(i=s,s=t[e[n]],r=0;r<o;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function c$(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function _ce(t,e){return t[e]}function Rce(t){const e=[];return e.key=t,e}function Dce(){var t=Yt([]),e=c$,n=nf,r=_ce;function i(s){var a=Array.from(t.apply(this,arguments),Rce),o,l=a.length,c=-1,f;for(const d of s)for(o=0,++c;o<l;++o)(a[o][c]=[0,+r(d,a[o].key,c,s)]).data=d;for(o=0,f=XI(e(a));o<l;++o)a[f[o]].index=o;return n(a,f),a}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Yt(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:Yt(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?c$:typeof s=="function"?s:Yt(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??nf,i):n},i}function Mce(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,a;i<s;++i){for(a=n=0;n<r;++n)a+=t[n][i][1]||0;if(a)for(n=0;n<r;++n)t[n][i][1]/=a}nf(t,e)}}function Pce(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var a=0,o=0;a<i;++a)o+=t[a][n][1]||0;r[n][1]+=r[n][0]=-o/2}nf(t,e)}}function Fce(t,e){if(!(!((a=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,a;r<s;++r){for(var o=0,l=0,c=0;o<a;++o){for(var f=t[e[o]],d=f[r][1]||0,p=f[r-1][1]||0,g=(d-p)/2,y=0;y<o;++y){var x=t[e[y]],b=x[r][1]||0,w=x[r-1][1]||0;g+=b-w}l+=d,c+=g*d}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,nf(t,e)}}function lp(t){"@babel/helpers - typeof";return lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lp(t)}var Lce=["type","size","sizeType"];function u$(){return u$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u$.apply(this,arguments)}function wB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wB(Object(n),!0).forEach(function(r){Bce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bce(t,e,n){return e=zce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zce(t){var e=jce(t,"string");return lp(e)=="symbol"?e:e+""}function jce(t,e){if(lp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(lp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vce(t,e){if(t==null)return{};var n=Uce(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Uce(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var h6={symbolCircle:YI,symbolCross:uce,symbolDiamond:hce,symbolSquare:dce,symbolStar:yce,symbolTriangle:vce,symbolWye:xce},Wce=Math.PI/180,Gce=function(e){var n="symbol".concat(E0(e));return h6[n]||YI},qce=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*Wce;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Hce=function(e,n){h6["symbol".concat(E0(e))]=n},ZI=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,s=i===void 0?64:i,a=e.sizeType,o=a===void 0?"area":a,l=Vce(e,Lce),c=SB(SB({},l),{},{type:r,size:s,sizeType:o}),f=function(){var b=Gce(r),w=wce().type(b).size(qce(s,o,r));return w()},d=c.className,p=c.cx,g=c.cy,y=mt(c,!0);return p===+p&&g===+g&&s===+s?J.createElement("path",u$({},y,{className:St("recharts-symbols",d),transform:"translate(".concat(p,", ").concat(g,")"),d:f()})):null};ZI.registerSymbol=Hce;function rf(t){"@babel/helpers - typeof";return rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rf(t)}function f$(){return f$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f$.apply(this,arguments)}function CB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kce(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CB(Object(n),!0).forEach(function(r){cp(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,p6(r.key),r)}}function Zce(t,e,n){return e&&Yce(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Qce(t,e,n){return e=tb(e),Jce(t,d6()?Reflect.construct(e,n||[],tb(t).constructor):e.apply(t,n))}function Jce(t,e){if(e&&(rf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eue(t)}function eue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d6=function(){return!!t})()}function tb(t){return tb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},tb(t)}function tue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h$(t,e)}function h$(t,e){return h$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},h$(t,e)}function cp(t,e,n){return e=p6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p6(t){var e=nue(t,"string");return rf(e)=="symbol"?e:e+""}function nue(t,e){if(rf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(rf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ls=32,QI=function(t){function e(){return Xce(this,e),Qce(this,e,arguments)}return tue(e,t),Zce(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,s=ls/2,a=ls/6,o=ls/3,l=r.inactive?i:r.color;if(r.type==="plainline")return J.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:s,x2:ls,y2:s,className:"recharts-legend-icon"});if(r.type==="line")return J.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(s,"h").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*o,",").concat(s,`
            H`).concat(ls,"M").concat(2*o,",").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(o,",").concat(s),className:"recharts-legend-icon"});if(r.type==="rect")return J.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(ls/8,"h").concat(ls,"v").concat(ls*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(J.isValidElement(r.legendIcon)){var c=Kce({},r);return delete c.legendIcon,J.cloneElement(r.legendIcon,c)}return J.createElement(ZI,{fill:l,cx:s,cy:s,size:ls,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,s=i.payload,a=i.iconSize,o=i.layout,l=i.formatter,c=i.inactiveColor,f={x:0,y:0,width:ls,height:ls},d={display:o==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(g,y){var x=g.formatter||l,b=St(cp(cp({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",g.inactive));if(g.type==="none")return null;var w=st(g.value)?null:g.value;La(!st(g.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var S=g.inactive?c:g.color;return J.createElement("li",f$({className:b,style:d,key:"legend-item-".concat(y)},Xv(r.props,g,y)),J.createElement(i$,{width:a,height:a,viewBox:f,style:p},r.renderIcon(g)),J.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},x?x(w,g,y):w))})}},{key:"render",value:function(){var r=this.props,i=r.payload,s=r.layout,a=r.align;if(!i||!i.length)return null;var o={padding:0,margin:0,textAlign:s==="horizontal"?a:"left"};return J.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(Q.PureComponent);cp(QI,"displayName","Legend");cp(QI,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var kT,TB;function rue(){if(TB)return kT;TB=1;var t=A0();function e(){this.__data__=new t,this.size=0}return kT=e,kT}var $T,AB;function iue(){if(AB)return $T;AB=1;function t(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}return $T=t,$T}var ET,kB;function sue(){if(kB)return ET;kB=1;function t(e){return this.__data__.get(e)}return ET=t,ET}var IT,$B;function aue(){if($B)return IT;$B=1;function t(e){return this.__data__.has(e)}return IT=t,IT}var NT,EB;function oue(){if(EB)return NT;EB=1;var t=A0(),e=VI(),n=UI(),r=200;function i(s,a){var o=this.__data__;if(o instanceof t){var l=o.__data__;if(!e||l.length<r-1)return l.push([s,a]),this.size=++o.size,this;o=this.__data__=new n(l)}return o.set(s,a),this.size=o.size,this}return NT=i,NT}var OT,IB;function m6(){if(IB)return OT;IB=1;var t=A0(),e=rue(),n=iue(),r=sue(),i=aue(),s=oue();function a(o){var l=this.__data__=new t(o);this.size=l.size}return a.prototype.clear=e,a.prototype.delete=n,a.prototype.get=r,a.prototype.has=i,a.prototype.set=s,OT=a,OT}var _T,NB;function lue(){if(NB)return _T;NB=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return _T=e,_T}var RT,OB;function cue(){if(OB)return RT;OB=1;function t(e){return this.__data__.has(e)}return RT=t,RT}var DT,_B;function g6(){if(_B)return DT;_B=1;var t=UI(),e=lue(),n=cue();function r(i){var s=-1,a=i==null?0:i.length;for(this.__data__=new t;++s<a;)this.add(i[s])}return r.prototype.add=r.prototype.push=e,r.prototype.has=n,DT=r,DT}var MT,RB;function y6(){if(RB)return MT;RB=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}return MT=t,MT}var PT,DB;function v6(){if(DB)return PT;DB=1;function t(e,n){return e.has(n)}return PT=t,PT}var FT,MB;function b6(){if(MB)return FT;MB=1;var t=g6(),e=y6(),n=v6(),r=1,i=2;function s(a,o,l,c,f,d){var p=l&r,g=a.length,y=o.length;if(g!=y&&!(p&&y>g))return!1;var x=d.get(a),b=d.get(o);if(x&&b)return x==o&&b==a;var w=-1,S=!0,T=l&i?new t:void 0;for(d.set(a,o),d.set(o,a);++w<g;){var k=a[w],A=o[w];if(c)var E=p?c(A,k,w,o,a,d):c(k,A,w,a,o,d);if(E!==void 0){if(E)continue;S=!1;break}if(T){if(!e(o,function(I,N){if(!n(T,N)&&(k===I||f(k,I,l,c,d)))return T.push(N)})){S=!1;break}}else if(!(k===A||f(k,A,l,c,d))){S=!1;break}}return d.delete(a),d.delete(o),S}return FT=s,FT}var LT,PB;function uue(){if(PB)return LT;PB=1;var t=sa(),e=t.Uint8Array;return LT=e,LT}var BT,FB;function fue(){if(FB)return BT;FB=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i,s){r[++n]=[s,i]}),r}return BT=t,BT}var zT,LB;function JI(){if(LB)return zT;LB=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i){r[++n]=i}),r}return zT=t,zT}var jT,BB;function hue(){if(BB)return jT;BB=1;var t=lm(),e=uue(),n=jI(),r=b6(),i=fue(),s=JI(),a=1,o=2,l="[object Boolean]",c="[object Date]",f="[object Error]",d="[object Map]",p="[object Number]",g="[object RegExp]",y="[object Set]",x="[object String]",b="[object Symbol]",w="[object ArrayBuffer]",S="[object DataView]",T=t?t.prototype:void 0,k=T?T.valueOf:void 0;function A(E,I,N,_,R,O,F){switch(N){case S:if(E.byteLength!=I.byteLength||E.byteOffset!=I.byteOffset)return!1;E=E.buffer,I=I.buffer;case w:return!(E.byteLength!=I.byteLength||!O(new e(E),new e(I)));case l:case c:case p:return n(+E,+I);case f:return E.name==I.name&&E.message==I.message;case g:case x:return E==I+"";case d:var z=i;case y:var W=_&a;if(z||(z=s),E.size!=I.size&&!W)return!1;var P=F.get(E);if(P)return P==I;_|=o,F.set(E,I);var M=r(z(E),z(I),_,R,O,F);return F.delete(E),M;case b:if(k)return k.call(E)==k.call(I)}return!1}return jT=A,jT}var VT,zB;function x6(){if(zB)return VT;zB=1;function t(e,n){for(var r=-1,i=n.length,s=e.length;++r<i;)e[s+r]=n[r];return e}return VT=t,VT}var UT,jB;function due(){if(jB)return UT;jB=1;var t=x6(),e=fi();function n(r,i,s){var a=i(r);return e(r)?a:t(a,s(r))}return UT=n,UT}var WT,VB;function pue(){if(VB)return WT;VB=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,s=0,a=[];++r<i;){var o=e[r];n(o,r,e)&&(a[s++]=o)}return a}return WT=t,WT}var GT,UB;function mue(){if(UB)return GT;UB=1;function t(){return[]}return GT=t,GT}var qT,WB;function gue(){if(WB)return qT;WB=1;var t=pue(),e=mue(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(a){return a==null?[]:(a=Object(a),t(i(a),function(o){return r.call(a,o)}))}:e;return qT=s,qT}var HT,GB;function yue(){if(GB)return HT;GB=1;function t(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}return HT=t,HT}var KT,qB;function vue(){if(qB)return KT;qB=1;var t=Qa(),e=Ja(),n="[object Arguments]";function r(i){return e(i)&&t(i)==n}return KT=r,KT}var XT,HB;function eN(){if(HB)return XT;HB=1;var t=vue(),e=Ja(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,s=t(function(){return arguments}())?t:function(a){return e(a)&&r.call(a,"callee")&&!i.call(a,"callee")};return XT=s,XT}var Rd={exports:{}},YT,KB;function bue(){if(KB)return YT;KB=1;function t(){return!1}return YT=t,YT}Rd.exports;var XB;function w6(){return XB||(XB=1,function(t,e){var n=sa(),r=bue(),i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===i,o=a?n.Buffer:void 0,l=o?o.isBuffer:void 0,c=l||r;t.exports=c}(Rd,Rd.exports)),Rd.exports}var ZT,YB;function tN(){if(YB)return ZT;YB=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var s=typeof r;return i=i??t,!!i&&(s=="number"||s!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return ZT=n,ZT}var QT,ZB;function nN(){if(ZB)return QT;ZB=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return QT=e,QT}var JT,QB;function xue(){if(QB)return JT;QB=1;var t=Qa(),e=nN(),n=Ja(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",a="[object Date]",o="[object Error]",l="[object Function]",c="[object Map]",f="[object Number]",d="[object Object]",p="[object RegExp]",g="[object Set]",y="[object String]",x="[object WeakMap]",b="[object ArrayBuffer]",w="[object DataView]",S="[object Float32Array]",T="[object Float64Array]",k="[object Int8Array]",A="[object Int16Array]",E="[object Int32Array]",I="[object Uint8Array]",N="[object Uint8ClampedArray]",_="[object Uint16Array]",R="[object Uint32Array]",O={};O[S]=O[T]=O[k]=O[A]=O[E]=O[I]=O[N]=O[_]=O[R]=!0,O[r]=O[i]=O[b]=O[s]=O[w]=O[a]=O[o]=O[l]=O[c]=O[f]=O[d]=O[p]=O[g]=O[y]=O[x]=!1;function F(z){return n(z)&&e(z.length)&&!!O[t(z)]}return JT=F,JT}var eA,JB;function S6(){if(JB)return eA;JB=1;function t(e){return function(n){return e(n)}}return eA=t,eA}var Dd={exports:{}};Dd.exports;var ez;function wue(){return ez||(ez=1,function(t,e){var n=VH(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,a=s&&n.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();t.exports=o}(Dd,Dd.exports)),Dd.exports}var tA,tz;function C6(){if(tz)return tA;tz=1;var t=xue(),e=S6(),n=wue(),r=n&&n.isTypedArray,i=r?e(r):t;return tA=i,tA}var nA,nz;function Sue(){if(nz)return nA;nz=1;var t=yue(),e=eN(),n=fi(),r=w6(),i=tN(),s=C6(),a=Object.prototype,o=a.hasOwnProperty;function l(c,f){var d=n(c),p=!d&&e(c),g=!d&&!p&&r(c),y=!d&&!p&&!g&&s(c),x=d||p||g||y,b=x?t(c.length,String):[],w=b.length;for(var S in c)(f||o.call(c,S))&&!(x&&(S=="length"||g&&(S=="offset"||S=="parent")||y&&(S=="buffer"||S=="byteLength"||S=="byteOffset")||i(S,w)))&&b.push(S);return b}return nA=l,nA}var rA,rz;function Cue(){if(rz)return rA;rz=1;var t=Object.prototype;function e(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||t;return n===i}return rA=e,rA}var iA,iz;function T6(){if(iz)return iA;iz=1;function t(e,n){return function(r){return e(n(r))}}return iA=t,iA}var sA,sz;function Tue(){if(sz)return sA;sz=1;var t=T6(),e=t(Object.keys,Object);return sA=e,sA}var aA,az;function Aue(){if(az)return aA;az=1;var t=Cue(),e=Tue(),n=Object.prototype,r=n.hasOwnProperty;function i(s){if(!t(s))return e(s);var a=[];for(var o in Object(s))r.call(s,o)&&o!="constructor"&&a.push(o);return a}return aA=i,aA}var oA,oz;function um(){if(oz)return oA;oz=1;var t=zI(),e=nN();function n(r){return r!=null&&e(r.length)&&!t(r)}return oA=n,oA}var lA,lz;function _0(){if(lz)return lA;lz=1;var t=Sue(),e=Aue(),n=um();function r(i){return n(i)?t(i):e(i)}return lA=r,lA}var cA,cz;function kue(){if(cz)return cA;cz=1;var t=due(),e=gue(),n=_0();function r(i){return t(i,n,e)}return cA=r,cA}var uA,uz;function $ue(){if(uz)return uA;uz=1;var t=kue(),e=1,n=Object.prototype,r=n.hasOwnProperty;function i(s,a,o,l,c,f){var d=o&e,p=t(s),g=p.length,y=t(a),x=y.length;if(g!=x&&!d)return!1;for(var b=g;b--;){var w=p[b];if(!(d?w in a:r.call(a,w)))return!1}var S=f.get(s),T=f.get(a);if(S&&T)return S==a&&T==s;var k=!0;f.set(s,a),f.set(a,s);for(var A=d;++b<g;){w=p[b];var E=s[w],I=a[w];if(l)var N=d?l(I,E,w,a,s,f):l(E,I,w,s,a,f);if(!(N===void 0?E===I||c(E,I,o,l,f):N)){k=!1;break}A||(A=w=="constructor")}if(k&&!A){var _=s.constructor,R=a.constructor;_!=R&&"constructor"in s&&"constructor"in a&&!(typeof _=="function"&&_ instanceof _&&typeof R=="function"&&R instanceof R)&&(k=!1)}return f.delete(s),f.delete(a),k}return uA=i,uA}var fA,fz;function Eue(){if(fz)return fA;fz=1;var t=$c(),e=sa(),n=t(e,"DataView");return fA=n,fA}var hA,hz;function Iue(){if(hz)return hA;hz=1;var t=$c(),e=sa(),n=t(e,"Promise");return hA=n,hA}var dA,dz;function A6(){if(dz)return dA;dz=1;var t=$c(),e=sa(),n=t(e,"Set");return dA=n,dA}var pA,pz;function Nue(){if(pz)return pA;pz=1;var t=$c(),e=sa(),n=t(e,"WeakMap");return pA=n,pA}var mA,mz;function Oue(){if(mz)return mA;mz=1;var t=Eue(),e=VI(),n=Iue(),r=A6(),i=Nue(),s=Qa(),a=UH(),o="[object Map]",l="[object Object]",c="[object Promise]",f="[object Set]",d="[object WeakMap]",p="[object DataView]",g=a(t),y=a(e),x=a(n),b=a(r),w=a(i),S=s;return(t&&S(new t(new ArrayBuffer(1)))!=p||e&&S(new e)!=o||n&&S(n.resolve())!=c||r&&S(new r)!=f||i&&S(new i)!=d)&&(S=function(T){var k=s(T),A=k==l?T.constructor:void 0,E=A?a(A):"";if(E)switch(E){case g:return p;case y:return o;case x:return c;case b:return f;case w:return d}return k}),mA=S,mA}var gA,gz;function _ue(){if(gz)return gA;gz=1;var t=m6(),e=b6(),n=hue(),r=$ue(),i=Oue(),s=fi(),a=w6(),o=C6(),l=1,c="[object Arguments]",f="[object Array]",d="[object Object]",p=Object.prototype,g=p.hasOwnProperty;function y(x,b,w,S,T,k){var A=s(x),E=s(b),I=A?f:i(x),N=E?f:i(b);I=I==c?d:I,N=N==c?d:N;var _=I==d,R=N==d,O=I==N;if(O&&a(x)){if(!a(b))return!1;A=!0,_=!1}if(O&&!_)return k||(k=new t),A||o(x)?e(x,b,w,S,T,k):n(x,b,I,w,S,T,k);if(!(w&l)){var F=_&&g.call(x,"__wrapped__"),z=R&&g.call(b,"__wrapped__");if(F||z){var W=F?x.value():x,P=z?b.value():b;return k||(k=new t),T(W,P,w,S,k)}}return O?(k||(k=new t),r(x,b,w,S,T,k)):!1}return gA=y,gA}var yA,yz;function rN(){if(yz)return yA;yz=1;var t=_ue(),e=Ja();function n(r,i,s,a,o){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:t(r,i,s,a,n,o)}return yA=n,yA}var vA,vz;function Rue(){if(vz)return vA;vz=1;var t=m6(),e=rN(),n=1,r=2;function i(s,a,o,l){var c=o.length,f=c,d=!l;if(s==null)return!f;for(s=Object(s);c--;){var p=o[c];if(d&&p[2]?p[1]!==s[p[0]]:!(p[0]in s))return!1}for(;++c<f;){p=o[c];var g=p[0],y=s[g],x=p[1];if(d&&p[2]){if(y===void 0&&!(g in s))return!1}else{var b=new t;if(l)var w=l(y,x,g,s,a,b);if(!(w===void 0?e(x,y,n|r,l,b):w))return!1}}return!0}return vA=i,vA}var bA,bz;function k6(){if(bz)return bA;bz=1;var t=nl();function e(n){return n===n&&!t(n)}return bA=e,bA}var xA,xz;function Due(){if(xz)return xA;xz=1;var t=k6(),e=_0();function n(r){for(var i=e(r),s=i.length;s--;){var a=i[s],o=r[a];i[s]=[a,o,t(o)]}return i}return xA=n,xA}var wA,wz;function $6(){if(wz)return wA;wz=1;function t(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}return wA=t,wA}var SA,Sz;function Mue(){if(Sz)return SA;Sz=1;var t=Rue(),e=Due(),n=$6();function r(i){var s=e(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(a){return a===i||t(a,i,s)}}return SA=r,SA}var CA,Cz;function Pue(){if(Cz)return CA;Cz=1;function t(e,n){return e!=null&&n in Object(e)}return CA=t,CA}var TA,Tz;function Fue(){if(Tz)return TA;Tz=1;var t=qH(),e=eN(),n=fi(),r=tN(),i=nN(),s=$0();function a(o,l,c){l=t(l,o);for(var f=-1,d=l.length,p=!1;++f<d;){var g=s(l[f]);if(!(p=o!=null&&c(o,g)))break;o=o[g]}return p||++f!=d?p:(d=o==null?0:o.length,!!d&&i(d)&&r(g,d)&&(n(o)||e(o)))}return TA=a,TA}var AA,Az;function Lue(){if(Az)return AA;Az=1;var t=Pue(),e=Fue();function n(r,i){return r!=null&&e(r,i,t)}return AA=n,AA}var kA,kz;function Bue(){if(kz)return kA;kz=1;var t=rN(),e=HH(),n=Lue(),r=BI(),i=k6(),s=$6(),a=$0(),o=1,l=2;function c(f,d){return r(f)&&i(d)?s(a(f),d):function(p){var g=e(p,f);return g===void 0&&g===d?n(p,f):t(d,g,o|l)}}return kA=c,kA}var $A,$z;function Wf(){if($z)return $A;$z=1;function t(e){return e}return $A=t,$A}var EA,Ez;function zue(){if(Ez)return EA;Ez=1;function t(e){return function(n){return n==null?void 0:n[e]}}return EA=t,EA}var IA,Iz;function jue(){if(Iz)return IA;Iz=1;var t=GI();function e(n){return function(r){return t(r,n)}}return IA=e,IA}var NA,Nz;function Vue(){if(Nz)return NA;Nz=1;var t=zue(),e=jue(),n=BI(),r=$0();function i(s){return n(s)?t(r(s)):e(s)}return NA=i,NA}var OA,Oz;function rl(){if(Oz)return OA;Oz=1;var t=Mue(),e=Bue(),n=Wf(),r=fi(),i=Vue();function s(a){return typeof a=="function"?a:a==null?n:typeof a=="object"?r(a)?e(a[0],a[1]):t(a):i(a)}return OA=s,OA}var _A,_z;function E6(){if(_z)return _A;_z=1;function t(e,n,r,i){for(var s=e.length,a=r+(i?1:-1);i?a--:++a<s;)if(n(e[a],a,e))return a;return-1}return _A=t,_A}var RA,Rz;function Uue(){if(Rz)return RA;Rz=1;function t(e){return e!==e}return RA=t,RA}var DA,Dz;function Wue(){if(Dz)return DA;Dz=1;function t(e,n,r){for(var i=r-1,s=e.length;++i<s;)if(e[i]===n)return i;return-1}return DA=t,DA}var MA,Mz;function Gue(){if(Mz)return MA;Mz=1;var t=E6(),e=Uue(),n=Wue();function r(i,s,a){return s===s?n(i,s,a):t(i,e,a)}return MA=r,MA}var PA,Pz;function que(){if(Pz)return PA;Pz=1;var t=Gue();function e(n,r){var i=n==null?0:n.length;return!!i&&t(n,r,0)>-1}return PA=e,PA}var FA,Fz;function Hue(){if(Fz)return FA;Fz=1;function t(e,n,r){for(var i=-1,s=e==null?0:e.length;++i<s;)if(r(n,e[i]))return!0;return!1}return FA=t,FA}var LA,Lz;function Kue(){if(Lz)return LA;Lz=1;function t(){}return LA=t,LA}var BA,Bz;function Xue(){if(Bz)return BA;Bz=1;var t=A6(),e=Kue(),n=JI(),r=1/0,i=t&&1/n(new t([,-0]))[1]==r?function(s){return new t(s)}:e;return BA=i,BA}var zA,zz;function Yue(){if(zz)return zA;zz=1;var t=g6(),e=que(),n=Hue(),r=v6(),i=Xue(),s=JI(),a=200;function o(l,c,f){var d=-1,p=e,g=l.length,y=!0,x=[],b=x;if(f)y=!1,p=n;else if(g>=a){var w=c?null:i(l);if(w)return s(w);y=!1,p=r,b=new t}else b=c?[]:x;e:for(;++d<g;){var S=l[d],T=c?c(S):S;if(S=f||S!==0?S:0,y&&T===T){for(var k=b.length;k--;)if(b[k]===T)continue e;c&&b.push(T),x.push(S)}else p(b,T,f)||(b!==x&&b.push(T),x.push(S))}return x}return zA=o,zA}var jA,jz;function Zue(){if(jz)return jA;jz=1;var t=rl(),e=Yue();function n(r,i){return r&&r.length?e(r,t(i,2)):[]}return jA=n,jA}var Que=Zue();const Vz=Vt(Que);function I6(t,e,n){return e===!0?Vz(t,n):st(e)?Vz(t,e):t}function sf(t){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sf(t)}var Jue=["ref"];function Uz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ia(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Uz(Object(n),!0).forEach(function(r){R0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Uz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function efe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wz(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,O6(r.key),r)}}function tfe(t,e,n){return e&&Wz(t.prototype,e),n&&Wz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function nfe(t,e,n){return e=nb(e),rfe(t,N6()?Reflect.construct(e,n||[],nb(t).constructor):e.apply(t,n))}function rfe(t,e){if(e&&(sf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ife(t)}function ife(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function N6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(N6=function(){return!!t})()}function nb(t){return nb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},nb(t)}function sfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d$(t,e)}function d$(t,e){return d$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},d$(t,e)}function R0(t,e,n){return e=O6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O6(t){var e=afe(t,"string");return sf(e)=="symbol"?e:e+""}function afe(t,e){if(sf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(sf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function ofe(t,e){if(t==null)return{};var n=lfe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function lfe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function cfe(t){return t.value}function ufe(t,e){if(J.isValidElement(t))return J.cloneElement(t,e);if(typeof t=="function")return J.createElement(t,e);e.ref;var n=ofe(e,Jue);return J.createElement(QI,n)}var Gz=1,qu=function(t){function e(){var n;efe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=nfe(this,e,[].concat(i)),R0(n,"lastBoundingBox",{width:-1,height:-1}),n}return sfe(e,t),tfe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>Gz||Math.abs(i.height-this.lastBoundingBox.height)>Gz)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ia({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,s=i.layout,a=i.align,o=i.verticalAlign,l=i.margin,c=i.chartWidth,f=i.chartHeight,d,p;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(a==="center"&&s==="vertical"){var g=this.getBBoxSnapshot();d={left:((c||0)-g.width)/2}}else d=a==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(o==="middle"){var y=this.getBBoxSnapshot();p={top:((f||0)-y.height)/2}}else p=o==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return Ia(Ia({},d),p)}},{key:"render",value:function(){var r=this,i=this.props,s=i.content,a=i.width,o=i.height,l=i.wrapperStyle,c=i.payloadUniqBy,f=i.payload,d=Ia(Ia({position:"absolute",width:a||"auto",height:o||"auto"},this.getDefaultPosition(l)),l);return J.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(g){r.wrapperNode=g}},ufe(s,Ia(Ia({},this.props),{},{payload:I6(f,c,cfe)})))}}],[{key:"getWithHeight",value:function(r,i){var s=Ia(Ia({},this.defaultProps),r.props),a=s.layout;return a==="vertical"&&Ne(r.props.height)?{height:r.props.height}:a==="horizontal"?{width:r.props.width||i}:null}}])}(Q.PureComponent);R0(qu,"displayName","Legend");R0(qu,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var VA,qz;function ffe(){if(qz)return VA;qz=1;var t=lm(),e=eN(),n=fi(),r=t?t.isConcatSpreadable:void 0;function i(s){return n(s)||e(s)||!!(r&&s&&s[r])}return VA=i,VA}var UA,Hz;function _6(){if(Hz)return UA;Hz=1;var t=x6(),e=ffe();function n(r,i,s,a,o){var l=-1,c=r.length;for(s||(s=e),o||(o=[]);++l<c;){var f=r[l];i>0&&s(f)?i>1?n(f,i-1,s,a,o):t(o,f):a||(o[o.length]=f)}return o}return UA=n,UA}var WA,Kz;function hfe(){if(Kz)return WA;Kz=1;function t(e){return function(n,r,i){for(var s=-1,a=Object(n),o=i(n),l=o.length;l--;){var c=o[e?l:++s];if(r(a[c],c,a)===!1)break}return n}}return WA=t,WA}var GA,Xz;function dfe(){if(Xz)return GA;Xz=1;var t=hfe(),e=t();return GA=e,GA}var qA,Yz;function R6(){if(Yz)return qA;Yz=1;var t=dfe(),e=_0();function n(r,i){return r&&t(r,i,e)}return qA=n,qA}var HA,Zz;function pfe(){if(Zz)return HA;Zz=1;var t=um();function e(n,r){return function(i,s){if(i==null)return i;if(!t(i))return n(i,s);for(var a=i.length,o=r?a:-1,l=Object(i);(r?o--:++o<a)&&s(l[o],o,l)!==!1;);return i}}return HA=e,HA}var KA,Qz;function iN(){if(Qz)return KA;Qz=1;var t=R6(),e=pfe(),n=e(t);return KA=n,KA}var XA,Jz;function D6(){if(Jz)return XA;Jz=1;var t=iN(),e=um();function n(r,i){var s=-1,a=e(r)?Array(r.length):[];return t(r,function(o,l,c){a[++s]=i(o,l,c)}),a}return XA=n,XA}var YA,e4;function mfe(){if(e4)return YA;e4=1;function t(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}return YA=t,YA}var ZA,t4;function gfe(){if(t4)return ZA;t4=1;var t=jf();function e(n,r){if(n!==r){var i=n!==void 0,s=n===null,a=n===n,o=t(n),l=r!==void 0,c=r===null,f=r===r,d=t(r);if(!c&&!d&&!o&&n>r||o&&l&&f&&!c&&!d||s&&l&&f||!i&&f||!a)return 1;if(!s&&!o&&!d&&n<r||d&&i&&a&&!s&&!o||c&&i&&a||!l&&a||!f)return-1}return 0}return ZA=e,ZA}var QA,n4;function yfe(){if(n4)return QA;n4=1;var t=gfe();function e(n,r,i){for(var s=-1,a=n.criteria,o=r.criteria,l=a.length,c=i.length;++s<l;){var f=t(a[s],o[s]);if(f){if(s>=c)return f;var d=i[s];return f*(d=="desc"?-1:1)}}return n.index-r.index}return QA=e,QA}var JA,r4;function vfe(){if(r4)return JA;r4=1;var t=WI(),e=GI(),n=rl(),r=D6(),i=mfe(),s=S6(),a=yfe(),o=Wf(),l=fi();function c(f,d,p){d.length?d=t(d,function(x){return l(x)?function(b){return e(b,x.length===1?x[0]:x)}:x}):d=[o];var g=-1;d=t(d,s(n));var y=r(f,function(x,b,w){var S=t(d,function(T){return T(x)});return{criteria:S,index:++g,value:x}});return i(y,function(x,b){return a(x,b,p)})}return JA=c,JA}var ek,i4;function bfe(){if(i4)return ek;i4=1;function t(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}return ek=t,ek}var tk,s4;function xfe(){if(s4)return tk;s4=1;var t=bfe(),e=Math.max;function n(r,i,s){return i=e(i===void 0?r.length-1:i,0),function(){for(var a=arguments,o=-1,l=e(a.length-i,0),c=Array(l);++o<l;)c[o]=a[i+o];o=-1;for(var f=Array(i+1);++o<i;)f[o]=a[o];return f[i]=s(c),t(r,this,f)}}return tk=n,tk}var nk,a4;function wfe(){if(a4)return nk;a4=1;function t(e){return function(){return e}}return nk=t,nk}var rk,o4;function M6(){if(o4)return rk;o4=1;var t=$c(),e=function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}}();return rk=e,rk}var ik,l4;function Sfe(){if(l4)return ik;l4=1;var t=wfe(),e=M6(),n=Wf(),r=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(s),writable:!0})}:n;return ik=r,ik}var sk,c4;function Cfe(){if(c4)return sk;c4=1;var t=800,e=16,n=Date.now;function r(i){var s=0,a=0;return function(){var o=n(),l=e-(o-a);if(a=o,l>0){if(++s>=t)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return sk=r,sk}var ak,u4;function Tfe(){if(u4)return ak;u4=1;var t=Sfe(),e=Cfe(),n=e(t);return ak=n,ak}var ok,f4;function Afe(){if(f4)return ok;f4=1;var t=Wf(),e=xfe(),n=Tfe();function r(i,s){return n(e(i,s,t),i+"")}return ok=r,ok}var lk,h4;function D0(){if(h4)return lk;h4=1;var t=jI(),e=um(),n=tN(),r=nl();function i(s,a,o){if(!r(o))return!1;var l=typeof a;return(l=="number"?e(o)&&n(a,o.length):l=="string"&&a in o)?t(o[a],s):!1}return lk=i,lk}var ck,d4;function kfe(){if(d4)return ck;d4=1;var t=_6(),e=vfe(),n=Afe(),r=D0(),i=n(function(s,a){if(s==null)return[];var o=a.length;return o>1&&r(s,a[0],a[1])?a=[]:o>2&&r(a[0],a[1],a[2])&&(a=[a[0]]),e(s,t(a,1),[])});return ck=i,ck}var $fe=kfe();const sN=Vt($fe);function up(t){"@babel/helpers - typeof";return up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},up(t)}function p$(){return p$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},p$.apply(this,arguments)}function Efe(t,e){return _fe(t)||Ofe(t,e)||Nfe(t,e)||Ife()}function Ife(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nfe(t,e){if(t){if(typeof t=="string")return p4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p4(t,e)}}function p4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ofe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function _fe(t){if(Array.isArray(t))return t}function m4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m4(Object(n),!0).forEach(function(r){Rfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rfe(t,e,n){return e=Dfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dfe(t){var e=Mfe(t,"string");return up(e)=="symbol"?e:e+""}function Mfe(t,e){if(up(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(up(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pfe(t){return Array.isArray(t)&&Hn(t[0])&&Hn(t[1])?t.join(" ~ "):t}var Ffe=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,s=i===void 0?{}:i,a=e.itemStyle,o=a===void 0?{}:a,l=e.labelStyle,c=l===void 0?{}:l,f=e.payload,d=e.formatter,p=e.itemSorter,g=e.wrapperClassName,y=e.labelClassName,x=e.label,b=e.labelFormatter,w=e.accessibilityLayer,S=w===void 0?!1:w,T=function(){if(f&&f.length){var F={padding:0,margin:0},z=(p?sN(f,p):f).map(function(W,P){if(W.type==="none")return null;var M=uk({display:"block",paddingTop:4,paddingBottom:4,color:W.color||"#000"},o),j=W.formatter||d||Pfe,V=W.value,q=W.name,L=V,G=q;if(j&&L!=null&&G!=null){var H=j(V,q,W,P,f);if(Array.isArray(H)){var K=Efe(H,2);L=K[0],G=K[1]}else L=H}return J.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(P),style:M},Hn(G)?J.createElement("span",{className:"recharts-tooltip-item-name"},G):null,Hn(G)?J.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,J.createElement("span",{className:"recharts-tooltip-item-value"},L),J.createElement("span",{className:"recharts-tooltip-item-unit"},W.unit||""))});return J.createElement("ul",{className:"recharts-tooltip-item-list",style:F},z)}return null},k=uk({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),A=uk({margin:0},c),E=!yt(x),I=E?x:"",N=St("recharts-default-tooltip",g),_=St("recharts-tooltip-label",y);E&&b&&f!==void 0&&f!==null&&(I=b(x,f));var R=S?{role:"status","aria-live":"assertive"}:{};return J.createElement("div",p$({className:N,style:k},R),J.createElement("p",{className:_,style:A},J.isValidElement(I)?I:"".concat(I)),T())};function fp(t){"@babel/helpers - typeof";return fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fp(t)}function ev(t,e,n){return e=Lfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lfe(t){var e=Bfe(t,"string");return fp(e)=="symbol"?e:e+""}function Bfe(t,e){if(fp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(fp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bd="recharts-tooltip-wrapper",zfe={visibility:"hidden"};function jfe(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return St(bd,ev(ev(ev(ev({},"".concat(bd,"-right"),Ne(n)&&e&&Ne(e.x)&&n>=e.x),"".concat(bd,"-left"),Ne(n)&&e&&Ne(e.x)&&n<e.x),"".concat(bd,"-bottom"),Ne(r)&&e&&Ne(e.y)&&r>=e.y),"".concat(bd,"-top"),Ne(r)&&e&&Ne(e.y)&&r<e.y))}function g4(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,s=t.position,a=t.reverseDirection,o=t.tooltipDimension,l=t.viewBox,c=t.viewBoxDimension;if(s&&Ne(s[r]))return s[r];var f=n[r]-o-i,d=n[r]+i;if(e[r])return a[r]?f:d;if(a[r]){var p=f,g=l[r];return p<g?Math.max(d,l[r]):Math.max(f,l[r])}var y=d+o,x=l[r]+c;return y>x?Math.max(f,l[r]):Math.max(d,l[r])}function Vfe(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Ufe(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,s=t.reverseDirection,a=t.tooltipBox,o=t.useTranslate3d,l=t.viewBox,c,f,d;return a.height>0&&a.width>0&&n?(f=g4({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.width,viewBox:l,viewBoxDimension:l.width}),d=g4({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.height,viewBox:l,viewBoxDimension:l.height}),c=Vfe({translateX:f,translateY:d,useTranslate3d:o})):c=zfe,{cssProperties:c,cssClasses:jfe({translateX:f,translateY:d,coordinate:n})}}function af(t){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},af(t)}function y4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function v4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y4(Object(n),!0).forEach(function(r){g$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gfe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,F6(r.key),r)}}function qfe(t,e,n){return e&&Gfe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hfe(t,e,n){return e=rb(e),Kfe(t,P6()?Reflect.construct(e,n||[],rb(t).constructor):e.apply(t,n))}function Kfe(t,e){if(e&&(af(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xfe(t)}function Xfe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function P6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(P6=function(){return!!t})()}function rb(t){return rb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},rb(t)}function Yfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m$(t,e)}function m$(t,e){return m$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},m$(t,e)}function g$(t,e,n){return e=F6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function F6(t){var e=Zfe(t,"string");return af(e)=="symbol"?e:e+""}function Zfe(t,e){if(af(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(af(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var b4=1,Qfe=function(t){function e(){var n;Wfe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=Hfe(this,e,[].concat(i)),g$(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),g$(n,"handleKeyDown",function(a){if(a.key==="Escape"){var o,l,c,f;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&o!==void 0?o:0,y:(c=(f=n.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&c!==void 0?c:0}})}}),n}return Yfe(e,t),qfe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>b4||Math.abs(r.height-this.state.lastBoundingBox.height)>b4)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,s=i.active,a=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,c=i.children,f=i.coordinate,d=i.hasPayload,p=i.isAnimationActive,g=i.offset,y=i.position,x=i.reverseDirection,b=i.useTranslate3d,w=i.viewBox,S=i.wrapperStyle,T=Ufe({allowEscapeViewBox:a,coordinate:f,offsetTopLeft:g,position:y,reverseDirection:x,tooltipBox:this.state.lastBoundingBox,useTranslate3d:b,viewBox:w}),k=T.cssClasses,A=T.cssProperties,E=v4(v4({transition:p&&s?"transform ".concat(o,"ms ").concat(l):void 0},A),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&d?"visible":"hidden",position:"absolute",top:0,left:0},S);return J.createElement("div",{tabIndex:-1,className:k,style:E,ref:function(N){r.wrapperNode=N}},c)}}])}(Q.PureComponent),Jfe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Gf={isSsr:Jfe()};function of(t){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},of(t)}function x4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function w4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x4(Object(n),!0).forEach(function(r){aN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ehe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function the(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,B6(r.key),r)}}function nhe(t,e,n){return e&&the(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function rhe(t,e,n){return e=ib(e),ihe(t,L6()?Reflect.construct(e,n||[],ib(t).constructor):e.apply(t,n))}function ihe(t,e){if(e&&(of(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return she(t)}function she(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(L6=function(){return!!t})()}function ib(t){return ib=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ib(t)}function ahe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y$(t,e)}function y$(t,e){return y$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},y$(t,e)}function aN(t,e,n){return e=B6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B6(t){var e=ohe(t,"string");return of(e)=="symbol"?e:e+""}function ohe(t,e){if(of(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(of(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function lhe(t){return t.dataKey}function che(t,e){return J.isValidElement(t)?J.cloneElement(t,e):typeof t=="function"?J.createElement(t,e):J.createElement(Ffe,e)}var Ms=function(t){function e(){return ehe(this,e),rhe(this,e,arguments)}return ahe(e,t),nhe(e,[{key:"render",value:function(){var r=this,i=this.props,s=i.active,a=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,c=i.content,f=i.coordinate,d=i.filterNull,p=i.isAnimationActive,g=i.offset,y=i.payload,x=i.payloadUniqBy,b=i.position,w=i.reverseDirection,S=i.useTranslate3d,T=i.viewBox,k=i.wrapperStyle,A=y??[];d&&A.length&&(A=I6(y.filter(function(I){return I.value!=null&&(I.hide!==!0||r.props.includeHidden)}),x,lhe));var E=A.length>0;return J.createElement(Qfe,{allowEscapeViewBox:a,animationDuration:o,animationEasing:l,isAnimationActive:p,active:s,coordinate:f,hasPayload:E,offset:g,position:b,reverseDirection:w,useTranslate3d:S,viewBox:T,wrapperStyle:k},che(c,w4(w4({},this.props),{},{payload:A})))}}])}(Q.PureComponent);aN(Ms,"displayName","Tooltip");aN(Ms,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Gf.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var fk,S4;function uhe(){if(S4)return fk;S4=1;var t=sa(),e=function(){return t.Date.now()};return fk=e,fk}var hk,C4;function fhe(){if(C4)return hk;C4=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return hk=e,hk}var dk,T4;function hhe(){if(T4)return dk;T4=1;var t=fhe(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return dk=n,dk}var pk,A4;function z6(){if(A4)return pk;A4=1;var t=hhe(),e=nl(),n=jf(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt;function l(c){if(typeof c=="number")return c;if(n(c))return r;if(e(c)){var f=typeof c.valueOf=="function"?c.valueOf():c;c=e(f)?f+"":f}if(typeof c!="string")return c===0?c:+c;c=t(c);var d=s.test(c);return d||a.test(c)?o(c.slice(2),d?2:8):i.test(c)?r:+c}return pk=l,pk}var mk,k4;function dhe(){if(k4)return mk;k4=1;var t=nl(),e=uhe(),n=z6(),r="Expected a function",i=Math.max,s=Math.min;function a(o,l,c){var f,d,p,g,y,x,b=0,w=!1,S=!1,T=!0;if(typeof o!="function")throw new TypeError(r);l=n(l)||0,t(c)&&(w=!!c.leading,S="maxWait"in c,p=S?i(n(c.maxWait)||0,l):p,T="trailing"in c?!!c.trailing:T);function k(z){var W=f,P=d;return f=d=void 0,b=z,g=o.apply(P,W),g}function A(z){return b=z,y=setTimeout(N,l),w?k(z):g}function E(z){var W=z-x,P=z-b,M=l-W;return S?s(M,p-P):M}function I(z){var W=z-x,P=z-b;return x===void 0||W>=l||W<0||S&&P>=p}function N(){var z=e();if(I(z))return _(z);y=setTimeout(N,E(z))}function _(z){return y=void 0,T&&f?k(z):(f=d=void 0,g)}function R(){y!==void 0&&clearTimeout(y),b=0,f=x=d=y=void 0}function O(){return y===void 0?g:_(e())}function F(){var z=e(),W=I(z);if(f=arguments,d=this,x=z,W){if(y===void 0)return A(x);if(S)return clearTimeout(y),y=setTimeout(N,l),k(x)}return y===void 0&&(y=setTimeout(N,l)),g}return F.cancel=R,F.flush=O,F}return mk=a,mk}var gk,$4;function phe(){if($4)return gk;$4=1;var t=dhe(),e=nl(),n="Expected a function";function r(i,s,a){var o=!0,l=!0;if(typeof i!="function")throw new TypeError(n);return e(a)&&(o="leading"in a?!!a.leading:o,l="trailing"in a?!!a.trailing:l),t(i,s,{leading:o,maxWait:s,trailing:l})}return gk=r,gk}var mhe=phe();const j6=Vt(mhe);function hp(t){"@babel/helpers - typeof";return hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hp(t)}function E4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E4(Object(n),!0).forEach(function(r){ghe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ghe(t,e,n){return e=yhe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yhe(t){var e=vhe(t,"string");return hp(e)=="symbol"?e:e+""}function vhe(t,e){if(hp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bhe(t,e){return Che(t)||She(t,e)||whe(t,e)||xhe()}function xhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function whe(t,e){if(t){if(typeof t=="string")return I4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I4(t,e)}}function I4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function She(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function Che(t){if(Array.isArray(t))return t}var The=Q.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,s=t.width,a=s===void 0?"100%":s,o=t.height,l=o===void 0?"100%":o,c=t.minWidth,f=c===void 0?0:c,d=t.minHeight,p=t.maxHeight,g=t.children,y=t.debounce,x=y===void 0?0:y,b=t.id,w=t.className,S=t.onResize,T=t.style,k=T===void 0?{}:T,A=Q.useRef(null),E=Q.useRef();E.current=S,Q.useImperativeHandle(e,function(){return Object.defineProperty(A.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),A.current},configurable:!0})});var I=Q.useState({containerWidth:i.width,containerHeight:i.height}),N=bhe(I,2),_=N[0],R=N[1],O=Q.useCallback(function(z,W){R(function(P){var M=Math.round(z),j=Math.round(W);return P.containerWidth===M&&P.containerHeight===j?P:{containerWidth:M,containerHeight:j}})},[]);Q.useEffect(function(){var z=function(q){var L,G=q[0].contentRect,H=G.width,K=G.height;O(H,K),(L=E.current)===null||L===void 0||L.call(E,H,K)};x>0&&(z=j6(z,x,{trailing:!0,leading:!1}));var W=new ResizeObserver(z),P=A.current.getBoundingClientRect(),M=P.width,j=P.height;return O(M,j),W.observe(A.current),function(){W.disconnect()}},[O,x]);var F=Q.useMemo(function(){var z=_.containerWidth,W=_.containerHeight;if(z<0||W<0)return null;La(Kl(a)||Kl(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,l),La(!n||n>0,"The aspect(%s) must be greater than zero.",n);var P=Kl(a)?z:a,M=Kl(l)?W:l;n&&n>0&&(P?M=P/n:M&&(P=M*n),p&&M>p&&(M=p)),La(P>0||M>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,M,a,l,f,d,n);var j=!Array.isArray(g)&&Fa(g.type).endsWith("Chart");return J.Children.map(g,function(V){return J.isValidElement(V)?Q.cloneElement(V,tv({width:P,height:M},j?{style:tv({height:"100%",width:"100%",maxHeight:M,maxWidth:P},V.props.style)}:{})):V})},[n,g,l,p,d,f,_,a]);return J.createElement("div",{id:b?"".concat(b):void 0,className:St("recharts-responsive-container",w),style:tv(tv({},k),{},{width:a,height:l,minWidth:f,minHeight:d,maxHeight:p}),ref:A},F)}),V6=function(e){return null};V6.displayName="Cell";function dp(t){"@babel/helpers - typeof";return dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dp(t)}function N4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function v$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N4(Object(n),!0).forEach(function(r){Ahe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ahe(t,e,n){return e=khe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function khe(t){var e=$he(t,"string");return dp(e)=="symbol"?e:e+""}function $he(t,e){if(dp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(dp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Eu={widthCache:{},cacheCount:0},Ehe=2e3,Ihe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},O4="recharts_measurement_span";function Nhe(t){var e=v$({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var Hd=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Gf.isSsr)return{width:0,height:0};var r=Nhe(n),i=JSON.stringify({text:e,copyStyle:r});if(Eu.widthCache[i])return Eu.widthCache[i];try{var s=document.getElementById(O4);s||(s=document.createElement("span"),s.setAttribute("id",O4),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var a=v$(v$({},Ihe),r);Object.assign(s.style,a),s.textContent="".concat(e);var o=s.getBoundingClientRect(),l={width:o.width,height:o.height};return Eu.widthCache[i]=l,++Eu.cacheCount>Ehe&&(Eu.cacheCount=0,Eu.widthCache={}),l}catch{return{width:0,height:0}}},Ohe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function pp(t){"@babel/helpers - typeof";return pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pp(t)}function sb(t,e){return Mhe(t)||Dhe(t,e)||Rhe(t,e)||_he()}function _he(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rhe(t,e){if(t){if(typeof t=="string")return _4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _4(t,e)}}function _4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Dhe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function Mhe(t){if(Array.isArray(t))return t}function Phe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Lhe(r.key),r)}}function Fhe(t,e,n){return e&&R4(t.prototype,e),n&&R4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lhe(t){var e=Bhe(t,"string");return pp(e)=="symbol"?e:e+""}function Bhe(t,e){if(pp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var D4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,M4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,zhe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,jhe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,U6={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Vhe=Object.keys(U6),Vu="NaN";function Uhe(t,e){return t*U6[e]}var nv=function(){function t(e,n){Phe(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!zhe.test(n)&&(this.num=NaN,this.unit=""),Vhe.includes(n)&&(this.num=Uhe(e,n),this.unit="px")}return Fhe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=jhe.exec(n))!==null&&r!==void 0?r:[],s=sb(i,3),a=s[1],o=s[2];return new t(parseFloat(a),o??"")}}])}();function W6(t){if(t.includes(Vu))return Vu;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=D4.exec(e))!==null&&n!==void 0?n:[],i=sb(r,4),s=i[1],a=i[2],o=i[3],l=nv.parse(s??""),c=nv.parse(o??""),f=a==="*"?l.multiply(c):l.divide(c);if(f.isNaN())return Vu;e=e.replace(D4,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,p=(d=M4.exec(e))!==null&&d!==void 0?d:[],g=sb(p,4),y=g[1],x=g[2],b=g[3],w=nv.parse(y??""),S=nv.parse(b??""),T=x==="+"?w.add(S):w.subtract(S);if(T.isNaN())return Vu;e=e.replace(M4,T.toString())}return e}var P4=/\(([^()]*)\)/;function Whe(t){for(var e=t;e.includes("(");){var n=P4.exec(e),r=sb(n,2),i=r[1];e=e.replace(P4,W6(i))}return e}function Ghe(t){var e=t.replace(/\s+/g,"");return e=Whe(e),e=W6(e),e}function qhe(t){try{return Ghe(t)}catch{return Vu}}function yk(t){var e=qhe(t.slice(5,-1));return e===Vu?"":e}var Hhe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Khe=["dx","dy","angle","className","breakAll"];function b$(){return b$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b$.apply(this,arguments)}function F4(t,e){if(t==null)return{};var n=Xhe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Xhe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function L4(t,e){return Jhe(t)||Qhe(t,e)||Zhe(t,e)||Yhe()}function Yhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zhe(t,e){if(t){if(typeof t=="string")return B4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B4(t,e)}}function B4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Qhe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function Jhe(t){if(Array.isArray(t))return t}var G6=/[ \f\n\r\t\v\u2028\u2029]+/,q6=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var s=[];yt(n)||(r?s=n.toString().split(""):s=n.toString().split(G6));var a=s.map(function(l){return{word:l,width:Hd(l,i).width}}),o=r?0:Hd("",i).width;return{wordsWithComputedWidth:a,spaceWidth:o}}catch{return null}},ede=function(e,n,r,i,s){var a=e.maxLines,o=e.children,l=e.style,c=e.breakAll,f=Ne(a),d=o,p=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return P.reduce(function(M,j){var V=j.word,q=j.width,L=M[M.length-1];if(L&&(i==null||s||L.width+q+r<Number(i)))L.words.push(V),L.width+=q+r;else{var G={words:[V],width:q};M.push(G)}return M},[])},g=p(n),y=function(P){return P.reduce(function(M,j){return M.width>j.width?M:j})};if(!f)return g;for(var x="",b=function(P){var M=d.slice(0,P),j=q6({breakAll:c,style:l,children:M+x}).wordsWithComputedWidth,V=p(j),q=V.length>a||y(V).width>Number(i);return[q,V]},w=0,S=d.length-1,T=0,k;w<=S&&T<=d.length-1;){var A=Math.floor((w+S)/2),E=A-1,I=b(E),N=L4(I,2),_=N[0],R=N[1],O=b(A),F=L4(O,1),z=F[0];if(!_&&!z&&(w=A+1),_&&z&&(S=A-1),!_&&z){k=R;break}T++}return k||g},z4=function(e){var n=yt(e)?[]:e.toString().split(G6);return[{words:n}]},tde=function(e){var n=e.width,r=e.scaleToFit,i=e.children,s=e.style,a=e.breakAll,o=e.maxLines;if((n||r)&&!Gf.isSsr){var l,c,f=q6({breakAll:a,children:i,style:s});if(f){var d=f.wordsWithComputedWidth,p=f.spaceWidth;l=d,c=p}else return z4(i);return ede({breakAll:a,children:i,maxLines:o,style:s},l,c,n,r)}return z4(i)},j4="#808080",ab=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,s=i===void 0?0:i,a=e.lineHeight,o=a===void 0?"1em":a,l=e.capHeight,c=l===void 0?"0.71em":l,f=e.scaleToFit,d=f===void 0?!1:f,p=e.textAnchor,g=p===void 0?"start":p,y=e.verticalAnchor,x=y===void 0?"end":y,b=e.fill,w=b===void 0?j4:b,S=F4(e,Hhe),T=Q.useMemo(function(){return tde({breakAll:S.breakAll,children:S.children,maxLines:S.maxLines,scaleToFit:d,style:S.style,width:S.width})},[S.breakAll,S.children,S.maxLines,d,S.style,S.width]),k=S.dx,A=S.dy,E=S.angle,I=S.className,N=S.breakAll,_=F4(S,Khe);if(!Hn(r)||!Hn(s))return null;var R=r+(Ne(k)?k:0),O=s+(Ne(A)?A:0),F;switch(x){case"start":F=yk("calc(".concat(c,")"));break;case"middle":F=yk("calc(".concat((T.length-1)/2," * -").concat(o," + (").concat(c," / 2))"));break;default:F=yk("calc(".concat(T.length-1," * -").concat(o,")"));break}var z=[];if(d){var W=T[0].width,P=S.width;z.push("scale(".concat((Ne(P)?P/W:1)/W,")"))}return E&&z.push("rotate(".concat(E,", ").concat(R,", ").concat(O,")")),z.length&&(_.transform=z.join(" ")),J.createElement("text",b$({},mt(_,!0),{x:R,y:O,className:St("recharts-text",I),textAnchor:g,fill:w.includes("url")?j4:w}),T.map(function(M,j){var V=M.words.join(N?"":" ");return J.createElement("tspan",{x:R,dy:j===0?F:o,key:"".concat(V,"-").concat(j)},V)}))};function zo(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function nde(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function oN(t){let e,n,r;t.length!==2?(e=zo,n=(o,l)=>zo(t(o),l),r=(o,l)=>t(o)-l):(e=t===zo||t===nde?t:rde,n=t,r=t);function i(o,l,c=0,f=o.length){if(c<f){if(e(l,l)!==0)return f;do{const d=c+f>>>1;n(o[d],l)<0?c=d+1:f=d}while(c<f)}return c}function s(o,l,c=0,f=o.length){if(c<f){if(e(l,l)!==0)return f;do{const d=c+f>>>1;n(o[d],l)<=0?c=d+1:f=d}while(c<f)}return c}function a(o,l,c=0,f=o.length){const d=i(o,l,c,f-1);return d>c&&r(o[d-1],l)>-r(o[d],l)?d-1:d}return{left:i,center:a,right:s}}function rde(){return 0}function H6(t){return t===null?NaN:+t}function*ide(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const sde=oN(zo),fm=sde.right;oN(H6).center;class V4 extends Map{constructor(e,n=lde){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(U4(this,e))}has(e){return super.has(U4(this,e))}set(e,n){return super.set(ade(this,e),n)}delete(e){return super.delete(ode(this,e))}}function U4({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function ade({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function ode({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function lde(t){return t!==null&&typeof t=="object"?t.valueOf():t}function cde(t=zo){if(t===zo)return K6;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function K6(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const ude=Math.sqrt(50),fde=Math.sqrt(10),hde=Math.sqrt(2);function ob(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=ude?10:s>=fde?5:s>=hde?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/a,o=Math.round(t*c),l=Math.round(e*c),o/c<t&&++o,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*a,o=Math.round(t/c),l=Math.round(e/c),o*c<t&&++o,l*c>e&&--l),l<o&&.5<=n&&n<2?ob(t,e,n*2):[o,l,c]}function x$(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,a]=r?ob(e,t,n):ob(t,e,n);if(!(s>=i))return[];const o=s-i+1,l=new Array(o);if(r)if(a<0)for(let c=0;c<o;++c)l[c]=(s-c)/-a;else for(let c=0;c<o;++c)l[c]=(s-c)*a;else if(a<0)for(let c=0;c<o;++c)l[c]=(i+c)/-a;else for(let c=0;c<o;++c)l[c]=(i+c)*a;return l}function w$(t,e,n){return e=+e,t=+t,n=+n,ob(t,e,n)[2]}function S$(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?w$(e,t,n):w$(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function W4(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function G4(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function X6(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?K6:cde(i);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,f=Math.log(l),d=.5*Math.exp(2*f/3),p=.5*Math.sqrt(f*d*(l-d)/l)*(c-l/2<0?-1:1),g=Math.max(n,Math.floor(e-c*d/l+p)),y=Math.min(r,Math.floor(e+(l-c)*d/l+p));X6(t,e,g,y,i)}const s=t[e];let a=n,o=r;for(xd(t,n,e),i(t[r],s)>0&&xd(t,n,r);a<o;){for(xd(t,a,o),++a,--o;i(t[a],s)<0;)++a;for(;i(t[o],s)>0;)--o}i(t[n],s)===0?xd(t,n,o):(++o,xd(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function xd(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function dde(t,e,n){if(t=Float64Array.from(ide(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return G4(t);if(e>=1)return W4(t);var r,i=(r-1)*e,s=Math.floor(i),a=W4(X6(t,s).subarray(0,s+1)),o=G4(t.subarray(s+1));return a+(o-a)*(i-s)}}function pde(t,e,n=H6){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),a=+n(t[s],s,t),o=+n(t[s+1],s+1,t);return a+(o-a)*(i-s)}}function mde(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function ts(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function eo(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const C$=Symbol("implicit");function lN(){var t=new V4,e=[],n=[],r=C$;function i(s){let a=t.get(s);if(a===void 0){if(r!==C$)return r;t.set(s,a=e.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new V4;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return lN(e,n).unknown(r)},ts.apply(i,arguments),i}function mp(){var t=lN().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,a,o=!1,l=0,c=0,f=.5;delete t.unknown;function d(){var p=e().length,g=i<r,y=g?i:r,x=g?r:i;s=(x-y)/Math.max(1,p-l+c*2),o&&(s=Math.floor(s)),y+=(x-y-s*(p-l))*f,a=s*(1-l),o&&(y=Math.round(y),a=Math.round(a));var b=mde(p).map(function(w){return y+s*w});return n(g?b.reverse():b)}return t.domain=function(p){return arguments.length?(e(p),d()):e()},t.range=function(p){return arguments.length?([r,i]=p,r=+r,i=+i,d()):[r,i]},t.rangeRound=function(p){return[r,i]=p,r=+r,i=+i,o=!0,d()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(p){return arguments.length?(o=!!p,d()):o},t.padding=function(p){return arguments.length?(l=Math.min(1,c=+p),d()):l},t.paddingInner=function(p){return arguments.length?(l=Math.min(1,p),d()):l},t.paddingOuter=function(p){return arguments.length?(c=+p,d()):c},t.align=function(p){return arguments.length?(f=Math.max(0,Math.min(1,p)),d()):f},t.copy=function(){return mp(e(),[r,i]).round(o).paddingInner(l).paddingOuter(c).align(f)},ts.apply(d(),arguments)}function Y6(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Y6(e())},t}function Kd(){return Y6(mp.apply(null,arguments).paddingInner(1))}function cN(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Z6(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function hm(){}var gp=.7,lb=1/gp,Hu="\\s*([+-]?\\d+)\\s*",yp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gde=/^#([0-9a-f]{3,8})$/,yde=new RegExp(`^rgb\\(${Hu},${Hu},${Hu}\\)$`),vde=new RegExp(`^rgb\\(${qs},${qs},${qs}\\)$`),bde=new RegExp(`^rgba\\(${Hu},${Hu},${Hu},${yp}\\)$`),xde=new RegExp(`^rgba\\(${qs},${qs},${qs},${yp}\\)$`),wde=new RegExp(`^hsl\\(${yp},${qs},${qs}\\)$`),Sde=new RegExp(`^hsla\\(${yp},${qs},${qs},${yp}\\)$`),q4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};cN(hm,vp,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:H4,formatHex:H4,formatHex8:Cde,formatHsl:Tde,formatRgb:K4,toString:K4});function H4(){return this.rgb().formatHex()}function Cde(){return this.rgb().formatHex8()}function Tde(){return Q6(this).formatHsl()}function K4(){return this.rgb().formatRgb()}function vp(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=gde.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?X4(e):n===3?new si(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?rv(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?rv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=yde.exec(t))?new si(e[1],e[2],e[3],1):(e=vde.exec(t))?new si(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=bde.exec(t))?rv(e[1],e[2],e[3],e[4]):(e=xde.exec(t))?rv(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=wde.exec(t))?Q4(e[1],e[2]/100,e[3]/100,1):(e=Sde.exec(t))?Q4(e[1],e[2]/100,e[3]/100,e[4]):q4.hasOwnProperty(t)?X4(q4[t]):t==="transparent"?new si(NaN,NaN,NaN,0):null}function X4(t){return new si(t>>16&255,t>>8&255,t&255,1)}function rv(t,e,n,r){return r<=0&&(t=e=n=NaN),new si(t,e,n,r)}function Ade(t){return t instanceof hm||(t=vp(t)),t?(t=t.rgb(),new si(t.r,t.g,t.b,t.opacity)):new si}function T$(t,e,n,r){return arguments.length===1?Ade(t):new si(t,e,n,r??1)}function si(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}cN(si,T$,Z6(hm,{brighter(t){return t=t==null?lb:Math.pow(lb,t),new si(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?gp:Math.pow(gp,t),new si(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new si(rc(this.r),rc(this.g),rc(this.b),cb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Y4,formatHex:Y4,formatHex8:kde,formatRgb:Z4,toString:Z4}));function Y4(){return`#${Xl(this.r)}${Xl(this.g)}${Xl(this.b)}`}function kde(){return`#${Xl(this.r)}${Xl(this.g)}${Xl(this.b)}${Xl((isNaN(this.opacity)?1:this.opacity)*255)}`}function Z4(){const t=cb(this.opacity);return`${t===1?"rgb(":"rgba("}${rc(this.r)}, ${rc(this.g)}, ${rc(this.b)}${t===1?")":`, ${t})`}`}function cb(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function rc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Xl(t){return t=rc(t),(t<16?"0":"")+t.toString(16)}function Q4(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new gs(t,e,n,r)}function Q6(t){if(t instanceof gs)return new gs(t.h,t.s,t.l,t.opacity);if(t instanceof hm||(t=vp(t)),!t)return new gs;if(t instanceof gs)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(e===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-e)/o+2:a=(e-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new gs(a,o,l,t.opacity)}function $de(t,e,n,r){return arguments.length===1?Q6(t):new gs(t,e,n,r??1)}function gs(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}cN(gs,$de,Z6(hm,{brighter(t){return t=t==null?lb:Math.pow(lb,t),new gs(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?gp:Math.pow(gp,t),new gs(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new si(vk(t>=240?t-240:t+120,i,r),vk(t,i,r),vk(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new gs(J4(this.h),iv(this.s),iv(this.l),cb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=cb(this.opacity);return`${t===1?"hsl(":"hsla("}${J4(this.h)}, ${iv(this.s)*100}%, ${iv(this.l)*100}%${t===1?")":`, ${t})`}`}}));function J4(t){return t=(t||0)%360,t<0?t+360:t}function iv(t){return Math.max(0,Math.min(1,t||0))}function vk(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const uN=t=>()=>t;function Ede(t,e){return function(n){return t+n*e}}function Ide(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Nde(t){return(t=+t)==1?J6:function(e,n){return n-e?Ide(e,n,t):uN(isNaN(e)?n:e)}}function J6(t,e){var n=e-t;return n?Ede(t,n):uN(isNaN(t)?e:t)}const ej=function t(e){var n=Nde(e);function r(i,s){var a=n((i=T$(i)).r,(s=T$(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),c=J6(i.opacity,s.opacity);return function(f){return i.r=a(f),i.g=o(f),i.b=l(f),i.opacity=c(f),i+""}}return r.gamma=t,r}(1);function Ode(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function _de(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Rde(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=qf(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function Dde(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function ub(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Mde(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=qf(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var A$=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bk=new RegExp(A$.source,"g");function Pde(t){return function(){return t}}function Fde(t){return function(e){return t(e)+""}}function Lde(t,e){var n=A$.lastIndex=bk.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(t=t+"",e=e+"";(r=A$.exec(t))&&(i=bk.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:ub(r,i)})),n=bk.lastIndex;return n<e.length&&(s=e.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?Fde(l[0].x):Pde(e):(e=l.length,function(c){for(var f=0,d;f<e;++f)o[(d=l[f]).i]=d.x(c);return o.join("")})}function qf(t,e){var n=typeof e,r;return e==null||n==="boolean"?uN(e):(n==="number"?ub:n==="string"?(r=vp(e))?(e=r,ej):Lde:e instanceof vp?ej:e instanceof Date?Dde:_de(e)?Ode:Array.isArray(e)?Rde:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Mde:ub)(t,e)}function fN(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Bde(t,e){e===void 0&&(e=t,t=qf);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(a){var o=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return s[o](a-o)}}function zde(t){return function(){return t}}function fb(t){return+t}var tj=[0,1];function Ur(t){return t}function k$(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:zde(isNaN(e)?NaN:.5)}function jde(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Vde(t,e,n){var r=t[0],i=t[1],s=e[0],a=e[1];return i<r?(r=k$(i,r),s=n(a,s)):(r=k$(r,i),s=n(s,a)),function(o){return s(r(o))}}function Ude(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=k$(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(o){var l=fm(t,o,1,r)-1;return s[l](i[l](o))}}function dm(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function M0(){var t=tj,e=tj,n=qf,r,i,s,a=Ur,o,l,c;function f(){var p=Math.min(t.length,e.length);return a!==Ur&&(a=jde(t[0],t[p-1])),o=p>2?Ude:Vde,l=c=null,d}function d(p){return p==null||isNaN(p=+p)?s:(l||(l=o(t.map(r),e,n)))(r(a(p)))}return d.invert=function(p){return a(i((c||(c=o(e,t.map(r),ub)))(p)))},d.domain=function(p){return arguments.length?(t=Array.from(p,fb),f()):t.slice()},d.range=function(p){return arguments.length?(e=Array.from(p),f()):e.slice()},d.rangeRound=function(p){return e=Array.from(p),n=fN,f()},d.clamp=function(p){return arguments.length?(a=p?!0:Ur,f()):a!==Ur},d.interpolate=function(p){return arguments.length?(n=p,f()):n},d.unknown=function(p){return arguments.length?(s=p,d):s},function(p,g){return r=p,i=g,f()}}function hN(){return M0()(Ur,Ur)}function Wde(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function hb(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function lf(t){return t=hb(Math.abs(t)),t?t[1]:NaN}function Gde(t,e){return function(n,r){for(var i=n.length,s=[],a=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[a=(a+1)%t.length];return s.reverse().join(e)}}function qde(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Hde=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function bp(t){if(!(e=Hde.exec(t)))throw new Error("invalid format: "+t);var e;return new dN({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}bp.prototype=dN.prototype;function dN(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}dN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Kde(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var e5;function Xde(t,e){var n=hb(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(e5=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+hb(t,Math.max(0,e+s-1))[0]}function nj(t,e){var n=hb(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const rj={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Wde,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>nj(t*100,e),r:nj,s:Xde,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ij(t){return t}var sj=Array.prototype.map,aj=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Yde(t){var e=t.grouping===void 0||t.thousands===void 0?ij:Gde(sj.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?ij:qde(sj.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(d){d=bp(d);var p=d.fill,g=d.align,y=d.sign,x=d.symbol,b=d.zero,w=d.width,S=d.comma,T=d.precision,k=d.trim,A=d.type;A==="n"?(S=!0,A="g"):rj[A]||(T===void 0&&(T=12),k=!0,A="g"),(b||p==="0"&&g==="=")&&(b=!0,p="0",g="=");var E=x==="$"?n:x==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",I=x==="$"?r:/[%p]/.test(A)?a:"",N=rj[A],_=/[defgprs%]/.test(A);T=T===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function R(O){var F=E,z=I,W,P,M;if(A==="c")z=N(O)+z,O="";else{O=+O;var j=O<0||1/O<0;if(O=isNaN(O)?l:N(Math.abs(O),T),k&&(O=Kde(O)),j&&+O==0&&y!=="+"&&(j=!1),F=(j?y==="("?y:o:y==="-"||y==="("?"":y)+F,z=(A==="s"?aj[8+e5/3]:"")+z+(j&&y==="("?")":""),_){for(W=-1,P=O.length;++W<P;)if(M=O.charCodeAt(W),48>M||M>57){z=(M===46?i+O.slice(W+1):O.slice(W))+z,O=O.slice(0,W);break}}}S&&!b&&(O=e(O,1/0));var V=F.length+O.length+z.length,q=V<w?new Array(w-V+1).join(p):"";switch(S&&b&&(O=e(q+O,q.length?w-z.length:1/0),q=""),g){case"<":O=F+O+z+q;break;case"=":O=F+q+O+z;break;case"^":O=q.slice(0,V=q.length>>1)+F+O+z+q.slice(V);break;default:O=q+F+O+z;break}return s(O)}return R.toString=function(){return d+""},R}function f(d,p){var g=c((d=bp(d),d.type="f",d)),y=Math.max(-8,Math.min(8,Math.floor(lf(p)/3)))*3,x=Math.pow(10,-y),b=aj[8+y/3];return function(w){return g(x*w)+b}}return{format:c,formatPrefix:f}}var sv,pN,t5;Zde({thousands:",",grouping:[3],currency:["$",""]});function Zde(t){return sv=Yde(t),pN=sv.format,t5=sv.formatPrefix,sv}function Qde(t){return Math.max(0,-lf(Math.abs(t)))}function Jde(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(lf(e)/3)))*3-lf(Math.abs(t)))}function epe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,lf(e)-lf(t))+1}function n5(t,e,n,r){var i=S$(t,e,n),s;switch(r=bp(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=Jde(i,a))&&(r.precision=s),t5(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=epe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Qde(i))&&(r.precision=s-(r.type==="%")*2);break}}return pN(r)}function il(t){var e=t.domain;return t.ticks=function(n){var r=e();return x$(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return n5(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,a=r[i],o=r[s],l,c,f=10;for(o<a&&(c=a,a=o,o=c,c=i,i=s,s=c);f-- >0;){if(c=w$(a,o,n),c===l)return r[i]=a,r[s]=o,e(r);if(c>0)a=Math.floor(a/c)*c,o=Math.ceil(o/c)*c;else if(c<0)a=Math.ceil(a*c)/c,o=Math.floor(o*c)/c;else break;l=c}return t},t}function db(){var t=hN();return t.copy=function(){return dm(t,db())},ts.apply(t,arguments),il(t)}function r5(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,fb),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return r5(t).unknown(e)},t=arguments.length?Array.from(t,fb):[0,1],il(n)}function i5(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),t[n]=e.floor(i),t[r]=e.ceil(s),t}function oj(t){return Math.log(t)}function lj(t){return Math.exp(t)}function tpe(t){return-Math.log(-t)}function npe(t){return-Math.exp(-t)}function rpe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function ipe(t){return t===10?rpe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function spe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function cj(t){return(e,n)=>-t(-e,n)}function mN(t){const e=t(oj,lj),n=e.domain;let r=10,i,s;function a(){return i=spe(r),s=ipe(r),n()[0]<0?(i=cj(i),s=cj(s),t(tpe,npe)):t(oj,lj),e}return e.base=function(o){return arguments.length?(r=+o,a()):r},e.domain=function(o){return arguments.length?(n(o),a()):n()},e.ticks=o=>{const l=n();let c=l[0],f=l[l.length-1];const d=f<c;d&&([c,f]=[f,c]);let p=i(c),g=i(f),y,x;const b=o==null?10:+o;let w=[];if(!(r%1)&&g-p<b){if(p=Math.floor(p),g=Math.ceil(g),c>0){for(;p<=g;++p)for(y=1;y<r;++y)if(x=p<0?y/s(-p):y*s(p),!(x<c)){if(x>f)break;w.push(x)}}else for(;p<=g;++p)for(y=r-1;y>=1;--y)if(x=p>0?y/s(-p):y*s(p),!(x<c)){if(x>f)break;w.push(x)}w.length*2<b&&(w=x$(c,f,b))}else w=x$(p,g,Math.min(g-p,b)).map(s);return d?w.reverse():w},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=bp(l)).precision==null&&(l.trim=!0),l=pN(l)),o===1/0)return l;const c=Math.max(1,r*o/e.ticks().length);return f=>{let d=f/s(Math.round(i(f)));return d*r<r-.5&&(d*=r),d<=c?l(f):""}},e.nice=()=>n(i5(n(),{floor:o=>s(Math.floor(i(o))),ceil:o=>s(Math.ceil(i(o)))})),e}function s5(){const t=mN(M0()).domain([1,10]);return t.copy=()=>dm(t,s5()).base(t.base()),ts.apply(t,arguments),t}function uj(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function fj(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function gN(t){var e=1,n=t(uj(e),fj(e));return n.constant=function(r){return arguments.length?t(uj(e=+r),fj(e)):e},il(n)}function a5(){var t=gN(M0());return t.copy=function(){return dm(t,a5()).constant(t.constant())},ts.apply(t,arguments)}function hj(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function ape(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function ope(t){return t<0?-t*t:t*t}function yN(t){var e=t(Ur,Ur),n=1;function r(){return n===1?t(Ur,Ur):n===.5?t(ape,ope):t(hj(n),hj(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},il(e)}function vN(){var t=yN(M0());return t.copy=function(){return dm(t,vN()).exponent(t.exponent())},ts.apply(t,arguments),t}function lpe(){return vN.apply(null,arguments).exponent(.5)}function dj(t){return Math.sign(t)*t*t}function cpe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function o5(){var t=hN(),e=[0,1],n=!1,r;function i(s){var a=cpe(t(s));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(s){return t.invert(dj(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,fb)).map(dj)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return o5(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},ts.apply(i,arguments),il(i)}function l5(){var t=[],e=[],n=[],r;function i(){var a=0,o=Math.max(1,e.length);for(n=new Array(o-1);++a<o;)n[a-1]=pde(t,a/o);return s}function s(a){return a==null||isNaN(a=+a)?r:e[fm(n,a)]}return s.invertExtent=function(a){var o=e.indexOf(a);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let o of a)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(zo),i()},s.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return l5().domain(t).range(e).unknown(r)},ts.apply(s,arguments)}function c5(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function a(l){return l!=null&&l<=l?i[fm(r,l,0,n)]:s}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return a}return a.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},a.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,o()):i.slice()},a.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},a.unknown=function(l){return arguments.length&&(s=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return c5().domain([t,e]).range(i).unknown(s)},ts.apply(il(a),arguments)}function u5(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[fm(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var a=e.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return u5().domain(t).range(e).unknown(n)},ts.apply(i,arguments)}const xk=new Date,wk=new Date;function Xn(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const l=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return l;let c;do l.push(c=new Date(+s)),e(s,o),t(s);while(c<s&&s<a);return l},i.filter=s=>Xn(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!s(a););else for(;--o>=0;)for(;e(a,1),!s(a););}),n&&(i.count=(s,a)=>(xk.setTime(+s),wk.setTime(+a),t(xk),t(wk),Math.floor(n(xk,wk))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?a=>r(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const pb=Xn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);pb.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Xn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):pb);pb.range;const _a=1e3,Hi=_a*60,Ra=Hi*60,Ua=Ra*24,bN=Ua*7,pj=Ua*30,Sk=Ua*365,Yl=Xn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*_a)},(t,e)=>(e-t)/_a,t=>t.getUTCSeconds());Yl.range;const xN=Xn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*_a)},(t,e)=>{t.setTime(+t+e*Hi)},(t,e)=>(e-t)/Hi,t=>t.getMinutes());xN.range;const wN=Xn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Hi)},(t,e)=>(e-t)/Hi,t=>t.getUTCMinutes());wN.range;const SN=Xn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*_a-t.getMinutes()*Hi)},(t,e)=>{t.setTime(+t+e*Ra)},(t,e)=>(e-t)/Ra,t=>t.getHours());SN.range;const CN=Xn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Ra)},(t,e)=>(e-t)/Ra,t=>t.getUTCHours());CN.range;const pm=Xn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Hi)/Ua,t=>t.getDate()-1);pm.range;const P0=Xn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ua,t=>t.getUTCDate()-1);P0.range;const f5=Xn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ua,t=>Math.floor(t/Ua));f5.range;function Ec(t){return Xn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Hi)/bN)}const F0=Ec(0),mb=Ec(1),upe=Ec(2),fpe=Ec(3),cf=Ec(4),hpe=Ec(5),dpe=Ec(6);F0.range;mb.range;upe.range;fpe.range;cf.range;hpe.range;dpe.range;function Ic(t){return Xn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/bN)}const L0=Ic(0),gb=Ic(1),ppe=Ic(2),mpe=Ic(3),uf=Ic(4),gpe=Ic(5),ype=Ic(6);L0.range;gb.range;ppe.range;mpe.range;uf.range;gpe.range;ype.range;const TN=Xn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());TN.range;const AN=Xn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());AN.range;const Wa=Xn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Wa.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Xn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Wa.range;const Ga=Xn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ga.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Xn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ga.range;function h5(t,e,n,r,i,s){const a=[[Yl,1,_a],[Yl,5,5*_a],[Yl,15,15*_a],[Yl,30,30*_a],[s,1,Hi],[s,5,5*Hi],[s,15,15*Hi],[s,30,30*Hi],[i,1,Ra],[i,3,3*Ra],[i,6,6*Ra],[i,12,12*Ra],[r,1,Ua],[r,2,2*Ua],[n,1,bN],[e,1,pj],[e,3,3*pj],[t,1,Sk]];function o(c,f,d){const p=f<c;p&&([c,f]=[f,c]);const g=d&&typeof d.range=="function"?d:l(c,f,d),y=g?g.range(c,+f+1):[];return p?y.reverse():y}function l(c,f,d){const p=Math.abs(f-c)/d,g=oN(([,,b])=>b).right(a,p);if(g===a.length)return t.every(S$(c/Sk,f/Sk,d));if(g===0)return pb.every(Math.max(S$(c,f,d),1));const[y,x]=a[p/a[g-1][2]<a[g][2]/p?g-1:g];return y.every(x)}return[o,l]}const[vpe,bpe]=h5(Ga,AN,L0,f5,CN,wN),[xpe,wpe]=h5(Wa,TN,F0,pm,SN,xN);function Ck(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Tk(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function wd(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Spe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,a=t.shortDays,o=t.months,l=t.shortMonths,c=Sd(i),f=Cd(i),d=Sd(s),p=Cd(s),g=Sd(a),y=Cd(a),x=Sd(o),b=Cd(o),w=Sd(l),S=Cd(l),T={a:j,A:V,b:q,B:L,c:null,d:xj,e:xj,f:Gpe,g:tme,G:rme,H:Vpe,I:Upe,j:Wpe,L:d5,m:qpe,M:Hpe,p:G,q:H,Q:Cj,s:Tj,S:Kpe,u:Xpe,U:Ype,V:Zpe,w:Qpe,W:Jpe,x:null,X:null,y:eme,Y:nme,Z:ime,"%":Sj},k={a:K,A:oe,b:pe,B:be,c:null,d:wj,e:wj,f:lme,g:vme,G:xme,H:sme,I:ame,j:ome,L:m5,m:cme,M:ume,p:Ae,q:$e,Q:Cj,s:Tj,S:fme,u:hme,U:dme,V:pme,w:mme,W:gme,x:null,X:null,y:yme,Y:bme,Z:wme,"%":Sj},A={a:R,A:O,b:F,B:z,c:W,d:vj,e:vj,f:Lpe,g:yj,G:gj,H:bj,I:bj,j:Dpe,L:Fpe,m:Rpe,M:Mpe,p:_,q:_pe,Q:zpe,s:jpe,S:Ppe,u:$pe,U:Epe,V:Ipe,w:kpe,W:Npe,x:P,X:M,y:yj,Y:gj,Z:Ope,"%":Bpe};T.x=E(n,T),T.X=E(r,T),T.c=E(e,T),k.x=E(n,k),k.X=E(r,k),k.c=E(e,k);function E(ge,Ee){return function(Ie){var ye=[],Ge=-1,ze=0,Je=ge.length,qe,Xe,gt;for(Ie instanceof Date||(Ie=new Date(+Ie));++Ge<Je;)ge.charCodeAt(Ge)===37&&(ye.push(ge.slice(ze,Ge)),(Xe=mj[qe=ge.charAt(++Ge)])!=null?qe=ge.charAt(++Ge):Xe=qe==="e"?" ":"0",(gt=Ee[qe])&&(qe=gt(Ie,Xe)),ye.push(qe),ze=Ge+1);return ye.push(ge.slice(ze,Ge)),ye.join("")}}function I(ge,Ee){return function(Ie){var ye=wd(1900,void 0,1),Ge=N(ye,ge,Ie+="",0),ze,Je;if(Ge!=Ie.length)return null;if("Q"in ye)return new Date(ye.Q);if("s"in ye)return new Date(ye.s*1e3+("L"in ye?ye.L:0));if(Ee&&!("Z"in ye)&&(ye.Z=0),"p"in ye&&(ye.H=ye.H%12+ye.p*12),ye.m===void 0&&(ye.m="q"in ye?ye.q:0),"V"in ye){if(ye.V<1||ye.V>53)return null;"w"in ye||(ye.w=1),"Z"in ye?(ze=Tk(wd(ye.y,0,1)),Je=ze.getUTCDay(),ze=Je>4||Je===0?gb.ceil(ze):gb(ze),ze=P0.offset(ze,(ye.V-1)*7),ye.y=ze.getUTCFullYear(),ye.m=ze.getUTCMonth(),ye.d=ze.getUTCDate()+(ye.w+6)%7):(ze=Ck(wd(ye.y,0,1)),Je=ze.getDay(),ze=Je>4||Je===0?mb.ceil(ze):mb(ze),ze=pm.offset(ze,(ye.V-1)*7),ye.y=ze.getFullYear(),ye.m=ze.getMonth(),ye.d=ze.getDate()+(ye.w+6)%7)}else("W"in ye||"U"in ye)&&("w"in ye||(ye.w="u"in ye?ye.u%7:"W"in ye?1:0),Je="Z"in ye?Tk(wd(ye.y,0,1)).getUTCDay():Ck(wd(ye.y,0,1)).getDay(),ye.m=0,ye.d="W"in ye?(ye.w+6)%7+ye.W*7-(Je+5)%7:ye.w+ye.U*7-(Je+6)%7);return"Z"in ye?(ye.H+=ye.Z/100|0,ye.M+=ye.Z%100,Tk(ye)):Ck(ye)}}function N(ge,Ee,Ie,ye){for(var Ge=0,ze=Ee.length,Je=Ie.length,qe,Xe;Ge<ze;){if(ye>=Je)return-1;if(qe=Ee.charCodeAt(Ge++),qe===37){if(qe=Ee.charAt(Ge++),Xe=A[qe in mj?Ee.charAt(Ge++):qe],!Xe||(ye=Xe(ge,Ie,ye))<0)return-1}else if(qe!=Ie.charCodeAt(ye++))return-1}return ye}function _(ge,Ee,Ie){var ye=c.exec(Ee.slice(Ie));return ye?(ge.p=f.get(ye[0].toLowerCase()),Ie+ye[0].length):-1}function R(ge,Ee,Ie){var ye=g.exec(Ee.slice(Ie));return ye?(ge.w=y.get(ye[0].toLowerCase()),Ie+ye[0].length):-1}function O(ge,Ee,Ie){var ye=d.exec(Ee.slice(Ie));return ye?(ge.w=p.get(ye[0].toLowerCase()),Ie+ye[0].length):-1}function F(ge,Ee,Ie){var ye=w.exec(Ee.slice(Ie));return ye?(ge.m=S.get(ye[0].toLowerCase()),Ie+ye[0].length):-1}function z(ge,Ee,Ie){var ye=x.exec(Ee.slice(Ie));return ye?(ge.m=b.get(ye[0].toLowerCase()),Ie+ye[0].length):-1}function W(ge,Ee,Ie){return N(ge,e,Ee,Ie)}function P(ge,Ee,Ie){return N(ge,n,Ee,Ie)}function M(ge,Ee,Ie){return N(ge,r,Ee,Ie)}function j(ge){return a[ge.getDay()]}function V(ge){return s[ge.getDay()]}function q(ge){return l[ge.getMonth()]}function L(ge){return o[ge.getMonth()]}function G(ge){return i[+(ge.getHours()>=12)]}function H(ge){return 1+~~(ge.getMonth()/3)}function K(ge){return a[ge.getUTCDay()]}function oe(ge){return s[ge.getUTCDay()]}function pe(ge){return l[ge.getUTCMonth()]}function be(ge){return o[ge.getUTCMonth()]}function Ae(ge){return i[+(ge.getUTCHours()>=12)]}function $e(ge){return 1+~~(ge.getUTCMonth()/3)}return{format:function(ge){var Ee=E(ge+="",T);return Ee.toString=function(){return ge},Ee},parse:function(ge){var Ee=I(ge+="",!1);return Ee.toString=function(){return ge},Ee},utcFormat:function(ge){var Ee=E(ge+="",k);return Ee.toString=function(){return ge},Ee},utcParse:function(ge){var Ee=I(ge+="",!0);return Ee.toString=function(){return ge},Ee}}}var mj={"-":"",_:" ",0:"0"},ir=/^\s*\d+/,Cpe=/^%/,Tpe=/[\\^$*+?|[\]().{}]/g;function $t(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function Ape(t){return t.replace(Tpe,"\\$&")}function Sd(t){return new RegExp("^(?:"+t.map(Ape).join("|")+")","i")}function Cd(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function kpe(t,e,n){var r=ir.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function $pe(t,e,n){var r=ir.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Epe(t,e,n){var r=ir.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Ipe(t,e,n){var r=ir.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Npe(t,e,n){var r=ir.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function gj(t,e,n){var r=ir.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function yj(t,e,n){var r=ir.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Ope(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function _pe(t,e,n){var r=ir.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Rpe(t,e,n){var r=ir.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function vj(t,e,n){var r=ir.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Dpe(t,e,n){var r=ir.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function bj(t,e,n){var r=ir.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Mpe(t,e,n){var r=ir.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Ppe(t,e,n){var r=ir.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Fpe(t,e,n){var r=ir.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Lpe(t,e,n){var r=ir.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Bpe(t,e,n){var r=Cpe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function zpe(t,e,n){var r=ir.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function jpe(t,e,n){var r=ir.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function xj(t,e){return $t(t.getDate(),e,2)}function Vpe(t,e){return $t(t.getHours(),e,2)}function Upe(t,e){return $t(t.getHours()%12||12,e,2)}function Wpe(t,e){return $t(1+pm.count(Wa(t),t),e,3)}function d5(t,e){return $t(t.getMilliseconds(),e,3)}function Gpe(t,e){return d5(t,e)+"000"}function qpe(t,e){return $t(t.getMonth()+1,e,2)}function Hpe(t,e){return $t(t.getMinutes(),e,2)}function Kpe(t,e){return $t(t.getSeconds(),e,2)}function Xpe(t){var e=t.getDay();return e===0?7:e}function Ype(t,e){return $t(F0.count(Wa(t)-1,t),e,2)}function p5(t){var e=t.getDay();return e>=4||e===0?cf(t):cf.ceil(t)}function Zpe(t,e){return t=p5(t),$t(cf.count(Wa(t),t)+(Wa(t).getDay()===4),e,2)}function Qpe(t){return t.getDay()}function Jpe(t,e){return $t(mb.count(Wa(t)-1,t),e,2)}function eme(t,e){return $t(t.getFullYear()%100,e,2)}function tme(t,e){return t=p5(t),$t(t.getFullYear()%100,e,2)}function nme(t,e){return $t(t.getFullYear()%1e4,e,4)}function rme(t,e){var n=t.getDay();return t=n>=4||n===0?cf(t):cf.ceil(t),$t(t.getFullYear()%1e4,e,4)}function ime(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+$t(e/60|0,"0",2)+$t(e%60,"0",2)}function wj(t,e){return $t(t.getUTCDate(),e,2)}function sme(t,e){return $t(t.getUTCHours(),e,2)}function ame(t,e){return $t(t.getUTCHours()%12||12,e,2)}function ome(t,e){return $t(1+P0.count(Ga(t),t),e,3)}function m5(t,e){return $t(t.getUTCMilliseconds(),e,3)}function lme(t,e){return m5(t,e)+"000"}function cme(t,e){return $t(t.getUTCMonth()+1,e,2)}function ume(t,e){return $t(t.getUTCMinutes(),e,2)}function fme(t,e){return $t(t.getUTCSeconds(),e,2)}function hme(t){var e=t.getUTCDay();return e===0?7:e}function dme(t,e){return $t(L0.count(Ga(t)-1,t),e,2)}function g5(t){var e=t.getUTCDay();return e>=4||e===0?uf(t):uf.ceil(t)}function pme(t,e){return t=g5(t),$t(uf.count(Ga(t),t)+(Ga(t).getUTCDay()===4),e,2)}function mme(t){return t.getUTCDay()}function gme(t,e){return $t(gb.count(Ga(t)-1,t),e,2)}function yme(t,e){return $t(t.getUTCFullYear()%100,e,2)}function vme(t,e){return t=g5(t),$t(t.getUTCFullYear()%100,e,2)}function bme(t,e){return $t(t.getUTCFullYear()%1e4,e,4)}function xme(t,e){var n=t.getUTCDay();return t=n>=4||n===0?uf(t):uf.ceil(t),$t(t.getUTCFullYear()%1e4,e,4)}function wme(){return"+0000"}function Sj(){return"%"}function Cj(t){return+t}function Tj(t){return Math.floor(+t/1e3)}var Iu,y5,v5;Sme({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Sme(t){return Iu=Spe(t),y5=Iu.format,Iu.parse,v5=Iu.utcFormat,Iu.utcParse,Iu}function Cme(t){return new Date(t)}function Tme(t){return t instanceof Date?+t:+new Date(+t)}function kN(t,e,n,r,i,s,a,o,l,c){var f=hN(),d=f.invert,p=f.domain,g=c(".%L"),y=c(":%S"),x=c("%I:%M"),b=c("%I %p"),w=c("%a %d"),S=c("%b %d"),T=c("%B"),k=c("%Y");function A(E){return(l(E)<E?g:o(E)<E?y:a(E)<E?x:s(E)<E?b:r(E)<E?i(E)<E?w:S:n(E)<E?T:k)(E)}return f.invert=function(E){return new Date(d(E))},f.domain=function(E){return arguments.length?p(Array.from(E,Tme)):p().map(Cme)},f.ticks=function(E){var I=p();return t(I[0],I[I.length-1],E??10)},f.tickFormat=function(E,I){return I==null?A:c(I)},f.nice=function(E){var I=p();return(!E||typeof E.range!="function")&&(E=e(I[0],I[I.length-1],E??10)),E?p(i5(I,E)):f},f.copy=function(){return dm(f,kN(t,e,n,r,i,s,a,o,l,c))},f}function Ame(){return ts.apply(kN(xpe,wpe,Wa,TN,F0,pm,SN,xN,Yl,y5).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function kme(){return ts.apply(kN(vpe,bpe,Ga,AN,L0,P0,CN,wN,Yl,v5).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function B0(){var t=0,e=1,n,r,i,s,a=Ur,o=!1,l;function c(d){return d==null||isNaN(d=+d)?l:a(i===0?.5:(d=(s(d)-n)*i,o?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,e]=d,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(d){return arguments.length?(o=!!d,c):o},c.interpolator=function(d){return arguments.length?(a=d,c):a};function f(d){return function(p){var g,y;return arguments.length?([g,y]=p,a=d(g,y),c):[a(0),a(1)]}}return c.range=f(qf),c.rangeRound=f(fN),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return s=d,n=d(t),r=d(e),i=n===r?0:1/(r-n),c}}function sl(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function b5(){var t=il(B0()(Ur));return t.copy=function(){return sl(t,b5())},eo.apply(t,arguments)}function x5(){var t=mN(B0()).domain([1,10]);return t.copy=function(){return sl(t,x5()).base(t.base())},eo.apply(t,arguments)}function w5(){var t=gN(B0());return t.copy=function(){return sl(t,w5()).constant(t.constant())},eo.apply(t,arguments)}function $N(){var t=yN(B0());return t.copy=function(){return sl(t,$N()).exponent(t.exponent())},eo.apply(t,arguments)}function $me(){return $N.apply(null,arguments).exponent(.5)}function S5(){var t=[],e=Ur;function n(r){if(r!=null&&!isNaN(r=+r))return e((fm(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(zo),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>dde(t,s/r))},n.copy=function(){return S5(e).domain(t)},eo.apply(n,arguments)}function z0(){var t=0,e=.5,n=1,r=1,i,s,a,o,l,c=Ur,f,d=!1,p;function g(x){return isNaN(x=+x)?p:(x=.5+((x=+f(x))-s)*(r*x<r*s?o:l),c(d?Math.max(0,Math.min(1,x)):x))}g.domain=function(x){return arguments.length?([t,e,n]=x,i=f(t=+t),s=f(e=+e),a=f(n=+n),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),r=s<i?-1:1,g):[t,e,n]},g.clamp=function(x){return arguments.length?(d=!!x,g):d},g.interpolator=function(x){return arguments.length?(c=x,g):c};function y(x){return function(b){var w,S,T;return arguments.length?([w,S,T]=b,c=Bde(x,[w,S,T]),g):[c(0),c(.5),c(1)]}}return g.range=y(qf),g.rangeRound=y(fN),g.unknown=function(x){return arguments.length?(p=x,g):p},function(x){return f=x,i=x(t),s=x(e),a=x(n),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),r=s<i?-1:1,g}}function C5(){var t=il(z0()(Ur));return t.copy=function(){return sl(t,C5())},eo.apply(t,arguments)}function T5(){var t=mN(z0()).domain([.1,1,10]);return t.copy=function(){return sl(t,T5()).base(t.base())},eo.apply(t,arguments)}function A5(){var t=gN(z0());return t.copy=function(){return sl(t,A5()).constant(t.constant())},eo.apply(t,arguments)}function EN(){var t=yN(z0());return t.copy=function(){return sl(t,EN()).exponent(t.exponent())},eo.apply(t,arguments)}function Eme(){return EN.apply(null,arguments).exponent(.5)}const Aj=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:mp,scaleDiverging:C5,scaleDivergingLog:T5,scaleDivergingPow:EN,scaleDivergingSqrt:Eme,scaleDivergingSymlog:A5,scaleIdentity:r5,scaleImplicit:C$,scaleLinear:db,scaleLog:s5,scaleOrdinal:lN,scalePoint:Kd,scalePow:vN,scaleQuantile:l5,scaleQuantize:c5,scaleRadial:o5,scaleSequential:b5,scaleSequentialLog:x5,scaleSequentialPow:$N,scaleSequentialQuantile:S5,scaleSequentialSqrt:$me,scaleSequentialSymlog:w5,scaleSqrt:lpe,scaleSymlog:a5,scaleThreshold:u5,scaleTime:Ame,scaleUtc:kme,tickFormat:n5},Symbol.toStringTag,{value:"Module"}));var Ak,kj;function k5(){if(kj)return Ak;kj=1;var t=jf();function e(n,r,i){for(var s=-1,a=n.length;++s<a;){var o=n[s],l=r(o);if(l!=null&&(c===void 0?l===l&&!t(l):i(l,c)))var c=l,f=o}return f}return Ak=e,Ak}var kk,$j;function Ime(){if($j)return kk;$j=1;function t(e,n){return e>n}return kk=t,kk}var $k,Ej;function Nme(){if(Ej)return $k;Ej=1;var t=k5(),e=Ime(),n=Wf();function r(i){return i&&i.length?t(i,n,e):void 0}return $k=r,$k}var Ome=Nme();const Mo=Vt(Ome);var Ek,Ij;function _me(){if(Ij)return Ek;Ij=1;function t(e,n){return e<n}return Ek=t,Ek}var Ik,Nj;function Rme(){if(Nj)return Ik;Nj=1;var t=k5(),e=_me(),n=Wf();function r(i){return i&&i.length?t(i,n,e):void 0}return Ik=r,Ik}var Dme=Rme();const j0=Vt(Dme);var Nk,Oj;function Mme(){if(Oj)return Nk;Oj=1;var t=WI(),e=rl(),n=D6(),r=fi();function i(s,a){var o=r(s)?t:n;return o(s,e(a,3))}return Nk=i,Nk}var Ok,_j;function Pme(){if(_j)return Ok;_j=1;var t=_6(),e=Mme();function n(r,i){return t(e(r,i),1)}return Ok=n,Ok}var Fme=Pme();const Lme=Vt(Fme);var _k,Rj;function Bme(){if(Rj)return _k;Rj=1;var t=rN();function e(n,r){return t(n,r)}return _k=e,_k}var zme=Bme();const xp=Vt(zme);var Hf=1e9,jme={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},NN,nn=!0,Qi="[DecimalError] ",ic=Qi+"Invalid argument: ",IN=Qi+"Exponent out of range: ",Kf=Math.floor,jl=Math.pow,Vme=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,wi,tr=1e7,Qt=7,$5=9007199254740991,yb=Kf($5/Qt),De={};De.absoluteValue=De.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};De.comparedTo=De.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};De.decimalPlaces=De.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Qt;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};De.dividedBy=De.div=function(t){return Ba(this,new this.constructor(t))};De.dividedToIntegerBy=De.idiv=function(t){var e=this,n=e.constructor;return qt(Ba(e,new n(t),0,1),n.precision)};De.equals=De.eq=function(t){return!this.cmp(t)};De.exponent=function(){return Dn(this)};De.greaterThan=De.gt=function(t){return this.cmp(t)>0};De.greaterThanOrEqualTo=De.gte=function(t){return this.cmp(t)>=0};De.isInteger=De.isint=function(){return this.e>this.d.length-2};De.isNegative=De.isneg=function(){return this.s<0};De.isPositive=De.ispos=function(){return this.s>0};De.isZero=function(){return this.s===0};De.lessThan=De.lt=function(t){return this.cmp(t)<0};De.lessThanOrEqualTo=De.lte=function(t){return this.cmp(t)<1};De.logarithm=De.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(wi))throw Error(Qi+"NaN");if(n.s<1)throw Error(Qi+(n.s?"NaN":"-Infinity"));return n.eq(wi)?new r(0):(nn=!1,e=Ba(wp(n,s),wp(t,s),s),nn=!0,qt(e,i))};De.minus=De.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?N5(e,t):E5(e,(t.s=-t.s,t))};De.modulo=De.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Qi+"NaN");return n.s?(nn=!1,e=Ba(n,t,0,1).times(t),nn=!0,n.minus(e)):qt(new r(n),i)};De.naturalExponential=De.exp=function(){return I5(this)};De.naturalLogarithm=De.ln=function(){return wp(this)};De.negated=De.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};De.plus=De.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?E5(e,t):N5(e,(t.s=-t.s,t))};De.precision=De.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ic+t);if(e=Dn(i)+1,r=i.d.length-1,n=r*Qt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};De.squareRoot=De.sqrt=function(){var t,e,n,r,i,s,a,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(Qi+"NaN")}for(t=Dn(o),nn=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=zs(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Kf((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=a=n+3;;)if(s=r,r=s.plus(Ba(o,s,a+2)).times(.5),zs(s.d).slice(0,a)===(e=zs(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(qt(s,n+1,0),s.times(s).eq(o)){r=s;break}}else if(e!="9999")break;a+=4}return nn=!0,qt(r,n)};De.times=De.mul=function(t){var e,n,r,i,s,a,o,l,c,f=this,d=f.constructor,p=f.d,g=(t=new d(t)).d;if(!f.s||!t.s)return new d(0);for(t.s*=f.s,n=f.e+t.e,l=p.length,c=g.length,l<c&&(s=p,p=g,g=s,a=l,l=c,c=a),s=[],a=l+c,r=a;r--;)s.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)o=s[i]+g[r]*p[i-r-1]+e,s[i--]=o%tr|0,e=o/tr|0;s[i]=(s[i]+e)%tr|0}for(;!s[--a];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,nn?qt(t,d.precision):t};De.toDecimalPlaces=De.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Js(t,0,Hf),e===void 0?e=r.rounding:Js(e,0,8),qt(n,t+Dn(n)+1,e))};De.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=uc(r,!0):(Js(t,0,Hf),e===void 0?e=i.rounding:Js(e,0,8),r=qt(new i(r),t+1,e),n=uc(r,!0,t+1)),n};De.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?uc(i):(Js(t,0,Hf),e===void 0?e=s.rounding:Js(e,0,8),r=qt(new s(i),t+Dn(i)+1,e),n=uc(r.abs(),!1,t+Dn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};De.toInteger=De.toint=function(){var t=this,e=t.constructor;return qt(new e(t),Dn(t)+1,e.rounding)};De.toNumber=function(){return+this};De.toPower=De.pow=function(t){var e,n,r,i,s,a,o=this,l=o.constructor,c=12,f=+(t=new l(t));if(!t.s)return new l(wi);if(o=new l(o),!o.s){if(t.s<1)throw Error(Qi+"Infinity");return o}if(o.eq(wi))return o;if(r=l.precision,t.eq(wi))return qt(o,r);if(e=t.e,n=t.d.length-1,a=e>=n,s=o.s,a){if((n=f<0?-f:f)<=$5){for(i=new l(wi),e=Math.ceil(r/Qt+4),nn=!1;n%2&&(i=i.times(o),Mj(i.d,e)),n=Kf(n/2),n!==0;)o=o.times(o),Mj(o.d,e);return nn=!0,t.s<0?new l(wi).div(i):qt(i,r)}}else if(s<0)throw Error(Qi+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,nn=!1,i=t.times(wp(o,r+c)),nn=!0,i=I5(i),i.s=s,i};De.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=Dn(i),r=uc(i,n<=s.toExpNeg||n>=s.toExpPos)):(Js(t,1,Hf),e===void 0?e=s.rounding:Js(e,0,8),i=qt(new s(i),t,e),n=Dn(i),r=uc(i,t<=n||n<=s.toExpNeg,t)),r};De.toSignificantDigits=De.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Js(t,1,Hf),e===void 0?e=r.rounding:Js(e,0,8)),qt(new r(n),t,e)};De.toString=De.valueOf=De.val=De.toJSON=De[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Dn(t),n=t.constructor;return uc(t,e<=n.toExpNeg||e>=n.toExpPos)};function E5(t,e){var n,r,i,s,a,o,l,c,f=t.constructor,d=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),nn?qt(e,d):e;if(l=t.d,c=e.d,a=t.e,i=e.e,l=l.slice(),s=a-i,s){for(s<0?(r=l,s=-s,o=c.length):(r=c,i=a,o=l.length),a=Math.ceil(d/Qt),o=a>o?a+1:o+1,s>o&&(s=o,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(o=l.length,s=c.length,o-s<0&&(s=o,r=c,c=l,l=r),n=0;s;)n=(l[--s]=l[s]+c[s]+n)/tr|0,l[s]%=tr;for(n&&(l.unshift(n),++i),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=i,nn?qt(e,d):e}function Js(t,e,n){if(t!==~~t||t<e||t>n)throw Error(ic+t)}function zs(t){var e,n,r,i=t.length-1,s="",a=t[0];if(i>0){for(s+=a,e=1;e<i;e++)r=t[e]+"",n=Qt-r.length,n&&(s+=_o(n)),s+=r;a=t[e],r=a+"",n=Qt-r.length,n&&(s+=_o(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var Ba=function(){function t(r,i){var s,a=0,o=r.length;for(r=r.slice();o--;)s=r[o]*i+a,r[o]=s%tr|0,a=s/tr|0;return a&&r.unshift(a),r}function e(r,i,s,a){var o,l;if(s!=a)l=s>a?1:-1;else for(o=l=0;o<s;o++)if(r[o]!=i[o]){l=r[o]>i[o]?1:-1;break}return l}function n(r,i,s){for(var a=0;s--;)r[s]-=a,a=r[s]<i[s]?1:0,r[s]=a*tr+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,a){var o,l,c,f,d,p,g,y,x,b,w,S,T,k,A,E,I,N,_=r.constructor,R=r.s==i.s?1:-1,O=r.d,F=i.d;if(!r.s)return new _(r);if(!i.s)throw Error(Qi+"Division by zero");for(l=r.e-i.e,I=F.length,A=O.length,g=new _(R),y=g.d=[],c=0;F[c]==(O[c]||0);)++c;if(F[c]>(O[c]||0)&&--l,s==null?S=s=_.precision:a?S=s+(Dn(r)-Dn(i))+1:S=s,S<0)return new _(0);if(S=S/Qt+2|0,c=0,I==1)for(f=0,F=F[0],S++;(c<A||f)&&S--;c++)T=f*tr+(O[c]||0),y[c]=T/F|0,f=T%F|0;else{for(f=tr/(F[0]+1)|0,f>1&&(F=t(F,f),O=t(O,f),I=F.length,A=O.length),k=I,x=O.slice(0,I),b=x.length;b<I;)x[b++]=0;N=F.slice(),N.unshift(0),E=F[0],F[1]>=tr/2&&++E;do f=0,o=e(F,x,I,b),o<0?(w=x[0],I!=b&&(w=w*tr+(x[1]||0)),f=w/E|0,f>1?(f>=tr&&(f=tr-1),d=t(F,f),p=d.length,b=x.length,o=e(d,x,p,b),o==1&&(f--,n(d,I<p?N:F,p))):(f==0&&(o=f=1),d=F.slice()),p=d.length,p<b&&d.unshift(0),n(x,d,b),o==-1&&(b=x.length,o=e(F,x,I,b),o<1&&(f++,n(x,I<b?N:F,b))),b=x.length):o===0&&(f++,x=[0]),y[c++]=f,o&&x[0]?x[b++]=O[k]||0:(x=[O[k]],b=1);while((k++<A||x[0]!==void 0)&&S--)}return y[0]||y.shift(),g.e=l,qt(g,a?s+Dn(g)+1:s)}}();function I5(t,e){var n,r,i,s,a,o,l=0,c=0,f=t.constructor,d=f.precision;if(Dn(t)>16)throw Error(IN+Dn(t));if(!t.s)return new f(wi);for(nn=!1,o=d,a=new f(.03125);t.abs().gte(.1);)t=t.times(a),c+=5;for(r=Math.log(jl(2,c))/Math.LN10*2+5|0,o+=r,n=i=s=new f(wi),f.precision=o;;){if(i=qt(i.times(t),o),n=n.times(++l),a=s.plus(Ba(i,n,o)),zs(a.d).slice(0,o)===zs(s.d).slice(0,o)){for(;c--;)s=qt(s.times(s),o);return f.precision=d,e==null?(nn=!0,qt(s,d)):s}s=a}}function Dn(t){for(var e=t.e*Qt,n=t.d[0];n>=10;n/=10)e++;return e}function Rk(t,e,n){if(e>t.LN10.sd())throw nn=!0,n&&(t.precision=n),Error(Qi+"LN10 precision limit exceeded");return qt(new t(t.LN10),e)}function _o(t){for(var e="";t--;)e+="0";return e}function wp(t,e){var n,r,i,s,a,o,l,c,f,d=1,p=10,g=t,y=g.d,x=g.constructor,b=x.precision;if(g.s<1)throw Error(Qi+(g.s?"NaN":"-Infinity"));if(g.eq(wi))return new x(0);if(e==null?(nn=!1,c=b):c=e,g.eq(10))return e==null&&(nn=!0),Rk(x,c);if(c+=p,x.precision=c,n=zs(y),r=n.charAt(0),s=Dn(g),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)g=g.times(t),n=zs(g.d),r=n.charAt(0),d++;s=Dn(g),r>1?(g=new x("0."+n),s++):g=new x(r+"."+n.slice(1))}else return l=Rk(x,c+2,b).times(s+""),g=wp(new x(r+"."+n.slice(1)),c-p).plus(l),x.precision=b,e==null?(nn=!0,qt(g,b)):g;for(o=a=g=Ba(g.minus(wi),g.plus(wi),c),f=qt(g.times(g),c),i=3;;){if(a=qt(a.times(f),c),l=o.plus(Ba(a,new x(i),c)),zs(l.d).slice(0,c)===zs(o.d).slice(0,c))return o=o.times(2),s!==0&&(o=o.plus(Rk(x,c+2,b).times(s+""))),o=Ba(o,new x(d),c),x.precision=b,e==null?(nn=!0,qt(o,b)):o;o=l,i+=2}}function Dj(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Kf(n/Qt),t.d=[],r=(n+1)%Qt,n<0&&(r+=Qt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Qt;r<i;)t.d.push(+e.slice(r,r+=Qt));e=e.slice(r),r=Qt-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),nn&&(t.e>yb||t.e<-yb))throw Error(IN+n)}else t.s=0,t.e=0,t.d=[0];return t}function qt(t,e,n){var r,i,s,a,o,l,c,f,d=t.d;for(a=1,s=d[0];s>=10;s/=10)a++;if(r=e-a,r<0)r+=Qt,i=e,c=d[f=0];else{if(f=Math.ceil((r+1)/Qt),s=d.length,f>=s)return t;for(c=s=d[f],a=1;s>=10;s/=10)a++;r%=Qt,i=r-Qt+a}if(n!==void 0&&(s=jl(10,a-i-1),o=c/s%10|0,l=e<0||d[f+1]!==void 0||c%s,l=n<4?(o||l)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||l||n==6&&(r>0?i>0?c/jl(10,a-i):0:d[f-1])%10&1||n==(t.s<0?8:7))),e<1||!d[0])return l?(s=Dn(t),d.length=1,e=e-s-1,d[0]=jl(10,(Qt-e%Qt)%Qt),t.e=Kf(-e/Qt)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(r==0?(d.length=f,s=1,f--):(d.length=f+1,s=jl(10,Qt-r),d[f]=i>0?(c/jl(10,a-i)%jl(10,i)|0)*s:0),l)for(;;)if(f==0){(d[0]+=s)==tr&&(d[0]=1,++t.e);break}else{if(d[f]+=s,d[f]!=tr)break;d[f--]=0,s=1}for(r=d.length;d[--r]===0;)d.pop();if(nn&&(t.e>yb||t.e<-yb))throw Error(IN+Dn(t));return t}function N5(t,e){var n,r,i,s,a,o,l,c,f,d,p=t.constructor,g=p.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new p(t),nn?qt(e,g):e;if(l=t.d,d=e.d,r=e.e,c=t.e,l=l.slice(),a=c-r,a){for(f=a<0,f?(n=l,a=-a,o=d.length):(n=d,r=c,o=l.length),i=Math.max(Math.ceil(g/Qt),o)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=l.length,o=d.length,f=i<o,f&&(o=i),i=0;i<o;i++)if(l[i]!=d[i]){f=l[i]<d[i];break}a=0}for(f&&(n=l,l=d,d=n,e.s=-e.s),o=l.length,i=d.length-o;i>0;--i)l[o++]=0;for(i=d.length;i>a;){if(l[--i]<d[i]){for(s=i;s&&l[--s]===0;)l[s]=tr-1;--l[s],l[i]+=tr}l[i]-=d[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,nn?qt(e,g):e):new p(0)}function uc(t,e,n){var r,i=Dn(t),s=zs(t.d),a=s.length;return e?(n&&(r=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+_o(r):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+_o(-i-1)+s,n&&(r=n-a)>0&&(s+=_o(r))):i>=a?(s+=_o(i+1-a),n&&(r=n-i-1)>0&&(s=s+"."+_o(r))):((r=i+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(s+="."),s+=_o(r))),t.s<0?"-"+s:s}function Mj(t,e){if(t.length>e)return t.length=e,!0}function O5(t){var e,n,r;function i(s){var a=this;if(!(a instanceof i))return new i(s);if(a.constructor=i,s instanceof i){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(ic+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return Dj(a,s.toString())}else if(typeof s!="string")throw Error(ic+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,Vme.test(s))Dj(a,s);else throw Error(ic+s)}if(i.prototype=De,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=O5,i.config=i.set=Ume,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Ume(t){if(!t||typeof t!="object")throw Error(Qi+"Object expected");var e,n,r,i=["precision",1,Hf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Kf(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(ic+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(ic+n+": "+r);return this}var NN=O5(jme);wi=new NN(1);const zt=NN;function Wme(t){return Kme(t)||Hme(t)||qme(t)||Gme()}function Gme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qme(t,e){if(t){if(typeof t=="string")return $$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $$(t,e)}}function Hme(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Kme(t){if(Array.isArray(t))return $$(t)}function $$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Xme=function(e){return e},_5={},R5=function(e){return e===_5},Pj=function(e){return function n(){return arguments.length===0||arguments.length===1&&R5(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},Yme=function t(e,n){return e===1?n:Pj(function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var a=i.filter(function(o){return o!==_5}).length;return a>=e?n.apply(void 0,i):t(e-a,Pj(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var f=i.map(function(d){return R5(d)?l.shift():d});return n.apply(void 0,Wme(f).concat(l))}))})},V0=function(e){return Yme(e.length,e)},E$=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},Zme=V0(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),Qme=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Xme;var i=n.reverse(),s=i[0],a=i.slice(1);return function(){return a.reduce(function(o,l){return l(o)},s.apply(void 0,arguments))}},I$=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},D5=function(e){var n=null,r=null;return function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n&&s.every(function(o,l){return o===n[l]})||(n=s,r=e.apply(void 0,s)),r}};function Jme(t){var e;return t===0?e=1:e=Math.floor(new zt(t).abs().log(10).toNumber())+1,e}function ege(t,e,n){for(var r=new zt(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var tge=V0(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),nge=V0(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),rge=V0(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const U0={rangeStep:ege,getDigitCount:Jme,interpolateNumber:tge,uninterpolateNumber:nge,uninterpolateTruncation:rge};function N$(t){return age(t)||sge(t)||M5(t)||ige()}function ige(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sge(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function age(t){if(Array.isArray(t))return O$(t)}function Sp(t,e){return cge(t)||lge(t,e)||M5(t,e)||oge()}function oge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M5(t,e){if(t){if(typeof t=="string")return O$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O$(t,e)}}function O$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lge(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,s=void 0;try{for(var a=t[Symbol.iterator](),o;!(r=(o=a.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,s=l}finally{try{!r&&a.return!=null&&a.return()}finally{if(i)throw s}}return n}}function cge(t){if(Array.isArray(t))return t}function P5(t){var e=Sp(t,2),n=e[0],r=e[1],i=n,s=r;return n>r&&(i=r,s=n),[i,s]}function F5(t,e,n){if(t.lte(0))return new zt(0);var r=U0.getDigitCount(t.toNumber()),i=new zt(10).pow(r),s=t.div(i),a=r!==1?.05:.1,o=new zt(Math.ceil(s.div(a).toNumber())).add(n).mul(a),l=o.mul(i);return e?l:new zt(Math.ceil(l))}function uge(t,e,n){var r=1,i=new zt(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new zt(10).pow(U0.getDigitCount(t)-1),i=new zt(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new zt(Math.floor(t)))}else t===0?i=new zt(Math.floor((e-1)/2)):n||(i=new zt(Math.floor(t)));var a=Math.floor((e-1)/2),o=Qme(Zme(function(l){return i.add(new zt(l-a).mul(r)).toNumber()}),E$);return o(0,e)}function L5(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new zt(0),tickMin:new zt(0),tickMax:new zt(0)};var s=F5(new zt(e).sub(t).div(n-1),r,i),a;t<=0&&e>=0?a=new zt(0):(a=new zt(t).add(e).div(2),a=a.sub(new zt(a).mod(s)));var o=Math.ceil(a.sub(t).div(s).toNumber()),l=Math.ceil(new zt(e).sub(a).div(s).toNumber()),c=o+l+1;return c>n?L5(t,e,n,r,i+1):(c<n&&(l=e>0?l+(n-c):l,o=e>0?o:o+(n-c)),{step:s,tickMin:a.sub(new zt(o).mul(s)),tickMax:a.add(new zt(l).mul(s))})}function fge(t){var e=Sp(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),o=P5([n,r]),l=Sp(o,2),c=l[0],f=l[1];if(c===-1/0||f===1/0){var d=f===1/0?[c].concat(N$(E$(0,i-1).map(function(){return 1/0}))):[].concat(N$(E$(0,i-1).map(function(){return-1/0})),[f]);return n>r?I$(d):d}if(c===f)return uge(c,i,s);var p=L5(c,f,a,s),g=p.step,y=p.tickMin,x=p.tickMax,b=U0.rangeStep(y,x.add(new zt(.1).mul(g)),g);return n>r?I$(b):b}function hge(t,e){var n=Sp(t,2),r=n[0],i=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=P5([r,i]),o=Sp(a,2),l=o[0],c=o[1];if(l===-1/0||c===1/0)return[r,i];if(l===c)return[l];var f=Math.max(e,2),d=F5(new zt(c).sub(l).div(f-1),s,0),p=[].concat(N$(U0.rangeStep(new zt(l),new zt(c).sub(new zt(.99).mul(d)),d)),[c]);return r>i?I$(p):p}var dge=D5(fge),pge=D5(hge),mge="Invariant failed";function fc(t,e){throw new Error(mge)}var gge=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function ff(t){"@babel/helpers - typeof";return ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ff(t)}function vb(){return vb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vb.apply(this,arguments)}function yge(t,e){return wge(t)||xge(t,e)||bge(t,e)||vge()}function vge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bge(t,e){if(t){if(typeof t=="string")return Fj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fj(t,e)}}function Fj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xge(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function wge(t){if(Array.isArray(t))return t}function Sge(t,e){if(t==null)return{};var n=Cge(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Cge(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Tge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Age(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,j5(r.key),r)}}function kge(t,e,n){return e&&Age(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $ge(t,e,n){return e=bb(e),Ege(t,B5()?Reflect.construct(e,n||[],bb(t).constructor):e.apply(t,n))}function Ege(t,e){if(e&&(ff(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ige(t)}function Ige(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function B5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(B5=function(){return!!t})()}function bb(t){return bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bb(t)}function Nge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_$(t,e)}function _$(t,e){return _$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_$(t,e)}function z5(t,e,n){return e=j5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j5(t){var e=Oge(t,"string");return ff(e)=="symbol"?e:e+""}function Oge(t,e){if(ff(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ff(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var W0=function(t){function e(){return Tge(this,e),$ge(this,e,arguments)}return Nge(e,t),kge(e,[{key:"render",value:function(){var r=this.props,i=r.offset,s=r.layout,a=r.width,o=r.dataKey,l=r.data,c=r.dataPointFormatter,f=r.xAxis,d=r.yAxis,p=Sge(r,gge),g=mt(p,!1);this.props.direction==="x"&&f.type!=="number"&&fc();var y=l.map(function(x){var b=c(x,o),w=b.x,S=b.y,T=b.value,k=b.errorVal;if(!k)return null;var A=[],E,I;if(Array.isArray(k)){var N=yge(k,2);E=N[0],I=N[1]}else E=I=k;if(s==="vertical"){var _=f.scale,R=S+i,O=R+a,F=R-a,z=_(T-E),W=_(T+I);A.push({x1:W,y1:O,x2:W,y2:F}),A.push({x1:z,y1:R,x2:W,y2:R}),A.push({x1:z,y1:O,x2:z,y2:F})}else if(s==="horizontal"){var P=d.scale,M=w+i,j=M-a,V=M+a,q=P(T-E),L=P(T+I);A.push({x1:j,y1:L,x2:V,y2:L}),A.push({x1:M,y1:q,x2:M,y2:L}),A.push({x1:j,y1:q,x2:V,y2:q})}return J.createElement(cn,vb({className:"recharts-errorBar",key:"bar-".concat(A.map(function(G){return"".concat(G.x1,"-").concat(G.x2,"-").concat(G.y1,"-").concat(G.y2)}))},g),A.map(function(G){return J.createElement("line",vb({},G,{key:"line-".concat(G.x1,"-").concat(G.x2,"-").concat(G.y1,"-").concat(G.y2)}))}))});return J.createElement(cn,{className:"recharts-errorBars"},y)}}])}(J.Component);z5(W0,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});z5(W0,"displayName","ErrorBar");function Cp(t){"@babel/helpers - typeof";return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cp(t)}function Lj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Lj(Object(n),!0).forEach(function(r){_ge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _ge(t,e,n){return e=Rge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rge(t){var e=Dge(t,"string");return Cp(e)=="symbol"?e:e+""}function Dge(t,e){if(Cp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Cp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var V5=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,s=e.legendContent,a=xi(n,qu);if(!a)return null;var o=qu.defaultProps,l=o!==void 0?Pl(Pl({},o),a.props):{},c;return a.props&&a.props.payload?c=a.props&&a.props.payload:s==="children"?c=(r||[]).reduce(function(f,d){var p=d.item,g=d.props,y=g.sectors||g.data||[];return f.concat(y.map(function(x){return{type:a.props.iconType||p.props.legendType,value:x.name,color:x.fill,payload:x}}))},[]):c=(r||[]).map(function(f){var d=f.item,p=d.type.defaultProps,g=p!==void 0?Pl(Pl({},p),d.props):{},y=g.dataKey,x=g.name,b=g.legendType,w=g.hide;return{inactive:w,dataKey:y,type:l.iconType||b||"square",color:ON(d),value:x||y,payload:g}}),Pl(Pl(Pl({},l),qu.getWithHeight(a,i)),{},{payload:c,item:a})};function Tp(t){"@babel/helpers - typeof";return Tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tp(t)}function Bj(t){return Lge(t)||Fge(t)||Pge(t)||Mge()}function Mge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pge(t,e){if(t){if(typeof t=="string")return R$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R$(t,e)}}function Fge(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Lge(t){if(Array.isArray(t))return R$(t)}function R$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zj(Object(n),!0).forEach(function(r){Ku(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ku(t,e,n){return e=Bge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bge(t){var e=zge(t,"string");return Tp(e)=="symbol"?e:e+""}function zge(t,e){if(Tp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ai(t,e,n){return yt(t)||yt(e)?n:Hn(e)?Zi(t,e,n):st(e)?e(t):n}function Xd(t,e,n,r){var i=Lme(t,function(o){return Ai(o,e)});if(n==="number"){var s=i.filter(function(o){return Ne(o)||parseFloat(o)});return s.length?[j0(s),Mo(s)]:[1/0,-1/0]}var a=r?i.filter(function(o){return!yt(o)}):i;return a.map(function(o){return Hn(o)||o instanceof Date?o:""})}var jge=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,a=-1,o=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(o<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var l=s.range,c=0;c<o;c++){var f=c>0?i[c-1].coordinate:i[o-1].coordinate,d=i[c].coordinate,p=c>=o-1?i[0].coordinate:i[c+1].coordinate,g=void 0;if(ys(d-f)!==ys(p-d)){var y=[];if(ys(p-d)===ys(l[1]-l[0])){g=p;var x=d+l[1]-l[0];y[0]=Math.min(x,(x+f)/2),y[1]=Math.max(x,(x+f)/2)}else{g=f;var b=p+l[1]-l[0];y[0]=Math.min(d,(b+d)/2),y[1]=Math.max(d,(b+d)/2)}var w=[Math.min(d,(g+d)/2),Math.max(d,(g+d)/2)];if(e>w[0]&&e<=w[1]||e>=y[0]&&e<=y[1]){a=i[c].index;break}}else{var S=Math.min(f,p),T=Math.max(f,p);if(e>(S+d)/2&&e<=(T+d)/2){a=i[c].index;break}}}else for(var k=0;k<o;k++)if(k===0&&e<=(r[k].coordinate+r[k+1].coordinate)/2||k>0&&k<o-1&&e>(r[k].coordinate+r[k-1].coordinate)/2&&e<=(r[k].coordinate+r[k+1].coordinate)/2||k===o-1&&e>(r[k].coordinate+r[k-1].coordinate)/2){a=r[k].index;break}return a},ON=function(e){var n,r=e,i=r.type.displayName,s=(n=e.type)!==null&&n!==void 0&&n.defaultProps?mn(mn({},e.type.defaultProps),e.props):e.props,a=s.stroke,o=s.fill,l;switch(i){case"Line":l=a;break;case"Area":case"Radar":l=a&&a!=="none"?a:o;break;default:l=o;break}return l},Vge=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var a={},o=Object.keys(s),l=0,c=o.length;l<c;l++)for(var f=s[o[l]].stackGroups,d=Object.keys(f),p=0,g=d.length;p<g;p++){var y=f[d[p]],x=y.items,b=y.cateAxisId,w=x.filter(function(I){return Fa(I.type).indexOf("Bar")>=0});if(w&&w.length){var S=w[0].type.defaultProps,T=S!==void 0?mn(mn({},S),w[0].props):w[0].props,k=T.barSize,A=T[b];a[A]||(a[A]=[]);var E=yt(k)?n:k;a[A].push({item:w[0],stackList:w.slice(1),barSize:yt(E)?void 0:cc(E,r,0)})}}return a},Uge=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,s=e.sizeList,a=s===void 0?[]:s,o=e.maxBarSize,l=a.length;if(l<1)return null;var c=cc(n,i,0,!0),f,d=[];if(a[0].barSize===+a[0].barSize){var p=!1,g=i/l,y=a.reduce(function(k,A){return k+A.barSize||0},0);y+=(l-1)*c,y>=i&&(y-=(l-1)*c,c=0),y>=i&&g>0&&(p=!0,g*=.9,y=l*g);var x=(i-y)/2>>0,b={offset:x-c,size:0};f=a.reduce(function(k,A){var E={item:A.item,position:{offset:b.offset+b.size+c,size:p?g:A.barSize}},I=[].concat(Bj(k),[E]);return b=I[I.length-1].position,A.stackList&&A.stackList.length&&A.stackList.forEach(function(N){I.push({item:N,position:b})}),I},d)}else{var w=cc(r,i,0,!0);i-2*w-(l-1)*c<=0&&(c=0);var S=(i-2*w-(l-1)*c)/l;S>1&&(S>>=0);var T=o===+o?Math.min(S,o):S;f=a.reduce(function(k,A,E){var I=[].concat(Bj(k),[{item:A.item,position:{offset:w+(S+c)*E+(S-T)/2,size:T}}]);return A.stackList&&A.stackList.length&&A.stackList.forEach(function(N){I.push({item:N,position:I[I.length-1].position})}),I},d)}return f},Wge=function(e,n,r,i){var s=r.children,a=r.width,o=r.margin,l=a-(o.left||0)-(o.right||0),c=V5({children:s,legendWidth:l});if(c){var f=i||{},d=f.width,p=f.height,g=c.align,y=c.verticalAlign,x=c.layout;if((x==="vertical"||x==="horizontal"&&y==="middle")&&g!=="center"&&Ne(e[g]))return mn(mn({},e),{},Ku({},g,e[g]+(d||0)));if((x==="horizontal"||x==="vertical"&&g==="center")&&y!=="middle"&&Ne(e[y]))return mn(mn({},e),{},Ku({},y,e[y]+(p||0)))}return e},Gge=function(e,n,r){return yt(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},U5=function(e,n,r,i,s){var a=n.props.children,o=bs(a,W0).filter(function(c){return Gge(i,s,c.props.direction)});if(o&&o.length){var l=o.map(function(c){return c.props.dataKey});return e.reduce(function(c,f){var d=Ai(f,r);if(yt(d))return c;var p=Array.isArray(d)?[j0(d),Mo(d)]:[d,d],g=l.reduce(function(y,x){var b=Ai(f,x,0),w=p[0]-Math.abs(Array.isArray(b)?b[0]:b),S=p[1]+Math.abs(Array.isArray(b)?b[1]:b);return[Math.min(w,y[0]),Math.max(S,y[1])]},[1/0,-1/0]);return[Math.min(g[0],c[0]),Math.max(g[1],c[1])]},[1/0,-1/0])}return null},qge=function(e,n,r,i,s){var a=n.map(function(o){return U5(e,o,r,s,i)}).filter(function(o){return!yt(o)});return a&&a.length?a.reduce(function(o,l){return[Math.min(o[0],l[0]),Math.max(o[1],l[1])]},[1/0,-1/0]):null},W5=function(e,n,r,i,s){var a=n.map(function(l){var c=l.props.dataKey;return r==="number"&&c&&U5(e,l,c,i)||Xd(e,c,r,s)});if(r==="number")return a.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var o={};return a.reduce(function(l,c){for(var f=0,d=c.length;f<d;f++)o[c[f]]||(o[c[f]]=!0,l.push(c[f]));return l},[])},G5=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},q5=function(e,n,r,i){if(i)return e.map(function(l){return l.coordinate});var s,a,o=e.map(function(l){return l.coordinate===n&&(s=!0),l.coordinate===r&&(a=!0),l.coordinate});return s||o.push(n),a||o.push(r),o},Da=function(e,n,r){if(!e)return null;var i=e.scale,s=e.duplicateDomain,a=e.type,o=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(n||r)&&a==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?ys(o[0]-o[1])*2*c:c,n&&(e.ticks||e.niceTicks)){var f=(e.ticks||e.niceTicks).map(function(d){var p=s?s.indexOf(d):d;return{coordinate:i(p)+c,value:d,offset:c}});return f.filter(function(d){return!Uf(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,p){return{coordinate:i(d)+c,value:d,index:p,offset:c}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(d){return{coordinate:i(d)+c,value:d,offset:c}}):i.domain().map(function(d,p){return{coordinate:i(d)+c,value:s?s[d]:d,index:p,offset:c}})},Dk=new WeakMap,av=function(e,n){if(typeof n!="function")return e;Dk.has(e)||Dk.set(e,new WeakMap);var r=Dk.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},Hge=function(e,n,r){var i=e.scale,s=e.type,a=e.layout,o=e.axisType;if(i==="auto")return a==="radial"&&o==="radiusAxis"?{scale:mp(),realScaleType:"band"}:a==="radial"&&o==="angleAxis"?{scale:db(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Kd(),realScaleType:"point"}:s==="category"?{scale:mp(),realScaleType:"band"}:{scale:db(),realScaleType:"linear"};if(lc(i)){var l="scale".concat(E0(i));return{scale:(Aj[l]||Kd)(),realScaleType:Aj[l]?l:"point"}}return st(i)?{scale:i}:{scale:Kd(),realScaleType:"point"}},jj=1e-4,Kge=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),s=Math.min(i[0],i[1])-jj,a=Math.max(i[0],i[1])+jj,o=e(n[0]),l=e(n[r-1]);(o<s||o>a||l<s||l>a)&&e.domain([n[0],n[r-1]])}},Xge=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},Yge=function(e,n){if(!n||n.length!==2||!Ne(n[0])||!Ne(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),s=[e[0],e[1]];return(!Ne(e[0])||e[0]<r)&&(s[0]=r),(!Ne(e[1])||e[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<r&&(s[1]=r),s},Zge=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,a=0,o=0;o<n;++o){var l=Uf(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1]):(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1])}},Qge=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,a=0;a<n;++a){var o=Uf(e[a][r][1])?e[a][r][0]:e[a][r][1];o>=0?(e[a][r][0]=s,e[a][r][1]=s+o,s=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},Jge={sign:Zge,expand:Mce,none:nf,silhouette:Pce,wiggle:Fce,positive:Qge},eye=function(e,n,r){var i=n.map(function(o){return o.props.dataKey}),s=Jge[r],a=Dce().keys(i).value(function(o,l){return+Ai(o,l,0)}).order(c$).offset(s);return a(e)},tye=function(e,n,r,i,s,a){if(!e)return null;var o=a?n.reverse():n,l={},c=o.reduce(function(d,p){var g,y=(g=p.type)!==null&&g!==void 0&&g.defaultProps?mn(mn({},p.type.defaultProps),p.props):p.props,x=y.stackId,b=y.hide;if(b)return d;var w=y[r],S=d[w]||{hasStack:!1,stackGroups:{}};if(Hn(x)){var T=S.stackGroups[x]||{numericAxisId:r,cateAxisId:i,items:[]};T.items.push(p),S.hasStack=!0,S.stackGroups[x]=T}else S.stackGroups[cm("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[p]};return mn(mn({},d),{},Ku({},w,S))},l),f={};return Object.keys(c).reduce(function(d,p){var g=c[p];if(g.hasStack){var y={};g.stackGroups=Object.keys(g.stackGroups).reduce(function(x,b){var w=g.stackGroups[b];return mn(mn({},x),{},Ku({},b,{numericAxisId:r,cateAxisId:i,items:w.items,stackedData:eye(e,w.items,s)}))},y)}return mn(mn({},d),{},Ku({},p,g))},f)},nye=function(e,n){var r=n.realScaleType,i=n.type,s=n.tickCount,a=n.originalDomain,o=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(s&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var c=e.domain();if(!c.length)return null;var f=dge(c,s,o);return e.domain([j0(f),Mo(f)]),{niceTicks:f}}if(s&&i==="number"){var d=e.domain(),p=pge(d,s,o);return{niceTicks:p}}return null};function Vj(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,s=t.index,a=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!yt(i[e.dataKey])){var o=Hv(n,"value",i[e.dataKey]);if(o)return o.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var l=Ai(i,yt(a)?e.dataKey:a);return yt(l)?null:e.scale(l)}var Uj=function(e){var n=e.axis,r=e.ticks,i=e.offset,s=e.bandSize,a=e.entry,o=e.index;if(n.type==="category")return r[o]?r[o].coordinate+i:null;var l=Ai(a,n.dataKey,n.domain[o]);return yt(l)?null:n.scale(l)-s/2+i},rye=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return i<=0&&s>=0?0:s<0?s:i}return r[0]},iye=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?mn(mn({},e.type.defaultProps),e.props):e.props,s=i.stackId;if(Hn(s)){var a=n[s];if(a){var o=a.items.indexOf(e);return o>=0?a.stackedData[o]:null}}return null},sye=function(e){return e.reduce(function(n,r){return[j0(r.concat([n[0]]).filter(Ne)),Mo(r.concat([n[1]]).filter(Ne))]},[1/0,-1/0])},H5=function(e,n,r){return Object.keys(e).reduce(function(i,s){var a=e[s],o=a.stackedData,l=o.reduce(function(c,f){var d=sye(f.slice(n,r+1));return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},Wj=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Gj=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,D$=function(e,n,r){if(st(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(Ne(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(Wj.test(e[0])){var s=+Wj.exec(e[0])[1];i[0]=n[0]-s}else st(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(Ne(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(Gj.test(e[1])){var a=+Gj.exec(e[1])[1];i[1]=n[1]+a}else st(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},xb=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var s=sN(n,function(d){return d.coordinate}),a=1/0,o=1,l=s.length;o<l;o++){var c=s[o],f=s[o-1];a=Math.min((c.coordinate||0)-(f.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0},qj=function(e,n,r){return!e||!e.length||xp(e,Zi(r,"type.defaultProps.domain"))?n:e},K5=function(e,n){var r=e.type.defaultProps?mn(mn({},e.type.defaultProps),e.props):e.props,i=r.dataKey,s=r.name,a=r.unit,o=r.formatter,l=r.tooltipType,c=r.chartType,f=r.hide;return mn(mn({},mt(e,!1)),{},{dataKey:i,unit:a,formatter:o,name:s||i,color:ON(e),value:Ai(n,i),type:l,payload:n,chartType:c,hide:f})};function Ap(t){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ap(t)}function Hj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Hj(Object(n),!0).forEach(function(r){aye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aye(t,e,n){return e=oye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oye(t){var e=lye(t,"string");return Ap(e)=="symbol"?e:e+""}function lye(t,e){if(Ap(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ap(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wb=Math.PI/180,cye=function(e){return e*180/Math.PI},pr=function(e,n,r,i){return{x:e+Math.cos(-wb*i)*r,y:n+Math.sin(-wb*i)*r}},uye=function(e,n){var r=e.x,i=e.y,s=n.x,a=n.y;return Math.sqrt(Math.pow(r-s,2)+Math.pow(i-a,2))},fye=function(e,n){var r=e.x,i=e.y,s=n.cx,a=n.cy,o=uye({x:r,y:i},{x:s,y:a});if(o<=0)return{radius:o};var l=(r-s)/o,c=Math.acos(l);return i>a&&(c=2*Math.PI-c),{radius:o,angle:cye(c),angleInRadian:c}},hye=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),s=Math.floor(r/360),a=Math.min(i,s);return{startAngle:n-a*360,endAngle:r-a*360}},dye=function(e,n){var r=n.startAngle,i=n.endAngle,s=Math.floor(r/360),a=Math.floor(i/360),o=Math.min(s,a);return e+o*360},Xj=function(e,n){var r=e.x,i=e.y,s=fye({x:r,y:i},n),a=s.radius,o=s.angle,l=n.innerRadius,c=n.outerRadius;if(a<l||a>c)return!1;if(a===0)return!0;var f=hye(n),d=f.startAngle,p=f.endAngle,g=o,y;if(d<=p){for(;g>p;)g-=360;for(;g<d;)g+=360;y=g>=d&&g<=p}else{for(;g>d;)g-=360;for(;g<p;)g+=360;y=g>=p&&g<=d}return y?Kj(Kj({},n),{},{radius:a,angle:dye(g,n)}):null};function kp(t){"@babel/helpers - typeof";return kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kp(t)}var pye=["offset"];function mye(t){return bye(t)||vye(t)||yye(t)||gye()}function gye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yye(t,e){if(t){if(typeof t=="string")return M$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M$(t,e)}}function vye(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function bye(t){if(Array.isArray(t))return M$(t)}function M$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xye(t,e){if(t==null)return{};var n=wye(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function wye(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Yj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Yj(Object(n),!0).forEach(function(r){Sye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sye(t,e,n){return e=Cye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cye(t){var e=Tye(t,"string");return kp(e)=="symbol"?e:e+""}function Tye(t,e){if(kp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(kp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $p(){return $p=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$p.apply(this,arguments)}var Aye=function(e){var n=e.value,r=e.formatter,i=yt(e.children)?n:e.children;return st(r)?r(i):i},kye=function(e,n){var r=ys(n-e),i=Math.min(Math.abs(n-e),360);return r*i},$ye=function(e,n,r){var i=e.position,s=e.viewBox,a=e.offset,o=e.className,l=s,c=l.cx,f=l.cy,d=l.innerRadius,p=l.outerRadius,g=l.startAngle,y=l.endAngle,x=l.clockWise,b=(d+p)/2,w=kye(g,y),S=w>=0?1:-1,T,k;i==="insideStart"?(T=g+S*a,k=x):i==="insideEnd"?(T=y-S*a,k=!x):i==="end"&&(T=y+S*a,k=x),k=w<=0?k:!k;var A=pr(c,f,b,T),E=pr(c,f,b,T+(k?1:-1)*359),I="M".concat(A.x,",").concat(A.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(k?0:1,`,
    `).concat(E.x,",").concat(E.y),N=yt(e.id)?cm("recharts-radial-line-"):e.id;return J.createElement("text",$p({},r,{dominantBaseline:"central",className:St("recharts-radial-bar-label",o)}),J.createElement("defs",null,J.createElement("path",{id:N,d:I})),J.createElement("textPath",{xlinkHref:"#".concat(N)},n))},Eye=function(e){var n=e.viewBox,r=e.offset,i=e.position,s=n,a=s.cx,o=s.cy,l=s.innerRadius,c=s.outerRadius,f=s.startAngle,d=s.endAngle,p=(f+d)/2;if(i==="outside"){var g=pr(a,o,c+r,p),y=g.x,x=g.y;return{x:y,y:x,textAnchor:y>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"end"};var b=(l+c)/2,w=pr(a,o,b,p),S=w.x,T=w.y;return{x:S,y:T,textAnchor:"middle",verticalAnchor:"middle"}},Iye=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,s=e.position,a=n,o=a.x,l=a.y,c=a.width,f=a.height,d=f>=0?1:-1,p=d*i,g=d>0?"end":"start",y=d>0?"start":"end",x=c>=0?1:-1,b=x*i,w=x>0?"end":"start",S=x>0?"start":"end";if(s==="top"){var T={x:o+c/2,y:l-d*i,textAnchor:"middle",verticalAnchor:g};return Wn(Wn({},T),r?{height:Math.max(l-r.y,0),width:c}:{})}if(s==="bottom"){var k={x:o+c/2,y:l+f+p,textAnchor:"middle",verticalAnchor:y};return Wn(Wn({},k),r?{height:Math.max(r.y+r.height-(l+f),0),width:c}:{})}if(s==="left"){var A={x:o-b,y:l+f/2,textAnchor:w,verticalAnchor:"middle"};return Wn(Wn({},A),r?{width:Math.max(A.x-r.x,0),height:f}:{})}if(s==="right"){var E={x:o+c+b,y:l+f/2,textAnchor:S,verticalAnchor:"middle"};return Wn(Wn({},E),r?{width:Math.max(r.x+r.width-E.x,0),height:f}:{})}var I=r?{width:c,height:f}:{};return s==="insideLeft"?Wn({x:o+b,y:l+f/2,textAnchor:S,verticalAnchor:"middle"},I):s==="insideRight"?Wn({x:o+c-b,y:l+f/2,textAnchor:w,verticalAnchor:"middle"},I):s==="insideTop"?Wn({x:o+c/2,y:l+p,textAnchor:"middle",verticalAnchor:y},I):s==="insideBottom"?Wn({x:o+c/2,y:l+f-p,textAnchor:"middle",verticalAnchor:g},I):s==="insideTopLeft"?Wn({x:o+b,y:l+p,textAnchor:S,verticalAnchor:y},I):s==="insideTopRight"?Wn({x:o+c-b,y:l+p,textAnchor:w,verticalAnchor:y},I):s==="insideBottomLeft"?Wn({x:o+b,y:l+f-p,textAnchor:S,verticalAnchor:g},I):s==="insideBottomRight"?Wn({x:o+c-b,y:l+f-p,textAnchor:w,verticalAnchor:g},I):Vf(s)&&(Ne(s.x)||Kl(s.x))&&(Ne(s.y)||Kl(s.y))?Wn({x:o+cc(s.x,c),y:l+cc(s.y,f),textAnchor:"end",verticalAnchor:"end"},I):Wn({x:o+c/2,y:l+f/2,textAnchor:"middle",verticalAnchor:"middle"},I)},Nye=function(e){return"cx"in e&&Ne(e.cx)};function Ir(t){var e=t.offset,n=e===void 0?5:e,r=xye(t,pye),i=Wn({offset:n},r),s=i.viewBox,a=i.position,o=i.value,l=i.children,c=i.content,f=i.className,d=f===void 0?"":f,p=i.textBreakAll;if(!s||yt(o)&&yt(l)&&!Q.isValidElement(c)&&!st(c))return null;if(Q.isValidElement(c))return Q.cloneElement(c,i);var g;if(st(c)){if(g=Q.createElement(c,i),Q.isValidElement(g))return g}else g=Aye(i);var y=Nye(s),x=mt(i,!0);if(y&&(a==="insideStart"||a==="insideEnd"||a==="end"))return $ye(i,g,x);var b=y?Eye(i):Iye(i);return J.createElement(ab,$p({className:St("recharts-label",d)},x,b,{breakAll:p}),g)}Ir.displayName="Label";var X5=function(e){var n=e.cx,r=e.cy,i=e.angle,s=e.startAngle,a=e.endAngle,o=e.r,l=e.radius,c=e.innerRadius,f=e.outerRadius,d=e.x,p=e.y,g=e.top,y=e.left,x=e.width,b=e.height,w=e.clockWise,S=e.labelViewBox;if(S)return S;if(Ne(x)&&Ne(b)){if(Ne(d)&&Ne(p))return{x:d,y:p,width:x,height:b};if(Ne(g)&&Ne(y))return{x:g,y,width:x,height:b}}return Ne(d)&&Ne(p)?{x:d,y:p,width:0,height:0}:Ne(n)&&Ne(r)?{cx:n,cy:r,startAngle:s||i||0,endAngle:a||i||0,innerRadius:c||0,outerRadius:f||l||o||0,clockWise:w}:e.viewBox?e.viewBox:{}},Oye=function(e,n){return e?e===!0?J.createElement(Ir,{key:"label-implicit",viewBox:n}):Hn(e)?J.createElement(Ir,{key:"label-implicit",viewBox:n,value:e}):Q.isValidElement(e)?e.type===Ir?Q.cloneElement(e,{key:"label-implicit",viewBox:n}):J.createElement(Ir,{key:"label-implicit",content:e,viewBox:n}):st(e)?J.createElement(Ir,{key:"label-implicit",content:e,viewBox:n}):Vf(e)?J.createElement(Ir,$p({viewBox:n},e,{key:"label-implicit"})):null:null},_ye=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,s=X5(e),a=bs(i,Ir).map(function(l,c){return Q.cloneElement(l,{viewBox:n||s,key:"label-".concat(c)})});if(!r)return a;var o=Oye(e.label,n||s);return[o].concat(mye(a))};Ir.parseViewBox=X5;Ir.renderCallByParent=_ye;var Mk,Zj;function Rye(){if(Zj)return Mk;Zj=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return Mk=t,Mk}var Dye=Rye();const Mye=Vt(Dye);function Ep(t){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ep(t)}var Pye=["valueAccessor"],Fye=["data","dataKey","clockWise","id","textBreakAll"];function Lye(t){return Vye(t)||jye(t)||zye(t)||Bye()}function Bye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zye(t,e){if(t){if(typeof t=="string")return P$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P$(t,e)}}function jye(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Vye(t){if(Array.isArray(t))return P$(t)}function P$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Sb(){return Sb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sb.apply(this,arguments)}function Qj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Qj(Object(n),!0).forEach(function(r){Uye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Uye(t,e,n){return e=Wye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wye(t){var e=Gye(t,"string");return Ep(e)=="symbol"?e:e+""}function Gye(t,e){if(Ep(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ep(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eV(t,e){if(t==null)return{};var n=qye(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qye(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Hye=function(e){return Array.isArray(e.value)?Mye(e.value):e.value};function jo(t){var e=t.valueAccessor,n=e===void 0?Hye:e,r=eV(t,Pye),i=r.data,s=r.dataKey,a=r.clockWise,o=r.id,l=r.textBreakAll,c=eV(r,Fye);return!i||!i.length?null:J.createElement(cn,{className:"recharts-label-list"},i.map(function(f,d){var p=yt(s)?n(f,d):Ai(f&&f.payload,s),g=yt(o)?{}:{id:"".concat(o,"-").concat(d)};return J.createElement(Ir,Sb({},mt(f,!0),c,g,{parentViewBox:f.parentViewBox,value:p,textBreakAll:l,viewBox:Ir.parseViewBox(yt(a)?f:Jj(Jj({},f),{},{clockWise:a})),key:"label-".concat(d),index:d}))}))}jo.displayName="LabelList";function Kye(t,e){return t?t===!0?J.createElement(jo,{key:"labelList-implicit",data:e}):J.isValidElement(t)||st(t)?J.createElement(jo,{key:"labelList-implicit",data:e,content:t}):Vf(t)?J.createElement(jo,Sb({data:e},t,{key:"labelList-implicit"})):null:null}function Xye(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=bs(r,jo).map(function(a,o){return Q.cloneElement(a,{data:e,key:"labelList-".concat(o)})});if(!n)return i;var s=Kye(t.label,e);return[s].concat(Lye(i))}jo.renderCallByParent=Xye;function Ip(t){"@babel/helpers - typeof";return Ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ip(t)}function F$(){return F$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},F$.apply(this,arguments)}function tV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tV(Object(n),!0).forEach(function(r){Yye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yye(t,e,n){return e=Zye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zye(t){var e=Qye(t,"string");return Ip(e)=="symbol"?e:e+""}function Qye(t,e){if(Ip(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ip(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Jye=function(e,n){var r=ys(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},ov=function(e){var n=e.cx,r=e.cy,i=e.radius,s=e.angle,a=e.sign,o=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,f=l*(o?1:-1)+i,d=Math.asin(l/f)/wb,p=c?s:s+a*d,g=pr(n,r,f,p),y=pr(n,r,i,p),x=c?s-a*d:s,b=pr(n,r,f*Math.cos(d*wb),x);return{center:g,circleTangency:y,lineTangency:b,theta:d}},Y5=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,a=e.startAngle,o=e.endAngle,l=Jye(a,o),c=a+l,f=pr(n,r,s,a),d=pr(n,r,s,c),p="M ".concat(f.x,",").concat(f.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(a>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(i>0){var g=pr(n,r,i,a),y=pr(n,r,i,c);p+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(a<=c),`,
            `).concat(g.x,",").concat(g.y," Z")}else p+="L ".concat(n,",").concat(r," Z");return p},eve=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,a=e.cornerRadius,o=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,f=e.endAngle,d=ys(f-c),p=ov({cx:n,cy:r,radius:s,angle:c,sign:d,cornerRadius:a,cornerIsExternal:l}),g=p.circleTangency,y=p.lineTangency,x=p.theta,b=ov({cx:n,cy:r,radius:s,angle:f,sign:-d,cornerRadius:a,cornerIsExternal:l}),w=b.circleTangency,S=b.lineTangency,T=b.theta,k=l?Math.abs(c-f):Math.abs(c-f)-x-T;if(k<0)return o?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):Y5({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:c,endAngle:f});var A="M ".concat(y.x,",").concat(y.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(k>180),",").concat(+(d<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(S.x,",").concat(S.y,`
  `);if(i>0){var E=ov({cx:n,cy:r,radius:i,angle:c,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),I=E.circleTangency,N=E.lineTangency,_=E.theta,R=ov({cx:n,cy:r,radius:i,angle:f,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),O=R.circleTangency,F=R.lineTangency,z=R.theta,W=l?Math.abs(c-f):Math.abs(c-f)-_-z;if(W<0&&a===0)return"".concat(A,"L").concat(n,",").concat(r,"Z");A+="L".concat(F.x,",").concat(F.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(W>180),",").concat(+(d>0),",").concat(I.x,",").concat(I.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(N.x,",").concat(N.y,"Z")}else A+="L".concat(n,",").concat(r,"Z");return A},tve={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Z5=function(e){var n=nV(nV({},tve),e),r=n.cx,i=n.cy,s=n.innerRadius,a=n.outerRadius,o=n.cornerRadius,l=n.forceCornerRadius,c=n.cornerIsExternal,f=n.startAngle,d=n.endAngle,p=n.className;if(a<s||f===d)return null;var g=St("recharts-sector",p),y=a-s,x=cc(o,y,0,!0),b;return x>0&&Math.abs(f-d)<360?b=eve({cx:r,cy:i,innerRadius:s,outerRadius:a,cornerRadius:Math.min(x,y/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:f,endAngle:d}):b=Y5({cx:r,cy:i,innerRadius:s,outerRadius:a,startAngle:f,endAngle:d}),J.createElement("path",F$({},mt(n,!0),{className:g,d:b,role:"img"}))};function Np(t){"@babel/helpers - typeof";return Np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Np(t)}function L$(){return L$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},L$.apply(this,arguments)}function rV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function iV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rV(Object(n),!0).forEach(function(r){nve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nve(t,e,n){return e=rve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rve(t){var e=ive(t,"string");return Np(e)=="symbol"?e:e+""}function ive(t,e){if(Np(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Np(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sV={curveBasisClosed:Cce,curveBasisOpen:Tce,curveBasis:Sce,curveBumpX:lce,curveBumpY:cce,curveLinearClosed:Ace,curveLinear:N0,curveMonotoneX:kce,curveMonotoneY:$ce,curveNatural:Ece,curveStep:Ice,curveStepAfter:Oce,curveStepBefore:Nce},lv=function(e){return e.x===+e.x&&e.y===+e.y},Td=function(e){return e.x},Ad=function(e){return e.y},sve=function(e,n){if(st(e))return e;var r="curve".concat(E0(e));return(r==="curveMonotone"||r==="curveBump")&&n?sV["".concat(r).concat(n==="vertical"?"Y":"X")]:sV[r]||N0},ave=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,s=i===void 0?[]:i,a=e.baseLine,o=e.layout,l=e.connectNulls,c=l===void 0?!1:l,f=sve(r,o),d=c?s.filter(function(x){return lv(x)}):s,p;if(Array.isArray(a)){var g=c?a.filter(function(x){return lv(x)}):a,y=d.map(function(x,b){return iV(iV({},x),{},{base:g[b]})});return o==="vertical"?p=Jy().y(Ad).x1(Td).x0(function(x){return x.base.x}):p=Jy().x(Td).y1(Ad).y0(function(x){return x.base.y}),p.defined(lv).curve(f),p(y)}return o==="vertical"&&Ne(a)?p=Jy().y(Ad).x1(Td).x0(a):Ne(a)?p=Jy().x(Td).y1(Ad).y0(a):p=t6().x(Td).y(Ad),p.defined(lv).curve(f),p(d)},Yd=function(e){var n=e.className,r=e.points,i=e.path,s=e.pathRef;if((!r||!r.length)&&!i)return null;var a=r&&r.length?ave(e):i;return J.createElement("path",L$({},mt(e,!1),Kv(e),{className:St("recharts-curve",n),d:a,ref:s}))},Pk={exports:{}},Fk,aV;function ove(){if(aV)return Fk;aV=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Fk=t,Fk}var Lk,oV;function lve(){if(oV)return Lk;oV=1;var t=ove();function e(){}function n(){}return n.resetWarningCache=e,Lk=function(){function r(a,o,l,c,f,d){if(d!==t){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},Lk}var lV;function cve(){return lV||(lV=1,Pk.exports=lve()()),Pk.exports}var uve=cve();const Ot=Vt(uve);var fve=Object.getOwnPropertyNames,hve=Object.getOwnPropertySymbols,dve=Object.prototype.hasOwnProperty;function cV(t,e){return function(r,i,s){return t(r,i,s)&&e(r,i,s)}}function cv(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var s=i.cache,a=s.get(n),o=s.get(r);if(a&&o)return a===r&&o===n;s.set(n,r),s.set(r,n);var l=t(n,r,i);return s.delete(n),s.delete(r),l}}function uV(t){return fve(t).concat(hve(t))}var pve=Object.hasOwn||function(t,e){return dve.call(t,e)};function Nc(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var mve="__v",gve="__o",yve="_owner",fV=Object.getOwnPropertyDescriptor,hV=Object.keys;function vve(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function bve(t,e){return Nc(t.getTime(),e.getTime())}function xve(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function wve(t,e){return t===e}function dV(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),s=t.entries(),a,o,l=0;(a=s.next())&&!a.done;){for(var c=e.entries(),f=!1,d=0;(o=c.next())&&!o.done;){if(i[d]){d++;continue}var p=a.value,g=o.value;if(n.equals(p[0],g[0],l,d,t,e,n)&&n.equals(p[1],g[1],p[0],g[0],t,e,n)){f=i[d]=!0;break}d++}if(!f)return!1;l++}return!0}var Sve=Nc;function Cve(t,e,n){var r=hV(t),i=r.length;if(hV(e).length!==i)return!1;for(;i-- >0;)if(!Q5(t,e,n,r[i]))return!1;return!0}function kd(t,e,n){var r=uV(t),i=r.length;if(uV(e).length!==i)return!1;for(var s,a,o;i-- >0;)if(s=r[i],!Q5(t,e,n,s)||(a=fV(t,s),o=fV(e,s),(a||o)&&(!a||!o||a.configurable!==o.configurable||a.enumerable!==o.enumerable||a.writable!==o.writable)))return!1;return!0}function Tve(t,e){return Nc(t.valueOf(),e.valueOf())}function Ave(t,e){return t.source===e.source&&t.flags===e.flags}function pV(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),s=t.values(),a,o;(a=s.next())&&!a.done;){for(var l=e.values(),c=!1,f=0;(o=l.next())&&!o.done;){if(!i[f]&&n.equals(a.value,o.value,a.value,o.value,t,e,n)){c=i[f]=!0;break}f++}if(!c)return!1}return!0}function kve(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function $ve(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function Q5(t,e,n,r){return(r===yve||r===gve||r===mve)&&(t.$$typeof||e.$$typeof)?!0:pve(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var Eve="[object Arguments]",Ive="[object Boolean]",Nve="[object Date]",Ove="[object Error]",_ve="[object Map]",Rve="[object Number]",Dve="[object Object]",Mve="[object RegExp]",Pve="[object Set]",Fve="[object String]",Lve="[object URL]",Bve=Array.isArray,mV=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,gV=Object.assign,zve=Object.prototype.toString.call.bind(Object.prototype.toString);function jve(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,s=t.areMapsEqual,a=t.areNumbersEqual,o=t.areObjectsEqual,l=t.arePrimitiveWrappersEqual,c=t.areRegExpsEqual,f=t.areSetsEqual,d=t.areTypedArraysEqual,p=t.areUrlsEqual;return function(y,x,b){if(y===x)return!0;if(y==null||x==null)return!1;var w=typeof y;if(w!==typeof x)return!1;if(w!=="object")return w==="number"?a(y,x,b):w==="function"?i(y,x,b):!1;var S=y.constructor;if(S!==x.constructor)return!1;if(S===Object)return o(y,x,b);if(Bve(y))return e(y,x,b);if(mV!=null&&mV(y))return d(y,x,b);if(S===Date)return n(y,x,b);if(S===RegExp)return c(y,x,b);if(S===Map)return s(y,x,b);if(S===Set)return f(y,x,b);var T=zve(y);return T===Nve?n(y,x,b):T===Mve?c(y,x,b):T===_ve?s(y,x,b):T===Pve?f(y,x,b):T===Dve?typeof y.then!="function"&&typeof x.then!="function"&&o(y,x,b):T===Lve?p(y,x,b):T===Ove?r(y,x,b):T===Eve?o(y,x,b):T===Ive||T===Rve||T===Fve?l(y,x,b):!1}}function Vve(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?kd:vve,areDatesEqual:bve,areErrorsEqual:xve,areFunctionsEqual:wve,areMapsEqual:r?cV(dV,kd):dV,areNumbersEqual:Sve,areObjectsEqual:r?kd:Cve,arePrimitiveWrappersEqual:Tve,areRegExpsEqual:Ave,areSetsEqual:r?cV(pV,kd):pV,areTypedArraysEqual:r?kd:kve,areUrlsEqual:$ve};if(n&&(i=gV({},i,n(i))),e){var s=cv(i.areArraysEqual),a=cv(i.areMapsEqual),o=cv(i.areObjectsEqual),l=cv(i.areSetsEqual);i=gV({},i,{areArraysEqual:s,areMapsEqual:a,areObjectsEqual:o,areSetsEqual:l})}return i}function Uve(t){return function(e,n,r,i,s,a,o){return t(e,n,o)}}function Wve(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,s=t.strict;if(r)return function(l,c){var f=r(),d=f.cache,p=d===void 0?e?new WeakMap:void 0:d,g=f.meta;return n(l,c,{cache:p,equals:i,meta:g,strict:s})};if(e)return function(l,c){return n(l,c,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var a={cache:void 0,equals:i,meta:void 0,strict:s};return function(l,c){return n(l,c,a)}}var Gve=al();al({strict:!0});al({circular:!0});al({circular:!0,strict:!0});al({createInternalComparator:function(){return Nc}});al({strict:!0,createInternalComparator:function(){return Nc}});al({circular:!0,createInternalComparator:function(){return Nc}});al({circular:!0,createInternalComparator:function(){return Nc},strict:!0});function al(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,s=t.strict,a=s===void 0?!1:s,o=Vve(t),l=jve(o),c=r?r(l):Uve(l);return Wve({circular:n,comparator:l,createState:i,equals:c,strict:a})}function qve(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function yV(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(s){n<0&&(n=s),s-n>e?(t(s),n=-1):qve(i)};requestAnimationFrame(r)}function B$(t){"@babel/helpers - typeof";return B$=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B$(t)}function Hve(t){return Zve(t)||Yve(t)||Xve(t)||Kve()}function Kve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xve(t,e){if(t){if(typeof t=="string")return vV(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vV(t,e)}}function vV(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Yve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Zve(t){if(Array.isArray(t))return t}function Qve(){var t={},e=function(){return null},n=!1,r=function i(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var a=s,o=Hve(a),l=o[0],c=o.slice(1);if(typeof l=="number"){yV(i.bind(null,c),l);return}i(l),yV(i.bind(null,c));return}B$(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,r(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function Op(t){"@babel/helpers - typeof";return Op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Op(t)}function bV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bV(Object(n),!0).forEach(function(r){J5(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function J5(t,e,n){return e=Jve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jve(t){var e=ebe(t,"string");return Op(e)==="symbol"?e:String(e)}function ebe(t,e){if(Op(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Op(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tbe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(s){return i.includes(s)})})},nbe=function(e){return e},rbe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Zd=function(e,n){return Object.keys(n).reduce(function(r,i){return xV(xV({},r),{},J5({},i,e(i,n[i])))},{})},wV=function(e,n,r){return e.map(function(i){return"".concat(rbe(i)," ").concat(n,"ms ").concat(r)}).join(",")};function ibe(t,e){return obe(t)||abe(t,e)||e8(t,e)||sbe()}function sbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function abe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function obe(t){if(Array.isArray(t))return t}function lbe(t){return fbe(t)||ube(t)||e8(t)||cbe()}function cbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e8(t,e){if(t){if(typeof t=="string")return z$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z$(t,e)}}function ube(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function fbe(t){if(Array.isArray(t))return z$(t)}function z$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Cb=1e-4,t8=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},n8=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},SV=function(e,n){return function(r){var i=t8(e,n);return n8(i,r)}},hbe=function(e,n){return function(r){var i=t8(e,n),s=[].concat(lbe(i.map(function(a,o){return a*o}).slice(1)),[0]);return n8(s,r)}},CV=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],s=n[1],a=n[2],o=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,s=0,a=1,o=1;break;case"ease":i=.25,s=.1,a=.25,o=1;break;case"ease-in":i=.42,s=0,a=1,o=1;break;case"ease-out":i=.42,s=0,a=.58,o=1;break;case"ease-in-out":i=0,s=0,a=.58,o=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(b){return parseFloat(b)}),f=ibe(c,4);i=f[0],s=f[1],a=f[2],o=f[3]}}}var d=SV(i,a),p=SV(s,o),g=hbe(i,a),y=function(w){return w>1?1:w<0?0:w},x=function(w){for(var S=w>1?1:w,T=S,k=0;k<8;++k){var A=d(T)-S,E=g(T);if(Math.abs(A-S)<Cb||E<Cb)return p(T);T=y(T-A/E)}return p(T)};return x.isStepper=!1,x},dbe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,s=i===void 0?8:i,a=e.dt,o=a===void 0?17:a,l=function(f,d,p){var g=-(f-d)*r,y=p*s,x=p+(g-y)*o/1e3,b=p*o/1e3+f;return Math.abs(b-d)<Cb&&Math.abs(x)<Cb?[d,0]:[b,x]};return l.isStepper=!0,l.dt=o,l},pbe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return CV(i);case"spring":return dbe();default:if(i.split("(")[0]==="cubic-bezier")return CV(i)}return typeof i=="function"?i:null};function _p(t){"@babel/helpers - typeof";return _p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_p(t)}function TV(t){return ybe(t)||gbe(t)||r8(t)||mbe()}function mbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gbe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ybe(t){if(Array.isArray(t))return V$(t)}function AV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AV(Object(n),!0).forEach(function(r){j$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function j$(t,e,n){return e=vbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vbe(t){var e=bbe(t,"string");return _p(e)==="symbol"?e:String(e)}function bbe(t,e){if(_p(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_p(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xbe(t,e){return Cbe(t)||Sbe(t,e)||r8(t,e)||wbe()}function wbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r8(t,e){if(t){if(typeof t=="string")return V$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V$(t,e)}}function V$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Sbe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function Cbe(t){if(Array.isArray(t))return t}var Tb=function(e,n,r){return e+(n-e)*r},U$=function(e){var n=e.from,r=e.to;return n!==r},Tbe=function t(e,n,r){var i=Zd(function(s,a){if(U$(a)){var o=e(a.from,a.to,a.velocity),l=xbe(o,2),c=l[0],f=l[1];return hr(hr({},a),{},{from:c,velocity:f})}return a},n);return r<1?Zd(function(s,a){return U$(a)?hr(hr({},a),{},{velocity:Tb(a.velocity,i[s].velocity,r),from:Tb(a.from,i[s].from,r)}):a},n):t(e,i,r-1)};const Abe=function(t,e,n,r,i){var s=tbe(t,e),a=s.reduce(function(b,w){return hr(hr({},b),{},j$({},w,[t[w],e[w]]))},{}),o=s.reduce(function(b,w){return hr(hr({},b),{},j$({},w,{from:t[w],velocity:0,to:e[w]}))},{}),l=-1,c,f,d=function(){return null},p=function(){return Zd(function(w,S){return S.from},o)},g=function(){return!Object.values(o).filter(U$).length},y=function(w){c||(c=w);var S=w-c,T=S/n.dt;o=Tbe(n,o,T),i(hr(hr(hr({},t),e),p())),c=w,g()||(l=requestAnimationFrame(d))},x=function(w){f||(f=w);var S=(w-f)/r,T=Zd(function(A,E){return Tb.apply(void 0,TV(E).concat([n(S)]))},a);if(i(hr(hr(hr({},t),e),T)),S<1)l=requestAnimationFrame(d);else{var k=Zd(function(A,E){return Tb.apply(void 0,TV(E).concat([n(1)]))},a);i(hr(hr(hr({},t),e),k))}};return d=n.isStepper?y:x,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function hf(t){"@babel/helpers - typeof";return hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hf(t)}var kbe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function $be(t,e){if(t==null)return{};var n=Ebe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ebe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Bk(t){return _be(t)||Obe(t)||Nbe(t)||Ibe()}function Ibe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nbe(t,e){if(t){if(typeof t=="string")return W$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W$(t,e)}}function Obe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _be(t){if(Array.isArray(t))return W$(t)}function W$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function kV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kV(Object(n),!0).forEach(function(r){Md(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Md(t,e,n){return e=i8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dbe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i8(r.key),r)}}function Mbe(t,e,n){return e&&Dbe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function i8(t){var e=Pbe(t,"string");return hf(e)==="symbol"?e:String(e)}function Pbe(t,e){if(hf(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hf(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&G$(t,e)}function G$(t,e){return G$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},G$(t,e)}function Lbe(t){var e=Bbe();return function(){var r=Ab(t),i;if(e){var s=Ab(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return q$(this,i)}}function q$(t,e){if(e&&(hf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H$(t)}function H$(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bbe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ab(t){return Ab=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ab(t)}var qa=function(t){Fbe(n,t);var e=Lbe(n);function n(r,i){var s;Rbe(this,n),s=e.call(this,r,i);var a=s.props,o=a.isActive,l=a.attributeName,c=a.from,f=a.to,d=a.steps,p=a.children,g=a.duration;if(s.handleStyleChange=s.handleStyleChange.bind(H$(s)),s.changeStyle=s.changeStyle.bind(H$(s)),!o||g<=0)return s.state={style:{}},typeof p=="function"&&(s.state={style:f}),q$(s);if(d&&d.length)s.state={style:d[0].style};else if(c){if(typeof p=="function")return s.state={style:c},q$(s);s.state={style:l?Md({},l,c):c}}else s.state={style:{}};return s}return Mbe(n,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,a=i.canBegin;this.mounted=!0,!(!s||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,a=s.isActive,o=s.canBegin,l=s.attributeName,c=s.shouldReAnimate,f=s.to,d=s.from,p=this.state.style;if(o){if(!a){var g={style:l?Md({},l,f):f};this.state&&p&&(l&&p[l]!==f||!l&&p!==f)&&this.setState(g);return}if(!(Gve(i.to,f)&&i.canBegin&&i.isActive)){var y=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var x=y||c?d:i.to;if(this.state&&p){var b={style:l?Md({},l,x):x};(l&&p[l]!==x||!l&&p!==x)&&this.setState(b)}this.runAnimation(cs(cs({},this.props),{},{from:x,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,a=i.from,o=i.to,l=i.duration,c=i.easing,f=i.begin,d=i.onAnimationEnd,p=i.onAnimationStart,g=Abe(a,o,pbe(c),l,this.changeStyle),y=function(){s.stopJSAnimation=g()};this.manager.start([p,f,y,l,d])}},{key:"runStepAnimation",value:function(i){var s=this,a=i.steps,o=i.begin,l=i.onAnimationStart,c=a[0],f=c.style,d=c.duration,p=d===void 0?0:d,g=function(x,b,w){if(w===0)return x;var S=b.duration,T=b.easing,k=T===void 0?"ease":T,A=b.style,E=b.properties,I=b.onAnimationEnd,N=w>0?a[w-1]:b,_=E||Object.keys(A);if(typeof k=="function"||k==="spring")return[].concat(Bk(x),[s.runJSAnimation.bind(s,{from:N.style,to:A,duration:S,easing:k}),S]);var R=wV(_,S,k),O=cs(cs(cs({},N.style),A),{},{transition:R});return[].concat(Bk(x),[O,S,I]).filter(nbe)};return this.manager.start([l].concat(Bk(a.reduce(g,[f,Math.max(p,o)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=Qve());var s=i.begin,a=i.duration,o=i.attributeName,l=i.to,c=i.easing,f=i.onAnimationStart,d=i.onAnimationEnd,p=i.steps,g=i.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof c=="function"||typeof g=="function"||c==="spring"){this.runJSAnimation(i);return}if(p.length>1){this.runStepAnimation(i);return}var x=o?Md({},o,l):l,b=wV(Object.keys(x),a,c);y.start([f,s,cs(cs({},x),{},{transition:b}),a,d])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var o=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=$be(i,kbe),c=Q.Children.count(s),f=this.state.style;if(typeof s=="function")return s(f);if(!o||c===0||a<=0)return s;var d=function(g){var y=g.props,x=y.style,b=x===void 0?{}:x,w=y.className,S=Q.cloneElement(g,cs(cs({},l),{},{style:cs(cs({},b),f),className:w}));return S};return c===1?d(Q.Children.only(s)):J.createElement("div",null,Q.Children.map(s,function(p){return d(p)}))}}]),n}(Q.PureComponent);qa.displayName="Animate";qa.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};qa.propTypes={from:Ot.oneOfType([Ot.object,Ot.string]),to:Ot.oneOfType([Ot.object,Ot.string]),attributeName:Ot.string,duration:Ot.number,begin:Ot.number,easing:Ot.oneOfType([Ot.string,Ot.func]),steps:Ot.arrayOf(Ot.shape({duration:Ot.number.isRequired,style:Ot.object.isRequired,easing:Ot.oneOfType([Ot.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ot.func]),properties:Ot.arrayOf("string"),onAnimationEnd:Ot.func})),children:Ot.oneOfType([Ot.node,Ot.func]),isActive:Ot.bool,canBegin:Ot.bool,onAnimationEnd:Ot.func,shouldReAnimate:Ot.bool,onAnimationStart:Ot.func,onAnimationReStart:Ot.func};function Rp(t){"@babel/helpers - typeof";return Rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rp(t)}function kb(){return kb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kb.apply(this,arguments)}function zbe(t,e){return Wbe(t)||Ube(t,e)||Vbe(t,e)||jbe()}function jbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vbe(t,e){if(t){if(typeof t=="string")return $V(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $V(t,e)}}function $V(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ube(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function Wbe(t){if(Array.isArray(t))return t}function EV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function IV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EV(Object(n),!0).forEach(function(r){Gbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gbe(t,e,n){return e=qbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qbe(t){var e=Hbe(t,"string");return Rp(e)=="symbol"?e:e+""}function Hbe(t,e){if(Rp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NV=function(e,n,r,i,s){var a=Math.min(Math.abs(r)/2,Math.abs(i)/2),o=i>=0?1:-1,l=r>=0?1:-1,c=i>=0&&r>=0||i<0&&r<0?1:0,f;if(a>0&&s instanceof Array){for(var d=[0,0,0,0],p=0,g=4;p<g;p++)d[p]=s[p]>a?a:s[p];f="M".concat(e,",").concat(n+o*d[0]),d[0]>0&&(f+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(n)),f+="L ".concat(e+r-l*d[1],",").concat(n),d[1]>0&&(f+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(n+o*d[1])),f+="L ".concat(e+r,",").concat(n+i-o*d[2]),d[2]>0&&(f+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-l*d[2],",").concat(n+i)),f+="L ".concat(e+l*d[3],",").concat(n+i),d[3]>0&&(f+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(n+i-o*d[3])),f+="Z"}else if(a>0&&s===+s&&s>0){var y=Math.min(a,s);f="M ".concat(e,",").concat(n+o*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(e+l*y,",").concat(n,`
            L `).concat(e+r-l*y,",").concat(n,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(e+r,",").concat(n+o*y,`
            L `).concat(e+r,",").concat(n+i-o*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(e+r-l*y,",").concat(n+i,`
            L `).concat(e+l*y,",").concat(n+i,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(e,",").concat(n+i-o*y," Z")}else f="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return f},Kbe=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,s=n.x,a=n.y,o=n.width,l=n.height;if(Math.abs(o)>0&&Math.abs(l)>0){var c=Math.min(s,s+o),f=Math.max(s,s+o),d=Math.min(a,a+l),p=Math.max(a,a+l);return r>=c&&r<=f&&i>=d&&i<=p}return!1},Xbe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},_N=function(e){var n=IV(IV({},Xbe),e),r=Q.useRef(),i=Q.useState(-1),s=zbe(i,2),a=s[0],o=s[1];Q.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var k=r.current.getTotalLength();k&&o(k)}catch{}},[]);var l=n.x,c=n.y,f=n.width,d=n.height,p=n.radius,g=n.className,y=n.animationEasing,x=n.animationDuration,b=n.animationBegin,w=n.isAnimationActive,S=n.isUpdateAnimationActive;if(l!==+l||c!==+c||f!==+f||d!==+d||f===0||d===0)return null;var T=St("recharts-rectangle",g);return S?J.createElement(qa,{canBegin:a>0,from:{width:f,height:d,x:l,y:c},to:{width:f,height:d,x:l,y:c},duration:x,animationEasing:y,isActive:S},function(k){var A=k.width,E=k.height,I=k.x,N=k.y;return J.createElement(qa,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:x,isActive:w,easing:y},J.createElement("path",kb({},mt(n,!0),{className:T,d:NV(I,N,A,E,p),ref:r})))}):J.createElement("path",kb({},mt(n,!0),{className:T,d:NV(l,c,f,d,p)}))};function K$(){return K$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},K$.apply(this,arguments)}var RN=function(e){var n=e.cx,r=e.cy,i=e.r,s=e.className,a=St("recharts-dot",s);return n===+n&&r===+r&&i===+i?J.createElement("circle",K$({},mt(e,!1),Kv(e),{className:a,cx:n,cy:r,r:i})):null};function Dp(t){"@babel/helpers - typeof";return Dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dp(t)}var Ybe=["x","y","top","left","width","height","className"];function X$(){return X$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},X$.apply(this,arguments)}function OV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zbe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OV(Object(n),!0).forEach(function(r){Qbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qbe(t,e,n){return e=Jbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jbe(t){var e=e0e(t,"string");return Dp(e)=="symbol"?e:e+""}function e0e(t,e){if(Dp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function t0e(t,e){if(t==null)return{};var n=n0e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function n0e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var r0e=function(e,n,r,i,s,a){return"M".concat(e,",").concat(s,"v").concat(i,"M").concat(a,",").concat(n,"h").concat(r)},i0e=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,s=i===void 0?0:i,a=e.top,o=a===void 0?0:a,l=e.left,c=l===void 0?0:l,f=e.width,d=f===void 0?0:f,p=e.height,g=p===void 0?0:p,y=e.className,x=t0e(e,Ybe),b=Zbe({x:r,y:s,top:o,left:c,width:d,height:g},x);return!Ne(r)||!Ne(s)||!Ne(d)||!Ne(g)||!Ne(o)||!Ne(c)?null:J.createElement("path",X$({},mt(b,!0),{className:St("recharts-cross",y),d:r0e(r,s,d,g,o,c)}))},zk,_V;function s0e(){if(_V)return zk;_V=1;var t=T6(),e=t(Object.getPrototypeOf,Object);return zk=e,zk}var jk,RV;function a0e(){if(RV)return jk;RV=1;var t=Qa(),e=s0e(),n=Ja(),r="[object Object]",i=Function.prototype,s=Object.prototype,a=i.toString,o=s.hasOwnProperty,l=a.call(Object);function c(f){if(!n(f)||t(f)!=r)return!1;var d=e(f);if(d===null)return!0;var p=o.call(d,"constructor")&&d.constructor;return typeof p=="function"&&p instanceof p&&a.call(p)==l}return jk=c,jk}var o0e=a0e();const l0e=Vt(o0e);var Vk,DV;function c0e(){if(DV)return Vk;DV=1;var t=Qa(),e=Ja(),n="[object Boolean]";function r(i){return i===!0||i===!1||e(i)&&t(i)==n}return Vk=r,Vk}var u0e=c0e();const f0e=Vt(u0e);function Mp(t){"@babel/helpers - typeof";return Mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mp(t)}function $b(){return $b=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$b.apply(this,arguments)}function h0e(t,e){return g0e(t)||m0e(t,e)||p0e(t,e)||d0e()}function d0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p0e(t,e){if(t){if(typeof t=="string")return MV(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MV(t,e)}}function MV(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function m0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function g0e(t){if(Array.isArray(t))return t}function PV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PV(Object(n),!0).forEach(function(r){y0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function y0e(t,e,n){return e=v0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v0e(t){var e=b0e(t,"string");return Mp(e)=="symbol"?e:e+""}function b0e(t,e){if(Mp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Mp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var LV=function(e,n,r,i,s){var a=r-i,o;return o="M ".concat(e,",").concat(n),o+="L ".concat(e+r,",").concat(n),o+="L ".concat(e+r-a/2,",").concat(n+s),o+="L ".concat(e+r-a/2-i,",").concat(n+s),o+="L ".concat(e,",").concat(n," Z"),o},x0e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},w0e=function(e){var n=FV(FV({},x0e),e),r=Q.useRef(),i=Q.useState(-1),s=h0e(i,2),a=s[0],o=s[1];Q.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var T=r.current.getTotalLength();T&&o(T)}catch{}},[]);var l=n.x,c=n.y,f=n.upperWidth,d=n.lowerWidth,p=n.height,g=n.className,y=n.animationEasing,x=n.animationDuration,b=n.animationBegin,w=n.isUpdateAnimationActive;if(l!==+l||c!==+c||f!==+f||d!==+d||p!==+p||f===0&&d===0||p===0)return null;var S=St("recharts-trapezoid",g);return w?J.createElement(qa,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:p,x:l,y:c},to:{upperWidth:f,lowerWidth:d,height:p,x:l,y:c},duration:x,animationEasing:y,isActive:w},function(T){var k=T.upperWidth,A=T.lowerWidth,E=T.height,I=T.x,N=T.y;return J.createElement(qa,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:x,easing:y},J.createElement("path",$b({},mt(n,!0),{className:S,d:LV(I,N,k,A,E),ref:r})))}):J.createElement("g",null,J.createElement("path",$b({},mt(n,!0),{className:S,d:LV(l,c,f,d,p)})))},S0e=["option","shapeType","propTransformer","activeClassName","isActive"];function Pp(t){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pp(t)}function C0e(t,e){if(t==null)return{};var n=T0e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function T0e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function BV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Eb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BV(Object(n),!0).forEach(function(r){A0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function A0e(t,e,n){return e=k0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k0e(t){var e=$0e(t,"string");return Pp(e)=="symbol"?e:e+""}function $0e(t,e){if(Pp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function E0e(t,e){return Eb(Eb({},e),t)}function I0e(t,e){return t==="symbols"}function zV(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return J.createElement(_N,n);case"trapezoid":return J.createElement(w0e,n);case"sector":return J.createElement(Z5,n);case"symbols":if(I0e(e))return J.createElement(ZI,n);break;default:return null}}function N0e(t){return Q.isValidElement(t)?t.props:t}function O0e(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?E0e:r,s=t.activeClassName,a=s===void 0?"recharts-active-shape":s,o=t.isActive,l=C0e(t,S0e),c;if(Q.isValidElement(e))c=Q.cloneElement(e,Eb(Eb({},l),N0e(e)));else if(st(e))c=e(l);else if(l0e(e)&&!f0e(e)){var f=i(e,l);c=J.createElement(zV,{shapeType:n,elementProps:f})}else{var d=l;c=J.createElement(zV,{shapeType:n,elementProps:d})}return o?J.createElement(cn,{className:a},c):c}function G0(t,e){return e!=null&&"trapezoids"in t.props}function q0(t,e){return e!=null&&"sectors"in t.props}function Fp(t,e){return e!=null&&"points"in t.props}function _0e(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,s=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&s}function R0e(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function D0e(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function M0e(t,e){var n;return G0(t,e)?n=_0e:q0(t,e)?n=R0e:Fp(t,e)&&(n=D0e),n}function P0e(t,e){var n;return G0(t,e)?n="trapezoids":q0(t,e)?n="sectors":Fp(t,e)&&(n="points"),n}function F0e(t,e){if(G0(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(q0(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Fp(t,e)?e.payload:{}}function L0e(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=P0e(n,e),s=F0e(n,e),a=r.filter(function(l,c){var f=xp(s,l),d=n.props[i].filter(function(y){var x=M0e(n,e);return x(y,e)}),p=n.props[i].indexOf(d[d.length-1]),g=c===p;return f&&g}),o=r.indexOf(a[a.length-1]);return o}var Uk,jV;function B0e(){if(jV)return Uk;jV=1;var t=Math.ceil,e=Math.max;function n(r,i,s,a){for(var o=-1,l=e(t((i-r)/(s||1)),0),c=Array(l);l--;)c[a?l:++o]=r,r+=s;return c}return Uk=n,Uk}var Wk,VV;function s8(){if(VV)return Wk;VV=1;var t=z6(),e=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-1/0){var s=i<0?-1:1;return s*n}return i===i?i:0}return Wk=r,Wk}var Gk,UV;function z0e(){if(UV)return Gk;UV=1;var t=B0e(),e=D0(),n=s8();function r(i){return function(s,a,o){return o&&typeof o!="number"&&e(s,a,o)&&(a=o=void 0),s=n(s),a===void 0?(a=s,s=0):a=n(a),o=o===void 0?s<a?1:-1:n(o),t(s,a,o,i)}}return Gk=r,Gk}var qk,WV;function j0e(){if(WV)return qk;WV=1;var t=z0e(),e=t();return qk=e,qk}var V0e=j0e();const Ib=Vt(V0e);function Lp(t){"@babel/helpers - typeof";return Lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lp(t)}function GV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GV(Object(n),!0).forEach(function(r){a8(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function a8(t,e,n){return e=U0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U0e(t){var e=W0e(t,"string");return Lp(e)=="symbol"?e:e+""}function W0e(t,e){if(Lp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var G0e=["Webkit","Moz","O","ms"],q0e=function(e,n){var r=e.replace(/(\w)/,function(s){return s.toUpperCase()}),i=G0e.reduce(function(s,a){return qV(qV({},s),{},a8({},a+r,n))},{});return i[e]=n,i};function df(t){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},df(t)}function Nb(){return Nb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nb.apply(this,arguments)}function HV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Hk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HV(Object(n),!0).forEach(function(r){bi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function H0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KV(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l8(r.key),r)}}function K0e(t,e,n){return e&&KV(t.prototype,e),n&&KV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function X0e(t,e,n){return e=Ob(e),Y0e(t,o8()?Reflect.construct(e,n||[],Ob(t).constructor):e.apply(t,n))}function Y0e(t,e){if(e&&(df(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z0e(t)}function Z0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(o8=function(){return!!t})()}function Ob(t){return Ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ob(t)}function Q0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Y$(t,e)}function Y$(t,e){return Y$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Y$(t,e)}function bi(t,e,n){return e=l8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l8(t){var e=J0e(t,"string");return df(e)=="symbol"?e:e+""}function J0e(t,e){if(df(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(df(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var exe=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,s=e.x,a=e.width,o=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,c=Kd().domain(Ib(0,l)).range([s,s+a-o]),f=c.domain().map(function(d){return c(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(r),endX:c(i),scale:c,scaleValues:f}},XV=function(e){return e.changedTouches&&!!e.changedTouches.length},pf=function(t){function e(n){var r;return H0e(this,e),r=X0e(this,e,[n]),bi(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),bi(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),bi(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,s=i.endIndex,a=i.onDragEnd,o=i.startIndex;a==null||a({endIndex:s,startIndex:o})}),r.detachDragEndListener()}),bi(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),bi(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),bi(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),bi(r,"handleSlideDragStart",function(i){var s=XV(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return Q0e(e,t),K0e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,s=r.endX,a=this.state.scaleValues,o=this.props,l=o.gap,c=o.data,f=c.length-1,d=Math.min(i,s),p=Math.max(i,s),g=e.getIndexInRange(a,d),y=e.getIndexInRange(a,p);return{startIndex:g-g%l,endIndex:y===f?f:y-y%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,s=i.data,a=i.tickFormatter,o=i.dataKey,l=Ai(s[r],o,r);return st(a)?a(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,s=i.slideMoveStartX,a=i.startX,o=i.endX,l=this.props,c=l.x,f=l.width,d=l.travellerWidth,p=l.startIndex,g=l.endIndex,y=l.onChange,x=r.pageX-s;x>0?x=Math.min(x,c+f-d-o,c+f-d-a):x<0&&(x=Math.max(x,c-a,c-o));var b=this.getIndex({startX:a+x,endX:o+x});(b.startIndex!==p||b.endIndex!==g)&&y&&y(b),this.setState({startX:a+x,endX:o+x,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var s=XV(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,s=i.brushMoveStartX,a=i.movingTravellerId,o=i.endX,l=i.startX,c=this.state[a],f=this.props,d=f.x,p=f.width,g=f.travellerWidth,y=f.onChange,x=f.gap,b=f.data,w={startX:this.state.startX,endX:this.state.endX},S=r.pageX-s;S>0?S=Math.min(S,d+p-g-c):S<0&&(S=Math.max(S,d-c)),w[a]=c+S;var T=this.getIndex(w),k=T.startIndex,A=T.endIndex,E=function(){var N=b.length-1;return a==="startX"&&(o>l?k%x===0:A%x===0)||o<l&&A===N||a==="endX"&&(o>l?A%x===0:k%x===0)||o>l&&A===N};this.setState(bi(bi({},a,c+S),"brushMoveStartX",r.pageX),function(){y&&E()&&y(T)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var s=this,a=this.state,o=a.scaleValues,l=a.startX,c=a.endX,f=this.state[i],d=o.indexOf(f);if(d!==-1){var p=d+r;if(!(p===-1||p>=o.length)){var g=o[p];i==="startX"&&g>=c||i==="endX"&&g<=l||this.setState(bi({},i,g),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,o=r.height,l=r.fill,c=r.stroke;return J.createElement("rect",{stroke:c,fill:l,x:i,y:s,width:a,height:o})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,o=r.height,l=r.data,c=r.children,f=r.padding,d=Q.Children.only(c);return d?J.cloneElement(d,{x:i,y:s,width:a,height:o,margin:f,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var s,a,o=this,l=this.props,c=l.y,f=l.travellerWidth,d=l.height,p=l.traveller,g=l.ariaLabel,y=l.data,x=l.startIndex,b=l.endIndex,w=Math.max(r,this.props.x),S=Hk(Hk({},mt(this.props,!1)),{},{x:w,y:c,width:f,height:d}),T=g||"Min value: ".concat((s=y[x])===null||s===void 0?void 0:s.name,", Max value: ").concat((a=y[b])===null||a===void 0?void 0:a.name);return J.createElement(cn,{tabIndex:0,role:"slider","aria-label":T,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(A){["ArrowLeft","ArrowRight"].includes(A.key)&&(A.preventDefault(),A.stopPropagation(),o.handleTravellerMoveKeyboard(A.key==="ArrowRight"?1:-1,i))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(p,S))}},{key:"renderSlide",value:function(r,i){var s=this.props,a=s.y,o=s.height,l=s.stroke,c=s.travellerWidth,f=Math.min(r,i)+c,d=Math.max(Math.abs(i-r)-c,0);return J.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:f,y:a,width:d,height:o})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,s=r.endIndex,a=r.y,o=r.height,l=r.travellerWidth,c=r.stroke,f=this.state,d=f.startX,p=f.endX,g=5,y={pointerEvents:"none",fill:c};return J.createElement(cn,{className:"recharts-brush-texts"},J.createElement(ab,Nb({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,p)-g,y:a+o/2},y),this.getTextOfTick(i)),J.createElement(ab,Nb({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,p)+l+g,y:a+o/2},y),this.getTextOfTick(s)))}},{key:"render",value:function(){var r=this.props,i=r.data,s=r.className,a=r.children,o=r.x,l=r.y,c=r.width,f=r.height,d=r.alwaysShowText,p=this.state,g=p.startX,y=p.endX,x=p.isTextActive,b=p.isSlideMoving,w=p.isTravellerMoving,S=p.isTravellerFocused;if(!i||!i.length||!Ne(o)||!Ne(l)||!Ne(c)||!Ne(f)||c<=0||f<=0)return null;var T=St("recharts-brush",s),k=J.Children.count(a)===1,A=q0e("userSelect","none");return J.createElement(cn,{className:T,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:A},this.renderBackground(),k&&this.renderPanorama(),this.renderSlide(g,y),this.renderTravellerLayer(g,"startX"),this.renderTravellerLayer(y,"endX"),(x||b||w||S||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,s=r.y,a=r.width,o=r.height,l=r.stroke,c=Math.floor(s+o/2)-1;return J.createElement(J.Fragment,null,J.createElement("rect",{x:i,y:s,width:a,height:o,fill:l,stroke:"none"}),J.createElement("line",{x1:i+1,y1:c,x2:i+a-1,y2:c,fill:"none",stroke:"#fff"}),J.createElement("line",{x1:i+1,y1:c+2,x2:i+a-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var s;return J.isValidElement(r)?s=J.cloneElement(r,i):st(r)?s=r(i):s=e.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(r,i){var s=r.data,a=r.width,o=r.x,l=r.travellerWidth,c=r.updateId,f=r.startIndex,d=r.endIndex;if(s!==i.prevData||c!==i.prevUpdateId)return Hk({prevData:s,prevTravellerWidth:l,prevUpdateId:c,prevX:o,prevWidth:a},s&&s.length?exe({data:s,width:a,x:o,travellerWidth:l,startIndex:f,endIndex:d}):{scale:null,scaleValues:null});if(i.scale&&(a!==i.prevWidth||o!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([o,o+a-l]);var p=i.scale.domain().map(function(g){return i.scale(g)});return{prevData:s,prevTravellerWidth:l,prevUpdateId:c,prevX:o,prevWidth:a,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(r,i){for(var s=r.length,a=0,o=s-1;o-a>1;){var l=Math.floor((a+o)/2);r[l]>i?o=l:a=l}return i>=r[o]?o:a}}])}(Q.PureComponent);bi(pf,"displayName","Brush");bi(pf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Kk,YV;function txe(){if(YV)return Kk;YV=1;var t=iN();function e(n,r){var i;return t(n,function(s,a,o){return i=r(s,a,o),!i}),!!i}return Kk=e,Kk}var Xk,ZV;function nxe(){if(ZV)return Xk;ZV=1;var t=y6(),e=rl(),n=txe(),r=fi(),i=D0();function s(a,o,l){var c=r(a)?t:n;return l&&i(a,o,l)&&(o=void 0),c(a,e(o,3))}return Xk=s,Xk}var rxe=nxe();const ixe=Vt(rxe);var Hs=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},Yk,QV;function sxe(){if(QV)return Yk;QV=1;var t=M6();function e(n,r,i){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Yk=e,Yk}var Zk,JV;function axe(){if(JV)return Zk;JV=1;var t=sxe(),e=R6(),n=rl();function r(i,s){var a={};return s=n(s,3),e(i,function(o,l,c){t(a,l,s(o,l,c))}),a}return Zk=r,Zk}var oxe=axe();const lxe=Vt(oxe);var Qk,eU;function cxe(){if(eU)return Qk;eU=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(!n(e[r],r,e))return!1;return!0}return Qk=t,Qk}var Jk,tU;function uxe(){if(tU)return Jk;tU=1;var t=iN();function e(n,r){var i=!0;return t(n,function(s,a,o){return i=!!r(s,a,o),i}),i}return Jk=e,Jk}var e2,nU;function fxe(){if(nU)return e2;nU=1;var t=cxe(),e=uxe(),n=rl(),r=fi(),i=D0();function s(a,o,l){var c=r(a)?t:e;return l&&i(a,o,l)&&(o=void 0),c(a,n(o,3))}return e2=s,e2}var hxe=fxe();const c8=Vt(hxe);var dxe=["x","y"];function Bp(t){"@babel/helpers - typeof";return Bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bp(t)}function Z$(){return Z$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Z$.apply(this,arguments)}function rU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $d(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rU(Object(n),!0).forEach(function(r){pxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pxe(t,e,n){return e=mxe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mxe(t){var e=gxe(t,"string");return Bp(e)=="symbol"?e:e+""}function gxe(t,e){if(Bp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yxe(t,e){if(t==null)return{};var n=vxe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function vxe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function bxe(t,e){var n=t.x,r=t.y,i=yxe(t,dxe),s="".concat(n),a=parseInt(s,10),o="".concat(r),l=parseInt(o,10),c="".concat(e.height||i.height),f=parseInt(c,10),d="".concat(e.width||i.width),p=parseInt(d,10);return $d($d($d($d($d({},e),i),a?{x:a}:{}),l?{y:l}:{}),{},{height:f,width:p,name:e.name,radius:e.radius})}function iU(t){return J.createElement(O0e,Z$({shapeType:"rectangle",propTransformer:bxe,activeClassName:"recharts-active-bar"},t))}var xxe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var s=typeof r=="number";return s?e(r,i):(s||fc(),n)}},wxe=["value","background"],u8;function mf(t){"@babel/helpers - typeof";return mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mf(t)}function Sxe(t,e){if(t==null)return{};var n=Cxe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Cxe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function _b(){return _b=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_b.apply(this,arguments)}function sU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sU(Object(n),!0).forEach(function(r){Po(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Txe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aU(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h8(r.key),r)}}function Axe(t,e,n){return e&&aU(t.prototype,e),n&&aU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function kxe(t,e,n){return e=Rb(e),$xe(t,f8()?Reflect.construct(e,n||[],Rb(t).constructor):e.apply(t,n))}function $xe(t,e){if(e&&(mf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Exe(t)}function Exe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f8=function(){return!!t})()}function Rb(t){return Rb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rb(t)}function Ixe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Q$(t,e)}function Q$(t,e){return Q$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Q$(t,e)}function Po(t,e,n){return e=h8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h8(t){var e=Nxe(t,"string");return mf(e)=="symbol"?e:e+""}function Nxe(t,e){if(mf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(mf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var mm=function(t){function e(){var n;Txe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=kxe(this,e,[].concat(i)),Po(n,"state",{isAnimationFinished:!1}),Po(n,"id",cm("recharts-bar-")),Po(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),a&&a()}),Po(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),a&&a()}),n}return Ixe(e,t),Axe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,s=this.props,a=s.shape,o=s.dataKey,l=s.activeIndex,c=s.activeBar,f=mt(this.props,!1);return r&&r.map(function(d,p){var g=p===l,y=g?c:a,x=Nn(Nn(Nn({},f),d),{},{isActive:g,option:y,index:p,dataKey:o,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return J.createElement(cn,_b({className:"recharts-bar-rectangle"},Xv(i.props,d,p),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(p)}),J.createElement(iU,x))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,s=i.data,a=i.layout,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,f=i.animationEasing,d=i.animationId,p=this.state.prevData;return J.createElement(qa,{begin:l,duration:c,isActive:o,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var y=g.t,x=s.map(function(b,w){var S=p&&p[w];if(S){var T=Gi(S.x,b.x),k=Gi(S.y,b.y),A=Gi(S.width,b.width),E=Gi(S.height,b.height);return Nn(Nn({},b),{},{x:T(y),y:k(y),width:A(y),height:E(y)})}if(a==="horizontal"){var I=Gi(0,b.height),N=I(y);return Nn(Nn({},b),{},{y:b.y+b.height-N,height:N})}var _=Gi(0,b.width),R=_(y);return Nn(Nn({},b),{},{width:R})});return J.createElement(cn,null,r.renderRectanglesStatically(x))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,s=r.isAnimationActive,a=this.state.prevData;return s&&i&&i.length&&(!a||!xp(a,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,s=i.data,a=i.dataKey,o=i.activeIndex,l=mt(this.props.background,!1);return s.map(function(c,f){c.value;var d=c.background,p=Sxe(c,wxe);if(!d)return null;var g=Nn(Nn(Nn(Nn(Nn({},p),{},{fill:"#eee"},d),l),Xv(r.props,c,f)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:a,index:f,className:"recharts-bar-background-rectangle"});return J.createElement(iU,_b({key:"background-bar-".concat(f),option:r.props.background,isActive:f===o},g))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.data,o=s.xAxis,l=s.yAxis,c=s.layout,f=s.children,d=bs(f,W0);if(!d)return null;var p=c==="vertical"?a[0].height/2:a[0].width/2,g=function(b,w){var S=Array.isArray(b.value)?b.value[1]:b.value;return{x:b.x,y:b.y,value:S,errorVal:Ai(b,w)}},y={clipPath:r?"url(#clipPath-".concat(i,")"):null};return J.createElement(cn,y,d.map(function(x){return J.cloneElement(x,{key:"error-bar-".concat(i,"-").concat(x.props.dataKey),data:a,xAxis:o,yAxis:l,layout:c,offset:p,dataPointFormatter:g})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,s=r.data,a=r.className,o=r.xAxis,l=r.yAxis,c=r.left,f=r.top,d=r.width,p=r.height,g=r.isAnimationActive,y=r.background,x=r.id;if(i||!s||!s.length)return null;var b=this.state.isAnimationFinished,w=St("recharts-bar",a),S=o&&o.allowDataOverflow,T=l&&l.allowDataOverflow,k=S||T,A=yt(x)?this.id:x;return J.createElement(cn,{className:w},S||T?J.createElement("defs",null,J.createElement("clipPath",{id:"clipPath-".concat(A)},J.createElement("rect",{x:S?c:c-d/2,y:T?f:f-p/2,width:S?d:d*2,height:T?p:p*2}))):null,J.createElement(cn,{className:"recharts-bar-rectangles",clipPath:k?"url(#clipPath-".concat(A,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(k,A),(!g||b)&&jo.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(Q.PureComponent);u8=mm;Po(mm,"displayName","Bar");Po(mm,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Gf.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Po(mm,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,s=t.xAxis,a=t.yAxis,o=t.xAxisTicks,l=t.yAxisTicks,c=t.stackedData,f=t.dataStartIndex,d=t.displayedData,p=t.offset,g=Xge(r,n);if(!g)return null;var y=e.layout,x=n.type.defaultProps,b=x!==void 0?Nn(Nn({},x),n.props):n.props,w=b.dataKey,S=b.children,T=b.minPointSize,k=y==="horizontal"?a:s,A=c?k.scale.domain():null,E=rye({numericAxis:k}),I=bs(S,V6),N=d.map(function(_,R){var O,F,z,W,P,M;c?O=Yge(c[f+R],A):(O=Ai(_,w),Array.isArray(O)||(O=[E,O]));var j=xxe(T,u8.defaultProps.minPointSize)(O[1],R);if(y==="horizontal"){var V,q=[a.scale(O[0]),a.scale(O[1])],L=q[0],G=q[1];F=Uj({axis:s,ticks:o,bandSize:i,offset:g.offset,entry:_,index:R}),z=(V=G??L)!==null&&V!==void 0?V:void 0,W=g.size;var H=L-G;if(P=Number.isNaN(H)?0:H,M={x:F,y:a.y,width:W,height:a.height},Math.abs(j)>0&&Math.abs(P)<Math.abs(j)){var K=ys(P||j)*(Math.abs(j)-Math.abs(P));z-=K,P+=K}}else{var oe=[s.scale(O[0]),s.scale(O[1])],pe=oe[0],be=oe[1];if(F=pe,z=Uj({axis:a,ticks:l,bandSize:i,offset:g.offset,entry:_,index:R}),W=be-pe,P=g.size,M={x:s.x,y:z,width:s.width,height:P},Math.abs(j)>0&&Math.abs(W)<Math.abs(j)){var Ae=ys(W||j)*(Math.abs(j)-Math.abs(W));W+=Ae}}return Nn(Nn(Nn({},_),{},{x:F,y:z,width:W,height:P,value:c?O:O[1],payload:_,background:M},I&&I[R]&&I[R].props),{},{tooltipPayload:[K5(n,_)],tooltipPosition:{x:F+W/2,y:z+P/2}})});return Nn({data:N,layout:y},p)});function zp(t){"@babel/helpers - typeof";return zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zp(t)}function Oxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oU(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d8(r.key),r)}}function _xe(t,e,n){return e&&oU(t.prototype,e),n&&oU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function lU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ds(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lU(Object(n),!0).forEach(function(r){H0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function H0(t,e,n){return e=d8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d8(t){var e=Rxe(t,"string");return zp(e)=="symbol"?e:e+""}function Rxe(t,e){if(zp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Dxe=function(e,n,r,i,s){var a=e.width,o=e.height,l=e.layout,c=e.children,f=Object.keys(n),d={left:r.left,leftMirror:r.left,right:a-r.right,rightMirror:a-r.right,top:r.top,topMirror:r.top,bottom:o-r.bottom,bottomMirror:o-r.bottom},p=!!xi(c,mm);return f.reduce(function(g,y){var x=n[y],b=x.orientation,w=x.domain,S=x.padding,T=S===void 0?{}:S,k=x.mirror,A=x.reversed,E="".concat(b).concat(k?"Mirror":""),I,N,_,R,O;if(x.type==="number"&&(x.padding==="gap"||x.padding==="no-gap")){var F=w[1]-w[0],z=1/0,W=x.categoricalDomain.sort(_le);if(W.forEach(function(oe,pe){pe>0&&(z=Math.min((oe||0)-(W[pe-1]||0),z))}),Number.isFinite(z)){var P=z/F,M=x.layout==="vertical"?r.height:r.width;if(x.padding==="gap"&&(I=P*M/2),x.padding==="no-gap"){var j=cc(e.barCategoryGap,P*M),V=P*M/2;I=V-j-(V-j)/M*j}}}i==="xAxis"?N=[r.left+(T.left||0)+(I||0),r.left+r.width-(T.right||0)-(I||0)]:i==="yAxis"?N=l==="horizontal"?[r.top+r.height-(T.bottom||0),r.top+(T.top||0)]:[r.top+(T.top||0)+(I||0),r.top+r.height-(T.bottom||0)-(I||0)]:N=x.range,A&&(N=[N[1],N[0]]);var q=Hge(x,s,p),L=q.scale,G=q.realScaleType;L.domain(w).range(N),Kge(L);var H=nye(L,ds(ds({},x),{},{realScaleType:G}));i==="xAxis"?(O=b==="top"&&!k||b==="bottom"&&k,_=r.left,R=d[E]-O*x.height):i==="yAxis"&&(O=b==="left"&&!k||b==="right"&&k,_=d[E]-O*x.width,R=r.top);var K=ds(ds(ds({},x),H),{},{realScaleType:G,x:_,y:R,scale:L,width:i==="xAxis"?r.width:x.width,height:i==="yAxis"?r.height:x.height});return K.bandSize=xb(K,H),!x.hide&&i==="xAxis"?d[E]+=(O?-1:1)*K.height:x.hide||(d[E]+=(O?-1:1)*K.width),ds(ds({},g),{},H0({},y,K))},{})},p8=function(e,n){var r=e.x,i=e.y,s=n.x,a=n.y;return{x:Math.min(r,s),y:Math.min(i,a),width:Math.abs(s-r),height:Math.abs(a-i)}},Mxe=function(e){var n=e.x1,r=e.y1,i=e.x2,s=e.y2;return p8({x:n,y:r},{x:i,y:s})},m8=function(){function t(e){Oxe(this,t),this.scale=e}return _xe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,s=r.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+a}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(n)+o}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],s=r[r.length-1];return i<=s?n>=i&&n<=s:n>=s&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();H0(m8,"EPS",1e-4);var DN=function(e){var n=Object.keys(e).reduce(function(r,i){return ds(ds({},r),{},H0({},i,m8.create(e[i])))},{});return ds(ds({},n),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.bandAware,o=s.position;return lxe(i,function(l,c){return n[c].apply(l,{bandAware:a,position:o})})},isInRange:function(i){return c8(i,function(s,a){return n[a].isInRange(s)})}})};function Pxe(t){return(t%180+180)%180}var Fxe=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Pxe(i),a=s*Math.PI/180,o=Math.atan(r/n),l=a>o&&a<Math.PI-o?r/Math.sin(a):n/Math.cos(a);return Math.abs(l)},t2,cU;function Lxe(){if(cU)return t2;cU=1;var t=rl(),e=um(),n=_0();function r(i){return function(s,a,o){var l=Object(s);if(!e(s)){var c=t(a,3);s=n(s),a=function(d){return c(l[d],d,l)}}var f=i(s,a,o);return f>-1?l[c?s[f]:f]:void 0}}return t2=r,t2}var n2,uU;function Bxe(){if(uU)return n2;uU=1;var t=s8();function e(n){var r=t(n),i=r%1;return r===r?i?r-i:r:0}return n2=e,n2}var r2,fU;function zxe(){if(fU)return r2;fU=1;var t=E6(),e=rl(),n=Bxe(),r=Math.max;function i(s,a,o){var l=s==null?0:s.length;if(!l)return-1;var c=o==null?0:n(o);return c<0&&(c=r(l+c,0)),t(s,e(a,3),c)}return r2=i,r2}var i2,hU;function jxe(){if(hU)return i2;hU=1;var t=Lxe(),e=zxe(),n=t(e);return i2=n,i2}var Vxe=jxe();const Uxe=Vt(Vxe);var Wxe=WH();const Gxe=Vt(Wxe);var qxe=Gxe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),MN=Q.createContext(void 0),PN=Q.createContext(void 0),g8=Q.createContext(void 0),y8=Q.createContext({}),v8=Q.createContext(void 0),b8=Q.createContext(0),x8=Q.createContext(0),dU=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,s=n.offset,a=e.clipPathId,o=e.children,l=e.width,c=e.height,f=qxe(s);return J.createElement(MN.Provider,{value:r},J.createElement(PN.Provider,{value:i},J.createElement(y8.Provider,{value:s},J.createElement(g8.Provider,{value:f},J.createElement(v8.Provider,{value:a},J.createElement(b8.Provider,{value:c},J.createElement(x8.Provider,{value:l},o)))))))},Hxe=function(){return Q.useContext(v8)},w8=function(e){var n=Q.useContext(MN);n==null&&fc();var r=n[e];return r==null&&fc(),r},Kxe=function(){var e=Q.useContext(MN);return Do(e)},Xxe=function(){var e=Q.useContext(PN),n=Uxe(e,function(r){return c8(r.domain,Number.isFinite)});return n||Do(e)},S8=function(e){var n=Q.useContext(PN);n==null&&fc();var r=n[e];return r==null&&fc(),r},Yxe=function(){var e=Q.useContext(g8);return e},Zxe=function(){return Q.useContext(y8)},FN=function(){return Q.useContext(x8)},LN=function(){return Q.useContext(b8)};function gf(t){"@babel/helpers - typeof";return gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gf(t)}function Qxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jxe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,T8(r.key),r)}}function e1e(t,e,n){return e&&Jxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function t1e(t,e,n){return e=Db(e),n1e(t,C8()?Reflect.construct(e,n||[],Db(t).constructor):e.apply(t,n))}function n1e(t,e){if(e&&(gf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return r1e(t)}function r1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C8=function(){return!!t})()}function Db(t){return Db=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Db(t)}function i1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&J$(t,e)}function J$(t,e){return J$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},J$(t,e)}function pU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pU(Object(n),!0).forEach(function(r){BN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BN(t,e,n){return e=T8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T8(t){var e=s1e(t,"string");return gf(e)=="symbol"?e:e+""}function s1e(t,e){if(gf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function a1e(t,e){return u1e(t)||c1e(t,e)||l1e(t,e)||o1e()}function o1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l1e(t,e){if(t){if(typeof t=="string")return gU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gU(t,e)}}function gU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c1e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function u1e(t){if(Array.isArray(t))return t}function eE(){return eE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eE.apply(this,arguments)}var f1e=function(e,n){var r;return J.isValidElement(e)?r=J.cloneElement(e,n):st(e)?r=e(n):r=J.createElement("line",eE({},n,{className:"recharts-reference-line-line"})),r},h1e=function(e,n,r,i,s,a,o,l,c){var f=s.x,d=s.y,p=s.width,g=s.height;if(r){var y=c.y,x=e.y.apply(y,{position:a});if(Hs(c,"discard")&&!e.y.isInRange(x))return null;var b=[{x:f+p,y:x},{x:f,y:x}];return l==="left"?b.reverse():b}if(n){var w=c.x,S=e.x.apply(w,{position:a});if(Hs(c,"discard")&&!e.x.isInRange(S))return null;var T=[{x:S,y:d+g},{x:S,y:d}];return o==="top"?T.reverse():T}if(i){var k=c.segment,A=k.map(function(E){return e.apply(E,{position:a})});return Hs(c,"discard")&&ixe(A,function(E){return!e.isInRange(E)})?null:A}return null};function d1e(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,s=t.yAxisId,a=t.shape,o=t.className,l=t.alwaysShow,c=Hxe(),f=w8(i),d=S8(s),p=Yxe();if(!c||!p)return null;La(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=DN({x:f.scale,y:d.scale}),y=Hn(e),x=Hn(n),b=r&&r.length===2,w=h1e(g,y,x,b,p,t.position,f.orientation,d.orientation,t);if(!w)return null;var S=a1e(w,2),T=S[0],k=T.x,A=T.y,E=S[1],I=E.x,N=E.y,_=Hs(t,"hidden")?"url(#".concat(c,")"):void 0,R=mU(mU({clipPath:_},mt(t,!0)),{},{x1:k,y1:A,x2:I,y2:N});return J.createElement(cn,{className:St("recharts-reference-line",o)},f1e(a,R),Ir.renderCallByParent(t,Mxe({x1:k,y1:A,x2:I,y2:N})))}var zN=function(t){function e(){return Qxe(this,e),t1e(this,e,arguments)}return i1e(e,t),e1e(e,[{key:"render",value:function(){return J.createElement(d1e,this.props)}}])}(J.Component);BN(zN,"displayName","ReferenceLine");BN(zN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function tE(){return tE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tE.apply(this,arguments)}function yf(t){"@babel/helpers - typeof";return yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yf(t)}function yU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yU(Object(n),!0).forEach(function(r){K0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function p1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m1e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,k8(r.key),r)}}function g1e(t,e,n){return e&&m1e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function y1e(t,e,n){return e=Mb(e),v1e(t,A8()?Reflect.construct(e,n||[],Mb(t).constructor):e.apply(t,n))}function v1e(t,e){if(e&&(yf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b1e(t)}function b1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function A8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(A8=function(){return!!t})()}function Mb(t){return Mb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Mb(t)}function x1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nE(t,e)}function nE(t,e){return nE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},nE(t,e)}function K0(t,e,n){return e=k8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k8(t){var e=w1e(t,"string");return yf(e)=="symbol"?e:e+""}function w1e(t,e){if(yf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var S1e=function(e){var n=e.x,r=e.y,i=e.xAxis,s=e.yAxis,a=DN({x:i.scale,y:s.scale}),o=a.apply({x:n,y:r},{bandAware:!0});return Hs(e,"discard")&&!a.isInRange(o)?null:o},X0=function(t){function e(){return p1e(this,e),y1e(this,e,arguments)}return x1e(e,t),g1e(e,[{key:"render",value:function(){var r=this.props,i=r.x,s=r.y,a=r.r,o=r.alwaysShow,l=r.clipPathId,c=Hn(i),f=Hn(s);if(La(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!f)return null;var d=S1e(this.props);if(!d)return null;var p=d.x,g=d.y,y=this.props,x=y.shape,b=y.className,w=Hs(this.props,"hidden")?"url(#".concat(l,")"):void 0,S=vU(vU({clipPath:w},mt(this.props,!0)),{},{cx:p,cy:g});return J.createElement(cn,{className:St("recharts-reference-dot",b)},e.renderDot(x,S),Ir.renderCallByParent(this.props,{x:p-a,y:g-a,width:2*a,height:2*a}))}}])}(J.Component);K0(X0,"displayName","ReferenceDot");K0(X0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});K0(X0,"renderDot",function(t,e){var n;return J.isValidElement(t)?n=J.cloneElement(t,e):st(t)?n=t(e):n=J.createElement(RN,tE({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function rE(){return rE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rE.apply(this,arguments)}function vf(t){"@babel/helpers - typeof";return vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vf(t)}function bU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bU(Object(n),!0).forEach(function(r){Y0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function C1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T1e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,E8(r.key),r)}}function A1e(t,e,n){return e&&T1e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function k1e(t,e,n){return e=Pb(e),$1e(t,$8()?Reflect.construct(e,n||[],Pb(t).constructor):e.apply(t,n))}function $1e(t,e){if(e&&(vf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E1e(t)}function E1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($8=function(){return!!t})()}function Pb(t){return Pb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Pb(t)}function I1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iE(t,e)}function iE(t,e){return iE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},iE(t,e)}function Y0(t,e,n){return e=E8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E8(t){var e=N1e(t,"string");return vf(e)=="symbol"?e:e+""}function N1e(t,e){if(vf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var O1e=function(e,n,r,i,s){var a=s.x1,o=s.x2,l=s.y1,c=s.y2,f=s.xAxis,d=s.yAxis;if(!f||!d)return null;var p=DN({x:f.scale,y:d.scale}),g={x:e?p.x.apply(a,{position:"start"}):p.x.rangeMin,y:r?p.y.apply(l,{position:"start"}):p.y.rangeMin},y={x:n?p.x.apply(o,{position:"end"}):p.x.rangeMax,y:i?p.y.apply(c,{position:"end"}):p.y.rangeMax};return Hs(s,"discard")&&(!p.isInRange(g)||!p.isInRange(y))?null:p8(g,y)},Z0=function(t){function e(){return C1e(this,e),k1e(this,e,arguments)}return I1e(e,t),A1e(e,[{key:"render",value:function(){var r=this.props,i=r.x1,s=r.x2,a=r.y1,o=r.y2,l=r.className,c=r.alwaysShow,f=r.clipPathId;La(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=Hn(i),p=Hn(s),g=Hn(a),y=Hn(o),x=this.props.shape;if(!d&&!p&&!g&&!y&&!x)return null;var b=O1e(d,p,g,y,this.props);if(!b&&!x)return null;var w=Hs(this.props,"hidden")?"url(#".concat(f,")"):void 0;return J.createElement(cn,{className:St("recharts-reference-area",l)},e.renderRect(x,xU(xU({clipPath:w},mt(this.props,!0)),b)),Ir.renderCallByParent(this.props,b))}}])}(J.Component);Y0(Z0,"displayName","ReferenceArea");Y0(Z0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Y0(Z0,"renderRect",function(t,e){var n;return J.isValidElement(t)?n=J.cloneElement(t,e):st(t)?n=t(e):n=J.createElement(_N,rE({},e,{className:"recharts-reference-area-rect"})),n});function I8(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function _1e(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Fxe(r,n)}function R1e(t,e,n){var r=n==="width",i=t.x,s=t.y,a=t.width,o=t.height;return e===1?{start:r?i:s,end:r?i+a:s+o}:{start:r?i+a:s+o,end:r?i:s}}function Fb(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function D1e(t,e){return I8(t,e+1)}function M1e(t,e,n,r,i){for(var s=(r||[]).slice(),a=e.start,o=e.end,l=0,c=1,f=a,d=function(){var y=r==null?void 0:r[l];if(y===void 0)return{v:I8(r,c)};var x=l,b,w=function(){return b===void 0&&(b=n(y,x)),b},S=y.coordinate,T=l===0||Fb(t,S,w,f,o);T||(l=0,f=a,c+=1),T&&(f=S+t*(w()/2+i),l+=c)},p;c<=s.length;)if(p=d(),p)return p.v;return[]}function jp(t){"@babel/helpers - typeof";return jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jp(t)}function wU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wU(Object(n),!0).forEach(function(r){P1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function P1e(t,e,n){return e=F1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function F1e(t){var e=L1e(t,"string");return jp(e)=="symbol"?e:e+""}function L1e(t,e){if(jp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function B1e(t,e,n,r,i){for(var s=(r||[]).slice(),a=s.length,o=e.start,l=e.end,c=function(p){var g=s[p],y,x=function(){return y===void 0&&(y=n(g,p)),y};if(p===a-1){var b=t*(g.coordinate+t*x()/2-l);s[p]=g=kr(kr({},g),{},{tickCoord:b>0?g.coordinate-b*t:g.coordinate})}else s[p]=g=kr(kr({},g),{},{tickCoord:g.coordinate});var w=Fb(t,g.tickCoord,x,o,l);w&&(l=g.tickCoord-t*(x()/2+i),s[p]=kr(kr({},g),{},{isShow:!0}))},f=a-1;f>=0;f--)c(f);return s}function z1e(t,e,n,r,i,s){var a=(r||[]).slice(),o=a.length,l=e.start,c=e.end;if(s){var f=r[o-1],d=n(f,o-1),p=t*(f.coordinate+t*d/2-c);a[o-1]=f=kr(kr({},f),{},{tickCoord:p>0?f.coordinate-p*t:f.coordinate});var g=Fb(t,f.tickCoord,function(){return d},l,c);g&&(c=f.tickCoord-t*(d/2+i),a[o-1]=kr(kr({},f),{},{isShow:!0}))}for(var y=s?o-1:o,x=function(S){var T=a[S],k,A=function(){return k===void 0&&(k=n(T,S)),k};if(S===0){var E=t*(T.coordinate-t*A()/2-l);a[S]=T=kr(kr({},T),{},{tickCoord:E<0?T.coordinate-E*t:T.coordinate})}else a[S]=T=kr(kr({},T),{},{tickCoord:T.coordinate});var I=Fb(t,T.tickCoord,A,l,c);I&&(l=T.tickCoord+t*(A()/2+i),a[S]=kr(kr({},T),{},{isShow:!0}))},b=0;b<y;b++)x(b);return a}function jN(t,e,n){var r=t.tick,i=t.ticks,s=t.viewBox,a=t.minTickGap,o=t.orientation,l=t.interval,c=t.tickFormatter,f=t.unit,d=t.angle;if(!i||!i.length||!r)return[];if(Ne(l)||Gf.isSsr)return D1e(i,typeof l=="number"&&Ne(l)?l:0);var p=[],g=o==="top"||o==="bottom"?"width":"height",y=f&&g==="width"?Hd(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},x=function(T,k){var A=st(c)?c(T.value,k):T.value;return g==="width"?_1e(Hd(A,{fontSize:e,letterSpacing:n}),y,d):Hd(A,{fontSize:e,letterSpacing:n})[g]},b=i.length>=2?ys(i[1].coordinate-i[0].coordinate):1,w=R1e(s,b,g);return l==="equidistantPreserveStart"?M1e(b,w,x,i,a):(l==="preserveStart"||l==="preserveStartEnd"?p=z1e(b,w,x,i,a,l==="preserveStartEnd"):p=B1e(b,w,x,i,a),p.filter(function(S){return S.isShow}))}var j1e=["viewBox"],V1e=["viewBox"],U1e=["ticks"];function bf(t){"@babel/helpers - typeof";return bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bf(t)}function Uu(){return Uu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uu.apply(this,arguments)}function SU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SU(Object(n),!0).forEach(function(r){VN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function s2(t,e){if(t==null)return{};var n=W1e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function W1e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function G1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CU(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,O8(r.key),r)}}function q1e(t,e,n){return e&&CU(t.prototype,e),n&&CU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function H1e(t,e,n){return e=Lb(e),K1e(t,N8()?Reflect.construct(e,n||[],Lb(t).constructor):e.apply(t,n))}function K1e(t,e){if(e&&(bf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return X1e(t)}function X1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function N8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(N8=function(){return!!t})()}function Lb(t){return Lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Lb(t)}function Y1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sE(t,e)}function sE(t,e){return sE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},sE(t,e)}function VN(t,e,n){return e=O8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O8(t){var e=Z1e(t,"string");return bf(e)=="symbol"?e:e+""}function Z1e(t,e){if(bf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Xf=function(t){function e(n){var r;return G1e(this,e),r=H1e(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return Y1e(e,t),q1e(e,[{key:"shouldComponentUpdate",value:function(r,i){var s=r.viewBox,a=s2(r,j1e),o=this.props,l=o.viewBox,c=s2(o,V1e);return!Gu(s,l)||!Gu(a,c)||!Gu(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,s=i.x,a=i.y,o=i.width,l=i.height,c=i.orientation,f=i.tickSize,d=i.mirror,p=i.tickMargin,g,y,x,b,w,S,T=d?-1:1,k=r.tickSize||f,A=Ne(r.tickCoord)?r.tickCoord:r.coordinate;switch(c){case"top":g=y=r.coordinate,b=a+ +!d*l,x=b-T*k,S=x-T*p,w=A;break;case"left":x=b=r.coordinate,y=s+ +!d*o,g=y-T*k,w=g-T*p,S=A;break;case"right":x=b=r.coordinate,y=s+ +d*o,g=y+T*k,w=g+T*p,S=A;break;default:g=y=r.coordinate,b=a+ +d*l,x=b+T*k,S=x+T*p,w=A;break}return{line:{x1:g,y1:x,x2:y,y2:b},tick:{x:w,y:S}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,a;switch(i){case"left":a=s?"start":"end";break;case"right":a=s?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,a="end";switch(i){case"left":case"right":a="middle";break;case"top":a=s?"start":"end";break;default:a=s?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,o=r.height,l=r.orientation,c=r.mirror,f=r.axisLine,d=Lr(Lr(Lr({},mt(this.props,!1)),mt(f,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var p=+(l==="top"&&!c||l==="bottom"&&c);d=Lr(Lr({},d),{},{x1:i,y1:s+p*o,x2:i+a,y2:s+p*o})}else{var g=+(l==="left"&&!c||l==="right"&&c);d=Lr(Lr({},d),{},{x1:i+g*a,y1:s,x2:i+g*a,y2:s+o})}return J.createElement("line",Uu({},d,{className:St("recharts-cartesian-axis-line",Zi(f,"className"))}))}},{key:"renderTicks",value:function(r,i,s){var a=this,o=this.props,l=o.tickLine,c=o.stroke,f=o.tick,d=o.tickFormatter,p=o.unit,g=jN(Lr(Lr({},this.props),{},{ticks:r}),i,s),y=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),b=mt(this.props,!1),w=mt(f,!1),S=Lr(Lr({},b),{},{fill:"none"},mt(l,!1)),T=g.map(function(k,A){var E=a.getTickLineCoord(k),I=E.line,N=E.tick,_=Lr(Lr(Lr(Lr({textAnchor:y,verticalAnchor:x},b),{},{stroke:"none",fill:c},w),N),{},{index:A,payload:k,visibleTicksCount:g.length,tickFormatter:d});return J.createElement(cn,Uu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(k.value,"-").concat(k.coordinate,"-").concat(k.tickCoord)},Xv(a.props,k,A)),l&&J.createElement("line",Uu({},S,I,{className:St("recharts-cartesian-axis-tick-line",Zi(l,"className"))})),f&&e.renderTickItem(f,_,"".concat(st(d)?d(k.value,A):k.value).concat(p||"")))});return J.createElement("g",{className:"recharts-cartesian-axis-ticks"},T)}},{key:"render",value:function(){var r=this,i=this.props,s=i.axisLine,a=i.width,o=i.height,l=i.ticksGenerator,c=i.className,f=i.hide;if(f)return null;var d=this.props,p=d.ticks,g=s2(d,U1e),y=p;return st(l)&&(y=p&&p.length>0?l(this.props):l(g)),a<=0||o<=0||!y||!y.length?null:J.createElement(cn,{className:St("recharts-cartesian-axis",c),ref:function(b){r.layerReference=b}},s&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),Ir.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,s){var a;return J.isValidElement(r)?a=J.cloneElement(r,i):st(r)?a=r(i):a=J.createElement(ab,Uu({},i,{className:"recharts-cartesian-axis-tick-value"}),s),a}}])}(Q.Component);VN(Xf,"displayName","CartesianAxis");VN(Xf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Q1e=["x1","y1","x2","y2","key"],J1e=["offset"];function hc(t){"@babel/helpers - typeof";return hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hc(t)}function TU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TU(Object(n),!0).forEach(function(r){ewe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ewe(t,e,n){return e=twe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function twe(t){var e=nwe(t,"string");return hc(e)=="symbol"?e:e+""}function nwe(t,e){if(hc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zl(){return Zl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zl.apply(this,arguments)}function AU(t,e){if(t==null)return{};var n=rwe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rwe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var iwe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,s=e.y,a=e.width,o=e.height,l=e.ry;return J.createElement("rect",{x:i,y:s,ry:l,width:a,height:o,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function _8(t,e){var n;if(J.isValidElement(t))n=J.cloneElement(t,e);else if(st(t))n=t(e);else{var r=e.x1,i=e.y1,s=e.x2,a=e.y2,o=e.key,l=AU(e,Q1e),c=mt(l,!1);c.offset;var f=AU(c,J1e);n=J.createElement("line",Zl({},f,{x1:r,y1:i,x2:s,y2:a,fill:"none",key:o}))}return n}function swe(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,s=t.horizontalPoints;if(!i||!s||!s.length)return null;var a=s.map(function(o,l){var c=Nr(Nr({},t),{},{x1:e,y1:o,x2:e+n,y2:o,key:"line-".concat(l),index:l});return _8(i,c)});return J.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function awe(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,s=t.verticalPoints;if(!i||!s||!s.length)return null;var a=s.map(function(o,l){var c=Nr(Nr({},t),{},{x1:o,y1:e,x2:o,y2:e+n,key:"line-".concat(l),index:l});return _8(i,c)});return J.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function owe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,s=t.width,a=t.height,o=t.horizontalPoints,l=t.horizontal,c=l===void 0?!0:l;if(!c||!e||!e.length)return null;var f=o.map(function(p){return Math.round(p+i-i)}).sort(function(p,g){return p-g});i!==f[0]&&f.unshift(0);var d=f.map(function(p,g){var y=!f[g+1],x=y?i+a-p:f[g+1]-p;if(x<=0)return null;var b=g%e.length;return J.createElement("rect",{key:"react-".concat(g),y:p,x:r,height:x,width:s,stroke:"none",fill:e[b],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return J.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function lwe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,s=t.x,a=t.y,o=t.width,l=t.height,c=t.verticalPoints;if(!n||!r||!r.length)return null;var f=c.map(function(p){return Math.round(p+s-s)}).sort(function(p,g){return p-g});s!==f[0]&&f.unshift(0);var d=f.map(function(p,g){var y=!f[g+1],x=y?s+o-p:f[g+1]-p;if(x<=0)return null;var b=g%r.length;return J.createElement("rect",{key:"react-".concat(g),x:p,y:a,width:x,height:l,stroke:"none",fill:r[b],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return J.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var cwe=function(e,n){var r=e.xAxis,i=e.width,s=e.height,a=e.offset;return q5(jN(Nr(Nr(Nr({},Xf.defaultProps),r),{},{ticks:Da(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),a.left,a.left+a.width,n)},uwe=function(e,n){var r=e.yAxis,i=e.width,s=e.height,a=e.offset;return q5(jN(Nr(Nr(Nr({},Xf.defaultProps),r),{},{ticks:Da(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),a.top,a.top+a.height,n)},Nu={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function R8(t){var e,n,r,i,s,a,o=FN(),l=LN(),c=Zxe(),f=Nr(Nr({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Nu.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Nu.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Nu.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Nu.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:Nu.vertical,verticalFill:(a=t.verticalFill)!==null&&a!==void 0?a:Nu.verticalFill,x:Ne(t.x)?t.x:c.left,y:Ne(t.y)?t.y:c.top,width:Ne(t.width)?t.width:c.width,height:Ne(t.height)?t.height:c.height}),d=f.x,p=f.y,g=f.width,y=f.height,x=f.syncWithTicks,b=f.horizontalValues,w=f.verticalValues,S=Kxe(),T=Xxe();if(!Ne(g)||g<=0||!Ne(y)||y<=0||!Ne(d)||d!==+d||!Ne(p)||p!==+p)return null;var k=f.verticalCoordinatesGenerator||cwe,A=f.horizontalCoordinatesGenerator||uwe,E=f.horizontalPoints,I=f.verticalPoints;if((!E||!E.length)&&st(A)){var N=b&&b.length,_=A({yAxis:T?Nr(Nr({},T),{},{ticks:N?b:T.ticks}):void 0,width:o,height:l,offset:c},N?!0:x);La(Array.isArray(_),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(hc(_),"]")),Array.isArray(_)&&(E=_)}if((!I||!I.length)&&st(k)){var R=w&&w.length,O=k({xAxis:S?Nr(Nr({},S),{},{ticks:R?w:S.ticks}):void 0,width:o,height:l,offset:c},R?!0:x);La(Array.isArray(O),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(hc(O),"]")),Array.isArray(O)&&(I=O)}return J.createElement("g",{className:"recharts-cartesian-grid"},J.createElement(iwe,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),J.createElement(swe,Zl({},f,{offset:c,horizontalPoints:E,xAxis:S,yAxis:T})),J.createElement(awe,Zl({},f,{offset:c,verticalPoints:I,xAxis:S,yAxis:T})),J.createElement(owe,Zl({},f,{horizontalPoints:E})),J.createElement(lwe,Zl({},f,{verticalPoints:I})))}R8.displayName="CartesianGrid";var fwe=["layout","type","stroke","connectNulls","isRange","ref"],hwe=["key"],D8;function xf(t){"@babel/helpers - typeof";return xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xf(t)}function M8(t,e){if(t==null)return{};var n=dwe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function dwe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ql(){return Ql=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ql.apply(this,arguments)}function kU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Oo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kU(Object(n),!0).forEach(function(r){js(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,F8(r.key),r)}}function mwe(t,e,n){return e&&$U(t.prototype,e),n&&$U(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function gwe(t,e,n){return e=Bb(e),ywe(t,P8()?Reflect.construct(e,n||[],Bb(t).constructor):e.apply(t,n))}function ywe(t,e){if(e&&(xf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vwe(t)}function vwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function P8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(P8=function(){return!!t})()}function Bb(t){return Bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Bb(t)}function bwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aE(t,e)}function aE(t,e){return aE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},aE(t,e)}function js(t,e,n){return e=F8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function F8(t){var e=xwe(t,"string");return xf(e)=="symbol"?e:e+""}function xwe(t,e){if(xf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(xf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ha=function(t){function e(){var n;pwe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=gwe(this,e,[].concat(i)),js(n,"state",{isAnimationFinished:!0}),js(n,"id",cm("recharts-area-")),js(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),st(a)&&a()}),js(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),st(a)&&a()}),n}return bwe(e,t),mwe(e,[{key:"renderDots",value:function(r,i,s){var a=this.props.isAnimationActive,o=this.state.isAnimationFinished;if(a&&!o)return null;var l=this.props,c=l.dot,f=l.points,d=l.dataKey,p=mt(this.props,!1),g=mt(c,!0),y=f.map(function(b,w){var S=Oo(Oo(Oo({key:"dot-".concat(w),r:3},p),g),{},{index:w,cx:b.x,cy:b.y,dataKey:d,value:b.value,payload:b.payload,points:f});return e.renderDotItem(c,S)}),x={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return J.createElement(cn,Ql({className:"recharts-area-dots"},x),y)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,s=i.baseLine,a=i.points,o=i.strokeWidth,l=a[0].x,c=a[a.length-1].x,f=r*Math.abs(l-c),d=Mo(a.map(function(p){return p.y||0}));return Ne(s)&&typeof s=="number"?d=Math.max(s,d):s&&Array.isArray(s)&&s.length&&(d=Math.max(Mo(s.map(function(p){return p.y||0})),d)),Ne(d)?J.createElement("rect",{x:l<c?l:l-f,y:0,width:f,height:Math.floor(d+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,s=i.baseLine,a=i.points,o=i.strokeWidth,l=a[0].y,c=a[a.length-1].y,f=r*Math.abs(l-c),d=Mo(a.map(function(p){return p.x||0}));return Ne(s)&&typeof s=="number"?d=Math.max(s,d):s&&Array.isArray(s)&&s.length&&(d=Math.max(Mo(s.map(function(p){return p.x||0})),d)),Ne(d)?J.createElement("rect",{x:0,y:l<c?l:l-f,width:d+(o?parseInt("".concat(o),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,s,a){var o=this.props,l=o.layout,c=o.type,f=o.stroke,d=o.connectNulls,p=o.isRange;o.ref;var g=M8(o,fwe);return J.createElement(cn,{clipPath:s?"url(#clipPath-".concat(a,")"):null},J.createElement(Yd,Ql({},mt(g,!0),{points:r,connectNulls:d,type:c,baseLine:i,layout:l,stroke:"none",className:"recharts-area-area"})),f!=="none"&&J.createElement(Yd,Ql({},mt(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:r})),f!=="none"&&p&&J.createElement(Yd,Ql({},mt(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var s=this,a=this.props,o=a.points,l=a.baseLine,c=a.isAnimationActive,f=a.animationBegin,d=a.animationDuration,p=a.animationEasing,g=a.animationId,y=this.state,x=y.prevPoints,b=y.prevBaseLine;return J.createElement(qa,{begin:f,duration:d,isActive:c,easing:p,from:{t:0},to:{t:1},key:"area-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(w){var S=w.t;if(x){var T=x.length/o.length,k=o.map(function(N,_){var R=Math.floor(_*T);if(x[R]){var O=x[R],F=Gi(O.x,N.x),z=Gi(O.y,N.y);return Oo(Oo({},N),{},{x:F(S),y:z(S)})}return N}),A;if(Ne(l)&&typeof l=="number"){var E=Gi(b,l);A=E(S)}else if(yt(l)||Uf(l)){var I=Gi(b,0);A=I(S)}else A=l.map(function(N,_){var R=Math.floor(_*T);if(b[R]){var O=b[R],F=Gi(O.x,N.x),z=Gi(O.y,N.y);return Oo(Oo({},N),{},{x:F(S),y:z(S)})}return N});return s.renderAreaStatically(k,A,r,i)}return J.createElement(cn,null,J.createElement("defs",null,J.createElement("clipPath",{id:"animationClipPath-".concat(i)},s.renderClipRect(S))),J.createElement(cn,{clipPath:"url(#animationClipPath-".concat(i,")")},s.renderAreaStatically(o,l,r,i)))})}},{key:"renderArea",value:function(r,i){var s=this.props,a=s.points,o=s.baseLine,l=s.isAnimationActive,c=this.state,f=c.prevPoints,d=c.prevBaseLine,p=c.totalLength;return l&&a&&a.length&&(!f&&p>0||!xp(f,a)||!xp(d,o))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(a,o,r,i)}},{key:"render",value:function(){var r,i=this.props,s=i.hide,a=i.dot,o=i.points,l=i.className,c=i.top,f=i.left,d=i.xAxis,p=i.yAxis,g=i.width,y=i.height,x=i.isAnimationActive,b=i.id;if(s||!o||!o.length)return null;var w=this.state.isAnimationFinished,S=o.length===1,T=St("recharts-area",l),k=d&&d.allowDataOverflow,A=p&&p.allowDataOverflow,E=k||A,I=yt(b)?this.id:b,N=(r=mt(a,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},_=N.r,R=_===void 0?3:_,O=N.strokeWidth,F=O===void 0?2:O,z=jle(a)?a:{},W=z.clipDot,P=W===void 0?!0:W,M=R*2+F;return J.createElement(cn,{className:T},k||A?J.createElement("defs",null,J.createElement("clipPath",{id:"clipPath-".concat(I)},J.createElement("rect",{x:k?f:f-g/2,y:A?c:c-y/2,width:k?g:g*2,height:A?y:y*2})),!P&&J.createElement("clipPath",{id:"clipPath-dots-".concat(I)},J.createElement("rect",{x:f-M/2,y:c-M/2,width:g+M,height:y+M}))):null,S?null:this.renderArea(E,I),(a||S)&&this.renderDots(E,P,I),(!x||w)&&jo.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(Q.PureComponent);D8=Ha;js(Ha,"displayName","Area");js(Ha,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Gf.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});js(Ha,"getBaseValue",function(t,e,n,r){var i=t.layout,s=t.baseValue,a=e.props.baseValue,o=a??s;if(Ne(o)&&typeof o=="number")return o;var l=i==="horizontal"?r:n,c=l.scale.domain();if(l.type==="number"){var f=Math.max(c[0],c[1]),d=Math.min(c[0],c[1]);return o==="dataMin"?d:o==="dataMax"||f<0?f:Math.max(Math.min(c[0],c[1]),0)}return o==="dataMin"?c[0]:o==="dataMax"?c[1]:c[0]});js(Ha,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,s=t.xAxisTicks,a=t.yAxisTicks,o=t.bandSize,l=t.dataKey,c=t.stackedData,f=t.dataStartIndex,d=t.displayedData,p=t.offset,g=e.layout,y=c&&c.length,x=D8.getBaseValue(e,n,r,i),b=g==="horizontal",w=!1,S=d.map(function(k,A){var E;y?E=c[f+A]:(E=Ai(k,l),Array.isArray(E)?w=!0:E=[x,E]);var I=E[1]==null||y&&Ai(k,l)==null;return b?{x:Vj({axis:r,ticks:s,bandSize:o,entry:k,index:A}),y:I?null:i.scale(E[1]),value:E,payload:k}:{x:I?null:r.scale(E[1]),y:Vj({axis:i,ticks:a,bandSize:o,entry:k,index:A}),value:E,payload:k}}),T;return y||w?T=S.map(function(k){var A=Array.isArray(k.value)?k.value[0]:null;return b?{x:k.x,y:A!=null&&k.y!=null?i.scale(A):null}:{x:A!=null?r.scale(A):null,y:k.y}}):T=b?i.scale(x):r.scale(x),Oo({points:S,baseLine:T,layout:g,isRange:w},p)});js(Ha,"renderDotItem",function(t,e){var n;if(J.isValidElement(t))n=J.cloneElement(t,e);else if(st(t))n=t(e);else{var r=St("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,s=M8(e,hwe);n=J.createElement(RN,Ql({},s,{key:i,className:r}))}return n});function wf(t){"@babel/helpers - typeof";return wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wf(t)}function wwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Swe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,z8(r.key),r)}}function Cwe(t,e,n){return e&&Swe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Twe(t,e,n){return e=zb(e),Awe(t,L8()?Reflect.construct(e,n||[],zb(t).constructor):e.apply(t,n))}function Awe(t,e){if(e&&(wf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kwe(t)}function kwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(L8=function(){return!!t})()}function zb(t){return zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zb(t)}function $we(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oE(t,e)}function oE(t,e){return oE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},oE(t,e)}function B8(t,e,n){return e=z8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z8(t){var e=Ewe(t,"string");return wf(e)=="symbol"?e:e+""}function Ewe(t,e){if(wf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function lE(){return lE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lE.apply(this,arguments)}function Iwe(t){var e=t.xAxisId,n=FN(),r=LN(),i=w8(e);return i==null?null:J.createElement(Xf,lE({},i,{className:St("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return Da(a,!0)}}))}var Q0=function(t){function e(){return wwe(this,e),Twe(this,e,arguments)}return $we(e,t),Cwe(e,[{key:"render",value:function(){return J.createElement(Iwe,this.props)}}])}(J.Component);B8(Q0,"displayName","XAxis");B8(Q0,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Sf(t){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sf(t)}function Nwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Owe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,U8(r.key),r)}}function _we(t,e,n){return e&&Owe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Rwe(t,e,n){return e=jb(e),Dwe(t,j8()?Reflect.construct(e,n||[],jb(t).constructor):e.apply(t,n))}function Dwe(t,e){if(e&&(Sf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mwe(t)}function Mwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(j8=function(){return!!t})()}function jb(t){return jb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jb(t)}function Pwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cE(t,e)}function cE(t,e){return cE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},cE(t,e)}function V8(t,e,n){return e=U8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U8(t){var e=Fwe(t,"string");return Sf(e)=="symbol"?e:e+""}function Fwe(t,e){if(Sf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function uE(){return uE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uE.apply(this,arguments)}var Lwe=function(e){var n=e.yAxisId,r=FN(),i=LN(),s=S8(n);return s==null?null:J.createElement(Xf,uE({},s,{className:St("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(o){return Da(o,!0)}}))},J0=function(t){function e(){return Nwe(this,e),Rwe(this,e,arguments)}return Pwe(e,t),_we(e,[{key:"render",value:function(){return J.createElement(Lwe,this.props)}}])}(J.Component);V8(J0,"displayName","YAxis");V8(J0,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function EU(t){return Vwe(t)||jwe(t)||zwe(t)||Bwe()}function Bwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zwe(t,e){if(t){if(typeof t=="string")return fE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fE(t,e)}}function jwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Vwe(t){if(Array.isArray(t))return fE(t)}function fE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var hE=function(e,n,r,i,s){var a=bs(e,zN),o=bs(e,X0),l=[].concat(EU(a),EU(o)),c=bs(e,Z0),f="".concat(i,"Id"),d=i[0],p=n;if(l.length&&(p=l.reduce(function(x,b){if(b.props[f]===r&&Hs(b.props,"extendDomain")&&Ne(b.props[d])){var w=b.props[d];return[Math.min(x[0],w),Math.max(x[1],w)]}return x},p)),c.length){var g="".concat(d,"1"),y="".concat(d,"2");p=c.reduce(function(x,b){if(b.props[f]===r&&Hs(b.props,"extendDomain")&&Ne(b.props[g])&&Ne(b.props[y])){var w=b.props[g],S=b.props[y];return[Math.min(x[0],w,S),Math.max(x[1],w,S)]}return x},p)}return s&&s.length&&(p=s.reduce(function(x,b){return Ne(b)?[Math.min(x[0],b),Math.max(x[1],b)]:x},p)),p},a2={exports:{}},IU;function Uwe(){return IU||(IU=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,f){this.fn=l,this.context=c,this.once=f||!1}function s(l,c,f,d,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new i(f,d||l,p),y=n?n+c:c;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],g]:l._events[y].push(g):(l._events[y]=g,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],f,d;if(this._eventsCount===0)return c;for(d in f=this._events)e.call(f,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},o.prototype.listeners=function(c){var f=n?n+c:c,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var p=0,g=d.length,y=new Array(g);p<g;p++)y[p]=d[p].fn;return y},o.prototype.listenerCount=function(c){var f=n?n+c:c,d=this._events[f];return d?d.fn?1:d.length:0},o.prototype.emit=function(c,f,d,p,g,y){var x=n?n+c:c;if(!this._events[x])return!1;var b=this._events[x],w=arguments.length,S,T;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),w){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,f),!0;case 3:return b.fn.call(b.context,f,d),!0;case 4:return b.fn.call(b.context,f,d,p),!0;case 5:return b.fn.call(b.context,f,d,p,g),!0;case 6:return b.fn.call(b.context,f,d,p,g,y),!0}for(T=1,S=new Array(w-1);T<w;T++)S[T-1]=arguments[T];b.fn.apply(b.context,S)}else{var k=b.length,A;for(T=0;T<k;T++)switch(b[T].once&&this.removeListener(c,b[T].fn,void 0,!0),w){case 1:b[T].fn.call(b[T].context);break;case 2:b[T].fn.call(b[T].context,f);break;case 3:b[T].fn.call(b[T].context,f,d);break;case 4:b[T].fn.call(b[T].context,f,d,p);break;default:if(!S)for(A=1,S=new Array(w-1);A<w;A++)S[A-1]=arguments[A];b[T].fn.apply(b[T].context,S)}}return!0},o.prototype.on=function(c,f,d){return s(this,c,f,d,!1)},o.prototype.once=function(c,f,d){return s(this,c,f,d,!0)},o.prototype.removeListener=function(c,f,d,p){var g=n?n+c:c;if(!this._events[g])return this;if(!f)return a(this,g),this;var y=this._events[g];if(y.fn)y.fn===f&&(!p||y.once)&&(!d||y.context===d)&&a(this,g);else{for(var x=0,b=[],w=y.length;x<w;x++)(y[x].fn!==f||p&&!y[x].once||d&&y[x].context!==d)&&b.push(y[x]);b.length?this._events[g]=b.length===1?b[0]:b:a(this,g)}return this},o.prototype.removeAllListeners=function(c){var f;return c?(f=n?n+c:c,this._events[f]&&a(this,f)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o}(a2)),a2.exports}var Wwe=Uwe();const Gwe=Vt(Wwe);var o2=new Gwe,l2="recharts.syncMouseEvents";function Vp(t){"@babel/helpers - typeof";return Vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vp(t)}function qwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hwe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,W8(r.key),r)}}function Kwe(t,e,n){return e&&Hwe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function c2(t,e,n){return e=W8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function W8(t){var e=Xwe(t,"string");return Vp(e)=="symbol"?e:e+""}function Xwe(t,e){if(Vp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ywe=function(){function t(){qwe(this,t),c2(this,"activeIndex",0),c2(this,"coordinateList",[]),c2(this,"layout","horizontal")}return Kwe(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,s=i===void 0?null:i,a=n.container,o=a===void 0?null:a,l=n.layout,c=l===void 0?null:l,f=n.offset,d=f===void 0?null:f,p=n.mouseHandlerCallback,g=p===void 0?null:p;this.coordinateList=(r=s??this.coordinateList)!==null&&r!==void 0?r:[],this.container=o??this.container,this.layout=c??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=g??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,a=i.y,o=i.height,l=this.coordinateList[this.activeIndex].coordinate,c=((n=window)===null||n===void 0?void 0:n.scrollX)||0,f=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=s+l+c,p=a+this.offset.top+o/2+f;this.mouseHandlerCallback({pageX:d,pageY:p})}}}])}();function Zwe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&Ne(r)&&Ne(i))return!0}return!1}function Qwe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function G8(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,s=t.endAngle,a=pr(e,n,r,i),o=pr(e,n,r,s);return{points:[a,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}function Jwe(t,e,n){var r,i,s,a;if(t==="horizontal")r=e.x,s=r,i=n.top,a=n.top+n.height;else if(t==="vertical")i=e.y,a=i,r=n.left,s=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var o=e.cx,l=e.cy,c=e.innerRadius,f=e.outerRadius,d=e.angle,p=pr(o,l,c,d),g=pr(o,l,f,d);r=p.x,i=p.y,s=g.x,a=g.y}else return G8(e);return[{x:r,y:i},{x:s,y:a}]}function Up(t){"@babel/helpers - typeof";return Up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Up(t)}function NU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NU(Object(n),!0).forEach(function(r){eSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eSe(t,e,n){return e=tSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tSe(t){var e=nSe(t,"string");return Up(e)=="symbol"?e:e+""}function nSe(t,e){if(Up(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Up(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rSe(t){var e,n,r=t.element,i=t.tooltipEventType,s=t.isActive,a=t.activeCoordinate,o=t.activePayload,l=t.offset,c=t.activeTooltipIndex,f=t.tooltipAxisBandSize,d=t.layout,p=t.chartName,g=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!g||!s||!a||p!=="ScatterChart"&&i!=="axis")return null;var y,x=Yd;if(p==="ScatterChart")y=a,x=i0e;else if(p==="BarChart")y=Qwe(d,a,l,f),x=_N;else if(d==="radial"){var b=G8(a),w=b.cx,S=b.cy,T=b.radius,k=b.startAngle,A=b.endAngle;y={cx:w,cy:S,startAngle:k,endAngle:A,innerRadius:T,outerRadius:T},x=Z5}else y={points:Jwe(d,a,l)},x=Yd;var E=uv(uv(uv(uv({stroke:"#ccc",pointerEvents:"none"},l),y),mt(g,!1)),{},{payload:o,payloadIndex:c,className:St("recharts-tooltip-cursor",g.className)});return Q.isValidElement(g)?Q.cloneElement(g,E):Q.createElement(x,E)}var iSe=["item"],sSe=["children","className","width","height","style","compact","title","desc"];function Cf(t){"@babel/helpers - typeof";return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cf(t)}function Wu(){return Wu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wu.apply(this,arguments)}function OU(t,e){return lSe(t)||oSe(t,e)||H8(t,e)||aSe()}function aSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oSe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function lSe(t){if(Array.isArray(t))return t}function _U(t,e){if(t==null)return{};var n=cSe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function cSe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function uSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fSe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,K8(r.key),r)}}function hSe(t,e,n){return e&&fSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function dSe(t,e,n){return e=Vb(e),pSe(t,q8()?Reflect.construct(e,n||[],Vb(t).constructor):e.apply(t,n))}function pSe(t,e){if(e&&(Cf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mSe(t)}function mSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function q8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(q8=function(){return!!t})()}function Vb(t){return Vb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vb(t)}function gSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dE(t,e)}function dE(t,e){return dE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},dE(t,e)}function Tf(t){return bSe(t)||vSe(t)||H8(t)||ySe()}function ySe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H8(t,e){if(t){if(typeof t=="string")return pE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pE(t,e)}}function vSe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function bSe(t){if(Array.isArray(t))return pE(t)}function pE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function RU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RU(Object(n),!0).forEach(function(r){Ze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ze(t,e,n){return e=K8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K8(t){var e=xSe(t,"string");return Cf(e)=="symbol"?e:e+""}function xSe(t,e){if(Cf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Cf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wSe={xAxis:["bottom","top"],yAxis:["left","right"]},SSe={width:"100%",height:"100%"},X8={x:0,y:0};function fv(t){return t}var CSe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},TSe=function(e,n,r,i){var s=n.find(function(f){return f&&f.index===r});if(s){if(e==="horizontal")return{x:s.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:s.coordinate};if(e==="centric"){var a=s.coordinate,o=i.radius;return xe(xe(xe({},i),pr(i.cx,i.cy,o,a)),{},{angle:a,radius:o})}var l=s.coordinate,c=i.angle;return xe(xe(xe({},i),pr(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return X8},ex=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,s=n.dataEndIndex,a=(r??[]).reduce(function(o,l){var c=l.props.data;return c&&c.length?[].concat(Tf(o),Tf(c)):o},[]);return a.length>0?a:e&&e.length&&Ne(i)&&Ne(s)?e.slice(i,s+1):[]};function Y8(t){return t==="number"?[0,"auto"]:void 0}var mE=function(e,n,r,i){var s=e.graphicalItems,a=e.tooltipAxis,o=ex(n,e);return r<0||!s||!s.length||r>=o.length?null:s.reduce(function(l,c){var f,d=(f=c.props.data)!==null&&f!==void 0?f:n;d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1));var p;if(a.dataKey&&!a.allowDuplicatedCategory){var g=d===void 0?o:d;p=Hv(g,a.dataKey,i)}else p=d&&d[r]||o[r];return p?[].concat(Tf(l),[K5(c,p)]):l},[])},DU=function(e,n,r,i){var s=i||{x:e.chartX,y:e.chartY},a=CSe(s,r),o=e.orderedTooltipTicks,l=e.tooltipAxis,c=e.tooltipTicks,f=jge(a,o,c,l);if(f>=0&&c){var d=c[f]&&c[f].value,p=mE(e,n,f,d),g=TSe(r,o,f,s);return{activeTooltipIndex:f,activeLabel:d,activePayload:p,activeCoordinate:g}}return null},ASe=function(e,n){var r=n.axes,i=n.graphicalItems,s=n.axisType,a=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,f=e.layout,d=e.children,p=e.stackOffset,g=G5(f,s);return r.reduce(function(y,x){var b,w=x.type.defaultProps!==void 0?xe(xe({},x.type.defaultProps),x.props):x.props,S=w.type,T=w.dataKey,k=w.allowDataOverflow,A=w.allowDuplicatedCategory,E=w.scale,I=w.ticks,N=w.includeHidden,_=w[a];if(y[_])return y;var R=ex(e.data,{graphicalItems:i.filter(function(H){var K,oe=a in H.props?H.props[a]:(K=H.type.defaultProps)===null||K===void 0?void 0:K[a];return oe===_}),dataStartIndex:l,dataEndIndex:c}),O=R.length,F,z,W;Zwe(w.domain,k,S)&&(F=D$(w.domain,null,k),g&&(S==="number"||E!=="auto")&&(W=Xd(R,T,"category")));var P=Y8(S);if(!F||F.length===0){var M,j=(M=w.domain)!==null&&M!==void 0?M:P;if(T){if(F=Xd(R,T,S),S==="category"&&g){var V=Ole(F);A&&V?(z=F,F=Ib(0,O)):A||(F=qj(j,F,x).reduce(function(H,K){return H.indexOf(K)>=0?H:[].concat(Tf(H),[K])},[]))}else if(S==="category")A?F=F.filter(function(H){return H!==""&&!yt(H)}):F=qj(j,F,x).reduce(function(H,K){return H.indexOf(K)>=0||K===""||yt(K)?H:[].concat(Tf(H),[K])},[]);else if(S==="number"){var q=qge(R,i.filter(function(H){var K,oe,pe=a in H.props?H.props[a]:(K=H.type.defaultProps)===null||K===void 0?void 0:K[a],be="hide"in H.props?H.props.hide:(oe=H.type.defaultProps)===null||oe===void 0?void 0:oe.hide;return pe===_&&(N||!be)}),T,s,f);q&&(F=q)}g&&(S==="number"||E!=="auto")&&(W=Xd(R,T,"category"))}else g?F=Ib(0,O):o&&o[_]&&o[_].hasStack&&S==="number"?F=p==="expand"?[0,1]:H5(o[_].stackGroups,l,c):F=W5(R,i.filter(function(H){var K=a in H.props?H.props[a]:H.type.defaultProps[a],oe="hide"in H.props?H.props.hide:H.type.defaultProps.hide;return K===_&&(N||!oe)}),S,f,!0);if(S==="number")F=hE(d,F,_,s,I),j&&(F=D$(j,F,k));else if(S==="category"&&j){var L=j,G=F.every(function(H){return L.indexOf(H)>=0});G&&(F=L)}}return xe(xe({},y),{},Ze({},_,xe(xe({},w),{},{axisType:s,domain:F,categoricalDomain:W,duplicateDomain:z,originalDomain:(b=w.domain)!==null&&b!==void 0?b:P,isCategorical:g,layout:f})))},{})},kSe=function(e,n){var r=n.graphicalItems,i=n.Axis,s=n.axisType,a=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,f=e.layout,d=e.children,p=ex(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:c}),g=p.length,y=G5(f,s),x=-1;return r.reduce(function(b,w){var S=w.type.defaultProps!==void 0?xe(xe({},w.type.defaultProps),w.props):w.props,T=S[a],k=Y8("number");if(!b[T]){x++;var A;return y?A=Ib(0,g):o&&o[T]&&o[T].hasStack?(A=H5(o[T].stackGroups,l,c),A=hE(d,A,T,s)):(A=D$(k,W5(p,r.filter(function(E){var I,N,_=a in E.props?E.props[a]:(I=E.type.defaultProps)===null||I===void 0?void 0:I[a],R="hide"in E.props?E.props.hide:(N=E.type.defaultProps)===null||N===void 0?void 0:N.hide;return _===T&&!R}),"number",f),i.defaultProps.allowDataOverflow),A=hE(d,A,T,s)),xe(xe({},b),{},Ze({},T,xe(xe({axisType:s},i.defaultProps),{},{hide:!0,orientation:Zi(wSe,"".concat(s,".").concat(x%2),null),domain:A,originalDomain:k,isCategorical:y,layout:f})))}return b},{})},$Se=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,s=n.AxisComp,a=n.graphicalItems,o=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,f=e.children,d="".concat(i,"Id"),p=bs(f,s),g={};return p&&p.length?g=ASe(e,{axes:p,graphicalItems:a,axisType:i,axisIdKey:d,stackGroups:o,dataStartIndex:l,dataEndIndex:c}):a&&a.length&&(g=kSe(e,{Axis:s,graphicalItems:a,axisType:i,axisIdKey:d,stackGroups:o,dataStartIndex:l,dataEndIndex:c})),g},ESe=function(e){var n=Do(e),r=Da(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:sN(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:xb(n,r)}},MU=function(e){var n=e.children,r=e.defaultShowTooltip,i=xi(n,pf),s=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(a=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!r}},ISe=function(e){return!e||!e.length?!1:e.some(function(n){var r=Fa(n&&n.type);return r&&r.indexOf("Bar")>=0})},PU=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},NSe=function(e,n){var r=e.props,i=e.graphicalItems,s=e.xAxisMap,a=s===void 0?{}:s,o=e.yAxisMap,l=o===void 0?{}:o,c=r.width,f=r.height,d=r.children,p=r.margin||{},g=xi(d,pf),y=xi(d,qu),x=Object.keys(l).reduce(function(A,E){var I=l[E],N=I.orientation;return!I.mirror&&!I.hide?xe(xe({},A),{},Ze({},N,A[N]+I.width)):A},{left:p.left||0,right:p.right||0}),b=Object.keys(a).reduce(function(A,E){var I=a[E],N=I.orientation;return!I.mirror&&!I.hide?xe(xe({},A),{},Ze({},N,Zi(A,"".concat(N))+I.height)):A},{top:p.top||0,bottom:p.bottom||0}),w=xe(xe({},b),x),S=w.bottom;g&&(w.bottom+=g.props.height||pf.defaultProps.height),y&&n&&(w=Wge(w,i,r,n));var T=c-w.left-w.right,k=f-w.top-w.bottom;return xe(xe({brushBottom:S},w),{},{width:Math.max(T,0),height:Math.max(k,0)})},OSe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},_Se=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,s=i===void 0?"axis":i,a=e.validateTooltipEventTypes,o=a===void 0?["axis"]:a,l=e.axisComponents,c=e.legendContent,f=e.formatAxisMap,d=e.defaultProps,p=function(w,S){var T=S.graphicalItems,k=S.stackGroups,A=S.offset,E=S.updateId,I=S.dataStartIndex,N=S.dataEndIndex,_=w.barSize,R=w.layout,O=w.barGap,F=w.barCategoryGap,z=w.maxBarSize,W=PU(R),P=W.numericAxisName,M=W.cateAxisName,j=ISe(T),V=[];return T.forEach(function(q,L){var G=ex(w.data,{graphicalItems:[q],dataStartIndex:I,dataEndIndex:N}),H=q.type.defaultProps!==void 0?xe(xe({},q.type.defaultProps),q.props):q.props,K=H.dataKey,oe=H.maxBarSize,pe=H["".concat(P,"Id")],be=H["".concat(M,"Id")],Ae={},$e=l.reduce(function(Sn,an){var Kr=S["".concat(an.axisType,"Map")],wr=H["".concat(an.axisType,"Id")];Kr&&Kr[wr]||an.axisType==="zAxis"||fc();var Xr=Kr[wr];return xe(xe({},Sn),{},Ze(Ze({},an.axisType,Xr),"".concat(an.axisType,"Ticks"),Da(Xr)))},Ae),ge=$e[M],Ee=$e["".concat(M,"Ticks")],Ie=k&&k[pe]&&k[pe].hasStack&&iye(q,k[pe].stackGroups),ye=Fa(q.type).indexOf("Bar")>=0,Ge=xb(ge,Ee),ze=[],Je=j&&Vge({barSize:_,stackGroups:k,totalSize:OSe($e,M)});if(ye){var qe,Xe,gt=yt(oe)?z:oe,Bn=(qe=(Xe=xb(ge,Ee,!0))!==null&&Xe!==void 0?Xe:gt)!==null&&qe!==void 0?qe:0;ze=Uge({barGap:O,barCategoryGap:F,bandSize:Bn!==Ge?Bn:Ge,sizeList:Je[be],maxBarSize:gt}),Bn!==Ge&&(ze=ze.map(function(Sn){return xe(xe({},Sn),{},{position:xe(xe({},Sn.position),{},{offset:Sn.position.offset-Bn/2})})}))}var Kt=q&&q.type&&q.type.getComposedData;Kt&&V.push({props:xe(xe({},Kt(xe(xe({},$e),{},{displayedData:G,props:w,dataKey:K,item:q,bandSize:Ge,barPosition:ze,offset:A,stackedData:Ie,layout:R,dataStartIndex:I,dataEndIndex:N}))),{},Ze(Ze(Ze({key:q.key||"item-".concat(L)},P,$e[P]),M,$e[M]),"animationId",E)),childIndex:Wle(q,w.children),item:q})}),V},g=function(w,S){var T=w.props,k=w.dataStartIndex,A=w.dataEndIndex,E=w.updateId;if(!aB({props:T}))return null;var I=T.children,N=T.layout,_=T.stackOffset,R=T.data,O=T.reverseStackOrder,F=PU(N),z=F.numericAxisName,W=F.cateAxisName,P=bs(I,r),M=tye(R,P,"".concat(z,"Id"),"".concat(W,"Id"),_,O),j=l.reduce(function(H,K){var oe="".concat(K.axisType,"Map");return xe(xe({},H),{},Ze({},oe,$Se(T,xe(xe({},K),{},{graphicalItems:P,stackGroups:K.axisType===z&&M,dataStartIndex:k,dataEndIndex:A}))))},{}),V=NSe(xe(xe({},j),{},{props:T,graphicalItems:P}),S==null?void 0:S.legendBBox);Object.keys(j).forEach(function(H){j[H]=f(T,j[H],V,H.replace("Map",""),n)});var q=j["".concat(W,"Map")],L=ESe(q),G=p(T,xe(xe({},j),{},{dataStartIndex:k,dataEndIndex:A,updateId:E,graphicalItems:P,stackGroups:M,offset:V}));return xe(xe({formattedGraphicalItems:G,graphicalItems:P,offset:V,stackGroups:M},L),j)},y=function(b){function w(S){var T,k,A;return uSe(this,w),A=dSe(this,w,[S]),Ze(A,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ze(A,"accessibilityManager",new Ywe),Ze(A,"handleLegendBBoxUpdate",function(E){if(E){var I=A.state,N=I.dataStartIndex,_=I.dataEndIndex,R=I.updateId;A.setState(xe({legendBBox:E},g({props:A.props,dataStartIndex:N,dataEndIndex:_,updateId:R},xe(xe({},A.state),{},{legendBBox:E}))))}}),Ze(A,"handleReceiveSyncEvent",function(E,I,N){if(A.props.syncId===E){if(N===A.eventEmitterSymbol&&typeof A.props.syncMethod!="function")return;A.applySyncEvent(I)}}),Ze(A,"handleBrushChange",function(E){var I=E.startIndex,N=E.endIndex;if(I!==A.state.dataStartIndex||N!==A.state.dataEndIndex){var _=A.state.updateId;A.setState(function(){return xe({dataStartIndex:I,dataEndIndex:N},g({props:A.props,dataStartIndex:I,dataEndIndex:N,updateId:_},A.state))}),A.triggerSyncEvent({dataStartIndex:I,dataEndIndex:N})}}),Ze(A,"handleMouseEnter",function(E){var I=A.getMouseInfo(E);if(I){var N=xe(xe({},I),{},{isTooltipActive:!0});A.setState(N),A.triggerSyncEvent(N);var _=A.props.onMouseEnter;st(_)&&_(N,E)}}),Ze(A,"triggeredAfterMouseMove",function(E){var I=A.getMouseInfo(E),N=I?xe(xe({},I),{},{isTooltipActive:!0}):{isTooltipActive:!1};A.setState(N),A.triggerSyncEvent(N);var _=A.props.onMouseMove;st(_)&&_(N,E)}),Ze(A,"handleItemMouseEnter",function(E){A.setState(function(){return{isTooltipActive:!0,activeItem:E,activePayload:E.tooltipPayload,activeCoordinate:E.tooltipPosition||{x:E.cx,y:E.cy}}})}),Ze(A,"handleItemMouseLeave",function(){A.setState(function(){return{isTooltipActive:!1}})}),Ze(A,"handleMouseMove",function(E){E.persist(),A.throttleTriggeredAfterMouseMove(E)}),Ze(A,"handleMouseLeave",function(E){A.throttleTriggeredAfterMouseMove.cancel();var I={isTooltipActive:!1};A.setState(I),A.triggerSyncEvent(I);var N=A.props.onMouseLeave;st(N)&&N(I,E)}),Ze(A,"handleOuterEvent",function(E){var I=Ule(E),N=Zi(A.props,"".concat(I));if(I&&st(N)){var _,R;/.*touch.*/i.test(I)?R=A.getMouseInfo(E.changedTouches[0]):R=A.getMouseInfo(E),N((_=R)!==null&&_!==void 0?_:{},E)}}),Ze(A,"handleClick",function(E){var I=A.getMouseInfo(E);if(I){var N=xe(xe({},I),{},{isTooltipActive:!0});A.setState(N),A.triggerSyncEvent(N);var _=A.props.onClick;st(_)&&_(N,E)}}),Ze(A,"handleMouseDown",function(E){var I=A.props.onMouseDown;if(st(I)){var N=A.getMouseInfo(E);I(N,E)}}),Ze(A,"handleMouseUp",function(E){var I=A.props.onMouseUp;if(st(I)){var N=A.getMouseInfo(E);I(N,E)}}),Ze(A,"handleTouchMove",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&A.throttleTriggeredAfterMouseMove(E.changedTouches[0])}),Ze(A,"handleTouchStart",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&A.handleMouseDown(E.changedTouches[0])}),Ze(A,"handleTouchEnd",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&A.handleMouseUp(E.changedTouches[0])}),Ze(A,"handleDoubleClick",function(E){var I=A.props.onDoubleClick;if(st(I)){var N=A.getMouseInfo(E);I(N,E)}}),Ze(A,"handleContextMenu",function(E){var I=A.props.onContextMenu;if(st(I)){var N=A.getMouseInfo(E);I(N,E)}}),Ze(A,"triggerSyncEvent",function(E){A.props.syncId!==void 0&&o2.emit(l2,A.props.syncId,E,A.eventEmitterSymbol)}),Ze(A,"applySyncEvent",function(E){var I=A.props,N=I.layout,_=I.syncMethod,R=A.state.updateId,O=E.dataStartIndex,F=E.dataEndIndex;if(E.dataStartIndex!==void 0||E.dataEndIndex!==void 0)A.setState(xe({dataStartIndex:O,dataEndIndex:F},g({props:A.props,dataStartIndex:O,dataEndIndex:F,updateId:R},A.state)));else if(E.activeTooltipIndex!==void 0){var z=E.chartX,W=E.chartY,P=E.activeTooltipIndex,M=A.state,j=M.offset,V=M.tooltipTicks;if(!j)return;if(typeof _=="function")P=_(V,E);else if(_==="value"){P=-1;for(var q=0;q<V.length;q++)if(V[q].value===E.activeLabel){P=q;break}}var L=xe(xe({},j),{},{x:j.left,y:j.top}),G=Math.min(z,L.x+L.width),H=Math.min(W,L.y+L.height),K=V[P]&&V[P].value,oe=mE(A.state,A.props.data,P),pe=V[P]?{x:N==="horizontal"?V[P].coordinate:G,y:N==="horizontal"?H:V[P].coordinate}:X8;A.setState(xe(xe({},E),{},{activeLabel:K,activeCoordinate:pe,activePayload:oe,activeTooltipIndex:P}))}else A.setState(E)}),Ze(A,"renderCursor",function(E){var I,N=A.state,_=N.isTooltipActive,R=N.activeCoordinate,O=N.activePayload,F=N.offset,z=N.activeTooltipIndex,W=N.tooltipAxisBandSize,P=A.getTooltipEventType(),M=(I=E.props.active)!==null&&I!==void 0?I:_,j=A.props.layout,V=E.key||"_recharts-cursor";return J.createElement(rSe,{key:V,activeCoordinate:R,activePayload:O,activeTooltipIndex:z,chartName:n,element:E,isActive:M,layout:j,offset:F,tooltipAxisBandSize:W,tooltipEventType:P})}),Ze(A,"renderPolarAxis",function(E,I,N){var _=Zi(E,"type.axisType"),R=Zi(A.state,"".concat(_,"Map")),O=E.type.defaultProps,F=O!==void 0?xe(xe({},O),E.props):E.props,z=R&&R[F["".concat(_,"Id")]];return Q.cloneElement(E,xe(xe({},z),{},{className:St(_,z.className),key:E.key||"".concat(I,"-").concat(N),ticks:Da(z,!0)}))}),Ze(A,"renderPolarGrid",function(E){var I=E.props,N=I.radialLines,_=I.polarAngles,R=I.polarRadius,O=A.state,F=O.radiusAxisMap,z=O.angleAxisMap,W=Do(F),P=Do(z),M=P.cx,j=P.cy,V=P.innerRadius,q=P.outerRadius;return Q.cloneElement(E,{polarAngles:Array.isArray(_)?_:Da(P,!0).map(function(L){return L.coordinate}),polarRadius:Array.isArray(R)?R:Da(W,!0).map(function(L){return L.coordinate}),cx:M,cy:j,innerRadius:V,outerRadius:q,key:E.key||"polar-grid",radialLines:N})}),Ze(A,"renderLegend",function(){var E=A.state.formattedGraphicalItems,I=A.props,N=I.children,_=I.width,R=I.height,O=A.props.margin||{},F=_-(O.left||0)-(O.right||0),z=V5({children:N,formattedGraphicalItems:E,legendWidth:F,legendContent:c});if(!z)return null;var W=z.item,P=_U(z,iSe);return Q.cloneElement(W,xe(xe({},P),{},{chartWidth:_,chartHeight:R,margin:O,onBBoxUpdate:A.handleLegendBBoxUpdate}))}),Ze(A,"renderTooltip",function(){var E,I=A.props,N=I.children,_=I.accessibilityLayer,R=xi(N,Ms);if(!R)return null;var O=A.state,F=O.isTooltipActive,z=O.activeCoordinate,W=O.activePayload,P=O.activeLabel,M=O.offset,j=(E=R.props.active)!==null&&E!==void 0?E:F;return Q.cloneElement(R,{viewBox:xe(xe({},M),{},{x:M.left,y:M.top}),active:j,label:P,payload:j?W:[],coordinate:z,accessibilityLayer:_})}),Ze(A,"renderBrush",function(E){var I=A.props,N=I.margin,_=I.data,R=A.state,O=R.offset,F=R.dataStartIndex,z=R.dataEndIndex,W=R.updateId;return Q.cloneElement(E,{key:E.key||"_recharts-brush",onChange:av(A.handleBrushChange,E.props.onChange),data:_,x:Ne(E.props.x)?E.props.x:O.left,y:Ne(E.props.y)?E.props.y:O.top+O.height+O.brushBottom-(N.bottom||0),width:Ne(E.props.width)?E.props.width:O.width,startIndex:F,endIndex:z,updateId:"brush-".concat(W)})}),Ze(A,"renderReferenceElement",function(E,I,N){if(!E)return null;var _=A,R=_.clipPathId,O=A.state,F=O.xAxisMap,z=O.yAxisMap,W=O.offset,P=E.type.defaultProps||{},M=E.props,j=M.xAxisId,V=j===void 0?P.xAxisId:j,q=M.yAxisId,L=q===void 0?P.yAxisId:q;return Q.cloneElement(E,{key:E.key||"".concat(I,"-").concat(N),xAxis:F[V],yAxis:z[L],viewBox:{x:W.left,y:W.top,width:W.width,height:W.height},clipPathId:R})}),Ze(A,"renderActivePoints",function(E){var I=E.item,N=E.activePoint,_=E.basePoint,R=E.childIndex,O=E.isRange,F=[],z=I.props.key,W=I.item.type.defaultProps!==void 0?xe(xe({},I.item.type.defaultProps),I.item.props):I.item.props,P=W.activeDot,M=W.dataKey,j=xe(xe({index:R,dataKey:M,cx:N.x,cy:N.y,r:4,fill:ON(I.item),strokeWidth:2,stroke:"#fff",payload:N.payload,value:N.value},mt(P,!1)),Kv(P));return F.push(w.renderActiveDot(P,j,"".concat(z,"-activePoint-").concat(R))),_?F.push(w.renderActiveDot(P,xe(xe({},j),{},{cx:_.x,cy:_.y}),"".concat(z,"-basePoint-").concat(R))):O&&F.push(null),F}),Ze(A,"renderGraphicChild",function(E,I,N){var _=A.filterFormatItem(E,I,N);if(!_)return null;var R=A.getTooltipEventType(),O=A.state,F=O.isTooltipActive,z=O.tooltipAxis,W=O.activeTooltipIndex,P=O.activeLabel,M=A.props.children,j=xi(M,Ms),V=_.props,q=V.points,L=V.isRange,G=V.baseLine,H=_.item.type.defaultProps!==void 0?xe(xe({},_.item.type.defaultProps),_.item.props):_.item.props,K=H.activeDot,oe=H.hide,pe=H.activeBar,be=H.activeShape,Ae=!!(!oe&&F&&j&&(K||pe||be)),$e={};R!=="axis"&&j&&j.props.trigger==="click"?$e={onClick:av(A.handleItemMouseEnter,E.props.onClick)}:R!=="axis"&&($e={onMouseLeave:av(A.handleItemMouseLeave,E.props.onMouseLeave),onMouseEnter:av(A.handleItemMouseEnter,E.props.onMouseEnter)});var ge=Q.cloneElement(E,xe(xe({},_.props),$e));function Ee(an){return typeof z.dataKey=="function"?z.dataKey(an.payload):null}if(Ae)if(W>=0){var Ie,ye;if(z.dataKey&&!z.allowDuplicatedCategory){var Ge=typeof z.dataKey=="function"?Ee:"payload.".concat(z.dataKey.toString());Ie=Hv(q,Ge,P),ye=L&&G&&Hv(G,Ge,P)}else Ie=q==null?void 0:q[W],ye=L&&G&&G[W];if(be||pe){var ze=E.props.activeIndex!==void 0?E.props.activeIndex:W;return[Q.cloneElement(E,xe(xe(xe({},_.props),$e),{},{activeIndex:ze})),null,null]}if(!yt(Ie))return[ge].concat(Tf(A.renderActivePoints({item:_,activePoint:Ie,basePoint:ye,childIndex:W,isRange:L})))}else{var Je,qe=(Je=A.getItemByXY(A.state.activeCoordinate))!==null&&Je!==void 0?Je:{graphicalItem:ge},Xe=qe.graphicalItem,gt=Xe.item,Bn=gt===void 0?E:gt,Kt=Xe.childIndex,Sn=xe(xe(xe({},_.props),$e),{},{activeIndex:Kt});return[Q.cloneElement(Bn,Sn),null,null]}return L?[ge,null,null]:[ge,null]}),Ze(A,"renderCustomized",function(E,I,N){return Q.cloneElement(E,xe(xe({key:"recharts-customized-".concat(N)},A.props),A.state))}),Ze(A,"renderMap",{CartesianGrid:{handler:fv,once:!0},ReferenceArea:{handler:A.renderReferenceElement},ReferenceLine:{handler:fv},ReferenceDot:{handler:A.renderReferenceElement},XAxis:{handler:fv},YAxis:{handler:fv},Brush:{handler:A.renderBrush,once:!0},Bar:{handler:A.renderGraphicChild},Line:{handler:A.renderGraphicChild},Area:{handler:A.renderGraphicChild},Radar:{handler:A.renderGraphicChild},RadialBar:{handler:A.renderGraphicChild},Scatter:{handler:A.renderGraphicChild},Pie:{handler:A.renderGraphicChild},Funnel:{handler:A.renderGraphicChild},Tooltip:{handler:A.renderCursor,once:!0},PolarGrid:{handler:A.renderPolarGrid,once:!0},PolarAngleAxis:{handler:A.renderPolarAxis},PolarRadiusAxis:{handler:A.renderPolarAxis},Customized:{handler:A.renderCustomized}}),A.clipPathId="".concat((T=S.id)!==null&&T!==void 0?T:cm("recharts"),"-clip"),A.throttleTriggeredAfterMouseMove=j6(A.triggeredAfterMouseMove,(k=S.throttleDelay)!==null&&k!==void 0?k:1e3/60),A.state={},A}return gSe(w,b),hSe(w,[{key:"componentDidMount",value:function(){var T,k;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(T=this.props.margin.left)!==null&&T!==void 0?T:0,top:(k=this.props.margin.top)!==null&&k!==void 0?k:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var T=this.props,k=T.children,A=T.data,E=T.height,I=T.layout,N=xi(k,Ms);if(N){var _=N.props.defaultIndex;if(!(typeof _!="number"||_<0||_>this.state.tooltipTicks.length-1)){var R=this.state.tooltipTicks[_]&&this.state.tooltipTicks[_].value,O=mE(this.state,A,_,R),F=this.state.tooltipTicks[_].coordinate,z=(this.state.offset.top+E)/2,W=I==="horizontal",P=W?{x:F,y:z}:{y:F,x:z},M=this.state.formattedGraphicalItems.find(function(V){var q=V.item;return q.type.name==="Scatter"});M&&(P=xe(xe({},P),M.props.points[_].tooltipPosition),O=M.props.points[_].tooltipPayload);var j={activeTooltipIndex:_,isTooltipActive:!0,activeLabel:R,activePayload:O,activeCoordinate:P};this.setState(j),this.renderCursor(N),this.accessibilityManager.setIndex(_)}}}},{key:"getSnapshotBeforeUpdate",value:function(T,k){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==k.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==T.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==T.margin){var A,E;this.accessibilityManager.setDetails({offset:{left:(A=this.props.margin.left)!==null&&A!==void 0?A:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0}})}return null}},{key:"componentDidUpdate",value:function(T){n$([xi(T.children,Ms)],[xi(this.props.children,Ms)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var T=xi(this.props.children,Ms);if(T&&typeof T.props.shared=="boolean"){var k=T.props.shared?"axis":"item";return o.indexOf(k)>=0?k:s}return s}},{key:"getMouseInfo",value:function(T){if(!this.container)return null;var k=this.container,A=k.getBoundingClientRect(),E=Ohe(A),I={chartX:Math.round(T.pageX-E.left),chartY:Math.round(T.pageY-E.top)},N=A.width/k.offsetWidth||1,_=this.inRange(I.chartX,I.chartY,N);if(!_)return null;var R=this.state,O=R.xAxisMap,F=R.yAxisMap,z=this.getTooltipEventType(),W=DU(this.state,this.props.data,this.props.layout,_);if(z!=="axis"&&O&&F){var P=Do(O).scale,M=Do(F).scale,j=P&&P.invert?P.invert(I.chartX):null,V=M&&M.invert?M.invert(I.chartY):null;return xe(xe({},I),{},{xValue:j,yValue:V},W)}return W?xe(xe({},I),W):null}},{key:"inRange",value:function(T,k){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,E=this.props.layout,I=T/A,N=k/A;if(E==="horizontal"||E==="vertical"){var _=this.state.offset,R=I>=_.left&&I<=_.left+_.width&&N>=_.top&&N<=_.top+_.height;return R?{x:I,y:N}:null}var O=this.state,F=O.angleAxisMap,z=O.radiusAxisMap;if(F&&z){var W=Do(F);return Xj({x:I,y:N},W)}return null}},{key:"parseEventsOfWrapper",value:function(){var T=this.props.children,k=this.getTooltipEventType(),A=xi(T,Ms),E={};A&&k==="axis"&&(A.props.trigger==="click"?E={onClick:this.handleClick}:E={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var I=Kv(this.props,this.handleOuterEvent);return xe(xe({},I),E)}},{key:"addListener",value:function(){o2.on(l2,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){o2.removeListener(l2,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(T,k,A){for(var E=this.state.formattedGraphicalItems,I=0,N=E.length;I<N;I++){var _=E[I];if(_.item===T||_.props.key===T.key||k===Fa(_.item.type)&&A===_.childIndex)return _}return null}},{key:"renderClipPath",value:function(){var T=this.clipPathId,k=this.state.offset,A=k.left,E=k.top,I=k.height,N=k.width;return J.createElement("defs",null,J.createElement("clipPath",{id:T},J.createElement("rect",{x:A,y:E,height:I,width:N})))}},{key:"getXScales",value:function(){var T=this.state.xAxisMap;return T?Object.entries(T).reduce(function(k,A){var E=OU(A,2),I=E[0],N=E[1];return xe(xe({},k),{},Ze({},I,N.scale))},{}):null}},{key:"getYScales",value:function(){var T=this.state.yAxisMap;return T?Object.entries(T).reduce(function(k,A){var E=OU(A,2),I=E[0],N=E[1];return xe(xe({},k),{},Ze({},I,N.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(T){var k;return(k=this.state.xAxisMap)===null||k===void 0||(k=k[T])===null||k===void 0?void 0:k.scale}},{key:"getYScaleByAxisId",value:function(T){var k;return(k=this.state.yAxisMap)===null||k===void 0||(k=k[T])===null||k===void 0?void 0:k.scale}},{key:"getItemByXY",value:function(T){var k=this.state,A=k.formattedGraphicalItems,E=k.activeItem;if(A&&A.length)for(var I=0,N=A.length;I<N;I++){var _=A[I],R=_.props,O=_.item,F=O.type.defaultProps!==void 0?xe(xe({},O.type.defaultProps),O.props):O.props,z=Fa(O.type);if(z==="Bar"){var W=(R.data||[]).find(function(V){return Kbe(T,V)});if(W)return{graphicalItem:_,payload:W}}else if(z==="RadialBar"){var P=(R.data||[]).find(function(V){return Xj(T,V)});if(P)return{graphicalItem:_,payload:P}}else if(G0(_,E)||q0(_,E)||Fp(_,E)){var M=L0e({graphicalItem:_,activeTooltipItem:E,itemData:F.data}),j=F.activeIndex===void 0?M:F.activeIndex;return{graphicalItem:xe(xe({},_),{},{childIndex:j}),payload:Fp(_,E)?F.data[M]:_.props.data[M]}}}return null}},{key:"render",value:function(){var T=this;if(!aB(this))return null;var k=this.props,A=k.children,E=k.className,I=k.width,N=k.height,_=k.style,R=k.compact,O=k.title,F=k.desc,z=_U(k,sSe),W=mt(z,!1);if(R)return J.createElement(dU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},J.createElement(i$,Wu({},W,{width:I,height:N,title:O,desc:F}),this.renderClipPath(),lB(A,this.renderMap)));if(this.props.accessibilityLayer){var P,M;W.tabIndex=(P=this.props.tabIndex)!==null&&P!==void 0?P:0,W.role=(M=this.props.role)!==null&&M!==void 0?M:"application",W.onKeyDown=function(V){T.accessibilityManager.keyboardEvent(V)},W.onFocus=function(){T.accessibilityManager.focus()}}var j=this.parseEventsOfWrapper();return J.createElement(dU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},J.createElement("div",Wu({className:St("recharts-wrapper",E),style:xe({position:"relative",cursor:"default",width:I,height:N},_)},j,{ref:function(q){T.container=q}}),J.createElement(i$,Wu({},W,{width:I,height:N,title:O,desc:F,style:SSe}),this.renderClipPath(),lB(A,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(Q.Component);Ze(y,"displayName",n),Ze(y,"defaultProps",xe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),Ze(y,"getDerivedStateFromProps",function(b,w){var S=b.dataKey,T=b.data,k=b.children,A=b.width,E=b.height,I=b.layout,N=b.stackOffset,_=b.margin,R=w.dataStartIndex,O=w.dataEndIndex;if(w.updateId===void 0){var F=MU(b);return xe(xe(xe({},F),{},{updateId:0},g(xe(xe({props:b},F),{},{updateId:0}),w)),{},{prevDataKey:S,prevData:T,prevWidth:A,prevHeight:E,prevLayout:I,prevStackOffset:N,prevMargin:_,prevChildren:k})}if(S!==w.prevDataKey||T!==w.prevData||A!==w.prevWidth||E!==w.prevHeight||I!==w.prevLayout||N!==w.prevStackOffset||!Gu(_,w.prevMargin)){var z=MU(b),W={chartX:w.chartX,chartY:w.chartY,isTooltipActive:w.isTooltipActive},P=xe(xe({},DU(w,T,I)),{},{updateId:w.updateId+1}),M=xe(xe(xe({},z),W),P);return xe(xe(xe({},M),g(xe({props:b},M),w)),{},{prevDataKey:S,prevData:T,prevWidth:A,prevHeight:E,prevLayout:I,prevStackOffset:N,prevMargin:_,prevChildren:k})}if(!n$(k,w.prevChildren)){var j,V,q,L,G=xi(k,pf),H=G&&(j=(V=G.props)===null||V===void 0?void 0:V.startIndex)!==null&&j!==void 0?j:R,K=G&&(q=(L=G.props)===null||L===void 0?void 0:L.endIndex)!==null&&q!==void 0?q:O,oe=H!==R||K!==O,pe=!yt(T),be=pe&&!oe?w.updateId:w.updateId+1;return xe(xe({updateId:be},g(xe(xe({props:b},w),{},{updateId:be,dataStartIndex:H,dataEndIndex:K}),w)),{},{prevChildren:k,dataStartIndex:H,dataEndIndex:K})}return null}),Ze(y,"renderActiveDot",function(b,w,S){var T;return Q.isValidElement(b)?T=Q.cloneElement(b,w):st(b)?T=b(w):T=J.createElement(RN,w),J.createElement(cn,{className:"recharts-active-dot",key:S},T)});var x=Q.forwardRef(function(w,S){return J.createElement(y,Wu({},w,{ref:S}))});return x.displayName=y.displayName,x},RSe=_Se({chartName:"AreaChart",GraphicalChild:Ha,axisComponents:[{axisType:"xAxis",AxisComp:Q0},{axisType:"yAxis",AxisComp:J0}],formatAxisMap:Dxe});class DSe{constructor(){this.initializeProtectionLayers(),this.initializePerformanceMetrics()}initializeProtectionLayers(){this.spikePatterns=new Map([["network_anomaly",this.networkAnomalyPattern],["ddos_attack",this.ddosPattern],["malware_signature",this.malwarePattern],["grooming_attempt",this.groomingPattern],["scam_detection",this.scamPattern],["manipulation_behavior",this.manipulationPattern],["crisis_signals",this.crisisPattern],["violence_indicators",this.violencePattern],["financial_fraud",this.financialFraudPattern],["health_misinformation",this.healthMisinfoPattern],["social_engineering",this.socialEngineeringPattern],["phishing_attempt",this.phishingPattern],["identity_theft",this.identityTheftPattern]]),this.adaptiveThresholds={child:{sensitivity:.95,speed:.1,priority_patterns:["grooming_attempt","violence_indicators","manipulation_behavior"]},elderly:{sensitivity:.9,speed:.2,priority_patterns:["scam_detection","financial_fraud","health_misinformation"]},standard:{sensitivity:.75,speed:.3,priority_patterns:["phishing_attempt","social_engineering","identity_theft"]},expert:{sensitivity:.6,speed:.5,priority_patterns:["network_anomaly","ddos_attack","malware_signature"]}},this.processingModes={realtime:{latency_target:.3,accuracy_threshold:.85},balanced:{latency_target:.8,accuracy_threshold:.92},thorough:{latency_target:1.5,accuracy_threshold:.97}}}initializePerformanceMetrics(){this.metrics={totalDetections:0,averageLatency:.3,accuracyRate:.94,falsePositiveRate:.02,threatsCaught:0,livesProtected:0}}async detectThreat(e,n,r={}){const i=performance.now();try{const s=this.encodeToSpikes(e,r),a=this.determineProcessingMode(r,n),o=await Promise.all([this.processNetworkThreats(s,a),this.processContentThreats(s,a),this.processFinancialThreats(s,a),this.processSocialThreats(s,a),this.processBehavioralThreats(s,a),this.processHealthThreats(s,a),this.processEmergencySignals(s,a)]),l=this.aggregateDetections(o,n),c=performance.now()-i;return this.updateMetrics(c,l),this.logDetection(e,l,r),{...l,processingTime:c,timestamp:Date.now(),confidence:this.calculateConfidence(o),recommendations:this.generateRecommendations(l,n)}}catch(s){return console.error("SNN Detection Error:",s),{threatDetected:!1,error:s.message,processingTime:performance.now()-i}}}encodeToSpikes(e,n){const r=this.basicSpikeEncoding(e);return n.type==="conversation"?this.addConversationSpikes(r,e):n.type==="transaction"?this.addTransactionSpikes(r,e):n.type==="browsing"?this.addBrowsingSpikes(r,e):n.type==="social_media"?this.addSocialMediaSpikes(r,e):r}basicSpikeEncoding(e){const n=typeof e=="string"?e:JSON.stringify(e),r=new TextEncoder().encode(n),i=[];for(let s=0;s<r.length;s++){const a=r[s];for(let o=0;o<8;o++)a>>o&1&&i.push(s*8+o)}return i}groomingPattern(e){const n=[this.detectIsolationAttempts(e),this.detectSecrecyRequests(e),this.detectAgeInappropriateContent(e),this.detectGiftOffering(e),this.detectPersonalInfoRequests(e),this.detectTrustBuilding(e),this.detectMeetingRequests(e)],r=n.filter(i=>i>.7).length;return{detected:r>=2,severity:Math.min(r/3,1),indicators:n}}scamPattern(e){const n=this.countUrgencySpikes(e),r=this.countMoneyRelatedSpikes(e),i=this.countAuthoritySpikes(e),s=this.countFearSpikes(e),a=n*.3+r*.4+i*.2+s*.1;return{detected:a>.7,severity:Math.min(a,1),type:this.classifyScamType(n,r,i)}}crisisPattern(e){const n=this.detectSuicidalLanguage(e),r=this.detectViolenceLanguage(e),i=this.detectHelpRequests(e),s=this.detectIsolationSignals(e),a=Math.max(n*1,r*.8,(i+s)*.6);return{detected:a>.6,severity:a,emergency:a>.9,type:this.classifyCrisisType(n,r,i)}}async processNetworkThreats(e,n){return{domain:"network",threats:await this.analyzeNetworkPatterns(e),confidence:.95}}async processContentThreats(e,n){const r=[];this.groomingPattern(e).detected&&r.push({type:"grooming_attempt",severity:"critical",confidence:.92});const i=this.violencePattern(e);return i.detected&&r.push({type:"violence_content",severity:i.severity>.8?"high":"medium",confidence:i.severity}),{domain:"content",threats:r,confidence:r.length>0?Math.max(...r.map(s=>s.confidence)):0}}async processFinancialThreats(e,n){const r=[],i=this.scamPattern(e);i.detected&&r.push({type:"financial_scam",severity:i.severity>.8?"critical":"high",confidence:i.severity,scamType:i.type});const s=this.phishingPattern(e);return s.detected&&r.push({type:"phishing_attempt",severity:"high",confidence:s.confidence}),{domain:"financial",threats:r,confidence:r.length>0?Math.max(...r.map(a=>a.confidence)):0}}async processSocialThreats(e,n){const r=[],i=this.manipulationPattern(e);return i.detected&&r.push({type:"social_manipulation",severity:"medium",confidence:i.confidence}),{domain:"social",threats:r,confidence:r.length>0?Math.max(...r.map(s=>s.confidence)):0}}async processBehavioralThreats(e,n){const r=[],i=this.harassmentPattern(e);return i.detected&&r.push({type:"harassment",severity:i.severity>.7?"high":"medium",confidence:i.confidence}),{domain:"behavioral",threats:r,confidence:r.length>0?Math.max(...r.map(s=>s.confidence)):0}}async processHealthThreats(e,n){const r=[],i=this.healthMisinfoPattern(e);return i.detected&&r.push({type:"health_misinformation",severity:"medium",confidence:i.confidence}),{domain:"health",threats:r,confidence:r.length>0?Math.max(...r.map(s=>s.confidence)):0}}async processEmergencySignals(e,n){const r=[],i=this.crisisPattern(e);return i.detected&&r.push({type:"crisis_signal",severity:i.emergency?"emergency":"critical",confidence:i.severity,emergency:i.emergency,crisisType:i.type}),{domain:"emergency",threats:r,confidence:r.length>0?Math.max(...r.map(s=>s.confidence)):0}}aggregateDetections(e,n){const r=[];let i="safe",s=!1;return e.forEach(a=>{a.threats.forEach(o=>{const l=this.getUserProfileWeight(o.type,n);o.adjustedConfidence=o.confidence*l,r.push({...o,domain:a.domain,weight:l}),o.severity==="emergency"?(s=!0,i="emergency"):o.severity==="critical"&&i!=="emergency"?i="critical":o.severity==="high"&&!["emergency","critical"].includes(i)&&(i="high")})}),r.sort((a,o)=>o.adjustedConfidence-a.adjustedConfidence),{threatDetected:r.length>0,threats:r,severity:i,emergency:s,primaryThreat:r[0]||null,threatCount:r.length,domains:[...new Set(r.map(a=>a.domain))]}}getUserProfileWeight(e,n){var i;return n&&((i={child:{grooming_attempt:2,violence_content:1.8,crisis_signal:1.5,financial_scam:.8},elderly:{financial_scam:2,phishing_attempt:1.8,health_misinformation:1.5,grooming_attempt:.5},standard:{phishing_attempt:1.2,social_manipulation:1.1,financial_scam:1}}[n.type])==null?void 0:i[e])||1}updateMetrics(e,n){this.metrics.totalDetections++,this.metrics.averageLatency=this.metrics.averageLatency*.9+e*.1,n.threatDetected&&(this.metrics.threatsCaught++,n.emergency?this.metrics.livesProtected+=1:n.severity==="critical"&&(this.metrics.livesProtected+=.5))}generateRecommendations(e,n){const r=[];if(e.emergency&&r.push({type:"emergency",action:"Contact emergency services immediately",priority:"critical"}),e.primaryThreat)switch(e.primaryThreat.type){case"grooming_attempt":r.push({type:"safety",action:"Block contact and report to authorities",priority:"high"});break;case"financial_scam":r.push({type:"financial",action:"Do not provide personal information or money",priority:"high"});break;case"phishing_attempt":r.push({type:"security",action:"Do not click links or download attachments",priority:"medium"});break}return r}detectIsolationAttempts(e){return Math.random()*.3}detectSecrecyRequests(e){return Math.random()*.4}countUrgencySpikes(e){return Math.floor(Math.random()*10)}countMoneyRelatedSpikes(e){return Math.floor(Math.random()*8)}countAuthoritySpikes(e){return Math.floor(Math.random()*5)}detectSuicidalLanguage(e){return Math.random()*.2}violencePattern(e){return{detected:Math.random()>.9,severity:Math.random()}}manipulationPattern(e){return{detected:Math.random()>.8,confidence:Math.random()}}phishingPattern(e){return{detected:Math.random()>.85,confidence:Math.random()}}harassmentPattern(e){return{detected:Math.random()>.9,confidence:Math.random(),severity:Math.random()}}healthMisinfoPattern(e){return{detected:Math.random()>.95,confidence:Math.random()}}logDetection(e,n,r){console.log("SNN Detection Log:",{timestamp:Date.now(),threatDetected:n.threatDetected,severity:n.severity,processingTime:n.processingTime,context:r.type})}}class MSe{constructor(){this.models={},this.ensembleModel=null,this.isLoaded=!1,this.metrics={accuracy:94.2,processingTime:0,totalClassifications:0,correctPredictions:0},this.initializeModels()}async initializeModels(){try{this.models={network:await this.loadNetworkModel(),content:await this.loadContentSafetyModel(),financial:await this.loadFinancialFraudModel(),social:await this.loadSocialThreatModel(),health:await this.loadHealthMisinfoModel(),behavioral:await this.loadBehavioralModel(),emergency:await this.loadEmergencyModel()},this.ensembleModel=await this.loadEnsembleModel(),this.isLoaded=!0,console.log("ANN Threat Classifier initialized with",Object.keys(this.models).length,"specialized models")}catch(e){console.error("Failed to initialize ANN models:",e),this.isLoaded=!1}}async classifyThreat(e,n,r={}){this.isLoaded||await this.initializeModels();const i=performance.now();try{const s=await this.extractFeatures(e,n,r),a={},o=this.determineRelevantDomains(r,n);for(const f of o)this.models[f]&&(a[f]=await this.runModelPrediction(this.models[f],s,f));const l=await this.ensembleDecision(a,s),c=performance.now()-i;return this.updateMetrics(c,l),{...l,processingTime:c,timestamp:Date.now(),modelsUsed:Object.keys(a),confidence:this.calculateOverallConfidence(a)}}catch(s){return console.error("ANN Classification Error:",s),{threatDetected:!1,error:s.message,processingTime:performance.now()-i}}}async extractFeatures(e,n,r){var s;const i={textLength:typeof e=="string"?e.length:JSON.stringify(e).length,wordCount:this.countWords(e),sentenceCount:this.countSentences(e),snnAnomalyScore:((s=n==null?void 0:n.primaryThreat)==null?void 0:s.confidence)||0,snnThreatCount:(n==null?void 0:n.threatCount)||0,snnSeverity:this.encodeSeverity(n==null?void 0:n.severity),contextType:this.encodeContextType(r.type),timeOfDay:new Date().getHours(),dayOfWeek:new Date().getDay(),sentimentScore:await this.analyzeSentiment(e),emotionalIntensity:await this.analyzeEmotionalIntensity(e),formalityScore:this.analyzeFormalityLevel(e),urgencyIndicators:this.countUrgencyWords(e),authorityIndicators:this.countAuthorityWords(e),fearIndicators:this.countFearWords(e),trustIndicators:this.countTrustWords(e),...await this.extractDomainFeatures(e,r)};return this.normalizeFeatures(i)}async extractDomainFeatures(e,n){const r={};return n.type==="conversation"&&(r.conversationLength=n.messageCount||1,r.responseTime=n.responseTime||0,r.personalQuestions=this.countPersonalQuestions(e),r.compliments=this.countCompliments(e),r.gifts=this.countGiftOffers(e)),n.type==="transaction"&&(r.amountMentioned=this.extractMoneyAmount(e),r.urgencyLevel=this.calculateUrgencyLevel(e),r.authorityLevel=this.calculateAuthorityLevel(e),r.verificationRequests=this.countVerificationRequests(e)),n.type==="social_media"&&(r.hashtagCount=this.countHashtags(e),r.mentionCount=this.countMentions(e),r.linkCount=this.countLinks(e),r.emojiCount=this.countEmojis(e)),n.type==="health"&&(r.medicalTerms=this.countMedicalTerms(e),r.treatmentClaims=this.countTreatmentClaims(e),r.conspiracyIndicators=this.countConspiracyIndicators(e)),r}determineRelevantDomains(e,n){var i;const r=["network"];return e.type==="conversation"&&r.push("content","social","behavioral"),e.type==="transaction"&&r.push("financial"),e.type==="health"&&r.push("health"),(i=n==null?void 0:n.threats)!=null&&i.some(s=>s.type==="crisis_signal")&&r.push("emergency"),n!=null&&n.threats&&n.threats.forEach(s=>{s.type.includes("financial")&&r.push("financial"),s.type.includes("grooming")&&r.push("content","behavioral"),s.type.includes("health")&&r.push("health")}),[...new Set(r)]}async runModelPrediction(e,n,r){this.metrics.accuracy/100;const i=(Math.random()-.5)*.1;let s;switch(r){case"content":s=await this.predictContentThreats(n);break;case"financial":s=await this.predictFinancialThreats(n);break;case"social":s=await this.predictSocialThreats(n);break;case"health":s=await this.predictHealthThreats(n);break;case"behavioral":s=await this.predictBehavioralThreats(n);break;case"emergency":s=await this.predictEmergencySignals(n);break;default:s=await this.predictNetworkThreats(n)}return{...s,confidence:Math.max(0,Math.min(1,s.confidence+i)),domain:r}}async predictContentThreats(e){let n=0,r="safe";return e.personalQuestions>3&&e.compliments>2&&(n=Math.max(n,.8+e.gifts*.1),r="grooming_attempt"),e.fearIndicators>2&&(n=Math.max(n,.7),r="violence_content"),e.sentimentScore<-.5&&e.emotionalIntensity>.8&&(n=Math.max(n,.6),r="inappropriate_content"),{threatScore:n,threatType:r,confidence:n,category:"content_safety"}}async predictFinancialThreats(e){let n=0,r="safe";return e.urgencyIndicators>3&&e.amountMentioned>0&&(n=Math.max(n,.85),r="financial_scam"),e.authorityIndicators>2&&e.verificationRequests>1&&(n=Math.max(n,.75),r="phishing_attempt"),e.urgencyIndicators>2&&e.amountMentioned>1e3&&(n=Math.max(n,.7),r="investment_fraud"),{threatScore:n,threatType:r,confidence:n,category:"financial_protection"}}async predictSocialThreats(e){let n=0,r="safe";return e.trustIndicators>3&&e.personalQuestions>2&&(n=Math.max(n,.7),r="social_manipulation"),e.compliments>4&&e.conversationLength<5&&(n=Math.max(n,.65),r="dating_scam"),{threatScore:n,threatType:r,confidence:n,category:"social_protection"}}async predictHealthThreats(e){let n=0,r="safe";return e.medicalTerms>3&&e.conspiracyIndicators>1&&(n=Math.max(n,.8),r="health_misinformation"),e.treatmentClaims>2&&e.medicalTerms>5&&(n=Math.max(n,.75),r="dangerous_treatment"),{threatScore:n,threatType:r,confidence:n,category:"health_safety"}}async predictBehavioralThreats(e){let n=0,r="safe";return e.fearIndicators>3&&e.emotionalIntensity>.7&&(n=Math.max(n,.8),r="harassment"),e.personalQuestions>5&&e.conversationLength>10&&(n=Math.max(n,.7),r="stalking_behavior"),{threatScore:n,threatType:r,confidence:n,category:"behavioral_analysis"}}async predictEmergencySignals(e){let n=0,r="safe";return e.snnAnomalyScore>.9&&e.emotionalIntensity>.8&&(n=Math.max(n,.95),r="crisis_emergency"),e.sentimentScore<-.8&&e.fearIndicators>4&&(n=Math.max(n,.9),r="suicide_risk"),{threatScore:n,threatType:r,confidence:n,category:"emergency_response",emergency:n>.85}}async predictNetworkThreats(e){return{threatScore:e.snnAnomalyScore,threatType:"network_anomaly",confidence:e.snnAnomalyScore,category:"network_security"}}async ensembleDecision(e,n){if(Object.keys(e).length===0)return{threatDetected:!1,category:"safe",confidence:0};let r=null,i=0,s=!1;Object.values(e).forEach(c=>{c.confidence>i&&(i=c.confidence,r=c),c.emergency&&(s=!0)});const a={emergency:1,content:.95,financial:.9,behavioral:.85,social:.8,health:.75,network:.9};let o=0,l=0;return Object.values(e).forEach(c=>{const f=a[c.domain]||.5;o+=c.confidence*f,l+=f}),o=l>0?o/l:0,{threatDetected:o>.5,primaryThreat:r,ensembleScore:o,confidence:o,emergency:s,allPredictions:e,category:(r==null?void 0:r.category)||"unknown"}}calculateOverallConfidence(e){if(Object.keys(e).length===0)return 0;const n=Object.values(e).map(r=>r.confidence);return n.reduce((r,i)=>r+i,0)/n.length}updateMetrics(e,n){this.metrics.totalClassifications++,this.metrics.processingTime=this.metrics.processingTime*.9+e*.1,n.threatDetected&&n.confidence>.8&&this.metrics.correctPredictions++,this.metrics.accuracy=this.metrics.correctPredictions/this.metrics.totalClassifications*100}countWords(e){return typeof e!="string"?0:e.split(/\s+/).filter(n=>n.length>0).length}countSentences(e){return typeof e!="string"?0:e.split(/[.!?]+/).filter(n=>n.trim().length>0).length}encodeSeverity(e){return{safe:0,low:.2,medium:.5,high:.8,critical:.9,emergency:1}[e]||0}encodeContextType(e){return{conversation:.2,transaction:.4,browsing:.6,social_media:.8,health:1}[e]||0}async analyzeSentiment(e){if(typeof e!="string")return 0;const n=["good","great","excellent","amazing","wonderful","love","like"],r=["bad","terrible","awful","hate","horrible","sad","angry","hurt"],i=e.toLowerCase().split(/\s+/);let s=0;return i.forEach(a=>{n.includes(a)&&(s+=1),r.includes(a)&&(s-=1)}),Math.max(-1,Math.min(1,s/i.length))}async analyzeEmotionalIntensity(e){if(typeof e!="string")return 0;const n=["very","extremely","really","so","absolutely","completely"],r=(e.match(/[A-Z]/g)||[]).length/e.length,i=(e.match(/!/g)||[]).length;let s=0;return s+=n.filter(a=>e.toLowerCase().includes(a)).length*.2,s+=r*.5,s+=Math.min(i*.1,.3),Math.min(s,1)}analyzeFormalityLevel(e){if(typeof e!="string")return .5;const n=["please","thank","sir","madam","respectfully","sincerely"],r=["hey","yo","sup","lol","omg","wtf"],i=e.toLowerCase().split(/\s+/);let s=0,a=0;return i.forEach(o=>{n.some(l=>o.includes(l))&&s++,r.some(l=>o.includes(l))&&a++}),s>a?.8:.2}countUrgencyWords(e){return typeof e!="string"?0:["urgent","immediately","now","quickly","asap","emergency","hurry"].filter(r=>e.toLowerCase().includes(r)).length}countAuthorityWords(e){return typeof e!="string"?0:["police","government","bank","official","authority","legal","court"].filter(r=>e.toLowerCase().includes(r)).length}countFearWords(e){return typeof e!="string"?0:["danger","threat","risk","problem","trouble","warning","alert"].filter(r=>e.toLowerCase().includes(r)).length}countTrustWords(e){return typeof e!="string"?0:["trust","honest","reliable","safe","secure","verified","legitimate"].filter(r=>e.toLowerCase().includes(r)).length}normalizeFeatures(e){const n={};return Object.entries(e).forEach(([r,i])=>{typeof i=="number"?n[r]=Math.max(0,Math.min(1,i)):n[r]=i}),n}async loadNetworkModel(){return{type:"network",loaded:!0}}async loadContentSafetyModel(){return{type:"content",loaded:!0}}async loadFinancialFraudModel(){return{type:"financial",loaded:!0}}async loadSocialThreatModel(){return{type:"social",loaded:!0}}async loadHealthMisinfoModel(){return{type:"health",loaded:!0}}async loadBehavioralModel(){return{type:"behavioral",loaded:!0}}async loadEmergencyModel(){return{type:"emergency",loaded:!0}}async loadEnsembleModel(){return{type:"ensemble",loaded:!0}}countPersonalQuestions(e){return typeof e!="string"?0:["where do you","what is your","how old","what school","where live"].filter(r=>e.toLowerCase().includes(r)).length}countCompliments(e){return typeof e!="string"?0:["beautiful","pretty","smart","special","amazing","perfect"].filter(r=>e.toLowerCase().includes(r)).length}countGiftOffers(e){return typeof e!="string"?0:["gift","present","buy you","give you","send you"].filter(r=>e.toLowerCase().includes(r)).length}extractMoneyAmount(e){if(typeof e!="string")return 0;const n=/\$[\d,]+|\d+\s*dollars?|\d+\s*euros?/gi,r=e.match(n);return r?r.length:0}calculateUrgencyLevel(e){return this.countUrgencyWords(e)/10}calculateAuthorityLevel(e){return this.countAuthorityWords(e)/5}countVerificationRequests(e){return typeof e!="string"?0:["verify","confirm","validate","authenticate","check"].filter(r=>e.toLowerCase().includes(r)).length}countHashtags(e){return typeof e!="string"?0:(e.match(/#\w+/g)||[]).length}countMentions(e){return typeof e!="string"?0:(e.match(/@\w+/g)||[]).length}countLinks(e){return typeof e!="string"?0:(e.match(/https?:\/\/\S+/g)||[]).length}countEmojis(e){return typeof e!="string"?0:(e.match(/[\u{1F600}-\u{1F64F}]|[\u{1F300}-\u{1F5FF}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]/gu)||[]).length}countMedicalTerms(e){return typeof e!="string"?0:["doctor","medicine","treatment","cure","therapy","diagnosis","symptom"].filter(r=>e.toLowerCase().includes(r)).length}countTreatmentClaims(e){return typeof e!="string"?0:["cures","heals","treats","fixes","eliminates","prevents"].filter(r=>e.toLowerCase().includes(r)).length}countConspiracyIndicators(e){return typeof e!="string"?0:["conspiracy","cover-up","hidden","secret","they dont want","big pharma"].filter(r=>e.toLowerCase().includes(r)).length}}class PSe{constructor(){this.deviceProfile=this.detectDeviceCapabilities(),this.fraudPatterns=new Map,this.learningHistory=[],this.protectionStats={totalScamsBlocked:0,moneySaved:0,falsePositives:0,accuracy:.942,responseTime:.3},this.initializeOptimizedModels(),this.startContinuousImprovement()}detectDeviceCapabilities(){var i;const e=navigator.deviceMemory||4,n=navigator.hardwareConcurrency||4,r=((i=navigator.connection)==null?void 0:i.effectiveType)||"4g";return{ram:e,cores:n,connection:r,tier:e>=6?"flagship":e>=4?"midRange":"budget",batteryOptimized:e<4||r==="slow-2g"}}initializeOptimizedModels(){const e=this.getOptimalConfiguration();this.snnModels={phishingDetector:new hv({neurons:800,layers:3,specialization:"url_analysis",patterns:["suspicious_domains","typosquatting","url_shorteners"],ramUsage:2}),transactionAnomalyDetector:new hv({neurons:1e3,layers:3,specialization:"transaction_patterns",patterns:["unusual_amounts","velocity_anomalies","location_mismatches"],ramUsage:3}),socialEngineeringDetector:new hv({neurons:600,layers:2,specialization:"communication_analysis",patterns:["urgency_tactics","authority_impersonation","emotional_manipulation"],ramUsage:2.5}),investmentScamDetector:new hv({neurons:500,layers:2,specialization:"investment_offers",patterns:["unrealistic_returns","pressure_tactics","fake_testimonials"],ramUsage:2})},this.annModels={fraudClassifier:new FSe({modelPath:e.tier==="budget"?"fraud_micro_int8.tflite":"fraud_classifier_int8.tflite",categories:["phishing","romance_scam","investment_fraud","tech_support_scam","fake_charity","advance_fee_fraud","identity_theft","crypto_scam"],ramUsage:e.tier==="budget"?5:15,inferenceTime:e.tier==="flagship"?12:e.tier==="midRange"?22:35}),riskAssessor:e.tier!=="budget"?new LSe({modelPath:"risk_assessment_int8.tflite",factors:["user_profile","transaction_context","behavioral_patterns","external_signals"],ramUsage:10,inferenceTime:8}):null},this.resourceManager=new BSe({maxRAM:e.maxRAM,maxCPU:e.maxCPU,batteryOptimized:this.deviceProfile.batteryOptimized})}getOptimalConfiguration(){switch(this.deviceProfile.tier){case"flagship":return{maxRAM:150,maxCPU:15,inferenceInterval:100,modelsEnabled:["all"],cloudOffloading:!1};case"midRange":return{maxRAM:80,maxCPU:20,inferenceInterval:200,modelsEnabled:["phishing","transaction","social","classifier"],cloudOffloading:!0};case"budget":return{maxRAM:50,maxCPU:25,inferenceInterval:500,modelsEnabled:["phishing","transaction","micro_classifier"],cloudOffloading:!0,batterySaver:!0}}}async detectFraud(e){const n=performance.now();try{const r=await this.runSNNDetection(e);if(r.threatDetected&&r.confidence>.7){const i=await this.runANNClassification(e,r),s=this.combineResults(r,i);this.learnFromDetection(e,r,i,s);const a=performance.now()-n;return this.updatePerformanceMetrics(a),s}return{isFraud:!1,confidence:1-r.confidence,processingTime:performance.now()-n,method:"snn_screening"}}catch(r){return console.error("Fraud detection error:",r),{isFraud:!1,confidence:0,error:r.message,processingTime:performance.now()-n}}}async runSNNDetection(e){const n=Object.entries(this.snnModels).map(async([a,o])=>{const l=await o.detect(e);return{name:a,...l}}),r=await Promise.all(n),i=Math.max(...r.map(a=>a.confidence)),s=r.filter(a=>a.confidence>.7).map(a=>a.name);return{threatDetected:i>.7,confidence:i,threatTypes:s,details:r,processingTime:Math.max(...r.map(a=>a.processingTime))}}async runANNClassification(e,n){const r=this.annModels.fraudClassifier,i=this.annModels.riskAssessor,s=await r.classify(e,{context:n.threatTypes,priorConfidence:n.confidence});let a=null;return i&&!this.deviceProfile.batteryOptimized&&(a=await i.assess(e,s)),{classification:s,riskAssessment:a,processingTime:s.processingTime+((a==null?void 0:a.processingTime)||0)}}combineResults(e,n){var c;const r=e.confidence,i=n.classification.confidence,s=r*.3+i*.7,a=s>.8,o=n.classification.category,l=((c=n.riskAssessment)==null?void 0:c.level)||(s>.95?"critical":s>.9?"high":s>.8?"medium":"low");return{isFraud:a,confidence:s,fraudType:o,riskLevel:l,snnResults:e,annResults:n,recommendation:this.generateRecommendation(a,o,l),protectionActions:this.generateProtectionActions(a,o,l)}}generateRecommendation(e,n,r){return e?{phishing:{action:"block",message:"This appears to be a phishing attempt. Do not click links or provide personal information.",steps:["Do not click any links in this message","Verify the sender through official channels","Report this message as phishing","Delete the message immediately"]},romance_scam:{action:"warn",message:"This conversation shows signs of a romance scam. Be extremely cautious.",steps:["Never send money to someone you have not met in person","Be suspicious of requests for financial help","Verify the person's identity through video calls","Consult with friends or family before taking any action"]},investment_fraud:{action:"block",message:"This investment opportunity shows signs of fraud. Do not invest.",steps:["Research the company through official regulatory websites","Be wary of guaranteed high returns","Consult with a licensed financial advisor","Report suspicious investment offers"]},tech_support_scam:{action:"block",message:"This appears to be a tech support scam. Legitimate companies do not contact you unsolicited.",steps:["Hang up immediately if called","Do not allow remote access to your computer","Contact the company directly using official numbers","Run your own antivirus scan if concerned"]}}[n]||{action:"warn",message:"Potential fraud detected. Exercise extreme caution.",steps:["Verify through official channels","Do not provide personal information","Seek advice from trusted sources"]}:{action:"proceed",message:"Transaction appears safe to proceed",confidence:"high"}}generateProtectionActions(e,n,r){if(!e)return[];const i=[];return r==="critical"&&(i.push({type:"immediate_block",description:"Block all communication from this source",automated:!0}),i.push({type:"alert_contacts",description:"Alert emergency contacts about potential fraud attempt",automated:!1,requiresConsent:!0})),(r==="high"||r==="critical")&&(i.push({type:"freeze_accounts",description:"Temporarily freeze linked financial accounts",automated:!1,requiresConsent:!0}),i.push({type:"report_authorities",description:"Report to relevant fraud prevention authorities",automated:!1,requiresConsent:!0})),i.push({type:"update_patterns",description:"Update fraud detection patterns based on this attempt",automated:!0}),i.push({type:"share_intelligence",description:"Share anonymized threat intelligence with protection network",automated:!0,requiresConsent:!1}),i}learnFromDetection(e,n,r,i){const s={timestamp:Date.now(),input:this.sanitizeInput(e),snnResults:n,annResults:r,finalDecision:i,deviceProfile:this.deviceProfile,userFeedback:null};this.learningHistory.push(s),this.learningHistory.length>1e3&&(this.learningHistory=this.learningHistory.slice(-1e3)),this.updateFraudPatterns(s),this.learningHistory.length%100===0&&this.scheduleModelUpdate()}updateFraudPatterns(e){const{input:n,finalDecision:r}=e;if(r.isFraud){const i=this.extractPattern(n),s=this.fraudPatterns.get(i.signature);s?(s.count++,s.lastSeen=Date.now(),s.confidence=Math.min(.99,s.confidence+.01)):this.fraudPatterns.set(i.signature,{pattern:i,count:1,firstSeen:Date.now(),lastSeen:Date.now(),confidence:.7,fraudType:r.fraudType})}}extractPattern(e){return{signature:this.generateSignature(e),features:{hasUrgentLanguage:/urgent|immediate|act now|limited time/i.test(e.text||""),hasMoneyRequest:/money|payment|transfer|wire|bitcoin/i.test(e.text||""),hasSuspiciousLinks:this.detectSuspiciousLinks(e.urls||[]),hasEmotionalManipulation:this.detectEmotionalManipulation(e.text||""),hasAuthorityImpersonation:this.detectAuthorityImpersonation(e.text||"")}}}generateSignature(e){const n=[];if(e.text){const r=this.extractKeyPhrases(e.text);n.push(...r)}if(e.urls){const r=e.urls.map(i=>this.extractDomainPattern(i));n.push(...r)}return e.sender&&n.push(this.extractSenderPattern(e.sender)),n.sort().join("|")}scheduleModelUpdate(){this.updateScheduled||(this.updateScheduled=!0,window.requestIdleCallback?window.requestIdleCallback(()=>{this.performModelUpdate(),this.updateScheduled=!1}):setTimeout(()=>{this.performModelUpdate(),this.updateScheduled=!1},5e3))}async performModelUpdate(){try{const e=this.learningHistory.slice(-100);for(const[n,r]of Object.entries(this.snnModels))await r.updateWithNewData(e);this.updatePatternConfidences(),this.updateAccuracyMetrics(),console.log(" Models updated with new fraud patterns")}catch(e){console.error("Model update failed:",e)}}updatePatternConfidences(){const e=Date.now(),n=7*24*60*60*1e3;for(const[r,i]of this.fraudPatterns.entries()){const s=e-i.lastSeen;s>n&&(i.confidence*=.95,i.confidence<.3&&s>n*4&&this.fraudPatterns.delete(r))}}updateAccuracyMetrics(){const e=this.learningHistory.slice(-50);if(e.length>0){const n=e.filter(i=>i.userFeedback!==null);if(n.length>10){const i=n.filter(s=>s.finalDecision.isFraud===s.userFeedback.wasFraud).length;this.protectionStats.accuracy=i/n.length}const r=e.reduce((i,s)=>{var a;return i+(s.finalDecision.snnResults.processingTime+(((a=s.finalDecision.annResults)==null?void 0:a.processingTime)||0))},0)/e.length;this.protectionStats.responseTime=r}}updatePerformanceMetrics(e){this.protectionStats.responseTime=this.protectionStats.responseTime*.9+e*.1}startContinuousImprovement(){setInterval(()=>{this.performDailyImprovement()},24*60*60*1e3),setInterval(()=>{this.optimizeResources()},60*1e3)}performDailyImprovement(){console.log(" Starting daily improvement cycle...");const e=Date.now()-24*60*60*1e3,n=this.learningHistory.filter(r=>r.timestamp>e);this.updatePatternDatabase(n),this.optimizeModelPerformance(),this.updateProtectionStatistics(n),console.log(" Daily improvement cycle completed")}updatePatternDatabase(e){const n=e.filter(r=>r.finalDecision.isFraud).map(r=>this.extractPattern(r.input)).filter(r=>!this.fraudPatterns.has(r.signature));console.log(` Identified ${n.length} new fraud patterns`),n.forEach(r=>{this.fraudPatterns.set(r.signature,{pattern:r,count:1,firstSeen:Date.now(),lastSeen:Date.now(),confidence:.7,fraudType:"unknown"})})}optimizeModelPerformance(){const e=this.protectionStats.accuracy,n=this.protectionStats.responseTime;e<.92&&this.increaseANNUsage(),n>50&&this.optimizeForSpeed(),console.log(` Performance: ${(e*100).toFixed(1)}% accuracy, ${n.toFixed(1)}ms response time`)}increaseANNUsage(){Object.values(this.snnModels).forEach(e=>{e.confidenceThreshold=Math.max(.5,e.confidenceThreshold-.05)}),console.log(" Increased ANN usage for better accuracy")}optimizeForSpeed(){Object.values(this.snnModels).forEach(e=>{e.confidenceThreshold=Math.min(.8,e.confidenceThreshold+.05)}),console.log(" Optimized for faster response times")}updateProtectionStatistics(e){const n=e.filter(s=>s.finalDecision.isFraud);this.protectionStats.totalScamsBlocked+=n.length;const r={phishing:500,romance_scam:5e3,investment_fraud:1e4,tech_support_scam:300,fake_charity:200,advance_fee_fraud:2e3,identity_theft:1500,crypto_scam:8e3},i=n.reduce((s,a)=>{const o=a.finalDecision.fraudType;return s+(r[o]||1e3)},0);this.protectionStats.moneySaved+=i,console.log(` Protected customers from $${i.toLocaleString()} in potential fraud losses`)}optimizeResources(){const e=this.resourceManager.getCurrentMemoryUsage(),n=this.resourceManager.getCurrentCPUUsage(),r=this.resourceManager.getBatteryLevel();e>.8||n>.8||r<.2?this.enterResourceSavingMode():e<.5&&n<.5&&r>.5&&this.enterFullProtectionMode()}enterResourceSavingMode(){this.annModels.riskAssessor&&this.annModels.riskAssessor.disable(),this.inferenceInterval=1e3,Object.entries(this.snnModels).forEach(([e,n])=>{e!=="phishingDetector"&&e!=="transactionAnomalyDetector"&&n.disable()}),console.log(" Entered resource saving mode")}enterFullProtectionMode(){Object.values(this.snnModels).forEach(e=>e.enable()),this.annModels.riskAssessor&&this.annModels.riskAssessor.enable(),this.inferenceInterval=this.getOptimalConfiguration().inferenceInterval,console.log(" Entered full protection mode")}getProtectionStats(){return{...this.protectionStats,fraudPatternsKnown:this.fraudPatterns.size,learningExamples:this.learningHistory.length,deviceOptimization:this.deviceProfile.tier,resourceUsage:{ram:this.resourceManager.getCurrentMemoryUsage(),cpu:this.resourceManager.getCurrentCPUUsage(),battery:this.resourceManager.getBatteryLevel()}}}provideFeedback(e,n){const r=this.learningHistory.find(i=>i.id===e);r&&(r.userFeedback=n,n.wasFraud!==r.finalDecision.isFraud&&this.adjustModelsBasedOnFeedback(r,n),console.log(" User feedback incorporated for continuous improvement"))}adjustModelsBasedOnFeedback(e,n){const r=this.findRelevantSNNModel(e.input);r&&(n.wasFraud&&!e.finalDecision.isFraud?r.increaseSensitivity():!n.wasFraud&&e.finalDecision.isFraud&&r.decreaseSensitivity())}sanitizeInput(e){return{text:e.text?e.text.replace(/\b\d{4}[\s-]?\d{4}[\s-]?\d{4}[\s-]?\d{4}\b/g,"[CARD]"):null,urls:e.urls?e.urls.map(n=>new URL(n).hostname):null,sender:e.sender?e.sender.replace(/@.*/,"@[DOMAIN]"):null,type:e.type,timestamp:e.timestamp}}}class hv{constructor(e){this.config=e,this.neurons=e.neurons,this.layers=e.layers,this.specialization=e.specialization,this.patterns=e.patterns,this.ramUsage=e.ramUsage,this.enabled=!0,this.confidenceThreshold=.7}async detect(e){if(!this.enabled)return{confidence:0,processingTime:0};const n=performance.now(),r=this.generateSpikes(e),i=this.processSpikes(r),s=performance.now()-n;return{confidence:i,processingTime:s,spikes:r.length,specialization:this.specialization}}generateSpikes(e){const n=[];return this.patterns.forEach(r=>{const i=this.findPatternMatches(e,r);n.push(...i)}),n}findPatternMatches(e,n){const r=[];switch(n){case"suspicious_domains":e.urls&&e.urls.forEach(i=>{this.isSuspiciousDomain(i)&&r.push({type:"domain",confidence:.8,url:i})});break;case"urgency_tactics":e.text&&/urgent|immediate|act now|expires|limited time/i.test(e.text)&&r.push({type:"urgency",confidence:.7});break;case"unusual_amounts":e.amount&&(e.amount>1e4||e.amount<.01)&&r.push({type:"amount",confidence:.6,amount:e.amount});break}return r}processSpikes(e){if(e.length===0)return 0;const n=e.reduce((i,s)=>i+s.confidence,0)/e.length,r=Math.min(e.length/10,1);return Math.min(n*r,.99)}isSuspiciousDomain(e){try{const n=new URL(e).hostname.toLowerCase();return[/paypal.*secure/,/amazon.*verify/,/bank.*update/,/microsoft.*support/,/apple.*security/,/\d+\.\d+\.\d+\.\d+/,/[a-z]{20,}\.com/,/.*-.*-.*-.*\./].some(i=>i.test(n))}catch{return!0}}async updateWithNewData(e){e.filter(r=>r.finalDecision.isFraud).forEach(r=>{const i=this.extractNewPatterns(r.input);this.patterns.push(...i)}),this.patterns=[...new Set(this.patterns)]}extractNewPatterns(e){const n=[];if(e.text){const r=e.text.match(/\b(?:urgent|verify|suspended|click here|act now)\b/gi);r&&n.push(...r.map(i=>i.toLowerCase()))}return n}enable(){this.enabled=!0}disable(){this.enabled=!1}increaseSensitivity(){this.confidenceThreshold=Math.max(.5,this.confidenceThreshold-.05)}decreaseSensitivity(){this.confidenceThreshold=Math.min(.9,this.confidenceThreshold+.05)}}class FSe{constructor(e){this.config=e,this.modelPath=e.modelPath,this.categories=e.categories,this.ramUsage=e.ramUsage,this.inferenceTime=e.inferenceTime,this.enabled=!0}async classify(e,n={}){if(!this.enabled)return{confidence:0,category:"unknown",processingTime:0};const r=performance.now();await this.simulateInference();const i=this.determineCategory(e,n),s=this.calculateConfidence(e,i,n),a=performance.now()-r;return{category:i,confidence:s,processingTime:a,model:this.modelPath}}async simulateInference(){return new Promise(e=>{setTimeout(e,this.inferenceTime)})}determineCategory(e,n){if(e.urls&&e.urls.some(r=>this.isPhishingURL(r)))return"phishing";if(e.text){const r=e.text.toLowerCase();if(r.includes("love")&&r.includes("money"))return"romance_scam";if(r.includes("investment")&&r.includes("guaranteed"))return"investment_fraud";if(r.includes("microsoft")&&r.includes("virus"))return"tech_support_scam";if(r.includes("charity")&&r.includes("donate"))return"fake_charity";if(r.includes("bitcoin")&&r.includes("profit"))return"crypto_scam";if(r.includes("fee")&&r.includes("advance"))return"advance_fee_fraud";if(r.includes("identity")&&r.includes("verify"))return"identity_theft"}return"unknown"}calculateConfidence(e,n,r){let i=.5;return r.priorConfidence&&(i+=r.priorConfidence*.3),n!=="unknown"&&(i+=.3),e.urls&&e.urls.length>0&&(i+=.1),e.text&&e.text.length>100&&(i+=.1),Math.min(i,.99)}isPhishingURL(e){try{const n=new URL(e).hostname.toLowerCase();return["paypal-secure","amazon-verify","microsoft-support","apple-security","bank-update"].some(i=>n.includes(i))}catch{return!1}}enable(){this.enabled=!0}disable(){this.enabled=!1}}class LSe{constructor(e){this.config=e,this.modelPath=e.modelPath,this.factors=e.factors,this.ramUsage=e.ramUsage,this.inferenceTime=e.inferenceTime,this.enabled=!0}async assess(e,n){if(!this.enabled)return{level:"unknown",score:0,processingTime:0};const r=performance.now();await this.simulateInference();const i=this.calculateRiskScore(e,n),s=this.determineRiskLevel(i),a=performance.now()-r;return{level:s,score:i,factors:this.analyzeRiskFactors(e,n),processingTime:a}}async simulateInference(){return new Promise(e=>{setTimeout(e,this.inferenceTime)})}calculateRiskScore(e,n){let r=n.confidence*.5;return e.amount&&e.amount>5e3&&(r+=.2),e.urgency&&(r+=.15),e.sender&&this.isUnknownSender(e.sender)&&(r+=.1),e.urls&&e.urls.length>3&&(r+=.1),Math.min(r,1)}determineRiskLevel(e){return e>=.9?"critical":e>=.7?"high":e>=.5?"medium":e>=.3?"low":"minimal"}analyzeRiskFactors(e,n){const r=[];return n.confidence>.8&&r.push({type:"high_fraud_confidence",impact:"high"}),e.amount&&e.amount>1e4&&r.push({type:"large_amount",impact:"high",value:e.amount}),e.urgency&&r.push({type:"urgency_pressure",impact:"medium"}),r}isUnknownSender(e){const n=["bank.com","paypal.com","amazon.com"];try{const r=e.split("@")[1];return!n.includes(r)}catch{return!0}}enable(){this.enabled=!0}disable(){this.enabled=!1}}class BSe{constructor(e){this.config=e,this.maxRAM=e.maxRAM,this.maxCPU=e.maxCPU,this.batteryOptimized=e.batteryOptimized,this.monitoring={ram:{current:0,peak:0},cpu:{current:0,average:0},battery:{level:1,isCharging:!1}},this.startMonitoring()}startMonitoring(){setInterval(()=>{this.updateMetrics()},5e3)}async updateMetrics(){if(performance.memory&&(this.monitoring.ram.current=Math.round(performance.memory.usedJSHeapSize/1048576),this.monitoring.ram.peak=Math.max(this.monitoring.ram.peak,this.monitoring.ram.current)),navigator.getBattery)try{const r=await navigator.getBattery();this.monitoring.battery.level=r.level,this.monitoring.battery.isCharging=r.charging}catch{}const e=performance.now();await this.runCPUBenchmark();const n=performance.now()-e;this.monitoring.cpu.current=Math.min(n/10,100),this.monitoring.cpu.average=this.monitoring.cpu.average*.9+this.monitoring.cpu.current*.1}async runCPUBenchmark(){let e=0;for(let n=0;n<1e4;n++)e+=Math.sqrt(n);return e}getCurrentMemoryUsage(){return this.monitoring.ram.current/this.maxRAM}getCurrentCPUUsage(){return this.monitoring.cpu.average/100}getBatteryLevel(){return this.monitoring.battery.level}isResourceConstrained(){return this.getCurrentMemoryUsage()>.8||this.getCurrentCPUUsage()>.8||this.getBatteryLevel()<.2&&!this.monitoring.battery.isCharging}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zSe=1e-7,jSe=1e-4;class Z8{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class UN{refCount(e){return ni("refCount")}incRef(e){return ni("incRef")}timerAvailable(){return!0}time(e){return ni("time")}read(e){return ni("read")}readSync(e){return ni("readSync")}readToGPU(e,n){return ni("readToGPU")}numDataIds(){return ni("numDataIds")}disposeData(e,n){return ni("disposeData")}write(e,n,r){return ni("write")}move(e,n,r,i,s){return ni("move")}createTensorFromGPUData(e,n,r){return ni("createTensorFromGPUData")}memory(){return ni("memory")}floatPrecision(){return ni("floatPrecision")}epsilon(){return this.floatPrecision()===32?zSe:jSe}dispose(){return ni("dispose")}}function ni(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VSe(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,Du(t,e,n)}function dc(t,e,n){return Math.max(t,Math.min(e,n))}function WN(t){return t%2===0?t:t+1}function Du(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function USe(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function U(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function GN(t,e,n=""){U(Et(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function Q8(t){U(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function ve(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function Et(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Af(t){return t%1===0}function gE(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function Xu(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function FU(t,e=i=>0,n,r){return new Promise((i,s)=>{let a=0;const o=()=>{if(t()){i();return}a++;const l=e(a);if(n!=null&&a>=n){s();return}r!=null?r(o,l):setTimeout(o,l)};o()})}function J8(t,e){let n=1,r=-1;for(let s=0;s<t.length;++s)if(t[s]>=0)n*=t[s];else if(t[s]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${s}`);r=s}else if(t[s]<0)throw Error(`Shapes can not be < 0. Found ${t[s]} at dim ${s}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const i=t.slice();return i[r]=e/n,i}function ot(t,e){const n=e.length;return t=t==null?e.map((r,i)=>i):[].concat(t),U(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),U(t.every(r=>Af(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function ol(t,e){const n=[],r=[],i=e!=null&&Array.isArray(e)&&e.length===0,s=e==null||i?null:ot(e,t).sort();let a=0;for(let o=0;o<t.length;++o){if(s!=null){if(s[a]===o&&t[o]!==1)throw new Error(`Can't squeeze axis ${o} since its dim '${t[o]}' is not 1`);(s[a]==null||s[a]>o)&&t[o]===1&&(n.push(t[o]),r.push(o)),s[a]<=o&&a++}t[o]!==1&&(n.push(t[o]),r.push(o))}return{newShape:n,keptDims:r}}function mr(t,e){return gn(t,e)}function gn(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function WSe(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function GSe(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function eK(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function Ub(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function qSe(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function gm(t){return typeof t=="string"||t instanceof String}function HSe(t){return typeof t=="boolean"}function yE(t){return typeof t=="number"}function Yf(t){return Array.isArray(t)?Yf(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":yE(t)?"float32":gm(t)?"string":HSe(t)?"bool":"float32"}function vE(t){return!!(t&&t.constructor&&t.call&&t.apply)}function bE(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function je(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function tK(t,e,n,r=!1){const i=new Array;if(e.length===1){const s=e[0]*(r?2:1);for(let a=0;a<s;a++)i[a]=n[t+a]}else{const s=e[0],a=e.slice(1),o=a.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<s;l++)i[l]=tK(t+l*o,a,n,r)}return i}function xs(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((i,s)=>i*s)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return tK(0,t,e,n)}function KSe(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function qN(t,e){const n=gr(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function gr(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function nK(t,e){const n=t.reduce((r,i)=>r*i,1);if(e==null||e==="float32")return xs(t,new Float32Array(n));if(e==="int32")return xs(t,new Int32Array(n));if(e==="bool")return xs(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function to(t){t.forEach(e=>{U(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function Ks(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let i=0;i<t.length-1;++i)r+=n[i]*t[i];return r}function Zf(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(t/n[i]),t-=r[i]*n[i];return r[r.length-1]=t,r}function HN(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LU="tfjsflags";class XSe{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=YSe,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const i=this.urlFlags[e];fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${i}.`),this.set(e,i)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(HN(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);LU in e&&e[LU].split(",").forEach(r=>{const[i,s]=r.split(":");this.urlFlags[i]=QSe(i,s)})}}function YSe(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(ZSe(e,r[0],r[1]),r.join("="))),e}function ZSe(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function QSe(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function fe(){return rK}let rK=null;function JSe(t){rK=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let u2;function iK(){if(u2==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");u2=t}return u2}function eCe(){const t=iK();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function KN(t,e){const n=eCe();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const tx="Abs",ym="Acos",vm="Acosh",Qf="Add",XN="AddN",YN="All",ZN="Any",nx="ArgMax",rx="ArgMin",bm="Asin",xm="Asinh",wm="Atan",Sm="Atanh",Cm="Atan2",ix="AvgPool",QN="AvgPoolGrad",sx="AvgPool3D",JN="AvgPool3DGrad",ax="BatchMatMul",ox="BatchToSpaceND",eO="Bincount",tO="BitwiseAnd",tCe="BroadcastTo",sK="BroadcastArgs",Tm="Cast",Am="Ceil",km="ClipByValue",nO="Complex",lx="ComplexAbs",cx="Concat",ux="Conv2D",rO="Conv2DBackpropFilter",fx="Conv2DBackpropInput",hx="Conv3D",iO="Conv3DBackpropFilterV2",sO="Conv3DBackpropInputV2",$m="Cos",Em="Cosh",aO="Cumprod",dx="Cumsum",oO="CropAndResize",lO="DenseBincount",cO="DepthToSpace",px="DepthwiseConv2dNative",uO="DepthwiseConv2dNativeBackpropFilter",fO="DepthwiseConv2dNativeBackpropInput",aK="Diag",mx="Dilation2D",xE="Dilation2DBackpropInput",wE="Dilation2DBackpropFilter",nCe="Draw",Im="RealDiv",hO="Einsum",Nm="Elu",dO="EluGrad",Om="Erf",gx="Equal",_m="Exp",yx="ExpandDims",Rm="Expm1",pO="FFT",mO="Fill",gO="FlipLeftRight",Dm="Floor",Mm="FloorDiv",vx="FusedBatchNorm",bx="GatherV2",oK="GatherNd",xx="Greater",Pm="GreaterEqual",Fm="Identity",yO="IFFT",vO="Imag",Lm="IsFinite",Bm="IsInf",zm="IsNan",wx="LeakyRelu",Sx="Less",Cx="LessEqual",lK="LinSpace",jm="Log",Vm="Log1p",Tx="LogicalAnd",Ax="LogicalNot",kx="LogicalOr",rCe="LogSoftmax",$x="LRN",bO="LRNGrad",Ex="Max",Um="Maximum",Ix="MaxPool",xO="MaxPoolGrad",Nx="MaxPool3D",wO="MaxPool3DGrad",cK="MaxPoolWithArgmax",Ox="Mean",_x="Min",Wm="Minimum",Rx="MirrorPad",Gm="Mod",uK="Multinomial",qm="Multiply",Dx="Neg",Mx="NotEqual",SO="NonMaxSuppressionV3",CO="NonMaxSuppressionV4",TO="NonMaxSuppressionV5",Px="OnesLike",Fx="OneHot",Lx="Pack",Bx="PadV2",Hm="Pow",zx="Prelu",jx="Prod",fK="RaggedGather",hK="RaggedRange",dK="RaggedTensorToTensor",AO="Range",kO="Real",Km="Reciprocal",Xm="Relu",Vx="Reshape",Ux="ResizeNearestNeighbor",$O="ResizeNearestNeighborGrad",Wx="ResizeBilinear",EO="ResizeBilinearGrad",Ym="Relu6",Gx="Reverse",Zm="Round",Qm="Rsqrt",pK="ScatterNd",mK="TensorScatterUpdate",gK="SearchSorted",qx="Select",Jm="Selu",Hx="Slice",eg="Sin",tg="Sinh",ng="Sign",rg="Sigmoid",ig="Softplus",sg="Sqrt",Kx="Sum",Xx="SpaceToBatchND",Yx="SplitV",Zx="Softmax",yK="SparseFillEmptyRows",vK="SparseReshape",bK="SparseSegmentMean",xK="SparseSegmentSum",wK="SparseToDense",ag="SquaredDifference",IO="Square",NO="StaticRegexReplace",OO="StridedSlice",SK="StringNGrams",CK="StringSplit",TK="StringToHashBucketFast",og="Sub",lg="Tan",cg="Tanh",ug="Tile",_O="TopK",RO="Transform",Yu="Transpose",DO="Unique",Qx="Unpack",Jx="UnsortedSegmentSum",e1="ZerosLike",fg="Step",iCe="FromPixels",MO="RotateWithOffset",Wb="_FusedMatMul",Gb="FusedConv2D",AK="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Si(...t){fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(...t)}function sCe(...t){fe().getBool("IS_TEST")||fe().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qb=KN("kernelRegistry",()=>new Map),SE=KN("gradRegistry",()=>new Map);function BU(t,e){const n=$K(t,e);return qb.get(n)}function zU(t){return SE.get(t)}function jU(t){const e=qb.entries(),n=[];for(;;){const{done:r,value:i}=e.next();if(r)break;const[s,a]=i,[o]=s.split("_");o===t&&n.push(a)}return n}function kK(t){const{kernelName:e,backendName:n}=t,r=$K(e,n);qb.has(r)&&Si(`The kernel '${e}' for backend '${n}' is already registered`),qb.set(r,t)}function aCe(t){const{kernelName:e}=t;SE.has(e)&&fe().getBool("DEBUG")&&Si(`Overriding the gradient for '${e}'`),SE.set(e,t)}function $K(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EK(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var f2,VU;function oCe(){if(VU)return f2;VU=1,f2=e;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function e(R,O,F){this.low=R|0,this.high=O|0,this.unsigned=!!F}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0});function n(R){return(R&&R.__isLong__)===!0}e.isLong=n;var r={},i={};function s(R,O){var F,z,W;return O?(R>>>=0,(W=0<=R&&R<256)&&(z=i[R],z)?z:(F=o(R,(R|0)<0?-1:0,!0),W&&(i[R]=F),F)):(R|=0,(W=-128<=R&&R<128)&&(z=r[R],z)?z:(F=o(R,R<0?-1:0,!1),W&&(r[R]=F),F))}e.fromInt=s;function a(R,O){if(isNaN(R))return O?S:w;if(O){if(R<0)return S;if(R>=y)return I}else{if(R<=-9223372036854776e3)return N;if(R+1>=x)return E}return R<0?a(-R,O).neg():o(R%g|0,R/g|0,O)}e.fromNumber=a;function o(R,O,F){return new e(R,O,F)}e.fromBits=o;var l=Math.pow;function c(R,O,F){if(R.length===0)throw Error("empty string");if(R==="NaN"||R==="Infinity"||R==="+Infinity"||R==="-Infinity")return w;if(typeof O=="number"?(F=O,O=!1):O=!!O,F=F||10,F<2||36<F)throw RangeError("radix");var z;if((z=R.indexOf("-"))>0)throw Error("interior hyphen");if(z===0)return c(R.substring(1),O,F).neg();for(var W=a(l(F,8)),P=w,M=0;M<R.length;M+=8){var j=Math.min(8,R.length-M),V=parseInt(R.substring(M,M+j),F);if(j<8){var q=a(l(F,j));P=P.mul(q).add(a(V))}else P=P.mul(W),P=P.add(a(V))}return P.unsigned=O,P}e.fromString=c;function f(R,O){return typeof R=="number"?a(R,O):typeof R=="string"?c(R,O):o(R.low,R.high,typeof O=="boolean"?O:R.unsigned)}e.fromValue=f;var d=65536,p=1<<24,g=d*d,y=g*g,x=y/2,b=s(p),w=s(0);e.ZERO=w;var S=s(0,!0);e.UZERO=S;var T=s(1);e.ONE=T;var k=s(1,!0);e.UONE=k;var A=s(-1);e.NEG_ONE=A;var E=o(-1,2147483647,!1);e.MAX_VALUE=E;var I=o(-1,-1,!0);e.MAX_UNSIGNED_VALUE=I;var N=o(0,-2147483648,!1);e.MIN_VALUE=N;var _=e.prototype;return _.toInt=function(){return this.unsigned?this.low>>>0:this.low},_.toNumber=function(){return this.unsigned?(this.high>>>0)*g+(this.low>>>0):this.high*g+(this.low>>>0)},_.toString=function(O){if(O=O||10,O<2||36<O)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(N)){var F=a(O),z=this.div(F),W=z.mul(F).sub(this);return z.toString(O)+W.toInt().toString(O)}else return"-"+this.neg().toString(O);for(var P=a(l(O,6),this.unsigned),M=this,j="";;){var V=M.div(P),q=M.sub(V.mul(P)).toInt()>>>0,L=q.toString(O);if(M=V,M.isZero())return L+j;for(;L.length<6;)L="0"+L;j=""+L+j}},_.getHighBits=function(){return this.high},_.getHighBitsUnsigned=function(){return this.high>>>0},_.getLowBits=function(){return this.low},_.getLowBitsUnsigned=function(){return this.low>>>0},_.getNumBitsAbs=function(){if(this.isNegative())return this.eq(N)?64:this.neg().getNumBitsAbs();for(var O=this.high!=0?this.high:this.low,F=31;F>0&&(O&1<<F)==0;F--);return this.high!=0?F+33:F+1},_.isZero=function(){return this.high===0&&this.low===0},_.eqz=_.isZero,_.isNegative=function(){return!this.unsigned&&this.high<0},_.isPositive=function(){return this.unsigned||this.high>=0},_.isOdd=function(){return(this.low&1)===1},_.isEven=function(){return(this.low&1)===0},_.equals=function(O){return n(O)||(O=f(O)),this.unsigned!==O.unsigned&&this.high>>>31===1&&O.high>>>31===1?!1:this.high===O.high&&this.low===O.low},_.eq=_.equals,_.notEquals=function(O){return!this.eq(O)},_.neq=_.notEquals,_.ne=_.notEquals,_.lessThan=function(O){return this.comp(O)<0},_.lt=_.lessThan,_.lessThanOrEqual=function(O){return this.comp(O)<=0},_.lte=_.lessThanOrEqual,_.le=_.lessThanOrEqual,_.greaterThan=function(O){return this.comp(O)>0},_.gt=_.greaterThan,_.greaterThanOrEqual=function(O){return this.comp(O)>=0},_.gte=_.greaterThanOrEqual,_.ge=_.greaterThanOrEqual,_.compare=function(O){if(n(O)||(O=f(O)),this.eq(O))return 0;var F=this.isNegative(),z=O.isNegative();return F&&!z?-1:!F&&z?1:this.unsigned?O.high>>>0>this.high>>>0||O.high===this.high&&O.low>>>0>this.low>>>0?-1:1:this.sub(O).isNegative()?-1:1},_.comp=_.compare,_.negate=function(){return!this.unsigned&&this.eq(N)?N:this.not().add(T)},_.neg=_.negate,_.add=function(O){n(O)||(O=f(O));var F=this.high>>>16,z=this.high&65535,W=this.low>>>16,P=this.low&65535,M=O.high>>>16,j=O.high&65535,V=O.low>>>16,q=O.low&65535,L=0,G=0,H=0,K=0;return K+=P+q,H+=K>>>16,K&=65535,H+=W+V,G+=H>>>16,H&=65535,G+=z+j,L+=G>>>16,G&=65535,L+=F+M,L&=65535,o(H<<16|K,L<<16|G,this.unsigned)},_.subtract=function(O){return n(O)||(O=f(O)),this.add(O.neg())},_.sub=_.subtract,_.multiply=function(O){if(this.isZero())return w;if(n(O)||(O=f(O)),t){var F=t.mul(this.low,this.high,O.low,O.high);return o(F,t.get_high(),this.unsigned)}if(O.isZero())return w;if(this.eq(N))return O.isOdd()?N:w;if(O.eq(N))return this.isOdd()?N:w;if(this.isNegative())return O.isNegative()?this.neg().mul(O.neg()):this.neg().mul(O).neg();if(O.isNegative())return this.mul(O.neg()).neg();if(this.lt(b)&&O.lt(b))return a(this.toNumber()*O.toNumber(),this.unsigned);var z=this.high>>>16,W=this.high&65535,P=this.low>>>16,M=this.low&65535,j=O.high>>>16,V=O.high&65535,q=O.low>>>16,L=O.low&65535,G=0,H=0,K=0,oe=0;return oe+=M*L,K+=oe>>>16,oe&=65535,K+=P*L,H+=K>>>16,K&=65535,K+=M*q,H+=K>>>16,K&=65535,H+=W*L,G+=H>>>16,H&=65535,H+=P*q,G+=H>>>16,H&=65535,H+=M*V,G+=H>>>16,H&=65535,G+=z*L+W*q+P*V+M*j,G&=65535,o(K<<16|oe,G<<16|H,this.unsigned)},_.mul=_.multiply,_.divide=function(O){if(n(O)||(O=f(O)),O.isZero())throw Error("division by zero");if(t){if(!this.unsigned&&this.high===-2147483648&&O.low===-1&&O.high===-1)return this;var F=(this.unsigned?t.div_u:t.div_s)(this.low,this.high,O.low,O.high);return o(F,t.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?S:w;var z,W,P;if(this.unsigned){if(O.unsigned||(O=O.toUnsigned()),O.gt(this))return S;if(O.gt(this.shru(1)))return k;P=S}else{if(this.eq(N)){if(O.eq(T)||O.eq(A))return N;if(O.eq(N))return T;var M=this.shr(1);return z=M.div(O).shl(1),z.eq(w)?O.isNegative()?T:A:(W=this.sub(O.mul(z)),P=z.add(W.div(O)),P)}else if(O.eq(N))return this.unsigned?S:w;if(this.isNegative())return O.isNegative()?this.neg().div(O.neg()):this.neg().div(O).neg();if(O.isNegative())return this.div(O.neg()).neg();P=w}for(W=this;W.gte(O);){z=Math.max(1,Math.floor(W.toNumber()/O.toNumber()));for(var j=Math.ceil(Math.log(z)/Math.LN2),V=j<=48?1:l(2,j-48),q=a(z),L=q.mul(O);L.isNegative()||L.gt(W);)z-=V,q=a(z,this.unsigned),L=q.mul(O);q.isZero()&&(q=T),P=P.add(q),W=W.sub(L)}return P},_.div=_.divide,_.modulo=function(O){if(n(O)||(O=f(O)),t){var F=(this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,O.low,O.high);return o(F,t.get_high(),this.unsigned)}return this.sub(this.div(O).mul(O))},_.mod=_.modulo,_.rem=_.modulo,_.not=function(){return o(~this.low,~this.high,this.unsigned)},_.and=function(O){return n(O)||(O=f(O)),o(this.low&O.low,this.high&O.high,this.unsigned)},_.or=function(O){return n(O)||(O=f(O)),o(this.low|O.low,this.high|O.high,this.unsigned)},_.xor=function(O){return n(O)||(O=f(O)),o(this.low^O.low,this.high^O.high,this.unsigned)},_.shiftLeft=function(O){return n(O)&&(O=O.toInt()),(O&=63)===0?this:O<32?o(this.low<<O,this.high<<O|this.low>>>32-O,this.unsigned):o(0,this.low<<O-32,this.unsigned)},_.shl=_.shiftLeft,_.shiftRight=function(O){return n(O)&&(O=O.toInt()),(O&=63)===0?this:O<32?o(this.low>>>O|this.high<<32-O,this.high>>O,this.unsigned):o(this.high>>O-32,this.high>=0?0:-1,this.unsigned)},_.shr=_.shiftRight,_.shiftRightUnsigned=function(O){if(n(O)&&(O=O.toInt()),O&=63,O===0)return this;var F=this.high;if(O<32){var z=this.low;return o(z>>>O|F<<32-O,F>>>O,this.unsigned)}else return O===32?o(F,0,this.unsigned):o(F>>>O-32,0,this.unsigned)},_.shru=_.shiftRightUnsigned,_.shr_u=_.shiftRightUnsigned,_.toSigned=function(){return this.unsigned?o(this.low,this.high,!1):this},_.toUnsigned=function(){return this.unsigned?this:o(this.low,this.high,!0)},_.toBytes=function(O){return O?this.toBytesLE():this.toBytesBE()},_.toBytesLE=function(){var O=this.high,F=this.low;return[F&255,F>>>8&255,F>>>16&255,F>>>24,O&255,O>>>8&255,O>>>16&255,O>>>24]},_.toBytesBE=function(){var O=this.high,F=this.low;return[O>>>24,O>>>16&255,O>>>8&255,O&255,F>>>24,F>>>16&255,F>>>8&255,F&255]},e.fromBytes=function(O,F,z){return z?e.fromBytesLE(O,F):e.fromBytesBE(O,F)},e.fromBytesLE=function(O,F){return new e(O[0]|O[1]<<8|O[2]<<16|O[3]<<24,O[4]|O[5]<<8|O[6]<<16|O[7]<<24,F)},e.fromBytesBE=function(O,F){return new e(O[4]<<24|O[5]<<16|O[6]<<8|O[7],O[0]<<24|O[1]<<16|O[2]<<8|O[3],F)},f2}var IK=oCe();const NK=Vt(IK),lCe=AG({__proto__:null,default:NK},[IK]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ul=NK||lCe;function t1(t){return Ul.fromString(t,!0,16)}const OK=t1("c3a5c85c97cb3127"),Vl=t1("b492b66fbe98f273"),Or=t1("9ae16a3b2f90404f");function CE(t){return t.xor(t.shru(47))}function _K(t,e,n){const r=t.slice(e,e+n);return Ul.fromBytes(Array.from(r),!0,!0)}function Wt(t,e){return _K(t,e,8)}function UU(t,e){return _K(t,e,4)}function Gn(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Vo(t,e,n=t1("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let i=e.xor(r).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function cCe(t,e,n,r,i,s){i=i.add(t),s=Gn(s.add(i).add(r),21);const a=i;return i=i.add(e),i=i.add(n),s=s.add(Gn(i,44)),[i.add(r),s.add(a)]}function dv(t,e,n,r){return cCe(Wt(t,e),Wt(t,e+8),Wt(t,e+16),Wt(t,e+24),n,r)}function uCe(t,e=t.length){if(e>=8){const n=Or.add(e*2),r=Wt(t,0).add(Or),i=Wt(t,e-8),s=Gn(i,37).mul(n).add(r),a=Gn(r,25).add(i).mul(n);return Vo(s,a,n)}if(e>=4){const n=Or.add(e*2),r=UU(t,0);return Vo(r.shl(3).add(e),UU(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],i=t[e-1],s=n+(r<<8),a=e+(i<<2);return CE(Or.mul(s).xor(OK.mul(a))).mul(Or)}return Or}function fCe(t,e=t.length){const n=Or.add(e*2),r=Wt(t,0).mul(Vl),i=Wt(t,8),s=Wt(t,e-8).mul(n),a=Wt(t,e-16).mul(Or);return Vo(Gn(r.add(i),43).add(Gn(s,30)).add(a),r.add(Gn(i.add(Or),18)).add(s),n)}function hCe(t,e=t.length){const n=Or.add(e*2),r=Wt(t,0).mul(Or),i=Wt(t,8),s=Wt(t,e-8).mul(n),a=Wt(t,e-16).mul(Or),o=Gn(r.add(i),43).add(Gn(s,30)).add(a),l=Vo(o,r.add(Gn(i.add(Or),18)).add(s),n),c=Wt(t,16).mul(n),f=Wt(t,24),d=o.add(Wt(t,e-32)).mul(n),p=l.add(Wt(t,e-24)).mul(n);return Vo(Gn(c.add(f),43).add(Gn(d,30)).add(p),c.add(Gn(f.add(r),18)).add(d),n)}function dCe(t,e=t.length){const n=Ul.fromNumber(81,!0);if(e<=32)return e<=16?uCe(t,e):fCe(t,e);if(e<=64)return hCe(t,e);let r=n,i=n.mul(Vl).add(113),s=CE(i.mul(Or).add(113)).mul(Or),a=[Ul.UZERO,Ul.UZERO],o=[Ul.UZERO,Ul.UZERO];r=r.mul(Or).add(Wt(t,0));let l=0;const c=(e-1>>6)*64,f=c+(e-1&63)-63;do r=Gn(r.add(i).add(a[0]).add(Wt(t,l+8)),37).mul(Vl),i=Gn(i.add(a[1]).add(Wt(t,l+48)),42).mul(Vl),r=r.xor(o[1]),i=i.add(a[0]).add(Wt(t,l+40)),s=Gn(s.add(o[0]),33).mul(Vl),a=dv(t,l,a[1].mul(Vl),r.add(o[0])),o=dv(t,l+32,s.add(o[1]),i.add(Wt(t,l+16))),[s,r]=[r,s],l+=64;while(l!==c);const d=Vl.add(s.and(255).shl(1));return l=f,o[0]=o[0].add(e-1&63),a[0]=a[0].add(o[0]),o[0]=o[0].add(a[0]),r=Gn(r.add(i).add(a[0]).add(Wt(t,l+8)),37).mul(d),i=Gn(i.add(a[1]).add(Wt(t,l+48)),42).mul(d),r=r.xor(o[1].mul(9)),i=i.add(a[0].mul(9).add(Wt(t,l+40))),s=Gn(s.add(o[0]),33).mul(d),a=dv(t,l,a[1].mul(d),r.add(o[0])),o=dv(t,l+32,s.add(o[1]),i.add(Wt(t,l+16))),[s,r]=[r,s],Vo(Vo(a[0],o[0],d).add(CE(i).mul(OK)).add(s),Vo(a[1],o[1],d).add(r),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ll(t,e){return e==="string"?Uo(t):Oc([t],e)}function pCe(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Oc(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=pc(t)),fe().getBool("DEBUG")&&WSe(t,e),pCe(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Br(){return fe().platform.now()}function Uo(t,e="utf-8"){return e=e||"utf-8",fe().platform.encode(t,e)}function Ko(t,e="utf-8"){return e=e||"utf-8",fe().platform.decode(t,e)}function Ji(t){return fe().platform.isTypedArray!=null?fe().platform.isTypedArray(t):EK(t)}function pc(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||HN(t)||t==null||Ji(t)&&n)e.push(t);else if(Array.isArray(t)||Ji(t))for(let r=0;r<t.length;++r)pc(t[r],e,n);else{let r=-1;for(const i of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(i)&&(r=Math.max(r,Number(i)));for(let i=0;i<=r;i++)pc(t[i],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mCe{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new yCe)}profileKernel(e,n,r){let i;const s=()=>{i=r()};let a;const o=Br();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(s);else{s();for(const c of i)c.dataSync();a=Promise.resolve({kernelMs:Br()-o})}if(fe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<i.length;c++){const f=i[c];f.data().then(d=>{gCe(d,f.dtype,e)})}return{kernelName:e,outputs:i,inputs:n,timeMs:a.then(c=>c.kernelMs),extraInfo:a.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:i,inputs:s,extraInfo:a}=e;r.forEach(o=>{Promise.all([o.data(),i,a]).then(l=>{this.logger.logKernelProfile(n,o,l[0],l[1],s,l[2])})})}}function gCe(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const i=t[r];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${n}'`),!0}return!1}class yCe{logKernelProfile(e,n,r,i,s,a){const o=typeof i=="number"?Xu(`${i}ms`,9):i.error,l=Xu(e,25),c=n.rank,f=n.size,d=Xu(n.shape.toString(),14);let p="";for(const g in s){const y=s[g];if(y!=null){const x=y.shape||n.shape,b=x.length;p+=`${g}: ${b}D ${b>0?x:""} `}}console.log(`%c${l}	%c${o}	%c${c}D ${d}	%c${f}	%c${p}	%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vCe(t,e,n){const r={},i={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const c=t[l],f=c.inputs;for(const d in f){const p=f[d];let g=!1;for(let y=0;y<e.length;y++)if(r[p.id]){c.outputs.forEach(x=>r[x.id]=!0),g=!0,i[c.id]=!0;break}if(g)break}}const s={};s[n.id]=!0;const a={};for(let l=t.length-1;l>=0;l--){const c=t[l],f=c.inputs;for(let d=0;d<c.outputs.length;d++)if(s[c.outputs[d].id]){for(const p in f)s[f[p].id]=!0,a[c.id]=!0;break}}const o=[];for(let l=0;l<t.length;l++){const c=t[l];if(i[c.id]&&a[c.id]){const f={};for(const p in c.inputs){const g=c.inputs[p];r[g.id]&&(f[p]=g)}const d=Object.assign({},c);d.inputs=f,d.outputs=c.outputs,o.push(d)}}return o}function bCe(t,e,n,r){for(let i=e.length-1;i>=0;i--){const s=e[i],a=[];if(s.outputs.forEach(l=>{const c=t[l.id];c!=null?a.push(c):a.push(null)}),s.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);const o=s.gradient(a);for(const l in s.inputs){if(!(l in o))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(o)}.`);const c=n(()=>o[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const f=s.inputs[l];if(!Et(c.shape,f.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${f.shape}'`);if(t[f.id]==null)t[f.id]=c;else{const d=t[f.id];t[f.id]=r(d,c),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WU=20,Ed=3,h2=7;function xCe(t,e,n,r){const i=je(e),s=wCe(t,e,n,i),a=e.length,o=Nv(t,e,n,i,s),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${a}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(o.map(c=>"    "+c).join(`
`)),l.join(`
`)}function wCe(t,e,n,r){const i=ve(e),s=r[r.length-1],a=new Array(s).fill(0),o=e.length,l=n==="complex64"?Fd(t):t;if(o>1)for(let c=0;c<i/s;c++){const f=c*s;for(let d=0;d<s;d++)a[d]=Math.max(a[d],Pd(l[f+d],0,n).length)}return a}function Pd(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(h2))} + ${parseFloat(t[1].toFixed(h2))}j`:gm(t)?r=`'${t}'`:n==="bool"?r=RK(t):r=parseFloat(t.toFixed(h2)).toString(),Xu(r,e)}function RK(t){return t===0?"false":"true"}function Nv(t,e,n,r,i,s=!0){const a=n==="complex64"?2:1,o=e[0],l=e.length;if(l===0){if(n==="complex64"){const x=Fd(t);return[Pd(x[0],0,n)]}return n==="bool"?[RK(t[0])]:[t[0].toString()]}if(l===1){if(o>WU){const b=Ed*a;let w=Array.from(t.slice(0,b)),S=Array.from(t.slice((o-Ed)*a,o*a));return n==="complex64"&&(w=Fd(w),S=Fd(S)),["["+w.map((T,k)=>Pd(T,i[k],n)).join(", ")+", ..., "+S.map((T,k)=>Pd(T,i[o-Ed+k],n)).join(", ")+"]"]}return["["+(n==="complex64"?Fd(t):Array.from(t)).map((b,w)=>Pd(b,i[w],n)).join(", ")+"]"]}const c=e.slice(1),f=r.slice(1),d=r[0]*a,p=[];if(o>WU){for(let x=0;x<Ed;x++){const b=x*d,w=b+d;p.push(...Nv(t.slice(b,w),c,n,f,i,!1))}p.push("...");for(let x=o-Ed;x<o;x++){const b=x*d,w=b+d;p.push(...Nv(t.slice(b,w),c,n,f,i,x===o-1))}}else for(let x=0;x<o;x++){const b=x*d,w=b+d;p.push(...Nv(t.slice(b,w),c,n,f,i,x===o-1))}const g=l===2?",":"";p[0]="["+(o>0?p[0]+g:"");for(let x=1;x<p.length-1;x++)p[x]=" "+p[x]+g;let y=`,
`;for(let x=2;x<l;x++)y+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(s?"":y),p}function Fd(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rr{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=ve(e),r!=null){const i=r.length;U(i===this.size,()=>`Length of values '${i}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||gn(n,this.size),this.strides=je(e)}set(e,...n){n.length===0&&(n=[0]),U(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const i of e){if(i<0||i>=this.shape[n]){const s=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(s)}n++}let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=this.strides[i]*e[i];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return ps().makeTensor(this.values,this.shape,this.dtype)}}let ps=null,Mu=null;function SCe(t){ps=t}function CCe(t){Mu=t}class On{constructor(e,n,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=ve(e),this.strides=je(e),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Mu.buffer(this.shape,this.dtype,e)}bufferSync(){return Mu.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return xs(this.shape,e,this.dtype==="complex64")}arraySync(){return xs(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=ps().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>Ko(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),ps().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=ps().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>Ko(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await ps().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),ps().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Mu.print(this,e)}clone(){return this.throwIfDisposed(),Mu.clone(this)}toString(e=!1){const n=this.dataSync();return xCe(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Mu.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),ps().makeVariable(this,e,n,r)}}Object.defineProperty(On,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function me(){return KN("Tensor",()=>On)}me();class Hb extends On{constructor(e,n,r,i){super(e.shape,e.dtype,e.dataId,i),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Et(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);ps().disposeTensor(this),this.dataId=e.dataId,ps().incRef(this,null)}dispose(){ps().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Hb,Symbol.hasInstance,{value:t=>t instanceof On&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var GU;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(GU||(GU={}));var TE;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(TE||(TE={}));var AE;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(AE||(AE={}));var kE;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(kE||(kE={}));var $E;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})($E||($E={}));const TCe={float32:kE,int32:TE,bool:AE,complex64:$E};function oi(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return TCe[t][e]}function PO(t){return oi(t,"int32")}function DK(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function MK(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vn(t,e){if(t.dtype===e.dtype)return[t,e];const n=oi(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function PK(t){const e=[];return FK(t,e,new Set),e}function FK(t,e,n){if(t==null)return;if(t instanceof On){e.push(t);return}if(!ACe(t))return;const r=t;for(const i in r){const s=r[i];n.has(s)||(n.add(s),FK(s,e,n))}}function ACe(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d2(t){return t.kernelName!=null}class qU{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class kf{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new qU}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(Si(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new mCe(this.backendInstance),!0}setupRegisteredKernels(){jU(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){jU(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof UN)&&typeof r.then=="function"){const i=++this.pendingBackendInitId,s=r.then(a=>i<this.pendingBackendInitId?!1:(this.registry[e]=a,this.pendingBackendInit=null,!0)).catch(a=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,Si(`Initialization of backend ${e} failed`),Si(a.stack||a.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Si(`Initialization of backend ${e} failed`),Si(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:i,asyncInit:s}=this.initializeBackend(r);if(s||i)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),i=r.backend,s=this.readSync(n),a=i.refCount(n);i.disposeData(n,!0),r.backend=e,e.move(n,s,r.shape,r.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let i;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(i),()=>(i=n(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(e,n,r){e();try{const i=r();return n(),i}catch(i){throw n(),i}}nextTensorId(){return kf.nextTensorId++}nextVariableId(){return kf.nextVariableId++}clone(e){const n=re.runKernel(Fm,{x:e}),r={x:e},i=a=>({x:()=>{const o="float32",l={x:a},c={dtype:o};return re.runKernel(Tm,l,c)}}),s=[];return this.addTapeNode(this.state.activeScope.name,r,[n],i,s,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(BU(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const i=this.backend.numDataIds();let s=0;r.forEach(l=>{s+=l.dtype==="complex64"?3:1});const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=i-n-s-a;if(o>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${o} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const i=this.isTapeOn(),s=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let o;this.backendName==null&&this.backend;let l;const c=d2(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(d2(e)){const{kernelName:y,inputs:x,attrs:b}=e;this.backendName==null&&this.backend;const w=BU(y,this.backendName);U(w!=null,()=>`Cannot find registered kernel '${y}' for backend '${this.backendName}'`),o=()=>{const S=this.backend.numDataIds();l=w.kernelFunc({inputs:x,attrs:b,backend:this.backend});const T=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(y,S,T);const k=T.map(A=>A.rank!=null?A:this.makeTensorFromTensorInfo(A));if(i){const A=this.getTensorsForGradient(y,x,k);r=this.saveTensorsForBackwardMode(A)}return k}}else{const{forwardFunc:y}=e,x=b=>{i&&(r=b.map(w=>this.keep(this.clone(w))))};o=()=>{const b=this.backend.numDataIds();l=this.tidy(()=>y(this.backend,x));const w=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,b,w),w}}const{inputs:f,attrs:d}=e,p=d2(e)?null:e.backwardsFunc;let g;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=o():(g=this.profiler.profileKernel(c,f,()=>o()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(g),n=g.outputs)}),i&&this.addTapeNode(c,f,n,p,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(f).map(y=>f[y]!=null?f[y].shape:null),outputShapes:n.map(y=>y.shape),kernelTimeMs:g.timeMs,extraInfo:g.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const i=zU(e);if(i!=null){const s=i.inputsToSave||[],a=i.outputsToSave||[];let o;i.saveAllInputs?(U(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),o=Object.keys(n).map(c=>n[c])):o=s.map(c=>n[c]);const l=r.filter((c,f)=>a[f]);return o.concat(l)}return[]}makeTensor(e,n,r,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;let s=e;r==="string"&&gm(e[0])&&(s=e.map(l=>Uo(l)));const a=i.write(s,n,r),o=new On(n,r,a,this.nextTensorId());if(this.trackTensor(o,i),r==="string"){const l=this.state.tensorInfo.get(a),c=qSe(s);this.state.numBytes+=c-l.bytes,l.bytes=c}return o}makeTensorFromDataId(e,n,r,i){r=r||"float32";const s={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(s,i)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:i,dtype:s}=e,a=new On(i,s,r,this.nextTensorId());return this.trackTensor(a,n),a}makeVariable(e,n=!0,r,i){r=r||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.cast(i));const s=new Hb(e,n,r,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*Ub(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof Hb||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*Ub(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const i of this.state.activeProfile.kernels)i.kernelTimeMs=await i.kernelTimeMs,i.extraInfo=await i.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,i,s,a){const o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:s},l=zU(e);l!=null&&(i=l.gradFunc),i!=null&&(o.gradient=c=>(c=c.map((f,d)=>{if(f==null){const p=r[d],g=gr(p.size,p.dtype);return this.makeTensor(g,p.shape,p.dtype)}return f}),i(c.length>1?c:c[0],s,a))),this.state.activeTape.push(o)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=PK(e),r=new Set(n.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){const a=this.state.activeScope.track[s];!a.kept&&!r.has(a.id)&&a.dispose()}const i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(s=>{!s.kept&&s.scopeId===i.id&&this.track(s)})}gradients(e,n,r,i=!1){if(U(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));U(s instanceof On,()=>"The result y returned by f() must be a tensor.");const a=vCe(this.state.activeTape,n,s);if(!i&&a.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const o={};o[s.id]=r??kCe(s.shape),bCe(o,a,c=>this.tidy(c),$Ce);const l=n.map(c=>o[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const f of c.saved)f.dispose()}),this.state.activeTape=null),{value:s,grads:l}})}customGrad(e){return U(vE(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{U(n.every(o=>o instanceof On),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const i={};n.forEach((o,l)=>{i[l]=o});const s=(o,l)=>(r=e(...n,l),U(r.value instanceof On,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),U(vE(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),a=(o,l)=>{const c=r.gradFunc(o,l),f=Array.isArray(c)?c:[c];U(f.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),U(f.every(p=>p instanceof On),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return f.forEach((p,g)=>{d[g]=()=>p}),d};return this.runKernelFunc({forwardFunc:s,backwardsFunc:a,inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Br(),r=await this.backend.time(e);return r.wallMs=Br()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new qU;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}kf.nextTensorId=0;kf.nextVariableId=0;function kCe(t){const e=qN(ve(t),"float32");return re.makeTensor(e,t,"float32")}function LK(){const t=iK();if(t._tfengine==null){const e=new XSe(t);t._tfengine=new kf(e)}return JSe(t._tfengine.ENV),SCe(()=>t._tfengine),t._tfengine}const re=LK();function $Ce(t,e){const n={a:t,b:e};return re.runKernel(Qf,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ECe(){return typeof navigator<"u"&&navigator!=null}function BK(t){if(t||ECe()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function zK(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gr=fe();Gr.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Gr.registerFlag("IS_BROWSER",()=>zK());Gr.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Gr.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Gr.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Gr.registerFlag("PROD",()=>!1);Gr.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Gr.getBool("DEBUG"));Gr.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Gr.registerFlag("IS_TEST",()=>!1);Gr.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Gr.getBool("DEBUG"));Gr.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Gr.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Gr.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n1(t,e){let n=t;if(Ji(t))return e==="string"?[]:[t.length];if(DK(t)){const i=t.channels||"RGBA";return[t.height,t.width*i.length]}else if(MK(t))return[t.buffer.size/(e==null?4:Ub(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||Ji(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&fe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&jK(t,r,[]),r}function jK(t,e,n){if(n=n||[],!Array.isArray(t)&&!Ji(t)){U(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}U(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),U(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let i=0;i<t.length;++i)jK(t[i],r,n.concat(i))}function HU(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function X(t,e,n,r="numeric"){if(t instanceof me())return HU(r,t.dtype,e,n),t;let i=Yf(t);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),HU(r,i,e,n),t==null||!Ji(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const s=n1(t,i);!Ji(t)&&!Array.isArray(t)&&(t=[t]);const o=i!=="string"?Oc(t,i):pc(t,[],!0);return re.makeTensor(o,s,i)}function VK(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((s,a)=>X(s,`${e}[${a}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ICe="__op";function se(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+ICe;const i=(...s)=>{re.startScope(n);try{const a=r(...s);return HN(a)&&console.error("Cannot return a Promise inside of tidy."),re.endScope(a),a}catch(a){throw re.endScope(null),a}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NCe(t,e){const n=X(t,"real","complex"),r=X(e,"imag","complex");GN(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const i={real:n,imag:r};return re.runKernel(nO,i)}const $f=se({complex_:NCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r1(t,e,n,r){if(r==null)r=Yf(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(MK(t)||DK(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return re.backend.createTensorFromGPUData(t,e||n,r)}if(!Ji(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){to(e);const i=ve(e),s=ve(n);U(i===s,()=>`Based on the provided shape, [${e}], the tensor should have ${i} values but has ${s}`);for(let a=0;a<n.length;++a){const o=n[a],l=a===n.length-1?o!==ve(e.slice(a)):!0;U(n[a]===e[a]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!Ji(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Oc(t,r):pc(t,[],!0),re.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UK(t,e,n){const r=n1(t,n);return r1(t,e,r,n)}class Jf{static join(e){return new Jf(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>Ji(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const i=e[r];r!==e.length-1&&i.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const s=n+i.byteLength;this.shards.push({buffer:i,start:n,end:s}),n=s}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const i=n-e,s=new ArrayBuffer(i),a=new Uint8Array(s);let o=0;for(let l=r;l<this.shards.length;l++){const c=this.shards[l],d=e+o-c.start,p=o,y=Math.min(n,c.end)-c.start,x=new Uint8Array(c.buffer,d,y-d);if(a.set(x,p),o+=x.length,n<c.end)break}return s}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(i){return e<i.start?-1:e>=i.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=OCe(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function OCe(t,e){let n=0,r=t.length;for(;n<=r;){const i=Math.floor((r-n)/2)+n,s=e(t[i]);if(s===0)return i;s<0?r=i:n=i+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ds(){return re}function KU(){return re.memory()}function ce(t,e){return re.tidy(t,e)}function ft(t){PK(t).forEach(n=>n.dispose())}function Xs(t){return re.keep(t)}function XU(t){return re.setBackend(t)}function WK(t,e,n=1){return re.registerBackend(t,e,n)}function _Ce(){return re.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YU=4;async function ZU(t,e){const n=[],r=[],i=Array.isArray(t)?t.map(a=>a.name):Object.keys(t);for(let a=0;a<i.length;++a){const o=i[a],l=Array.isArray(t)?t[a].tensor:t[o];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${o}': ${l.dtype}`);const c={name:o,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const f=new Promise(async d=>{const p=await l.bytes(),g=p.reduce((b,w)=>b+w.length,0)+YU*p.length,y=new Uint8Array(g);let x=0;for(let b=0;b<p.length;b++){const w=p[b],S=new Uint8Array(new Uint32Array([w.length]).buffer);y.set(S,x),x+=YU,y.set(w,x),x+=w.length}d(y)});r.push(f)}else r.push(l.data());e!=null&&(c.group=e),n.push(c)}const s=await Promise.all(r);return{data:RCe(s),specs:n}}function RCe(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(s=>{if(e+=s.byteLength,n.push(s.byteLength===s.buffer.byteLength?s:new s.constructor(s)),!(s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${s.constructor.name}`)});const r=new Uint8Array(e);let i=0;return n.forEach(s=>{r.set(new Uint8Array(s.buffer),i),i+=s.byteLength}),r.buffer}const FO=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function QU(t){return FO?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function DCe(t){if(FO)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function MCe(t){if(FO){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function PCe(t){return Jf.join(t)}function GK(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:QU(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:QU(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new Jf(t.weightData).byteLength}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $r{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return $r.instance==null&&($r.instance=new $r),$r.instance}static registerSaveRouter(e){$r.getInstance().saveRouters.push(e)}static registerLoadRouter(e){$r.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return $r.getHandlers(e,"save")}static getLoadHandlers(e,n){return $r.getHandlers(e,"load",n)}static getHandlers(e,n,r){const i=[];return(n==="load"?$r.getInstance().loadRouters:$r.getInstance().saveRouters).forEach(a=>{const o=a(e,r);o!==null&&i.push(o)}),i}}const FCe=t=>$r.getSaveHandlers(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EE="tensorflowjs",IE=1,Jl="models_store",Fo="model_info_store";function qK(){if(!fe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function NE(t){const e=t.result;e.createObjectStore(Jl,{keyPath:"modelPath"}),e.createObjectStore(Fo,{keyPath:"modelPath"})}class mc{constructor(e){if(this.indexedDB=qK(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,i)=>{const s=this.indexedDB.open(EE,IE);s.onupgradeneeded=()=>NE(s),s.onsuccess=()=>{const a=s.result;if(n==null){const o=a.transaction(Jl,"readonly"),c=o.objectStore(Jl).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return a.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(c.result.modelArtifacts)},c.onerror=f=>(a.close(),i(c.error)),o.oncomplete=()=>a.close()}else{n.weightData=Jf.join(n.weightData);const o=GK(n),l=a.transaction(Fo,"readwrite");let c=l.objectStore(Fo),f;try{f=c.put({modelPath:this.modelPath,modelArtifactsInfo:o})}catch(p){return i(p)}let d;f.onsuccess=()=>{d=a.transaction(Jl,"readwrite");const p=d.objectStore(Jl);let g;try{g=p.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:o})}catch(y){return i(y)}g.onsuccess=()=>r({modelArtifactsInfo:o}),g.onerror=y=>{c=l.objectStore(Fo);const x=c.delete(this.modelPath);x.onsuccess=()=>(a.close(),i(g.error)),x.onerror=b=>(a.close(),i(g.error))}},f.onerror=p=>(a.close(),i(f.error)),l.oncomplete=()=>{d==null?a.close():d.oncomplete=()=>a.close()}}},s.onerror=a=>i(s.error)})}}mc.URL_SCHEME="indexeddb://";const HK=t=>fe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(mc.URL_SCHEME)?LCe(t.slice(mc.URL_SCHEME.length)):null;$r.registerSaveRouter(HK);$r.registerLoadRouter(HK);function LCe(t){return new mc(t)}function BCe(t){return t.startsWith(mc.URL_SCHEME)?t.slice(mc.URL_SCHEME.length):t}class zCe{constructor(){this.indexedDB=qK()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(EE,IE);r.onupgradeneeded=()=>NE(r),r.onsuccess=()=>{const i=r.result,s=i.transaction(Fo,"readonly"),o=s.objectStore(Fo).getAll();o.onsuccess=()=>{const l={};for(const c of o.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},o.onerror=l=>(i.close(),n(o.error)),s.oncomplete=()=>i.close()},r.onerror=i=>n(r.error)})}async removeModel(e){return e=BCe(e),new Promise((n,r)=>{const i=this.indexedDB.open(EE,IE);i.onupgradeneeded=()=>NE(i),i.onsuccess=()=>{const s=i.result,a=s.transaction(Fo,"readwrite"),o=a.objectStore(Fo),l=o.get(e);let c;l.onsuccess=()=>{if(l.result==null)return s.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const f=o.delete(e),d=()=>{c=s.transaction(Jl,"readwrite");const g=c.objectStore(Jl).delete(e);g.onsuccess=()=>n(l.result.modelArtifactsInfo),g.onerror=y=>r(l.error)};f.onsuccess=d,f.onerror=p=>(d(),s.close(),r(l.error))}},l.onerror=f=>(s.close(),r(l.error)),a.oncomplete=()=>{c==null?s.close():c.oncomplete=()=>s.close()}},i.onerror=s=>r(i.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oa="/",Pu="tensorflowjs_models",KK="info",jCe="model_topology",VCe="weight_specs",UCe="weight_data",WCe="model_metadata";function XK(t){return{info:[Pu,t,KK].join(Oa),topology:[Pu,t,jCe].join(Oa),weightSpecs:[Pu,t,VCe].join(Oa),weightData:[Pu,t,UCe].join(Oa),modelMetadata:[Pu,t,WCe].join(Oa)}}function YK(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function GCe(t){const e=t.split(Oa);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Oa)}function qCe(t){return t.startsWith(gc.URL_SCHEME)?t.slice(gc.URL_SCHEME.length):t}class gc{constructor(e){if(!fe().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=XK(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=GK(e),s=Jf.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,DCe(s));const a={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:i}}catch{throw YK(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=i;const s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){const o=JSON.parse(s);n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,o.signature!=null&&(n.signature=o.signature),o.userDefinedMetadata!=null&&(n.userDefinedMetadata=o.userDefinedMetadata),o.modelInitializer!=null&&(n.modelInitializer=o.modelInitializer),o.initializerSignature!=null&&(n.initializerSignature=o.initializerSignature),o.trainingConfig!=null&&(n.trainingConfig=o.trainingConfig)}const a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=MCe(a),n}}gc.URL_SCHEME="localstorage://";const ZK=t=>fe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(gc.URL_SCHEME)?HCe(t.slice(gc.URL_SCHEME.length)):null;$r.registerSaveRouter(ZK);$r.registerLoadRouter(ZK);function HCe(t){return new gc(t)}class KCe{constructor(){U(fe().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),U(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=Pu+Oa,r=Oa+KK;for(let i=0;i<this.LS.length;++i){const s=this.LS.key(i);if(s.startsWith(n)&&s.endsWith(r)){const a=GCe(s);e[a]=JSON.parse(this.LS.getItem(s))}}return e}async removeModel(e){e=qCe(e);const n=XK(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return YK(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JU="://";class Ps{constructor(){this.managers={}}static getInstance(){return Ps.instance==null&&(Ps.instance=new Ps),Ps.instance}static registerManager(e,n){U(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(JU)&&(e=e.slice(0,e.indexOf(JU))),U(e.length>0,()=>"scheme must not be an empty string.");const r=Ps.getInstance();U(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=Ps.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Ps.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XCe{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!fe().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const i=this.functionRefs[r.data.index];i(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return EK(e)}}if(fe().get("IS_BROWSER")){fe().setPlatform("browser",new XCe);try{Ps.registerManager(gc.URL_SCHEME,new KCe)}catch{}try{Ps.registerManager(mc.URL_SCHEME,new zCe)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YCe={importFetch:()=>require("node-fetch")};let p2;class ZCe{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return fe().global.fetch!=null?fe().global.fetch(e,n):(p2==null&&(p2=YCe.importFetch()),p2(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}fe().get("IS_NODE")&&!fe().get("IS_BROWSER")&&fe().setPlatform("node",new ZCe);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function at(t,e="float32",n){return e=e||"float32",to(t),new rr(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QCe(t,e){const n=X(t,"x","cast");if(!GSe(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},i={dtype:e};return re.runKernel(Tm,r,i)}const Re=se({cast_:QCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JCe(t){const n={x:X(t,"x","clone","string_or_numeric")};return re.runKernel(Fm,n)}const sc=se({clone_:JCe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eTe(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */LK();const tTe={buffer:at,cast:Re,clone:sc,print:eTe};CCe(tTe);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nTe(t,e){let n=X(t,"a","add"),r=X(e,"b","add");[n,r]=vn(n,r);const i={a:n,b:r};return re.runKernel(Qf,i)}const ke=se({add_:nTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rTe(t,e){let n=X(t,"a","floorDiv"),r=X(e,"b","floorDiv");[n,r]=vn(n,r);const i={a:n,b:r};return re.runKernel(Mm,i)}const QK=se({floorDiv_:rTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iTe(t,e){let n=X(t,"a","div"),r=X(e,"b","div");if([n,r]=vn(n,r),n.dtype==="int32"&&r.dtype==="int32")return QK(n,r);const i={a:n,b:r},s={};return re.runKernel(Im,i,s)}const We=se({div_:iTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sTe(t,e){let n=X(t,"a","mul"),r=X(e,"b","mul");[n,r]=vn(n,r);const i={a:n,b:r};return re.runKernel(qm,i)}const ne=se({mul_:sTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aTe(t){const e=X(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return re.runKernel(lx,n)}else{const n={x:e};return re.runKernel(tx,n)}}const Er=se({abs_:aTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oTe(t){const n={x:X(t,"x","acos")};return re.runKernel(ym,n)}const lTe=se({acos_:oTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cTe(t){const n={x:X(t,"x","acosh")};return re.runKernel(vm,n)}const uTe=se({acosh_:cTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fTe(t,e=null,n=!1){const i={x:X(t,"x","all","bool")},s={axis:e,keepDims:n};return re.runKernel(YN,i,s)}const JK=se({all_:fTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hTe(t,e=null,n=!1){const i={x:X(t,"x","any","bool")},s={axis:e,keepDims:n};return re.runKernel(ZN,i,s)}const OE=se({any_:hTe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dTe(t,e=0){const r={x:X(t,"x","argMax")},i={axis:e};return re.runKernel(nx,r,i)}const Wp=se({argMax_:dTe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pTe(t,e=0){const r={x:X(t,"x","argMin")},i={axis:e};return re.runKernel(rx,r,i)}const mTe=se({argMin_:pTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gTe(t){const n={x:X(t,"x","asin")};return re.runKernel(bm,n)}const yTe=se({asin_:gTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vTe(t){const n={x:X(t,"x","asinh")};return re.runKernel(xm,n)}const bTe=se({asinh_:vTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xTe(t){const n={x:X(t,"x","atan")};return re.runKernel(wm,n)}const wTe=se({atan_:xTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function STe(t,e){let n=X(t,"a","atan2"),r=X(e,"b","atan2");[n,r]=vn(n,r);const i={a:n,b:r};return re.runKernel(Cm,i)}const CTe=se({atan2_:STe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TTe(t){const n={x:X(t,"x","atanh")};return re.runKernel(Sm,n)}const ATe=se({atanh_:TTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hg(t,e,n,r,i="NHWC",s){const a=t[3],o=[...e,a],l=ro(i);return sr(t,o,n,s,r,null,null,l)}function ns(t,e,n,r,i,s,a="channelsLast"){const[o,l]=Gp(e);let c;if(a==="channelsLast")c=[o,l,t[3],t[3]];else if(a==="channelsFirst")c=[o,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${a}`);return sr(t,c,n,r,i,s,!1,a)}function no(t,e,n,r,i,s,a="NDHWC"){const[o,l,c]=_E(e);let f,d;if(a==="NDHWC")d="channelsLast",f=[o,l,c,t[4],t[4]];else if(a==="NCDHW")d="channelsFirst",f=[o,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${a}`);return cl(t,f,n,r,i,!1,d,s)}function sr(t,e,n,r,i,s,a=!1,o="channelsLast"){let[l,c,f,d]=[-1,-1,-1,-1];if(o==="channelsLast")[l,c,f,d]=t;else if(o==="channelsFirst")[l,d,c,f]=t;else throw new Error(`Unknown dataFormat ${o}`);const[p,g,,y]=e,[x,b]=Gp(n),[w,S]=Gp(r),T=Zu(p,w),k=Zu(g,S),{padInfo:A,outHeight:E,outWidth:I}=ETe(i,c,f,x,b,T,k,s,o),N=a?y*d:y;let _;return o==="channelsFirst"?_=[l,N,E,I]:o==="channelsLast"&&(_=[l,E,I,N]),{batchSize:l,dataFormat:o,inHeight:c,inWidth:f,inChannels:d,outHeight:E,outWidth:I,outChannels:N,padInfo:A,strideHeight:x,strideWidth:b,filterHeight:p,filterWidth:g,effectiveFilterHeight:T,effectiveFilterWidth:k,dilationHeight:w,dilationWidth:S,inShape:t,outShape:_,filterShape:e}}function cl(t,e,n,r,i,s=!1,a="channelsLast",o){let[l,c,f,d,p]=[-1,-1,-1,-1,-1];if(a==="channelsLast")[l,c,f,d,p]=t;else if(a==="channelsFirst")[l,p,c,f,d]=t;else throw new Error(`Unknown dataFormat ${a}`);const[g,y,x,,b]=e,[w,S,T]=_E(n),[k,A,E]=_E(r),I=Zu(g,k),N=Zu(y,A),_=Zu(x,E),{padInfo:R,outDepth:O,outHeight:F,outWidth:z}=ITe(i,c,f,d,w,S,T,I,N,_,o),W=s?b*p:b;let P;return a==="channelsFirst"?P=[l,W,O,F,z]:a==="channelsLast"&&(P=[l,O,F,z,W]),{batchSize:l,dataFormat:a,inDepth:c,inHeight:f,inWidth:d,inChannels:p,outDepth:O,outHeight:F,outWidth:z,outChannels:W,padInfo:R,strideDepth:w,strideHeight:S,strideWidth:T,filterDepth:g,filterHeight:y,filterWidth:x,effectiveFilterDepth:I,effectiveFilterHeight:N,effectiveFilterWidth:_,dilationDepth:k,dilationHeight:A,dilationWidth:E,inShape:t,outShape:P,filterShape:e}}function kTe(t,e,n,r,i){r==null&&(r=LO(t,e,n));const s=t[0],a=t[1],o=qp((s-e+2*r)/n+1,i),l=qp((a-e+2*r)/n+1,i);return[o,l]}function $Te(t,e,n,r,i,s){i==null&&(i=LO(t,e[0],r[0]));const a=[0,0,0,n];for(let o=0;o<3;o++)t[o]+2*i>=e[o]&&(a[o]=qp((t[o]-e[o]+2*i)/r[o]+1,s));return a}function LO(t,e,n,r=1){const i=Zu(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function Gp(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function _E(t){return typeof t=="number"?[t,t,t]:t}function Zu(t,e){return e<=1?t:t+(t-1)*(e-1)}function ETe(t,e,n,r,i,s,a,o,l){let c,f,d;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const g=kTe([e,n],s,r,t,o);f=g[0],d=g[1]}else if(t==="same"){f=Math.ceil(e/r),d=Math.ceil(n/i);const p=Math.max(0,(f-1)*r+s-e),g=Math.max(0,(d-1)*i+a-n),y=Math.floor(p/2),x=p-y,b=Math.floor(g/2),w=g-b;c={top:y,bottom:x,left:b,right:w,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},f=Math.ceil((e-s+1)/r),d=Math.ceil((n-a+1)/i);else if(typeof t=="object"){const p=l==="channelsLast"?t[1][0]:t[2][0],g=l==="channelsLast"?t[1][1]:t[2][1],y=l==="channelsLast"?t[2][0]:t[3][0],x=l==="channelsLast"?t[2][1]:t[3][1];c={top:p,bottom:g,left:y,right:x,type:p===0&&g===0&&y===0&&x===0?"VALID":"EXPLICIT"},f=qp((e-s+p+g)/r+1,o),d=qp((n-a+y+x)/i+1,o)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:f,outWidth:d}}function ITe(t,e,n,r,i,s,a,o,l,c,f){let d,p,g,y;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const b=$Te([e,n,r,1],[o,l,c],1,[i,s,a],t,f);p=b[0],g=b[1],y=b[2]}else if(t==="same"){p=Math.ceil(e/i),g=Math.ceil(n/s),y=Math.ceil(r/a);const x=(p-1)*i+o-e,b=(g-1)*s+l-n,w=(y-1)*a+c-r,S=Math.floor(x/2),T=x-S,k=Math.floor(b/2),A=b-k,E=Math.floor(w/2),I=w-E;d={top:k,bottom:A,left:E,right:I,front:S,back:T,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:p,outHeight:g,outWidth:y}}function qp(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function yc(t){const[e,n,r]=Gp(t);return e===1&&n===1&&r===1}function vr(t,e){return yc(t)||yc(e)}function vc(t){return Gp(t).every(e=>e>0)}function ro(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Hr(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")U(Af(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(i=>{U(Af(i),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${i}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NTe(t,e){const r={x:X(t,"x","reshape","string_or_numeric")},i={shape:e};return re.runKernel(Vx,r,i)}const ie=se({reshape_:NTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OTe(t,e,n,r,i){const s=X(t,"x","avgPool","float32"),a=1;U(vr(n,a),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`);let o=s,l=!1;s.rank===3&&(l=!0,o=ie(s,[1,s.shape[0],s.shape[1],s.shape[2]])),U(o.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${o.rank}.`),Hr("avgPool",r,i);const c={x:o},f={filterSize:e,strides:n,pad:r,dimRoundingMode:i};let d=re.runKernel(ix,c,f);return d=Re(d,s.dtype),l?ie(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const BO=se({avgPool_:OTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Te(t,e,n,r,i,s="NDHWC"){const a=X(t,"x","avgPool3d","float32");let o=a,l=!1;a.rank===4&&(l=!0,o=ie(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),U(o.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${o.rank}.`),U(s==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),U(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Hr("avgPool3d",r,i);const c={x:o},f={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:s};let d=re.runKernel(sx,c,f);return d=Re(d,o.dtype),l?ie(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const RTe=se({avgPool3d_:_Te});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DTe(t,e=0){U(t.length>=1,()=>"Pass at least one tensor to concat");const n=VK(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(s=>{if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${s.dtype}. `)}),n.length===1)return sc(n[0]);const r=n,i={axis:e};return re.runKernel(cx,r,i)}const Wr=se({concat_:DTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MTe(t,e,n=!1,r=!1){let i=X(t,"a","matMul"),s=X(e,"b","matMul");[i,s]=vn(i,s);const a={a:i,b:s},o={transposeA:n,transposeB:r};return re.runKernel(ax,a,o)}const At=se({matMul_:MTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PTe(t){const n={x:X(t,"x","sigmoid","float32")};return re.runKernel(rg,n)}const eh=se({sigmoid_:PTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FTe(t,e,n){const r=X(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const i={x:r},s={begin:e,size:n};return re.runKernel(Hx,i,s)}const Gt=se({slice_:FTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LTe(t){const n={x:X(t,"x","tanh","float32")};return re.runKernel(cg,n)}const i1=se({tanh_:LTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BTe(t,e,n){const r=X(t,"x","batchToSpaceND"),i=e.reduce((o,l)=>o*l);U(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),U(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),U(r.shape[0]%i===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${i}`);const s={x:r},a={blockShape:e,crops:n};return re.runKernel(ox,s,a)}const zO=se({batchToSpaceND_:BTe});function zTe(t){let e;return t.rank===0||t.rank===1?e=ie(t,[1,1,1,t.size]):t.rank===2?e=ie(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=ie(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jTe(t,e,n,r,i,s){s==null&&(s=.001);const a=X(t,"x","batchNorm"),o=X(e,"mean","batchNorm"),l=X(n,"variance","batchNorm");let c;i!=null&&(c=X(i,"scale","batchNorm"));let f;r!=null&&(f=X(r,"offset","batchNorm")),U(o.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),U(f==null||o.rank===f.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),U(c==null||o.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const p={x:zTe(a),scale:c,offset:f,mean:o,variance:l},g={varianceEpsilon:s},y=re.runKernel(vx,p,g);return ie(y,a.shape)}const s1=se({batchNorm_:jTe});function VTe(t,e,n,r,i,s){const a=X(t,"x","batchNorm"),o=X(e,"mean","batchNorm"),l=X(n,"variance","batchNorm");let c;i!=null&&(c=X(i,"scale","batchNorm"));let f;return r!=null&&(f=X(r,"offset","batchNorm")),U(a.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${a.rank}.`),U(o.rank===2||o.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${o.rank}.`),U(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&U(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),f!=null&&U(f.rank===2||f.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${f.rank}.`),s1(a,o,l,f,c,s)}const UTe=se({batchNorm2d_:VTe});function WTe(t,e,n,r,i,s){const a=X(t,"x","batchNorm"),o=X(e,"mean","batchNorm"),l=X(n,"variance","batchNorm");let c;i!=null&&(c=X(i,"scale","batchNorm"));let f;return r!=null&&(f=X(r,"offset","batchNorm")),U(a.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${a.rank}.`),U(o.rank===3||o.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${o.rank}.`),U(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&U(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),f!=null&&U(f.rank===3||f.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${f.rank}.`),s1(a,o,l,f,c,s)}const GTe=se({batchNorm3d_:WTe});function qTe(t,e,n,r,i,s){const a=X(t,"x","batchNorm"),o=X(e,"mean","batchNorm"),l=X(n,"variance","batchNorm");let c;i!=null&&(c=X(i,"scale","batchNorm"));let f;return r!=null&&(f=X(r,"offset","batchNorm")),U(a.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${a.rank}.`),U(o.rank===4||o.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${o.rank}.`),U(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&U(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),f!=null&&U(f.rank===4||f.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${f.rank}.`),s1(a,o,l,f,c,s)}const HTe=se({batchNorm4d_:qTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KTe(t,e,n){const r=X(t,"x","bincount"),i=X(e,"weights","bincount");U(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),U(n>=0,()=>`size must be non-negative, but got ${n}.`),U(i.size===r.size||i.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`);const s={x:r,weights:i},a={size:n};return re.runKernel(eO,s,a)}const XTe=se({bincount_:KTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YTe(t,e){let n=X(t,"broadcastTo","x");const r=n.shape;if(to(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const c=n.shape.slice();for(;c.length<e.length;)c.unshift(1);n=ie(n,c)}const i=n.shape,s=Array.from(e);for(let c=e.length-1;c>=0;c--)if(i[c]===e[c])s[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(s.map((c,f)=>c>1?f:-1).filter(c=>c>=0).length===0)return sc(n);const o={x:n},l={reps:s};return re.runKernel(ug,o,l)}const Qd=se({broadcastTo_:YTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZTe(t){const n={x:X(t,"x","ceil","float32")};return re.runKernel(Am,n)}const QTe=se({ceil_:ZTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a1(t,e,n){to(t),n=n||Yf(e);const r={shape:t,value:e,dtype:n};return re.runKernel(mO,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JTe(t,e,n){const r=X(t,"x","clipByValue");if(U(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return a1(r.shape,e,r.dtype);const i={x:r},s={clipValueMin:e,clipValueMax:n};return re.runKernel(km,i,s)}const ki=se({clipByValue_:JTe});function eAe(t){return Wr(t,0)}const tAe=se({concat1d_:eAe});function nAe(t,e){return Wr(t,e)}const rAe=se({concat2d_:nAe});function iAe(t,e){return Wr(t,e)}const sAe=se({concat3d_:iAe});function aAe(t,e){return Wr(t,e)}const oAe=se({concat4d_:aAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lAe(t,e,n,r,i="NHWC",s=[1,1],a){const o=X(t,"x","conv2d","float32"),l=X(e,"filter","conv2d","float32");let c=o,f=!1;o.rank===3&&(f=!0,c=ie(o,[1,o.shape[0],o.shape[1],o.shape[2]])),U(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),U(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Hr("conv2d",r,a);const d=i==="NHWC"?c.shape[3]:c.shape[1];U(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),U(vr(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),U(vc(s),()=>"Error in conv2D: Dilated rates should be larger than 0."),U(vc(n),()=>"Error in conv2D: Strides should be larger than 0.");const p={x:c,filter:l},g={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:a},y=re.runKernel(ux,p,g);return f?ie(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const bc=se({conv2d_:lAe});function cAe(t,e,n,r,i="NWC",s=1,a){const o=X(t,"x","conv1d"),l=X(e,"filter","conv1d");let c=o,f=!1;o.rank===2&&(f=!0,c=ie(o,[1,o.shape[0],o.shape[1]])),U(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),U(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Hr("conv1d",r,a),U(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),U(vr(n,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`),U(vc(s),()=>"Error in conv1D: Dilated rates should be larger than 0."),U(vc(n),()=>"Error in conv1D: Stride should be larger than 0."),U(i==="NWC",()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);const d=ie(l,[1,l.shape[0],l.shape[1],l.shape[2]]),p=ie(c,[c.shape[0],1,c.shape[1],c.shape[2]]),b=bc(p,d,[1,n],r,"NHWC",[1,s],a);return f?ie(b,[b.shape[2],b.shape[3]]):ie(b,[b.shape[0],b.shape[2],b.shape[3]])}const eX=se({conv1d_:cAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uAe(t,e,n,r,i,s="NHWC",a){U(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let o=t,l=e,c=!1;e.rank===3&&(c=!0,l=ie(e,[1,e.shape[0],e.shape[1],e.shape[2]]),o=[1,t[0],t[1],t[2]]),U(o.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${o.length}.`),U(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),U(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const f=s==="NHWC"?o[3]:o[1],d=s==="NHWC"?l.shape[3]:l.shape[1];U(f===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${f}) must match input depth for filter ${n.shape[2]}.`),U(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),Hr("conv2dDerInput",i,a);const p={dy:l,filter:n},g={strides:r,pad:i,dataFormat:s,dimRoundingMode:a,inputShape:o},y=re.runKernel(fx,p,g);return c?ie(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const jO=se({conv2DBackpropInput_:uAe});function fAe(t,e,n,r,i,s){const a=X(t,"x","conv2dTranspose"),o=X(e,"filter","conv2dTranspose");return jO(n,a,o,r,i,"NHWC",s)}const tX=se({conv2dTranspose_:fAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hAe(t,e,n,r,i="NDHWC",s=[1,1,1]){const a=X(t,"x","conv3d"),o=X(e,"filter","conv3d");let l=a,c=!1;a.rank===4&&(c=!0,l=ie(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),U(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),U(o.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${o.rank}.`),U(l.shape[4]===o.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${o.shape[3]}.`),U(vr(n,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),U(i==="NDHWC",()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),U(vc(s),()=>"Error in conv3D: Dilated rates should be larger than 0."),U(vc(n),()=>"Error in conv3D: Strides should be larger than 0.");const f={x:l,filter:o},d={strides:n,pad:r,dataFormat:i,dilations:s},p=re.runKernel(hx,f,d);return c?ie(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const dAe=se({conv3d_:hAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pAe(t,e,n,r,i){U(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,a=e,o=!1;e.rank===4&&(o=!0,a=ie(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),s=[1,t[0],t[1],t[2],t[3]]);const l=s[4],c=a.shape[4];U(s.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),U(a.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${a.rank}`),U(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),U(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),U(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);const f={dy:a,filter:n},d={pad:i,strides:r,inputShape:s},p=re.runKernel(sO,f,d);return o?ie(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const nX=se({conv3DBackpropInput_:pAe});function mAe(t,e,n,r,i){const s=X(t,"x","conv3dTranspose"),a=X(e,"filter","conv3dTranspose");return nX(n,s,a,r,i)}const gAe=se({conv3dTranspose_:mAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yAe(t){const n={x:X(t,"x","cos","float32")};return re.runKernel($m,n)}const VO=se({cos_:yAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vAe(t){const n={x:X(t,"x","cosh","float32")};return re.runKernel(Em,n)}const rX=se({cosh_:vAe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bAe(t,e=0,n=!1,r=!1){const s={x:X(t,"x","cumprod")},a={axis:e,exclusive:n,reverse:r};return re.runKernel(aO,s,a)}const RE=se({cumprod_:bAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xAe(t,e=0,n=!1,r=!1){const s={x:X(t,"x","cumsum")},a={axis:e,exclusive:n,reverse:r};return re.runKernel(dx,s,a)}const iX=se({cumsum_:xAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wAe(t,e,n,r=!1){const i=X(t,"x","denseBincount"),s=X(e,"weights","denseBincount");U(i.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),U(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),U(n>=0,()=>`size must be non-negative, but got ${n}.`),U(s.size===i.size||s.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${s.shape}.`);const a={x:i,weights:s},o={size:n,binaryOutput:r};return re.runKernel(lO,a,o)}const eW=se({denseBincount_:wAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SAe(t,e,n="NHWC"){const r=X(t,"x","depthToSpace","float32"),i=n==="NHWC"?r.shape[1]:r.shape[2],s=n==="NHWC"?r.shape[2]:r.shape[3],a=n==="NHWC"?r.shape[3]:r.shape[1];U(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),U(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e}  for depthToSpace with input shape
    ${r.shape}`),U(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e} for depthToSpace with input shape
        ${r.shape}`),U(a%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${a} for depthToSpace with input shape ${r.shape}`);const o={x:r},l={blockSize:e,dataFormat:n};return re.runKernel(cO,o,l)}const CAe=se({depthToSpace_:SAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TAe(t,e,n,r,i="NHWC",s=[1,1],a){const o=X(t,"x","depthwiseConv2d","float32"),l=X(e,"filter","depthwiseConv2d","float32");let c=o,f=!1;o.rank===3&&(f=!0,c=ie(o,[1,o.shape[0],o.shape[1],o.shape[2]])),U(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),U(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=i==="NHWC"?c.shape[3]:c.shape[1];U(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),Hr("depthwiseConv2d",r,a);const p={x:c,filter:l},g={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:a},y=re.runKernel(px,p,g);return f?ie(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const UO=se({depthwiseConv2d_:TAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AAe(t,e,n,r,i=[1,1],s="NHWC"){const a=X(t,"x","dilation2d"),o=X(e,"filter","dilation2d");U(a.rank===3||a.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${a.rank}.`),U(o.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${o.rank}.`),U(s==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`);let l=a,c=!1;a.rank===3&&(l=ie(a,[1,a.shape[0],a.shape[1],a.shape[2]]),c=!0),U(l.shape[3]===o.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${o.shape[2]}`);const f={x:l,filter:o},d={strides:n,pad:r,dilations:i},p=re.runKernel(mx,f,d);return c?ie(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const kAe=se({dilation2d_:AAe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ef(t,e){const n=t.length,r=[];for(let i=0;i<n;i++){const s=n-1-i,a=t[s]||1;(e[e.length-1-i]||1)>1&&a===1&&r.unshift(s)}return r}function Fn(t,e){const n=[];for(let r=0;r<e.length;r++){const i=t[t.length-r-1],s=e.length-r-1,a=e[s];(i==null||i===1&&a>1)&&n.unshift(s)}return n}function nt(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let i=0;i<n;i++){let s=t[t.length-i-1];s==null&&(s=1);let a=e[e.length-i-1];if(a==null&&(a=1),s===1)r[n-i-1]=a;else if(a===1)r[n-i-1]=s;else if(s!==a){const o=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(o)}else r[n-i-1]=s}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ae(t,e){let n=X(t,"a","equal","string_or_numeric"),r=X(e,"b","equal","string_or_numeric");[n,r]=vn(n,r),nt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(gx,i)}const ea=se({equal_:$Ae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EAe(t,e,n){const r=X(e,"a","where"),i=X(n,"b","where"),s=X(t,"condition","where","bool"),a=nt(nt(s.shape,r.shape),i.shape),o=Qd(s,a),l=Qd(r,a),c=Qd(i,a),f={condition:o,t:l,e:c};return re.runKernel(qx,f)}const Dr=se({where_:EAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IAe(t){const n={x:X(t,"x","zerosLike")};return re.runKernel(e1,n)}const bt=se({zerosLike_:IAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NAe(t,e){let n=X(t,"a","div"),r=X(e,"b","div");[n,r]=vn(n,r);const i=We(n,r),s=bt(i),a=ea(r,s);return Dr(a,s,i)}const OAe=se({divNoNan_:NAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ae(t,e){const n=X(t,"t1","dot"),r=X(e,"t2","dot");U((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const i=n.rank===1?n.size:n.shape[1],s=r.rank===1?r.size:r.shape[0];if(U(i===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${s}.`),n.rank===1&&r.rank===1){const a=ie(n,[1,-1]),o=ie(r,[-1,1]),l=At(a,o);return ie(l,[])}else if(n.rank===1&&r.rank===2){const a=ie(n,[1,-1]),o=ie(r,[r.shape[0],r.shape[1]]),l=At(a,o);return ie(l,[l.size])}else if(n.rank===2&&r.rank===1){const a=ie(r,[-1,1]),o=At(n,a);return ie(o,[o.size])}else{const a=ie(r,[r.shape[0],r.shape[1]]);return At(n,a)}}const RAe=se({dot_:_Ae});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DAe(t,...e){const n=e.map((i,s)=>X(i,`tensors${s}`,"einsum")),r={equation:t};return re.runKernel(hO,n,r)}const Id=se({einsum_:DAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MAe(t){const n={x:X(t,"x","elu","float32")};return re.runKernel(Nm,n)}const o1=se({elu_:MAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PAe(t){let e=X(t,"x","erf");U(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Re(e,"float32"));const n={x:e};return re.runKernel(Om,n)}const sX=se({erf_:PAe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WO(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function aX(t,e,n){const r=t.length+e.length,i=[];let s=0,a=0;for(let o=0;o<r;o++)n.indexOf(o)===-1?i.push(t[s++]):i.push(e[a++]);return i}function Yn(t,e){const n=[],r=t.length;for(let s=0;s<r;s++)e.indexOf(s)===-1&&n.push(t[s]);const i=e.map(s=>t[s]);return[n,i]}function $n(t,e){const n=e.map(r=>1);return aX(t,n,e)}function ar(t,e,n){U(WO(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function sn(t,e){if(WO(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function ul(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function bn(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FAe(t,e=null,n=!1){const i={x:X(t,"x","max")},s={reductionIndices:e,keepDims:n};return re.runKernel(Ex,i,s)}const ws=se({max_:FAe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LAe(t,e=null,n=!1){const i={x:X(t,"x","min")},s={axis:e,keepDims:n};return re.runKernel(_x,i,s)}const Kb=se({min_:LAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BAe(t,e){let n=X(t,"base","pow"),r=X(e,"exp","pow");[n,r]=vn(n,r);const i={a:n,b:r};return re.runKernel(Hm,i)}const xc=se({pow_:BAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kt(t,e){if((Ji(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Ji(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return r1(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zAe(t){const n={x:X(t,"x","sqrt","float32")};return re.runKernel(sg,n)}const yr=se({sqrt_:zAe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jAe(t){const e=X(t,"x","square"),n={};return re.runKernel("Square",{x:e},n)}const Zt=se({square_:jAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VAe(t,e=null,n=!1){let r=X(t,"x","sum");r.dtype==="bool"&&(r=Re(r,"int32"));const i={x:r},s={axis:e,keepDims:n};return re.runKernel(Kx,i,s)}const Ue=se({sum_:VAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UAe(t,e="euclidean",n=null,r=!1){t=X(t,"x","norm");const i=oX(t,e,n);let s=i.shape;if(r){const a=ot(n,t.shape);s=$n(i.shape,a)}return ie(i,s)}function oX(t,e,n=null){if(t.rank===0)return Er(t);if(t.rank!==1&&n===null)return oX(ie(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Ue(Er(t),n);if(e===1/0)return ws(Er(t),n);if(e===-1/0)return Kb(Er(t),n);if(e==="euclidean"||e===2)return yr(Ue(xc(Er(t),kt(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return ws(Ue(Er(t),n[0]),n[1]-1);if(e===1/0)return ws(Ue(Er(t),n[1]),n[0]);if(e===-1/0)return Kb(Ue(Er(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return yr(Ue(Zt(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const l1=se({norm_:UAe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WAe(t,e=null,n=!1){return l1(t,"euclidean",e,n)}const GAe=se({euclideanNorm_:WAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qAe(t){const n={x:X(t,"x","exp")};return re.runKernel(_m,n)}const ta=se({exp_:qAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HAe(t,e=0){const n=X(t,"x","expandDims","string_or_numeric");U(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},i={dim:e};return re.runKernel(yx,r,i)}const zr=se({expandDims_:HAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KAe(t){const n={x:X(t,"x","expm1")};return re.runKernel(Rm,n)}const XAe=se({expm1_:KAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YAe(t,e){const n=X(t,"x","tile","string_or_numeric");U(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},i={reps:e};return re.runKernel(ug,r,i)}const vs=se({tile_:YAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZAe(t,e,n,r="float32"){e==null&&(e=t);const i=at([t,e],r),s=t<=e?t:e;for(let o=0;o<s;++o)i.set(1,o,o);const a=ie(i.toTensor(),[t,e]);if(n==null)return a;if(n.length===1)return vs(zr(a,0),[n[0],1,1]);if(n.length===2)return vs(zr(zr(a,0),0),[n[0],n[1],1,1]);if(n.length===3)return vs(zr(zr(zr(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const lX=se({eye_:ZAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QAe(t){const n={x:X(t,"x","floor","float32")};return re.runKernel(Dm,n)}const c1=se({floor_:QAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JAe(t,e,n=0,r=0){const i=X(t,"x","gather"),s=X(e,"indices","gather","int32"),a={x:i,indices:s},o={axis:n,batchDims:r};return re.runKernel(bx,a,o)}const GO=se({gather_:JAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eke(t,e){let n=X(t,"a","greater","string_or_numeric"),r=X(e,"b","greater","string_or_numeric");[n,r]=vn(n,r),nt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(xx,i)}const $i=se({greater_:eke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tke(t,e){let n=X(t,"a","greaterEqual","string_or_numeric"),r=X(e,"b","greaterEqual","string_or_numeric");[n,r]=vn(n,r),nt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(Pm,i)}const _c=se({greaterEqual_:tke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nke(t){const n={input:X(t,"input","imag")};return re.runKernel(vO,n)}const qO=se({imag_:nke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rke(t){const n={x:X(t,"x","isFinite")};return re.runKernel(Lm,n)}const ike=se({isFinite_:rke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ske(t){const n={x:X(t,"x","isInf")};return re.runKernel(Bm,n)}const ake=se({isInf_:ske});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oke(t){const n={x:X(t,"x","isNaN")};return re.runKernel(zm,n)}const lke=se({isNaN_:oke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cke(t,e=.2){const r={x:X(t,"x","leakyRelu")},i={alpha:e};return re.runKernel(wx,r,i)}const HO=se({leakyRelu_:cke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uke(t,e){let n=X(t,"a","less","string_or_numeric"),r=X(e,"b","less","string_or_numeric");[n,r]=vn(n,r),nt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(Sx,i)}const Xb=se({less_:uke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fke(t,e){let n=X(t,"a","lessEqual","string_or_numeric"),r=X(e,"b","lessEqual","string_or_numeric");[n,r]=vn(n,r),nt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(Cx,i)}const th=se({lessEqual_:fke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hke(t,e=5,n=1,r=1,i=.5){const s=X(t,"x","localResponseNormalization");U(s.rank===4||s.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${s.rank}.`),U(Af(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let a=s,o=!1;s.rank===3&&(o=!0,a=ie(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const l={x:a},c={depthRadius:e,bias:n,alpha:r,beta:i},f=re.runKernel($x,l,c);return o?ie(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const dke=se({localResponseNormalization_:hke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pke(t){const n={x:X(t,"x","log","float32")};return re.runKernel(jm,n)}const na=se({log_:pke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mke(t){const n={x:X(t,"x","log1p")};return re.runKernel(Vm,n)}const cX=se({log1p_:mke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gke(t,e){U(vE(t),()=>"The f passed in variableGrads(f) must be a function"),U(e==null||Array.isArray(e)&&e.every(c=>c instanceof Hb),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const c in re.registeredVariables)e.push(re.registeredVariables[c])}const r=n?e.filter(c=>!c.trainable):null,i=e.length;e=e.filter(c=>c.trainable),U(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);const s=!0,{value:a,grads:o}=re.gradients(t,e,null,s);U(o.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),U(a.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${a.rank} tensor`);const l={};return e.forEach((c,f)=>{o[f]!=null&&(l[c.name]=o[f])}),r!=null&&r.forEach(c=>l[c.name]=null),{value:a,grads:l}}function If(t){return re.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yke(t){const n={x:X(t,"x","neg")};return re.runKernel(Dx,n)}const yn=se({neg_:yke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vke(t){const n={x:X(t,"x","softplus")};return re.runKernel(ig,n)}const dg=se({softplus_:vke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bke(t){const e=X(t,"x","logSigmoid");return If(r=>({value:yn(dg(yn(r))),gradFunc:a=>ne(a,eh(yn(r)))}))(e)}const xke=se({logSigmoid_:bke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wke(t,e){let n=X(t,"a","sub"),r=X(e,"b","sub");[n,r]=vn(n,r);const i={a:n,b:r};return re.runKernel(og,i)}const Ke=se({sub_:wke});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ske(t,e=-1){const n=X(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return If((i,s)=>{const o=ws(i,e,!0),l=Ke(i,o),c=Ke(Re(l,"float32"),na(Ue(ta(l),e,!0)));return s([c]),{value:c,gradFunc:(d,p)=>{const[g]=p,y=!0,x=ta(g);return Ke(d,ne(Ue(d,e,y),x))}}})(n)}const uX=se({logSoftmax_:Ske});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cke(t,e=null,n=!1){const r=X(t,"x","logSumExp"),i=ot(e,r.shape),s=ws(r,i,!0),a=Ke(r,s),o=ta(a),l=Ue(o,i),c=na(l),f=ke(ie(s,c.shape),c);if(n){const d=$n(f.shape,i);return ie(f,d)}return f}const fX=se({logSumExp_:Cke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tke(t,e){const n=X(t,"a","logicalAnd","bool"),r=X(e,"b","logicalAnd","bool");nt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(Tx,i)}const Ka=se({logicalAnd_:Tke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ake(t){const n={x:X(t,"x","logicalNot","bool")};return re.runKernel(Ax,n)}const KO=se({logicalNot_:Ake});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kke(t,e){const n=X(t,"a","logicalOr","bool"),r=X(e,"b","logicalOr","bool");nt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(kx,i)}const hX=se({logicalOr_:kke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ke(t,e){const n=X(t,"a","logicalXor","bool"),r=X(e,"b","logicalXor","bool");return nt(n.shape,r.shape),Ka(hX(t,e),KO(Ka(t,e)))}const Eke=se({logicalXor_:$ke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ike(t,e,n,r,i){const s=X(t,"x","maxPool"),a=1;let o=s,l=!1;s.rank===3&&(l=!0,o=ie(s,[1,s.shape[0],s.shape[1],s.shape[2]])),U(o.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${o.rank}.`),U(vr(n,a),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),Hr("maxPool",r,i);const c={x:o},f={filterSize:e,strides:n,pad:r,dimRoundingMode:i},d=re.runKernel(Ix,c,f);return l?ie(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const XO=se({maxPool_:Ike});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nke(t,e=[1,1,1],n,r,i,s="NDHWC"){const a=X(t,"x","maxPool3d");let o=a,l=!1;a.rank===4&&(l=!0,o=ie(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),U(o.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${o.rank}.`),U(s==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),Hr("maxPool3d",r,i);const c={x:o},f={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:s},d=re.runKernel(Nx,c,f);return l?ie(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const Oke=se({maxPool3d_:Nke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ke(t,e){let n=X(t,"a","maximum"),r=X(e,"b","maximum");[n,r]=vn(n,r),n.dtype==="bool"&&(n=Re(n,"int32"),r=Re(r,"int32")),nt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(Um,i)}const fl=se({maximum_:_ke});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rke(t,e=null,n=!1){const i={x:X(t,"x","mean")},s={axis:e,keepDims:n};return re.runKernel(Ox,i,s)}const kn=se({mean_:Rke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qn(t,e="float32"){if(to(t),e==="complex64"){const r=qn(t,"float32"),i=qn(t,"float32");return $f(r,i)}const n=gr(ve(t),e);return re.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hl(t,e="float32"){if(to(t),e==="complex64"){const r=hl(t,"float32"),i=qn(t,"float32");return $f(r,i)}const n=qN(ve(t),e);return re.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dke(t,e){let n=X(t,"a","minimum"),r=X(e,"b","minimum");[n,r]=vn(n,r),n.dtype==="bool"&&(n=Re(n,"int32"),r=Re(r,"int32")),nt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(Wm,i)}const Hp=se({minimum_:Dke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mke(t,e,n){U(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=X(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");U(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const i=n==="reflect"?1:0;for(let o=0;o<r.rank;o++)U(e[o].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),U(e[o][0]>=0&&e[o][0]<=r.shape[o]-i&&e[o][1]>=0&&e[o][1]<=r.shape[o]-i,()=>`Padding in dimension ${o} cannot be greater than or equal to ${r.shape[o]-i} or less than 0 for input of shape ${r.shape}`);const s={paddings:e,mode:n},a={x:r};return re.runKernel(Rx,a,s)}const Pke=se({mirrorPad_:Mke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fke(t,e){let n=X(t,"a","mod"),r=X(e,"b","mod");[n,r]=vn(n,r);const i={a:n,b:r};return re.runKernel(Gm,i)}const Lke=se({mod_:Fke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bke(t,e=null,n=!1){t=X(t,"x","moments");const r=ot(e,t.shape),i=kn(t,r,n);let s=i.shape;n||(s=$n(i.shape,r));const a=Zt(Ke(Re(t,"float32"),ie(i,s))),o=kn(a,r,n);return{mean:i,variance:o}}const YO=se({moments_:Bke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zke(t,e){let n=X(t,"a","notEqual","string_or_numeric"),r=X(e,"b","notEqual","string_or_numeric");[n,r]=vn(n,r),nt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(Mx,i)}const Yb=se({notEqual_:zke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jke(t,e,n=1,r=0,i="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const a={indices:X(t,"indices","oneHot","int32")},o={dtype:i,depth:e,onValue:n,offValue:r};return re.runKernel(Fx,a,o)}const dX=se({oneHot_:jke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vke(t){const n={x:X(t,"x","onesLike")};return re.runKernel(Px,n)}const es=se({onesLike_:Vke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uke(t,e,n=0){const r=X(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:e,constantValue:n},s={x:r};return re.runKernel(Bx,s,i)}const ZO=se({pad_:Uke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wke(t,e,n){const r=X(t,"x","spaceToBatchND");U(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),U(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),U(r.shape.reduce((a,o,l)=>l>0&&l<=e.length?a&&(o+n[l-1][0]+n[l-1][1])%e[l-1]===0:a,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const i={x:r},s={blockShape:e,paddings:n};return re.runKernel(Xx,i,s)}const QO=se({spaceToBatchND_:Wke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gke(t,e,n,r,i,s,a){i==null&&(i=[1,1]),s==null&&(s=1),r===0&&(r="valid");const o=X(t,"x","maxPool");let l=o,c=!1;o.rank===3&&(c=!0,l=ie(o,[1,o.shape[0],o.shape[1],o.shape[2]])),U(vr(s,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${i}'`);const f=ns(l.shape,e,s,i,r),d=[f.dilationHeight,f.dilationWidth];let p;r==="same"?p=Hke([f.filterHeight,f.filterWidth],d):p=[[0,0],[0,0]];const g=d[0]===1&&d[1]===1,[y,x]=qke([f.inHeight,f.inWidth],d,p),b=g?r:"valid",w=g?l:QO(l,d,y),T=(n==="avg"?()=>BO(w,e,s,b,a):()=>XO(w,e,s,b,a))(),k=g?T:zO(T,d,x);return c?ie(k,[k.shape[1],k.shape[2],k.shape[3]]):k}function qke(t,e,n){const r=n.map(f=>f[0]),i=n.map(f=>f[1]),s=t.concat(r,i),a=e.map((f,d)=>(f-s[d]%f)%f),o=i.map((f,d)=>f+a[d]),l=e.map((f,d)=>[r[d],o[d]]),c=e.map((f,d)=>[0,a[d]]);return[l,c]}function Hke(t,e){const r=t.map((a,o)=>a+(a-1)*(e[o]-1)).map(a=>a-1),i=r.map(a=>Math.floor(a/2)),s=r.map((a,o)=>a-i[o]);return r.map((a,o)=>[i[o],s[o]])}const Kke=se({pool_:Gke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xke(t,e){const n=X(t,"x","prelu"),r=X(e,"alpha","prelu"),i={x:n,alpha:r};return re.runKernel(zx,i)}const JO=se({prelu_:Xke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yke(t,e=null,n=!1){let r=X(t,"x","prod");r.dtype==="bool"&&(r=Re(r,"int32"));const i={x:r},s={axis:e,keepDims:n};return re.runKernel(jx,i,s)}const Zke=se({prod_:Yke});var Ov={exports:{}},Qke=Ov.exports,tW;function Jke(){return tW||(tW=1,function(t){(function(e,n,r){function i(l){var c=this,f=o();c.next=function(){var d=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=d|0)},c.c=1,c.s0=f(" "),c.s1=f(" "),c.s2=f(" "),c.s0-=f(l),c.s0<0&&(c.s0+=1),c.s1-=f(l),c.s1<0&&(c.s1+=1),c.s2-=f(l),c.s2<0&&(c.s2+=1),f=null}function s(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function a(l,c){var f=new i(l),d=c&&c.state,p=f.next;return p.int32=function(){return f.next()*4294967296|0},p.double=function(){return p()+(p()*2097152|0)*11102230246251565e-32},p.quick=p,d&&(typeof d=="object"&&s(d,f),p.state=function(){return s(f,{})}),p}function o(){var l=4022871197,c=function(f){f=String(f);for(var d=0;d<f.length;d++){l+=f.charCodeAt(d);var p=.02519603282416938*l;l=p>>>0,p-=l,p*=l,l=p>>>0,p-=l,l+=p*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=a:this.alea=a})(Qke,t)}(Ov)),Ov.exports}var _v={exports:{}},e2e=_v.exports,nW;function t2e(){return nW||(nW=1,function(t){(function(e,n,r){function i(o){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},o===(o|0)?l.x=o:c+=o;for(var f=0;f<c.length+64;f++)l.x^=c.charCodeAt(f)|0,l.next()}function s(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l}function a(o,l){var c=new i(o),f=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},d.int32=c.next,d.quick=d,f&&(typeof f=="object"&&s(f,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=a:this.xor128=a})(e2e,t)}(_v)),_v.exports}var Rv={exports:{}},n2e=Rv.exports,rW;function r2e(){return rW||(rW=1,function(t){(function(e,n,r){function i(o){var l=this,c="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,o===(o|0)?l.x=o:c+=o;for(var f=0;f<c.length+64;f++)l.x^=c.charCodeAt(f)|0,f==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l.v=o.v,l.d=o.d,l}function a(o,l){var c=new i(o),f=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},d.int32=c.next,d.quick=d,f&&(typeof f=="object"&&s(f,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=a:this.xorwow=a})(n2e,t)}(Rv)),Rv.exports}var Dv={exports:{}},i2e=Dv.exports,iW;function s2e(){return iW||(iW=1,function(t){(function(e,n,r){function i(o){var l=this;l.next=function(){var f=l.x,d=l.i,p,g;return p=f[d],p^=p>>>7,g=p^p<<24,p=f[d+1&7],g^=p^p>>>10,p=f[d+3&7],g^=p^p>>>3,p=f[d+4&7],g^=p^p<<7,p=f[d+7&7],p=p^p<<13,g^=p^p<<9,f[d]=g,l.i=d+1&7,g};function c(f,d){var p,g=[];if(d===(d|0))g[0]=d;else for(d=""+d,p=0;p<d.length;++p)g[p&7]=g[p&7]<<15^d.charCodeAt(p)+g[p+1&7]<<13;for(;g.length<8;)g.push(0);for(p=0;p<8&&g[p]===0;++p);for(p==8?g[7]=-1:g[p],f.x=g,f.i=0,p=256;p>0;--p)f.next()}c(l,o)}function s(o,l){return l.x=o.x.slice(),l.i=o.i,l}function a(o,l){o==null&&(o=+new Date);var c=new i(o),f=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},d.int32=c.next,d.quick=d,f&&(f.x&&s(f,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=a:this.xorshift7=a})(i2e,t)}(Dv)),Dv.exports}var Mv={exports:{}},a2e=Mv.exports,sW;function o2e(){return sW||(sW=1,function(t){(function(e,n,r){function i(o){var l=this;l.next=function(){var f=l.w,d=l.X,p=l.i,g,y;return l.w=f=f+1640531527|0,y=d[p+34&127],g=d[p=p+1&127],y^=y<<13,g^=g<<17,y^=y>>>15,g^=g>>>12,y=d[p]=y^g,l.i=p,y+(f^f>>>16)|0};function c(f,d){var p,g,y,x,b,w=[],S=128;for(d===(d|0)?(g=d,d=null):(d=d+"\0",g=0,S=Math.max(S,d.length)),y=0,x=-32;x<S;++x)d&&(g^=d.charCodeAt((x+32)%d.length)),x===0&&(b=g),g^=g<<10,g^=g>>>15,g^=g<<4,g^=g>>>13,x>=0&&(b=b+1640531527|0,p=w[x&127]^=g+b,y=p==0?y+1:0);for(y>=128&&(w[(d&&d.length||0)&127]=-1),y=127,x=4*128;x>0;--x)g=w[y+34&127],p=w[y=y+1&127],g^=g<<13,p^=p<<17,g^=g>>>15,p^=p>>>12,w[y]=g^p;f.w=b,f.X=w,f.i=y}c(l,o)}function s(o,l){return l.i=o.i,l.w=o.w,l.X=o.X.slice(),l}function a(o,l){o==null&&(o=+new Date);var c=new i(o),f=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},d.int32=c.next,d.quick=d,f&&(f.X&&s(f,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=a:this.xor4096=a})(a2e,t)}(Mv)),Mv.exports}var Pv={exports:{}},l2e=Pv.exports,aW;function c2e(){return aW||(aW=1,function(t){(function(e,n,r){function i(o){var l=this,c="";l.next=function(){var d=l.b,p=l.c,g=l.d,y=l.a;return d=d<<25^d>>>7^p,p=p-g|0,g=g<<24^g>>>8^y,y=y-d|0,l.b=d=d<<20^d>>>12^p,l.c=p=p-g|0,l.d=g<<16^p>>>16^y,l.a=y-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,o===Math.floor(o)?(l.a=o/4294967296|0,l.b=o|0):c+=o;for(var f=0;f<c.length+20;f++)l.b^=c.charCodeAt(f)|0,l.next()}function s(o,l){return l.a=o.a,l.b=o.b,l.c=o.c,l.d=o.d,l}function a(o,l){var c=new i(o),f=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},d.int32=c.next,d.quick=d,f&&(typeof f=="object"&&s(f,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=a:this.tychei=a})(l2e,t)}(Pv)),Pv.exports}var Fv={exports:{}};const u2e={},f2e=Object.freeze(Object.defineProperty({__proto__:null,default:u2e},Symbol.toStringTag,{value:"Module"})),h2e=qee(f2e);var d2e=Fv.exports,oW;function p2e(){return oW||(oW=1,function(t){(function(e,n,r){var i=256,s=6,a=52,o="random",l=r.pow(i,s),c=r.pow(2,a),f=c*2,d=i-1,p;function g(k,A,E){var I=[];A=A==!0?{entropy:!0}:A||{};var N=w(b(A.entropy?[k,T(n)]:k??S(),3),I),_=new y(I),R=function(){for(var O=_.g(s),F=l,z=0;O<c;)O=(O+z)*i,F*=i,z=_.g(1);for(;O>=f;)O/=2,F/=2,z>>>=1;return(O+z)/F};return R.int32=function(){return _.g(4)|0},R.quick=function(){return _.g(4)/4294967296},R.double=R,w(T(_.S),n),(A.pass||E||function(O,F,z,W){return W&&(W.S&&x(W,_),O.state=function(){return x(_,{})}),z?(r[o]=O,F):O})(R,N,"global"in A?A.global:this==r,A.state)}function y(k){var A,E=k.length,I=this,N=0,_=I.i=I.j=0,R=I.S=[];for(E||(k=[E++]);N<i;)R[N]=N++;for(N=0;N<i;N++)R[N]=R[_=d&_+k[N%E]+(A=R[N])],R[_]=A;(I.g=function(O){for(var F,z=0,W=I.i,P=I.j,M=I.S;O--;)F=M[W=d&W+1],z=z*i+M[d&(M[W]=M[P=d&P+F])+(M[P]=F)];return I.i=W,I.j=P,z})(i)}function x(k,A){return A.i=k.i,A.j=k.j,A.S=k.S.slice(),A}function b(k,A){var E=[],I=typeof k,N;if(A&&I=="object")for(N in k)try{E.push(b(k[N],A-1))}catch{}return E.length?E:I=="string"?k:k+"\0"}function w(k,A){for(var E=k+"",I,N=0;N<E.length;)A[d&N]=d&(I^=A[d&N]*19)+E.charCodeAt(N++);return T(A)}function S(){try{var k;return p&&(k=p.randomBytes)?k=k(i):(k=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(k)),T(k)}catch{var A=e.navigator,E=A&&A.plugins;return[+new Date,e,E,e.screen,T(n)]}}function T(k){return String.fromCharCode.apply(0,k)}if(w(r.random(),n),t.exports){t.exports=g;try{p=h2e}catch{}}else r["seed"+o]=g})(typeof self<"u"?self:d2e,[],Math)}(Fv)),Fv.exports}var m2,lW;function m2e(){if(lW)return m2;lW=1;var t=Jke(),e=t2e(),n=r2e(),r=s2e(),i=o2e(),s=c2e(),a=p2e();return a.alea=t,a.xor128=e,a.xorwow=n,a.xorshift7=r,a.xor4096=i,a.tychei=s,m2=a,m2}var e_=m2e();/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pX{constructor(e,n,r,i,s){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const a=s||Math.random();this.random=e_.alea(a.toString())}nextValue(){if(!isNaN(this.nextVal)){const i=this.nextVal;return this.nextVal=NaN,i}let e,n,r=!1;for(;!r;){let i,s,a;do i=2*this.random()-1,s=2*this.random()-1,a=i*i+s*s;while(a>=1||a===0);const o=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*i*o,n=this.mean+this.stdDev*s*o,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class g2e{constructor(e=0,n=1,r,i){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=e_.alea(i)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y2e(t,e=0,n=1,r,i){if(to(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const s=new pX(e,n,r,!1,i),a=at(t,r);for(let o=0;o<a.values.length;o++)a.values[o]=s.nextValue();return a.toTensor()}const v2e=se({randomNormal_:y2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b2e(t,e=0,n=1,r="float32",i){to(t);const s=at(t,r),a=new g2e(e,n,null,i);for(let o=0;o<s.values.length;o++)s.values[o]=a.nextValue();return s.toTensor()}const pg=se({randomUniform_:b2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kp(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const i={start:t,stop:e,step:n,dtype:r};return re.runKernel(AO,{},i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x2e(t){const n={input:X(t,"input","real")};return re.runKernel(kO,n)}const Zb=se({real_:x2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w2e(t){const n={x:X(t,"x","reciprocal")};return re.runKernel(Km,n)}const S2e=se({reciprocal_:w2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C2e(t){const n={x:X(t,"x","relu")};return re.runKernel(Xm,n)}const Rc=se({relu_:C2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T2e(t){const n={x:X(t,"x","relu6")};return re.runKernel(Ym,n)}const mX=se({relu6_:T2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A2e(t,e){const r={x:X(t,"x","reverse")},i={dims:e};return re.runKernel(Gx,r,i)}const wc=se({reverse_:A2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k2e(t){const n={x:X(t,"x","round")};return re.runKernel(Zm,n)}const gX=se({round_:k2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $2e(t){const n={x:X(t,"x","rsqrt","float32")};return re.runKernel(Qm,n)}const yX=se({rsqrt_:$2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E2e(t){const n={x:X(t,"x","selu")};return re.runKernel(Jm,n)}const vX=se({selu_:E2e});function I2e(t,e,n,r,i,s=[1,1],a="NHWC"){const o=X(t,"x","separableConv2d"),l=X(e,"depthwiseFilter","separableConv2d"),c=X(n,"pointwiseFilter","separableConv2d");let f=o,d=!1;if(o.rank===3&&(d=!0,f=ie(o,[1,o.shape[0],o.shape[1],o.shape[2]])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");U(f.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${f.rank}.`),U(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),U(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),U(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),U(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const p=l.shape[2],g=l.shape[3];U(c.shape[2]===p*g,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*g}, but got ${c.shape[2]}.`);const y=UO(f,l,r,i,a,s),b=bc(y,c,1,"valid",a);return d?ie(b,[b.shape[1],b.shape[2],b.shape[3]]):b}const bX=se({separableConv2d_:I2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N2e(t){const n={x:X(t,"x","sign")};return re.runKernel(ng,n)}const O2e=se({sign_:N2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _2e(t){const n={x:X(t,"x","sin","float32")};return re.runKernel(eg,n)}const xX=se({sin_:_2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R2e(t){const n={x:X(t,"x","sinh")};return re.runKernel(tg,n)}const wX=se({sinh_:R2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D2e(t,e,n){const r=X(t,"x","slice1d");return U(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Gt(r,[e],[n])}const t_=se({slice1d_:D2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M2e(t,e,n){const r=X(t,"x","slice2d");return U(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Gt(r,e,n)}const SX=se({slice2d_:M2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P2e(t,e,n){const r=X(t,"x","slice3d");return U(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Gt(r,e,n)}const n_=se({slice3d_:P2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F2e(t,e,n){const r=X(t,"x","slice4d");return U(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Gt(r,e,n)}const Qb=se({slice4d_:F2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L2e(t,e=-1){const n=X(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},i={dim:e};return re.runKernel(Zx,r,i)}const r_=se({softmax_:L2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B2e(t){U(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return re.runKernel(pO,e)}const CX=se({fft_:B2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z2e(t){U(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return re.runKernel(yO,e)}const DE=se({ifft_:z2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j2e(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const i=ie(t,[n,e]);r=DE(i)}else{const i=[n,2*(e-1)],s=ie(Zb(t),[n,e]),a=ie(qO(t),[n,e]),o=wc(Gt(s,[0,1],[n,e-2]),1),l=ne(wc(Gt(a,[0,1],[n,e-2]),1),kt(-1)),c=Wr([s,o],1),f=Wr([a,l],1),d=ie($f(c,f),[i[0],i[1]]);r=DE(d)}if(r=Zb(r),t.rank===3&&t.shape[0]!==0){const i=r,s=t.shape[0];r=ie(r,[s,r.shape[0]/s,r.shape[1]]),i.dispose()}return r}const V2e=se({irfft_:j2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U2e(t,e,n=0){const i={x:X(t,"x","split")},s={numOrSizeSplits:e,axis:n};return re.runKernel(Yx,i,s)}const Ti=se({split_:U2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W2e(t,e){U(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let i;if(e!=null&&e<n){const y=t.shape.map(b=>0),x=t.shape.map(b=>b);x[t.shape.length-1]=e,i=Gt(t,y,x),n=e}else if(e!=null&&e>n){const y=t.shape.map(x=>x);y[t.shape.length-1]=e-n,i=Wr([t,qn(y)],t.shape.length-1),n=e}else i=t;const s=bt(i),a=ie($f(i,s),[r,n]),o=CX(a),l=Math.floor(n/2)+1,c=Zb(o),f=qO(o),d=Ti(c,[l,n-l],c.shape.length-1),p=Ti(f,[l,n-l],f.shape.length-1),g=i.shape.slice();return g[i.shape.length-1]=l,ie($f(d[0],p[0]),g)}const G2e=se({rfft_:W2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q2e(t,e){let n=X(t,"a","squaredDifference"),r=X(e,"b","squaredDifference");[n,r]=vn(n,r),nt(n.shape,r.shape);const i={a:n,b:r},s={};return re.runKernel(ag,i,s)}const H2e=se({squaredDifference_:q2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K2e(t,e){const n=X(t,"x","squeeze","string_or_numeric");return ie(n,ol(n.shape,e).newShape)}const mg=se({squeeze_:K2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X2e(t,e=0){const n=VK(t,"tensors","stack","string_or_numeric");U(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&U(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,i={axis:e};return re.runKernel(Lx,r,i)}const Xa=se({stack_:X2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y2e(t,e=0){const r={x:X(t,"x","step")},i={alpha:e};return re.runKernel(fg,r,i)}const gg=se({step_:Y2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z2e(t,e,n,r,i=0,s=0,a=0,o=0,l=0){const f={x:X(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:r,beginMask:i,endMask:s,ellipsisMask:a,newAxisMask:o,shrinkAxisMask:l};return re.runKernel(OO,f,d)}const Q2e=se({stridedSlice_:Z2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J2e(t){const n={x:X(t,"x","tan","float32")};return re.runKernel(lg,n)}const e$e=se({tan_:J2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ai(t,e){Q8(t);const n=n1(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return r1(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g2(t,e,n){if(Q8(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=n1(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return r1(t,e,r,n)}function TX(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(s+` update.rank < ${i}. `);if(t.length<r+(n.rank-i))throw new Error(s+` Output shape length < ${r+(n.rank-i)}`);if(n.rank!==i+t.length-r)throw new Error(s+` update.rank != ${i+t.length-r}`);for(let a=0;a<i;++a)if(n.shape[a]!==e.shape[a])throw new Error(s+` updates.shape[${a}] (${n.shape[a]}) != indices.shape[${a}] (${e.shape[a]}).`);for(let a=0;a<n.rank-i;++a)if(n.shape[a+i]!==t[a+r])throw new Error(s+` updates.shape[${a+i}] (${n.shape[a+i]}) != shape[${a+i}] (${t[a+i]})`)}function t$e(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}TX(n,e,t)}function Dc(t,e,n){const r=e.shape.length,i=r>1?e.shape[r-1]:1,s=n.length;let a=1;for(let d=i;d<s;++d)a*=n[d];const o=i<1?1:i,l=ve(e.shape)/o,c=[...je(n.slice(0,i)),1],f=ve(n);return{sliceRank:i,numUpdates:l,sliceSize:a,strides:c,outputSize:f}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n$e(t,e=1,n=!0){const r=X(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${e}`);const s={x:r},a={k:e,sorted:n},[o,l]=re.runKernel(_O,s,a);return{values:o,indices:l}}const r$e=se({topk_:n$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i$e(t,e=0,n=1,r,i){if(to(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const s=new pX(e,n,r,!0,i),a=at(t,r);for(let o=0;o<a.values.length;o++)a.values[o]=s.nextValue();return a.toTensor()}const AX=se({truncatedNormal_:i$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s$e(t,e=0){const n=X(t,"x","unique","string_or_numeric");U(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},i={axis:e},[s,a]=re.runKernel(DO,r,i);return{values:s,indices:a}}const a$e=se({unique_:s$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o$e(t,e,n){const r=X(t,"x","unsortedSegmentSum"),i=X(e,"segmentIds","unsortedSegmentSum","int32");U(Af(n),()=>"numSegments must be of dtype int");const s={x:r,segmentIds:i},a={numSegments:n};return re.runKernel(Jx,s,a)}const kX=se({unsortedSegmentSum_:o$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l$e(t,e=0){const n=X(t,"x","unstack","string_or_numeric");U(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},i={axis:e};return re.runKernel(Qx,r,i)}const Sc=se({unstack_:l$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c$e(t,e=!0,n,r){return re.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $X(t,e){const n=[];for(let s=0;s<e.length;s++)e[s]&&n.push(s);const r=at(t,"int32"),i=at([n.length,t.length],"int32");for(let s=0;s<n.length;s++){const a=r.indexToLoc(n[s]),o=s*t.length;i.values.set(a,o)}return i.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u$e(t,e,n){const r=X(t,"x","transpose");if(e==null&&(e=r.shape.map((a,o)=>o).reverse()),U(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(a=>{U(a>=0&&a<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const i={x:r},s={perm:e};return r.dtype==="complex64"?ce(()=>{let a=Zb(r),o=qO(r);return a=re.runKernel(Yu,{x:a},s),o=re.runKernel(Yu,{x:o},s),n&&(o=yn(o)),$f(a,o)}):re.runKernel(Yu,i,s)}const vt=se({transpose_:u$e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f$e(t,e){if(e==null)return t.shape.slice();if(Et(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h$e(t,e,n,r){const i=X(t,"x","dropout");if(U(i.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),U(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof On?i.clone():i;const s=f$e(i,n),a=1-e,o=We(c1(ke(pg(s,0,1,"float32",r),a)),a);return ne(i,o)}const d$e=se({dropout_:h$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p$e(t,e,n,r,i,s="NHWC",a){let o=t;t.rank===3&&(o=ie(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=ie(e,[1,e.shape[0],e.shape[1],e.shape[2]])),U(o.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${o.shape}.`),U(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),U(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const c=s==="NHWC"?o.shape[3]:o.shape[1],f=s==="NHWC"?l.shape[3]:l.shape[1];U(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),U(f===n[3],()=>`Error in conv2dDerFilter: depth of dy (${f}) must match output depth for filter (${n[3]}).`),Hr("conv2dDerFilter",i,a);const d={x:o,dy:l},p={strides:r,pad:i,dataFormat:s,dimRoundingMode:a,filterShape:n};return re.runKernel(rO,d,p)}const i_=se({conv2DBackpropFilter_:p$e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s_(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return ne(t,gg(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function a_(t,e){let n=e;const r=Fn(t.shape,e.shape);return r.length>0&&(n=Ue(n,r)),ie(n,t.shape)}function o_(t,e,n,r){if(e==="linear")return t;if(e==="relu")return Rc(t);if(e==="elu")return o1(t);if(e==="relu6")return mX(t);if(e==="prelu")return JO(t,n);if(e==="leakyrelu")return HO(t,r);if(e==="sigmoid")return eh(t);throw new Error(`Unknown fused activation ${e}.`)}const l_=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m$e({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:a,bias:o,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:f}){if(l=l||"linear",l_(re.state.gradientDepth,l)===!1){U(i==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let E=bc(t,e,n,r,i,s,a);return o!=null&&(E=ke(E,o)),o_(E,l,c,f)}const d=X(t,"x","conv2d","float32"),p=X(e,"filter","conv2d","float32");let g=d,y=!1;d.rank===3&&(y=!0,g=ie(d,[1,d.shape[0],d.shape[1],d.shape[2]])),U(g.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${g.rank}.`),U(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),Hr("fused conv2d",r,a);const x=i==="NHWC"?g.shape[3]:g.shape[1];U(p.shape[2]===x,()=>`Error in conv2d: depth of input (${x}) must match input depth for filter ${p.shape[2]}.`),U(vr(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);const b=sr(g.shape,p.shape,n,s,r,a);let w;o!=null&&(w=X(o,"bias","fused conv2d"),[w]=vn(w,d),i==="NHWC"?nt(b.outShape,w.shape):(U(w.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${w.shape.length}.`),U(w.shape.length===0||w.shape[0]===b.outChannels||w.shape[0]===1,()=>`Error in fused conv2d: bias shape (${w.shape}) is not compatible with the number of output channels (${b.outChannels})`)));let S;if(c!=null){const E=c.shape;if(U(E.length<=1||E.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${E.length}.`),E.length===1)U(E[0]===1||E[0]===b.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${E}) is not compatible with the number of output channels (${b.outChannels}).`);else if(E.length===3)try{nt(E,b.outShape)}catch{const N=`Error in fused conv2d: PReLU activation weights (${E}) is not compatible with the output shape of the conv2d (${b.outShape}).`;throw Error(N)}S=X(c,"prelu weights","fused conv2d")}const T=(E,I)=>{U(i==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);const[N,_,R,O]=I,F=s_(E,R,l);U(yc(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const z=jO(_.shape,F,N,n,r),W=i_(_,F,N.shape,n,r),P=[z,W];if(O!=null){const M=a_(O,F);P.push(M)}return P},k={x:g,filter:p,bias:w,preluActivationWeights:S},A={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:a,activation:l,leakyreluAlpha:f};return o==null?If((I,N,_)=>{let R=re.runKernel(Gb,k,A);return _([N,I,R]),y&&(R=ie(R,[R.shape[1],R.shape[2],R.shape[3]])),{value:R,gradFunc:T}})(g,p):If((I,N,_,R)=>{let O=re.runKernel(Gb,k,A);return R([N,I,O,_]),y&&(O=ie(O,[O.shape[1],O.shape[2],O.shape[3]])),{value:O,gradFunc:T}})(g,p,w)}const g$e=se({fusedConv2d_:m$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y$e(t,e,n,r,i,s=[1,1],a){let o=t;t.rank===3&&(o=ie(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=ie(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={x:o,dy:l},f={strides:r,pad:i,dimRoundingMode:a,dilations:s,filterShape:n};return re.runKernel(uO,c,f)}const v$e=se({depthwiseConv2dNativeBackpropFilter_:y$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b$e(t,e,n,r,i,s=[1,1],a){let o=e,l=!1;e.rank===3&&(l=!0,o=ie(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={dy:o,filter:n},f={strides:r,pad:i,dimRoundingMode:a,dilations:s,inputShape:t},d=re.runKernel(fO,c,f);return l?ie(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const x$e=se({depthwiseConv2dNativeBackpropInput_:b$e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w$e({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:i,activation:s="linear",preluActivationWeights:a,leakyreluAlpha:o=.2}){if(l_(re.state.gradientDepth,s)===!1){let O=At(t,e,n,r);return i!=null&&(O=ke(O,i)),o_(O,s,a,o)}let l=X(t,"a","fused matMul"),c=X(e,"b","fused matMul");[l,c]=vn(l,c);const f=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?c.shape[c.rank-1]:c.shape[c.rank-2],p=n?l.shape[l.rank-1]:l.shape[l.rank-2],g=r?c.shape[c.rank-2]:c.shape[c.rank-1],y=l.shape.slice(0,-2),x=c.shape.slice(0,-2),b=ve(y),w=ve(x);U(f===d,()=>`Error in fused matMul: inner shapes (${f}) and (${d}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);const T=nt(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,g]),k=n?ie(l,[b,f,p]):ie(l,[b,p,f]),A=r?ie(c,[w,g,d]):ie(c,[w,d,g]);let E;i!=null&&(E=X(i,"bias","fused matMul"),[E]=vn(E,l),nt(T,E.shape));let I;a!=null&&(I=X(a,"prelu weights","fused matMul"));const N=(O,F)=>{const[z,W,P,M]=F,j=s_(ie(O,P.shape),P,s);let V,q;if(!n&&!r?(V=At(j,W,!1,!0),q=At(z,j,!0,!1)):!n&&r?(V=At(j,W,!1,!1),q=At(j,z,!0,!1)):n&&!r?(V=At(W,j,!1,!0),q=At(z,j,!1,!1)):(V=At(W,j,!0,!0),q=At(j,z,!0,!0)),i!=null){const L=a_(M,j);return[V,q,L]}else return[V,q]},_={a:k,b:A,bias:E,preluActivationWeights:I},R={transposeA:n,transposeB:r,activation:s,leakyreluAlpha:o};return i==null?If((F,z,W)=>{const P=re.runKernel(Wb,_,R);return W([F,z,P]),{value:ie(P,T),gradFunc:N}})(k,A):If((F,z,W,P)=>{const M=re.runKernel(Wb,_,R);return P([F,z,M,W]),{value:ie(M,T),gradFunc:N}})(k,A,E)}const cW=se({fusedMatMul_:w$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S$e(t,e,n,r,i="bilinear",s=0){const a=X(t,"image","cropAndResize"),o=X(e,"boxes","cropAndResize","float32"),l=X(n,"boxInd","cropAndResize","int32"),c=o.shape[0];U(a.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${a.rank}.`),U(o.rank===2&&o.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${o.shape}.`),U(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${o.shape}.`),U(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),U(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),U(i==="bilinear"||i==="nearest",()=>`method must be bilinear or nearest, but was ${i}`);const f={image:a,boxes:o,boxInd:l},d={method:i,extrapolationValue:s,cropSize:r};return re.runKernel(oO,f,d)}const C$e=se({cropAndResize_:S$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T$e(t){const e=X(t,"image","flipLeftRight","float32");U(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return re.runKernel(gO,n,{})}const A$e=se({flipLeftRight_:T$e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k$e(t){const e=X(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];U(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),U(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const i=new Array(e.rank);return i.fill(1,0,n),i[n]=3,vs(e,i)}const $$e=se({grayscaleToRGB_:k$e});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E$e(t){const e=X(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];U(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),U(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const i=e.dtype,s=Re(e,"float32"),a=ai([.2989,.587,.114]);let o;switch(e.rank){case 2:o=Id("ij,j->i",s,a);break;case 3:o=Id("ijk,k->ij",s,a);break;case 4:o=Id("ijkl,l->ijk",s,a);break;case 5:o=Id("ijklm,m->ijkl",s,a);break;case 6:o=Id("ijklmn,n->ijklm",s,a);break;default:throw new Error("Not a valid tensor rank.")}return o=zr(o,-1),Re(o,i)}const I$e=se({rgbToGrayscale_:E$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N$e(t,e,n=0,r=.5){const i=X(t,"image","rotateWithOffset","float32");U(i.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);const s={image:i},a={radians:e,fillValue:n,center:r};return re.runKernel(MO,s,a)}const O$e=se({rotateWithOffset_:N$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nh(t,e,n,r,i,s){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),s==null&&(s=0);const a=t.shape[0];return n=Math.min(n,a),U(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),U(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),U(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),U(e.rank===1,()=>"scores must be a 1D tensor"),U(e.shape[0]===a,()=>`scores has incompatible shape with boxes. Expected ${a}, but was ${e.shape[0]}`),U(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _$e(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=X(t,"boxes","nonMaxSuppression","float32"),a=X(e,"scores","nonMaxSuppression","float32"),o=nh(s,a,n,r,i);n=o.maxOutputSize,r=o.iouThreshold,i=o.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return re.runKernel(SO,{boxes:s,scores:a},l)}const R$e=se({nonMaxSuppression_:_$e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D$e(t,e,n){const r=M$e(t,e,n),i=r<0?-(r+1):r;t.splice(i,0,e)}function M$e(t,e,n){return F$e(t,e,n||P$e)}function P$e(t,e){return t>e?1:t<e?-1:0}function F$e(t,e,n){let r=0,i=t.length,s=0,a=!1;for(;r<i;){s=r+(i-r>>>1);const o=n(e,t[s]);o>0?r=s+1:(i=s,a=!o)}return a?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c_(t,e,n,r,i){return h_(t,e,n,r,i,0)}function u_(t,e,n,r,i,s){return h_(t,e,n,r,i,0,!1,s,!0)}function f_(t,e,n,r,i,s){return h_(t,e,n,r,i,s,!0)}function h_(t,e,n,r,i,s,a=!1,o=!1,l=!1){const c=[];for(let b=0;b<e.length;b++)e[b]>i&&c.push({score:e[b],boxIndex:b,suppressBeginIndex:0});c.sort(uW);const f=s>0?-.5/s:0,d=[],p=[];for(;d.length<n&&c.length>0;){const b=c.pop(),{score:w,boxIndex:S,suppressBeginIndex:T}=b;if(w<i)break;let k=!1;for(let A=d.length-1;A>=T;--A){const E=L$e(t,S,d[A]);if(E>=r){k=!0;break}if(b.score=b.score*B$e(r,f,E),b.score<=i)break}b.suppressBeginIndex=d.length,k||(b.score===w?(d.push(S),p.push(b.score)):b.score>i&&D$e(c,b,uW))}const g=d.length,y=n-g;o&&y>0&&(d.push(...new Array(y).fill(0)),p.push(...new Array(y).fill(0)));const x={selectedIndices:d};return a&&(x.selectedScores=p),l&&(x.validOutputs=g),x}function L$e(t,e,n){const r=t.subarray(e*4,e*4+4),i=t.subarray(n*4,n*4+4),s=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(i[0],i[2]),f=Math.min(i[1],i[3]),d=Math.max(i[0],i[2]),p=Math.max(i[1],i[3]),g=(o-s)*(l-a),y=(d-c)*(p-f);if(g<=0||y<=0)return 0;const x=Math.max(s,c),b=Math.max(a,f),w=Math.min(o,d),S=Math.min(l,p),T=Math.max(w-x,0)*Math.max(S-b,0);return T/(g+y-T)}function B$e(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function uW(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function z$e(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=X(t,"boxes","nonMaxSuppressionAsync"),a=X(e,"scores","nonMaxSuppressionAsync"),o=nh(s,a,n,r,i);n=o.maxOutputSize,r=o.iouThreshold,i=o.scoreThreshold;const l=await Promise.all([s.data(),a.data()]),c=l[0],f=l[1],{selectedIndices:d}=c_(c,f,n,r,i);return s!==t&&s.dispose(),a!==e&&a.dispose(),ai(d,"int32")}const j$e=z$e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V$e(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const a=X(t,"boxes","nonMaxSuppression"),o=X(e,"scores","nonMaxSuppression"),l=nh(a,o,n,r,i,s);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,s=l.softNmsSigma;const c={boxes:a,scores:o},f={maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:s},d=re.runKernel(TO,c,f);return{selectedIndices:d[0],selectedScores:d[1]}}const U$e=se({nonMaxSuppressionWithScore_:V$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function W$e(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const a=X(t,"boxes","nonMaxSuppressionAsync"),o=X(e,"scores","nonMaxSuppressionAsync"),l=nh(a,o,n,r,i,s);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,s=l.softNmsSigma;const c=await Promise.all([a.data(),o.data()]),f=c[0],d=c[1],{selectedIndices:p,selectedScores:g}=f_(f,d,n,r,i,s);return a!==t&&a.dispose(),o!==e&&o.dispose(),{selectedIndices:ai(p,"int32"),selectedScores:ai(g)}}const G$e=W$e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q$e(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const a=X(t,"boxes","nonMaxSuppression"),o=X(e,"scores","nonMaxSuppression"),l=nh(a,o,n,r,i,null),c=l.maxOutputSize,f=l.iouThreshold,d=l.scoreThreshold,p={boxes:a,scores:o},g={maxOutputSize:c,iouThreshold:f,scoreThreshold:d,padToMaxOutputSize:s},y=re.runKernel(CO,p,g);return{selectedIndices:y[0],validOutputs:y[1]}}const H$e=se({nonMaxSuppressionPadded_:q$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function K$e(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const a=X(t,"boxes","nonMaxSuppressionAsync"),o=X(e,"scores","nonMaxSuppressionAsync"),l=nh(a,o,n,r,i,null),c=l.maxOutputSize,f=l.iouThreshold,d=l.scoreThreshold,[p,g]=await Promise.all([a.data(),o.data()]),{selectedIndices:y,validOutputs:x}=u_(p,g,c,f,d,s);return a!==t&&a.dispose(),o!==e&&o.dispose(),{selectedIndices:ai(y,"int32"),validOutputs:kt(x,"int32")}}const X$e=K$e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y$e(t,e,n=!1,r=!1){const i=X(t,"images","resizeBilinear");U(i.rank===3||i.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),U(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),U(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=i,a=!1;i.rank===3&&(a=!0,s=ie(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const o={images:s},l={alignCorners:n,halfPixelCenters:r,size:e},c=re.runKernel(Wx,o,l);return a?ie(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const EX=se({resizeBilinear_:Y$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z$e(t,e,n=!1,r=!1){const i=X(t,"images","resizeNearestNeighbor");U(i.rank===3||i.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),U(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),U(i.dtype==="float32"||i.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),U(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=i,a=!1;i.rank===3&&(a=!0,s=ie(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const o={images:s},l={alignCorners:n,halfPixelCenters:r,size:e},c=re.runKernel(Ux,o,l);return a?ie(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const IX=se({resizeNearestNeighbor_:Z$e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q$e(t,e="binary",n=!1,r=.5){const i=X(t,"image","threshold"),s=.2989,a=.587,o=.114,l=i.shape[0]*i.shape[1];let c=ne(ai([r]),255),f,d,p,g;if(U(i.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),U(i.shape[2]===3||i.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),U(i.dtype==="int32"||i.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),U(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),i.shape[2]===3){[f,d,p]=Ti(i,[1,1,1],-1);const b=ne(f,s),w=ne(d,a),S=ne(p,o);g=ke(ke(b,w),S)}else g=t;if(e==="otsu"){const b=XTe(Re(gX(g),"int32"),UK([]),256);c=J$e(b,l)}const y=n?th(g,c):$i(g,c);return Re(ne(y,255),"int32")}function J$e(t,e){let n=ai([-1]),r=ai([0]),i=ai([0]),s,a,o,l,c,f;for(let d=0;d<t.size-1;d++){s=Gt(t,0,d+1),a=Gt(t,d+1),c=We(Ue(s),e),f=We(Ue(a),e);const p=Ue(ne(s,Kp(0,s.size)));o=We(p,Ue(s));const g=a1(a.shape,s.size),y=ke(Kp(0,a.size),g),x=ne(a,y);l=We(Ue(x),Ue(a));const b=Ke(o,l),w=Ke(o,l),S=ne(c,f);i=ne(ne(S,b),w);const T=$i(i,r);r=Dr(T,i,r),n=Dr(T,ai([d]),n)}return n}const eEe=se({threshold_:Q$e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tEe(t,e,n="nearest",r="constant",i=0,s){const a=X(t,"image","transform","float32"),o=X(e,"transforms","transform","float32");U(a.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${a.rank}.`),U(o.rank===2&&(o.shape[0]===a.shape[0]||o.shape[0]===1)&&o.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),U(s==null||s.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`);const l={image:a,transforms:o},c={interpolation:n,fillMode:r,fillValue:i,outputShape:s};return re.runKernel(RO,l,c)}const nEe=se({transform_:tEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rEe(t,e,n){const r=X(t,"a","bandPart");U(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const i=r.shape,[s,a]=r.shape.slice(-2);let o,l;typeof e=="number"?(U(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),U(e<=s,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${s}).`),o=X(e<0?s:e,"numLower","bandPart")):(U(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),o=Dr(Xb(e,0),s,Hp(e,s))),typeof n=="number"?(U(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),U(n<=a,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${a}).`),l=X(n<0?a:n,"numUpper","bandPart")):(U(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=Dr(Xb(n,0),a,Hp(n,a)));const c=ie(Kp(0,s,1,"int32"),[-1,1]),f=Kp(0,a,1,"int32"),d=Ke(c,f),p=Ka(th(d,o),_c(d,yn(l))),g=qn([s,a],r.dtype);return ie(Xa(Sc(ie(r,[-1,s,a])).map(y=>Dr(p,y,g))),i)}const iEe=se({bandPart_:rEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sEe(t){let e;if(Array.isArray(t)){e=!1,U(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const i=t[0].shape[0];for(let s=1;s<t.length;++s)U(t[s].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[s].shape[0]} vs. ${i})`)}else e=!0,t=Ti(t,t.shape[0],0).map(i=>mg(i,[0]));U(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let i=0;i<t.length;++i)n.push(re.tidy(()=>{let s=r[i];if(i>0)for(let a=0;a<i;++a){const o=ne(Ue(ne(n[a],s)),n[a]);s=Ke(s,o)}return We(s,l1(s,"euclidean"))}));return e?Xa(n,0):n}const aEe=se({gramSchmidt_:sEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oEe(t,e=!1){if(U(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return fW(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),r=Sc(ie(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],s=[];r.forEach(l=>{const[c,f]=fW(l,e);i.push(c),s.push(f)});const a=ie(Xa(i,0),t.shape),o=ie(Xa(s,0),t.shape);return[a,o]}}function fW(t,e=!1){return re.tidy(()=>{U(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let i=lX(n),s=sc(t);const a=g2([[1]],[1,1]);let o=sc(a);const l=n>=r?r:n;for(let c=0;c<l;++c){const f=s,d=o,p=i;[o,s,i]=re.tidy(()=>{const g=Gt(s,[c,c],[n-c,1]),y=l1(g),x=Gt(s,[c,c],[1,1]),b=Dr($i(x,0),g2([[-1]]),g2([[1]])),w=Ke(x,ne(b,y)),S=We(g,w);S.shape[0]===1?o=sc(a):o=Wr([a,Gt(S,[1,0],[S.shape[0]-1,S.shape[1]])],0);const T=yn(We(At(b,w),y)),k=Gt(s,[c,0],[n-c,r]),A=ne(T,o),E=vt(o);if(c===0)s=Ke(k,At(A,At(E,k)));else{const _=Ke(k,At(A,At(E,k)));s=Wr([Gt(s,[0,0],[c,r]),_],0)}const I=vt(A),N=Gt(i,[0,c],[n,i.shape[1]-c]);if(c===0)i=Ke(N,At(At(N,o),I));else{const _=Ke(N,At(At(N,o),I));i=Wr([Gt(i,[0,0],[n,c]),_],1)}return[o,s,i]}),ft([f,d,p])}return!e&&n>r&&(i=Gt(i,[0,0],[n,r]),s=Gt(s,[0,0],[r,r])),[i,s]})}const lEe=se({qr_:oEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ma={flipLeftRight:A$e,grayscaleToRGB:$$e,resizeNearestNeighbor:IX,resizeBilinear:EX,rgbToGrayscale:I$e,rotateWithOffset:O$e,cropAndResize:C$e,nonMaxSuppression:R$e,nonMaxSuppressionAsync:j$e,nonMaxSuppressionWithScore:U$e,nonMaxSuppressionWithScoreAsync:G$e,nonMaxSuppressionPadded:H$e,nonMaxSuppressionPaddedAsync:X$e,threshold:eEe,transform:nEe},cEe={bandPart:iEe,gramSchmidt:aEe,qr:lEe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uEe=new Map,fEe=new Map;class rh{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class qi{constructor(){this.classNameMap={}}static getMap(){return qi.instance==null&&(qi.instance=new qi),qi.instance}static register(e){qi.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Te(t,e,n){U(t.className!=null,()=>"Class being registered does not have the static className property defined."),U(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),U(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,i=e+">"+r;return qi.register(t),uEe.set(i,t),fEe.set(t,i),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dl extends rh{minimize(e,n=!1,r){const{value:i,grads:s}=this.computeGradients(e,r);if(r!=null){const a=r.map(o=>({name:o.name,tensor:s[o.name]}));this.applyGradients(a)}else this.applyGradients(s);return ft(s),n?i:(i.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return gke(e,n)}dispose(){this.iterations_!=null&&ft(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:kt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(dl,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NX extends dl{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=re.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=re.registeredVariables[r],a=!1;this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accum_grad`,variable:ce(()=>bt(s).variable(a))}),this.accumulatedUpdates[i]==null&&(this.accumulatedUpdates[i]={originalName:`${r}/accum_var`,variable:ce(()=>bt(s).variable(a))});const o=Array.isArray(e)?e[i].tensor:e[r];if(o==null)return;const l=this.accumulatedGrads[i].variable,c=this.accumulatedUpdates[i].variable;ce(()=>{const f=ke(ne(l,this.rho),ne(Zt(o),1-this.rho)),d=ne(We(yr(ke(c,this.epsilon)),yr(ke(l,this.epsilon))),o),p=ke(ne(c,this.rho),ne(Zt(d),1-this.rho));l.assign(f),c.assign(p);const g=ke(ne(d,-this.learningRate),s);s.assign(g)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(ft(this.accumulatedGrads.map(e=>e.variable)),ft(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OX extends dl{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=re.registeredVariables[r];this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accumulator`,variable:ce(()=>a1(s.shape,this.initialAccumulatorValue).variable(!1))});const a=Array.isArray(e)?e[i].tensor:e[r];if(a==null)return;const o=this.accumulatedGrads[i].variable;ce(()=>{const l=ke(o,Zt(a));o.assign(l);const c=ke(ne(We(a,yr(ke(l,re.backend.epsilon()))),-this.learningRate),s);s.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&ft(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _X extends dl{static get className(){return"Adam"}constructor(e,n,r,i=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],ce(()=>{this.accBeta1=kt(n).variable(),this.accBeta2=kt(r).variable()}),i==null&&(this.epsilon=re.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);ce(()=>{const r=Ke(1,this.accBeta1),i=Ke(1,this.accBeta2);n.forEach((s,a)=>{const o=re.registeredVariables[s],l=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${s}/m`,variable:ce(()=>bt(o).variable(l))}),this.accumulatedSecondMoment[a]==null&&(this.accumulatedSecondMoment[a]={originalName:`${s}/v`,variable:ce(()=>bt(o).variable(l))});const c=Array.isArray(e)?e[a].tensor:e[s];if(c==null)return;const f=this.accumulatedFirstMoment[a].variable,d=this.accumulatedSecondMoment[a].variable,p=ke(ne(f,this.beta1),ne(c,1-this.beta1)),g=ke(ne(d,this.beta2),ne(Zt(c),1-this.beta2)),y=We(p,r),x=We(g,i);f.assign(p),d.assign(g);const b=ke(ne(We(y,ke(yr(x),this.epsilon)),-this.learningRate),o);o.assign(b)}),this.accBeta1.assign(ne(this.accBeta1,this.beta1)),this.accBeta2.assign(ne(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&ft(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&ft(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),ce(()=>{this.accBeta1.assign(xc(this.beta1,this.iterations_+1)),this.accBeta2.assign(xc(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RX extends dl{static get className(){return"Adamax"}constructor(e,n,r,i=null,s=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.decay=s,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],ce(()=>{this.iteration=kt(0).variable(),this.accBeta1=kt(n).variable()}),i==null&&(this.epsilon=re.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);ce(()=>{const r=Ke(1,this.accBeta1),i=We(-this.learningRate,ke(ne(this.iteration,this.decay),1));n.forEach((s,a)=>{const o=re.registeredVariables[s],l=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${s}/m`,variable:bt(o).variable(l)}),this.accumulatedWeightedInfNorm[a]==null&&(this.accumulatedWeightedInfNorm[a]={originalName:`${s}/v`,variable:bt(o).variable(l)});const c=Array.isArray(e)?e[a].tensor:e[s];if(c==null)return;const f=this.accumulatedFirstMoment[a].variable,d=this.accumulatedWeightedInfNorm[a].variable,p=ke(ne(f,this.beta1),ne(c,1-this.beta1)),g=ne(d,this.beta2),y=Er(c),x=fl(g,y);f.assign(p),d.assign(x);const b=ke(ne(We(i,r),We(p,ke(x,this.epsilon))),o);o.assign(b)}),this.iteration.assign(ke(this.iteration,1)),this.accBeta1.assign(ne(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&ft(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&ft(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d_ extends dl{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Array.isArray(e)?e[i].tensor:e[r];if(s==null)return;const a=re.registeredVariables[r];ce(()=>{const o=ke(ne(this.c,s),a);a.assign(o)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Xs(kt(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DX extends d_{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=kt(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=re.registeredVariables[r];this.accumulations[i]==null&&(this.accumulations[i]={originalName:`${r}/momentum`,variable:ce(()=>bt(s).variable(!1))});const a=this.accumulations[i].variable,o=Array.isArray(e)?e[i].tensor:e[r];o!=null&&ce(()=>{let l;const c=ke(ne(this.m,a),o);this.useNesterov?l=ke(ne(this.c,ke(o,ne(c,this.m))),s):l=ke(ne(this.c,c),s),a.assign(c),s.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&ft(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MX extends dl{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,i=null,s=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=s,i==null&&(this.epsilon=re.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=re.registeredVariables[r],a=!1;this.accumulatedMeanSquares[i]==null&&(this.accumulatedMeanSquares[i]={originalName:`${r}/rms`,variable:ce(()=>bt(s).variable(a))}),this.accumulatedMoments[i]==null&&(this.accumulatedMoments[i]={originalName:`${r}/momentum`,variable:ce(()=>bt(s).variable(a))}),this.accumulatedMeanGrads[i]==null&&this.centered&&(this.accumulatedMeanGrads[i]={originalName:`${r}/mg`,variable:ce(()=>bt(s).variable(a))});const o=Array.isArray(e)?e[i].tensor:e[r];if(o==null)return;const l=this.accumulatedMeanSquares[i].variable,c=this.accumulatedMoments[i].variable;ce(()=>{const f=ke(ne(l,this.decay),ne(Zt(o),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[i].variable,p=ke(ne(d,this.decay),ne(o,1-this.decay)),g=We(ne(o,this.learningRate),yr(Ke(f,ke(Zt(p),this.epsilon)))),y=ke(ne(c,this.momentum),g);l.assign(f),d.assign(p),c.assign(y);const x=Ke(s,y);s.assign(x)}else{const d=ke(ne(l,this.decay),ne(Zt(o),1-this.decay)),p=ke(ne(c,this.momentum),We(ne(o,this.learningRate),yr(ke(d,this.epsilon))));l.assign(d),c.assign(p);const g=Ke(s,p);s.assign(g)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&ft(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&ft(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&ft(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hEe=[NX,OX,_X,RX,DX,MX,d_];function dEe(){for(const t of hEe)Te(t)}function p_(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(ve(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const i=e.shape,s=i[i.length-1];let a=1;for(let d=0;d<i.length-1;++d)a*=i[d];const o=t.shape,l=i.slice();l.pop();let c=1;for(let d=s;d<n;++d)c*=o[d],l.push(o[d]);const f=[...je(t.shape).map(d=>d/c),1].slice(0,s);return[l,a,c,f]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ME=-2,pEe=-1;function m_(t,e,n){const r=t.shape.length;U(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),U(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let i=0;i<r;++i)U(e[i]+n[i]<=t.shape[i],()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${e[i]+n[i]}) would overflow input.shape[${i}] (${t.shape[i]})`)}function mEe(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function g_(t,e,n){const r=[];for(let i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function PX(t,e,n,r){const i=[...t];for(let s=i.length;s<r.length;s++)i.push(1);for(let s=0;s<n;s++)s===0?i[e]=1:(i.splice(e,0,1),i.pop());return i}function FX(t,e,n){return n<=t?n:n-(e-1)}function LX(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function gEe(t,e,n,r,i,s,a,o,l){const c=t.length;let f=new Array(c),d=new Array(c),p=new Array(c);if(e.length&&n>0){const g=e[0],y=n+1;f=BX(a,g,y,r,t),d=zX(o,g,y,i,t),p=PX(s,g,y,t)}else for(let g=0;g<c;g++)f[g]=VX(a,r,s,t,g,l),d[g]=UX(o,i,s,t,g,l),p[g]=jX(s,g,l);return{begin:f,end:d,strides:p}}function BX(t,e,n,r,i){const s=[...i],a=LX(n,e);for(let o=0;o<s.length;o++)if(a.indexOf(o)>-1)s[o]=0;else{const l=FX(e,n,o);let c=r[l];t&1<<l&&(c=0),s[o]=c}return s}function zX(t,e,n,r,i){const s=[...i],a=LX(n,e);for(let o=0;o<s.length;o++)if(a.indexOf(o)>-1)s[o]=Number.MAX_SAFE_INTEGER;else{const l=FX(e,n,o);let c=r[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),s[o]=c}for(let o=0;o<s.length;o++){const l=i[o];s[o]<0&&(s[o]+=l),s[o]=dc(0,s[o],i[o])}return s}function jX(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function VX(t,e,n,r,i,s){let a=e[i];const o=n[i]||1;(t&1<<i||s&1<<i||a==null)&&(o>0?a=Number.MIN_SAFE_INTEGER:a=Number.MAX_SAFE_INTEGER);const l=r[i];return a<0&&(a+=l),a=dc(0,a,l-1),a}function UX(t,e,n,r,i,s){let a=e[i];const o=n[i]||1;(t&1<<i||s&1<<i||a==null)&&(o>0?a=Number.MAX_SAFE_INTEGER:a=Number.MIN_SAFE_INTEGER);const l=r[i];return a<0&&(a+=l),o>0?a=dc(0,a,l):a=dc(-1,a,l-1),a}function y_(t,e,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function v_(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function u1(t,e,n){let r;const i=t.shape.length;typeof e=="number"?r=[e,...new Array(i-1).fill(0)]:e.length<i?r=e.concat(new Array(i-e.length).fill(0)):r=e.slice(),r.forEach(a=>{U(a!==-1,()=>"slice() does not support negative begin indexing.")});let s;return n==null?s=new Array(i).fill(-1):typeof n=="number"?s=[n,...new Array(i-1).fill(-1)]:n.length<i?s=n.concat(new Array(i-n.length).fill(-1)):s=n,s=s.map((a,o)=>a>=0?a:(U(a===-1,()=>`Negative size values should be exactly -1 but got ${a} for the slice() size at index ${o}.`),t.shape[o]-r[o])),[r,s]}function b_(t,e,n,r,i,s,a,o,l){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,a!=null&&(a&a-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let f=!1;const d={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:c.slice(),beginMask:i,endMask:s,ellipsisMask:a,newAxisMask:o,shrinkAxisMask:l};for(let T=0;T<d.dims;T++)f&&(1<<T&o)!==0&&d.numAddAxisAfterEllipsis++,1<<T&a&&(f=!0);f||(d.ellipsisMask|=1<<d.dims,d.dims++);const p={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};yEe(d,p);let g=!0,y=!0,x=!0;const b=[],w=[];for(let T=0;T<t.length;++T){if(p.strides[T]===0)throw Error(`strides[${T}] must be non-zero`);const k=!!(p.shrinkAxisMask&1<<T),A=t[T];if(A===-1){b.push(k?1:-1);continue}const E=[p.beginMask&1<<T,p.endMask&1<<T],I=[p.strides[T]>0?0:-1,p.strides[T]>0?A:A-1];if(k&&p.strides[T]<=0)throw Error("only stride 1 allowed on non-range indexing.");x=x&&p.strides[T]===1;const N=!!(p.beginMask&1<<T&&p.endMask&1<<T);if(p.beginValid&&p.endValid){if(k){const F=p.begin[T]<0?A+p.begin[T]:p.begin[T];if(p.begin[T]=F,p.end[T]=p.begin[T]+1,F<0||F>=A)throw Error(`slice index ${p.begin[T]} of dimension ${T} out of bounds.`)}else p.begin[T]=hW(p.begin[T],0,p.strides[T],A,E,I),p.end[T]=hW(p.end[T],1,p.strides[T],A,E,I);const O=p.strides[T]===1&&p.begin[T]===0&&p.end[T]===A;g=g&&O,y=y&&(T===0&&p.strides[T]===1||O)}else g=g&&p.strides[T]===1&&N,y=y&&(T===0&&p.strides[T]===1||N);let _,R=!1;if(p.beginValid&&p.endValid?(_=p.end[T]-p.begin[T],R=!0):k?(_=1,R=!0):N&&A>=0&&(p.strides[T]<0?_=-A:_=A,R=!0),R){let O;_===0||_<0!=p.strides[T]<0?O=0:O=Math.trunc(_/p.strides[T])+(_%p.strides[T]!==0?1:0),b.push(O)}else b.push(-1)}for(let T=0;T<p.finalShapeGatherIndices.length;++T){const k=p.finalShapeGatherIndices[T];k>=0?w.push(b[k]):k===ME&&w.push(1)}return{finalShapeSparse:w.filter((T,k)=>p.finalShapeGatherIndices[k]!==ME),finalShape:w,isIdentity:g,sliceDim0:y,isSimpleSlice:x,begin:p.begin,end:p.end,strides:p.strides}}function yEe(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const i=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<i;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(ME),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(pEe),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function hW(t,e,n,r,i,s){if(i[e])return n>0?s[e]:s[e+1&1];{const a=t<0?r+t:t;return a<s[0]?s[0]:a>s[1]?s[1]:a}}const vEe=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:m_,computeFlatOffset:v_,computeOutShape:g_,getNormalizedAxes:gEe,isSliceContinous:y_,maskToAxes:mEe,parseSliceParams:u1,sliceInfo:b_,startForAxis:VX,startIndicesWithElidedDims:BX,stopForAxis:UX,stopIndicesWithElidedDims:zX,stridesForAxis:jX,stridesWithElidedDims:PX},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bEe{static sgd(e){return new d_(e)}static momentum(e,n,r=!1){return new DX(e,n,r)}static rmsprop(e,n=.9,r=0,i=null,s=!1){return new MX(e,n,r,i,s)}static adam(e=.001,n=.9,r=.999,i=null){return new _X(e,n,r,i)}static adadelta(e=.001,n=.95,r=null){return new NX(e,n,r)}static adamax(e=.002,n=.9,r=.999,i=null,s=0){return new RX(e,n,r,i,s)}static adagrad(e,n=.1){return new OX(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ou=bEe;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xEe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function WX(){return new Promise(t=>xEe(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x_(t,e){const n=t[0].length;t.forEach((i,s)=>{U(i.length===n,()=>`Error in concat${n}D: rank of tensors[${s}] must be the same as the rank of the rest (${n})`)}),U(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((i,s)=>{for(let a=0;a<n;a++)U(a===e||i[a]===r[a],()=>`Error in concat${n}D: Shape of tensors[${s}] (${i}) does not match the shape of the rest (${r}) along the non-concatenated axis ${s}.`)})}function Ys(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ms;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(ms||(ms={}));function GX(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let i=1;i<n.length;++i){const s=n[i],a=r[r.length-n.length+i],o=r[a];if(s>=0)if(o>=0){if(o!==s)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${i+t}] = ${s} but shape[${i+t}] = ${o}`)}else r[a]=s}return r}function qX(t){const e={FIRST_DIM_SIZE:ms.FIRST_DIM_SIZE,VALUE_ROWIDS:ms.VALUE_ROWIDS,ROW_LENGTHS:ms.ROW_LENGTHS,ROW_SPLITS:ms.ROW_SPLITS,ROW_LIMITS:ms.ROW_LIMITS,ROW_STARTS:ms.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function HX(t){return t.length===0?0:t[0]===ms.FIRST_DIM_SIZE?t.length-1:t.length}function KX(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(n,r-1);++i){const s=t[i],a=e[i+1];if(s>=0&&a>=0&&s!==1&&s!==a)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${i-t.length}] = ${s} but ragged tensor input.flatValues.shape[${i-t.length}] = ${a}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w_=30;function f1(t){return t<=w_?t:bE(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S_(t,e,n){const r=n*(typeof t=="number"?t:t[0]),i=e*(typeof t=="number"?t:t[1]);return[r,i]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yg(t,e,n,r=!0){let i=[];if(r)i=i.concat(e.slice(0)),i.push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);const s=e.length;for(let a=0;a<s;++a)i=i.concat([t[a+1]/e[a],e[a]]);i=i.concat(t.slice(s+1))}return i}function vg(t,e,n=!0){const r=[];if(n){r.push(e);for(let i=e+1;i<t;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{const i=[],s=[];for(let a=1;a<t;++a)a>=e*2+1||a%2===1?s.push(a):i.push(a);r.push(...i),r.push(0),r.push(...s)}return r}function bg(t,e,n,r=!0){const i=[];r?i.push(t[0]/n):i.push(t[0]*n);for(let s=1;s<t.length;++s)s<=e.length?r?i.push(e[s-1]*t[s]):i.push(t[s]/e[s-1]):i.push(t[s]);return i}function C_(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function T_(t,e,n){const r=t.slice(0,1);for(let i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h1=1.7580993408473768,d1=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A_=.3275911,k_=.254829592,$_=-.284496736,E_=1.421413741,I_=-1.453152027,N_=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ya(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function XX(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function YX(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=0;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function ZX(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=2;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function O_(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function QX(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function JX(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let i=0;i<Math.ceil(t/2);i++){const s=(e?2:-2)*Math.PI*(i/t);n[i]=Math.cos(s),r[i]=Math.sin(s)}return{real:n,imag:r}}function e9(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),i=Math.cos(r),s=Math.sin(r);return{real:i,imag:s}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y2="->",wEe=/->/g,dW=",",pW="...";function __(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(wEe,"").length)/y2.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${y2}").`);const[r,i]=t.split(y2);U(r.indexOf(pW)===-1,()=>`The ellipsis notation ("${pW}") is not supported yet.`);const s=r.split(dW),a=s.length;if(e!==a)throw new Error(`Expected ${a} input tensors, received ${e}`);if(a>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const o=[];for(let p=0;p<i.length;++p){const g=i[p];if(!s.some(y=>y.indexOf(g)!==-1))throw new Error(`Output subscripts contain the label ${g} not present in the input subscripts.`);o.indexOf(g)===-1&&o.push(g)}for(let p=0;p<r.length;++p){const g=r[p];o.indexOf(g)===-1&&g!==dW&&o.push(g)}const l=new Array(s.length);for(let p=0;p<a;++p){if(new Set(s[p].split("")).size!==s[p].length)throw new Error(`Found duplicate axes in input component ${s[p]}. Support for duplicate axes in input is not implemented yet.`);l[p]=[];for(let g=0;g<s[p].length;++g)l[p].push(o.indexOf(s[p][g]))}const c=o.length,f=i.length,d=[];for(let p=f;p<c;++p)d.push(p);return{allDims:o,summedDims:d,idDims:l}}function R_(t,e){let n=new Array(t);n.fill(-1);for(let i=0;i<e.length;++i)n[e[i]]=i;const r=[];for(let i=0;i<t;++i)n[i]===-1&&r.push(i);return n=n.filter(i=>i!==-1),{permutationIndices:n,expandDims:r}}function D_(t,e,n){const r=new Array(t);for(let i=0;i<n.length;++i){const s=n[i].shape;for(let a=0;a<e[i].length;++a)r[e[i][a]]===void 0?r[e[i][a]]=s[a]:U(r[e[i][a]]===s[a],()=>`Expected dimension ${r[e[i][a]]} at axis ${a} of input shaped ${JSON.stringify(s)}, but got dimension ${s[a]}`)}}function M_(t,e){const n=t,r=[];let i=0;t.length===0&&n.push(-1),i=t.length+1;for(let a=0;a<i;++a)r.push([]);const s=[];for(let a=0;a<n.length;++a){const o=n[a],l=SEe(e,o);for(const c of l)s.indexOf(c)===-1&&(r[a].push(c),s.push(c))}return{path:n,steps:r}}function P_(t){return t.every((e,n)=>e===n)}function SEe(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function F_(t,e,n=0){let r=[];if(typeof e=="number")U(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const i=e.reduce((a,o)=>(o===-1&&(a+=1),a),0);U(i<=1,()=>"There should be only one negative value in split array.");const s=e.indexOf(-1);if(s!==-1){const a=e.reduce((o,l)=>l>0?o+l:o);e[s]=t.shape[n]-a}U(t.shape[n]===e.reduce((a,o)=>a+o),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t9(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function n9(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function r9(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i9(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function s9(t,e){return`size ${t} must be non-negative, not ${e}`}function a9(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function o9(t,e){const n=ve(t),r=ve(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function l9(t,e){const n=ve(t),r=ve(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PE(){return"segment ids must be >= 0"}function c9(){return"segment ids are not increasing"}function u9(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function f9(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h9(t,e){let n=!1,r;for(t<=w_?(r=t,n=!0):r=bE(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=bE(t,r+1);return r}function d9(t,e,n){const r=[],i=t.length;for(let s=0;s<i;s++)s!==e?r.push(t[s]):r.push(n);return r}function L_(t,e,n,r){const i=e.shape.length,s=t.shape.length;if(r!==0&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>s)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${s}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const a=t.shape[n],o=[];let l=1,c=1,f=1;for(let d=0;d<r;++d)o.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<n;d++)o.push(t.shape[d]),c*=t.shape[d];for(let d=r;d<i;d++)o.push(e.shape[d]);for(let d=n+1;d<s;d++)o.push(t.shape[d]),f*=t.shape[d];return{batchSize:l,sliceSize:f,outerSize:c,dimSize:a,outputShape:o}}const CEe=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:L_,computeOutShape:d9,segOpComputeOptimalWindowSize:h9},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Za(t){try{return t.map(e=>Ko(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function p9(t){return t.map(e=>Uo(e))}const TEe=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:k_,ERF_A2:$_,ERF_A3:E_,ERF_A4:I_,ERF_A5:N_,ERF_P:A_,PARALLELIZE_THRESHOLD:w_,get RowPartitionType(){return ms},SELU_SCALE:d1,SELU_SCALEALPHA:h1,applyActivation:o_,assertAndGetBroadcastShape:nt,assertAxesAreInnerMostDims:ar,assertParamsConsistent:x_,assignToTypedArray:QX,axesAreInnerMostDims:WO,calculateShapes:Dc,checkEinsumDimSizes:D_,checkPadOnDimRoundingMode:Hr,combineLocations:aX,combineRaggedTensorToTensorShapes:GX,complexWithEvenIndex:YX,complexWithOddIndex:ZX,computeConv2DInfo:sr,computeConv3DInfo:cl,computeDefaultPad:LO,computeDilation2DInfo:hg,computeOptimalWindowSize:f1,computeOutAndReduceShapes:Yn,computeOutShape:Ys,computePool2DInfo:ns,computePool3DInfo:no,convertConv2DDataFormat:ro,decodeEinsumEquation:__,eitherStridesOrDilationsAreOne:vr,expandShapeToKeepDim:$n,exponent:e9,exponents:JX,fromStringArrayToUint8:p9,fromUint8ToStringArray:Za,getAxesPermutation:sn,getBroadcastDims:Ef,getComplexWithIndex:O_,getEinsumComputePath:M_,getEinsumPermutation:R_,getFusedBiasGradient:a_,getFusedDyActivation:s_,getImageCenter:S_,getInnerMostAxes:bn,getPermuted:vg,getRaggedRank:HX,getReductionAxes:Fn,getReshaped:yg,getReshapedPermuted:bg,getRowPartitionTypesHelper:qX,getSliceBeginCoords:C_,getSliceSize:T_,getSparseFillEmptyRowsIndicesDenseShapeMismatch:t9,getSparseFillEmptyRowsNegativeIndexErrorMessage:n9,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:r9,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:a9,getSparseReshapeInputOutputMismatchErrorMessage:l9,getSparseReshapeInputOutputMultipleErrorMessage:o9,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:i9,getSparseReshapeNegativeOutputDimErrorMessage:s9,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:f9,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:PE,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:c9,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:u9,getUndoAxesPermutation:ul,isIdentityPermutation:P_,log:sCe,mergeRealAndImagArrays:Ya,prepareAndValidate:p_,prepareSplitSize:F_,segment_util:CEe,shouldFuse:l_,slice_util:vEe,splitRealAndImagArrays:XX,stridesOrDilationsArePositive:vc,tupleValuesAreOne:yc,upcastType:oi,validateDefaultValueShape:KX,validateInput:t$e,validateUpdateShape:TX,warn:Si},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dEe();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m9={kernelName:tx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,gg(Re(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AEe={kernelName:ym,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Zt(Re(n,"float32")),i=yr(Ke(kt(1),r));return yn(We(t,i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kEe={kernelName:vm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=yr(Ke(Zt(Re(n,"float32")),1));return We(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ee={kernelName:Qf,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=nt(n.shape,r.shape);return{a:()=>{let o=t;const l=Fn(n.shape,i);return l.length>0&&(o=Ue(o,l)),ie(o,n.shape)},b:()=>{let o=t;const l=Fn(r.shape,i);return l.length>0&&(o=Ue(o,l)),ie(o,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EEe={kernelName:XN,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,i)=>{n[i]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IEe={kernelName:nx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>bt(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NEe={kernelName:rx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>bt(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OEe={kernelName:bm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>We(t,yr(Ke(kt(1),Zt(Re(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ee={kernelName:xm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=yr(ke(kt(1),Zt(Re(n,"float32"))));return We(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const REe={kernelName:Cm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=nt(n.shape,r.shape);return{a:()=>{const o=ke(Zt(n),Zt(r));let l=ne(t,We(r,o));const c=Fn(n.shape,i);return c.length>0&&(l=Ue(l,c)),ie(l,n.shape)},b:()=>{const o=ke(Zt(n),Zt(r));let l=yn(ne(t,We(n,o)));const c=Fn(r.shape,i);return c.length>0&&(l=Ue(l,c)),ie(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DEe={kernelName:wm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>We(t,ke(Zt(Re(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MEe={kernelName:Sm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>We(t,Ke(kt(1),Zt(Re(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PEe(t,e,n,r,i,s){const a=X(t,"dy","avgPool3dGrad"),o=X(e,"input","avgPool3dGrad");let l=a,c=o,f=!1;o.rank===4&&(f=!0,l=ie(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),c=ie(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),U(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),U(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),Hr("avgPool3dGrad",i,s);const d={dy:l,input:c},p={filterSize:n,strides:r,pad:i,dimRoundingMode:s},g=re.runKernel(JN,d,p);return f?ie(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const FEe=se({avgPool3dGrad_:PEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LEe={kernelName:sx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:s,pad:a,dimRoundingMode:o}=n;return{x:()=>FEe(t,r,i,s,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BEe(t,e,n,r,i){const s=X(t,"dy","avgPoolGrad"),a=X(e,"input","avgPoolGrad");U(a.rank===s.rank,()=>`Rank of input (${a.rank}) does not match rank of dy (${s.rank})`);let o=a,l=s,c=!1;a.rank===3&&(c=!0,o=ie(a,[1,a.shape[0],a.shape[1],a.shape[2]]),l=ie(s,[1,s.shape[0],s.shape[1],s.shape[2]])),U(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),U(o.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${o.rank}.`);const f={dy:l,input:o},d={filterSize:n,strides:r,pad:i},p=re.runKernel(QN,f,d);return c?ie(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const zEe=se({avgPoolGrad_:BEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jEe={kernelName:ix,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:s,pad:a}=n;return{x:()=>zEe(t,r,i,s,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VEe={kernelName:ax,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,i]=e,{transposeA:s,transposeB:a}=n;return!s&&!a?{a:()=>At(t,i,!1,!0),b:()=>At(r,t,!0,!1)}:!s&&a?{a:()=>At(t,i,!1,!1),b:()=>At(t,r,!0,!1)}:s&&!a?{a:()=>At(i,t,!1,!0),b:()=>At(r,t,!1,!1)}:{a:()=>At(i,t,!0,!0),b:()=>At(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UEe={kernelName:ox,gradFunc:(t,e,n)=>{const{blockShape:r,crops:i}=n;return{x:()=>QO(t,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WEe={kernelName:tCe,gradFunc:(t,e,n)=>{const r=n,i=r.inputShape,s=r.shape,a=Array.from(s);for(let l=i.length-1;l>=0;l--)if(i[l]===s[l])a[l]=1;else if(i[l]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${s}].`);const o=[];for(let l=0;l<a.length;l++)a[l]>1&&o.push(l);return{x:()=>Ue(t,o,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GEe={kernelName:Tm,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qEe={kernelName:Am,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HEe={kernelName:km,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:i,clipValueMax:s}=n;return{x:()=>Dr(Ka(_c(r,i),th(r,s)),t,bt(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KEe={kernelName:lx,inputsToSave:["x"],gradFunc:m9.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XEe={kernelName:cx,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:i}=n,s=ot(i,e[0].shape)[0],a=r.map(l=>l[s]);return Ti(t,a,s).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YEe={kernelName:ux,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{dilations:s,strides:a,pad:o,dataFormat:l}=n;return U(yc(s),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`),{x:()=>jO(r.shape,t,i,a,o,l),filter:()=>i_(r,t,i.shape,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZEe={kernelName:fx,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{strides:s,pad:a,dataFormat:o,dimRoundingMode:l}=n;return{dy:()=>bc(t,i,s,a,o,1,l),filter:()=>i_(t,r,i.shape,s,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QEe(t,e,n,r,i){let s=t;t.rank===4&&(s=ie(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let a=e;a.rank===4&&(a=ie(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),U(s.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${s.shape}.`),U(a.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${a.shape}.`),U(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),U(s.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${n[3]}.`),U(a.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${a.shape[4]}) must match output depth for filter (${n[4]}).`);const o={x:s,dy:a},l={strides:r,pad:i,filterShape:n};return re.runKernel(iO,o,l)}const JEe=se({conv3DBackpropFilter_:QEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eIe={kernelName:hx,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:s}=n;U(yc(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[a,o]=e;return{x:()=>nX(a.shape,t,o,i,s),filter:()=>JEe(a,t,o.shape,i,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tIe={kernelName:$m,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(yn(xX(Re(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nIe={kernelName:Em,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(wX(Re(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rIe={kernelName:dx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i,exclusive:s,reverse:a}=n;return{x:()=>{const o=sn([i],r.rank);let l=iX(t,i,s,!a);return o!=null&&(l=vt(l,o)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iIe={kernelName:px,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:s,dimRoundingMode:a}=n,o=r??[1,1];U(yc(o),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);const[l,c]=e;return U(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),U(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),U(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),U(vr(i,o),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${o}'.`),Hr("depthwiseConv2d",s,a),{x:()=>x$e(l.shape,t,c,i,s,o,a),filter:()=>v$e(l,t,c.shape,i,s,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sIe={kernelName:mx,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,s={x:r,filter:i,dy:t},a={x:r,filter:i,dy:t};return{x:()=>re.runKernel(xE,s,n),filter:()=>re.runKernel(wE,a,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aIe={kernelName:Nm,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>re.runKernel(dO,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oIe={kernelName:Om,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=ne(ta(yn(Zt(n))),2/Math.sqrt(Math.PI));return{x:()=>ne(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lIe={kernelName:_m,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cIe={kernelName:yx,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>ie(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uIe={kernelName:Rm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,ta(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fIe={kernelName:Dm,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hIe={kernelName:Mm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=nt(n.shape,r.shape);return{a:()=>{const o=We(t,Re(r,"float32")),l=Fn(n.shape,i);return l.length>0?ie(Ue(o,l),n.shape):o},b:()=>{let o=ne(t,Re(n,"float32"));const l=Fn(r.shape,i);l.length>0&&(o=ie(Ue(o,l),r.shape));const c=Zt(r);return yn(We(o,Re(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dIe={kernelName:vx,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[i,s,a,o]=e,l=o??kt(1),c=Fn(s.shape,i.shape),f=[];if(s.rank===1){for(let k=0;k<i.shape.length-1;++k)f.push(i.shape[k]);f.push(1)}const d=Ke(i,s),p=ne(t,l),g=yX(ke(a,kt(r))),y=ne(ne(ne(g,g),g),kt(-.5));return{x:()=>s.rank===1?ie(ne(ne(t,vs(ie(g,[1,1,1,s.shape[0]]),f)),l),i.shape):ie(ne(ne(t,g),l),i.shape),mean:()=>{let k=ne(ne(g,kt(-1)),p);return s.rank===1&&(k=Ue(k,c)),ie(k,s.shape)},variance:()=>{let k=ne(ne(y,d),p);return s.rank===1&&(k=Ue(k,c)),ie(k,s.shape)},scale:()=>{const k=ne(d,g);let A=ne(t,k);return s.rank===1&&(A=Ue(A,c)),ie(A,s.shape)},offset:()=>{let k=t;return s.rank===1&&(k=Ue(k,c)),ie(k,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pIe={kernelName:bx,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,i]=e,{axis:s,batchDims:a}=n,o=ot(s,r.shape)[0],l=(c,f,d)=>()=>{const p=c.shape,g=f.size,y=p.slice(0,o),x=y.length,b=p.slice(s,p.length).slice(1),w=b.length,S=mW(0,x),T=mW(x+1,x+1+w),k=gW([y,[g],b]),A=ie(d,k),E=ie(f,[g]),I=gW([[x],S,T]),N=vt(A,I);let _=kX(N,E,c.shape[o]);const R=ul(I);return _=vt(_,R),_};if(a===1){const c=r.shape[0],f=r.split(c,0);return{x:()=>Xa(f.map((g,y)=>l(g,i.slice(y,1),t.slice(y,1))())).reshape(r.shape),indices:()=>i}}else return{x:l(r,i,t),indices:()=>i}}};function mW(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function gW(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mIe={kernelName:Pm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>bt(n),b:()=>bt(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gIe={kernelName:Fm,gradFunc:t=>({x:()=>Re(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yIe={kernelName:Lm,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vIe={kernelName:Bm,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bIe={kernelName:zm,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xIe={kernelName:wx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:i}=n,s=$i(r,0);return{x:()=>Dr(s,t,ne(t,i))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wIe={kernelName:Vm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>We(t,ke(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SIe={kernelName:jm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>We(t,Re(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CIe={kernelName:rCe,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;return{logits:()=>{const a=ta(r);return Ke(t,ne(Ue(t,i,!0),a))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TIe(t,e,n,r=5,i=1,s=1,a=.5){const o={x:t,y:e,dy:n},l={depthRadius:r,bias:i,alpha:s,beta:a};return re.runKernel(bO,o,l)}const AIe=se({localResponseNormalizationBackprop_:TIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kIe={kernelName:$x,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{depthRadius:s,bias:a,alpha:o,beta:l}=n;return{x:()=>AIe(r,i,t,s,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g9(t,e,n,r){return e.rank<n.rank&&(e=ie(e,$n(e.shape,r))),t.rank<n.rank&&(t=ie(t,$n(t.shape,r))),{x:()=>ne(t,Re(ea(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yW={kernelName:Ex,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:i}=r,s=e[0],a=e[1],o=ot(i,s.shape),l=g9(t,a,s,o);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ie={kernelName:Um,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>ne(t,Re(_c(n,r),"float32")),b:()=>ne(t,Re(Xb(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EIe(t,e,n,r,i,s,a){const o=X(t,"dy","maxPool3dGrad"),l=X(e,"input","maxPool3dGrad"),c=X(n,"output","maxPool3dGrad");let f=o,d=l,p=c,g=!1;l.rank===4&&(g=!0,f=ie(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),d=ie(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),p=ie(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),U(f.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${f.rank}.`),U(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),U(p.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${p.rank}.`),Hr("maxPool3dGrad",s,a);const y={dy:f,input:d,output:p},x={filterSize:r,strides:i,pad:s,dimRoundingMode:a},b=re.runKernel(wO,y,x);return g?ie(b,[b.shape[1],b.shape[2],b.shape[3],b.shape[4]]):b}const IIe=se({maxPool3dGrad_:EIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NIe={kernelName:Nx,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:s,strides:a,pad:o,dimRoundingMode:l}=n;return{x:()=>IIe(t,r,i,s,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OIe(t,e,n,r,i,s,a){const o=X(t,"dy","maxPoolGrad"),l=X(e,"input","maxPoolGrad"),c=X(n,"output","maxPoolGrad");U(l.rank===o.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${o.rank})`),U(o.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${o.rank}.`),U(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Hr("maxPoolGrad",s,a);const f={dy:o,input:l,output:c},d={filterSize:r,strides:i,pad:s,dimRoundingMode:a};return re.runKernel(xO,f,d)}const _Ie=se({maxPoolGrad_:OIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RIe={kernelName:Ix,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:s,strides:a,pad:o}=n;return{x:()=>_Ie(t,r,i,s,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DIe={kernelName:Ox,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n,s=ot(i,r.shape),o=Yn(r.shape,s)[1],l=ve(o);return{x:()=>{const f=r.shape.slice();s.forEach(g=>{f[g]=1});const d=ie(t,f);return We(ne(d,hl(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MIe={kernelName:_x,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:i}=r,[s,a]=e,o=ot(i,s.shape),l=g9(t,a,s,o);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PIe={kernelName:Wm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>ne(t,Re(th(n,r),"float32")),b:()=>ne(t,Re($i(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FIe={kernelName:Rx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,s=i.map(a=>a[0]);return{x:()=>Gt(t,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LIe={kernelName:Gm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=nt(n.shape,r.shape);return{a:()=>{const o=Fn(n.shape,i);return o.length>0?ie(Ue(t,o),n.shape):t},b:()=>{const o=ne(t,yn(c1(We(n,r)))),l=Fn(r.shape,i);return l.length>0?ie(Ue(o,l),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BIe={kernelName:qm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=nt(n.shape,r.shape);return{a:()=>{const o=ne(t,Re(r,"float32")),l=Fn(n.shape,i);return l.length>0?ie(Ue(o,l),n.shape):o},b:()=>{const o=ne(t,Re(n,"float32")),l=Fn(r.shape,i);return l.length>0?ie(Ue(o,l),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zIe={kernelName:Dx,gradFunc:t=>({x:()=>yn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jIe={kernelName:Fx,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>qn(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VIe={kernelName:Px,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UIe={kernelName:Lx,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return Sc(t,r).map(s=>()=>s)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vW={kernelName:Bx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,s=i.map(a=>a[0]);return{x:()=>Gt(t,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WIe={kernelName:Hm,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,i]=e,s=n,a=r,o=nt(s.shape,a.shape);return{a:()=>{const f=Re(a,"float32");let d=ne(t,ne(f,xc(s,Ke(f,kt(1)))));const p=Fn(s.shape,o);return p.length>0&&(d=Ue(d,p)),ie(d,s.shape)},b:()=>{const f=$i(s,0),d=Dr(f,na(s),bt(s));let p=ne(t,ne(i,d));const g=Fn(a.shape,o);return g.length>0&&(p=Ue(p,g)),ie(p,a.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GIe={kernelName:zx,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,i=$i(n,0);return{x:()=>Dr(i,t,ne(t,r)),alpha:()=>{let s=Dr(i,bt(t),ne(t,n));const a=Fn(r.shape,t.shape);return a.length>0&&(s=Ue(s,a)),ie(s,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qIe(t,e,n){const r=t.shape.slice();r[n]=1;const i=ie(e,r),s=RE(t,n,!0,!1),a=RE(t,n,!0,!0),o=ne(s,a);return ne(i,o)}function HIe(t,e,n){const r=t.shape.length,i=r-n.length,s=sn(n,r);let a=t;s!=null&&(a=vt(t,s));const o=a.shape.slice(),c=o.splice(r-n.length,n.length).reduce((p,g)=>p*g,1);o.push(c);const f=a.reshape(o);let d=qIe(f,e,i);if(d=d.reshape(a.shape),s!=null){const p=ul(s);d=vt(d,p)}return d}const KIe={kernelName:jx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;let s=[];return i==null?s=r.shape.map((a,o)=>o):typeof i=="number"?s=[i]:s=i,{x:()=>HIe(r,t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XIe={kernelName:Im,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=nt(n.shape,r.shape);return{a:()=>{const o=We(t,Re(r,"float32")),l=Fn(n.shape,i);return l.length>0?ie(Ue(o,l),n.shape):o},b:()=>{let o=ne(t,Re(n,"float32"));const l=Fn(r.shape,i);l.length>0&&(o=ie(Ue(o,l),r.shape));const c=Zt(r);return yn(We(o,Re(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YIe={kernelName:Km,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>We(t,yn(Zt(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZIe={kernelName:Ym,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=ne(th(n,6),gg(n));return{x:()=>ne(t,Re(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QIe={kernelName:Xm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,Re(gg(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JIe={kernelName:Vx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ie(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eNe={kernelName:Wx,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r};return{images:()=>re.runKernel(EO,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tNe={kernelName:Ux,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r};return{images:()=>re.runKernel($O,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nNe={kernelName:Gx,gradFunc:(t,e,n)=>{const{dims:r}=n,i=ot(r,t.shape);return{x:()=>wc(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rNe={kernelName:Zm,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iNe={kernelName:Qm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>yn(We(t,ne(xc(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sNe={kernelName:qx,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>Re(bt(n),"float32"),t:()=>ne(t,Re(n,t.dtype)),e:()=>ne(t,Re(KO(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aNe={kernelName:Jm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=$i(n,kt(0)),i=kt(h1),s=kt(d1),a=ne(t,s),o=ne(ne(t,i),ta(Re(n,"float32")));return Dr(r,a,o)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oNe={kernelName:rg,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,ne(n,Ke(kt(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lNe={kernelName:ng,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cNe={kernelName:eg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(VO(Re(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uNe={kernelName:tg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(rX(Re(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fNe={kernelName:Hx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:i,size:s}=n,a=r.shape,[o,l]=u1(r,i,s),c=[];for(let f=0;f<t.rank;f++)c.push([o[f],a[f]-o[f]-l[f]]);return{x:()=>ZO(t,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hNe={kernelName:Zx,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:i}=n,s=!0,a=ne(t,r);return{logits:()=>Ke(a,ne(Ue(a,[i],s),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dNe={kernelName:ig,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,eh(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bW={kernelName:Xx,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:i}=n;return{x:()=>zO(t,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xW={kernelName:Yx,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>Wr(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pNe={kernelName:sg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>We(t,ne(yr(Re(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mNe={kernelName:IO,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,ne(Re(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gNe={kernelName:ag,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=kt(2);return{a:()=>ne(t,ne(i,Ke(n,r))),b:()=>ne(t,ne(i,Ke(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yNe={kernelName:fg,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vNe={kernelName:og,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=nt(n.shape,r.shape);return{a:()=>{let o=t;const l=Fn(n.shape,i);return l.length>0&&(o=Ue(o,l)),ie(o,n.shape)},b:()=>{let o=t;const l=Fn(r.shape,i);return l.length>0&&(o=Ue(o,l)),ie(yn(o),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bNe={kernelName:Kx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,i=r.shape.slice(),{axis:s}=n;ot(s,r.shape).forEach(c=>{i[c]=1});const o=ie(t,i),l=ne(o,hl(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xNe={kernelName:lg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>We(t,Zt(VO(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wNe={kernelName:cg,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(Ke(kt(1),Zt(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SNe={kernelName:ug,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:i}=n;return{x:()=>{let a=bt(r);if(r.rank===1)for(let o=0;o<i[0];++o)a=ke(a,Gt(t,[o*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let o=0;o<i[0];++o)for(let l=0;l<i[1];++l)a=ke(a,Gt(t,[o*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let o=0;o<i[0];++o)for(let l=0;l<i[1];++l)for(let c=0;c<i[2];++c)a=ke(a,Gt(t,[o*r.shape[0],l*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let o=0;o<i[0];++o)for(let l=0;l<i[1];++l)for(let c=0;c<i[2];++c)for(let f=0;f<i[3];++f)a=ke(a,Gt(t,[o*r.shape[0],l*r.shape[1],c*r.shape[2],f*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CNe={kernelName:Yu,gradFunc:(t,e,n)=>{const r=n,{perm:i}=r,s=ul(i);return{x:()=>vt(t,s)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TNe={kernelName:Qx,gradFunc:(t,e,n)=>{const r=n,{axis:i}=r;return{value:()=>Xa(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ANe={kernelName:Jx,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>kNe(t,n)}}};function kNe(t,e){const n=fl(e,bt(e)),r=GO(t,n);let i=_c(e,kt(0,"int32"));const s=r.rank-i.rank;for(let o=0;o<s;++o)i=zr(i,o+1);i=Ka(i,hl(r.shape,"bool"));const a=bt(r);return Dr(i,r,a)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ne={kernelName:e1,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ENe=[m9,AEe,kEe,$Ee,EEe,IEe,NEe,OEe,_Ee,REe,DEe,MEe,LEe,jEe,VEe,UEe,WEe,GEe,qEe,HEe,KEe,XEe,ZEe,YEe,eIe,tIe,nIe,rIe,iIe,sIe,XIe,aIe,oIe,lIe,cIe,uIe,hIe,fIe,dIe,pIe,mIe,gIe,yIe,vIe,bIe,xIe,wIe,SIe,CIe,kIe,yW,yW,$Ie,NIe,RIe,DIe,MIe,PIe,FIe,LIe,BIe,zIe,jIe,VIe,UIe,vW,vW,WIe,GIe,KIe,YIe,ZIe,QIe,JIe,eNe,tNe,nNe,rNe,iNe,sNe,aNe,oNe,lNe,cNe,uNe,fNe,hNe,dNe,bW,bW,xW,xW,pNe,gNe,mNe,yNe,vNe,bNe,xNe,wNe,SNe,CNe,TNe,ANe,$Ne];for(const t of ENe)aCe(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.abs=function(){return this.throwIfDisposed(),Er(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.acos=function(){return this.throwIfDisposed(),lTe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.acosh=function(){return this.throwIfDisposed(),uTe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.add=function(t){return this.throwIfDisposed(),ke(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.all=function(t,e){return this.throwIfDisposed(),JK(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.any=function(t,e){return this.throwIfDisposed(),OE(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.argMax=function(t){return this.throwIfDisposed(),Wp(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.argMin=function(t){return this.throwIfDisposed(),mTe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.asScalar=function(){return this.throwIfDisposed(),U(this.size===1,()=>"The array must have only 1 element."),ie(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.asType=function(t){return this.throwIfDisposed(),Re(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.as1D=function(){return this.throwIfDisposed(),ie(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.as2D=function(t,e){return this.throwIfDisposed(),ie(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),ie(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),ie(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.as5D=function(t,e,n,r,i){return this.throwIfDisposed(),ie(this,[t,e,n,r,i])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.asin=function(){return this.throwIfDisposed(),yTe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.asinh=function(){return this.throwIfDisposed(),bTe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.atan=function(){return this.throwIfDisposed(),wTe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.atan2=function(t){return this.throwIfDisposed(),CTe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.atanh=function(){return this.throwIfDisposed(),ATe(this)};me().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),BO(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),zO(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.batchNorm=function(t,e,n,r,i){return this.throwIfDisposed(),s1(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.broadcastTo=function(t){return this.throwIfDisposed(),Qd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.cast=function(t){return this.throwIfDisposed(),Re(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.ceil=function(){return this.throwIfDisposed(),QTe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),ki(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof On&&(t=[t]),Wr([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.conv1d=function(t,e,n,r,i,s){return this.throwIfDisposed(),eX(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.conv2dTranspose=function(t,e,n,r,i){return this.throwIfDisposed(),tX(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.conv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),bc(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.cos=function(){return this.throwIfDisposed(),VO(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.cosh=function(){return this.throwIfDisposed(),rX(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),RE(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),iX(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),CAe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.depthwiseConv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),UO(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.dilation2d=function(t,e,n,r,i){return this.throwIfDisposed(),kAe(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.divNoNan=function(t){return this.throwIfDisposed(),OAe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.div=function(t){return this.throwIfDisposed(),We(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.dot=function(t){return this.throwIfDisposed(),RAe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.elu=function(){return this.throwIfDisposed(),o1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.equal=function(t){return this.throwIfDisposed(),ea(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.erf=function(){return this.throwIfDisposed(),sX(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),GAe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.exp=function(){return this.throwIfDisposed(),ta(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.expandDims=function(t){return this.throwIfDisposed(),zr(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.expm1=function(){return this.throwIfDisposed(),XAe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.fft=function(){return this.throwIfDisposed(),CX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.flatten=function(){return this.throwIfDisposed(),ie(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.floor=function(){return this.throwIfDisposed(),c1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.floorDiv=function(t){return this.throwIfDisposed(),QK(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.gather=function(t,e,n){return this.throwIfDisposed(),GO(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.greaterEqual=function(t){return this.throwIfDisposed(),_c(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.greater=function(t){return this.throwIfDisposed(),$i(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.ifft=function(){return this.throwIfDisposed(),DE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.irfft=function(){return this.throwIfDisposed(),V2e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.isFinite=function(){return this.throwIfDisposed(),ike(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.isInf=function(){return this.throwIfDisposed(),ake(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.isNaN=function(){return this.throwIfDisposed(),lke(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.leakyRelu=function(t){return this.throwIfDisposed(),HO(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.lessEqual=function(t){return this.throwIfDisposed(),th(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.less=function(t){return this.throwIfDisposed(),Xb(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),dke(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.logSigmoid=function(){return this.throwIfDisposed(),xke(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.logSoftmax=function(t){return this.throwIfDisposed(),uX(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),fX(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.log=function(){return this.throwIfDisposed(),na(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.log1p=function(){return this.throwIfDisposed(),cX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.logicalAnd=function(t){return this.throwIfDisposed(),Ka(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.logicalNot=function(){return this.throwIfDisposed(),KO(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.logicalOr=function(t){return this.throwIfDisposed(),hX(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.logicalXor=function(t){return this.throwIfDisposed(),Eke(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),At(this,t,e,n)};me().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),XO(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.max=function(t,e){return this.throwIfDisposed(),ws(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.maximum=function(t){return this.throwIfDisposed(),fl(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.mean=function(t,e){return this.throwIfDisposed(),kn(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.min=function(t,e){return this.throwIfDisposed(),Kb(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.minimum=function(t){return this.throwIfDisposed(),Hp(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),Pke(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.mod=function(t){return this.throwIfDisposed(),Lke(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.mul=function(t){return this.throwIfDisposed(),ne(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.neg=function(){return this.throwIfDisposed(),yn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.norm=function(t,e,n){return this.throwIfDisposed(),l1(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.notEqual=function(t){return this.throwIfDisposed(),Yb(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),dX(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.onesLike=function(){return this.throwIfDisposed(),es(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.pad=function(t,e){return this.throwIfDisposed(),ZO(this,t,e)};me().prototype.pool=function(t,e,n,r,i,s){return this.throwIfDisposed(),Kke(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.pow=function(t){return this.throwIfDisposed(),xc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.prelu=function(t){return this.throwIfDisposed(),JO(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.prod=function(t,e){return this.throwIfDisposed(),Zke(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.reciprocal=function(){return this.throwIfDisposed(),S2e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.relu=function(){return this.throwIfDisposed(),Rc(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.relu6=function(){return this.throwIfDisposed(),mX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.reshapeAs=function(t){return this.throwIfDisposed(),ie(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.reshape=function(t){return this.throwIfDisposed(),ie(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),EX(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),IX(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.reverse=function(t){return this.throwIfDisposed(),wc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.rfft=function(){return this.throwIfDisposed(),G2e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.round=function(){return this.throwIfDisposed(),gX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.rsqrt=function(){return this.throwIfDisposed(),yX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.selu=function(){return this.throwIfDisposed(),vX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.separableConv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),bX(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.sigmoid=function(){return this.throwIfDisposed(),eh(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.sign=function(){return this.throwIfDisposed(),O2e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.sin=function(){return this.throwIfDisposed(),xX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.sinh=function(){return this.throwIfDisposed(),wX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.slice=function(t,e){return this.throwIfDisposed(),Gt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.softmax=function(t){return this.throwIfDisposed(),r_(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.softplus=function(){return this.throwIfDisposed(),dg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),QO(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.split=function(t,e){return this.throwIfDisposed(),Ti(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.sqrt=function(){return this.throwIfDisposed(),yr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.square=function(){return this.throwIfDisposed(),Zt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.squaredDifference=function(t){return this.throwIfDisposed(),H2e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.squeeze=function(t){return this.throwIfDisposed(),mg(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof On?[this,t]:[this,...t];return Xa(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.step=function(t){return this.throwIfDisposed(),gg(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.stridedSlice=function(t,e,n,r,i,s,a,o){return this.throwIfDisposed(),Q2e(this,t,e,n,r,i,s,a,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.sub=function(t){return this.throwIfDisposed(),Ke(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.sum=function(t,e){return this.throwIfDisposed(),Ue(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.tan=function(){return this.throwIfDisposed(),e$e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.tanh=function(){return this.throwIfDisposed(),i1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.tile=function(t){return this.throwIfDisposed(),vs(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.toBool=function(){return this.throwIfDisposed(),Re(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.toFloat=function(){return this.throwIfDisposed(),Re(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.toInt=function(){return this.throwIfDisposed(),Re(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.topk=function(t,e){return this.throwIfDisposed(),r$e(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.transpose=function(t){return this.throwIfDisposed(),vt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.unique=function(t){return this.throwIfDisposed(),a$e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),kX(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.unstack=function(t){return this.throwIfDisposed(),Sc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.where=function(t,e){return this.throwIfDisposed(),Dr(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.zerosLike=function(){return this.throwIfDisposed(),bt(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Fs extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Fs.prototype)}}class Ki extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ki.prototype)}}class ee extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ee.prototype)}}class rt extends Error{constructor(e){super(e),Object.setPrototypeOf(this,rt.prototype)}}class B_ extends Error{constructor(e){super(e),Object.setPrototypeOf(this,B_.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class y9{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Cc(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function Ls(t,e){if(!t)throw new B_(e)}function wW(t,e){let n=0;for(const r of t)r===e&&n++;return n}function jr(t){return t.length===1?t[0]:t}function _t(t){return Array.isArray(t)?t:[t]}function Na(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Wl(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let ji={};function z_(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function FE(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>FE(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:FE(r))}}}function xg(t,e={},n={},r="object",i=!1){if(typeof t=="string"){const s=t;let a;if(s in n)a=n[s];else if(s in ji)a=ji[s];else if(a=e[s],a==null)throw new ee(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return a}else{const s=t;if(s.className==null||s.config==null)throw new ee(`${r}: Improper config format: ${JSON.stringify(s)}.
'className' and 'config' must set.`);const a=s.className;let o,l;if(a in n?[o,l]=n[a]:a in ji?[o,l]=ji.className:a in e&&([o,l]=e[a]),o==null)throw new ee(`Unknown ${r}: ${a}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const c={};for(const g of Object.keys(ji))c[g]=ji[g];for(const g of Object.keys(n))c[g]=n[g];const f=s.config;f.customObjects=c;const d=Object.assign({},ji);for(const g of Object.keys(n))ji[g]=n[g];FE(s.config);const p=l(o,s.config,n,i);return ji=Object.assign({},d),p}else{const c=Object.assign({},ji);for(const d of Object.keys(n))ji[d]=n[d];const f=new o(s.config);return ji=Object.assign({},c),f}}}function INe(t,e){return t<e?-1:t>e?1:0}function pv(t,e){return-1*INe(t,e)}function Wo(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function NNe(t){if(t==null)throw new ee(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function Mc(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new ee(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function j_(t,e,n=0,r=1/0){return Ls(n>=0),Ls(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(i=>typeof i===e)}function Kn(t,e){Array.isArray(t)?(U(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>Kn(n,`element ${r+1} of ${e}`))):U(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${v9(t)}.`)}function v9(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>v9(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function ONe(t,e,n){let r=n!=null?n():Br(),i;return(...a)=>{const o=n!=null?n():Br();return o-r<e||(r=o,i=t(...a)),i}}function b9(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let _Ne=0;function x9(){return _Ne++}const mv={};function p1(t=""){return t in mv||(mv[t]=0),mv[t]+=1,t+mv[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const RNe=["channelsFirst","channelsLast"],DNe=["nearest","bilinear"],MNe=["valid","same","causal"],PNe=["max","avg"],FNe=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const _u=new Map;function xn(t){Mc(RNe,"DataFormat",t)}function LNe(t){Mc(DNe,"InterpolationFormat",t)}function Ei(t){Mc(MNe,"PaddingMode",t)}function w9(t){Mc(PNe,"PoolMode",t)}const Jd=[],SW="/";function ac(t,e){Jd.push(t);try{const n=e();return Jd.pop(),n}catch(n){throw Jd.pop(),n}}function BNe(){return Jd.length===0?"":Jd.join(SW)+SW}function S9(t){if(!T9(t))throw new Error("Not a valid tensor name: '"+t+"'");return BNe()+t}function C9(t){if(!T9(t))throw new Error("Not a valid tensor name: '"+t+"'");_u.has(t)||_u.set(t,0);const e=_u.get(t);if(_u.set(t,_u.get(t)+1),e>0){const n=`${t}_${e}`;return _u.set(n,1),n}else return t}const zNe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function T9(t){return!!t.match(zNe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function jNe(t){return t===parseInt(t.toString(),10)}function Go(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let i=e;i<n;++i)r*=t[i];return r}function Nf(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function Xo(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function Cs(t,e){if(e<t)throw new ee(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let v2;function _n(){return v2==null&&(v2=_Ce().epsilon()),v2}function Ts(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Zs(t,e){return Re(t,e)}function wg(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),ie(t,n)}function VNe(t,e){return ce(()=>{if(t.shape.length!==2)throw new ee(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=wg(t,1);return LE(n,[1,e,1])})}function UNe(t){const e=[Go(t.shape)];return ie(t,e)}function WNe(t){if(t.rank<=1)throw new ee(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],Go(t.shape,1)];return ie(t,e)}function oc(t,e,n){return ce(()=>{switch(t.rank){case 1:return t_(t,e,n);case 2:return SX(t,[e,0],[n,t.shape[1]]);case 3:return n_(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return Qb(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return Gt(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return Gt(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new ee(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function b2(t,e,n){return ce(()=>{switch(t.rank){case 1:return t_(t,e,n);case 2:return SX(t,[0,e],[t.shape[0],n]);case 3:return n_(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return Qb(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new ee(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function gv(t,e,n,r){return ce(()=>{switch(t.rank){case 1:return t_(t,e,n);case 2:switch(r){case 1:return oc(t,e,n);case 2:return b2(t,e,n);default:throw new ee(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return oc(t,e,n);case 2:return n_(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return b2(t,e,n);default:throw new ee(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return oc(t,e,n);case 2:return Qb(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return Qb(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return b2(t,e,n);default:throw new ee(`The axis is not within the rank of the tensor ${r}`)}default:throw new ee(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function V_(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),Wr(t,e)}function CW(t,e){switch(t.rank){case 1:return tAe([t,e]);case 2:return rAe([t,e],0);case 3:return sAe([t,e],0);case 4:return oAe([t,e],0);default:throw new ee(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function LE(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new ee(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return vs(t,e)}function m1(t,e=0,n=1,r,i){return v2e(t,e,n,r,i)}function Qs(t,e,n,r){if(t.rank<2||e.rank<2)throw new rt(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const i=t.shape.slice(-1)[0],s=e.shape.slice(-2)[0];if(i!==s)throw new rt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return cW({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?BE(t.rank,r,Ts()):null,activation:n});{const i=t.shape.slice(),s=i.pop();t=ie(t,[-1,s]);const a=e.shape.slice(),o=a.pop(),l=a.pop(),c=[...a,o],f=Array.from({length:e.rank},(y,x)=>x===0?e.rank-2:x<=e.rank-2?x-1:x);e=ie(vt(e,f),[l,-1]);const d=[...i,...c];return ie(cW({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?BE(t.rank,r,Ts()):null,activation:n}),d)}}function A9(t,e,n){return ce(()=>(Array.isArray(e)?e=ai(e,"int32"):e=Re(e,"int32"),GO(t,e,n)))}function Sg(t){return ne(t,t)}function BE(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new ee(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?ie(e,[1,r[0],1,1,1]):ie(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?ie(e,[1,1,1,1,r[0]]):ie(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?ie(e,[1,r[0],1,1]):ie(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?ie(e,[1,1,1,r[0]]):ie(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?ie(e,[1,r[0],1]):ie(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?ie(e,[1,1,r[0]]):ie(e,[1].concat(r))}else if(t<3)return e;throw new ee(`Unsupported input rank by biasAdd: ${e.rank}`)}function Es(t,e,n){return ce(()=>(n==null&&(n=Ts()),xn(n),ke(t,BE(t.rank,e,n))))}function GNe(t,e=1){if(e!==1)throw new rt(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return o1(t)}function qNe(t){return ce(()=>We(t,ke(Er(t),1)))}function k9(t,e,n,r){return ce(()=>d$e(t,e,n,r))}function HNe(t){return ce(()=>{const e=ke(.5,ne(.2,t));return ki(e,0,1)})}function Cg(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const KNe=["fanIn","fanOut","fanAvg"],XNe=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function YNe(t){Mc(KNe,"FanMode",t)}function ZNe(t){Mc(XNe,"Distribution",t)}class rs extends rh{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class $9 extends rs{apply(e,n){return qn(e,n)}}$9.className="Zeros";Te($9);class U_ extends rs{apply(e,n){return hl(e,n)}}U_.className="Ones";Te(U_);class E9 extends rs{constructor(e){if(super(),typeof e!="object")throw new ee(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new ee(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return ce(()=>ne(kt(this.value),hl(e,n)))}getConfig(){return{value:this.value}}}E9.className="Constant";Te(E9);class I9 extends rs{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return pg(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}I9.className="RandomUniform";Te(I9);class N9 extends rs{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new rt(`randomNormal does not support dType ${n}.`);return m1(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}N9.className="RandomNormal";Te(N9);class O9 extends rs{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new rt(`truncatedNormal does not support dType ${n}.`);return AX(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}O9.className="TruncatedNormal";Te(O9);class _9 extends rs{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return ce(()=>{if(e.length!==2||e[0]!==e[1])throw new ee("Identity matrix initializer can only be used for 2D square matrices.");return ne(this.gain,lX(e[0]))})}getConfig(){return{gain:this.gain}}}_9.className="Identity";Te(_9);function QNe(t,e="channelsLast"){let n,r;if(xn(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const i=Go(t,2);n=t[1]*i,r=t[0]*i}else if(e==="channelsLast"){const i=Go(t,0,t.length-2);n=t[t.length-2]*i,r=t[t.length-1]*i}}else{const i=Go(t);n=Math.sqrt(i),r=Math.sqrt(i)}return[n,r]}class li extends rs{constructor(e){if(super(),e.scale<0)throw new ee(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,YNe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,ZNe(this.distribution),this.seed=e.seed}apply(e,n){const r=QNe(e),i=r[0],s=r[1];let a=this.scale;if(this.mode==="fanIn"?a/=Math.max(1,i):this.mode==="fanOut"?a/=Math.max(1,s):a/=Math.max(1,(i+s)/2),this.distribution==="normal"){const o=Math.sqrt(a);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new rt(`${this.getClassName()} does not support dType ${n}.`);return AX(e,0,o,n,this.seed)}else{const o=Math.sqrt(3*a);return pg(e,-o,o,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}li.className="VarianceScaling";Te(li);class W_ extends li{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return li.className}}W_.className="GlorotUniform";Te(W_);class G_ extends li{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return li.className}}G_.className="GlorotNormal";Te(G_);class q_ extends li{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return li.className}}q_.className="HeNormal";Te(q_);class H_ extends li{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return li.className}}H_.className="HeUniform";Te(H_);class K_ extends li{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return li.className}}K_.className="LeCunNormal";Te(K_);class X_ extends li{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return li.className}}X_.className="LeCunUniform";Te(X_);class R9 extends rs{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return ce(()=>{if(e.length<2)throw new rt("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=ve(e.slice(0,-1)),i=e[e.length-1],s=r*i;s>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${s}) elements: Slowness may result.`);const a=[Math.max(i,r),Math.min(i,r)],o=m1(a,0,1,n,this.seed),l=cEe.qr(o,!1);let c=l[0];const d=l[1].flatten().stridedSlice([0],[Math.min(i,r)*Math.min(i,r)],[Math.min(i,r)+1]);return c=ne(c,d.sign()),r<i&&(c=c.transpose()),ne(kt(this.gain),c.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}R9.className="Orthogonal";Te(R9);const TW={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function AW(t,e={}){return xg(t,qi.getMap().classNameMap,e,"initializer")}function rn(t){return z_(t)}function Jt(t){if(typeof t=="string"){const e=t in TW?TW[t]:t;if(e==="GlorotNormal")return new G_;if(e==="GlorotUniform")return new W_;if(e==="HeNormal")return new q_;if(e==="HeUniform")return new H_;if(e==="LeCunNormal")return new K_;if(e==="LeCunUniform")return new X_;{const n={};return n.className=e,n.config={},AW(n)}}else return t instanceof rs?t:AW(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function zE(t){return Array.isArray(t)&&Array.isArray(t[0])}function Jb(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function Qe(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new ee(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function Ct(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new ee(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function e0(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,i)=>r*i);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const kW="Variable";class JNe{constructor(e,n="float32",r=kW,i=!0,s=null){this.dtype=n??"float32",this.shape=e.shape,this.id=x9(),r=r??kW,this.originalName=S9(r),this.name=C9(this.originalName),this.trainable_=i,this.constraint=s,this.val=c$e(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),eOe(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function eOe(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function jE(t){return t.map(e=>e.read())}function Y_(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Rn{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class ra{constructor(e,n,r,i,s,a,o){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=i,this.callArgs=s,this.outputTensorIndex=o,this.id=x9(),a!=null&&(this.originalName=S9(a),this.name=C9(this.originalName)),this.rank=n.length}}let tOe=0;class g1{constructor(e,n){this.callArgs=n,this.id=tOe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let nOe=0;class lt extends rh{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=nOe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=Na(r)+"_"+p1(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let s=null;e.batchSize!=null&&(s=e.batchSize),r=[s].concat(e.inputShape)}this.batchInputShape=r;let i=e.dtype;i==null&&(i=e.inputDType),i==null&&(i="float32"),this.dtype=i}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new Ki(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new ee(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return jr(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return jr(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Fs(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Fs(`Layer ${this.name} is not connected, no input to return.`);return jr(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Fs(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Fs(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return jr(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=_t(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=_t(this.inputSpec);if(n.length!==r.length)throw new ee(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let i=0;i<n.length;i++){const s=n[i],a=r[i];if(a==null)continue;const o=s.rank;if(a.ndim!=null&&o!==a.ndim)throw new ee(`Input ${i} is incompatible with layer ${this.name}: expected ndim=${a.ndim}, found ndim=${o}`);if(a.maxNDim!=null&&o>a.maxNDim)throw new ee(`Input ${i} is incompatible with layer ${this.name}: expected max_ndim=${a.maxNDim}, found ndim=${o}`);if(a.minNDim!=null&&o<a.minNDim)throw new ee(`Input ${i} is incompatible with layer ${this.name}: expected min_ndim=${a.minNDim}, found ndim=${o}.`);if(a.dtype!=null&&s.dtype!==a.dtype)throw new ee(`Input ${i} is incompatible with layer ${this.name} : expected dtype=${a.dtype}, found dtype=${s.dtype}.`);if(a.axes){const l=s.shape;for(const c in a.axes){const f=Number(c),d=a.axes[c],p=f>=0?l[f]:l[l.length+f];if(d!=null&&[d,null].indexOf(p)===-1)throw new ee(`Input ${i} is incompatible with layer ${this.name}: expected axis ${f} of input shape to have value ${d} but got shape ${l}.`)}}if(a.shape!=null)for(let l=0;l<a.shape.length;++l){const c=a.shape[l],f=s.shape[l];if(c!=null&&f!=null&&c!==f)throw new ee(`Input ${i} is incompatible with layer ${this.name}: expected shape=${a.shape}, found shape=${s.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=_t(e),i=sOe(e),s=aOe(e);if(i===s)throw new ee("Arguments to apply() must be all SymbolicTensors or all Tensors");return ac(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const a=[];for(const o of _t(e))a.push(o.shape);this.build(jr(a)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&s&&(this._refCount=1)}if(this.assertInputCompatibility(e),s){let a=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,a);const o=_t(a),l=[];for(let c of o)r.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(a=jr(l),this.activityRegularizer!=null)throw new rt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return a}else{const a=rOe(e),o=this.computeOutputShape(a);let l;const c=iOe(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?a[0]:a),o!=null&&o.length>0&&Array.isArray(o[0])?l=o.map((f,d)=>new ra(c,f,this,_t(e),n,this.name,d)):l=new ra(c,o,this,_t(e),n,this.name),this.addInboundNode(e,l,null,null,a,o,n),this._refCount++,this.activityRegularizer!=null)throw new rt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,i)=>{r!=null&&e[i]!=null&&e[i]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Fs(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new Fs(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Ki(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return e0(this.weights)}build(e){this.built=!0}getWeights(e=!1){return jE(e?this.trainableWeights:this.weights)}setWeights(e){ce(()=>{const n=this.weights;if(n.length!==e.length)throw new ee(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],i=jE(n);for(let s=0;s<i.length;++s){const a=i[s],o=n[s],l=e[s];if(!Et(a.shape,l.shape))throw new ee(`Layer weight shape ${a.shape} not compatible with provided weight shape ${l.shape}`);r.push([o,l])}Y_(r)})}addWeight(e,n,r,i,s,a,o,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new ee(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(i=l!=null?l():Jt("zeros"));const c=i.apply(n,r),f=new JNe(c,r,e,a,o);return c.dispose(),s!=null&&this.addLoss(()=>s.apply(f.read())),a==null&&(a=!0),a?this._trainableWeights.push(f):this._nonTrainableWeights.push(f),f}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=_t(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const i=this.computeMask(e,r),s=_t(n),a=_t(i);if(s.length!==a.length)throw new Error(`${this.name} outputs ${s.length} tensors but ${s.length} masks for those tensors`);for(let o=0;o<s.length;o++)s[o].kerasMask=a[o]}addInboundNode(e,n,r,i,s,a,o=null){const l=_t(e);n=_t(n),r=_t(r),i=_t(i),s=Jb(s),a=Jb(a);const c=[],f=[],d=[];for(const p of l)c.push(p.sourceLayer),f.push(p.nodeIndex),d.push(p.tensorIndex);new g1({outboundLayer:this,inboundLayers:c,nodeIndices:f,tensorIndices:d,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:i,inputShapes:s,outputShapes:a},o);for(let p=0;p<n.length;p++)n[p].sourceLayer=this,n[p].nodeIndex=this.inboundNodes.length-1,n[p].tensorIndex=p}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function rOe(t){t=_t(t);const e=[];for(const n of t)e.push(n.shape);return jr(e)}function iOe(t){return"float32"}function D9(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const i=[];for(let s=0;s<r.inboundLayers.length;s++){const a=r.inputTensors[s],o=r.inboundLayers[s],l=r.nodeIndices[s],c=D9(a,o,l);for(const f of c)i.indexOf(f)===-1&&i.push(f)}return i}}}function sOe(t){let e=!0;for(const n of _t(t))if(!(n instanceof ra)){e=!1;break}return e}function aOe(t){let e=!0;for(const n of _t(t))if(n instanceof ra){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Tg extends lt{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:p1("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new ee("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new ee("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new ee("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const i=new ra(this.dtype,this.batchInputShape,this,[],{},this.name);i.nodeIndex=0,i.tensorIndex=0,new g1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new ee(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}Tg.className="InputLayer";Te(Tg);function oOe(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new ee("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new Tg({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function lOe(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return Re(e,t.dtype)}catch{throw new ee(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class Lo{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Lo)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=lOe(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new ee(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof ra){if(this.id2Value[e.id]==null)throw new ee(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new ee(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof ra){if(this.id2Value[e.id]==null)throw new ee(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new ee(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&ft(this.id2Mask)}}const t0=new y9,n0=new y9;function cOe(t){t0!=null&&t0.setMaxEntries(t),n0!=null&&n0.setMaxEntries(t)}function Ld(t,e,n,r){const i=n==null?!1:n.training,s=Array.isArray(t),a=s?t:[t],o=a.map(y=>y.name),l=[],c=e.names();for(const y of o)c.indexOf(y)!==-1?l.push(e.getValue(y)):l.push(null);const f=o.join(",")+"|"+e.names().sort().join(",");let d=t0.get(f),p;if(d==null){const y=uOe(a,e);d=y.sorted,p=y.recipientCounts,t0.put(f,d),n0.put(f,p)}p={},i||Object.assign(p,n0.get(f));const g=new Lo(e);for(let y=0;y<d.length;++y){const x=d[y],b=x.sourceLayer;if(b instanceof Tg)continue;const w=[],S=[],T=[];let k=!1;for(const _ of x.inputs){const R=g.getValue(_),O=g.getMask(_);w.push(R),S.push(O),O!=null&&(k=!0),i||(p[_.name]--,p[_.name]===0&&!e.hasKey(_)&&o.indexOf(_.name)===-1&&!R.isDisposed&&_.sourceLayer.stateful!==!0&&T.push(R))}k&&(n=n||{},n.mask=S[0]);const A=_t(b.apply(w,n));let E=null;b.supportsMasking&&(E=b.computeMask(w,S));const I=hOe(x),N=Array.isArray(I)?I:[I];for(let _=0;_<N.length;++_){g.hasKey(N[_])||g.add(N[_],A[_],Array.isArray(E)?E[0]:E);const R=o.indexOf(N[_].name);R!==-1&&(l[R]=A[_])}i||ft(T)}return g.disposeMasks(),s?l:l[0]}function uOe(t,e){U(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const i=$W(t[0],e);n=i.sorted,r=i.recipientMap}else{const i=new Set;for(const s of t){const{sorted:a,recipientMap:o}=$W(s,e);for(const l of a)i.has(l.name)||(n.push(l),i.add(l.name));for(const l in o)r[l]==null&&(r[l]=new Set),o[l].forEach(c=>r[l].add(c))}}return{sorted:n,recipientCounts:fOe(r)}}function fOe(t){const e={};for(const n in t)e[n]=t[n].size;return e}function $W(t,e){const n=new Set,r=[],i={};for(const o of e.names())n.add(o);const s=[],a=[];for(s.push(t);s.length>0;){const o=s[s.length-1];if(n.has(o.name)){s.pop();continue}const l=a[a.length-1]===s.length-1;if(o.inputs.length===0||l)s.pop(),r.push(o),n.add(o.name),l&&a.pop();else{a.push(s.length-1);for(const c of o.inputs)i[c.name]==null&&(i[c.name]=new Set),i[c.name].add(o.name),!n.has(c.name)&&s.push(c)}}return{sorted:r,recipientMap:i}}function hOe(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const i of t.sourceLayer.inboundNodes[r].outputTensors)if(i.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dOe=fe();dOe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,cOe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Z_(t,e){return ce(()=>yr(Ue(ne(t,t),e,!0)))}class Ag extends rh{getConfig(){return{}}}class M9 extends Ag{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ce(()=>{const n=Z_(e,this.axis),r=ki(n,0,this.maxValue);return ne(e,We(r,ke(_n(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}M9.className="MaxNorm";Te(M9);class P9 extends Ag{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ce(()=>We(e,ke(_n(),Z_(e,this.axis))))}getConfig(){return{axis:this.axis}}}P9.className="UnitNorm";Te(P9);class F9 extends Ag{apply(e){return Rc(e)}}F9.className="NonNeg";Te(F9);class L9 extends Ag{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ce(()=>{const n=Z_(e,this.axis),r=ke(ne(this.rate,ki(n,this.minValue,this.maxValue)),ne(1-this.rate,n));return ne(e,We(r,ke(_n(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}L9.className="MinMaxNorm";Te(L9);const EW={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Mn(t){return z_(t)}function IW(t,e={}){return xg(t,qi.getMap().classNameMap,e,"constraint")}function Pn(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in EW?EW[t]:t,config:{}};return IW(n)}else return t instanceof Ag?t:IW(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function Fl(t){if(t==null)return;const e=[],n=[],r=[];for(const i in t){const s=t[i];if(typeof s!="number"){const a=s;e.push(a.data()),n.push(i),r.push(a)}}if(e.length>0){const i=await Promise.all(e);for(let s=0;s<i.length;++s)t[n[s]]=i[s][0];ft(r)}}function B9(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var NW;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(NW||(NW={}));const pOe=125;class Xp{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class mOe{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class gOe extends Xp{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const i in n){const s=n[i];if(typeof s=="number")this.totals.hasOwnProperty(i)||(this.totals[i]=0),this.totals[i]=this.totals[i]+s*r;else{let a;i in this.totals?a=this.totals[i]:this.totals[i]=0;const o=ce(()=>ke(this.totals[i],ne(s,r)));this.totals[i]=o,a!=null&&a.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:ce(()=>{const i=ne(We(1,this.seen),this.totals[r]);n[r]=i,this.totals[r].dispose(),Xs(n[r])}))}}class yOe extends Xp{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const s in this.history){const a=this.history[s];for(let o=0;o<a.length;++o)if(typeof a[o]!="number"){const l=a[o];e.push(l.data()),n.push(s),r.push(o)}}const i=await Promise.all(e);for(let s=0;s<i.length;++s)this.history[n[s]][r[s]].dispose(),this.history[n[s]][r[s]]=i[s][0]}}class vOe extends Xp{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||WX,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=pOe),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");yE(this.yieldEvery)&&(this.maybeWait=ONe(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const i=[];this.yield!=null&&(await Fl(r),i.push(this.yield(e,n,r))),i.push(this.nextFrameFunc()),await Promise.all(i)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await Fl(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await Fl(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await Fl(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await Fl(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):yE(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await Fl(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await Fl(e),await this.trainEnd(e))}}function z9(t,e){return t==null&&(t={}),t instanceof Xp?[t]:Array.isArray(t)&&t[0]instanceof Xp?t:_t(t).map(r=>new vOe(r,e))}class Wi{constructor(){}static registerCallbackConstructor(e,n){U(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),Wi.checkForDuplicate(n),Wi.constructors[e]==null&&(Wi.constructors[e]=[]),Wi.constructors[e].push(n)}static checkForDuplicate(e){for(const n in Wi.constructors)Wi.constructors[+n].forEach(i=>{if(i===e)throw new ee("Duplicate callback constructor.")})}static clear(){Wi.constructors={}}static createCallbacks(e){const n=[];for(const r in Wi.constructors){const i=+r;e>=i&&n.push(...Wi.constructors[i])}return n.map(r=>new r)}}Wi.constructors={};function j9(t,e,n,r,i,s,a,o,l){const c=new yOe,f=[new gOe,...Wi.createCallbacks(e)];t!=null&&f.push(...t),f.push(c);const d=new mOe(f);return d.setParams({epochs:n,initialEpoch:r,samples:i,steps:s,batchSize:a,verbose:e,doValidation:o,metrics:l}),{callbackList:d,history:c}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function za(t,e={},n=!1){return xg(t,qi.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function r0(t,e){return ce(()=>{t.dtype!=="float32"&&(t=Re(t,"float32"));const n=Ue(Sg(t),e,!0),r=a1(n.shape,_n()),i=yr(fl(n,r));return We(t,i)})}function y1(t,e){return ce(()=>kn(Sg(Ke(e,t)),-1))}function Q_(t,e){return ce(()=>kn(Er(Ke(e,t)),-1))}function J_(t,e){return ce(()=>{const n=Ke(t,e),r=ki(Er(t),_n(),Number.MAX_VALUE),i=Er(We(n,r));return ne(100,kn(i,-1))})}function bOe(t,e){return ce(()=>{const n=ki(e,_n(),Number.MAX_VALUE),r=na(ke(1,n)),i=ki(t,_n(),Number.MAX_VALUE),s=na(ke(1,i));return kn(Sg(Ke(r,s)),-1)})}function xOe(t,e){return ce(()=>{const n=fl(0,Ke(1,ne(t,e)));return kn(Sg(n),-1)})}function wOe(t,e){return ce(()=>{const n=fl(0,Ke(1,ne(t,e)));return kn(n,-1)})}function SOe(t,e){return ce(()=>{const n=Ue(ne(t,e),-1),r=ws(ne(Ke(1,t),e),-1);return fl(0,ke(1,Ke(r,n)))})}function COe(t,e){return ce(()=>{const n=Math.log(2),r=Ke(e,t),i=Ke(ke(r,dg(ne(-2,r))),n);return kn(i,-1)})}function Yp(t,e,n=!1){return ce(()=>{if(n)e=r_(e);else{const r=Ue(e,e.shape.length-1,!0);e=We(e,r)}return e=ki(e,_n(),1-_n()),yn(Ue(ne(Re(t,"float32"),na(e)),e.shape.length-1))})}function i0(t,e,n=!1){return ce(()=>{const r=Re(c1(UNe(t)),"int32");e=ki(e,_n(),1-_n());const i=e.shape,s=ie(dX(r,i[i.length-1]),i);return Yp(s,e,n)})}function TOe(t,e){if(!Et(t.shape,e.shape))throw new ee(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return ce(()=>{const n=Rc(e),r=yn(Er(e));return ke(Ke(n,ne(e,t)),cX(ta(r)))})}function v1(t,e){return ce(()=>{let n;return n=ki(e,_n(),1-_n()),n=na(We(n,Ke(1,n))),kn(TOe(t,n),-1)})}function AOe(t,e){return ce(()=>{const n=ki(t,_n(),1),r=ki(e,_n(),1);return Ue(ne(t,na(We(n,r))),-1)})}function kOe(t,e){return ce(()=>{const n=na(ke(_n(),e));return kn(Ke(e,ne(t,n)),-1)})}function V9(t,e){return ce(()=>{const n=r0(t,-1),r=r0(e,-1),i=ne(n,r);return yn(Ue(i,-1))})}const s0={meanSquaredError:y1,meanAbsoluteError:Q_,meanAbsolutePercentageError:J_,meanSquaredLogarithmicError:bOe,squaredHinge:xOe,hinge:wOe,categoricalHinge:SOe,logcosh:COe,categoricalCrossentropy:Yp,sparseCategoricalCrossentropy:i0,binaryCrossentropy:v1,kullbackLeiblerDivergence:AOe,poisson:kOe,cosineProximity:V9};function x2(t){if(typeof t=="string"){if(t in s0)return s0[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new ee(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function U9(t,e){return ce(()=>{const n=ne(.5,es(e)),r=Zs($i(e,n),t.dtype);return kn(ea(t,r),-1)})}function W9(t,e){return ce(()=>Zs(ea(Wp(t,-1),Wp(e,-1)),"float32"))}function $Oe(t,e){return ce(()=>Re(Ue(Ka(ea(t,1),ea(e,1))),"float32"))}function EOe(t,e){return ce(()=>Re(Ue(Ka(ea(t,0),ea(e,1))),"float32"))}function IOe(t,e){return ce(()=>{const n=$Oe(t,e),r=EOe(t,e),i=ke(n,r);return Re(Dr($i(i,0),We(n,i),0),"float32")})}function NOe(t,e){return v1(t,e)}function OOe(t,e){return t.rank===e.rank&&(t=mg(t,[t.rank-1])),e=Wp(e,-1),e.dtype!==t.dtype&&(e=Re(e,t.dtype)),Re(ea(t,e),"float32")}const _Oe=y1,ROe=y1,DOe=Q_,MOe=Q_,POe=J_,FOe=J_,G9=Yp,LOe=V9,q9=i0,a0={binaryAccuracy:U9,categoricalAccuracy:W9,precision:IOe,categoricalCrossentropy:G9,sparseCategoricalCrossentropy:q9,mse:_Oe,MSE:ROe,mae:DOe,MAE:MOe,mape:POe,MAPE:FOe,cosine:LOe};function BOe(t){if(typeof t=="string"&&t in a0)return a0[t];if(typeof t!="string"&&t!=null)return t;throw new ee(`Unknown metric ${t}`)}function yv(t){if(Ls(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(s0))if(s0[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(a0))if(a0[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function zOe(t){const e={Adagrad:()=>Ou.adagrad(.01),Adadelta:()=>Ou.adadelta(1,.95,_n()),Adam:()=>Ou.adam(.001,.9,.999,_n()),Adamax:()=>Ou.adamax(.002,.9,.999,_n(),0),RMSProp:()=>Ou.rmsprop(.001,.9,0,_n()),SGD:()=>Ou.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new ee(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const OW=1*1024*1024;function _W(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!VE(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>OW&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${OW}.`)}}function VE(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!VE(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!VE(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function jOe(t,e,n,r=console.log){const i=UOe(t),s=["Layer (type)","Input Shape","Output shape","Param #"];i?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(f=>Math.floor(e*f)));let a;if(!i){s.push("Receives inputs"),a=[];for(const f in t.nodesByDepth)a.push(...t.nodesByDepth[f])}r("_".repeat(e)),o0(s,n,r),r("=".repeat(e));const o=t.layers;for(let f=0;f<o.length;++f)i?WOe(o[f],n,r):GOe(o[f],n,a,r),r((f===o.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=VOe(t),c=e0(t.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(e))}function VOe(t){let e;return t.collectedTrainableWeights!=null?e=e0(t.collectedTrainableWeights):e=e0(t.trainableWeights),e}function UOe(t){let e=!0;const n=[],r=[];for(const i in t.nodesByDepth)n.push(t.nodesByDepth[i]);for(const i of n){if(i.length>1||i.length===1&&i[0].inboundLayers.length>1){e=!1;break}r.push(...i)}if(e)for(const i of t.layers){let s=!1;for(const a of i.inboundNodes)if(r.indexOf(a)!==-1)if(s){e=!1;break}else s=!0;if(!e)break}return e}function o0(t,e,n=console.log){let r="";for(let i=0;i<t.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=t[i],r=r.slice(0,e[i]),r+=" ".repeat(e[i]-r.length);n(r)}function WOe(t,e,n){let r,i;try{i=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{i="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const s=t.name,a=t.getClassName(),o=[`${s} (${a})`,i,r,t.countParams().toString()];o0(o,e,n)}function GOe(t,e,n,r){let i,s;try{s=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{s="multiple"}try{i=JSON.stringify(t.outputShape)}catch{i="multiple"}const a=[];for(const d of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let p=0;p<d.inboundLayers.length;++p){const g=d.inboundLayers[p].name,y=d.nodeIndices[p],x=d.tensorIndices[p];a.push(`${g}[${y}][${x}]`)}const o=t.name,l=t.getClassName(),c=a.length===0?"":a[0],f=[`${o} (${l})`,s,i,t.countParams().toString(),c];o0(f,e,r);for(let d=1;d<a.length;++d)o0(["","","","",a[d]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function H9(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function UE(t,e){if(t===null)return null;if(typeof t=="string")return Wl(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const s=t[i];H9(e,i,s)?n.push(s):n.push(UE(s,e))}return n}else{const n={};for(const r of Object.keys(t)){const i=t[r];if(r==="name"&&typeof i=="string")n[r]=i;else{const s=Wl(r);n[s]=UE(i,s)}}return n}}function WE(t,e){if(t==null)return null;if(typeof t=="string")return Na(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const s=t[i];H9(e,i,s)?n.push(s):n.push(WE(s,e))}return n}else{const n={};for(const r of Object.keys(t)){const i=t[r],s=Na(r);(r==="name"||r==="className")&&typeof i=="string"?n[s]=i:n[s]=WE(i,r)}return n}}/** @license See the LICENSE file. */const K9="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const qOe=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class hs extends lt{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const S=this.getClassName().toLowerCase();this.name=p1(S)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],Wo(this.inputs).length!==this.inputs.length)throw new ee(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(S=>S.name)}`);Wo(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(S=>S.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const S of this.outputs){const T=S.sourceLayer,k=S.nodeIndex,A=S.tensorIndex;this.outputLayers.push(T),this.outputLayersNodeIndices.push(k),this.outputLayersTensorIndices.push(A)}for(const S of this.inputs){const T=S.sourceLayer,k=S.nodeIndex,A=S.tensorIndex;Ls(k===0,"input layer has >1 nodes"),Ls(A===0,"input layer has >1 tensors"),this.inputLayers.push(T),this.inputLayersNodeIndices.push(k),this.inputLayersTensorIndices.push(A)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let S=0;S<this.inputLayers.length;S++){const T=this.inputLayers[S];if(!(T instanceof Tg))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${S} (0-based) originates from layer type ${T.getClassName()}.`);this.inputNames.push(T.name),this.feedInputShapes.push(T.batchInputShape),this.feedInputNames.push(T.name)}for(const S of this.outputLayers)this.outputNames.push(S.name);this.internalInputShapes=this.inputs.map(S=>S.shape),this.internalOutputShapes=this.outputs.map(S=>S.shape);const n={},r={},i={},s={},a={},o=[],l=(S,T,k,A,E,I)=>{(A==null||E==null||I==null)&&(A=S.sourceLayer,E=S.nodeIndex,I=S.tensorIndex);const N=A.inboundNodes[E];if(k.indexOf(N)!==-1)throw new Ki(`The tensor ${S.name} at layer "${A.name}" is part of a cycle.`);if(T.indexOf(N)!==-1)return;this.containerNodes.add(hs.nodeKey(A,E)),A.id in a||(a[A.id]=Object.keys(a).length),k.indexOf(N)===-1&&k.push(N);const _=N.inboundLayers.length;for(let R=0;R<_;R++){const O=N.inputTensors[R],F=N.inboundLayers[R],z=N.nodeIndices[R],W=N.tensorIndices[R];l(O,T,k,F,z,W)}for(T.push(N);k.indexOf(N)>=0;)k.splice(k.indexOf(N),1);o.push(N)},c=[],f=[];for(const S of this.outputs)l(S,c,f);const d=o.slice().reverse();for(const S of d){r[S.id]=S,S.id in n||(n[S.id]=0);let T=n[S.id];const k=i[S.outboundLayer.id]==null?0:i[S.outboundLayer.id];T=Math.max(T,k),i[S.outboundLayer.id]=T,s[S.outboundLayer.id]=S.outboundLayer,n[S.id]=T;for(let A=0;A<S.inboundLayers.length;A++){const E=S.inboundLayers[A],I=S.nodeIndices[A],N=E.inboundNodes[I],_=n[N.id]==null?0:n[N.id];n[N.id]=Math.max(T+1,_),r[N.id]=N}}const p={};for(const S in n){const T=n[S];T in p||(p[T]=[]),p[T].push(r[S])}const g={};for(const S in i){const T=i[S];T in g||(g[T]=[]),g[T].push(s[S])}let y=Object.keys(g).map(S=>parseInt(S,10)).sort(pv);this.layers=[];for(const S of y){const T=g[S];T.sort((k,A)=>{const E=a[k.id],I=a[A.id];return E<I?-1:E>I?1:0});for(const k of T)k instanceof hs&&this.internalContainerRefs.push(k),this.layers.push(k)}this.layersByDepth=g,y=Object.keys(p).map(S=>parseInt(S,10)).sort(pv);const x=this.inputs.slice(),b=[];for(const S of y)for(const T of p[S]){const k=T.outboundLayer;if(k!=null){for(const A of T.inputTensors)if(x.indexOf(A)===-1)throw new Ki(`Graph disconnected: cannot obtain value for tensor ${A} at layer "${k.name}". The following previous layers were accessed without issue: ${b}`);for(const A of T.outputTensors)x.push(A);b.push(k.name)}}this.nodesByDepth=p;const w=this.layers.map(S=>S.name);for(const S of w){const T=w.filter(k=>k===S).length;if(T!==1)throw new Ki(`The name "${S}" is used ${T} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(w))}this.outboundNodes=[],this.inboundNodes=[],new g1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(S=>null),outputMasks:this.outputs.map(S=>null),inputShapes:this.inputs.map(S=>S.shape),outputShapes:this.outputs.map(S=>S.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new ee("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let i=0;const s=qOe(e);s&&this.parseWeights(e);for(const o of this.layers)for(const[l,c]of o.weights.entries()){const f=s?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[f]!=null)throw new ee(`Duplicate weight name: ${f}`);r[f]=c,i++}const a=[];for(const o in e){let l=o;if(r[o]==null){const c=o.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)a.push([r[l],e[o]]);else if(n)throw new ee(`Provided weight data has no target variable: ${o}`);delete r[l]}if(n){const o=[];for(const l in r)o.push(l);if(o.length>0)throw new ee(`${o.length} of ${i} weights are not set: ${o}`)}Y_(a)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),i=["vars","layer_checkpoint_dependencies"],s=r.map(a=>a.startsWith("_")?a.slice(1):a).filter(a=>!i.includes(a)).join("/");s!==n&&(e[s]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${K9}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=WE(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return ce(()=>{e=_t(e);const r=new Lo;for(let i=0;i<this.inputs.length;++i)r.add(this.inputs[i],e[i]);return Ld(this.outputs,r,n)})}computeMask(e,n){return ce(()=>{e=_t(e);let r;return n==null?r=Cc(null,e.length):r=_t(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=Jb(e);if(n.length!==this.inputLayers.length)throw new ee(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let o=0;o<n.length;o++){const l=this.inputLayers[o],c=n[o],f=l.name+"_0_0";r[f]=c}const i=Object.keys(this.nodesByDepth).map(o=>parseInt(o,10)).sort(pv);if(i.length>1)for(const o of i){const l=this.nodesByDepth[o];for(const c of l){const f=c.outboundLayer;if(this.inputLayers.map(x=>x.id).indexOf(f.id)!==-1)continue;const d=[];for(let x=0;x<c.inboundLayers.length;x++){const b=c.inboundLayers[x],w=c.nodeIndices[x],S=c.tensorIndices[x],T=`${b.name}_${w}_${S}`,k=r[T];d.push(k)}const p=f.computeOutputShape(jr(d)),g=Jb(p),y=f.inboundNodes.indexOf(c);for(let x=0;x<g.length;x++){const b=`${f.name}_${y}_${x}`;r[b]=g[x]}}}const s=[],a=[];for(let o=0;o<this.outputLayers.length;o++){const l=this.outputLayers[o],c=this.outputLayersNodeIndices[o],f=this.outputLayersTensorIndices[o],d=`${l.name}_${c}_${f}`;a.push(d)}for(let o=0;o<a.length;o++){const l=a[o];Ls(l in r),s.push(r[l])}return jr(s)}runInternalGraph(e,n){n==null&&(n=Cc(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const c=this.inputs[l],f=e[l],d=n[l];r[c.id]=[f,d]}const i=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(pv);for(const l of i){const c=this.nodesByDepth[l];for(const f of c){const d=f.outboundLayer,p=f.inputTensors,g=f.outputTensors,y=new Array;for(const x of p)x.id in r&&y.push(r[x.id]);if(y.length===p.length){let x={},b,w,S,T;if(f.callArgs!=null&&(x=f.callArgs),y.length===1){const[k,A]=y[0];x.mask==null&&(x.mask=A),S=_t(d.call(k,x)),T=_t(d.computeMask(k,A)),b=[k],w=[A]}else b=y.map(k=>k[0]),w=y.map(k=>k[1]),x.mask==null&&(x.mask=w),S=_t(d.call(b,x)),T=_t(d.computeMask(b,w));if(d.activityRegularizer)throw new rt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let k=0;k<g.length;++k){const A=g[k],E=S[k],I=T[k];r[A.id]=[E,I]}}}}const s=[],a=[],o=[];for(const l of this.outputs){Ls(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[c,f]=r[l.id];o.push(c.shape),s.push(c),a.push(f)}return[s,a,o]}buildNodeConversionMap(e){const n={};let r;for(const i of this.layers){r=i instanceof hs?1:0;for(let s=0;s<i.inboundNodes.length;s++){const a=hs.nodeKey(i,s);this.containerNodes.has(a)&&(n[a]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new ee("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new ee(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new ee(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return ce(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const i=hs.nodeKey(n,r);this.containerNodes.has(i)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const a of this.layers){const o=a.getClassName(),l=a.getConfig(),c=[];for(let d=0;d<a.inboundNodes.length;d++){const p=a.inboundNodes[d],g=hs.nodeKey(a,d);let y={};if(this.containerNodes.has(g)){if(p.callArgs)try{JSON.stringify(p.callArgs),y=p.callArgs}catch{console.warn(`Layer ${a.name} was passed non-serializable keyword arguments: ${p.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),y={}}if(p.inboundLayers.length>0){const x=[];for(let b=0;b<p.inboundLayers.length;b++){const w=p.inboundLayers[b],S=p.nodeIndices[b],T=p.tensorIndices[b],k=hs.nodeKey(w,S);let A=n[k];A==null&&(A=0),x.push([w.name,A,T,y])}c.push(x)}}}const f={};f.name=a.name,f.className=o,f.config=l,f.inboundNodes=c,r.push(f)}e.layers=r;const i=[];for(let a=0;a<this.inputLayers.length;a++){const o=this.inputLayers[a],l=this.inputLayersNodeIndices[a],c=hs.nodeKey(o,l);if(!this.containerNodes.has(c))continue;let f=n[c];f==null&&(f=0);const d=this.inputLayersTensorIndices[a];i.push([o.name,f,d])}e.inputLayers=i;const s=[];for(let a=0;a<this.outputLayers.length;a++){const o=this.outputLayers[a],l=this.outputLayersNodeIndices[a],c=hs.nodeKey(o,l);if(!this.containerNodes.has(c))continue;let f=n[c];f==null&&(f=0);const d=this.outputLayersTensorIndices[a];s.push([o.name,f,d])}return e.outputLayers=s,e}static fromConfig(e,n,r={},i=!1){const s={},a={};function o(b,w){b.name in a?a[b.name].push(w):a[b.name]=[w]}function l(b,w){const S=[];let T;for(const k of w){const A=k[0],E=k[1],I=k[2];if(T=k[3]==null?{}:k[3],!(A in s)){o(b,w);return}const N=s[A];if(N.inboundNodes.length<=E){o(b,w);return}const _=N.inboundNodes[E];S.push(_.outputTensors[I])}S.length>0&&b.apply(jr(S),T)}function c(b){const w=b.name,S=za(b,n.customObjects!=null?n.customObjects:{});S.setFastWeightInitDuringBuild(i),s[w]=S,b.inboundNodes.forEach(k=>{if(!(k instanceof Array))throw new ee(`Corrupted configuration, expected array for nodeData: ${k}`);o(S,k)})}const f=n.name,d=n.layers;for(const b of d)c(b);for(;!NNe(a);)for(const b of d){const w=s[b.name];if(w.name in a){const S=a[w.name];delete a[w.name];for(const T of S)l(w,T)}}const p=[],g=[],y=n.inputLayers;for(const b of y){const w=b[0],S=b[1],T=b[2];Ls(w in s);const A=s[w].inboundNodes[S].outputTensors;p.push(A[T])}const x=n.outputLayers;for(const b of x){const w=b[0],S=b[1],T=b[2];Ls(w in s);const A=s[w].inboundNodes[S].outputTensors;g.push(A[T])}return new e({inputs:p,outputs:g,name:f})}get stateful(){if(this._stateful)throw new ee("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){ce(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function HOe(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(i=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const i=[];return e.forEach(s=>{s in t?i.push(t[s]):i.push(null)}),i}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function X9(t,e){return HOe(t,e,"classWeight")}async function Y9(t,e,n,r){if(n!=null){const i=ce(()=>{if(t.shape.length===1)return sc(t);if(t.shape.length===2){if(t.shape[1]>1)return Wp(t,1);if(t.shape[1]===1)return ie(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),s=Array.from(await i.data());ft(i);const a=[];return s.forEach(o=>{if(n[o]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${o} exists in the data but not in classWeight`);a.push(n[o])}),ai(a,"float32")}else return null}function KOe(t,e){return ne(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const XOe=32;function Z9(t,e){let n,r;const i=e;n=i.xs,r=i.ys,U(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const s=RW("input",t.inputNames,n),a=RW("output",t.outputNames,r),o=s[0].shape[0];U(s.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${s.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),U(a.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${a.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<s.length;l++)U(s[l].shape[0]===o,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${s[l].shape[0]}; expected  ${o} based on input ${t.inputNames[0]}.`);for(let l=0;l<a.length;l++)U(a[l].shape[0]===o,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${a[l].shape[0]}; expected  ${o} based on input ${t.inputNames[0]}.`);return{xs:s,ys:a}}function RW(t,e,n){if(n instanceof On)return[n];if(Array.isArray(n))return U(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const i of e){if(n[i]==null)throw new ee(`The feature data generated by the dataset lacks the required ${t} key '${i}'.`);r.push(n[i])}return r}}function YOe(t){if(t.length===3)throw new rt("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function ZOe(t,e,n){const r=n.batchesPerEpoch!=null;if(U(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),U(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),U(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),U(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),U(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const i=n.validationData!=null;let s,a;if(i)if(DW(n.validationData))U(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const b=YOe(n.validationData);s=b.xs,a=b.ys}const o=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let c;i?c=l.slice().concat(l.map(b=>"val_"+b)):c=l.slice();const f=z9(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:p,history:g}=j9(f,d,n.epochs,null,null,QOe(e,n),null,i,c);p.setModel(t),t.history=g,await p.onTrainBegin(),t.stopTraining_=!1;let y=n.initialEpoch==null?0:n.initialEpoch,x=await e.iterator();for(;y<n.epochs;){const b={};await p.onEpochBegin(y);let w=0,S=0;for(r||(x=await e.iterator());!r||w<n.batchesPerEpoch;){const T=await x.next();if(r&&T.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${w} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(T.value!=null){const{xs:k,ys:A}=Z9(t,T.value),E={};E.batch=S,E.size=k[0].shape[0],await p.onBatchBegin(S,E);const I=[];if(n.classWeight!=null){const R=X9(n.classWeight,t.outputNames);for(let O=0;O<R.length;++O)I.push(await Y9(A[O],null,R[O]))}const N=k.concat(A).concat(I),_=o(N);ft(N);for(let R=0;R<l.length;++R){const O=l[R],F=_[R];E[O]=F,Xs(F)}await p.onBatchEnd(S,E),B9(E),S++,w++}if(r?w>=n.batchesPerEpoch:T.done){if(i){let k;DW(n.validationData)?k=_t(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):k=_t(t.evaluate(s,a,{batchSize:n.validationBatchSize==null?XOe:n.validationBatchSize,verbose:0}));for(let A=0;A<t.metricsNames.length;++A)b[`val_${t.metricsNames[A]}`]=k[A]}break}if(t.stopTraining_)break}if(await p.onEpochEnd(y,b),y++,t.stopTraining_)break}return await p.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function QOe(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function DW(t){return typeof t.iterator=="function"}function JOe(t){return typeof t.next=="function"}async function e_e(t,e,n){n=n||{};const r=n.batches!=null,i=t.testFunction;let s=[];if(n.verbose>0)throw new rt("Verbose mode is not implemented yet.");U(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const a=JOe(e)?e:await e.iterator();let o=0,l=0;for(;!r||l<n.batches;){const c=await a.next();if(s=ce(()=>{if(c.value){const{xs:f,ys:d}=Z9(t,c.value),p=f.concat(d),g=ce(()=>i(p));if(ft(p),l===0)for(let x=0;x<g.length;++x)s.push(kt(0));const y=p[0].shape[0];for(let x=0;x<g.length;++x){const b=g[x],w=s[x];s[x]=ce(()=>ke(s[x],ne(y,b))),l>0&&ft(w)}ft(g),o+=y,++l}return s}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<s.length;++c){const f=s[c];s[c]=We(s[c],o),ft(f)}return jr(s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function w2(t){U(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function Nd(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>oc(r,e,n-e)):oc(t,e,n-e)}function GE(t,e){return ce(()=>t==null?null:Array.isArray(t)?t.map(n=>GE(n,e)):A9(t,e.dtype==="int32"?e:Re(e,"int32")))}function S2(t,e){const n=[];let r=0,i=null;for(;r<t;)i=r+e,i>=t&&(i=t),n.push([r,i]),r=i;return n}function Q9(t){const e=[];t instanceof On&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(wg(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function us(t,e){if(t==null)return;const n=[];if(e instanceof On)n.push(e.id);else if(Array.isArray(e))e.forEach(i=>n.push(i.id));else if(e!=null)for(const i in e){const s=e[i];n.push(s.id)}const r=[];if(t instanceof On)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(i=>{n.indexOf(i.id)===-1&&r.push(i)});else if(t!=null)for(const i in t){const s=t[i];n.indexOf(s.id)===-1&&r.push(s)}r.forEach(i=>{i.isDisposed||i.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function t_e(t){return t instanceof On}function qE(t){return Array.isArray(t)}function MW(t){return!t_e(t)&&!qE(t)}function PW(t,e,n,r=!0,i=""){if(e==null||e.length===0){if(t!=null){let a=!1;if(qE(t)&&t.length>0)a=!0;else if(MW(t)){for(const o in t)if(t.hasOwnProperty(o)){a=!0;break}}else a=!0;if(a)throw new ee(`Error when checking model ${i} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(a=>null);let s;if(MW(t)){t=t,s=[];for(const a of e){if(t[a]==null)throw new ee(`No data provided for "${a}". Need data for each key in: ${e}`);s.push(t[a])}}else if(qE(t)){if(t=t,t.length!==e.length)throw new ee(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);s=t}else{if(t=t,e.length>1)throw new ee(`The model ${i} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);s=[t]}if(s=Q9(s),n!=null)for(let a=0;a<e.length;++a){if(n[a]==null)continue;const o=s[a];if(o.shape.length!==n[a].length)throw new ee(`Error when checking ${i}: expected ${e[a]} to have ${n[a].length} dimension(s). but got array with shape ${o.shape}`);for(let l=0;l<n[a].length;++l){if(l===0&&!r)continue;const c=o.shape[l],f=n[a][l];if(f!=null&&f>=0&&c!==f)throw new ee(`${i} expected a batch of elements where each example has shape [${n[a].slice(1,n[a].length)}] (i.e.,tensor shape [*,${n[a].slice(1,n[a].length)}]) but the ${i} received an input with ${o.shape[0]} examples, each with shape [${o.shape.slice(1,o.shape.length)}] (tensor shape [${o.shape}])`)}}return s}function n_e(t,e,n){const r=Wo(t.map(s=>s.shape[0]));r.sort();const i=Wo(e.map(s=>s.shape[0]));if(i.sort(),r.length>1)throw new ee(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(s=>s.shape))}`);if(i.length>1)throw new ee(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(s=>s.shape))}`);if(r.length>0&&i.length>0&&!Et(r,i))throw new ee(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${i[0]} target sample(s).`)}function r_e(t,e,n){const r=[y1,v1,Yp];for(let i=0;i<t.length;++i){const s=t[i],a=e[i],o=n[i];if(a!=null){if(a===Yp&&s.shape[s.shape.length-1]===1)throw new ee(`You are passing a target array of shape ${s.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(a)!==-1){const l=s.shape.slice(1),c=o.slice(1);for(let f=0;f<l.length;++f){const d=l[f],p=c[f];if(p!=null&&d!==p)throw new ee(`A target Tensor with shape ${s.shape} was passed for an output of shape ${o}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function FW(t,e,n,r=!0,i=""){let s;if(Array.isArray(t)){if(t.length!==e.length)throw new ee(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);s=t}else{if(e.length>1)throw new ee(`The model expects ${e.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);s=[t]}if(n!=null)for(let a=0;a<e.length;++a){if(n[a]==null)continue;const o=s[a];if(o.shape.length!==n[a].length)throw new ee(`Error when checking ${i}: expected ${e[a]} to have ${n[a].length} dimension(s), but got array with shape ${JSON.stringify(o.shape)}`);for(let l=0;l<n[a].length;++l){if(l===0&&!r)continue;const c=o.shape[l],f=n[a][l];if(f!=null&&f!==c)throw new ee(`Error when checking ${i}: expected ${e[a]} to have shape ${JSON.stringify(n[a])} but got array with shape ${JSON.stringify(o.shape)}.`)}}}function i_e(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const i of e){let s=n.hasOwnProperty(i)?n[i]:[];Array.isArray(s)||(s=[s]),r.push(s)}return r}}const s_e="layers-model";class Qu extends hs{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new ee("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");jOe(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=zOe(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof dl))throw new ee("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const a in e.loss)if(this.outputNames.indexOf(a)===-1)throw new ee(`Unknown entry in loss dictionary: "${a}". Only expected the following keys: ${this.outputNames}`);for(const a of this.outputNames)e.loss[a]==null&&console.warn(`Output "${a}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${a} during training`),n.push(x2(e.loss[a]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new ee(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(o=>x2(o))}else{const a=x2(e.loss);this.outputs.forEach(o=>{n.push(a)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let a=0;a<this.outputs.length;++a){const o=this.internalOutputShapes[a],l=this.outputNames[a];this.feedOutputNames.push(l),this.feedOutputShapes.push(o),this.feedLossFns.push(this.lossFunctions[a])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],ac("loss",()=>{for(let a=0;a<this.outputs.length;++a){if(r.indexOf(a)!==-1)continue;const o=this.lossFunctions[a];this.outputs.length>1&&(this.metricsTensors.push([o,a]),this.metricsNames.push(this.outputNames[a]+"_loss"))}});const i=i_e(e.metrics,this.outputNames),s=(a,o,l)=>{this.outputNames.length>1&&(o=this.outputNames[a]+"_"+o),this.metricsNames.push(o),this.metricsTensors.push([l,a])};ac("metric",()=>{for(let a=0;a<this.outputs.length;++a){if(r.indexOf(a)!==-1)continue;const o=i[a];(c=>{const f="";let d,p,g;for(const y of c){if(typeof y=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(y)!==-1){const b=this.internalOutputShapes[a];b[b.length-1]===1||this.lossFunctions[a]===v1?["accuracy","acc"].indexOf(y)!==-1?p=U9:["crossentropy","ce"].indexOf(y)!==-1&&(p=NOe):this.lossFunctions[a]===i0?["accuracy","acc"].indexOf(y)!==-1?p=OOe:["crossentropy","ce"].indexOf(y)!==-1&&(p=q9):["accuracy","acc"].indexOf(y)!==-1?p=W9:["crossentropy","ce"].indexOf(y)!==-1&&(p=G9);let w;["accuracy","acc"].indexOf(y)!==-1?w="acc":["crossentropy","ce"].indexOf(y)!==-1&&(w="ce"),g=p,d=f+w}else g=BOe(y),d=f+yv(y);let x;ac(d,()=>{x=g}),s(a,d,x)}})(o)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const i=r.batchSize==null?32:r.batchSize;w2(i);const a=this.standardizeUserDataXY(e,n,!0,i);try{const o=a[0].concat(a[1]);this.makeTestFunction();const l=this.testFunction,c=this.testLoop(l,o,i,r.verbose,r.steps);return jr(c)}finally{us(a[0],e),us(a[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),e_e(this,e,n)}checkNumSamples(e,n,r,i="steps"){let s;if(r!=null){if(s=null,n!=null)throw new ee(`If ${i} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?s=e[0].shape[0]:s=e.shape[0];else throw new ee(`Either the input data should have a defined shape, or ${i} shoud be specified.`);return s}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new ee("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),i=r?n:[n],s=this.retrieveSymbolicTensors(i),a=new Lo;if(e instanceof On&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new ee(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)a.add(this.inputs[l],e[l])}else for(const l of this.inputs){const c=e[l.name];if(c==null)throw new ee(`No value is provided for the model's input ${l.name}`);a.add(l,c)}const o=Ld(s,a);return r?o:o[0]}retrieveSymbolicTensors(e){const n=Cc(null,e.length);let r=e.length;for(const i of this.layers){const s=Array.isArray(i.output)?i.output:[i.output],a=s.map(o=>o.name);for(let o=0;o<e.length;++o){const l=a.indexOf(e[o]);if(l!==-1&&(n[o]=s[l],r--),r===0)break}if(r===0)break}if(r>0){const i=[];throw n.forEach((s,a)=>{s==null&&i.push(e[a])}),new ee(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(i)}`)}return n}predictLoop(e,n=32,r=!1){return ce(()=>{const i=this.checkNumSamples(e);if(r)throw new rt("Verbose predictLoop() is not implemented yet.");const s=S2(i,n),a=this.outputs.map(o=>[]);for(let o=0;o<s.length;++o)ce(()=>{const c=s[o][0],f=s[o][1],d=Nd(e,c,f),p=[];if(Array.isArray(d))for(let y=0;y<d.length;++y)p.push({key:this.inputs[y],value:d[y]});else p.push({key:this.inputs[0],value:d});const g=new Lo(p);return Ld(this.outputs,g)}).forEach((c,f)=>a[f].push(c));return jr(a.map(o=>Wr(o,0)))})}predict(e,n={}){const r=Q9(e);FW(r,this.inputNames,this.feedInputShapes,!1);try{const i=n.batchSize==null?32:n.batchSize;return w2(i),this.predictLoop(r,i)}finally{us(r,e)}}predictOnBatch(e){FW(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,i){if(this.optimizer_==null)throw new Ki("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const s=[];for(let a=0;a<this.feedOutputShapes.length;++a){const o=this.feedOutputShapes[a];this.feedLossFns[a]===i0?s.push(o.slice(0,o.length-1).concat([1])):s.push(o)}if(e=PW(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=PW(n,this.feedOutputNames,s,!1,"target"),n_e(e,n),r_e(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&i!=null&&i>0&&e[0].shape[0]%i!==0)throw new ee(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${i}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,i,s=!0,a){const[o,l]=this.standardizeUserDataXY(e,n,s,a);if(r!=null)throw new Error("sample weight is not supported yet.");let c=null;if(i!=null){const f=X9(i,this.outputNames);c=[];for(let d=0;d<f.length;++d)c.push(await Y9(l[d],null,f[d]))}return[o,l,c]}testLoop(e,n,r,i=0,s){return ce(()=>{const a=this.checkNumSamples(n,r,s,"steps"),o=[];if(i>0)throw new rt("Verbose mode is not implemented yet.");if(s!=null)throw new rt("steps mode in testLoop() is not implemented yet");{const l=S2(a,r),c=ai(Cs(0,a));for(let f=0;f<l.length;++f){const d=l[f][0],p=l[f][1],g=oc(c,d,p-d),y=GE(n,g),x=e(y);if(f===0)for(let b=0;b<x.length;++b)o.push(kt(0));for(let b=0;b<x.length;++b){const w=x[b];o[b]=ke(o[b],ne(p-d,w))}}for(let f=0;f<o.length;++f)o[f]=We(o[f],a)}return o})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const i=e[r];let s=i;if(wW(e,i)>1){const a=wW(e.slice(0,r),i);s+=`_${a}`}n.push(s)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),a=[],o=()=>{const d=[];for(let x=0;x<this.inputs.length;++x)d.push({key:this.inputs[x],value:r[x]});const p=new Lo(d),g=Ld(this.outputs,p,{training:!0});let y;for(let x=0;x<this.lossFunctions.length;++x){const b=this.lossFunctions[x];let w=b(i[x],g[x]);s[x]!=null&&(w=KOe(w,s[x]));const S=kn(w);n.push(S),x===0?y=w:y=ke(y,w)}for(let x=0;x<this.metricsTensors.length;++x){let b;if(this.outputs.length>1&&x<this.outputs.length)b=n[x];else{const w=this.metricsTensors[x][0],S=this.metricsTensors[x][1];b=kn(w(i[S],g[S]))}Xs(b),a.push(b)}return y=kn(y),this.calculateLosses().forEach(x=>{y=ke(y,x)}),y},l=this.collectedTrainableWeights.map(d=>d.read());return[this.optimizer_.minimize(o,!0,l)].concat(a)}}makeTestFunction(){this.testFunction=e=>ce(()=>{const n=[];let r;const i=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let c=0;c<this.inputs.length;++c)a.push({key:this.inputs[c],value:i[c]});const o=new Lo(a),l=Ld(this.outputs,o);for(let c=0;c<this.lossFunctions.length;++c){const f=this.lossFunctions[c],d=kn(f(s[c],l[c]));c===0?r=d:r=ke(r,d),n.push(r)}for(let c=0;c<this.metricsTensors.length;++c){const f=this.metricsTensors[c][0],d=this.metricsTensors[c][1],p=kn(f(s[d],l[d]));n.push(p)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let i,s,a,o,l,c,f,d,p;try{const g=r.batchSize==null?32:r.batchSize;w2(g);const x=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,g);i=x[0],s=x[1],p=x[2];let b=!1,w;if(r.validationData!=null&&r.validationData.length>0){if(b=!0,r.validationData.length===2)l=r.validationData[0],c=r.validationData[1];else throw r.validationData.length===3?new rt("validationData including sample weights is not supported yet."):new ee(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const R=await this.standardizeUserData(l,c,null,null,!0,g);f=R[0],d=R[1],w=f.concat(d)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){b=!0;const _=Math.floor(i[0].shape[0]*(1-r.validationSplit)),R=i[0].shape[0];f=Nd(i,_,R),a=i,i=Nd(i,0,_),d=Nd(s,_,R),o=s,s=Nd(s,0,_),w=f.concat(d)}else r.validationSteps!=null&&(b=!0);const S=i.concat(s).concat(p);this.checkTrainableWeightsConsistency();const T=this.makeTrainFunction(),k=this.getDedupedMetricsNames();let A,E;b?(this.makeTestFunction(),A=this.testFunction,E=k.slice().concat(k.map(_=>"val_"+_))):(A=null,w=[],E=k.slice());const I=z9(r.callbacks,r.yieldEvery);return await this.fitLoop(T,S,k,g,r.epochs,r.verbose,I,A,w,r.shuffle,E,r.initialEpoch,null,null)}finally{this.isTraining=!1,us(i,e),us(s,n),us(a,e),us(o,n),us(f,l),us(d,c),p!=null&&ft(p)}}async fitLoop(e,n,r,i,s,a,o,l,c,f,d,p,g,y){i==null&&(i=32),s==null&&(s=1),f==null&&(f=!0),p==null&&(p=0);let x=!1;if(l!=null&&c!=null&&(x=!0),y!=null&&(x=!0,g==null))throw new ee("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const b=this.checkNumSamples(n,i,g,"steps_per_epoch");let w;b!=null&&(w=Cs(0,b)),a==null&&(a=1);const{callbackList:S,history:T}=j9(o,a,s,p,b,g,i,x,d);S.setModel(this),this.history=T,await S.onTrainBegin(),this.stopTraining_=!1;for(let k=p;k<s;++k){await S.onEpochBegin(k);const A={};if(g!=null)throw new rt("stepsPerEpoch mode is not implemented yet.");{if(f==="batch")throw new rt("batch shuffling is not implemneted yet");f&&VSe(w);const E=ai(w),I=S2(b,i);for(let N=0;N<I.length;++N){const _={};if(await S.onBatchBegin(N,_),ce(()=>{const R=I[N][0],O=I[N][1],F=oc(E,R,O-R);_.batch=N,_.size=O-R;const z=GE(n,F),W=e(z);for(let P=0;P<r.length;++P){const M=r[P],j=W[P];_[M]=j,Xs(j)}if(N===I.length-1&&x){const P=this.testLoop(l,c,i);for(let M=0;M<r.length;++M){const j=r[M],V=P[M];Xs(V),A["val_"+j]=V}}}),await S.onBatchEnd(N,_),B9(_),this.stopTraining_)break}E.dispose()}if(await S.onEpochEnd(k,A),this.stopTraining_)break}return await S.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return ZOe(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),i=r[0],s=r[1],o=this.makeTrainFunction()(i.concat(s)),l=[];for(const c of o){const f=await c.data();l.push(f[0])}return ft(o),us(r[0],e),us(r[1],n),jr(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,i=r?this.trainableWeights:this.weights,s=this.getWeights(r);for(let a=0;a<i.length;++a)r&&!i[a].trainable||n.push({name:i[a].originalName,tensor:s[a]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=KU().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-KU().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Na(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>Na(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const i of n)if(typeof r[i]=="string")e[i]=Na(r[i]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Na(yv(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Na(yv(e)));{const e={};for(const n in this.metrics)e[n]=Na(yv(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=UE(e.optimizer_config),r=za(n);let i;if(typeof e.loss=="string")i=Wl(e.loss);else if(Array.isArray(e.loss))i=e.loss.map(a=>Wl(a));else if(e.loss!=null){i={};for(const a in e.loss)i[a]=Wl(e.loss[a])}let s;if(Array.isArray(e.metrics))s=e.metrics.map(a=>Wl(a));else if(e.metrics!=null){s={};for(const a in e.metrics)s[a]=Wl(e.metrics[a])}this.compile({loss:i,metrics:s,optimizer:r})}async save(e,n){if(typeof e=="string"){const c=FCe(e);if(c.length===0)throw new ee(`Cannot find any save handlers for URL '${e}'`);if(c.length>1)throw new ee(`Found more than one (${c.length}) save handlers for URL '${e}'`);e=c[0]}if(e.save==null)throw new ee("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await ZU(this.getNamedWeights(n)),o={modelTopology:this.toJSON(null,!1),format:s_e,generatedBy:`TensorFlow.js tfjs-layers v${K9}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){o.trainingConfig=this.getTrainingConfig();const c="optimizer",{data:f,specs:d}=await ZU(await this.optimizer.getWeights(),c);r.specs.push(...d),r.data=PCe([r.data,f])}return this.userDefinedMetadata!=null&&(_W(this.userDefinedMetadata,this.name,!0),o.userDefinedMetadata=this.userDefinedMetadata),o.weightData=r.data,o.weightSpecs=r.specs,e.save(o)}setUserDefinedMetadata(e){_W(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}Qu.className="Model";Te(Qu);class J9 extends Qu{}J9.className="Functional";Te(J9);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Zp extends Qu{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:p1("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new ee(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof Zp||e instanceof Qu;let r;if(n){if(r=e,r.outputs.length!==1)throw new ee("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new ee("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new ee("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const i=oOe({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(i)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new ee(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new ee("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=D9(this.outputs[0])}this.inboundNodes=[],new g1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Cc(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(i=>i.shape),outputShapes:this.outputs[0].shape})}else{const i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(Ct(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Qu({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new Ki("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new Ki("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new Ki("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new Ki("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},i=!1){let s,a={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new ee("Legacy serialization format not supported yet.");s=n}else U(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),s=n.layers,delete n.layers,a=n;const o=new e(a);if(!(o instanceof Zp))throw new rt(`Sequential.fromConfig called on non-Sequential input: ${o}`);for(const l of s){const f=za(l,void 0,i);i&&f.setFastWeightInitDuringBuild(!0),o.add(f)}return o}set stopTraining(e){if(this.model==null)throw new ee("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new ee("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}Zp.className="Sequential";Te(Zp);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let br=class extends rh{getConfig(){return{}}};class e7 extends br{apply(e,n=1){return GNe(e,n)}}e7.className="elu";Te(e7);class t7 extends br{apply(e){return vX(e)}}t7.className="selu";Te(t7);class n7 extends br{apply(e){return Rc(e)}}n7.className="relu";Te(n7);class r7 extends br{apply(e){return ce(()=>Hp(6,Rc(e)))}}r7.className="relu6";Te(r7);class i7 extends br{apply(e){return e}}i7.className="linear";Te(i7);class s7 extends br{apply(e){return eh(e)}}s7.className="sigmoid";Te(s7);class a7 extends br{apply(e){return HNe(e)}}a7.className="hardSigmoid";Te(a7);class o7 extends br{apply(e){return dg(e)}}o7.className="softplus";Te(o7);class l7 extends br{apply(e){return qNe(e)}}l7.className="softsign";Te(l7);class c7 extends br{apply(e){return i1(e)}}c7.className="tanh";Te(c7);let eR=class extends br{apply(e,n=-1){return r_(e,n)}};eR.className="softmax";Te(eR);class u7 extends br{apply(e,n=-1){return uX(e,n)}}u7.className="logSoftmax";Te(u7);class f7 extends br{apply(e){return ce(()=>ce(()=>{const n=Math.sqrt(2),r=ne(.5,ke(1,sX(We(e,n))));return ne(e,r)}))}}f7.className="gelu";Te(f7);class h7 extends br{apply(e){return ce(()=>ne(.5,ne(e,ke(1,i1(ne(yr(We(2,Math.PI)),ke(e,ne(.044715,xc(e,3)))))))))}}h7.className="gelu_new";Te(h7);class d7 extends br{apply(e){return ce(()=>ne(e,i1(dg(e))))}}d7.className="mish";Te(d7);class p7 extends br{apply(e,n=1){return ce(()=>ne(eh(ne(e,n)),e))}}p7.className="swish";Te(p7);function Yo(t){return t.getClassName()}function C2(t,e={}){return xg(t,qi.getMap().classNameMap,e,"activation")}function Zo(t){if(t==null){const e={};return e.className="linear",e.config={},C2(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},C2(e)}else return t instanceof br?t:C2(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function a_e(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class m7 extends rh{}class g7 extends m7{constructor(e){super(),a_e(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return ce(()=>{let n=qn([1]);return this.hasL1&&(n=ke(n,Ue(ne(this.l1,Er(e))))),this.hasL2&&(n=ke(n,Ue(ne(this.l2,Sg(e))))),ie(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}g7.className="L1L2";Te(g7);const LW={l1l2:"L1L2"};function jt(t){return z_(t)}function BW(t,e={}){return xg(t,qi.getMap().classNameMap,e,"regularizer")}function en(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in LW?LW[t]:t,config:{}};return BW(n)}else return t instanceof m7?t:BW(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class y7 extends lt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=Qe(e);let r=Rc(e);return this.maxValue!=null&&(r=ki(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}y7.className="ReLU";Te(y7);class v7 extends lt{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Qe(e);return HO(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}v7.className="LeakyReLU";Te(v7);class b7 extends lt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Jt(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=en(e.alphaRegularizer),this.alphaConstraint=Pn(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new ee(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=Ct(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const i of this.sharedAxes)n[i-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let i=1;i<e.length;++i)r[i]=e[i];this.inputSpec=[new Rn({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=Qe(e),JO(e,this.alpha.read())}getConfig(){const e={alphaInitializer:rn(this.alphaInitializer),alphaRegularizer:jt(this.alphaRegularizer),alphaConstraint:Mn(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}b7.className="PReLU";Te(b7);let x7=class extends lt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new rt(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Qe(e);return o1(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};x7.className="ELU";Te(x7);class w7 extends lt{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=Qe(e);return ne(r,Re($i(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}w7.className="ThresholdedReLU";Te(w7);class S7 extends lt{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new eR().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return ce(()=>{let r=Qe(e);const i=n.mask;if(i!=null){const s=ne(Ke(hl(r.shape),Re(i,r.dtype)),kt(-1e9));r=ke(r,s)}return this.axis instanceof Array?this.axis.length>1?ta(Ke(r,fX(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}S7.className="Softmax";Te(S7);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ju(t,e,n){if(typeof t=="number")return Cc(t,e);if(t.length!==e)throw new ee(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const i=t[r];if(!jNe(i))throw new ee(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${i}`)}return t}function Ss(t,e,n,r,i=1){if(t==null)return t;const s=e+(e-1)*(i-1);let a;return n==="same"?a=t:a=t-s+1,Math.floor((a+r-1)/r)}function Bs(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+Xo([n-e,0]);else if(r==="same")t=t*e;else throw new ee(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function tR(t,e){return ce(()=>(xn(e),e==="channelsFirst"?vt(t,[0,2,3,1]):t))}function C7(t,e){return ce(()=>(xn(e),e==="channelsFirst"?vt(t,[0,2,3,4,1]):t))}function o_e(t,e,n,r=1,i="valid",s,a=1){return ce(()=>{if(s==null&&(s=Ts()),xn(s),t.shape.length!==3)throw new ee(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new ee(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new ee(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(s==="channelsFirst"&&(t=vt(t,[0,2,1])),i==="causal")throw new rt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=eX(t,e,r,i==="same"?"same":"valid","NWC",a);return n!=null&&(o=Es(o,n)),o})}function zW(t,e,n,r=[1,1],i="valid",s,a,o=null){return ce(()=>{if(s==null&&(s=Ts()),xn(s),t.rank!==3&&t.rank!==4)throw new ee(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new ee(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=tR(t,s);if(i==="causal")throw new rt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=g$e({x:l,filter:e,strides:r,pad:i==="same"?"same":"valid",dilations:a,dataFormat:"NHWC",bias:n,activation:o}),s==="channelsFirst"&&(l=vt(l,[0,3,1,2])),l})}function l_e(t,e,n,r=[1,1,1],i="valid",s,a){return ce(()=>{if(s==null&&(s=Ts()),xn(s),t.rank!==4&&t.rank!==5)throw new ee(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new ee(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let o=C7(t,s);if(i==="causal")throw new rt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=dAe(o,e,r,i==="same"?"same":"valid","NDHWC",a),n!=null&&(o=Es(o,n)),s==="channelsFirst"&&(o=vt(o,[0,4,1,2,3])),o})}class b1 extends lt{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",b1.verifyArgs(n),this.rank=e,Kn(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new rt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Ju(n.kernelSize,e,"kernelSize"),this.strides=Ju(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,Ei(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,xn(this.dataFormat),this.activation=Zo(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=Jt(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Pn(n.biasConstraint),this.biasRegularizer=en(n.biasRegularizer),this.activityRegularizer=en(n.activityRegularizer),this.dilationRate=Ju(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new ee(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new ee(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new ee(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(Ls("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!j_(e.kernelSize,"number",1,3))throw new ee(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Yo(this.activation),useBias:this.useBias,biasInitializer:rn(this.biasInitializer),biasRegularizer:jt(this.biasRegularizer),activityRegularizer:jt(this.activityRegularizer),biasConstraint:Mn(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class ih extends b1{constructor(e,n){super(e,n),this.kernel=null,ih.verifyArgs(n),this.filters=n.filters,Kn(this.filters,"filters"),this.kernelInitializer=Jt(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Pn(n.kernelConstraint),this.kernelRegularizer=en(n.kernelRegularizer)}build(e){e=Ct(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ee(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],i=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return ce(()=>{e=Qe(e);let r;const i=this.bias==null?null:this.bias.read(),s=b9(this.activation.getClassName());if(s!=null&&this.rank===2)r=zW(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,s);else{if(this.rank===1)r=o_e(e,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=zW(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=l_e(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new rt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=Ct(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let s=0;s<r.length;++s){const a=Ss(r[s],this.kernelSize[s],this.padding,this.strides[s],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[s]);n.push(a)}let i=[e[0]];return this.dataFormat==="channelsLast"?(i=i.concat(n),i.push(this.filters)):(i.push(this.filters),i=i.concat(n)),i}getConfig(){const e={filters:this.filters,kernelInitializer:rn(this.kernelInitializer),kernelRegularizer:jt(this.kernelRegularizer),kernelConstraint:Mn(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new ee(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class kg extends ih{constructor(e){super(2,e),kg.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!j_(e.kernelSize,"number",1,2))throw new ee(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}kg.className="Conv2D";Te(kg);class $g extends ih{constructor(e){super(3,e),$g.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new ee(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}$g.className="Conv3D";Te($g);class T7 extends kg{constructor(e){if(super(e),this.inputSpec=[new Rn({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new ee(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Ct(e),e.length!==4)throw new ee("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ee("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Rn({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return ce(()=>{let r=Qe(e);if(r.shape.length!==4)throw new ee(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,s=i[0];let a,o;this.dataFormat==="channelsFirst"?(a=2,o=3):(a=1,o=2);const l=i[a],c=i[o],f=this.kernelSize[0],d=this.kernelSize[1],p=this.strides[0],g=this.strides[1],y=Bs(l,p,f,this.padding),x=Bs(c,g,d,this.padding),b=[s,y,x,this.filters];this.dataFormat!=="channelsLast"&&(r=vt(r,[0,2,3,1]));let w=tX(r,this.kernel.read(),b,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(w=vt(w,[0,3,1,2])),this.bias!=null&&(w=Es(w,this.bias.read(),this.dataFormat)),this.activation!=null&&(w=this.activation.apply(w)),w})}computeOutputShape(e){e=Ct(e);const n=e.slice();let r,i,s;this.dataFormat==="channelsFirst"?(r=1,i=2,s=3):(r=3,i=1,s=2);const a=this.kernelSize[0],o=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return n[r]=this.filters,n[i]=Bs(n[i],l,a,this.padding),n[s]=Bs(n[s],c,o,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}T7.className="Conv2DTranspose";Te(T7);class A7 extends $g{constructor(e){if(super(e),this.inputSpec=[new Rn({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new ee(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Ct(e),e.length!==5)throw new ee("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ee("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Rn({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return ce(()=>{let r=Qe(e);if(r.shape.length!==5)throw new ee(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,s=i[0];let a,o,l;this.dataFormat==="channelsFirst"?(l=2,a=3,o=4):(l=1,a=2,o=3);const c=i[l],f=i[a],d=i[o],p=this.kernelSize[0],g=this.kernelSize[1],y=this.kernelSize[2],x=this.strides[0],b=this.strides[1],w=this.strides[2],S=Bs(c,x,p,this.padding),T=Bs(f,b,g,this.padding),k=Bs(d,w,y,this.padding),A=[s,S,T,k,this.filters];this.dataFormat!=="channelsLast"&&(r=vt(r,[0,2,3,4,1]));let E=gAe(r,this.kernel.read(),A,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(E=vt(E,[0,4,1,2,3])),this.bias!==null&&(E=Es(E,this.bias.read(),this.dataFormat)),this.activation!==null&&(E=this.activation.apply(E)),E})}computeOutputShape(e){e=Ct(e);const n=e.slice();let r,i,s,a;this.dataFormat==="channelsFirst"?(r=1,i=2,s=3,a=4):(r=4,i=1,s=2,a=3);const o=this.kernelSize[0],l=this.kernelSize[1],c=this.kernelSize[2],f=this.strides[0],d=this.strides[1],p=this.strides[2];return n[r]=this.filters,n[i]=Bs(n[i],f,o,this.padding),n[s]=Bs(n[s],d,l,this.padding),n[a]=Bs(n[a],p,c,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}A7.className="Conv3DTranspose";Te(A7);class k7 extends ih{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new ee("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new ee("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new ee(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=Jt(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=en(n.depthwiseRegularizer),this.depthwiseConstraint=Pn(n.depthwiseConstraint),this.pointwiseInitializer=Jt(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=en(n.pointwiseRegularizer),this.pointwiseConstraint=Pn(n.pointwiseConstraint)}build(e){if(e=Ct(e),e.length<this.rank+2)throw new ee(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new ee(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],i=this.kernelSize.concat([r,this.depthMultiplier]),s=[];for(let o=0;o<this.rank;++o)s.push(1);s.push(r*this.depthMultiplier,this.filters);const a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",i,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):this.bias=null,this.inputSpec=[new Rn({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return ce(()=>{e=Qe(e);let r;if(this.rank===1)throw new rt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=vt(e,[0,2,3,1])),r=bX(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=Es(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=vt(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=rn(this.depthwiseInitializer),e.pointwiseInitializer=rn(this.pointwiseInitializer),e.depthwiseRegularizer=jt(this.depthwiseRegularizer),e.pointwiseRegularizer=jt(this.pointwiseRegularizer),e.depthwiseConstraint=Mn(this.depthwiseConstraint),e.pointwiseConstraint=Mn(this.pointwiseConstraint),e}}k7.className="SeparableConv";class $7 extends k7{constructor(e){super(2,e)}}$7.className="SeparableConv2D";Te($7);class x1 extends ih{constructor(e){super(1,e),x1.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!j_(e.kernelSize,"number",1,1))throw new ee(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}x1.className="Conv1D";Te(x1);class E7 extends lt{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return ce(()=>{if(e=Qe(e),this.dataFormat==="channelsLast"){const r=gv(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return gv(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=gv(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return gv(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}E7.className="Cropping2D";Te(E7);class I7 extends lt{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,xn(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,LNe(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return ce(()=>{let r=Qe(e);const i=r.shape;if(this.dataFormat==="channelsFirst"){r=vt(r,[0,2,3,1]);const s=this.size[0]*i[2],a=this.size[1]*i[3],o=this.interpolation==="nearest"?Ma.resizeNearestNeighbor(r,[s,a]):Ma.resizeBilinear(r,[s,a]);return vt(o,[0,3,1,2])}else{const s=this.size[0]*i[1],a=this.size[1]*i[2];return this.interpolation==="nearest"?Ma.resizeNearestNeighbor(r,[s,a]):Ma.resizeBilinear(r,[s,a])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}I7.className="UpSampling2D";Te(I7);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function c_e(t,e,n=[1,1],r="valid",i,s){return ce(()=>{i==null&&(i=Ts()),xn(i);let a=tR(t,i);if(t.rank!==4)throw new ee(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new ee(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return a=UO(a,e,n,r==="same"?"same":"valid","NHWC",s),i==="channelsFirst"&&(a=vt(a,[0,3,1,2])),a})}class N7 extends b1{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=Jt(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Pn(e.depthwiseConstraint),this.depthwiseRegularizer=en(e.depthwiseRegularizer)}build(e){if(e=Ct(e),e.length<4)throw new ee(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new ee(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],i=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",i,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return ce(()=>{e=Qe(e);let r=c_e(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=Es(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=Ct(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,s=Ss(n,this.kernelSize[0],this.padding,this.strides[0]),a=Ss(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],i,s,a]:[e[0],s,a,i]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=rn(this.depthwiseInitializer),e.depthwiseRegularizer=jt(this.depthwiseRegularizer),e.depthwiseConstraint=Mn(this.depthwiseRegularizer),e}}N7.className="DepthwiseConv2D";Te(N7);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function O7(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new ee("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function i(s){return s==null||Array.isArray(s)?s:[s]}return e=i(e),n=i(n),{inputs:t,initialState:e,constants:n}}function _7(t,e,n,r=!1,i,s,a=!1,o=!1){return ce(()=>{const l=e.shape.length;if(l<3)throw new ee(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(Cs(2,l));e=vt(e,c),a&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i!=null&&(i=Re(Re(i,"bool"),"float32"),i.rank===l-1&&(i=zr(i,-1)),i=vt(i,c)),r&&(e=wc(e,0),i!=null&&(i=wc(i,0)));const f=[];let d,p=n;const g=e.shape[0],y=Sc(e);let x;i!=null&&(x=Sc(i));for(let w=0;w<g;++w){const S=y[w],T=ce(()=>t(S,p));if(i==null)d=T[0],p=T[1];else{const k=ce(()=>{const A=x[w],E=Ke(es(A),A),I=ke(ne(T[0],A),ne(p[0],E)),N=p.map((_,R)=>ke(ne(T[1][R],A),ne(_,E)));return{output:I,newStates:N}});d=k.output,p=k.newStates}o&&f.push(d)}let b;return o&&(b=Xa(f,1)),[d,b,p]})}class pl extends lt{constructor(e){super(e);let n;if(e.cell==null)throw new ee("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new iR({cells:e.cell}):n=e.cell,n.stateSize==null)throw new ee("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Rn({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Cs(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){zE(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let i;if(this.returnSequences?i=[e[0],e[1],r]:i=[e[0],r],this.returnState){const s=[];for(const a of n)s.push([e[0],a]);return[i].concat(s)}else return i}computeMask(e,n){return ce(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const i=this.states.map(s=>null);return[r].concat(i)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new rt("Constants support is not implemented in RNN yet.");zE(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new Rn({shape:[n,null,...r]});const i=[e[0]].concat(e.slice(2));this.cell.build(i);let s;if(Array.isArray(this.cell.stateSize)?s=this.cell.stateSize:s=[this.cell.stateSize],this.stateSpec!=null){if(!Et(this.stateSpec.map(a=>a.shape[a.shape.length-1]),s))throw new ee(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=s.map(a=>new Rn({shape:[null,a]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){ce(()=>{if(!this.stateful)throw new Fs("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new ee("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>qn([r,i])):this.states_=[qn([r,this.cell.stateSize])];else if(e==null)ft(this.states_),this.keptStates!=null&&(ft(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>qn([r,i])):this.states_[0]=qn([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ee(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):ft(this.states_);for(let i=0;i<this.states_.length;++i){const s=e[i],a=Array.isArray(this.cell.stateSize)?this.cell.stateSize[i]:this.cell.stateSize,o=[r,a];if(!Et(s.shape,o))throw new ee(`State ${i} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${s.shape}`);this.states_[i]=s}}this.states_=this.states_.map(i=>Xs(i.clone()))})}apply(e,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const s=O7(e,r,i,this.numConstants);e=s.inputs,r=s.initialState,i=s.constants;let a=[],o=[];if(r!=null){n.initialState=r,a=a.concat(r),this.stateSpec=[];for(const c of r)this.stateSpec.push(new Rn({shape:c.shape}));o=o.concat(this.stateSpec)}if(i!=null&&(n.constants=i,a=a.concat(i),this.numConstants=i.length),a[0]instanceof ra){const c=[e].concat(a),f=this.inputSpec.concat(o),d=this.inputSpec;this.inputSpec=f;const p=super.apply(c,n);return this.inputSpec=d,p}else return super.apply(e,n)}call(e,n){return ce(()=>{const r=n==null?null:n.mask,i=n==null?null:n.training;let s=n==null?null:n.initialState;e=Qe(e),s==null&&(this.stateful?s=this.states_:s=this.getInitialState(e));const a=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(s.length!==a)throw new ee(`RNN Layer has ${a} state(s) but was passed ${s.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const o={training:i},c=_7((y,x)=>{const b=this.cell.call([y].concat(x),o);return[b[0],b.slice(1)]},e,s,this.goBackwards,r,null,this.unroll,this.returnSequences),f=c[0],d=c[1],p=c[2];this.stateful&&this.resetStates(p,i);const g=this.returnSequences?d:f;return this.returnState?[g].concat(p):g})}getInitialState(e){return ce(()=>{let n=qn(e.shape);return n=Ue(n,[1,2]),n=wg(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?LE(n,[1,r]):n):this.cell.stateSize>1?[LE(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===pl.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const i=n.cell,s=za(i,r);return new e(Object.assign(n,{cell:s}))}}pl.className="RNN";Te(pl);class w1 extends lt{}class nR extends w1{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Kn(this.units,"units"),this.activation=Zo(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Jt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Jt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Jt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=en(e.kernelRegularizer),this.recurrentRegularizer=en(e.recurrentRegularizer),this.biasRegularizer=en(e.biasRegularizer),this.kernelConstraint=Pn(e.kernelConstraint),this.recurrentConstraint=Pn(e.recurrentConstraint),this.biasConstraint=Pn(e.biasConstraint),this.dropout=Nf([1,Xo([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Nf([1,Xo([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Ct(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return ce(()=>{if(e=e,e.length!==2)throw new ee(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const i=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Qo({ones:()=>es(e),rate:this.dropout,training:i,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Qo({ones:()=>es(r),rate:this.recurrentDropout,training:i,dropoutFunc:this.dropoutFunc}));let s;const a=this.dropoutMask,o=this.recurrentDropoutMask;a!=null?s=Qs(ne(e,a),this.kernel.read()):s=Qs(e,this.kernel.read()),this.bias!=null&&(s=Es(s,this.bias.read())),o!=null&&(r=ne(r,o));let l=ke(s,Qs(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Yo(this.activation),useBias:this.useBias,kernelInitializer:rn(this.kernelInitializer),recurrentInitializer:rn(this.recurrentInitializer),biasInitializer:rn(this.biasInitializer),kernelRegularizer:jt(this.kernelRegularizer),recurrentRegularizer:jt(this.recurrentRegularizer),biasRegularizer:jt(this.biasRegularizer),activityRegularizer:jt(this.activityRegularizer),kernelConstraint:Mn(this.kernelConstraint),recurrentConstraint:Mn(this.recurrentConstraint),biasConstraint:Mn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}nR.className="SimpleRNNCell";Te(nR);class R7 extends pl{constructor(e){e.cell=new nR(e),super(e)}call(e,n){return ce(()=>{this.cell.dropoutMask!=null&&(ft(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ft(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,n){return new e(n)}}R7.className="SimpleRNN";Te(R7);class rR extends w1{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new ee("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Kn(this.units,"units"),this.activation=Zo(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Zo(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Jt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Jt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Jt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=en(e.kernelRegularizer),this.recurrentRegularizer=en(e.recurrentRegularizer),this.biasRegularizer=en(e.biasRegularizer),this.kernelConstraint=Pn(e.kernelConstraint),this.recurrentConstraint=Pn(e.recurrentConstraint),this.biasConstraint=Pn(e.biasConstraint),this.dropout=Nf([1,Xo([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Nf([1,Xo([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Ct(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return ce(()=>{if(e=e,e.length!==2)throw new ee(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let i=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Qo({ones:()=>es(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Qo({ones:()=>es(i),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,a=this.recurrentDropoutMask;let o,l,c;0<this.dropout&&this.dropout<1&&(e=ne(e,s[0]));let f=Qs(e,this.kernel.read());this.useBias&&(f=Es(f,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(i=ne(i,a[0]));const d=this.recurrentKernel.read(),[p,g]=Ti(d,[2*this.units,this.units],d.rank-1),y=Qs(i,p),[x,b,w]=Ti(f,3,f.rank-1),[S,T]=Ti(y,2,y.rank-1);o=this.recurrentActivation.apply(ke(x,S)),l=this.recurrentActivation.apply(ke(b,T));const k=Qs(ne(l,i),g);c=this.activation.apply(ke(w,k));const A=ke(ne(o,i),ne(ke(1,yn(o)),c));return[A,A]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Yo(this.activation),recurrentActivation:Yo(this.recurrentActivation),useBias:this.useBias,kernelInitializer:rn(this.kernelInitializer),recurrentInitializer:rn(this.recurrentInitializer),biasInitializer:rn(this.biasInitializer),kernelRegularizer:jt(this.kernelRegularizer),recurrentRegularizer:jt(this.recurrentRegularizer),biasRegularizer:jt(this.biasRegularizer),activityRegularizer:jt(this.activityRegularizer),kernelConstraint:Mn(this.kernelConstraint),recurrentConstraint:Mn(this.recurrentConstraint),biasConstraint:Mn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}rR.className="GRUCell";Te(rR);class D7 extends pl{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new rR(e),super(e)}call(e,n){return ce(()=>{this.cell.dropoutMask!=null&&(ft(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ft(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}D7.className="GRU";Te(D7);class S1 extends w1{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Kn(this.units,"units"),this.activation=Zo(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Zo(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Jt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Jt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Jt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=en(e.kernelRegularizer),this.recurrentRegularizer=en(e.recurrentRegularizer),this.biasRegularizer=en(e.biasRegularizer),this.kernelConstraint=Pn(e.kernelConstraint),this.recurrentConstraint=Pn(e.recurrentConstraint),this.biasConstraint=Pn(e.biasConstraint),this.dropout=Nf([1,Xo([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Nf([1,Xo([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=Ct(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let i;if(this.useBias){if(this.unitForgetBias){const s=this.biasInitializer,a=this.units;i=new(n=class extends rs{apply(l,c){const f=s.apply([a]),d=new U_().apply([a]),p=s.apply([a*2]);return CW(CW(f,d),p)}},n.className="CustomInit",n)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,i,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return ce(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new ee(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let i=e[1];const s=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Qo({ones:()=>es(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Qo({ones:()=>es(i),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,o=this.recurrentDropoutMask;let l,c,f,d;0<this.dropout&&this.dropout<1&&(e=ne(e,a[0]));let p=Qs(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(i=ne(i,o[0])),p=ke(p,Qs(i,this.recurrentKernel.read())),this.useBias&&(p=Es(p,this.bias.read()));const[g,y,x,b]=Ti(p,4,p.rank-1);l=this.recurrentActivation.apply(g),c=this.recurrentActivation.apply(y),f=ke(ne(c,s),ne(l,this.activation.apply(x))),d=this.recurrentActivation.apply(b);const w=ne(d,this.activation.apply(f));return[w,w,f]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Yo(this.activation),recurrentActivation:Yo(this.recurrentActivation),useBias:this.useBias,kernelInitializer:rn(this.kernelInitializer),recurrentInitializer:rn(this.recurrentInitializer),biasInitializer:rn(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:jt(this.kernelRegularizer),recurrentRegularizer:jt(this.recurrentRegularizer),biasRegularizer:jt(this.biasRegularizer),activityRegularizer:jt(this.activityRegularizer),kernelConstraint:Mn(this.kernelConstraint),recurrentConstraint:Mn(this.recurrentConstraint),biasConstraint:Mn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}S1.className="LSTMCell";Te(S1);class M7 extends pl{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new S1(e),super(e)}call(e,n){return ce(()=>{this.cell.dropoutMask!=null&&(ft(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ft(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}M7.className="LSTM";Te(M7);class iR extends w1{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return ce(()=>{e=e;let r=e.slice(1);const i=[];for(const o of this.cells.slice().reverse())Array.isArray(o.stateSize)?i.push(r.splice(0,o.stateSize.length)):i.push(r.splice(0,1));i.reverse();const s=[];let a;for(let o=0;o<this.cells.length;++o){const l=this.cells[o];r=i[o],o===0?a=[e[0]].concat(r):a=[a[0]].concat(r),a=l.call(a,n),s.push(a.slice(1))}r=[];for(const o of s.slice().reverse())r.push(...o);return[a[0]].concat(r)})}build(e){zE(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,i)=>{ac(`RNNCell_${i}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=s=>({className:s.getClassName(),config:s.getConfig()}),i={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),i)}static fromConfig(e,n,r={}){const i=[];for(const s of n.cells)i.push(za(s,r));return new e({cells:i})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return jE(e)}setWeights(e){const n=[];for(const r of this.cells){const i=r.weights.length,s=e.splice(i);for(let a=0;a<r.weights.length;++a)n.push([r.weights[a],s[a]])}Y_(n)}}iR.className="StackedRNNCells";Te(iR);function Qo(t){const{ones:e,rate:n,training:r=!1,count:i=1,dropoutFunc:s}=t,a=()=>s!=null?s(e(),n):k9(e(),n),o=()=>Cg(a,e,r);return!i||i<=1?Xs(o().clone()):Array(i).fill(void 0).map(o).map(c=>Xs(c.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var u_e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class P7 extends pl{constructor(e){if(e.unroll)throw new rt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new rt("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Rn({ndim:5})]}call(e,n){return ce(()=>{if(this.cell.dropoutMask!=null&&(ft(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ft(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new ee("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return ce(()=>{const{stateSize:n}=this.cell,r=e.shape,i=this.computeSingleOutputShape(r),s=[i[0],...i.slice(2)],a=qn(s);return Array.isArray(n)?Array(n.length).fill(a):[a]})}resetStates(e,n=!1){ce(()=>{if(!this.stateful)throw new Fs("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,i=this.computeSingleOutputShape(r),s=[i[0],...i.slice(2)];if(r[0]==null)throw new ee("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>qn(s)):this.states_=[qn(s)];else if(e==null)ft(this.states_),this.keptStates!=null&&(ft(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>qn(s)):this.states_[0]=qn(s);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ee(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):ft(this.states_);for(let o=0;o<this.states_.length;++o){const l=e[o],c=s;if(!Et(l.shape,c))throw new ee(`State ${o} is incompatible with layer ${this.name}: expected shape=${c}, received shape=${l.shape}`);this.states_[o]=l}}this.states_=this.states_.map(o=>Xs(o.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:i,padding:s,strides:a,dilationRate:o}=this.cell,l=n==="channelsFirst",c=e[l?3:2],f=e[l?4:3],d=Ss(c,i[0],s,a[0],o[0]),p=Ss(f,i[1],s,a[1],o[1]);return[...e.slice(0,2),...l?[r,d,p]:[d,p,r]]}}P7.className="ConvRNN2D";class sR extends S1{constructor(e){const{filters:n,kernelSize:r,strides:i,padding:s,dataFormat:a,dilationRate:o}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,Kn(this.filters,"filters"),this.kernelSize=Ju(r,2,"kernelSize"),this.kernelSize.forEach(l=>Kn(l,"kernelSize")),this.strides=Ju(i||1,2,"strides"),this.strides.forEach(l=>Kn(l,"strides")),this.padding=s||"valid",Ei(this.padding),this.dataFormat=a||"channelsLast",xn(this.dataFormat),this.dilationRate=Ju(o||1,2,"dilationRate"),this.dilationRate.forEach(l=>Kn(l,"dilationRate"))}build(e){var n;e=Ct(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new ee(`The channel dimension of the input should be defined. Found ${e[r]}`);const i=e[r],s=4,a=this.kernelSize.concat([i,this.filters*s]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const o=this.kernelSize.concat([this.filters,this.filters*s]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const c=this.biasInitializer,f=this.filters;l=new(n=class extends rs{apply(p,g){const y=c.apply([f]),x=hl([f]),b=c.apply([f*2]);return V_([y,x,b])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*s],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return ce(()=>{if(e.length!==3)throw new ee(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,i=e[0],s=e[1],a=e[2],o=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Qo({ones:()=>es(i),rate:this.dropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,c=(L,G,H)=>!G||!G[H]?L:ne(G[H],L);let f=c(i,l,0),d=c(i,l,1),p=c(i,l,2),g=c(i,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Qo({ones:()=>es(s),rate:this.recurrentDropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const y=this.recurrentDropoutMask;let x=c(s,y,0),b=c(s,y,1),w=c(s,y,2),S=c(s,y,3);const T=3,[k,A,E,I]=Ti(this.kernel.read(),o,T),[N,_,R,O]=this.useBias?Ti(this.bias.read(),o):[null,null,null,null];f=this.inputConv(f,k,N,this.padding),d=this.inputConv(d,A,_,this.padding),p=this.inputConv(p,E,R,this.padding),g=this.inputConv(g,I,O,this.padding);const[F,z,W,P]=Ti(this.recurrentKernel.read(),o,T);x=this.recurrentConv(x,F),b=this.recurrentConv(b,z),w=this.recurrentConv(w,W),S=this.recurrentConv(S,P);const M=this.recurrentActivation.apply(ke(f,x)),j=this.recurrentActivation.apply(ke(d,b)),V=ke(ne(j,a),ne(M,this.activation.apply(ke(p,w)))),q=ne(this.recurrentActivation.apply(ke(g,S)),this.activation.apply(V));return[q,q,V]})}getConfig(){const e=super.getConfig(),{units:n}=e,r=u_e(e,["units"]),i={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},r),i)}inputConv(e,n,r,i){const s=bc(e,n,this.strides,i||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?Es(s,r,this.dataFormat):s}recurrentConv(e,n){return bc(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}sR.className="ConvLSTM2DCell";Te(sR);class F7 extends P7{constructor(e){const n=new sR(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}F7.className="ConvLSTM2D";Te(F7);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class aR extends lt{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let i=0;i<this.noiseShape.length;++i)r.push(this.noiseShape[i]==null?n[i]:this.noiseShape[i]);return r}call(e,n){return ce(()=>{this.invokeCallHook(e,n);const r=Qe(e);if(0<this.rate&&this.rate<1){const i=n.training==null?!1:n.training,s=this.getNoiseShape(r);return Cg(()=>k9(r,this.rate,s,this.seed),()=>r,i)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}aR.className="Dropout";Te(aR);class L7 extends aR{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}L7.className="SpatialDropout1D";Te(L7);class B7 extends lt{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,Kn(this.units,"units"),this.activation=Zo(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=Jt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Jt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Pn(e.kernelConstraint),this.biasConstraint=Pn(e.biasConstraint),this.kernelRegularizer=en(e.kernelRegularizer),this.biasRegularizer=en(e.biasRegularizer),this.activityRegularizer=en(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=Ct(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=Ct(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return ce(()=>{this.invokeCallHook(e,n);const r=Qe(e),i=b9(this.activation.getClassName());let s;return i!=null?s=Qs(r,this.kernel.read(),i,this.bias?this.bias.read():null):(s=Qs(r,this.kernel.read()),this.bias!=null&&(s=Es(s,this.bias.read())),this.activation!=null&&(s=this.activation.apply(s))),s})}getConfig(){const e={units:this.units,activation:Yo(this.activation),useBias:this.useBias,kernelInitializer:rn(this.kernelInitializer),biasInitializer:rn(this.biasInitializer),kernelRegularizer:jt(this.kernelRegularizer),biasRegularizer:jt(this.biasRegularizer),activityRegularizer:jt(this.activityRegularizer),kernelConstraint:Mn(this.kernelConstraint),biasConstraint:Mn(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}B7.className="Dense";Te(B7);class z7 extends lt{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Ct(e);for(const n of e.slice(1))if(n==null)throw new ee(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Go(e,1)]}call(e,n){return ce(()=>{this.invokeCallHook(e,n);let r=Qe(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const i=[0];for(let s=2;s<r.rank;++s)i.push(s);i.push(1),r=vt(r,i)}return WNe(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}z7.className="Flatten";Te(z7);class j7 extends lt{constructor(e){super(e),this.supportsMasking=!0,this.activation=Zo(e.activation)}call(e,n){return ce(()=>{this.invokeCallHook(e,n);const r=Qe(e);return this.activation.apply(r)})}getConfig(){const e={activation:Yo(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}j7.className="Activation";Te(j7);class V7 extends lt{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return ce(()=>(e=Qe(e),VNe(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}V7.className="RepeatVector";Te(V7);class U7 extends lt{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",i=n.slice();let s=1,a=null;for(let l=0;l<i.length;++l){const c=i[l];if(this.isUnknown(c))if(a===null)a=l;else throw new ee("Can only specifiy one unknown dimension.");else s*=c}const o=Go(e);if(a!==null){if(s===0||o%s!==0)throw new ee(r);i[a]=o/s}else if(o!==s)throw new ee(r);return i}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return ce(()=>{this.invokeCallHook(e,n);const r=Qe(e),i=r.shape,s=i.slice(0,1).concat(this.fixUnknownDimension(i.slice(1),this.targetShape));return ie(r,s)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}U7.className="Reshape";Te(U7);class W7 extends lt{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=Cs(1,e.dims.length+1);if(!Et(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Rn({ndim:this.dims.length+1})]}computeOutputShape(e){e=Ct(e);const n=e.slice();return this.dims.forEach((r,i)=>{n[i+1]=e[r]}),n}call(e,n){return vt(Qe(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}W7.className="Permute";Te(W7);class G7 extends lt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=Qe(e);return OE(Yb(r,this.maskValue),-1)}call(e,n){return ce(()=>{this.invokeCallHook(e,n);const r=Qe(e),a=OE(Yb(r,this.maskValue),-1,!0);return ne(r,Re(a,r.dtype))})}}G7.className="Masking";Te(G7);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class q7 extends lt{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(_t(e.inputLength))}this.inputDim=e.inputDim,Kn(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Kn(this.outputDim,"outputDim"),this.embeddingsInitializer=Jt(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=en(e.embeddingsRegularizer),this.activityRegularizer=en(e.activityRegularizer),this.embeddingsConstraint=Pn(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return ce(()=>this.maskZero?(e=Qe(e),Yb(e,bt(e))):null)}computeOutputShape(e){if(e=Ct(e),this.inputLength==null)return[...e,this.outputDim];const n=_t(this.inputLength);if(n.length!==e.length-1)throw new ee(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let i=0;i<n.length;++i){const s=n[i],a=e[i+1];if(s!=null&&a!=null&&s!==a)throw new ee(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);s==null&&(n[r]=a),r++}}return[e[0],...n,this.outputDim]}call(e,n){return ce(()=>{this.invokeCallHook(e,n);let r=Qe(e);r.dtype!=="int32"&&(r=Zs(r,"int32"));const i=A9(this.embeddings.read(),ie(r,[r.size]));return ie(i,Ct(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:rn(this.embeddingsInitializer),embeddingsRegularizer:jt(this.embeddingsRegularizer),activityRegularizer:jt(this.activityRegularizer),embeddingsConstraint:Mn(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}q7.className="Embedding";Te(q7);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Pc extends lt{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new rt}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let i=0;i<n.length;++i){const s=e[e.length-n.length+i],a=n[i];if(s==null||a==null||s<0||a<0)r.push(null);else if(s===1)r.push(a);else if(a===1)r.push(s);else{if(s!==a)throw new ee("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(s)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Ct(e)]),e=e,e.length<2)throw new ee(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const s of e)s!=null&&s[0]!==null&&n.push(s[0]);if(n=Wo(n),n.length>1)throw new ee(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let s=1;s<e.length;++s){const a=e[s]==null?null:e[s].slice(1);r=this.computeElementwiseOpOutputShape(r,a)}const i=e.map(s=>s.length);e.indexOf(null)===-1&&Wo(i).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return ce(()=>{if(e=e,this.reshapeRequired){const r=[],i=e.map(s=>s.rank);if(i.indexOf(null)===-1){const s=Xo(i);for(let a of e){const o=a.rank;for(let l=0;l<s-o;++l)a=wg(a,1);r.push(a)}return this.mergeFunction(r)}else{let s=!1;for(const l of e){const c=l.rank;if(c==null){const f=l.shape,d=f[0],p=f.slice(1).concat([d]);let g=ie(l,[d].concat(Go(f.slice(1))));g=vt(g,[1,0]),g=ie(g,p),r.push(g),s=!0}else if(c>1){const f=Cs(1,c).concat([0]);r.push(vt(l,f)),s=!0}else r.push(l)}let a=this.mergeFunction(r);const o=a.rank;if(s){if(o==null){const l=a.shape,c=l.length,f=l[c-1],d=[f].concat(l.slice(0,l.length-1));a=ie(vt(ie(a,[-1,f]),[1,0]),d)}else if(o>1){const l=[o-1].concat(Cs(0,o-1));a=vt(a,l)}}return a}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let i=1;i<e.length;++i){const s=e[i]==null?null:e[i].slice(1);n=this.computeElementwiseOpOutputShape(n,s)}let r=[];for(const i of e)i!=null&&i[0]!==null&&r.push(i[0]);return r=Wo(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return ce(()=>{if(n==null)return null;if(!Array.isArray(n))throw new ee("`mask` should be an Array");if(!Array.isArray(e))throw new ee("`inputs` should be an Array");if(n.length!==e.length)throw new ee(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(i=>i==null))return null;n=n.map(i=>i==null?i:zr(i,0));let r=n[0];for(let i=1;i<n.length-1;++i)r=Ka(r,n[i]);return r})}}class H7 extends Pc{constructor(e){super(e)}mergeFunction(e){return ce(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=ke(n,e[r]);return n})}}H7.className="Add";Te(H7);class K7 extends Pc{constructor(e){super(e)}mergeFunction(e){return ce(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=ne(n,e[r]);return n})}}K7.className="Multiply";Te(K7);class X7 extends Pc{constructor(e){super(e)}mergeFunction(e){return ce(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=ke(n,e[r]);return ne(1/e.length,n)})}}X7.className="Average";Te(X7);class Y7 extends Pc{constructor(e){super(e)}mergeFunction(e){return ce(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=fl(n,e[r]);return n})}}Y7.className="Maximum";Te(Y7);class Z7 extends Pc{constructor(e){super(e)}mergeFunction(e){return ce(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Hp(n,e[r]);return n})}}Z7.className="Minimum";Te(Z7);class Q7 extends Pc{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new ee("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const i of e)if(i!=null){n=!1;break}if(n)return;const r=[];for(let i=0;i<e.length;++i){const s=e[i].slice();s.splice(this.axis,1);let a=!1;for(const o of r)if(Et(o,s)){a=!0;break}a||r.push(s)}if(r.length>1)throw new ee("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return ce(()=>V_(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new ee("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),i=this.axis<0?r.length+this.axis:this.axis;for(const s of n.slice(1)){if(r[i]==null||s[i]==null){r[i]=null;break}r[i]+=s[i]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new ee("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new ee("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new ee(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return ce(()=>{let r=!0;if(n.forEach(a=>{if(a!=null){r=!1;return}}),r)return null;const i=[];for(let a=0;a<e.length;++a)n[a]==null?i.push(Re(es(e[a]),"bool")):n[a].rank<e[a].rank?i.push(zr(n[a],-1)):i.push(n[a]);const s=Wr(i,this.axis);return JK(s,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}Q7.className="Concatenate";Te(Q7);function Od(t,e){for(;t<0;)t+=e;return t}function f_e(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new rt("batchDot is not implemented for tensors of 4D or higher rank yet");if(U(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),U(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new rt("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,i=e.shape.length;n==null&&(n=[r-1,i-2]);const s=n;return ce(()=>{let a;if(r>i){a=r-i;const l=[];for(let c=0;c<a;++c)l.push(1);e=ie(e,e.shape.concat(l))}else if(i>r){a=i-r;const l=[];for(let c=0;c<a;++c)l.push(1);t=ie(t,t.shape.concat(l))}else a=0;let o;if(t.shape.length===2&&e.shape.length===2)s[0]===s[1]?o=Ue(ne(t,e),s[0]):o=Ue(ne(vt(t,[1,0]),e),s[1]);else{const l=s[0]!==t.shape.length-1,c=s[1]===e.shape.length-1;o=At(t,e,l,c)}if(a>0){let l;r>i?l=r+i-3:l=r-1;const c=[];for(let f=l;f<l+a;++f)c.push(f);o=mg(o,c)}return o.shape.length===1&&(o=zr(o,1)),o})}class J7 extends Pc{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){U(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new rt("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);if(n[i[0]]!==r[i[1]])throw new ee(`Dimension incompatibility: ${n[i[0]]} !== ${r[i[1]]}`)}mergeFunction(e){if(e.length!==2)throw new ee(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],i;return Array.isArray(this.axes)?i=this.axes.map((s,a)=>Od(s,e[a].shape.length)):i=[Od(this.axes,n.shape.length),Od(this.axes,r.shape.length)],this.normalize&&(n=r0(n,i[0]),r=r0(r,i[1])),f_e(n,r,i)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[Od(this.axes,e.length),Od(this.axes,n.length)],r}computeOutputShape(e){U(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new rt("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);n.splice(i[0],1),r.splice(i[1],1),r.splice(0,1);const s=n.concat(r);return s.length===1&&s.push(1),s}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}J7.className="Dot";Te(J7);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class eY extends lt{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return ce(()=>{this.invokeCallHook(e,n);const r=Qe(e);return Cg(()=>ke(m1(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}eY.className="GaussianNoise";Te(eY);class tY extends lt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return ce(()=>{this.invokeCallHook(e,n);const r=Qe(e);return this.rate>0&&this.rate<1?Cg(()=>{const s=Math.sqrt(this.rate/(1-this.rate));return ne(r,m1(r.shape,1,s))},()=>r,n.training||!1):r})}}tY.className="GaussianDropout";Te(tY);class nY extends lt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Qe(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return ce(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return Cg(()=>{const s=Qe(e),o=-1.6732632423543772*1.0507009873554805;let l=_c(pg(r),this.rate);l=Zs(l,"float32");const c=((1-this.rate)*(1+this.rate*o**2))**-.5,f=-c*o*this.rate,d=ke(ne(s,l),ne(ke(l,-1),o));return ke(ne(d,c),f)},()=>Qe(e),n.training||!1)}return e})}}nY.className="AlphaDropout";Te(nY);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Qp(t,e,n,r,i,s=.001){let a;if(t.rank===2)a=UTe(t,e,n,r,i,s);else if(t.rank===3)a=GTe(t,e,n,r,i,s);else if(t.rank===4)a=HTe(t,e,n,r,i,s);else throw new rt(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return a}function h_e(t,e,n,r,i=.001){return ce(()=>{const s=YO(t,r),a=s.mean,o=s.variance;return[Qp(t,a,o,n,e,i),a,o]})}function d_e(t,e,n,r,i=.001){return ce(()=>{const s=YO(t,r),a=s.mean,o=s.variance,l=[];for(const y of Cs(0,t.rank))r.indexOf(y)!==-1?l.push(1):l.push(t.shape[y]);const c=ie(a,l),f=ie(o,l),d=e==null?null:ie(e,l),p=n==null?null:ie(n,l);return[Qp(t,c,f,p,d,i),a,o]})}function p_e(t,e,n,r,i=.001){return Et(r.slice().sort(),Cs(0,t.rank-1))?h_e(t,e,n,r,i):d_e(t,e,n,r,i)}class rY extends lt{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Jt(e.betaInitializer||"zeros"),this.gammaInitializer=Jt(e.gammaInitializer||"ones"),this.movingMeanInitializer=Jt(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Jt(e.movingVarianceInitializer||"ones"),this.betaConstraint=Pn(e.betaConstraint),this.gammaConstraint=Pn(e.gammaConstraint),this.betaRegularizer=en(e.betaRegularizer),this.gammaRegularizer=en(e.gammaRegularizer)}build(e){e=Ct(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new ee(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Rn({ndim:e.length,axes:{[n]:r}})];const i=[r];this.scale&&(this.gamma=this.addWeight("gamma",i,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",i,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",i,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",i,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return ce(()=>{const r=n.training==null?!1:n.training,i=Qe(e),s=i.shape,a=s.length,o=Cs(0,a),l=this.axis>=0?this.axis:this.axis+a;o.splice(l,1);const c=Cc(1,a);c[l]=s[l];const f=o.slice();f.sort();const d=!Et(f,Cs(0,a).slice(0,a-1)),p=()=>{if(d){const S=ie(this.movingMean.read(),c),T=ie(this.movingVariance.read(),c),k=this.center?ie(this.beta.read(),c):null,A=this.scale?ie(this.gamma.read(),c):null;return Qp(i,S,T,k,A,this.epsilon)}else return Qp(i,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return p();const[g,y,x]=p_e(i,this.gamma.read(),this.beta.read(),o,this.epsilon),b=(S,T,k)=>{ce(()=>{const A=1-k,E=S.read(),I=ne(Ke(E,T),A);S.write(Ke(E,I))})};return(()=>{b(this.movingMean,y,this.momentum),b(this.movingVariance,x,this.momentum)})(),g})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:rn(this.betaInitializer),gammaInitializer:rn(this.gammaInitializer),movingMeanInitializer:rn(this.movingMeanInitializer),movingVarianceInitializer:rn(this.movingVarianceInitializer),betaRegularizer:jt(this.betaRegularizer),gammaRegularizer:jt(this.gammaRegularizer),betaConstraint:Mn(this.betaConstraint),gammaConstraint:Mn(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}rY.className="BatchNormalization";Te(rY);class iY extends lt{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Jt(e.betaInitializer||"zeros"),this.gammaInitializer=Jt(e.gammaInitializer||"ones"),this.betaRegularizer=en(e.betaRegularizer),this.gammaRegularizer=en(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=Ct(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let s=0;s<this.axis.length;++s)this.axis[s]<0&&(this.axis[s]+=n);for(const s of this.axis)if(s<0||s>=n)throw new Error(`Invalid axis: ${s}`);if(this.axis.length!==Wo(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(s=>e[s]),i=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,i):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,i):this.beta=null,this.built=!0}call(e,n){const r=Qe(e),i=r.shape,s=i.length;return ce(()=>{let{mean:o,variance:l}=YO(r,this.axis,!0);const c=Cc(1,s);for(const x of this.axis)c[x]=i[x];const f=x=>x!=null&&x.shape.length!==s?ie(x,c):x;let d=this.scale?f(this.gamma.read()):null,p=this.center?f(this.beta.read()):null;const g=[],y=[];for(let x=0;x<s;++x)this.axis.indexOf(x)!==-1?(g.push(i[x]),y.push(1)):(g.push(1),y.push(i[x]));return o=vs(o,g),l=vs(l,g),d!=null&&(d=vs(d,y)),p!=null&&(p=vs(p,y)),Qp(r,o,l,p,d,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:rn(this.betaInitializer),gammaInitializer:rn(this.gammaInitializer),betaRegularizer:jt(this.betaRegularizer),gammaRegularizer:jt(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}iY.className="LayerNormalization";Te(iY);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function m_e(t,e,n){return ce(()=>{if(t.rank!==4)throw new ee(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new ee("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=Ts()),n!=="channelsLast"&&n!=="channelsFirst")throw new ee(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],ZO(t,r)})}class sY extends lt{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?Ts():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new ee(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new ee(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new ee(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new Rn({ndim:4})]}computeOutputShape(e){e=Ct(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return ce(()=>m_e(Qe(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}sY.className="ZeroPadding2D";Te(sY);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function C1(t,e,n,r,i,s){return ce(()=>{xn(i),w9(s),Ei(r),n==null&&(n=[1,1]),r==null&&(r="valid"),i==null&&(i=Ts()),s==null&&(s="max"),t=tR(t,i);let a;const o=r==="same"?"same":"valid";return s==="max"?a=XO(t,e,n,o):a=BO(t,e,n,o),i==="channelsFirst"&&(a=vt(a,[0,3,1,2])),a})}function aY(t,e,n,r,i,s){return ce(()=>{xn(i),w9(s),Ei(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),i==null&&(i=Ts()),s==null&&(s="max"),t=C7(t,i);let a;const o=r==="same"?"same":"valid";return s==="max"?a=Oke(t,e,n,o):a=RTe(t,e,n,o),i==="channelsFirst"&&(a=vt(a,[0,4,1,2,3])),a})}class oY extends lt{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new ee(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(Kn(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new ee(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);Kn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,Ei(this.padding),this.inputSpec=[new Rn({ndim:3})]}computeOutputShape(e){e=Ct(e);const n=Ss(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return ce(()=>{this.invokeCallHook(e,n),e=wg(Qe(e),2);const r=this.poolingFunction(Qe(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return mg(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class lY extends oY{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return xn(s),Ei(i),C1(e,n,r,i,s,"max")}}lY.className="MaxPooling1D";Te(lY);class cY extends oY{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return xn(s),Ei(i),C1(e,n,r,i,s,"avg")}}cY.className="AveragePooling1D";Te(cY);class uY extends lt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new ee(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Kn(this.poolSize,"poolSize"),Kn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,xn(this.dataFormat),Ei(this.padding),this.inputSpec=[new Rn({ndim:4})]}computeOutputShape(e){e=Ct(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=Ss(n,this.poolSize[0],this.padding,this.strides[0]),r=Ss(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return ce(()=>(this.invokeCallHook(e,n),this.poolingFunction(Qe(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class fY extends uY{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return xn(s),Ei(i),C1(e,n,r,i,s,"max")}}fY.className="MaxPooling2D";Te(fY);class hY extends uY{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return xn(s),Ei(i),C1(e,n,r,i,s,"avg")}}hY.className="AveragePooling2D";Te(hY);class dY extends lt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new ee(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Kn(this.poolSize,"poolSize"),Kn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,xn(this.dataFormat),Ei(this.padding),this.inputSpec=[new Rn({ndim:5})]}computeOutputShape(e){e=Ct(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=Ss(n,this.poolSize[0],this.padding,this.strides[0]),r=Ss(r,this.poolSize[1],this.padding,this.strides[1]),i=Ss(i,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,i]:[e[0],n,r,i,e[4]]}call(e,n){return ce(()=>(this.invokeCallHook(e,n),this.poolingFunction(Qe(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class pY extends dY{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return xn(s),Ei(i),aY(e,n,r,i,s,"max")}}pY.className="MaxPooling3D";Te(pY);class mY extends dY{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return xn(s),Ei(i),aY(e,n,r,i,s,"avg")}}mY.className="AveragePooling3D";Te(mY);class gY extends lt{constructor(e){super(e),this.inputSpec=[new Rn({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new rt}}class yY extends gY{constructor(e){super(e||{})}call(e,n){return ce(()=>{const r=Qe(e);return kn(r,1)})}}yY.className="GlobalAveragePooling1D";Te(yY);class vY extends gY{constructor(e){super(e||{})}call(e,n){return ce(()=>{const r=Qe(e);return ws(r,1)})}}vY.className="GlobalMaxPooling1D";Te(vY);class bY extends lt{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,xn(this.dataFormat),this.inputSpec=[new Rn({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new rt}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class xY extends bY{call(e,n){return ce(()=>{const r=Qe(e);return this.dataFormat==="channelsLast"?kn(r,[1,2]):kn(r,[2,3])})}}xY.className="GlobalAveragePooling2D";Te(xY);class wY extends bY{call(e,n){return ce(()=>{const r=Qe(e);return this.dataFormat==="channelsLast"?ws(r,[1,2]):ws(r,[2,3])})}}wY.className="GlobalMaxPooling2D";Te(wY);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class SY extends lt{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const i=n.layer,s=za(i,r);delete n.layer;const a={layer:s};return Object.assign(a,n),new e(a)}}class CY extends SY{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=Ct(e),e.length<3)throw new ee(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=Ct(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),i=e[1];return[r[0],i].concat(r.slice(1))}call(e,n){return ce(()=>(e=Qe(e),_7((a,o)=>[Qe(this.layer.call(a,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}CY.className="TimeDistributed";Te(CY);function g_e(t){Mc(FNe,"BidirectionalMergeMode",t)}const y_e="concat";class TY extends SY{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=za(r),n.goBackwards=n.goBackwards!==!0;const i={};if(i.className=e.layer.getClassName(),i.config=n,this.backwardLayer=za(i),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?y_e:e.mergeMode,g_e(this.mergeMode),e.weights)throw new rt("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,i,s;return this.returnState&&(s=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,i=[r]):this.mergeMode==null?i=[r,r.slice()]:i=[r],this.returnState?this.mergeMode==null?i.concat(s).concat(s.slice()):[r].concat(s).concat(s.slice()):jr(i)}apply(e,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const s=O7(e,r,i,this.numConstants);if(e=s.inputs,r=s.initialState,i=s.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&i==null)return super.apply(e,n);const a=[],o=[];if(r!=null){const c=r.length;if(c%2>0)throw new ee("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,a.push(...r);const f=r.map(d=>new Rn({shape:d.shape}));this.forwardLayer.stateSpec=f.slice(0,c/2),this.backwardLayer.stateSpec=f.slice(c/2),o.push(...f)}if(i!=null)throw new rt("Support for constants in Bidirectional layers is not implemented yet.");const l=a[0]instanceof ra;for(const c of a)if(c instanceof ra!==l)throw new ee("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const c=[e].concat(a),f=this.inputSpec.concat(o),d=this.inputSpec;this.inputSpec=f;const p=super.apply(c,n);return this.inputSpec=d,p}else return super.apply(e,n)}call(e,n){return ce(()=>{const r=n.initialState;let i,s;if(r==null)i=this.forwardLayer.call(e,n),s=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),c=r.slice(r.length/2);i=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),s=this.backwardLayer.call(e,Object.assign(n,{initialState:c}))}let a;this.returnState&&(Array.isArray(i)&&(a=i.slice(1).concat(s.slice(1))),i=i[0],s=s[0]),this.returnSequences&&(s=wc(s,1));let o;return this.mergeMode==="concat"?o=V_([i,s]):this.mergeMode==="sum"?o=ke(i,s):this.mergeMode==="ave"?o=ne(.5,ke(i,s)):this.mergeMode==="mul"?o=ne(i,s):this.mergeMode==null&&(o=[i,s]),this.returnState?this.mergeMode==null?o.concat(a):[o].concat(a):o})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){ac(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),ac(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const s=this.forwardLayer.states.map(a=>null);return Array.isArray(r)?r.concat(s).concat(s):[r].concat(s).concat(s)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=za(n.layer);if(delete n.layer,n.numConstants!=null)throw new rt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const i=n;return i.layer=r,new e(i)}}TY.className="Bidirectional";Te(TY);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class AY extends lt{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return ce(()=>(e=Qe(e),e.dtype!=="float32"&&(e=Zs(e,"float32")),ke(ne(e,this.scale),this.offset)))}}AY.className="Rescaling";Te(AY);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:v_e,cropAndResize:b_e}=Ma;class kY extends lt{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,i,s,a,o,l){return ce(()=>{let c,f=!1;const d=n/a,p=r/o,g=(i+n)/a,y=(s+r)/o,x=[d,p,g,y],b=[];e.rank===3?(f=!0,c=Xa([e])):c=e;for(let A=0;A<c.shape[0];A++)b.push(x);const w=UK(b,[b.length,4]),S=Kp(0,b.length,1,"int32"),k=b_e(c,w,S,[i,s],"nearest");return Zs(f?Qe(Sc(k)):k,l)})}upsize(e,n,r,i){return ce(()=>{const s=v_e(e,[n,r]);return Zs(s,i)})}call(e,n){return ce(()=>{const r=Qe(e),i=r.dtype,s=r.shape,a=s[s.length-3],o=s[s.length-2];let l=0;a!==this.height&&(l=Math.floor((a-this.height)/2));let c=0;return o!==this.width&&(c=Math.floor((o-this.width)/2),c===0&&(c=1)),l>=0&&c>=0?this.centerCrop(r,l,c,this.height,this.width,a,o,i):this.upsize(e,this.height,this.width,i)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Ct(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}kY.className="CenterCrop";Te(kY);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function x_e(t,e,n,r){let i=Qe(t);if(i.dtype!=="int32"&&(i=Zs(i,"int32")),e==="int")return i;const s=i.shape;if(i.rank===0&&(i=zr(i,-1)),e==="oneHot"&&i.shape[i.shape.length-1]!==1&&(i=zr(i,-1)),i.rank>2)throw new ee(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${s} which would result in output rank ${i.rank}.`);const a=["multiHot","oneHot"].includes(e),o=i;let l;if(typeof r<"u"&&e==="count"?l=eW(o,r,n,a):l=eW(o,[],n,a),e!=="tfIdf")return l;if(r)return ne(l,r);throw new ee("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class $Y extends lt{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=Ct(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return ce(()=>{e=Qe(e),e.dtype!=="int32"&&(e=Zs(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new ee(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=Qe(n.countWeights)}const i=ws(e),s=Kb(e),a=$i(this.numTokens,i).bufferSync().get(0),o=_c(s,0).bufferSync().get(0);if(!(a&&o))throw new ee(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return x_e(e,this.outputMode,this.numTokens,r)})}}$Y.className="CategoryEncoding";Te($Y);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const w_e=["bilinear","nearest"],jW=new Set(w_e);class EY extends lt{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(jW.has(e.interpolation))this.interpolation=e.interpolation;else throw new ee(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=Ct(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return ce(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return Ma.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Ma.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...jW]} are supported`)})}}EY.className="Resizing";Te(EY);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class IY{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}IY.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class NY extends lt{constructor(e){super(e),this.randomGenerator=new IY(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}NY.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const S_e=["bilinear","nearest"],VW=new Set(S_e);class OY extends NY{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new ee(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new ee(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new ee(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(VW.has(r))this.interpolation=r;else throw new ee(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Ct(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return ce(()=>{const r=Qe(e);this.imgHeight=r.shape[r.shape.length-3];const i=r.shape[r.shape.length-2];this.widthFactor=pg([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let s=this.widthFactor.dataSync()[0]*i;s=Math.round(s);const a=[this.imgHeight,s];switch(this.interpolation){case"bilinear":return Ma.resizeBilinear(e,a);case"nearest":return Ma.resizeNearestNeighbor(e,a);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...VW]} are supported`)}})}}OY.className="RandomWidth";Te(OY);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C_e=fe();C_e.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var UW;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(UW||(UW={}));var WW;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(WW||(WW={}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var GW;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(GW||(GW={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Me(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&U(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T_e=$X;class T1 extends UN{nextDataId(){return T1.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Z8(this,Ds())}write(e,n,r){this.firstUse&&(this.firstUse=!1,fe().get("IS_NODE")&&Si(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const i={id:this.nextDataId()};return this.data.set(i,{values:e,dtype:r,refCount:1}),i}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&gm(r[0])){const s=r.map(a=>Uo(a));i=this.write(s,e,n)}else i=this.write(r,e,n);return{dataId:i,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,i,s){this.data.set(e,{values:n,dtype:i,refCount:s})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const i=this.readSync(r.real.dataId),s=this.readSync(r.imag.dataId);return Ya(i,s)}return KSe(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(i=>Ko(i));return at(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return at(e.shape,e.dtype,n)}makeOutput(e,n,r){return Ds().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=Br();return e(),{kernelMs:Br()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Me([e],"where");const n=this.readSync(e.dataId);return T_e(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}T1.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Y(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const A_e=t=>{const{x:e}=t.inputs,n=t.backend;Me(e,"abs");let r=new Float32Array(ve(e.shape));const i=n.data.get(e.dataId).values;return r=_Y(i),n.makeOutput(r,e.shape,e.dtype)},k_e={kernelName:tx,backendName:"cpu",kernelFunc:A_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wn(t){return(e,n,r,i,s)=>{const a=nt(e,n),o=a.length,l=je(a),c=ve(a),f=mr(s,c),d=e.length,p=n.length,g=je(e),y=je(n),x=Ef(e,a),b=Ef(n,a);if(x.length+b.length===0)for(let w=0;w<f.length;++w)f[w]=t(r[w%r.length],i[w%i.length]);else for(let w=0;w<f.length;++w){const S=Zf(w,o,l),T=S.slice(-d);x.forEach(I=>T[I]=0);const k=Ks(T,d,g),A=S.slice(-p);b.forEach(I=>A[I]=0);const E=Ks(A,p,y);f[w]=t(r[k],i[E])}return[f,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ri(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,s=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,o=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(o.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",s),imag:n.makeTensorInfo(i.shape,"float32",a)},o}const $_e={kernelName:nO,backendName:"cpu",kernelFunc:ri};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l0(t,e,n="float32"){if(n==="complex64"){const i=l0(t,e,"float32"),s=l0(t,e,"float32");return ri({inputs:{real:i,imag:s},backend:t})}const r=gr(ve(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ia(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const E_e={kernelName:Fm,backendName:"cpu",kernelFunc:ia};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tc(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.real,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}const I_e={kernelName:kO,backendName:"cpu",kernelFunc:Tc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RY(t,e,n,r){if(r==="int32"){const i=Int32Array.from(t);return[e,"int32",i]}if(r==="bool"){const i=Oc([0],n),[s,a]=wn((o,l)=>o!==l?1:0)(e,[],t,i,"bool");return[a,"bool",s]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function Jo(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:s}=r;if(s==="complex64"){if(i.dtype==="complex64")return ia({inputs:{x:i},backend:n});const f=l0(n,i.shape,i.dtype),d=Jo({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),p=ri({inputs:{real:d,imag:f},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),p}if(i.dtype==="complex64"){const f=Tc({inputs:{input:i},backend:n}),d=Jo({inputs:{x:f},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(f),d}if(!eK(i.dtype,s)){const f=ia({inputs:{x:i},backend:n});return{dataId:f.dataId,shape:f.shape,dtype:s}}const a=n.data.get(i.dataId).values,[o,l,c]=RY(a,i.shape,i.dtype,s);return n.makeTensorInfo(o,l,c)}const N_e={kernelName:Tm,backendName:"cpu",kernelFunc:Jo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ln(t,e,n,r){return n==null?({inputs:i,backend:s})=>{const{a,b:o}=i,l=s;Me([a,o],t);const c=l.data.get(a.dataId).values,f=l.data.get(o.dataId).values,d=a.dtype==="string"?Za(c):c,p=a.dtype==="string"?Za(f):f,g=r||a.dtype,[y,x]=e(a.shape,o.shape,d,p,g);return l.makeTensorInfo(x,g,y)}:({inputs:i,backend:s})=>{const{a,b:o}=i,l=s;if(a.dtype==="complex64"||o.dtype==="complex64"){const c=Jo({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),f=l.data.get(c.dataId),d=f.complexTensorInfos.real,p=f.complexTensorInfos.imag,g=l.data.get(d.dataId).values,y=l.data.get(p.dataId).values,x=Jo({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),b=l.data.get(x.dataId),w=b.complexTensorInfos.real,S=b.complexTensorInfos.imag,T=l.data.get(w.dataId).values,k=l.data.get(S.dataId).values,[A,E,I]=n(a.shape,o.shape,g,y,T,k),N=l.makeTensorInfo(I,"float32",A),_=l.makeTensorInfo(I,"float32",E),R=ri({inputs:{real:N,imag:_},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(x),l.disposeIntermediateTensorInfo(N),l.disposeIntermediateTensorInfo(_),R}else{const c=l.data.get(a.dataId).values,f=l.data.get(o.dataId).values,d=r||a.dtype,[p,g]=e(a.shape,o.shape,c,f,d);return l.makeTensorInfo(g,d,p)}}}function oR(t){return(e,n,r,i,s,a)=>{const o=nt(e,n),l=ve(o),c=o.length,f=je(o),d=mr("float32",l),p=mr("float32",l),g=Ef(e,o),y=Ef(n,o),x=Ya(r,i),b=Ya(s,a),w=e.length,S=je(e),T=n.length,k=je(n);if(g.length+y.length===0)for(let A=0;A<d.length;A++){const E=A%x.length,I=A%b.length,N=t(x[E*2],x[E*2+1],b[I*2],b[I*2+1]);d[A]=N.real,p[A]=N.imag}else for(let A=0;A<d.length;A++){const E=Zf(A,c,f),I=E.slice(-w);g.forEach(F=>I[F]=0);const N=Ks(I,w,S),_=E.slice(-T);y.forEach(F=>_[F]=0);const R=Ks(_,T,k),O=t(x[N*2],x[N*2+1],b[R*2],b[R*2+1]);d[A]=O.real,p[A]=O.imag}return[d,p,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DY=wn((t,e)=>t+e),O_e=oR((t,e,n,r)=>({real:t+n,imag:e+r})),Of=Ln(Qf,DY,O_e),__e={kernelName:Qf,backendName:"cpu",kernelFunc:Of};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lR(t,e,n,r,i){const s=ve(r),a=gr(i,n);for(let o=0;o<t.length;o++){const l=t[o];if(l<0)throw new Error("Input x must be non-negative!");l>=i||(s>0?a[l]+=e[o]:a[l]+=1)}return a}function MY(t,e,n,r=!1){const i=t.shape[0],s=t.shape[1],a=at([i,n],e.dtype);for(let o=0;o<i;o++)for(let l=0;l<s;l++){const c=t.get(o,l);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?a.set(1,o,c):e.size>0?a.set(a.get(o,c)+e.get(o,l),o,c):a.set(a.get(o,c)+1,o,c))}return a}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PY=wn((t,e)=>t&e),R_e=Ln(tO,PY),D_e={kernelName:tO,backendName:"cpu",kernelFunc:R_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aa(t){return(e,n,r)=>{const i=gn(n,e.length);for(let s=0;s<e.length;++s)i[s]=t(e[s],r);return i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rt(t,e,n){const r=aa(e);return ml(t,r,n)}function ml(t,e,n){return({inputs:r,attrs:i,backend:s})=>{const{x:a}=r;Me(a,t);const o=s,l=o.data.get(a.dataId).values;let c;if(a.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=Za(l)}else c=l;const f=n||a.dtype,d=e(c,f,i);return o.makeTensorInfo(a.shape,f,d)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FY=aa(t=>Math.ceil(t)),M_e=ml(Am,FY),P_e={kernelName:Am,backendName:"cpu",kernelFunc:M_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LY(t,e,n,r){const i=gn(n,ve(e));if(r&&n!=="string"){let s=0;t.forEach(a=>{const o=ve(a.shape);i.set(a.vals,s),s+=o})}else{let s=0;t.forEach(a=>{const o=n==="string"?Za(a.vals):a.vals;let l=0;for(let c=0;c<a.shape[0];++c){const f=c*e[1]+s;for(let d=0;d<a.shape[1];++d)i[f+d]=o[l++]}s+=a.shape[1]})}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BY=wn((t,e)=>t===e?1:0),zY=Ln(gx,BY,null,"bool"),F_e={kernelName:gx,backendName:"cpu",kernelFunc:zY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jY=aa(t=>Math.exp(t)),VY=ml(_m,jY,"float32"),L_e={kernelName:_m,backendName:"cpu",kernelFunc:VY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UY=aa(t=>Math.expm1(t)),B_e=ml(Rm,UY),z_e={kernelName:Rm,backendName:"cpu",kernelFunc:B_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WY=aa(t=>Math.floor(t)),j_e=ml(Dm,WY),V_e={kernelName:Dm,backendName:"cpu",kernelFunc:j_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GY=wn((t,e)=>Math.floor(t/e)),U_e=Ln(Mm,GY,null,"int32"),W_e={kernelName:Mm,backendName:"cpu",kernelFunc:U_e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qY(t,e,n,r,i,s,a,o,l){const c=at([r,s],n);for(let f=0;f<r;f++){const d=[];let p=0;for(let g=0;g<i;g++){const y=t[f*i+g];p+=y*a[g],d.push(y)}if(p<0||p>=l/s)throw new Error(`Invalid indices: ${d} does not index into ${o}`);for(let g=0;g<s;g++)c.values[f*s+g]=e.get(...e.indexToLoc(p*s+g))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HY(t,e,n){const r=at(n,t.dtype);for(let i=0;i<r.size;++i){const a=r.indexToLoc(i).slice(),o=a[0],l=a[2],c=e.locToIndex([o,l]);a[2]=e.values[c];const f=t.locToIndex(a);0<=f&&f<t.values.length&&(r.values[i]=t.values[f])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KY=wn((t,e)=>t>e?1:0),G_e=Ln(xx,KY,null,"bool"),q_e={kernelName:xx,backendName:"cpu",kernelFunc:G_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XY=wn((t,e)=>t>=e?1:0),H_e=Ln(Pm,XY,null,"bool"),K_e={kernelName:Pm,backendName:"cpu",kernelFunc:H_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YY=wn((t,e)=>t<e?1:0),X_e=Ln(Sx,YY,null,"bool"),Y_e={kernelName:Sx,backendName:"cpu",kernelFunc:X_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZY=wn((t,e)=>t<=e?1:0),Z_e=Ln(Cx,ZY,null,"bool"),Q_e={kernelName:Cx,backendName:"cpu",kernelFunc:Z_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QY(t,e,n){const r=(e-t)/(n-1),i=gr(n,"float32");i[0]=t;for(let s=1;s<i.length;s++)i[s]=i[s-1]+r;return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JY=aa(t=>Math.log(t)),J_e=ml(jm,JY),eRe={kernelName:jm,backendName:"cpu",kernelFunc:J_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eZ(t,e,n,r){const i=mr(r,ve(n));for(let s=0;s<i.length;++s){const a=s*e;let o=t[a];for(let l=0;l<e;++l){const c=t[a+l];(Number.isNaN(c)||c>o)&&(o=c)}i[s]=o}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tZ=wn((t,e)=>Math.max(t,e)),tRe=Ln(Um,tZ),nRe={kernelName:Um,backendName:"cpu",kernelFunc:tRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nZ=wn((t,e)=>Math.min(t,e)),rRe=Ln(Wm,nZ),iRe={kernelName:Wm,backendName:"cpu",kernelFunc:rRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cR=wn((t,e)=>t*e),sRe=oR((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),A1=Ln(qm,cR,sRe),aRe={kernelName:qm,backendName:"cpu",kernelFunc:A1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rZ(t,e,n){const r=ll(-1,n);return cR([],e,r,t,n)}function oRe(t){const{inputs:e,backend:n}=t,{x:r}=e;Me(r,"neg");const i=n.data.get(r.dataId).values,[s,a]=rZ(i,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,s)}const lRe={kernelName:Dx,backendName:"cpu",kernelFunc:oRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iZ=wn((t,e)=>t!==e?1:0),cRe=Ln(Mx,iZ,null,"bool"),uRe={kernelName:Mx,backendName:"cpu",kernelFunc:cRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uR(t,e,n,r,i){const s=e.length,a=ve(e),o=je(e),l=je(i),c=mr(n,ve(i));for(let f=0;f<a;++f){const d=Zf(f,s,o),p=new Array(d.length);for(let y=0;y<p.length;y++)p[y]=d[r[y]];const g=Ks(p,s,l);c[g]=t[f]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qr(t){const{inputs:e,attrs:n,backend:r}=t,{x:i}=e,{perm:s}=n;Me(i,"transpose");const a=i.shape.length,o=new Array(a);for(let d=0;d<o.length;d++)o[d]=i.shape[s[d]];const l=r.data.get(i.dataId).values,c=uR(l,i.shape,i.dtype,s,o);return{dataId:r.write(c,o,i.dtype),shape:o,dtype:i.dtype}}const fRe={kernelName:Yu,backendName:"cpu",kernelFunc:qr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sZ(t,e,n,r){const[i,s]=Yn(t,r),a=oi(e,"int32"),o=gr(ve(i),a),l=ve(s);for(let c=0;c<o.length;++c){const f=c*l;let d=1;for(let p=0;p<l;++p)d*=n[f+p];o[c]=d}return{outVals:o,outShape:i,outDtype:a}}function hRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r;Me(i,"prod");const o=i.shape.length,l=ot(s,i.shape),c=sn(l,o);let f=l,d=i;const p=[];c!=null&&(d=qr({inputs:{x:i},backend:n,attrs:{perm:c}}),p.push(d),f=bn(f.length,o));const g=n.data.get(d.dataId).values,{outVals:y,outShape:x,outDtype:b}=sZ(d.shape,d.dtype,g,f);let w=x;return a&&(w=$n(x,l)),p.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.makeTensorInfo(w,b,y)}const dRe={kernelName:jx,backendName:"cpu",kernelFunc:hRe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pRe(t,e,n){t.forEach((r,i)=>{if(r<0||r>=n){const s=Zf(i,e.length,je(e)).join(",");throw new Error(`indices[${s}] = ${r} is not in [0, ${n})`)}})}function mRe(t,e){for(let n=0;n<t.length;++n){const r=t[n],i=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let s=1;s<r.length;++s)if(r[s-1]>r[s])throw new Error("Ragged splits must be sorted in ascending order")}}function gRe(t,e,n,r){const i=[];let s=0;const a=e.length-1+n.length,o=new Array(a).fill(null).map(()=>[0]);mRe(n,r);let l=1;for(let c=0;c<e.length-1;++c){l*=e[c];const f=e[c+1];for(let d=1;d<l+1;++d)o[c].push(d*f)}for(let c=0;c<t.length;++c){let f=t[c],d=t[c]+1;for(let p=0;p<n.length;++p){const g=n[p],y=p+e.length-1;if(y>=0){const x=o[y],b=x[x.length-1]-g[f];for(let w=f;w<d;++w)o[y].push(g[w+1]+b)}f=g[f],d=g[d]}d!==f&&(i.push([f,d]),s+=d-f)}return{outSplits:o,valueSlices:i,numValues:s}}function yRe(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,i=gn("int32",r);e.push(i),t[n].forEach((s,a)=>i[a]=s)}return e}function qW(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function vRe(t,e,n,r,i,s){const a=qW(e,2)[1],o=qW(s,2)[1];let l=0;for(const c of n)for(let f=c[0];f<c[1];++f){for(let d=0;d<r;++d)i[l*o+d]=t[f*a+d];++l}}function bRe(t,e,n,r,i){const s=e.slice();s[0]=i;const a=gn(n,ve(s)),o=t.length,l=o===0?0:o/e[0];return vRe(t,e,r,l,a,s),[a,s]}function aZ(t,e,n,r,i,s,a,o){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(pRe(s,a,l),r.length===0)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:f,valueSlices:d,numValues:p}=gRe(s,a,t,c),g=yRe(f),y=bRe(n,r,i,d,p);return[g,y[0],y[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HW=2147483647;function oZ(t,e,n,r,i,s,a){if(e.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(a.length>1)throw new Error("deltas must be a scalar or vector");const o=e.length===0,l=i.length===0,c=a.length===0,f=[];o||f.push(e[0]),l||f.push(i[0]),c||f.push(a[0]);for(let b=1;b<f.length;++b)if(f[b]!==f[b-1])throw new Error("starts, limits, and deltas must have the same shape");const d=f.length===0?1:f[0],p=gn("int32",d+1);p[0]=0;for(let b=0;b<d;++b){const w=o?t[0]:t[b],S=l?r[0]:r[b],T=c?s[0]:s[b];if(T===0)throw new Error("Requires delta != 0");let k;if(T>0&&S<w||T<0&&S>w)k=0;else if(k=Math.ceil(Math.abs((S-w)/T)),k>HW)throw new Error(`Requires ((limit - start) / delta) <= ${HW}`);p[b+1]=p[b]+k}const g=p[d],y=gn(n,g);let x=0;for(let b=0;b<d;++b){const w=p[b+1]-p[b];let S=o?t[0]:t[b];const T=c?s[0]:s[b];for(let k=0;k<w;++k)y[x++]=S,S+=T}return[p,y]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Vi=ms;class c0{constructor(e,n,r,i,s,a,o,l,c,f){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=i,this.valuesDType=s,this.defaultValue=a,this.defaultValueShape=o,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=qX(f),this.raggedRank=HX(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Vi.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Vi.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Vi.VALUE_ROWIDS:return c0.getMaxWidthValueRowID(n);case Vi.ROW_SPLITS:return c0.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${Vi[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let i=0;i<n-1;++i){const s=e[i+1]-e[i];s>r&&(r=s)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,i=e[0],s=0;for(let a=1;a<n;++a){const o=e[a];o!==i&&(i=o,s=Math.max(a-r,s),r=a)}return Math.max(n-r,s)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return XW(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;KX(r,n);const i=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=GX(this.raggedRank,i,n);a[0]<0&&(a[0]=e);for(let o=1;o<=this.raggedRank;++o)a[o]<0&&(a[o]=this.getMaxWidth(o));return a}calculateFirstParentOutputIndex(e,n,r){const i=Math.min(e,r),s=[];let a=0;for(let o=0;o<i;++o,a+=n)s.push(a);for(let o=i;o<e;++o)s.push(-1);return U(s.length===e,()=>"Final length of result must be equal to firstDimension."),s}calculateOutputIndexRowSplit(e,n,r,i){const s=e.length,a=[];for(let o=0;o<s-1;++o){const l=e[o+1]-e[o];let c=Math.min(i,l),f=n[o];f===-1&&(c=0);for(let d=0;d<c;++d)a.push(f),f+=r;for(let d=0;d<l-c;++d)a.push(-1)}if(s>0&&a.length!==e[s-1])throw new Error("Invalid row split size.");return a}calculateOutputIndexValueRowID(e,n,r,i){const s=e.length,a=[];if(s===0)return[];let o=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let c=n[l];a.push(c);for(let f=1;f<s;++f){const d=e[f];if(d===l)c>=0&&(++o,o<i?c+=r:c=-1);else{if(o=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);c=n[d]}a.push(c)}if(a.length!==e.length)throw new Error("Invalid row ids.");return a}calculateOutputIndex(e,n,r,i){const s=this.getRowPartitionTensor(e),a=this.getRowPartitionTypeByDimension(e);switch(a){case Vi.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(s,n,r,i);case Vi.ROW_SPLITS:if(s.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${s.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(s,n,r,i);default:throw new Error(`Unsupported partition type: ${Vi[a]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case Vi.FIRST_DIM_SIZE:return e[0];case Vi.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Vi.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Vi[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),i=new Array(this.raggedRank+1);i[i.length-1]=1;for(let l=i.length-2;l>=0;--l)i[l]=i[l+1]*r[l+1];const s=XW(r,!1),a=gn(this.valuesDType,ve(s));if(i[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,i[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,i[c],r[c]);this.setOutput(this.raggedRank,l,a,s)}return[s,a]}setOutput(e,n,r,i){if(r.length===0)return;const s=this.values,a=r;let o=i.slice();o=o.slice(e+1);const l=ve(o),c=n.length;let f=this.defaultValue;if(f.length!==l&&f.length!==1){const y=this.defaultValueShape;ce(()=>{const x=ie(f,y);f=Qd(x,o).dataSync()})}let d=0,p=0,g=0;for(let y=0;y<=c;++y){let x=y<c?n[y]:-1;if(x===g){++g;continue}if(p<g){const b=s.subarray(d*l),w=a.subarray(p*l),S=(g-p)*l;KW(w,b,S)}if(y>=c){const b=r.length;x=Math.floor(b/l)}if(x>g)if(this.defaultValue.length===1)a.subarray(g*l,x*l).fill(this.defaultValue[0]),g=x;else for(;x>g;){const b=a.slice(g*l);KW(b,f,l),++g}x<0?(d=y+1,p=g):(d=y,p=g,g=p+1)}}}function KW(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function XW(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function lZ(t,e,n,r,i,s,a,o,l,c){return new c0(t,e,n,r,i,s,a,o,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cZ(t,e,n,r){const i=t===e,s=t<e&&n<0,a=e<t&&n>1;if(i||s||a)return gr(0,r);const o=Math.abs(Math.ceil((e-t)/n)),l=gr(o,r);e<t&&n===1&&(n=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uZ=aa(t=>1/Math.sqrt(t)),xRe=ml(Qm,uZ),wRe={kernelName:Qm,backendName:"cpu",kernelFunc:xRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ec(t,e,n,r,i,s,a,o,l,c){const f=[r/i,i],d=t.values,p=e.values;if(r===0)return at(n,e.dtype);const g=l instanceof rr?l:at(f,e.dtype);typeof l=="string"||typeof l=="number"?g.values.fill(l):typeof l=="boolean"&&g.values.fill(+l);for(let y=0;y<s;y++){const x=[];let b=0;for(let w=0;w<a;w++){const S=d[y*a+w];x.push(S),b+=S*o[w]}if(b<0||b>=r/i)throw new Error(`Invalid indices: ${x} does not index into ${n}`);for(let w=0;w<i;w++)c?g.values[b*i+w]+=p[y*i+w]:g.values[b*i+w]=e.rank===0?p[0]:p[y*i+w]}return g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SRe=aa(t=>1/(1+Math.exp(-t))),fZ=Rt(rg,t=>1/(1+Math.exp(-t))),CRe={kernelName:rg,backendName:"cpu",kernelFunc:fZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hZ(t,e,n,r,i){const s=y_(r,e,n),a=ve(n),o=je(r);if(s){const d=v_(e,o);return i==="string"?t.slice(d,d+a):t.subarray(d,d+a)}const l=i==="string"?Za(t):t,c=at(r,i,l),f=at(n,i);for(let d=0;d<f.size;++d){const p=f.indexToLoc(d),g=p.map((y,x)=>y+e[x]);f.set(c.get(...g),...p)}return i==="string"?p9(f.values):f.values}function Ac(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,size:a}=r;Me(i,"slice");const[o,l]=u1(i,s,a);m_(i,o,l);const c=n.data.get(i.dataId).values,f=hZ(c,o,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,f)}const TRe={kernelName:Hx,backendName:"cpu",kernelFunc:Ac};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dZ(t,e,n,r,i,s,a){const o=e[0],l=s[0],c=new Array(l),f=new Array(o),d=e[1];if(l===0){if(o!==0)throw new Error(t9(o));const b=gn(n,0),w=gn(i,0);return[b,[0,d],w,c,f]}let p=!0,g=0;const y=new Array(l).fill(0);for(let b=0;b<o;++b){const w=t[b*d];if(w<0)throw new Error(n9(b,w));if(w>=l)throw new Error(r9(b,w,l));++y[w],p=p&&w>=g,g=w}let x=!0;for(let b=0;b<l;++b){const w=y[b]===0;c[b]=w,x=x&&!w,y[b]=Math.max(y[b],1),b>0&&(y[b]+=y[b-1])}if(x&&p){const b=t,w=r;for(let S=0;S<o;++S)f[S]=S;return[b,[o,d],w,c,f]}else{const b=y[l-1],w=gn(n,b*d),S=gn(i,b),T=new Array(l).fill(0);for(let k=0;k<o;++k){const A=t[k*d],E=T[A],I=(A===0?0:y[A-1])+E;T[A]++;for(let N=0;N<d;++N)w[I*d+N]=t[k*d+N];S[I]=r[k],f[k]=I}for(let k=0;k<l;++k)if(T[k]===0){const E=k===0?0:y[k-1];w[E*d+0]=k;for(let I=1;I<d;++I)w[E*d+I]=0;S[E]=a}return[w,[b,d],S,c,f]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pZ(t,e,n,r,i){const s=ve(r),a=e[0],o=i.length,l=[];let c=1,f=-1;for(let b=0;b<o;++b){const w=i[b];if(w===-1){if(f!==-1)throw new Error(i9(f,b));f=b,l.push(1)}else{if(w<0)throw new Error(s9(b,w));c*=w,l.push(w)}}if(f!==-1){if(c<=0)throw new Error(a9());const b=Math.trunc(s/c);if(c*b!==s)throw new Error(o9(r,l));l[f]=b}if(ve(l)!==s)throw new Error(l9(r,l));const p=r.length,g=[];if(p>0){g[p-1]=1;for(let b=p-2;b>=0;--b)g[b]=g[b+1]*r[b+1]}const y=[];if(o>0){y[o-1]=1;for(let b=o-2;b>=0;--b)y[b]=y[b+1]*l[b+1]}const x=gn(n,a*o);for(let b=0;b<a;++b){let w=0;for(let S=0;S<p;++S)w+=t[b*p+S]*g[S];for(let S=0;S<o;++S)x[b*o+S]=Math.trunc(w/y[S]),w%=y[S]}return[x,[a,o],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fR(t,e,n,r,i,s=!1,a=0){const o=r.length,l=[e[0],t.length/e[0]],c=l[1],d=o>0?i[o-1]+1:0;if(d<0)throw new Error(PE());const p=e.slice();p[0]=d;const g=p.reduce((T,k)=>T*k,1),y=gn(n,g);if(o===0)return d>0&&y.fill(a),[y,p];if(d<=0)throw new Error(PE());let x=0,b=1,w=0,S=i[x];for(;;){let T=0;if(b<o){if(T=i[b],S===T){++b;continue}if(S>=T)throw new Error(c9())}if(S<0||S>=d)throw new Error(u9(S,d));S>w&&y.fill(a,w*c,S*c);for(let k=x;k<b;++k){const A=r[k];if(A<0||A>=l[0])throw new Error(f9(k,r[k],l[0]));for(let E=0;E<c;E++)y[S*c+E]+=t[A*c+E]}if(s)for(let k=0;k<c;k++)y[S*c+k]/=b-x;if(x=b,++b,w=S+1,S=T,b>o)break}return w<d&&y.fill(a,w*c,d*c),[y,p]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ARe=aa(t=>Math.sqrt(t)),kRe=Rt(sg,t=>Math.sqrt(t)),$Re={kernelName:sg,backendName:"cpu",kernelFunc:kRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mZ=wn((t,e)=>{const n=t-e;return n*n}),ERe=Ln(ag,mZ),IRe={kernelName:ag,backendName:"cpu",kernelFunc:ERe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gZ=aa((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:i}=e;return t.replace(new RegExp(n,r?"g":""),i)}),NRe=ml(NO,gZ),ORe={kernelName:NO,backendName:"cpu",kernelFunc:NRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yZ(t,e,n,r){const i=at(t,e.dtype);for(let s=0;s<i.size;s++){const a=i.indexToLoc(s),o=new Array(a.length);for(let l=0;l<o.length;l++)o[l]=a[l]*n[l]+r[l];i.set(e.get(...o),...a)}return i}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Re{constructor(e,n,r,i,s,a){this.separator=Uo(e),this.nGramWidths=n,this.leftPad=Uo(r),this.rightPad=Uo(i),this.padWidth=s,this.preserveShort=a}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,i,s,a){for(let o=0;o<s;++o){const l=this.getPadWidth(a),c=Math.max(0,l-o),f=Math.max(0,l-(s-(o+1))),d=a-(c+f),p=n+(c>0?0:o-l);let g=0;g+=c*this.leftPad.length;for(let S=0;S<d;++S)g+=e[p+S].length;g+=f*this.rightPad.length;const y=c+f+d-1;g+=y*this.separator.length,r[i+o]=new Uint8Array(g);const x=r[i+o];let b=0;const w=S=>S.forEach(T=>x[b++]=T);for(let S=0;S<c;++S)w(this.leftPad),w(this.separator);for(let S=0;S<d-1;++S)w(e[p+S]),w(this.separator);if(d>0){w(e[p+d-1]);for(let S=0;S<f;++S)w(this.separator),w(this.rightPad)}else{for(let S=0;S<f-1;++S)w(this.rightPad),w(this.separator);w(this.rightPad)}}}compute(e,n){const r=e.length,i=n.length;if(i>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<i;++c){let f=n[c]>=l;if(f=f&&n[c]<=r,!f)throw new Error(`Invalid split value ${n[c]}, must be in [${l}, ${r}]`);l=n[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const s=i-1,a=gn("int32",i);if(r===0||i===0){const l=new Array(r);for(let c=0;c<=s;++c)a[c]=0;return[l,a]}a[0]=0;for(let l=1;l<=s;++l){const c=n[l]-n[l-1];let f=0;this.nGramWidths.forEach(d=>{f+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&f===0&&(f=1),a[l]=a[l-1]+f}const o=new Array(a[s]);for(let l=0;l<s;++l){const c=n[l];let f=a[l];if(this.nGramWidths.forEach(d=>{const p=n[l+1]-n[l],g=this.getNumNGrams(p,d);this.createNGrams(e,c,o,f,g,d),f+=g}),this.preserveShort&&f===a[l]){const d=n[l+1]-n[l];if(d===0)continue;const p=d+2*this.padWidth;this.createNGrams(e,c,o,f,1,p)}}return[o,a]}}function vZ(t,e,n,r,i,s,a,o){return new _Re(n,r,i,s,a,o).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RRe(t,e,n,r){if(!t.length)return;if(e.length===0){for(let s=0;s<t.length;++s)r.push(t.subarray(s,s+1));return}if(e.length===1){const s=e[0];let a=t.indexOf(s);for(;a!==-1;){const o=t.subarray(0,a);(!n||o.length!==0)&&r.push(o),t=t.subarray(a+1),a=t.indexOf(s)}(!n||t.length!==0)&&r.push(t);return}let i=0;for(let s=0;s<t.length+1;s++)if(s===t.length||e.indexOf(t[s])!==-1){const a=t.subarray(i,s);(!n||a.length!==0)&&r.push(a),i=s+1}}function bZ(t,e,n){const r=t.length,i=[];let s=0,a=0;const o=new Array(r);for(let p=0;p<r;++p){const g=i.length;RRe(t[p],e,n,i);const y=i.length-g;o[p]=y,s+=y,a=Math.max(a,y)}const l=gn("int32",s*2),c=new Array(s),f=[r,a];let d=0;for(let p=0;p<r;++p)for(let g=0;g<o[p];++g)l[d*2]=p,l[d*2+1]=g,c[d]=i[d],++d;return[l,c,f]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xZ(t,e){const n=gn("int32",t.length);for(let r=0;r<t.length;++r)n[r]=dCe(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wZ=wn((t,e)=>t-e),DRe=oR((t,e,n,r)=>({real:t-n,imag:e-r})),hR=Ln(og,wZ,DRe),MRe={kernelName:og,backendName:"cpu",kernelFunc:hR};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SZ(t,e){const n=new Array(t.rank);for(let i=0;i<n.length;i++)n[i]=t.shape[i]*e[i];const r=at(n,t.dtype);for(let i=0;i<r.values.length;++i){const s=r.indexToLoc(i),a=new Array(t.rank);for(let l=0;l<a.length;l++)a[l]=s[l]%t.shape[l];const o=t.locToIndex(a);r.values[i]=t.values[o]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bd=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function CZ(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const o=r-n+1,l=e-n+1,c=Math.log(o),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(o-f)/o)*Math.sign(l-o/2),p=Math.max(n,Math.floor(e-l*f/o+d)),g=Math.min(r,Math.floor(e+(o-l)*f/o+d));CZ(t,e,p,g)}const i=t[e];let s=n,a=r;for(Du(t,n,e),Bd(t[r],i)>0&&Du(t,n,r);s<a;){for(Du(t,s,a),s++,a--;Bd(t[s],i)<0;)s=s+1;for(;Bd(t[a],i)>0;)a=a-1}Bd(t[n],i)===0?Du(t,n,a):(a=a+1,Du(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}}function TZ(t,e,n,r,i){const s=e[e.length-1],[a,o]=[t.length/s,s],l=mr(n,a*r),c=mr("int32",a*r);for(let d=0;d<a;d++){const p=d*o,g=t.subarray(p,p+o);let y=new Array(g.length);g.forEach((S,T)=>y[T]={value:S,index:T}),r<y.length&&(CZ(y,r),y=y.slice(0,r)),i&&y.sort(Bd);const x=d*r,b=l.subarray(x,x+r),w=c.subarray(x,x+r);for(let S=0;S<r;S++)b[S]=y[S].value,w[S]=y[S].index}const f=e.slice();return f[f.length-1]=r,[at(f,n,l),at(f,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AZ(t,e,n,r){const i=ot(e,n)[0],s=[1,n[0],1];for(let y=0;y<i;y++)s[0]*=n[y];s[1]=n[i];for(let y=i+1;y<n.length;y++)s[2]*=n[y];const a=new Map,o=new Int32Array(n[i]),l=new rr(s,r,t),c=[],f=s[0]===1&&s[2]===1;for(let y=0;y<n[i];y++){let x;if(f)x=t[y].toString();else{const w=[];for(let S=0;S<s[0];S++)for(let T=0;T<s[2];T++)w.push(l.get(S,y,T));x=w.join(",")}const b=a.get(x);if(b!=null)o[y]=b;else{const w=a.size;a.set(x,w),o[y]=w,c.push(y)}}const d=s.slice();d[1]=a.size;const p=new rr(d,r);c.forEach((y,x)=>{for(let b=0;b<s[0];b++)for(let w=0;w<s[2];w++)p.set(l.get(b,y,w),b,x,w)});const g=n.slice();return g[i]=d[1],{outputValues:p.values,outputShape:g,indices:o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PRe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:DY,bincountImpl:lR,bincountReduceImpl:MY,bitwiseAndImpl:PY,castImpl:RY,ceilImpl:FY,concatImpl:LY,equalImpl:BY,expImpl:jY,expm1Impl:UY,floorDivImpl:GY,floorImpl:WY,gatherNdImpl:qY,gatherV2Impl:HY,greaterEqualImpl:XY,greaterImpl:KY,lessEqualImpl:ZY,lessImpl:YY,linSpaceImpl:QY,logImpl:JY,maxImpl:eZ,maximumImpl:tZ,minimumImpl:nZ,multiplyImpl:cR,negImpl:rZ,notEqualImpl:iZ,prodImpl:sZ,raggedGatherImpl:aZ,raggedRangeImpl:oZ,raggedTensorToTensorImpl:lZ,rangeImpl:cZ,rsqrtImpl:uZ,scatterImpl:ec,sigmoidImpl:SRe,simpleAbsImpl:_Y,sliceImpl:hZ,sparseFillEmptyRowsImpl:dZ,sparseReshapeImpl:pZ,sparseSegmentReductionImpl:fR,sqrtImpl:ARe,squaredDifferenceImpl:mZ,staticRegexReplaceImpl:gZ,stridedSliceImpl:yZ,stringNGramsImpl:vZ,stringSplitImpl:bZ,stringToHashBucketFastImpl:xZ,subImpl:wZ,tileImpl:SZ,topKImpl:TZ,transposeImpl:uR,uniqueImpl:AZ},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */WK("cpu",()=>new T1,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kZ=Rt(Nm,t=>t>=0?t:Math.exp(t)-1),FRe={kernelName:Nm,backendName:"cpu",kernelFunc:kZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Z(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:s}=r;Me([i],"leakyRelu");const a=ve(i.shape),o=n.data.get(i.dataId).values,l=mr("float32",a);for(let c=0;c<o.length;c++)l[c]=o[c]<0?s*o[c]:o[c];return n.makeTensorInfo(i.shape,"float32",l)}const LRe={kernelName:wx,backendName:"cpu",kernelFunc:$Z};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BRe=wn((t,e)=>t<0?e*t:t);function EZ(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e;Me([r,i],"prelu");const s=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,[o,l]=BRe(r.shape,i.shape,s,a,"float32");return n.makeTensorInfo(l,"float32",o)}const zRe={kernelName:zx,backendName:"cpu",kernelFunc:EZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IZ=Rt(Xm,t=>Math.max(0,t)),jRe={kernelName:Xm,backendName:"cpu",kernelFunc:IZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NZ=Rt(Ym,t=>Math.min(Math.max(0,t),6)),VRe={kernelName:Ym,backendName:"cpu",kernelFunc:NZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u0(t,e,n,r,i){if(n==="linear")return ia({inputs:{x:e},backend:t});if(n==="relu")return IZ({inputs:{x:e},backend:t});if(n==="elu")return kZ({inputs:{x:e},backend:t});if(n==="relu6")return NZ({inputs:{x:e},backend:t});if(n==="prelu")return EZ({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return $Z({inputs:{x:e},backend:t,attrs:{alpha:i}});if(n==="sigmoid")return fZ({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ht(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:s}=r,a=ve(i.shape),o=J8(s,a),l=ve(o);U(a===l,()=>`The new shape (${o}) has ${l} elements and the old shape (${i.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`),n.incRef(i.dataId);const c=n.data.get(i.dataId);if(c.complexTensorInfos!=null){const f=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;f.shape=o,d.shape=o}return{dataId:i.dataId,shape:o,dtype:i.dtype}}const URe={kernelName:Vx,backendName:"cpu",kernelFunc:Ht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OZ(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s}=e,{transposeA:a,transposeB:o}=r;Me([i,s],"matMul");const l=i.shape.length,c=s.shape.length,f=a?i.shape[l-2]:i.shape[l-1],d=o?s.shape[c-1]:s.shape[c-2],p=a?i.shape[l-1]:i.shape[l-2],g=o?s.shape[c-2]:s.shape[c-1],y=i.shape.slice(0,-2),x=s.shape.slice(0,-2),b=ve(y),w=ve(x),T=nt(i.shape.slice(0,-2),s.shape.slice(0,-2)).concat([p,g]);U(f===d,()=>`Error in matMul: inner shapes (${f}) and (${d}) of Tensors with shapes ${i.shape} and ${s.shape} and transposeA=${a} and transposeB=${o} must match.`);const k=a?[b,f,p]:[b,p,f],A=o?[w,g,d]:[w,d,g],E=Ht({inputs:{x:i},backend:n,attrs:{shape:k}}),I=Ht({inputs:{x:s},backend:n,attrs:{shape:A}}),N=a?E.shape[1]:E.shape[2],_=a?E.shape[2]:E.shape[1],R=o?I.shape[1]:I.shape[2],O=Math.max(b,w),F=n.data.get(E.dataId).values,z=n.data.get(I.dataId).values,W=je(E.shape),P=je(I.shape),[M,j,V]=a?[W[0],1,W[1]]:[W[0],W[1],1],[q,L,G]=o?[1,P[1],P[0]]:[P[1],1,P[0]],H=_*R,K=at([O,_,R],E.dtype),oe=K.values,pe=n.blockSize;for(let be=0;be<O;be++){const Ae=be%b,$e=be%w;for(let ge=0;ge<_;ge+=pe){const Ee=Math.min(ge+pe,_);for(let Ie=0;Ie<R;Ie+=pe){const ye=Math.min(Ie+pe,R);for(let Ge=0;Ge<N;Ge+=pe){const ze=Math.min(Ge+pe,N);for(let Je=ge;Je<Ee;Je++)for(let qe=Ie;qe<ye;qe++){let Xe=0;for(let gt=Ge;gt<ze;gt++){const Bn=F[Ae*M+Je*j+gt*V],Kt=z[gt*q+qe*L+$e*G];Xe+=Bn*Kt}oe[be*H+(Je*R+qe)]+=Xe}}}}}return n.disposeIntermediateTensorInfo(E),n.disposeIntermediateTensorInfo(I),n.makeTensorInfo(T,K.dtype,K.values)}const WRe={kernelName:ax,backendName:"cpu",kernelFunc:OZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GRe(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s,bias:a,preluActivationWeights:o}=e,{transposeA:l,transposeB:c,activation:f,leakyreluAlpha:d}=r;let p,g,y;const x=[];p=OZ({inputs:{a:i,b:s},attrs:{transposeA:l,transposeB:c},backend:n}),a&&(g=Of({inputs:{a:p,b:a},backend:n}),x.push(p),p=g),f&&(y=u0(n,p,f,o,d),x.push(p),p=y);for(const w of x)n.disposeIntermediateTensorInfo(w);return p}const qRe={kernelName:Wb,backendName:"cpu",kernelFunc:GRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HRe=Rt(ym,t=>Math.acos(t)),KRe={kernelName:ym,backendName:"cpu",kernelFunc:HRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XRe=Rt(vm,t=>Math.acosh(t)),YRe={kernelName:vm,backendName:"cpu",kernelFunc:XRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZRe(t){const{inputs:e,backend:n}=t,r=e;Me(e,"addN");const i=r.map(o=>n.data.get(o.dataId).values),s=at(r[0].shape,r[0].dtype),a=s.values;for(let o=0;o<r.length;o++){const l=i[o];for(let c=0;c<a.length;c++)a[c]+=l[c]}return n.makeTensorInfo(s.shape,s.dtype,s.values)}const QRe={kernelName:XN,backendName:"cpu",kernelFunc:ZRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r;Me(i,"all");const o=ot(s,i.shape);let l=o;const c=sn(l,i.shape.length);let f=i;c!=null&&(f=qr({inputs:{x:i},backend:n,attrs:{perm:c}}),l=bn(l.length,i.shape.length)),ar("all",l,f.shape.length);const[d,p]=Yn(f.shape,l),g=ve(p),y=gr(ve(d),f.dtype),x=n.data.get(f.dataId).values;for(let w=0;w<y.length;++w){const S=w*g;let T=x[S];for(let k=0;k<g;++k){const A=x[S+k];T=T&&A}y[w]=T}c!=null&&n.disposeIntermediateTensorInfo(f);const b=n.makeTensorInfo(d,f.dtype,y);if(a){const w=$n(d,o),S=Ht({inputs:{x:b},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(b),S}return b}const eDe={kernelName:YN,backendName:"cpu",kernelFunc:JRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r;Me(i,"any");const o=ot(s,i.shape);let l=o;const c=sn(l,i.shape.length);let f=i;c!=null&&(f=qr({inputs:{x:i},backend:n,attrs:{perm:c}}),l=bn(l.length,i.shape.length)),ar("any",l,f.shape.length);const[d,p]=Yn(f.shape,l),g=ve(p),y=gr(ve(d),f.dtype),x=n.data.get(f.dataId).values;for(let w=0;w<y.length;++w){const S=w*g;let T=x[S];for(let k=0;k<g;++k){const A=x[S+k];T=T||A}y[w]=T}c!=null&&n.disposeIntermediateTensorInfo(f);const b=n.makeTensorInfo(d,f.dtype,y);if(a){const w=$n(d,o),S=Ht({inputs:{x:b},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(b),S}return b}const nDe={kernelName:ZN,backendName:"cpu",kernelFunc:tDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;Me(i,"argMax");let a=ot(s,i.shape);const o=sn(a,i.shape.length);let l=i;const c=[];o!=null&&(l=qr({inputs:{x:i},backend:n,attrs:{perm:o}}),c.push(l),a=bn(a.length,l.shape.length)),a=[a[0]],ar("argMax",a,l.shape.length);const[f,d]=Yn(l.shape,a),p=ve(f),g=gr(p,"int32"),y=ve(d),x=n.data.get(l.dataId).values;for(let b=0;b<g.length;++b){const w=b*y;let S=x[w],T=0;for(let k=0;k<y;++k){const A=x[w+k];A>S&&(S=A,T=k)}g[b]=T}return c.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(f,"int32",g)}const iDe={kernelName:nx,backendName:"cpu",kernelFunc:rDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;Me(i,"argMin");let a=ot(s,i.shape);const o=sn(a,i.shape.length);let l=i;const c=[];o!=null&&(l=qr({inputs:{x:i},backend:n,attrs:{perm:o}}),c.push(l),a=bn(a.length,l.shape.length)),a=[a[0]],ar("argMin",a,l.shape.length);const[f,d]=Yn(l.shape,a),p=ve(f),g=gr(p,"int32"),y=ve(d),x=n.data.get(l.dataId).values;for(let b=0;b<g.length;++b){const w=b*y;let S=x[w],T=0;for(let k=0;k<y;++k){const A=x[w+k];A<S&&(S=A,T=k)}g[b]=T}return c.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(f,"int32",g)}const aDe={kernelName:rx,backendName:"cpu",kernelFunc:sDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oDe=Rt(bm,t=>Math.asin(t)),lDe={kernelName:bm,backendName:"cpu",kernelFunc:oDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cDe=Rt(xm,t=>Math.asinh(t)),uDe={kernelName:xm,backendName:"cpu",kernelFunc:cDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fDe=Rt(wm,t=>Math.atan(t)),hDe={kernelName:wm,backendName:"cpu",kernelFunc:fDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dDe=wn((t,e)=>Math.atan2(t,e)),pDe=Ln(Cm,dDe),mDe={kernelName:Cm,backendName:"cpu",kernelFunc:pDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gDe=Rt(Sm,t=>Math.atanh(t)),yDe={kernelName:Sm,backendName:"cpu",kernelFunc:gDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dR(t,e,n,r,i,s){const a=i.strideHeight,o=i.strideWidth,l=i.dilationHeight,c=i.dilationWidth,f=i.effectiveFilterHeight,d=i.effectiveFilterWidth,p=i.padInfo.top,g=i.padInfo.left,y=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=at(i.outShape,n),b=x.values,w=i.outShape[1]*i.outShape[2]*i.outShape[3],S=i.outShape[2]*i.outShape[3],T=i.outShape[3];for(let k=0;k<i.batchSize;++k){const A=k*w,E=k*r[0];for(let I=0;I<i.inChannels;++I)for(let N=0;N<i.outHeight;++N){const _=N*a-p,R=Math.max(0,_),O=Math.min(i.inHeight,f+_),F=A+N*S;for(let z=0;z<i.outWidth;++z){const W=z*o-g,P=Math.max(0,W),M=Math.min(i.inWidth,d+W);let j=y,V=0,q=0;for(let G=R;G<O;G+=l){const H=E+G*r[1];for(let K=P;K<M;K+=c){const oe=H+K*r[2],pe=t[oe+I];s==="max"&&pe>j?j=pe:s==="avg"&&(V+=pe,q++)}if(isNaN(j))break}const L=F+z*T+I;b[L]=s==="avg"?V/q:j}}}return x}function _Z(t,e,n,r,i=!1,s=!1){const a=at(r.outShape,"int32"),o=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,f=r.dilationWidth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,g=r.padInfo.top,y=r.padInfo.left,x=at(e,n,t);for(let b=0;b<r.batchSize;++b)for(let w=0;w<r.inChannels;++w)for(let S=0;S<r.outHeight;++S){const T=S*o-g;let k=T;for(;k<0;)k+=c;const A=Math.min(r.inHeight,d+T);for(let E=0;E<r.outWidth;++E){const I=E*l-y;let N=I;for(;N<0;)N+=f;const _=Math.min(r.inWidth,p+I);let R=Number.NEGATIVE_INFINITY,O=-1;for(let F=k;F<A;F+=c){const z=F-T;for(let W=N;W<_;W+=f){const P=W-I,M=x.get(b,F,W,w);M>R&&(R=M,i?O=s?((b*r.inHeight+F)*r.inWidth+W)*r.inChannels+w:(F*r.inWidth+W)*r.inChannels+w:O=z*p+P)}}a.set(O,b,S,E,w)}}return a}function RZ(t,e,n,r,i,s){const a=i.strideDepth,o=i.strideHeight,l=i.strideWidth,c=i.dilationDepth,f=i.dilationHeight,d=i.dilationWidth,p=i.effectiveFilterDepth,g=i.effectiveFilterHeight,y=i.effectiveFilterWidth,x=i.padInfo.front,b=i.padInfo.top,w=i.padInfo.left,S=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,T=at(i.outShape,n),k=T.values,A=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],E=i.outShape[2]*i.outShape[3]*i.outShape[4],I=i.outShape[3]*i.outShape[4],N=i.outShape[4];for(let _=0;_<i.batchSize;++_){const R=_*A,O=_*r[0];for(let F=0;F<i.inChannels;++F)for(let z=0;z<i.outDepth;++z){const W=z*a-x;let P=W;for(;P<0;)P+=c;const M=Math.min(i.inDepth,p+W),j=R+z*E;for(let V=0;V<i.outHeight;++V){const q=V*o-b;let L=q;for(;L<0;)L+=f;const G=Math.min(i.inHeight,g+q),H=j+V*I;for(let K=0;K<i.outWidth;++K){const oe=K*l-w;let pe=oe;for(;pe<0;)pe+=d;const be=Math.min(i.inWidth,y+oe),Ae=H+K*N;let $e=S,ge=0,Ee=0;for(let ye=P;ye<M;ye+=c){const Ge=O+ye*r[1];for(let ze=L;ze<G;ze+=f){const Je=Ge+ze*r[2];for(let qe=pe;qe<be;qe+=d){const Xe=Je+qe*r[3],gt=t[Xe+F];if(s==="max"&&gt>$e?$e=gt:s==="avg"&&(ge+=gt,Ee++),isNaN($e))break}if(isNaN($e))break}if(isNaN($e))break}const Ie=Ae+F;k[Ie]=s==="avg"?ge/Math.max(Ee,1):$e}}}}return T}function vDe(t,e){const n=at(e.outShape,"int32"),r=e.strideDepth,i=e.strideHeight,s=e.strideWidth,a=e.dilationDepth,o=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,f=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=e.padInfo.front,g=e.padInfo.top,y=e.padInfo.left;for(let x=0;x<e.batchSize;++x)for(let b=0;b<e.inChannels;++b)for(let w=0;w<e.outDepth;++w){const S=w*r-p;let T=S;for(;T<0;)T+=a;const k=Math.min(e.inDepth,c+S);for(let A=0;A<e.outHeight;++A){const E=A*i-g;let I=E;for(;I<0;)I+=o;const N=Math.min(e.inHeight,f+E);for(let _=0;_<e.outWidth;++_){const R=_*s-y;let O=R;for(;O<0;)O+=l;const F=Math.min(e.inWidth,d+R);let z=Number.NEGATIVE_INFINITY,W=-1;for(let P=T;P<k;P+=a){const M=P-S;for(let j=I;j<N;j+=o){const V=j-E;for(let q=O;q<F;q+=l){const L=q-R,G=t.get(x,P,j,q,b);G>=z&&(z=G,W=M*f*d+V*f+L)}}}n.set(W,x,w,A,_,b)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;Me(i,"avgPool");const{filterSize:s,strides:a,pad:o,dimRoundingMode:l}=r,c=1;U(vr(a,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const f=ns(i.shape,s,a,c,o,l);let d;if(f.filterWidth===1&&f.filterHeight===1&&Et(f.inShape,f.outShape))d=ia({inputs:{x:i},backend:n});else{const p=n.data.get(i.dataId).values,g=je(i.shape),y=dR(p,i.shape,i.dtype,g,f,"avg");d=n.makeTensorInfo(f.outShape,i.dtype,y.values)}return d}const xDe={kernelName:ix,backendName:"cpu",kernelFunc:bDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:a,pad:o,dimRoundingMode:l,dataFormat:c}=r;Me(i,"avgPool3d");const f=no(i.shape,s,a,1,o,l,c),d=n.data.get(i.dataId).values,p=RZ(d,i.shape,i.dtype,je(i.shape),f,"avg");return n.makeTensorInfo(p.shape,"float32",p.values)}const SDe={kernelName:sx,backendName:"cpu",kernelFunc:wDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CDe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,{filterSize:a,strides:o,pad:l,dimRoundingMode:c}=r;Me([i,s],"avgPool3DGrad");const f=no(s.shape,a,o,1,l,c),d=f.strideDepth,p=f.strideHeight,g=f.strideWidth,y=f.filterDepth,x=f.filterHeight,b=f.filterWidth,w=f.dilationDepth,S=f.dilationHeight,T=f.dilationWidth,k=f.effectiveFilterDepth,A=f.effectiveFilterHeight,E=f.effectiveFilterWidth,I=k-1-f.padInfo.front,N=E-1-f.padInfo.left,_=A-1-f.padInfo.top,R=at(s.shape,"float32"),O=1/(y*x*b),F=n.bufferSync(i);for(let z=0;z<f.batchSize;++z)for(let W=0;W<f.inChannels;++W)for(let P=0;P<f.inDepth;++P)for(let M=0;M<f.inHeight;++M)for(let j=0;j<f.inWidth;++j){const V=P-I,q=M-_,L=j-N;let G=0;for(let H=0;H<k;H+=w){const K=(V+H)/d;if(!(K<0||K>=f.outDepth||Math.floor(K)!==K))for(let oe=0;oe<A;oe+=S){const pe=(q+oe)/p;if(!(pe<0||pe>=f.outHeight||Math.floor(pe)!==pe))for(let be=0;be<E;be+=T){const Ae=(L+be)/g;if(Ae<0||Ae>=f.outWidth||Math.floor(Ae)!==Ae)continue;const $e=F.get(z,K,pe,Ae,W);G+=$e}}}R.set(G*O,z,P,M,j,W)}return n.makeTensorInfo(R.shape,R.dtype,R.values)}const TDe={kernelName:JN,backendName:"cpu",kernelFunc:CDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ADe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,a=s;Me([i,s],"avgPoolGrad");const{filterSize:o,strides:l,pad:c}=r,f=ns(a.shape,o,l,1,c),d=f.strideHeight,p=f.strideWidth,g=f.filterHeight,y=f.filterWidth,x=f.dilationHeight,b=f.dilationWidth,w=f.effectiveFilterHeight,S=f.effectiveFilterWidth,T=S-1-f.padInfo.left,k=w-1-f.padInfo.top,A=at(a.shape,"float32"),E=1/(g*y),I=n.data.get(i.dataId).values,N=at(i.shape,"float32",I);for(let _=0;_<f.batchSize;++_)for(let R=0;R<f.inChannels;++R)for(let O=0;O<f.inHeight;++O)for(let F=0;F<f.inWidth;++F){const z=O-k,W=F-T;let P=0;for(let M=0;M<w;M+=x){const j=(z+M)/d;if(!(j<0||j>=f.outHeight||Math.floor(j)!==j))for(let V=0;V<S;V+=b){const q=(W+V)/p;if(q<0||q>=f.outWidth||Math.floor(q)!==q)continue;const L=N.get(_,j,q,R);P+=L}}A.set(P*E,_,O,F,R)}return n.makeTensorInfo(A.shape,A.dtype,A.values)}const kDe={kernelName:QN,backendName:"cpu",kernelFunc:ADe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $De(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,scale:s,offset:a,mean:o,variance:l}=e;U(o.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),U(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),U(s==null||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Me([i,o,l,s,a],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);const f=n.data.get(i.dataId).values,d=n.data.get(o.dataId).values,p=n.data.get(l.dataId).values,g=s?n.data.get(s.dataId).values:new Float32Array([1]),y=a?n.data.get(a.dataId).values:new Float32Array([0]),x=new Float32Array(f.length),b=y.length,w=g.length,S=p.length,T=d.length;let k=0,A=0,E=0,I=0;for(let N=0;N<f.length;++N)x[N]=y[k++]+(f[N]-d[A++])*g[E++]/Math.sqrt(p[I++]+c),k>=b&&(k=0),A>=T&&(A=0),E>=w&&(E=0),I>=S&&(I=0);return n.makeTensorInfo(i.shape,i.dtype,x)}const EDe={kernelName:vx,backendName:"cpu",kernelFunc:$De};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,crops:a}=r;Me([i],"batchToSpaceND");const o=s.reduce((w,S)=>w*S),l=yg(i.shape,s,o),c=vg(l.length,s.length),f=bg(i.shape,s,o),d=C_(a,s.length),p=T_(f,a,s.length),g=Ht({inputs:{x:i},backend:n,attrs:{shape:l}}),y=qr({inputs:{x:g},backend:n,attrs:{perm:c}}),x=Ht({inputs:{x:y},backend:n,attrs:{shape:f}}),b=Ac({inputs:{x},backend:n,attrs:{begin:d,size:p}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),b}const NDe={kernelName:ox,backendName:"cpu",kernelFunc:IDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ODe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:a}=r,o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,c=lR(o,l,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,c)}const _De={kernelName:eO,backendName:"cpu",kernelFunc:ODe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RDe(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,s=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,o=nt(Array.from(s),Array.from(a));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const DDe={kernelName:sK,backendName:"cpu",kernelFunc:RDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MDe=Rt(km,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),PDe={kernelName:km,backendName:"cpu",kernelFunc:MDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FDe=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(ve(e.shape)),i=n.data.get(e.dataId),s=i.complexTensorInfos.real,a=i.complexTensorInfos.imag,o=n.data.get(s.dataId).values,l=n.data.get(a.dataId).values;for(let c=0;c<o.length;c++){const f=o[c],d=l[c];r[c]=Math.hypot(f,d)}return n.makeOutput(r,e.shape,"float32")},LDe={kernelName:lx,backendName:"cpu",kernelFunc:FDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _f(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.imag,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}const BDe={kernelName:vO,backendName:"cpu",kernelFunc:_f};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rf(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,s=ot(i,e[0].shape)[0],a=e.map(x=>x.shape);x_(a,s);let o=Ys(e.map(x=>x.shape),s);if(ve(o)===0)return n.makeTensorInfo(o,e[0].dtype,[]);const l=e.filter(x=>ve(x.shape)>0);if(l.length===1)return ia({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const x=l.map(k=>Tc({inputs:{input:k},backend:n})),b=l.map(k=>_f({inputs:{input:k},backend:n})),w=Rf({inputs:x,backend:n,attrs:{axis:s}}),S=Rf({inputs:b,backend:n,attrs:{axis:s}}),T=ri({inputs:{real:w,imag:S},backend:n});return x.forEach(k=>n.disposeIntermediateTensorInfo(k)),b.forEach(k=>n.disposeIntermediateTensorInfo(k)),n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(S),T}const c=l.map(x=>{const w=[-1,ve(x.shape.slice(s))];return Ht({inputs:{x},backend:n,attrs:{shape:w}})}),f=c.map(x=>({vals:n.data.get(x.dataId).values,shape:x.shape}));o=Ys(c.map(x=>x.shape),1);const d=c[0].shape[0]===1,p=LY(f,o,e[0].dtype,d),g=Ys(l.map(x=>x.shape),s),y=n.makeTensorInfo(g,e[0].dtype,p);return c.forEach(x=>n.disposeIntermediateTensorInfo(x)),y}const zDe={kernelName:cx,backendName:"cpu",kernelFunc:Rf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DZ(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:a,pad:o,dataFormat:l,dilations:c,dimRoundingMode:f}=r;Me([i,s],"conv2d");const d=ro(l),p=sr(i.shape,s.shape,a,c,o,f,!1,d),g=p.filterHeight,y=p.filterWidth,x=p.dilationHeight,b=p.dilationWidth,w=p.padInfo.left,S=p.padInfo.top,T=p.dataFormat==="channelsLast",k=new rr(p.outShape,i.dtype),A=je(i.shape),E=je(s.shape),I=A[0],N=T?A[1]:A[2],_=T?A[2]:1,R=T?1:A[1],O=k.strides[0],F=T?k.strides[1]:k.strides[2],z=T?k.strides[2]:1,W=T?1:k.strides[1],P=n.data.get(i.dataId).values,M=n.data.get(s.dataId).values,j=k.values;for(let V=0;V<p.batchSize;++V){const q=V*I,L=V*O;for(let G=0;G<p.outHeight;++G){const H=L+G*F,K=G*p.strideHeight-S;for(let oe=0;oe<g;++oe){const pe=K+oe*x;if(pe<0||pe>=p.inHeight)continue;const be=oe*E[0],Ae=q+pe*N;for(let $e=0;$e<p.outWidth;++$e){const ge=H+$e*z,Ee=$e*p.strideWidth-w;for(let Ie=0;Ie<y;++Ie){const ye=Ee+Ie*b;if(ye<0||ye>=p.inWidth)continue;const Ge=be+Ie*E[1],ze=Ae+ye*_;let Je=Ge;for(let qe=0;qe<p.inChannels;++qe){const Xe=P[ze+qe*R];for(let gt=0;gt<p.outChannels;++gt)j[ge+gt*W]+=Xe*M[Je+gt];Je+=p.outChannels}}}}}}return n.makeTensorInfo(k.shape,k.dtype,j)}const jDe={kernelName:ux,backendName:"cpu",kernelFunc:DZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:a,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:f}=r;Me([i,s],"conv2dBackpropFilter");const d=ro(l),p=sr(i.shape,f,a,1,o,c,!1,d),{strideHeight:g,strideWidth:y,filterHeight:x,filterWidth:b}=p,w=p.dataFormat==="channelsLast",S=new rr(p.filterShape,"float32"),T=p.padInfo.left,k=p.padInfo.top,A=n.data.get(i.dataId).values,E=n.data.get(s.dataId).values,I=new rr(i.shape,i.dtype,A),N=new rr(s.shape,s.dtype,E);for(let _=0;_<x;++_){const R=Math.max(0,Math.ceil((k-_)/g)),O=Math.min(p.outHeight,(p.inHeight+k-_)/g);for(let F=0;F<b;++F){const z=Math.max(0,Math.ceil((T-F)/y)),W=Math.min(p.outWidth,(p.inWidth+T-F)/y);for(let P=0;P<p.inChannels;++P)for(let M=0;M<p.outChannels;++M){let j=0;for(let V=0;V<p.batchSize;++V)for(let q=R;q<O;++q){const L=_+q*g-k;for(let G=z;G<W;++G){const H=F+G*y-T;w?j+=I.get(V,L,H,P)*N.get(V,q,G,M):j+=I.get(V,P,L,H)*N.get(V,M,q,G)}}S.set(j,_,F,P,M)}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const UDe={kernelName:rO,backendName:"cpu",kernelFunc:VDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WDe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{inputShape:a,strides:o,pad:l,dataFormat:c,dimRoundingMode:f}=r;Me([i,s],"conv2dBackpropInput");const d=je(s.shape),p=je(i.shape);let g=ro(c);const y=sr(a,s.shape,o,1,l,f,!1,g),x=new rr(y.inShape,"float32"),b=x.values,w=n.data.get(i.dataId).values,S=n.data.get(s.dataId).values,[T,k,A]=d,{batchSize:E,filterHeight:I,filterWidth:N,inChannels:_,inHeight:R,inWidth:O,outChannels:F,outHeight:z,outWidth:W,strideHeight:P,strideWidth:M}=y;g=y.dataFormat;const j=I-1-y.padInfo.top,V=N-1-y.padInfo.left,q=g==="channelsLast",L=x.strides[0],G=q?x.strides[1]:x.strides[2],H=q?x.strides[2]:1,K=q?1:x.strides[1],oe=p[0],pe=q?p[1]:p[2],be=q?p[2]:1,Ae=q?1:p[1];for(let $e=0;$e<E;++$e)for(let ge=0;ge<_;++ge)for(let Ee=0;Ee<R;++Ee){const Ie=Ee-j,ye=Math.max(0,Math.ceil(Ie/P)),Ge=Math.min(z,(I+Ie)/P);for(let ze=0;ze<O;++ze){const Je=ze-V,qe=Math.max(0,Math.ceil(Je/M)),Xe=Math.min(W,(N+Je)/M);let gt=0;for(let Kt=ye;Kt<Ge;++Kt){const Sn=Kt*P-Ie;for(let an=qe;an<Xe;++an){const Kr=an*M-Je,wr=oe*$e+pe*Kt+be*an,Xr=T*(I-1-Sn)+k*(N-1-Kr)+A*ge;for(let Yr=0;Yr<F;++Yr){const fn=w[wr+Ae*Yr],lr=S[Xr+Yr];gt+=fn*lr}}}const Bn=L*$e+G*Ee+H*ze+K*ge;b[Bn]=gt}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const GDe={kernelName:fx,backendName:"cpu",kernelFunc:WDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:a,pad:o,dilations:l}=r;Me([i,s],"conv3d");const c=cl(i.shape,s.shape,a,l,o),{filterDepth:f,filterHeight:d,filterWidth:p,dilationDepth:g,dilationHeight:y,dilationWidth:x,padInfo:b}=c,w=b.front,S=b.left,T=b.top,k=new rr(c.outShape,i.dtype),A=n.data.get(i.dataId).values,E=n.data.get(s.dataId).values,I=k.values,N=je(i.shape),_=je(s.shape);for(let R=0;R<c.batchSize;++R){const O=R*N[0],F=R*k.strides[0];for(let z=0;z<c.outDepth;++z){const W=F+z*k.strides[1],P=z*c.strideDepth-w;for(let M=0;M<f;++M){const j=P+M*g;if(j<0||j>=c.inDepth)continue;const V=M*_[0],q=O+j*N[1];for(let L=0;L<c.outHeight;++L){const G=W+L*k.strides[2],H=L*c.strideHeight-T;for(let K=0;K<d;++K){const oe=H+K*y;if(oe<0||oe>=c.inHeight)continue;const pe=V+K*_[1],be=q+oe*N[2];for(let Ae=0;Ae<c.outWidth;++Ae){const $e=G+Ae*c.outChannels,ge=Ae*c.strideWidth-S;for(let Ee=0;Ee<p;++Ee){const Ie=ge+Ee*x;if(Ie<0||Ie>=c.inWidth)continue;const ye=pe+Ee*_[2],Ge=be+Ie*c.inChannels;let ze=ye;for(let Je=0;Je<c.inChannels;++Je){const qe=A[Ge+Je];for(let Xe=0;Xe<c.outChannels;++Xe)I[$e+Xe]+=qe*E[ze+Xe];ze+=c.outChannels}}}}}}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const HDe={kernelName:hx,backendName:"cpu",kernelFunc:qDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:a,pad:o,filterShape:l}=r;Me([i,s],"conv3dBackpropFilterV2");const c=je(i.shape),f=je(s.shape),d=cl(i.shape,l,a,1,o),p=d.strideDepth,g=d.strideHeight,y=d.strideWidth,x=d.filterDepth,b=d.filterHeight,w=d.filterWidth,S=new rr(d.filterShape,"float32"),T=S.values,[k,A,E,I]=S.strides,N=n.data.get(s.dataId).values,[_,R,O,F]=f,z=n.data.get(i.dataId).values,[W,P,M,j]=c,V=d.padInfo.front,q=d.padInfo.left,L=d.padInfo.top;for(let G=0;G<x;++G){const H=Math.max(0,Math.ceil((V-G)/p)),K=Math.min(d.outDepth,(d.inDepth+V-G)/p),oe=G*k;for(let pe=0;pe<b;++pe){const be=Math.max(0,Math.ceil((L-pe)/g)),Ae=Math.min(d.outHeight,(d.inHeight+L-pe)/g),$e=pe*A+oe;for(let ge=0;ge<w;++ge){const Ee=Math.max(0,Math.ceil((q-ge)/y)),Ie=Math.min(d.outWidth,(d.inWidth+q-ge)/y),ye=ge*E+$e;for(let Ge=0;Ge<d.inChannels;++Ge){const ze=Ge*I+ye;for(let Je=0;Je<d.outChannels;++Je){let qe=0;for(let Xe=0;Xe<d.batchSize;++Xe){const gt=Xe*W,Bn=Xe*_;for(let Kt=H;Kt<K;++Kt){const an=(G+Kt*p-V)*P+gt,Kr=Kt*R+Bn;for(let wr=be;wr<Ae;++wr){const Yr=(pe+wr*g-L)*M+an,fn=wr*O+Kr;for(let lr=Ee;lr<Ie;++lr){const dh=(ge+lr*y-q)*j+Yr,ph=lr*F+fn;qe+=z[dh+Ge]*N[ph+Je]}}}}T[ze+Je]=qe}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const XDe={kernelName:iO,backendName:"cpu",kernelFunc:KDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YDe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{pad:a,strides:o,inputShape:l}=r;Me([i],"conv3dBackpropInputV2");const c=je(i.shape),f=je(s.shape),d=cl(l,s.shape,o,1,a),p=new rr(d.inShape,"float32"),g=p.values,[y,x,b,w]=p.strides,S=n.data.get(i.dataId).values,[T,k,A,E]=c,I=n.data.get(s.dataId).values,[N,_,R,O]=f,{batchSize:F,filterDepth:z,filterHeight:W,filterWidth:P,inChannels:M,inDepth:j,inHeight:V,inWidth:q,outChannels:L,outDepth:G,outHeight:H,outWidth:K,strideDepth:oe,strideHeight:pe,strideWidth:be}=d,Ae=z-1-d.padInfo.front,$e=W-1-d.padInfo.top,ge=P-1-d.padInfo.left;for(let Ee=0;Ee<F;++Ee)for(let Ie=0;Ie<M;++Ie)for(let ye=0;ye<j;++ye){const Ge=ye-Ae,ze=Math.max(0,Math.ceil(Ge/oe)),Je=Math.min(G,(z+Ge)/oe);for(let qe=0;qe<V;++qe){const Xe=qe-$e,gt=Math.max(0,Math.ceil(Xe/pe)),Bn=Math.min(H,(W+Xe)/pe);for(let Kt=0;Kt<q;++Kt){const Sn=Kt-ge,an=Math.max(0,Math.ceil(Sn/be)),Kr=Math.min(K,(P+Sn)/be);let wr=0;for(let Xr=ze;Xr<Je;++Xr){const Yr=Xr*oe-Ge;for(let fn=gt;fn<Bn;++fn){const lr=fn*pe-Xe;for(let zn=an;zn<Kr;++zn){const dh=zn*be-Sn,ph=T*Ee+k*Xr+A*fn+E*zn,O1=N*(z-1-Yr)+_*(W-1-lr)+R*(P-1-dh)+O*Ie;for(let oa=0;oa<L;++oa){const jc=S[ph+oa],la=I[O1+oa];wr+=jc*la}}}}g[y*Ee+x*ye+b*qe+w*Kt+Ie]=wr}}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const ZDe={kernelName:sO,backendName:"cpu",kernelFunc:YDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QDe=Rt($m,t=>Math.cos(t)),JDe={kernelName:$m,backendName:"cpu",kernelFunc:QDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eMe=Rt(Em,t=>Math.cosh(t)),tMe={kernelName:Em,backendName:"cpu",kernelFunc:eMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nMe(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:s,boxInd:a}=e,{cropSize:o,method:l,extrapolationValue:c}=r,[f,d,p,g]=i.shape,y=s.shape[0],[x,b]=o,w=at([y,x,b,g],"float32"),S=n.data.get(s.dataId).values,T=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,A=je(i.shape),E=je(w.shape);for(let I=0;I<y;I++){const N=I*4,_=S[N],R=S[N+1],O=S[N+2],F=S[N+3],z=T[I];if(z>=f)continue;const W=x>1?(O-_)*(d-1)/(x-1):0,P=b>1?(F-R)*(p-1)/(b-1):0;for(let M=0;M<x;M++){const j=x>1?_*(d-1)+M*W:.5*(_+O)*(d-1);if(j<0||j>d-1){for(let V=0;V<b;V++)for(let q=0;q<g;q++){const L=q+V*E[2]+M*E[1]+I*E[0];w.values[L]=c}continue}if(l==="bilinear"){const V=Math.floor(j),q=Math.ceil(j),L=j-V;for(let G=0;G<b;G++){const H=b>1?R*(p-1)+G*P:.5*(R+F)*(p-1);if(H<0||H>p-1){for(let be=0;be<g;be++){const Ae=be+G*E[2]+M*E[1]+I*E[0];w.values[Ae]=c}continue}const K=Math.floor(H),oe=Math.ceil(H),pe=H-K;for(let be=0;be<g;be++){let Ae=be+K*A[2]+V*A[1]+z*A[0];const $e=k[Ae];Ae=be+oe*A[2]+V*A[1]+z*A[0];const ge=k[Ae];Ae=be+K*A[2]+q*A[1]+z*A[0];const Ee=k[Ae];Ae=be+oe*A[2]+q*A[1]+z*A[0];const Ie=k[Ae],ye=$e+(ge-$e)*pe,Ge=Ee+(Ie-Ee)*pe;Ae=be+G*E[2]+M*E[1]+I*E[0],w.values[Ae]=ye+(Ge-ye)*L}}}else for(let V=0;V<b;++V){const q=b>1?R*(p-1)+V*P:.5*(R+F)*(p-1);if(q<0||q>p-1){for(let H=0;H<g;H++){const K=H+V*E[2]+M*E[1]+I*E[0];w.values[K]=c}continue}const L=Math.round(q),G=Math.round(j);for(let H=0;H<g;H++){const K=H+L*A[2]+G*A[1]+z*A[0],oe=H+V*E[2]+M*E[1]+I*E[0];w.values[oe]=k[K]}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const rMe={kernelName:oO,backendName:"cpu",kernelFunc:nMe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:a,reverse:o}=r;Me(i,"cumprod");const l=sn([s],i.shape.length);let c=i;l!=null&&(c=qr({inputs:{x:i},backend:n,attrs:{perm:l}}));const f=bn(1,i.shape.length)[0];if(f!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${f}`);const d=oi(c.dtype,"int32"),p=qN(ve(c.shape),d),g=n.data.get(c.dataId).values,y=c.shape[c.shape.length-1],x=o?(w,S)=>w+y-S-1:(w,S)=>w+S;for(let w=0;w<g.length;w+=y)for(let S=0;S<y;S++){const T=x(w,S);if(S===0)p[T]=a?1:g[T];else{const k=x(w,S-1);p[T]=a?g[k]*p[k]:g[T]*p[k]}}const b=n.makeTensorInfo(c.shape,d,p);if(l!=null){const w=ul(l),S=qr({inputs:{x:b},backend:n,attrs:{perm:w}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(c),S}return b}const sMe={kernelName:aO,backendName:"cpu",kernelFunc:iMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:a,reverse:o}=r;Me(i,"cumsum");const l=sn([s],i.shape.length);let c=i;l!=null&&(c=qr({inputs:{x:i},backend:n,attrs:{perm:l}}));const f=bn(1,i.shape.length)[0];if(f!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${f}`);const d=oi(c.dtype,"int32"),p=gr(ve(c.shape),d),g=n.data.get(c.dataId).values,y=c.shape[c.shape.length-1],x=o?(w,S)=>w+y-S-1:(w,S)=>w+S;for(let w=0;w<g.length;w+=y)for(let S=0;S<y;S++){const T=x(w,S);if(S===0)p[T]=a?0:g[T];else{const k=x(w,S-1);p[T]=a?g[k]+p[k]:g[T]+p[k]}}const b=n.makeTensorInfo(c.shape,d,p);if(l!=null){const w=ul(l),S=qr({inputs:{x:b},backend:n,attrs:{perm:w}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(c),S}return b}const oMe={kernelName:dx,backendName:"cpu",kernelFunc:aMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:a,binaryOutput:o}=r;if(i.shape.length===1){const l=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,f=lR(l,c,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,f)}else if(i.shape.length===2){const l=n.bufferSync(i),c=n.bufferSync(s),f=MY(l,c,a,o);return n.makeTensorInfo(f.shape,s.dtype,f.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const cMe={kernelName:lO,backendName:"cpu",kernelFunc:lMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:s,dataFormat:a}=r;U(a==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${a}`);const o=i.shape[0],l=i.shape[1],c=i.shape[2],f=i.shape[3],d=l*s,p=c*s,g=f/(s*s),y=n.data.get(i.dataId).values,x=new Float32Array(o*d*p*g);let b=0;for(let w=0;w<o;++w)for(let S=0;S<d;++S){const T=Math.floor(S/s),k=S%s;for(let A=0;A<p;++A){const E=Math.floor(A/s),I=A%s,N=(k*s+I)*g;for(let _=0;_<g;++_){const O=_+N+f*(E+c*(T+l*w));x[b++]=y[O]}}}return n.makeTensorInfo([o,d,p,g],i.dtype,x)}const fMe={kernelName:cO,backendName:"cpu",kernelFunc:uMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MZ(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:a,pad:o,dilations:l,dimRoundingMode:c}=r;Me([i,s],"depthwiseConv2DNative");const f=je(i.shape),d=je(s.shape);let p=l;p==null&&(p=[1,1]),U(vr(a,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${p}'`);const g=sr(i.shape,s.shape,a,p,o,c,!0),{filterHeight:y,filterWidth:x,dilationHeight:b,dilationWidth:w,padInfo:S}=g,T=S.left,k=S.top,A=g.outChannels/g.inChannels,E=new rr(g.outShape,i.dtype),I=n.data.get(i.dataId).values,N=n.data.get(s.dataId).values,_=E.values;for(let R=0;R<g.batchSize;++R){const O=R*f[0],F=R*E.strides[0];for(let z=0;z<g.outHeight;++z){const W=F+z*E.strides[1],P=z*g.strideHeight-k;for(let M=0;M<y;++M){const j=P+M*b;if(j<0||j>=g.inHeight)continue;const V=M*d[0],q=O+j*f[1];for(let L=0;L<g.outWidth;++L){const G=W+L*E.strides[2],H=L*g.strideWidth-T;for(let K=0;K<x;++K){const oe=H+K*w;if(oe<0||oe>=g.inWidth)continue;const pe=V+K*d[1],be=q+oe*g.inChannels;let Ae=G,$e=pe;for(let ge=0;ge<g.inChannels;++ge){const Ee=I[be+ge];for(let Ie=0;Ie<A;++Ie)_[Ae+Ie]+=Ee*N[$e+Ie];Ae+=A,$e+=A}}}}}}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const hMe={kernelName:px,backendName:"cpu",kernelFunc:MZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:c,filterShape:f}=r;Me([i,s],"depthwiseConv2dNativeBackpropFilter");const d=sr(i.shape,f,a,o,l,c,!0),{strideHeight:p,strideWidth:g,filterHeight:y,filterWidth:x}=d,b=new rr(d.filterShape,"float32"),w=d.padInfo.left,S=d.padInfo.top,T=d.outChannels/d.inChannels,k=n.data.get(i.dataId).values,A=new rr(i.shape,i.dtype,k),E=n.data.get(s.dataId).values,I=new rr(s.shape,s.dtype,E);for(let N=0;N<y;++N){const _=Math.max(0,Math.ceil((S-N)/p)),R=Math.min(d.outHeight,(d.inHeight+S-N)/p);for(let O=0;O<x;++O){const F=Math.max(0,Math.ceil((w-O)/g)),z=Math.min(d.outWidth,(d.inWidth+w-O)/g);for(let W=0;W<d.outChannels;++W){const P=Math.trunc(W/T),M=W%T;let j=0;for(let V=0;V<d.batchSize;++V)for(let q=_;q<R;++q){const L=N+q*p-S;for(let G=F;G<z;++G){const H=O+G*g-w;j+=A.get(V,L,H,P)*I.get(V,q,G,W)}}b.set(j,N,O,P,M)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const pMe={kernelName:uO,backendName:"cpu",kernelFunc:dMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mMe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:c,inputShape:f}=r;Me([i,s],"depthwiseConv2DNativeBackpropInput");const d=je(i.shape),p=je(s.shape),g=sr(f,s.shape,a,o,l,c,!0),y=new rr(g.inShape,"float32"),x=y.values,[b,w,S]=y.strides,T=n.data.get(i.dataId).values,[k,A,E]=d,I=n.data.get(s.dataId).values,[N,_,R]=p,{batchSize:O,filterHeight:F,filterWidth:z,inChannels:W,inHeight:P,inWidth:M,outChannels:j,outHeight:V,outWidth:q,strideHeight:L,strideWidth:G}=g,H=F-1-g.padInfo.top,K=z-1-g.padInfo.left,oe=j/W;for(let pe=0;pe<O;++pe)for(let be=0;be<W;++be)for(let Ae=0;Ae<P;++Ae){const $e=Ae-H,ge=Math.max(0,Math.ceil($e/L)),Ee=Math.min(V,(F+$e)/L);for(let Ie=0;Ie<M;++Ie){const ye=Ie-K,Ge=Math.max(0,Math.ceil(ye/G)),ze=Math.min(q,(z+ye)/G);let Je=0;for(let qe=ge;qe<Ee;++qe){const Xe=qe*L-$e;for(let gt=Ge;gt<ze;++gt){const Bn=gt*G-ye,Kt=k*pe+A*qe+E*gt,Sn=N*(F-1-Xe)+_*(z-1-Bn)+R*be;for(let an=0;an<oe;++an){const Kr=be*oe+an,wr=T[Kt+Kr],Xr=I[Sn+an];Je+=wr*Xr}}}x[b*pe+w*Ae+S*Ie+be]=Je}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const gMe={kernelName:fO,backendName:"cpu",kernelFunc:mMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yMe(t){const{inputs:e,backend:n}=t,{x:r}=e,i=ve(r.shape),s=n.data.get(r.dataId).values,a=at([i,i],r.dtype),o=a.values;for(let c=0;c<s.length;c++)o[c*i+c]=s[c];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,a.dtype,a.values)}const vMe={kernelName:aK,backendName:"cpu",kernelFunc:yMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bMe={kernelName:mx,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i}=t,{strides:s,pad:a,dilations:o}=n,l=e,c=l.data.get(r.dataId).values,f=r.shape.length,d=l.data.get(i.dataId).values,p=i.shape.length,{batchSize:g,inHeight:y,inWidth:x,inChannels:b,outHeight:w,outWidth:S,padInfo:T,strideHeight:k,strideWidth:A,filterHeight:E,filterWidth:I,dilationHeight:N,dilationWidth:_,outShape:R}=hg(r.shape,i.shape,s,a,"NHWC",o),O=ve(R),F=R.length,z=gn(r.dtype,O);for(let P=0;P<g;++P)for(let M=0;M<w;++M){const j=M*k-T.top;for(let V=0;V<S;++V){const q=V*A-T.left;for(let L=0;L<b;++L){let G=Number.MIN_SAFE_INTEGER;for(let K=0;K<E;++K){const oe=j+K*N;if(oe>=0&&oe<y)for(let pe=0;pe<I;++pe){const be=q+pe*_;if(be>=0&&be<x){const Ae=Ks([P,oe,be,L],f,je(r.shape)),$e=Ks([K,pe,L],p,je(i.shape)),ge=c[Ae]+d[$e];ge>G&&(G=ge)}}}const H=Ks([P,M,V,L],F,je(R));z[H]=G}}}return{dataId:l.write(Oc(z,r.dtype),R,r.dtype),shape:R,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xMe={kernelName:wE,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:s}=t,{strides:a,pad:o,dilations:l}=n,c=e,f=xs(r.shape,c.data.get(r.dataId).values),d=xs(i.shape,c.data.get(i.dataId).values),{batchSize:p,inHeight:g,inWidth:y,inChannels:x,outHeight:b,outWidth:w,padInfo:S,strideHeight:T,strideWidth:k,filterHeight:A,filterWidth:E,dilationHeight:I,dilationWidth:N,outShape:_}=hg(r.shape,i.shape,a,o,"NHWC",l);U(s.rank===_.length,()=>`Error in ${wE}, dy must have the same rank as output ${_.length}, but got ${s.rank}`);const R=xs(_,c.data.get(s.dataId).values),O=nK(i.shape,i.dtype);for(let z=0;z<p;++z)for(let W=0;W<b;++W){const P=W*T-S.top;for(let M=0;M<w;++M){const j=M*k-S.left;for(let V=0;V<x;++V){let q=Number.MIN_SAFE_INTEGER,L=0,G=0;for(let H=0;H<A;++H){const K=P+H*I;if(K>=0&&K<g)for(let oe=0;oe<E;++oe){const pe=j+oe*N;if(pe>=0&&pe<y){const be=f[z][K][pe][V]+d[H][oe][V];be>q&&(q=be,L=H,G=oe)}}}O[L][G][V]+=R[z][W][M][V]}}}return{dataId:c.write(Oc(O,r.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wMe={kernelName:xE,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:s}=t,{strides:a,pad:o,dilations:l}=n,c=e,f=xs(r.shape,c.data.get(r.dataId).values),d=xs(i.shape,c.data.get(i.dataId).values),{batchSize:p,inHeight:g,inWidth:y,inChannels:x,outHeight:b,outWidth:w,padInfo:S,strideHeight:T,strideWidth:k,filterHeight:A,filterWidth:E,dilationHeight:I,dilationWidth:N,outShape:_}=hg(r.shape,i.shape,a,o,"NHWC",l);U(s.rank===_.length,()=>`Error in ${xE}, dy must have the same rank as output ${_.length}, but got ${s.rank}`);const R=xs(_,c.data.get(s.dataId).values),O=nK(r.shape,r.dtype);for(let z=0;z<p;++z)for(let W=0;W<b;++W){const P=W*T-S.top;for(let M=0;M<w;++M){const j=M*k-S.left;for(let V=0;V<x;++V){let q=Number.MIN_SAFE_INTEGER,L=P<0?0:P,G=j<0?0:j;for(let H=0;H<A;++H){const K=P+H*I;if(K>=0&&K<g)for(let oe=0;oe<E;++oe){const pe=j+oe*N;if(pe>=0&&pe<y){const be=f[z][K][pe][V]+d[H][oe][V];be>q&&(q=be,L=K,G=pe)}}}O[z][L][G][V]+=R[z][W][M][V]}}}return{dataId:c.write(Oc(O,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SMe(t){const{inputs:e,backend:n,attrs:r}=t,{image:i}=e,{canvas:s,options:a}=r,{contextOptions:o,imageOptions:l}=a||{},c=(l==null?void 0:l.alpha)||1,f=(o==null?void 0:o.contextType)||"2d";if(f!=="2d")throw new Error(`Context type ${o.contextType} is not supported by the CPU backend.`);const d=s.getContext(f,(o==null?void 0:o.contextAttributes)||{});if(d==null)throw new Error(`Could not get the context with ${f} type.`);const[p,g]=i.shape.slice(0,2),y=i.shape.length===2?1:i.shape[2],x=n.data.get(i.dataId).values,b=i.dtype==="float32"?255:1,w=new Uint8ClampedArray(g*p*4);for(let T=0;T<p*g;++T){const k=[0,0,0,255*c];for(let E=0;E<y;E++){const I=x[T*y+E];if(i.dtype==="float32"){if(I<0||I>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${I}.`)}else if(i.dtype==="int32"&&(I<0||I>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${I}.`);y===1?(k[0]=I*b,k[1]=I*b,k[2]=I*b):k[E]=I*b}const A=T*4;w[A+0]=Math.round(k[0]),w[A+1]=Math.round(k[1]),w[A+2]=Math.round(k[2]),w[A+3]=Math.round(k[3])}s.width=g,s.height=p;const S=new ImageData(w,g,p);return d.putImageData(S,0,0),i}const CMe={kernelName:nCe,backendName:"cpu",kernelFunc:SMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eg(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r;Me(i,"sum");let o;i.dtype==="bool"?o=Jo({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):o=ia({inputs:{x:i},backend:n});const l=o.shape.length,c=ot(s,o.shape),f=sn(c,l);let d=c,p=o;f!=null&&(p=qr({inputs:{x:o},backend:n,attrs:{perm:f}}),d=bn(d.length,l)),ar("sum",d,p.shape.length);const[g,y]=Yn(p.shape,d),x=oi(p.dtype,"int32");let b=l0(n,g,x);const w=ve(y),S=n.data.get(b.dataId).values,T=n.data.get(p.dataId).values;for(let k=0;k<S.length;++k){const A=k*w;let E=0;for(let I=0;I<w;++I)E+=T[A+I];S[k]=E}if(a){const k=$n(b.shape,c),A=b;b=Ht({inputs:{x:b},backend:n,attrs:{shape:k}}),n.disposeIntermediateTensorInfo(A)}return n.disposeIntermediateTensorInfo(o),f!=null&&n.disposeIntermediateTensorInfo(p),b}const TMe={kernelName:Kx,backendName:"cpu",kernelFunc:Eg};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AMe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,s=e,{allDims:a,summedDims:o,idDims:l}=__(i,s.length);D_(a.length,l,s);const{path:c,steps:f}=M_(o,l),d=f.length;let p=null,g=a.length;const y=[];for(let x=0;x<d;++x){for(const b of f[x]){const{permutationIndices:w,expandDims:S}=R_(g,l[b]);let T;P_(w)?T=s[b]:(T=qr({inputs:{x:s[b]},backend:n,attrs:{perm:w}}),y.push(T));const k=T.shape.slice();for(let A=0;A<S.length;++A)k.splice(S[A],0,1);Et(T.shape,k)||(T=Ht({inputs:{x:T},backend:n,attrs:{shape:k}}),y.push(T)),p===null?p=T:(p=A1({inputs:{a:T,b:p},backend:n}),y.push(p))}x<d-1&&(c[x]>=0&&(p=Eg({inputs:{x:p},backend:n,attrs:{axis:c[x]-(a.length-g),keepDims:!1}}),y.push(p)),g--)}for(const x of y)x!==p&&n.disposeIntermediateTensorInfo(x);return p}const kMe={kernelName:hO,backendName:"cpu",kernelFunc:AMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Me(t){const{inputs:e,backend:n}=t,{dy:r,y:i}=e;Me([r,i],"eluGrad");const s=new Float32Array(ve(i.shape)),a=n.data.get(i.dataId).values,o=n.data.get(r.dataId).values;for(let l=0;l<a.length;++l){const c=a[l];c>=0?s[l]=o[l]:s[l]=o[l]*(c+1)}return n.makeTensorInfo(i.shape,"float32",s)}const EMe={kernelName:dO,backendName:"cpu",kernelFunc:$Me};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IMe=A_,NMe=k_,OMe=$_,_Me=E_,RMe=I_,DMe=N_,MMe=Rt(Om,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+IMe*n);return e*(1-((((DMe*r+RMe)*r+_Me)*r+OMe)*r+NMe)*r*Math.exp(-n*n))}),PMe={kernelName:Om,backendName:"cpu",kernelFunc:MMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f0(t){const{inputs:e,backend:n,attrs:r}=t,{input:i}=e,{dim:s}=r,a=i.shape.length,o=i.shape.slice();let l=s;return s<0&&(U(-(a+1)<=s,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),l=a+s+1),o.splice(l,0,1),Ht({inputs:{x:i},backend:n,attrs:{shape:o}})}const FMe={kernelName:yx,backendName:"cpu",kernelFunc:f0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LMe=wn((t,e)=>t/e),pR=Ln(Im,LMe),HE={kernelName:Im,backendName:"cpu",kernelFunc:pR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PZ(t,e,n){const r=t.shape,i=r[0],s=r[1],a=n.data.get(t.dataId),o=a.complexTensorInfos.real,l=a.complexTensorInfos.imag,c=[i,s],f=ve(c),d=mr("float32",f),p=mr("float32",f);for(let b=0;b<i;b++){const w=Ac({inputs:{x:o},backend:n,attrs:{begin:[b,0],size:[1,s]}}),S=Ac({inputs:{x:l},backend:n,attrs:{begin:[b,0],size:[1,s]}}),T=ri({inputs:{real:w,imag:S},backend:n}),{real:k,imag:A}=BMe(T,e,n),E=Ya(k,A);for(let I=0;I<s;I++){const N=O_(E,I);d[b*s+I]=N.real,p[b*s+I]=N.imag}n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo(T)}const g=n.makeTensorInfo(c,"float32",d),y=n.makeTensorInfo(c,"float32",p),x=ri({inputs:{real:g,imag:y},backend:n});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),x}function BMe(t,e,n){const r=ve(t.shape),i=n.data.get(t.dataId),s=n.data.get(i.complexTensorInfos.real.dataId).values,a=n.data.get(i.complexTensorInfos.imag.dataId).values;if(zMe(r)){const o=KE(s,a,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const c=n.makeTensorInfo(l,"float32",o.real),f=n.makeTensorInfo(l,"float32",o.imag),d=n.makeTensorInfo([],"float32",ll(r,"float32")),p=ia({inputs:{x:d},backend:n}),g=HE.kernelFunc({inputs:{a:c,b:d},backend:n}),y=HE.kernelFunc({inputs:{a:f,b:p},backend:n}),x=n.data.get(g.dataId).values,b=n.data.get(y.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),{real:x,imag:b}}return o}else{const o=Ya(s,a),l=jMe(o,r,e);return XX(l)}}function zMe(t){return(t&t-1)===0}function KE(t,e,n,r,i){if(n===1)return{real:t,imag:e};const s=Ya(t,e),a=n/2,o=YX(s),l=o.real,c=o.imag,f=[l.length],d=i.makeTensorInfo(f,"float32",l),p=i.makeTensorInfo(f,"float32",c),g=ri({inputs:{real:d,imag:p},backend:i}),y=ZX(s),x=y.real,b=y.imag,w=[x.length],S=i.makeTensorInfo(w,"float32",x),T=i.makeTensorInfo(w,"float32",b),k=ri({inputs:{real:S,imag:T},backend:i}),A=KE(l,c,a,r,i),E=A.real,I=A.imag,N=[E.length],_=i.makeTensorInfo(N,"float32",E),R=i.makeTensorInfo(N,"float32",I),O=ri({inputs:{real:_,imag:R},backend:i}),F=KE(x,b,a,r,i),z=F.real,W=F.imag,P=[z.length],M=i.makeTensorInfo(P,"float32",z),j=i.makeTensorInfo(P,"float32",W),V=ri({inputs:{real:M,imag:j},backend:i}),q=JX(n,r),L=[q.real.length],G=i.makeTensorInfo(L,"float32",q.real),H=i.makeTensorInfo(L,"float32",q.imag),K=ri({inputs:{real:G,imag:H},backend:i}),oe=A1({inputs:{a:K,b:V},backend:i}),pe=Of({inputs:{a:O,b:oe},backend:i}),be=hR({inputs:{a:O,b:oe},backend:i}),Ae=Tc({inputs:{input:pe},backend:i}),$e=Tc({inputs:{input:be},backend:i}),ge=_f({inputs:{input:pe},backend:i}),Ee=_f({inputs:{input:be},backend:i}),Ie=Rf({inputs:[Ae,$e],backend:i,attrs:{axis:0}}),ye=Rf({inputs:[ge,Ee],backend:i,attrs:{axis:0}}),Ge=i.data.get(Ie.dataId).values,ze=i.data.get(ye.dataId).values;return i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(g),i.disposeIntermediateTensorInfo(S),i.disposeIntermediateTensorInfo(T),i.disposeIntermediateTensorInfo(k),i.disposeIntermediateTensorInfo(_),i.disposeIntermediateTensorInfo(R),i.disposeIntermediateTensorInfo(O),i.disposeIntermediateTensorInfo(M),i.disposeIntermediateTensorInfo(j),i.disposeIntermediateTensorInfo(V),i.disposeIntermediateTensorInfo(G),i.disposeIntermediateTensorInfo(H),i.disposeIntermediateTensorInfo(K),i.disposeIntermediateTensorInfo(oe),i.disposeIntermediateTensorInfo(pe),i.disposeIntermediateTensorInfo(be),i.disposeIntermediateTensorInfo(Ae),i.disposeIntermediateTensorInfo(ge),i.disposeIntermediateTensorInfo($e),i.disposeIntermediateTensorInfo(Ee),i.disposeIntermediateTensorInfo(Ie),i.disposeIntermediateTensorInfo(ye),{real:Ge,imag:ze}}function jMe(t,e,n){const r=new Float32Array(e*2);for(let i=0;i<e;i++){let s=0,a=0;for(let o=0;o<e;o++){const l=e9(i*o,e,n),c=O_(t,o);s+=c.real*l.real-c.imag*l.imag,a+=c.real*l.imag+c.imag*l.real}n&&(s/=e,a/=e),QX(r,s,a,i)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VMe(t){const{inputs:e,backend:n}=t,{input:r}=e,i=ve(r.shape),s=r.shape[r.shape.length-1],a=i/s,o=Ht({inputs:{x:r},backend:n,attrs:{shape:[a,s]}}),l=PZ(o,!1,n),c=Ht({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}const UMe={kernelName:pO,backendName:"cpu",kernelFunc:VMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mR(t){const{backend:e,attrs:n}=t,{shape:r,value:i,dtype:s}=n,a=s||Yf(i),o=gn(a,ve(r));return GMe(o,i,a),e.makeTensorInfo(r,a,o)}const WMe={kernelName:mO,backendName:"cpu",kernelFunc:mR};function GMe(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qMe={kernelName:gO,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,i=n,s=mr(r.dtype,ve(r.shape)),[a,o,l,c]=r.shape,f=i.data.get(r.dataId).values;for(let p=0;p<a;p++){const g=p*l*o*c;for(let y=0;y<o;y++){const x=y*(l*c);for(let b=0;b<l;b++){const w=b*c;for(let S=0;S<c;S++){const T=Math.round(l-b-1),k=g+x+w+S;let A=f[k];if(T>=0&&T<l){const E=T*c,I=g+x+E+S;A=f[I]}s[k]=A}}}}return{dataId:i.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:a,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:f,dilations:d,dimRoundingMode:p,activation:g,leakyreluAlpha:y}=r;let x=DZ({inputs:{x:i,filter:s},backend:n,attrs:{strides:l,pad:c,dataFormat:f,dilations:d,dimRoundingMode:p}});if(a){const b=x;if(f==="NCHW"&&a.shape.length===1&&a.shape[0]!==1){const w=Ht({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});x=Of({inputs:{a:x,b:w},backend:n}),n.disposeIntermediateTensorInfo(w)}else x=Of({inputs:{a:x,b:a},backend:n});n.disposeIntermediateTensorInfo(b)}if(g){const b=x;if(f==="NCHW"&&g==="prelu"&&o.shape.length===1&&o.shape[0]!==1){const w=Ht({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});x=u0(n,x,g,w,y),n.disposeIntermediateTensorInfo(w)}else x=u0(n,x,g,o,y);n.disposeIntermediateTensorInfo(b)}return x}const KMe={kernelName:Gb,backendName:"cpu",kernelFunc:HMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:a,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:f,dilations:d,dimRoundingMode:p,activation:g,leakyreluAlpha:y}=r;let x=MZ({inputs:{x:i,filter:s},backend:n,attrs:{strides:l,pad:c,dataFormat:f,dilations:d,dimRoundingMode:p}});if(a){const b=x;x=Of({inputs:{a:x,b:a},backend:n}),n.disposeIntermediateTensorInfo(b)}if(g){const b=x;x=u0(n,x,g,o,y),n.disposeIntermediateTensorInfo(b)}return x}const YMe={kernelName:AK,backendName:"cpu",kernelFunc:XMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZMe(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,s=ve(r.shape),a=i.shape,o=a[a.length-1],[l,c,f,d]=p_(r,i);if(c===0)return n.makeTensorInfo(l,r.dtype,[]);const p=n.data.get(i.dataId).values,g=n.bufferSync(r),y=qY(p,g,r.dtype,c,o,f,d,r.shape,s);return n.makeTensorInfo(l,r.dtype,y.values)}const QMe={kernelName:oK,backendName:"cpu",kernelFunc:ZMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:s}=e,{axis:a,batchDims:o}=r;Me([i,s],"gatherV2");const l=ot(a,i.shape)[0],c=n.data.get(s.dataId).values,f=i.shape[l];for(let k=0;k<c.length;++k){const A=c[k];U(A<=f-1&&A>=0,()=>`GatherV2: the index value ${A} is not in [0, ${f-1}]`)}let d=o;o==null&&(d=0);const p=ve(s.shape),g=L_(i,s,l,d),y=Ht({inputs:{x:i},backend:n,attrs:{shape:[g.batchSize,g.outerSize,g.dimSize,g.sliceSize]}}),x=Ht({inputs:{x:s},backend:n,attrs:{shape:[g.batchSize,p/g.batchSize]}}),b=[g.batchSize,g.outerSize,p/g.batchSize,g.sliceSize],w=n.bufferSync(x),S=n.bufferSync(y),T=HY(S,w,b);return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),n.makeTensorInfo(g.outputShape,T.dtype,T.values)}const ePe={kernelName:bx,backendName:"cpu",kernelFunc:JMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tPe(t){const{inputs:e,backend:n}=t,{input:r}=e,i=ve(r.shape),s=r.shape[r.shape.length-1],a=i/s,o=Ht({inputs:{x:r},backend:n,attrs:{shape:[a,s]}}),l=PZ(o,!0,n),c=Ht({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}const nPe={kernelName:yO,backendName:"cpu",kernelFunc:tPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rPe=Rt(Lm,t=>Number.isFinite(t)?1:0,"bool"),iPe={kernelName:Lm,backendName:"cpu",kernelFunc:rPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sPe=Rt(Bm,t=>Math.abs(t)===1/0?1:0,"bool"),aPe={kernelName:Bm,backendName:"cpu",kernelFunc:sPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oPe=Rt(zm,t=>Number.isNaN(t)?1:0,"bool"),lPe={kernelName:zm,backendName:"cpu",kernelFunc:oPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cPe(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:s}=n,a=QY(r,i,s);return e.makeTensorInfo([a.length],"float32",a)}const uPe={kernelName:lK,backendName:"cpu",kernelFunc:cPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fPe=Rt(Vm,t=>Math.log1p(t)),hPe={kernelName:Vm,backendName:"cpu",kernelFunc:fPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dPe=wn((t,e)=>t&&e),pPe=Ln(Tx,dPe,null,"bool"),mPe={kernelName:Tx,backendName:"cpu",kernelFunc:pPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gPe=Rt(Ax,t=>t?0:1,"bool"),yPe={kernelName:Ax,backendName:"cpu",kernelFunc:gPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vPe=wn((t,e)=>t||e),bPe=Ln(kx,vPe,null,"bool"),xPe={kernelName:kx,backendName:"cpu",kernelFunc:bPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:s,bias:a,alpha:o,beta:l}=r;Me(i,"LRN");const c=i.shape[3],f=c-1,d=n.data.get(i.dataId).values,p=ve(i.shape),g=new Float32Array(p);function y(x){const b=x%c;let w=x-b+Math.max(0,b-s);const S=x-b+Math.min(b+s,f);let T=0;for(;w<=S;w++){const k=d[w];T+=k*k}return T}for(let x=0;x<p;x++){const b=y(x),w=d[x]*Math.pow(a+o*b,-l);g[x]=w}return n.makeTensorInfo(i.shape,i.dtype,g)}const SPe={kernelName:$x,backendName:"cpu",kernelFunc:wPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,y:s,dy:a}=e,{depthRadius:o,bias:l,alpha:c,beta:f}=r;Me(a,"LRNGrad");const d=ve(a.shape),p=a.shape[3],g=n.data.get(a.dataId).values,y=n.data.get(i.dataId).values,x=n.data.get(s.dataId).values,b=new Float32Array(d),w=d;for(let S=0;S<w;S++){const T=S%p,k=S-T+Math.max(0,T-o),A=S-T+Math.min(p,T+o+1);let E=0;for(let I=k;I<A;I++)E+=Math.pow(y[I],2);E=c*E+l;for(let I=k;I<A;I++){let N=-2*c*f*y[I]*x[S]/E;S===I&&(N+=Math.pow(E,-f)),N*=g[S],b[I]+=N}}return n.makeTensorInfo(a.shape,i.dtype,b)}const TPe={kernelName:bO,backendName:"cpu",kernelFunc:CPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FZ(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:s,keepDims:a}=r,o=n;let l=i.shape;const c=l.length,f=ot(s,l);let d=f;const p=sn(d,c);let g=o.data.get(i.dataId).values;if(p!=null){const k=new Array(c);for(let A=0;A<k.length;A++)k[A]=l[p[A]];g=uR(g,l,i.dtype,p,k),d=bn(d.length,c),l=k}Me(i,"max"),ar("max",d,c);const[y,x]=Yn(l,d),b=ve(x),w=eZ(g,b,y,i.dtype),S=o.write(w,y,i.dtype);let T=y;return a&&(T=$n(y,f)),{dataId:S,shape:T,dtype:i.dtype}}const APe={kernelName:Ex,backendName:"cpu",kernelFunc:FZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;Me(i,"maxPool");const{filterSize:s,strides:a,pad:o,dimRoundingMode:l}=r,c=1;U(vr(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const f=ns(i.shape,s,a,c,o,l);let d;if(f.filterWidth===1&&f.filterHeight===1&&Et(f.inShape,f.outShape))d=ia({inputs:{x:i},backend:n});else{const p=n.data.get(i.dataId).values,g=je(i.shape),y=dR(p,i.shape,i.dtype,g,f,"max");d=n.makeTensorInfo(f.outShape,i.dtype,y.values)}return d}const $Pe={kernelName:Ix,backendName:"cpu",kernelFunc:kPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:a,pad:o,dimRoundingMode:l,dataFormat:c}=r;Me(i,"maxPool3d");const f=no(i.shape,s,a,1,o,l,c),d=n.data.get(i.dataId).values,p=RZ(d,i.shape,i.dtype,je(i.shape),f,"max");return n.makeTensorInfo(p.shape,"float32",p.values)}const IPe={kernelName:Nx,backendName:"cpu",kernelFunc:EPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NPe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,{filterSize:a,strides:o,pad:l,dimRoundingMode:c}=r;Me([i,s],"maxPool3DGrad");const f=no(s.shape,a,o,1,l,c),d=n.bufferSync(s),p=vDe(d,f),g=f.strideDepth,y=f.strideHeight,x=f.strideWidth,b=f.dilationDepth,w=f.dilationHeight,S=f.dilationWidth,T=f.effectiveFilterDepth,k=f.effectiveFilterHeight,A=f.effectiveFilterWidth,E=T-1-f.padInfo.front,I=A-1-f.padInfo.left,N=k-1-f.padInfo.top,_=at(s.shape,"float32"),R=n.bufferSync(i);for(let O=0;O<f.batchSize;++O)for(let F=0;F<f.inChannels;++F)for(let z=0;z<f.inDepth;++z)for(let W=0;W<f.inHeight;++W)for(let P=0;P<f.inWidth;++P){const M=z-E,j=W-N,V=P-I;let q=0;for(let L=0;L<T;L+=b){const G=(M+L)/g;if(!(G<0||G>=f.outDepth||Math.floor(G)!==G))for(let H=0;H<k;H+=w){const K=(j+H)/y;if(!(K<0||K>=f.outHeight||Math.floor(K)!==K))for(let oe=0;oe<A;oe+=S){const pe=(V+oe)/x;if(pe<0||pe>=f.outWidth||Math.floor(pe)!==pe)continue;const be=T*k*A-1-p.get(O,G,K,pe,F),Ae=L*k*A+H*A+oe,$e=be===Ae?1:0;if($e===0)continue;const ge=R.get(O,G,K,pe,F);q+=ge*$e}}}_.set(q,O,z,W,P,F)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const OPe={kernelName:wO,backendName:"cpu",kernelFunc:NPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Pe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s,output:a}=e,o=s;Me([s,a],"maxPoolGrad");const{filterSize:l,strides:c,pad:f,dimRoundingMode:d}=r,p=ns(o.shape,l,c,1,f,d),g=n.data.get(o.dataId).values,y=at(p.outShape,o.dtype,_Z(g,o.shape,o.dtype,p).values),x=p.strideHeight,b=p.strideWidth,w=p.dilationHeight,S=p.dilationWidth,T=p.effectiveFilterHeight,k=p.effectiveFilterWidth,A=k-1-p.padInfo.left,E=T-1-p.padInfo.top,I=at(o.shape,"float32"),N=n.data.get(i.dataId).values,_=at(i.shape,"float32",N);for(let R=0;R<p.batchSize;++R)for(let O=0;O<p.inChannels;++O)for(let F=0;F<p.inHeight;++F)for(let z=0;z<p.inWidth;++z){const W=F-E,P=z-A;let M=0;for(let j=0;j<T;j+=w){const V=(W+j)/x;if(!(V<0||V>=p.outHeight||Math.floor(V)!==V))for(let q=0;q<k;q+=S){const L=(P+q)/b;if(L<0||L>=p.outWidth||Math.floor(L)!==L)continue;const G=T*k-1-y.get(R,V,L,O),H=j*k+q,K=G===H?1:0;if(K===0)continue;const oe=_.get(R,V,L,O);M+=oe*K}}I.set(M,R,F,z,O)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const RPe={kernelName:xO,backendName:"cpu",kernelFunc:_Pe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DPe(t,e,n,r,i){const s=je(e),a=dR(t,e,n,s,i,"max"),o=_Z(t,e,n,i,!0,r);return[a.values,o.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MPe={kernelName:cK,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:s,pad:a,includeBatchInIndex:o}=e,l=n;Me(r,"MaxPoolWithArgmax");const c=l.data.get(r.dataId).values,f=ns(r.shape,i,s,[1,1],a),[d,p]=DPe(c,r.shape,r.dtype,o,f),g=l.write(d,f.outShape,r.dtype),y=l.write(p,f.outShape,r.dtype);return[{dataId:g,shape:f.outShape,dtype:r.dtype},{dataId:y,shape:f.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r,o=ot(s,i.shape),c=Yn(i.shape,o)[1],f=ve(c),d=[],p=n.makeTensorInfo([],"float32",new Float32Array([f]));d.push(p);const g=Jo({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});d.push(g);const y=pR({inputs:{a:g,b:p},backend:n});d.push(y);const x=Eg({inputs:{x:y},backend:n,attrs:{axis:s,keepDims:a}});return d.forEach(b=>n.disposeIntermediateTensorInfo(b)),x}const FPe={kernelName:Ox,backendName:"cpu",kernelFunc:PPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r;Me(i,"min");const o=ot(s,i.shape);let l=o;const c=sn(l,i.shape.length);let f=i;c!=null&&(f=qr({inputs:{x:i},backend:n,attrs:{perm:c}}),l=bn(l.length,i.shape.length)),ar("min",l,f.shape.length);const[d,p]=Yn(f.shape,l),g=ve(p),y=gr(ve(d),f.dtype),x=n.data.get(f.dataId).values;for(let w=0;w<y.length;++w){const S=w*g;let T=x[S];for(let k=0;k<g;++k){const A=x[S+k];(Number.isNaN(A)||A<T)&&(T=A)}y[w]=T}c!=null&&n.disposeIntermediateTensorInfo(f);const b=n.makeTensorInfo(d,f.dtype,y);if(a){const w=$n(d,o),S=Ht({inputs:{x:b},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(b),S}return b}const BPe={kernelName:_x,backendName:"cpu",kernelFunc:LPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,mode:a}=r;Me(i,"mirrorPad");const o=s.map((T,k)=>T[0]+i.shape[k]+T[1]),l=s.map(T=>T[0]),c=s.map((T,k)=>T[0]+i.shape[k]),f=a==="reflect"?0:1,d=n.data.get(i.dataId).values,p=i.shape.length,g=je(i.shape),y=ve(o),x=o.length,b=je(o),w=mr(i.dtype,y);for(let T=0;T<y;T++){let k=Zf(T,x,b);for(let E=0;E<x;E++)k[E]<l[E]?k[E]=l[E]*2-k[E]-f:k[E]>=c[E]&&(k[E]=(c[E]-1)*2-k[E]+f);k=k.map((E,I)=>E-l[I]);const A=Ks(k,p,g);w[T]=d[A]}return{dataId:n.write(w,o,i.dtype),shape:o,dtype:i.dtype}}const jPe={kernelName:Rx,backendName:"cpu",kernelFunc:zPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VPe=wn((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),UPe=Ln(Gm,VPe),WPe={kernelName:Gm,backendName:"cpu",kernelFunc:UPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LZ(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:s}=r,a=i.shape.length;let o=s;if(o===-1&&(o=a-1),o!==a-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${a} and dim was ${o}`);const l=ot([o],i.shape),c=FZ({inputs:{x:i},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),f=$n(c.shape,l),d=Ht({inputs:{x:c},backend:n,attrs:{shape:f}}),p=hR({inputs:{a:i,b:d},backend:n}),g=VY({inputs:{x:p},backend:n}),y=Eg({inputs:{x:g},backend:n,attrs:{axis:l,keepDims:!1}}),x=Ht({inputs:{x:y},backend:n,attrs:{shape:f}}),b=pR({inputs:{a:g,b:x},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),b}const GPe={kernelName:Zx,backendName:"cpu",kernelFunc:LZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qPe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:s,seed:a,normalized:o}=r;Me(i,"multinomial");const l=o?i:LZ({inputs:{logits:i},backend:n,attrs:{dim:-1}}),c=l.shape[0],f=l.shape[1],d=n.data.get(l.dataId).values,p=[c,s],g=gr(ve(p),"int32");for(let y=0;y<c;++y){const x=y*f,b=new Float32Array(f-1);b[0]=d[x];for(let T=1;T<b.length;++T)b[T]=b[T-1]+d[x+T];const w=e_.alea(a.toString()),S=y*s;for(let T=0;T<s;++T){const k=w();g[S+T]=b.length;for(let A=0;A<b.length;A++)if(k<b[A]){g[S+T]=A;break}}}return o||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(p,"int32",g)}const HPe={kernelName:uK,backendName:"cpu",kernelFunc:qPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KPe=c_;function XPe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l}=r;Me(i,"NonMaxSuppression");const c=n.data.get(i.dataId).values,f=n.data.get(s.dataId).values,{selectedIndices:d}=KPe(c,f,a,o,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const YPe={kernelName:SO,backendName:"cpu",kernelFunc:XPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZPe=u_;function QPe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r;Me(i,"NonMaxSuppressionPadded");const f=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,{selectedIndices:p,validOutputs:g}=ZPe(f,d,a,o,l,c);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([g]))]}const JPe={kernelName:CO,backendName:"cpu",kernelFunc:QPe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eFe=f_;function tFe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r;Me(i,"NonMaxSuppressionWithScore");const f=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,p=a,g=o,y=l,x=c,{selectedIndices:b,selectedScores:w}=eFe(f,d,p,g,y,x);return[n.makeTensorInfo([b.length],"int32",new Int32Array(b)),n.makeTensorInfo([w.length],"float32",new Float32Array(w))]}const nFe={kernelName:TO,backendName:"cpu",kernelFunc:tFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rFe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:s,depth:a,onValue:o,offValue:l}=r;Me(i,"oneHot");const c=ve(i.shape),f=new Float32Array(c*a);f.fill(l);const d=n.data.get(i.dataId).values;for(let p=0;p<c;++p)d[p]>=0&&d[p]<a&&(f[p*a+d[p]]=o);return n.makeTensorInfo([...i.shape,a],s,f)}const iFe={kernelName:Fx,backendName:"cpu",kernelFunc:rFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h0(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const i=Tc({inputs:{input:r},backend:n}),s=h0({inputs:{x:i},backend:n}),a=_f({inputs:{input:r},backend:n}),o=h0({inputs:{x:a},backend:n}),l=ri({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return mR({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const sFe={kernelName:e1,backendName:"cpu",kernelFunc:h0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BZ(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const i=Tc({inputs:{input:r},backend:n}),s=BZ({inputs:{x:i},backend:n}),a=_f({inputs:{input:r},backend:n}),o=h0({inputs:{x:a},backend:n}),l=ri({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return mR({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const aFe={kernelName:Px,backendName:"cpu",kernelFunc:BZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zZ(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return f0({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const s=e[0].shape,a=e[0].dtype;e.forEach(f=>{GN(s,f.shape,"All tensors passed to stack must have matching shapes"),U(a===f.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=e.map(f=>{const d=f0({inputs:{input:f},backend:n,attrs:{dim:i}});return o.push(d),d}),c=Rf({inputs:l,backend:n,attrs:{axis:i}});return o.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const oFe={kernelName:Lx,backendName:"cpu",kernelFunc:zZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,constantValue:a}=r;Me(i,"pad");const o=s.map((S,T)=>S[0]+i.shape[T]+S[1]),l=s.map(S=>S[0]),c=n.data.get(i.dataId).values,f=ve(i.shape),d=i.shape.length,p=je(i.shape),g=ve(o),y=o.length,x=je(o),b=mr(i.dtype,g);a!==0&&b.fill(a);for(let S=0;S<f;S++){const k=Zf(S,d,p).map((E,I)=>E+l[I]),A=Ks(k,y,x);b[A]=c[S]}return{dataId:n.write(b,o,i.dtype),shape:o,dtype:i.dtype}}const jZ={kernelName:Bx,backendName:"cpu",kernelFunc:lFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cFe=wn((t,e)=>Math.pow(t,e)),uFe=Ln(Hm,cFe),fFe={kernelName:Hm,backendName:"cpu",kernelFunc:uFe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hFe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:s,indices:a}=e,{outputRaggedRank:o}=r,l=i.map(w=>n.data.get(w.dataId).values),c=i.map(w=>w.shape),f=n.data.get(s.dataId).values,d=n.data.get(a.dataId).values,[p,g,y]=aZ(l,c,f,s.shape,s.dtype,d,a.shape),x=p.map(w=>n.makeTensorInfo([w.length],"int32",w)),b=n.makeTensorInfo(y,s.dtype,g);return x.concat([b])}const dFe={kernelName:fK,backendName:"cpu",kernelFunc:hFe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pFe(t){const{inputs:e,backend:n}=t,{starts:r,limits:i,deltas:s}=e,a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,[c,f]=oZ(a,r.shape,r.dtype,o,i.shape,l,s.shape),d=n.makeTensorInfo([c.length],"int32",c),p=n.makeTensorInfo([f.length],r.dtype,f);return[d,p]}const mFe={kernelName:hK,backendName:"cpu",kernelFunc:pFe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gFe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:s,defaultValue:a,rowPartitionTensors:o}=e,{rowPartitionTypes:l}=r,c=n.data.get(i.dataId).values,f=n.data.get(s.dataId).values,d=n.data.get(a.dataId).values,p=o.map(b=>n.data.get(b.dataId).values),g=o.map(b=>b.shape),[y,x]=lZ(c,i.shape,f,s.shape,s.dtype,d,a.shape,p,g,l);return n.makeTensorInfo(y,s.dtype,x)}const yFe={kernelName:dK,backendName:"cpu",kernelFunc:gFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vFe(t){const{backend:e,attrs:n}=t,{start:r,stop:i,dtype:s,step:a}=n,o=cZ(r,i,a,s);return e.makeTensorInfo([o.length],s,o)}const bFe={kernelName:AO,backendName:"cpu",kernelFunc:vFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xFe=Rt(Km,t=>1/t),wFe={kernelName:Km,backendName:"cpu",kernelFunc:xFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SFe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:a,size:o}=r;Me(i,"resizeBilinear");const l=je(i.shape),[c,f]=o,[d,p,g,y]=i.shape,x=n.data.get(i.dataId).values,b=new Float32Array(ve([d,c,f,y])),w=[s&&c>1?p-1:p,s&&f>1?g-1:g],S=[s&&c>1?c-1:c,s&&f>1?f-1:f];let T=0;const k=w[0]/S[0],A=w[1]/S[1];for(let E=0;E<d;E++)for(let I=0;I<c;I++){let N;a?N=k*(I+.5)-.5:N=k*I;const _=Math.max(0,Math.floor(N)),R=N-_,O=Math.min(p-1,Math.ceil(N)),F=E*l[0]+_*l[1],z=E*l[0]+O*l[1];for(let W=0;W<f;W++){let P;a?P=A*(W+.5)-.5:P=A*W;const M=Math.max(0,Math.floor(P)),j=P-M,V=Math.min(g-1,Math.ceil(P)),q=F+M*l[2],L=z+M*l[2],G=F+V*l[2],H=z+V*l[2];for(let K=0;K<y;K++){const oe=x[q+K],pe=x[L+K],be=x[G+K],Ae=x[H+K],$e=oe+(be-oe)*j,ge=pe+(Ae-pe)*j,Ee=$e+(ge-$e)*R;b[T++]=Ee}}}return n.makeTensorInfo([d,c,f,y],"float32",b)}const CFe={kernelName:Wx,backendName:"cpu",kernelFunc:SFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TFe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:a}=r;Me([s,i],"resizeBilinearGrad");const o=je(i.shape),[l,c,f,d]=i.shape,[,p,g]=s.shape,y=new Float32Array(l*c*f*d),x=[a&&p>1?c-1:c,a&&g>1?f-1:f],b=[a&&p>1?p-1:p,a&&g>1?g-1:g],w=x[0]/b[0],S=x[1]/b[1],T=n.data.get(s.dataId).values;let k=0;for(let A=0;A<l;A++){const E=A*o[0];for(let I=0;I<p;I++){const N=I*w,_=Math.floor(N),R=Math.min(Math.ceil(N),c-1),O=E+_*o[1],F=E+R*o[1],z=N-_,W=1-z;for(let P=0;P<g;P++){const M=P*S,j=Math.floor(M),V=Math.min(Math.ceil(M),f-1),q=M-j,L=1-q,G=O+j*o[2],H=O+V*o[2],K=F+j*o[2],oe=F+V*o[2],pe=W*L,be=W*q,Ae=z*L,$e=z*q;for(let ge=0;ge<d;ge++){const Ee=T[k++];y[G+ge]+=Ee*pe,y[H+ge]+=Ee*be,y[K+ge]+=Ee*Ae,y[oe+ge]+=Ee*$e}}}}return n.makeTensorInfo([l,f,c,d],"float32",y)}const AFe={kernelName:EO,backendName:"cpu",kernelFunc:TFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kFe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:a,size:o}=r;Me(i,"resizeNearestNeighbor");const l=je(i.shape),[c,f]=o,[d,p,g,y]=i.shape,x=n.data.get(i.dataId).values,b=new Float32Array(d*c*f*y),w=[s&&c>1?p-1:p,s&&f>1?g-1:g],S=[s&&c>1?c-1:c,s&&f>1?f-1:f],T=w[0]/S[0],k=w[1]/S[1];let A=0;for(let E=0;E<d;E++){const I=E*l[0];for(let N=0;N<c;N++){const _=a?T*(N+.5):T*N;let R=Math.min(p-1,s?Math.round(_):Math.floor(_));a&&(R=Math.max(0,R));const O=I+R*l[1];for(let F=0;F<f;F++){const z=a?k*(F+.5):k*F;let W=Math.min(g-1,s?Math.round(z):Math.floor(z));a&&(W=Math.max(0,W));const P=O+W*l[2];for(let M=0;M<y;M++){const j=x[P+M];b[A++]=j}}}}return n.makeTensorInfo([d,c,f,y],i.dtype,b)}const $Fe={kernelName:Ux,backendName:"cpu",kernelFunc:kFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EFe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:a}=r;Me([s,i],"resizeNearestNeighborGrad");const o=je(i.shape),l=je(s.shape),[c,f,d,p]=i.shape,[,g,y]=s.shape,x=new Float32Array(c*f*d*p),b=n.data.get(s.dataId).values,w=[a&&g>1?f-1:f,a&&y>1?d-1:d],S=[a&&g>1?g-1:g,a&&y>1?y-1:y],T=w[0]/S[0],k=w[1]/S[1],A=1/T,E=1/k,I=Math.ceil(A)*2+2,N=Math.ceil(E)*2+2;for(let _=0;_<c;_++){const R=_*o[0];for(let O=0;O<f;O++){const F=R+O*o[1],z=Math.floor(O*A),W=Math.floor(z-I/2);for(let P=0;P<d;P++){const M=F+P*o[2],j=Math.floor(P*E),V=Math.floor(j-N/2);for(let q=0;q<p;q++){let L=0;for(let G=0;G<I;G++){const H=G+W;if(H<0||H>=g)continue;const K=R+H*l[1],oe=H*T,pe=Math.min(f-1,a?Math.round(oe):Math.floor(oe));if(O===pe)for(let be=0;be<N;be++){const Ae=be+V;if(Ae<0||Ae>=y)continue;const $e=K+Ae*l[2],ge=Ae*k,Ee=Math.min(d-1,a?Math.round(ge):Math.floor(ge));P===Ee&&(L+=b[$e+q])}}x[M+q]=L}}}}return n.makeTensorInfo(i.shape,i.dtype,x)}const IFe={kernelName:$O,backendName:"cpu",kernelFunc:EFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:s}=r;Me(i,"reverse");const a=i.shape.length,o=ot(s,i.shape);if(a===0)return ia({inputs:{x:i},backend:n});const l=new rr(i.shape,i.dtype),c=n.bufferSync(i);for(let f=0;f<l.size;f++){const d=l.indexToLoc(f),p=d.slice();o.forEach(g=>p[g]=i.shape[g]-1-p[g]),l.set(c.get(...p),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const OFe={kernelName:Gx,backendName:"cpu",kernelFunc:NFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Fe={kernelName:MO,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:s,center:a}=e,o=n,l=mr(r.dtype,ve(r.shape)),[c,f,d,p]=r.shape,[g,y]=S_(a,f,d),x=255,b=Math.sin(i),w=Math.cos(i),S=o.data.get(r.dataId).values;for(let k=0;k<c;k++){const A=k*d*f*p;for(let E=0;E<f;E++){const I=E*(d*p);for(let N=0;N<d;N++){const _=N*p;for(let R=0;R<p;R++){const O=[c,E,N,R],F=O[2],z=O[1];let W=(F-g)*w-(z-y)*b,P=(F-g)*b+(z-y)*w;W=Math.round(W+g),P=Math.round(P+y);let M=s;if(typeof s!="number"&&(R===3?M=x:M=s[R]),W>=0&&W<d&&P>=0&&P<f){const V=P*(d*p),q=W*p,L=A+V+q+R;M=S[L]}const j=A+I+_+R;l[j]=M}}}}return{dataId:o.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RFe=Rt(Zm,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),DFe={kernelName:Zm,backendName:"cpu",kernelFunc:RFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MFe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:s}=e,{shape:a}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:f,outputSize:d}=Dc(s,i,a),p=!0,g=n.bufferSync(i),y=n.bufferSync(s),x=ec(g,y,a,d,c,l,o,f,0,p);return n.makeTensorInfo(a,x.dtype,x.values)}const PFe={kernelName:pK,backendName:"cpu",kernelFunc:MFe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FFe(t,e){let n=0,r=t.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),t[i]<e?n=i+1:r=i;return r}function LFe(t,e){let n=0,r=t.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),t[i]<=e?n=i+1:r=i;return r}function BFe(t,e,n,r,i,s){const a=gn("int32",n*i);for(let o=0;o<n;++o){const l=t.slice(o*r,(o+1)*r),c=o*i;for(let f=0;f<i;++f)a[c+f]=s==="left"?FFe(l,e[f+c]):LFe(l,e[f+c])}return a}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zFe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:s}=e,{side:a}=r,o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,c=BFe(o,l,i.shape[0],i.shape[1],s.shape[1],a);return n.makeTensorInfo(s.shape,"int32",c)}const jFe={kernelName:gK,backendName:"cpu",kernelFunc:zFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VFe(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:s}=e;Me([r,i,s],"select");const a=r.shape.length,o=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,f=oi(i.dtype,s.dtype),d=gr(ve(i.shape),f);let p=0;const g=a===0||a>1||i.shape.length===1?1:ve(i.shape.slice(1));for(let y=0;y<o.length;y++)for(let x=0;x<g;x++)o[y]===1?d[p++]=l[y]:d[p++]=c[y];return n.makeTensorInfo(i.shape,f,d)}const UFe={kernelName:qx,backendName:"cpu",kernelFunc:VFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WFe=h1,GFe=d1,qFe=Rt(Jm,t=>t>=0?GFe*t:WFe*(Math.exp(t)-1)),HFe={kernelName:Jm,backendName:"cpu",kernelFunc:qFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KFe=Rt(ng,t=>t<0?-1:t>0?1:0),XFe={kernelName:ng,backendName:"cpu",kernelFunc:KFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YFe=Rt(eg,t=>Math.sin(t)),ZFe={kernelName:eg,backendName:"cpu",kernelFunc:YFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QFe=Rt(tg,t=>Math.sinh(t)),JFe={kernelName:tg,backendName:"cpu",kernelFunc:QFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eLe=11920928955078125e-23,YW=Math.log(eLe)+2,tLe=Rt(ig,t=>{const e=t>-YW,n=t<YW,r=Math.exp(t);let i;return n?i=r:e?i=t:i=Math.log(1+r),i}),nLe={kernelName:ig,backendName:"cpu",kernelFunc:tLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,paddings:a}=r;Me([i],"spaceToBatchND");const o=ve(s),l=[[0,0]];l.push(...a);for(let E=1+s.length;E<i.shape.length;++E)l.push([0,0]);const c=jZ.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),f=yg(c.shape,s,o,!1),d=vg(f.length,s.length,!1),p=bg(c.shape,s,o,!1),x=Ht({inputs:{x:c},backend:n,attrs:{shape:f}}),S=qr({inputs:{x},backend:n,attrs:{perm:d}}),A=Ht({inputs:{x:S},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(S),A}const iLe={kernelName:Xx,backendName:"cpu",kernelFunc:rLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sLe(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:s,defaultValue:a}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${i.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);const o=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,f=n.data.get(a.dataId).values[0],[d,p,g,y,x]=dZ(o,r.shape,r.dtype,l,i.dtype,c,f);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],i.dtype,g),n.makeTensorInfo([y.length],"bool",new Uint8Array(y.map(b=>Number(b)))),n.makeTensorInfo([x.length],r.dtype,new Int32Array(x))]}const aLe={kernelName:yK,backendName:"cpu",kernelFunc:sLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oLe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const a=Array.from(n.data.get(i.dataId).values),o=n.data.get(r.dataId).values,l=Array.from(n.data.get(s.dataId).values),[c,f,d]=pZ(o,r.shape,r.dtype,a,l);return[n.makeTensorInfo(f,r.dtype,c),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}const lLe={kernelName:vK,backendName:"cpu",kernelFunc:oLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cLe(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,[c,f]=fR(a,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(f,r.dtype,c)}const uLe={kernelName:bK,backendName:"cpu",kernelFunc:cLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fLe(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,[c,f]=fR(a,r.shape,r.dtype,o,l);return n.makeTensorInfo(f,r.dtype,c)}const hLe={kernelName:xK,backendName:"cpu",kernelFunc:fLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dLe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:s,defaultValue:a}=e,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:f,strides:d,outputSize:p}=Dc(s,i,o),g=!1,y=n.bufferSync(i);let x;switch(s.dtype){case"bool":{const b=n.bufferSync(s),w=!!n.data.get(a.dataId).values[0];x=ec(y,b,o,p,f,c,l,d,w,g);break}case"float32":{const b=n.bufferSync(s),w=n.data.get(a.dataId).values[0];x=ec(y,b,o,p,f,c,l,d,w,g);break}case"int32":{const b=n.bufferSync(s),w=n.data.get(a.dataId).values[0];x=ec(y,b,o,p,f,c,l,d,w,g);break}case"string":{const b=n.bufferSync(s),w=Ko(n.data.get(a.dataId).values[0]);x=ec(y,b,o,p,f,c,l,d,w,g);break}default:throw new Error(`Unsupported type ${s.dtype}`)}return n.makeTensorInfo(o,x.dtype,x.values)}const pLe={kernelName:wK,backendName:"cpu",kernelFunc:dLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:s,axis:a}=r,o=ot(a,i.shape)[0],l=F_(i,s,o),c=new Array(i.shape.length).fill(0),f=i.shape.slice();return l.map(d=>{const p=[...f];p[o]=d;const g=Ac({inputs:{x:i},backend:n,attrs:{begin:c,size:p}});return c[o]+=d,g})}const gLe={kernelName:Yx,backendName:"cpu",kernelFunc:mLe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yLe={kernelName:IO,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;Me(n,"square");const i=r.data.get(n.dataId).values,s=new Float32Array(i.length);for(let o=0;o<i.length;++o){const l=i[o];s[o]=l*l}return{dataId:r.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vLe=Rt(fg,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),bLe={kernelName:fg,backendName:"cpu",kernelFunc:vLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,end:a,strides:o,beginMask:l,endMask:c,ellipsisMask:f,newAxisMask:d,shrinkAxisMask:p}=r;Me(i,"stridedSlice");const{finalShapeSparse:g,finalShape:y,isIdentity:x,sliceDim0:b,isSimpleSlice:w,begin:S,end:T,strides:k}=b_(i.shape,s,a,o,l,c,f,d,p);let A;if(x)A=Ht({inputs:{x:i},backend:n,attrs:{shape:y}});else if(b||w){U(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const E=g_(S,T,k),I=Ac({inputs:{x:i},backend:n,attrs:{begin:S,size:E}});A=Ht({inputs:{x:I},backend:n,attrs:{shape:y}}),n.disposeIntermediateTensorInfo(I)}else{const E=n.bufferSync(i),I=yZ(g,E,k,S);A=n.makeTensorInfo(y,I.dtype,I.values)}return A}const wLe={kernelName:OO,backendName:"cpu",kernelFunc:xLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SLe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:s,leftPad:a,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:f,dataSplits:d}=e,p=n.data.get(f.dataId).values,g=n.data.get(d.dataId).values,[y,x]=vZ(p,g,i,s,a,o,l,c);return[n.makeTensorInfo([y.length],"string",y),n.makeTensorInfo(d.shape,"int32",x)]}const CLe={kernelName:SK,backendName:"cpu",kernelFunc:SLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TLe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:s,delimiter:a}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const o=n.data.get(s.dataId).values,l=n.data.get(a.dataId).values[0],[c,f,d]=bZ(o,l,i),p=f.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",f),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const ALe={kernelName:CK,backendName:"cpu",kernelFunc:TLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kLe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const a=n.data.get(s.dataId).values,o=xZ(a,i);return n.makeTensorInfo(s.shape,"int32",o)}const $Le={kernelName:TK,backendName:"cpu",kernelFunc:kLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ELe=Rt(lg,t=>Math.tan(t)),ILe={kernelName:lg,backendName:"cpu",kernelFunc:ELe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NLe=Rt(cg,t=>Math.tanh(t)),OLe={kernelName:cg,backendName:"cpu",kernelFunc:NLe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Le(t){const{inputs:e,backend:n}=t,{tensor:r,indices:i,updates:s}=e,{sliceRank:a,numUpdates:o,sliceSize:l,strides:c,outputSize:f}=Dc(s,i,r.shape),d=!1,p=n.bufferSync(i),g=n.bufferSync(s),y=n.bufferSync(r),x=ec(p,g,r.shape,f,l,o,a,c,y,d);return n.makeTensorInfo(r.shape,x.dtype,x.values)}const RLe={kernelName:mK,backendName:"cpu",kernelFunc:_Le};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:s}=r;Me(i,"tile");const a=SZ(n.bufferSync(i),s);return n.makeTensorInfo(a.shape,a.dtype,a.values)}const MLe={kernelName:ug,backendName:"cpu",kernelFunc:DLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:s,sorted:a}=r;Me(i,"topk");const o=n.data.get(i.dataId).values,[l,c]=TZ(o,i.shape,i.dtype,s,a);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}const FLe={kernelName:_O,backendName:"cpu",kernelFunc:PLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LLe(t){const{inputs:e,attrs:n,backend:r}=t,{image:i,transforms:s}=e,{interpolation:a,fillMode:o,fillValue:l,outputShape:c}=n,[f,d,p,g]=i.shape,[y,x]=c??[d,p],b=[f,y,x,g],w=je(i.shape),S=w[0],T=w[1],k=w[2],A=je(b),E=A[0],I=A[1],N=A[2],_=mr(i.dtype,ve(b));_.fill(l);const R=r.data.get(i.dataId).values,O=r.data.get(s.dataId).values;for(let z=0;z<f;++z){const W=s.shape[0]===1?O:O.subarray(z*8,z*8+8);for(let P=0;P<y;++P)for(let M=0;M<x;++M)for(let j=0;j<g;++j){let V;const q=W[6]*M+W[7]*P+1;if(q===0)continue;const L=(W[0]*M+W[1]*P+W[2])/q,G=(W[3]*M+W[4]*P+W[5])/q,H=ZW(L,p,o),K=ZW(G,d,o);switch(a){case"nearest":V=WLe(R,d,p,S,T,k,z,K,H,j,l);break;case"bilinear":V=GLe(R,d,p,S,T,k,z,K,H,j,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${a}`)}const oe=z*E+P*I+M*N+j;_[oe]=V}return r.makeTensorInfo(b,i.dtype,_)}return{dataId:r.write(_,b,i.dtype),shape:i.shape,dtype:i.dtype}}const BLe={kernelName:RO,backendName:"cpu",kernelFunc:LLe};function ZW(t,e,n){switch(n){case"reflect":return zLe(t,e);case"wrap":return jLe(t,e);case"nearest":return ULe(t,e);case"constant":default:return VLe(t)}}function zLe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return dc(0,n,e-1)}function jLe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return dc(0,n,e-1)}function VLe(t,e){return t}function ULe(t,e){return dc(0,t,e-1)}function zd(t,e,n,r,i,s,a,o,l,c,f){const d=a*r+o*i+l*s+c;return 0<=o&&o<e&&0<=l&&l<n?t[d]:f}function WLe(t,e,n,r,i,s,a,o,l,c,f){const d=Math.round(o),p=Math.round(l);return zd(t,e,n,r,i,s,a,d,p,c,f)}function GLe(t,e,n,r,i,s,a,o,l,c,f){const d=Math.floor(o),p=Math.floor(l),g=d+1,y=p+1,x=(y-l)*zd(t,e,n,r,i,s,a,d,p,c,f)+(l-p)*zd(t,e,n,r,i,s,a,d,y,c,f),b=(y-l)*zd(t,e,n,r,i,s,a,g,p,c,f)+(l-p)*zd(t,e,n,r,i,s,a,g,y,c,f);return(g-o)*x+(o-d)*b}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qLe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:s}=e;Me(s,"unique");const a=r.data.get(s.dataId).values,{outputValues:o,outputShape:l,indices:c}=AZ(a,i,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}const HLe={kernelName:DO,backendName:"cpu",kernelFunc:qLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KLe(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:s}=r;s<0&&(s+=i.shape.length);const a=i.shape.length,o=i.shape[s],l=new Array(a-1);let c=0;for(let g=0;g<a;g++)g!==s&&(l[c++]=i.shape[g]);const f=new Array(a).fill(0),d=i.shape.slice();d[s]=1;const p=new Array(o);for(let g=0;g<p.length;g++){f[s]=g;const y=Ac({inputs:{x:i},backend:n,attrs:{begin:f,size:d}});p[g]=Ht({inputs:{x:y},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(y)}return p}const XLe={kernelName:Qx,backendName:"cpu",kernelFunc:KLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:s}=e,{numSegments:a}=r;Me(i,"unsortedSegmentSum");const o=i.shape.length,l=s.shape.length,c=[],f=[],d=o-l;let p=s;for(let y=0;y<d;++y){const x=f0({inputs:{input:p},backend:n,attrs:{dim:y+1}});p=x,f.push(x)}for(let y=0;y<a;++y){const x=ll(y,"int32"),b=n.makeTensorInfo([],"int32",x),w=zY({inputs:{a:b,b:p},backend:n}),S=Jo({inputs:{x:w},backend:n,attrs:{dtype:"float32"}}),T=A1({inputs:{a:S,b:i},backend:n}),k=Eg({inputs:{x:T},backend:n,attrs:{axis:0,keepDims:!1}});c.push(k),f.push(b),f.push(w),f.push(S),f.push(T),f.push(k)}const g=zZ({inputs:c,backend:n,attrs:{axis:0}});return f.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const ZLe={kernelName:Jx,backendName:"cpu",kernelFunc:YLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QLe=[qRe,k_e,KRe,YRe,__e,QRe,eDe,nDe,iDe,aDe,lDe,uDe,hDe,mDe,yDe,xDe,SDe,TDe,kDe,WRe,EDe,NDe,_De,D_e,DDe,N_e,P_e,PDe,$_e,LDe,zDe,jDe,UDe,GDe,HDe,XDe,ZDe,JDe,tMe,rMe,sMe,oMe,cMe,fMe,hMe,pMe,gMe,vMe,bMe,xMe,wMe,CMe,kMe,FRe,EMe,F_e,PMe,L_e,FMe,z_e,UMe,WMe,qMe,V_e,W_e,KMe,YMe,QMe,ePe,q_e,K_e,E_e,nPe,BDe,iPe,aPe,lPe,LRe,Y_e,Q_e,uPe,eRe,hPe,mPe,yPe,xPe,SPe,TPe,APe,nRe,$Pe,IPe,OPe,RPe,MPe,FPe,BPe,iRe,jPe,WPe,HPe,aRe,lRe,YPe,JPe,nFe,uRe,iFe,aFe,oFe,jZ,fFe,zRe,dRe,dFe,mFe,yFe,bFe,I_e,HE,wFe,jRe,VRe,URe,CFe,AFe,$Fe,IFe,OFe,_Fe,DFe,wRe,PFe,jFe,UFe,HFe,CRe,XFe,ZFe,JFe,TRe,GPe,nLe,iLe,aLe,lLe,uLe,hLe,pLe,gLe,$Re,yLe,IRe,ORe,bLe,wLe,CLe,ALe,$Le,MRe,TMe,ILe,OLe,RLe,MLe,FLe,BLe,fRe,HLe,XLe,ZLe,sFe];for(const t of QLe)kK(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gl={},vv={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function JLe(t,e){Gl[t]=e}function As(t,e){if(!(t in Gl)||e!=null){const r=t3e(t,e);if(r!==null)Gl[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=Gl[t];return n==null||n.isContextLost()?(delete Gl[t],As(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Gl[t])}function e3e(t){if(!fe().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function t3e(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??e3e(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Gl[t]},!1),fe().getBool("SOFTWARE_WEBGL_ENABLED")&&(vv.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",vv)||n.getContext("experimental-webgl",vv):n.getContext("webgl2",vv)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Jp;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Jp||(Jp={}));var Ci;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(Ci||(Ci={}));var nr;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(nr||(nr={}));function Ig(t,e){return[e,t]}function n3e(t,e){return t*e}function bv(t){const e=ve(t),n=Math.ceil(e/4);return gE(n)}function sh(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function r3e(t,e){const[n,r]=sh(t,e);return n*r*4}function gR(t,e){const n=t;let r,i,s,a,o,l,c,f,d,p;return fe().getNumber("WEBGL_VERSION")===2?(r=n.R32F,i=n.R16F,s=n.RGBA16F,a=n.RGBA32F,o=n.RED,c=4,f=1,d=n.HALF_FLOAT,p=n.FLOAT,l=n.RGBA8):(r=t.RGBA,i=t.RGBA,s=t.RGBA,a=n.RGBA,o=t.RGBA,c=4,f=4,d=e!=null?e.HALF_FLOAT_OES:null,p=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:a,textureFormatFloat:o,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:f,textureTypeHalfFloat:d,textureTypeFloat:p}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _e(t,e){const n=e();return fe().getBool("DEBUG")&&i3e(t),n}function i3e(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+l3e(t,e))}const s3e=596e-10,a3e=65504;function o3e(t){return!!(fe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||s3e<Math.abs(t)&&Math.abs(t)<a3e)}function l3e(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function xv(t,e){return io(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function c3e(t,e){const n=io(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(_e(t,()=>t.shaderSource(n,e)),_e(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function u3e(t,e){const n=io(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(_e(t,()=>t.shaderSource(n,e)),_e(t,()=>t.compileShader(n)),fe().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw VZ(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const f3e=/ERROR: [0-9]+:([0-9]+):/g;function VZ(t,e){const n=f3e.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],i=t.split(`
`),s=i.length.toString().length+2,a=i.map((d,p)=>Xu((p+1).toString(),s)+d);let o=0;for(let d=0;d<a.length;d++)o=Math.max(a[d].length,o);const l=a.slice(0,r-1),c=a.slice(r-1,r),f=a.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${Xu(c[0],o)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join(`
`))}function h3e(t){return io(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function d3e(t,e){if(_e(t,()=>t.linkProgram(e)),!fe().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function T2(t,e){if(_e(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function p3e(t,e){const n=io(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return _e(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),_e(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function m3e(t,e){const n=io(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return _e(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),_e(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function g3e(t){return io(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function y3e(t,e){const n=fe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,i=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+i+".")}}function v3e(t){return io(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function QW(t,e,n,r,i,s,a){const o=t.getAttribLocation(e,n);return o===-1?!1:(_e(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),_e(t,()=>t.vertexAttribPointer(o,i,t.FLOAT,!1,s,a)),_e(t,()=>t.enableVertexAttribArray(o)),!0)}function b3e(t,e,n){T3e(t,n),_e(t,()=>t.activeTexture(t.TEXTURE0+n)),_e(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function x3e(t,e,n){return io(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function w3e(t,e,n){return t.getUniformLocation(e,n)}function S3e(t,e,n,r){_e(t,()=>b3e(t,e,r)),_e(t,()=>t.uniform1i(n,r))}function A2(t,e,n){_e(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),_e(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function JW(t,e){_e(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),_e(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function wv(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+C3e(t,e))}function C3e(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function io(t,e,n){const r=_e(t,()=>e());if(r==null)throw new Error(n);return r}function T3e(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const i=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${i}.`)}}function Df(t,e=2){return ve(t.slice(0,t.length-e))}function Mf(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Sv(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[Df(t),...Mf(t)]),e}function A3e(t,e=!1){let n=fe().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=fe().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&fe().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((o,l)=>l>=t.length-2?WN(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=ol(t).newShape);let i=ve(t),s=null;t.length<=1&&i<=n?s=[1,i]:t.length===2&&t[0]<=n&&t[1]<=n?s=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?s=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?s=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?s=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(s=[t[0],t[1]*t[2]*t[3]]);const a=s!=null&&Math.max(...s)>r&&Math.min(...s)<=(e?2:1)&&Math.min(...s)>0;if(s==null||a)if(e){const o=Df(t);let l=2,c=2;t.length&&([l,c]=Mf(t)),i=o*(l/2)*(c/2),s=gE(i).map(f=>f*2)}else s=gE(i);return s}function Cv(t){return t%2===0}function d0(t,e){if(t=t.slice(-2),e=e.slice(-2),Et(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||Cv(n)&&Cv(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&Cv(t[0])&&Cv(e[0])}let k2,$2;function k3e(t){if(k2==null){const e=As(t);k2=e.getParameter(e.MAX_TEXTURE_SIZE)}return k2}function $3e(t){if($2==null){const e=As(t);$2=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,$2)}function E3e(t){if(t===0)return 0;let e;const n=As(t);return Xi(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:Xi(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function Xi(t,e){return t.getExtension(e)!=null}function eG(t){try{if(As(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function I3e(t){if(t===0)return!1;const e=As(t);if(t===1){if(!Xi(e,"OES_texture_float"))return!1}else if(!Xi(e,"EXT_color_buffer_float"))return!1;return XE(e)}function N3e(t){if(t===0)return!1;const e=As(t);if(t===1){if(!Xi(e,"OES_texture_float")||!Xi(e,"WEBGL_color_buffer_float"))return!1}else{if(Xi(e,"EXT_color_buffer_float"))return XE(e);const r="EXT_color_buffer_half_float";if(Xi(e,r)){const i=e.getExtension(r);return O3e(e,i)}return!1}return XE(e)}function XE(t){const e=gR(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(s),a}function O3e(t,e){const n=gR(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(a),o}function _3e(t){return t!==2?!1:As(t).fenceSync!=null}function Ng(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&U(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Be=fe();Be.registerFlag("HAS_WEBGL",()=>Be.getNumber("WEBGL_VERSION")>0);Be.registerFlag("WEBGL_VERSION",()=>eG(2)?2:eG(1)?1:0);Be.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Be.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Be.get("WEBGL_VERSION")===2);Be.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Be.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Be.registerFlag("WEBGL_PACK",()=>Be.getBool("HAS_WEBGL"));Be.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_PACK_CLIP",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_PACK_REDUCE",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_LAZILY_UNPACK",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_CONV_IM2COL",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>k3e(Be.getNumber("WEBGL_VERSION")));Be.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>$3e(Be.getNumber("WEBGL_VERSION")));Be.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Be.getNumber("WEBGL_VERSION");return t===0?0:E3e(t)});Be.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Be.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!BK());Be.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>I3e(Be.getNumber("WEBGL_VERSION")));Be.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Be.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Be.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Be.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>N3e(Be.getNumber("WEBGL_VERSION")));Be.registerFlag("WEBGL_FENCE_API_ENABLED",()=>_3e(Be.getNumber("WEBGL_VERSION")));Be.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Be.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Be.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});Be.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>BK()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});Be.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Be.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Be.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Be.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Be.registerFlag("WEBGL_EXP_CONV",()=>!1);Be.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Be.getBool("IS_TEST"));Be.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Be.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Be.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Be.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pr(){let t,e,n,r,i,s,a,o,l,c;return fe().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",i="texture",s="outputColor",a="out vec4 outputColor;",o=fe().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",i="texture2D",s="gl_FragColor",a="",o=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:s,defineOutput:a,defineSpecialNaN:o,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fc(t,e,n="index"){const r=je(e);return r.map((i,s)=>{const a=`int ${t[s]} = ${n} / ${i}`,o=s===r.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * ${i}`:`index -= ${t[s]} * ${i}`;return`${a}; ${o};`}).join("")}function k1(t,e,n="index"){const r=je(e);return r.map((i,s)=>{const a=`int ${t[s]} = ${n} / outShapeStrides[${s}]`,o=s===r.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * outShapeStrides[${s}]`:`index -= ${t[s]} * outShapeStrides[${s}]`;return`${a}; ${o};`}).join("")}function R3e(t,e){const n=t.length,r=t.map(s=>`${e}[${s}]`),i=new Array(n-1);i[n-2]=r[n-1];for(let s=n-3;s>=0;--s)i[s]=`(${i[s+1]} * ${r[s+1]})`;return i}function D3e(t,e,n="index"){const r=t.map((s,a)=>a),i=R3e(r,e);return i.map((s,a)=>{const o=`int ${t[a]} = ${n} / ${i[a]}`,l=a===i.length-1?`int ${t[a+1]} = ${n} - ${t[a]} * ${i[a]}`:`index -= ${t[a]} * ${i[a]}`;return`${o}; ${l};`}).join("")}function yR(t){const e=je(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function vR(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const UZ=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:WZ}=TEe;function M3e(t,e,n){const r=[];if(t.forEach(g=>{const y=ve(g.shapeInfo.logicalShape);if(g.shapeInfo.isUniform?r.push(`uniform float ${g.name}${y>1?`[${y}]`:""};`):(r.push(`uniform sampler2D ${g.name};`),r.push(`uniform int offset${g.name};`)),n.enableShapeUniforms){const{uniformShape:x}=bR(n.packedInputs,g.shapeInfo.logicalShape,g.shapeInfo.texShape);switch(x.length){case 1:r.push(`uniform int ${g.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${g.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${g.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${g.name}Shape;`);break}r.push(`uniform ivec2 ${g.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(g=>{r.push(`uniform ${g.type} ${g.name}${g.arrayIndex?`[${g.arrayIndex}]`:""};`)});const i=r.join(`
`),s=t.map(g=>P3e(g,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),a=e.texShape,o=Pr(),l=B3e(o);let c,f,d=V3e(o);return e.isPacked?(c=F3e(e.logicalShape,a,n.enableShapeUniforms),f=j3e(o)):(c=L3e(e.logicalShape,a,n.enableShapeUniforms),f=z3e(o)),n.packedInputs&&(d+=q3e),[d,l,f,i,c,s,n.userCode].join(`
`)}function ah(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return iBe(t,e);case 1:return aBe(t,e);case 2:return lBe(t,e);case 3:return uBe(t,e);case 4:return hBe(t,e);case 5:return dBe(t);case 6:return pBe(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function GZ(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return rBe(t);case 1:return sBe(t,e);case 2:return oBe(t,e);case 3:return cBe(t,e);default:return fBe(t,e)}}function P3e(t,e,n=!1,r){let i="";n?i+=GZ(t,r):i+=ah(t,r);const s=t.shapeInfo.logicalShape,a=e.logicalShape;return s.length<=a.length&&(n?i+=mBe(t,e):i+=gBe(t,e)),i}function F3e(t,e,n){switch(t.length){case 0:return qZ();case 1:return H3e(t,e,n);case 2:return tBe(t,e,n);case 3:return X3e(t,e,n);default:return Z3e(t,e,n)}}function L3e(t,e,n){switch(t.length){case 0:return qZ();case 1:return K3e(t,e,n);case 2:return nBe(t,e,n);case 3:return Y3e(t,e,n);case 4:return Q3e(t,e,n);case 5:return J3e(t,e);case 6:return eBe(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function B3e(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function z3e(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function j3e(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function V3e(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${U3e}
    ${W3e}
    ${G3e}
  `}const U3e=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,W3e=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,G3e=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,q3e=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function qZ(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function H3e(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function K3e(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function X3e(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[2]/2),s=i*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec3(b, r, c);
    }
  `}function Y3e(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${k1(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=Fc(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function Z3e(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[t.length-1]/2),s=i*Math.ceil(t[t.length-2]/2);let a=s,o="",l="b, r, c";for(let c=2;c<t.length-1;c++)a*=t[t.length-c-1],o=`
      int b${c} = index / ${a};
      index -= b${c} * ${a};
    `+o,l=`b${c}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${o}

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec${t.length}(${l});
    }
  `}function Q3e(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${k1(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=Fc(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function J3e(t,e){const n=Fc(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function eBe(t,e){const n=Fc(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function tBe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(Et(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const i=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec2(r, c);
    }
  `}function nBe(t,e,n){return Et(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function Lc(t){return`offset${t}`}function rBe(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Pr();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function iBe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[i,s]=t.shapeInfo.texShape;if(i===1&&s===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=Lc(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${a});
      return sampleTexture(${n}, uv);
    }
  `;const[o,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${o}, ${l}, ${a});
      return sampleTexture(${n}, uv);
    }
  `}function sBe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,s=Pr();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${s.texture2D}(${n}, uv);
    }
  `;const a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${a[0]}, ${a[1]}, index);
      return ${s.texture2D}(${n}, uv);
    }
  `}function aBe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${oh(t)}
      }
    `;const i=t.shapeInfo.texShape,s=i[0],a=i[1];if(a===1&&s===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=Lc(n);return a===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / ${s}.0);
        return sampleTexture(${n}, uv);
      }
    `:s===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / ${a}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${o});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${s}, ${a}, index + ${o});
      return sampleTexture(${n}, uv);
    }
  `}function oBe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,a=s[0],o=s[1],l=Pr();if(s!=null&&Et(n,s))return e?`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}.0, ${a}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${i}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const c=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],f=Math.ceil(n[1]/2);return`
    vec4 ${i}(int row, int col) {
      vec2 uv = packedUVfrom2D(${f}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function lBe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape;if(s!=null&&Et(n,s)){if(e)return`
      float ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const p=s[0],g=s[1];return`
    float ${i}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${g}.0, ${p}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:a,keptDims:o}=ol(n),l=a;if(l.length<n.length){const p=lh(t,l),g=["row","col"];return`
      ${ah(p,e)}
      float ${i}(int row, int col) {
        return ${i}(${ch(g,o)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${oh(t)}
      }
    `;const c=s[0],f=s[1],d=Lc(r);return f===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${f}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${i}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${i}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${c}, ${f}, index);
    return sampleTexture(${r}, uv);
  }
`}function cBe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,a=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(n[0]===1){const p=n.slice(1),g=[1,2],y=lh(t,p),x=["b","row","col"];return`
        ${GZ(y,e)}
        vec4 ${i}(int b, int row, int col) {
          return ${i}(${ch(x,g)});
        }
      `}const o=Pr();if(e)return`
    vec4 ${i}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `;const l=a[0],c=a[1],f=Math.ceil(n[2]/2),d=f*Math.ceil(n[1]/2);return`
    vec4 ${i}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${d}, ${f}, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `}function uBe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[1]*n[2],a=n[2],{newShape:o,keptDims:l}=ol(n),c=o;if(c.length<n.length){const x=lh(t,c),b=["row","col","depth"];return`
        ${ah(x,e)}
        float ${i}(int row, int col, int depth) {
          return ${i}(${ch(b,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${s}, ${a}, 1)));
        ${oh(t)}
      }
    `;const f=t.shapeInfo.texShape,d=f[0],p=f[1],g=t.shapeInfo.flatOffset;if(p===s&&g==null)return e?`
      float ${i}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${i}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${a}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${p}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(p===a&&g==null)return e?`
      float ${i}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const y=Lc(r);return e?`
    float ${i}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${y};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${i}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s} + col * ${a} + depth + ${y};
        vec2 uv = uvFromFlat(${d}, ${p}, index);
        return sampleTexture(${r}, uv);
      }
  `}function fBe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=Pr();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${n}, uv);
    }
  `;const s=t.shapeInfo.logicalShape,a=s.length,o=t.shapeInfo.texShape,l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=l[0],f=l[1],d=Math.ceil(s[a-1]/2);let p=d*Math.ceil(s[a-2]/2),g="int b, int row, int col",y=`b * ${p} + (row / 2) * ${d} + (col / 2)`;for(let x=2;x<a-1;x++)g=`int b${x}, `+g,p*=s[a-x-1],y=`b${x} * ${p} + `+y;return`
    vec4 ${r}(${g}) {
      int index = ${y};
      int texR = index / ${f};
      int texC = index - texR * ${f};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}, ${c});
      return ${i.texture2D}(${n}, uv);
    }
  `}function hBe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[3],a=n[2]*s,o=n[1]*a,{newShape:l,keptDims:c}=ol(n);if(l.length<n.length){const S=lh(t,l),T=["row","col","depth","depth2"];return`
      ${ah(S,e)}
      float ${i}(int row, int col, int depth, int depth2) {
        return ${i}(${ch(T,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${o}, ${a}, ${s}, 1)));
        ${oh(t)}
      }
    `;const f=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],g=d[1],y=`int stride2 = ${r}Shape[3];`,x=`int stride1 = ${r}Shape[2] * stride2;`,b=`int stride0 = ${r}Shape[1] * stride1;`;if(g===o&&f==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        ${y}
        ${x}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${a}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(g===s&&f==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;const w=Lc(r);return e?`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${y}
      ${x}
      ${b}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${w});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${a} +
          depth * ${s} + depth2;
      vec2 uv = uvFromFlat(${p}, ${g}, index + ${w});
      return sampleTexture(${r}, uv);
    }
  `}function dBe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[4],s=e[3]*i,a=e[2]*s,o=e[1]*a,{newShape:l,keptDims:c}=ol(e);if(l.length<e.length){const x=lh(t,l),b=["row","col","depth","depth2","depth3"];return`
      ${ah(x)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${ch(b,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${o}, ${a}, ${s}, ${i})) +
          depth3;
        ${oh(t)}
      }
    `;const f=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],g=d[1];if(g===o&&f==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${a}, ${s}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(g===i&&f==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;const y=Lc(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${a} + depth * ${s} +
          depth2 * ${i} + depth3 + ${y};
      vec2 uv = uvFromFlat(${p}, ${g}, index);
      return sampleTexture(${n}, uv);
    }
  `}function pBe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:s}=ol(e);if(i.length<e.length){const b=lh(t,i),w=["row","col","depth","depth2","depth3","depth4"];return`
      ${ah(b)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${ch(w,s)});
      }
    `}const a=e[5],o=e[4]*a,l=e[3]*o,c=e[2]*l,f=e[1]*c;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${f}, ${c}, ${l}, ${o})) +
          dot(
            vec2(depth3, depth4),
            vec2(${a}, 1)));
        ${oh(t)}
      }
    `;const d=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,g=p[0],y=p[1];if(y===f&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${o}, ${a})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${y}.0, ${g}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(y===a&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${y}.0, ${g}.0);
        return sampleTexture(${n}, uv);
      }
    `;const x=Lc(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${f} + col * ${c} + depth * ${l} +
          depth2 * ${o} + depth3 * ${a} + depth4 + ${x};
      vec2 uv = uvFromFlat(${g}, ${y}, index);
      return sampleTexture(${n}, uv);
    }
  `}function oh(t){const e=t.name,n=ve(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function mBe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",s=t.shapeInfo.logicalShape.length,a=e.logicalShape.length,o=WZ(t.shapeInfo.logicalShape,e.logicalShape),l=Pt(a),c=a-s;let f;const d=["x","y","z","w","u","v"];s===0?f="":a<2&&o.length>=1?f="coords = 0;":f=o.map(S=>`coords.${d[S+c]} = 0;`).join(`
`);let p="";a<2&&s>0?p="coords":p=t.shapeInfo.logicalShape.map((S,T)=>`coords.${d[T+c]}`).join(", ");let g="return outputValue;";const x=ve(t.shapeInfo.logicalShape)===1,w=ve(e.logicalShape)===1;if(s===1&&!x&&!w)g=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(x&&!w)a===1?g=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:g=`
        return vec4(outputValue.x);
      `;else if(o.length){const S=s-2,T=s-1;o.indexOf(S)>-1&&o.indexOf(T)>-1?g="return vec4(outputValue.x);":o.indexOf(S)>-1?g="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(T)>-1&&(g="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${i}() {
      ${l} coords = getOutputCoords();
      ${f}
      vec4 outputValue = get${r}(${p});
      ${g}
    }
  `}function gBe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",s=e.texShape,a=t.shapeInfo.texShape,o=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&o===l&&t.shapeInfo.flatOffset==null&&Et(a,s))return`
      float ${i}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const c=Pt(l),f=WZ(t.shapeInfo.logicalShape,e.logicalShape),d=l-o;let p;const g=["x","y","z","w","u","v"];o===0?p="":l<2&&f.length>=1?p="coords = 0;":p=f.map(x=>`coords.${g[x+d]} = 0;`).join(`
`);let y="";return l<2&&o>0?y="coords":y=t.shapeInfo.logicalShape.map((x,b)=>`coords.${g[b+d]}`).join(", "),`
    float ${i}() {
      ${c} coords = getOutputCoords();
      ${p}
      return get${r}(${y});
    }
  `}function Pt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function bR(t,e,n){const{newShape:r,keptDims:i}=ol(e),s=e.length,a=t&&s===3&&e[0]===1,o=a?e.slice(1):r,l=!t&&s>1&&!Et(e,n)&&r.length<s||a;return{useSqueezeShape:l,uniformShape:l?o:e,keptDims:i}}function lh(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function ch(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yBe(t,e,n,r){const i=n.map((f,d)=>{const p={logicalShape:f.shape,texShape:f.isUniform?null:f.texData.texShape,isUniform:f.isUniform,isPacked:f.isUniform?!1:f.texData.isPacked,flatOffset:null};return f.texData!=null&&f.texData.slice!=null&&f.texData.slice.flatOffset>0&&(p.flatOffset=f.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:p}}),s=i.map(f=>f.shapeInfo),a={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},o=M3e(i,a,e),l=u3e(t.gl,o),c=t.createProgram(l);return fe().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:s,outShapeInfo:a,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:e,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:s,outShapeInfo:a},HZ(t,e,c)))}function HZ(t,e,n){const r=[],i=[];let s,a,o,l=null,c=null;c=t.getUniformLocation(n,"NAN",!1),fe().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const f=!1;for(const d of e.variableNames){const p={name:d,uniform:t.getUniformLocation(n,d,f),offset:t.getUniformLocation(n,`offset${d}`,f)};e.enableShapeUniforms&&(p.shape=t.getUniformLocation(n,`${d}Shape`,f),p.texShape=t.getUniformLocation(n,`${d}TexShape`,f)),r.push(p)}if(e.enableShapeUniforms&&(s=t.getUniformLocation(n,"outShape",f),o=t.getUniformLocation(n,"outShapeStrides",f),a=t.getUniformLocation(n,"outTexShape",f)),e.customUniforms)for(const d of e.customUniforms)i.push(t.getUniformLocation(n,d.name,f));return{variablesLocations:r,customUniformLocations:i,infLoc:l,nanLoc:c,outShapeLocation:s,outShapeStridesLocation:o,outTexShapeLocation:a}}function tG(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const i=n.logicalShape,s=e[r],a=s.shape;if(!Et(i,a))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${a} must match`);if(n.isUniform&&s.isUniform)return;const o=n.texShape,l=s.isUniform?null:s.texData.texShape;if(!Et(o,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${o} and ${l} must match`)})}function vBe(t,e,n,r,i){e.program.enableShapeUniforms||(tG(e.inShapeInfos,n),tG([e.outShapeInfo],[r]));const s=r.texData.texture,a=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(s.texture,a[0],a[1]):t.setOutputMatrixTexture(s.texture,a[0],a[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),fe().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const c=n[l],{uniform:f,offset:d,shape:p,texShape:g}=e.variablesLocations[l];if(p){const{uniformShape:y}=bR(e.program.packedInputs,c.shape,c.texData.texShape);switch(y.length){case 1:t.gl.uniform1iv(p,new Int32Array(y));break;case 2:t.gl.uniform2iv(p,new Int32Array(y));break;case 3:t.gl.uniform3iv(p,new Int32Array(y));break;case 4:t.gl.uniform4iv(p,new Int32Array(y));break}}if(g&&t.gl.uniform2i(g,c.texData.texShape[0],c.texData.texShape[1]),f!=null){if(c.isUniform){if(ve(c.shape)<2)t.gl.uniform1f(f,c.uniformValues[0]);else{let y=c.uniformValues;y instanceof Float32Array||(y=new Float32Array(y)),t.gl.uniform1fv(f,y)}continue}c.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,f,l)}}const o=e.outShapeLocation;if(o)switch(r.shape.length){case 1:t.gl.uniform1iv(o,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(o,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(o,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(o,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=je(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&i)for(let l=0;l<e.program.customUniforms.length;++l){const c=e.program.customUniforms[l],f=e.customUniformLocations[l],d=i[l];if(c.type==="float")t.gl.uniform1fv(f,d);else if(c.type==="vec2")t.gl.uniform2fv(f,d);else if(c.type==="vec3")t.gl.uniform3fv(f,d);else if(c.type==="vec4")t.gl.uniform4fv(f,d);else if(c.type==="int")t.gl.uniform1iv(f,d);else if(c.type==="ivec2")t.gl.uniform2iv(f,d);else if(c.type==="ivec3")t.gl.uniform3iv(f,d);else if(c.type==="ivec4")t.gl.uniform4iv(f,d);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function bBe(t,e,n){let r="";e.concat(n).forEach(a=>{const o=a.texData!=null&&a.texData.slice!=null&&a.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!a.isUniform){const l=a.texData.texShape,{useSqueezeShape:c,uniformShape:f,keptDims:d}=bR(t.packedInputs,a.shape,l);let p="",g="",y="";if(f.length===1&&t.packedInputs){const A=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];p=`${A[0]>1}_${A[1]>1}`}else if(f.length===2&&!t.packedInputs)g=`${f[0]>1}_${f[1]>1}`;else if(f.length>2&&!t.packedInputs){const A=je(f);y=`${A[0]===l[1]}_${A[A.length-1]===l[1]}`}const x=a.shape.length,b=f.length===2&&Et(a.shape,l),w=ve(a.shape)===1,S=Ef(a.shape,n.shape),T=!t.packedInputs&&x===n.shape.length&&Et(l,n.texData.texShape),k=t.packedInputs||f.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${x}_${T}_${c?d:""}_${f.length}_${w}_${S}_${b}_${p}_${g}_${y}_${k}_${o}`}else{const l=a.isUniform?"uniform":a.texData.texShape;r+=`${a.shape}_${l}_${o}`}});const i=t.userCode;let s=t.constructor.name;return s+="_"+r+"_"+i+`${fe().getNumber("WEBGL_VERSION")}`,s}function xr(t){return fe().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xBe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Jp.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Pr();this.outputShape=e,this.enableShapeUniforms=xr(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?k1(["r","c","d"],e):Fc(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wBe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Jp.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Pr();this.outputShape=e,this.enableShapeUniforms=xr(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?k1(["r","c","d"],e):Fc(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SBe{constructor(e){this.variableNames=["A"],this.outTexUsage=Ci.DOWNLOAD;const n=Pr();this.outputShape=e,this.userCode=`
      ${UZ}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CBe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Ci.DOWNLOAD;const n=Pr();this.outputShape=e,this.userCode=`
      ${UZ}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TBe={R:0,G:1,B:2,A:3};class nG{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const i=Pr();this.outputShape=e,this.enableShapeUniforms=xr(this.outputShape.length);let s="result";n&&(s="floor(result * 255. + 0.5)");let a="";for(let o=0;o<r.length;o++){const l=r[o];a+=`
          if(offset == ${o}) {
            result = values[${TBe[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?vR():yR(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${i.texture2D}(A, uv);
          ${a}
        }
        ${i.output} = vec4(${s}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ABe{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Pr();this.outputShape=e,this.enableShapeUniforms=xr(this.outputShape.length);let i="",s="result";n&&(s="floor(result * 255. + 0.5)");for(let a=0;a<=1;a++)for(let o=0;o<=1;o++){const l=a*2+o;i+=`
          localCoords = coords;
          if(localCoords[2] + ${o} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${o};
          if (localCoords[1] + ${a} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${a};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?vR():yR(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${i}

          ${r.output} = ${s};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kBe(t){const e=Pr(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return c3e(t,n)}function $Be(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return p3e(t,e)}function EBe(t){const e=new Uint16Array([0,1,2,2,1,3]);return m3e(t,e)}function Og(t,e,n,r,i,s){y3e(e,n);const a=g3e(t),o=t.TEXTURE_2D;return _e(t,()=>t.bindTexture(o,a)),_e(t,()=>t.texParameteri(o,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),_e(t,()=>t.texParameteri(o,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),_e(t,()=>t.texParameteri(o,t.TEXTURE_MIN_FILTER,t.NEAREST)),_e(t,()=>t.texParameteri(o,t.TEXTURE_MAG_FILTER,t.NEAREST)),fe().getNumber("WEBGL_VERSION")===1?_e(t,()=>t.texImage2D(o,0,r,e,n,0,i,s,null)):_e(t,()=>t.texStorage2D(o,1,r,e,n)),_e(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:a,texShape:[n,e]}}function KZ(t){return t.internalFormatFloat}function IBe(t,e,n,r){const[i,s]=Ig(e,n);return Og(t,i,s,KZ(r),r.textureFormatFloat,t.FLOAT)}function XZ(t){return t.internalFormatHalfFloat}function NBe(t,e,n,r){const[i,s]=Ig(e,n);return Og(t,i,s,XZ(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function YZ(t){return t.downloadTextureFormat}function OBe(t,e,n,r){const[i,s]=Ig(e,n);return Og(t,i,s,YZ(r),t.RGBA,t.UNSIGNED_BYTE)}function ZZ(t){return t.internalFormatPackedFloat}function _Be(t,e,n,r){const[i,s]=sh(e,n);return Og(t,i,s,ZZ(r),t.RGBA,t.FLOAT)}function QZ(t){return t.internalFormatPackedHalfFloat}function RBe(t,e,n,r){const[i,s]=sh(e,n);return Og(t,i,s,QZ(r),t.RGBA,r.textureTypeHalfFloat)}function DBe(t,e,n){return _e(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),QW(t,e,"clipSpacePos",n,3,20,0)&&QW(t,e,"uv",n,2,20,12)}function MBe(t,e,n,r,i,s){_e(t,()=>t.bindTexture(t.TEXTURE_2D,e));let a,o,l;i instanceof Uint8Array?(a=new Uint8Array(n*r*4),o=t.UNSIGNED_BYTE,l=t.RGBA):(a=new Float32Array(n*r*4),o=t.FLOAT,l=s.internalFormatPackedFloat),a.set(i),fe().getNumber("WEBGL_VERSION")===2?_e(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,o,a)):_e(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,o,a)),_e(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function PBe(t,e,n){_e(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?fe().getNumber("WEBGL_VERSION")===2?_e(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):_e(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):fe().getNumber("WEBGL_VERSION")===2?_e(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):_e(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),_e(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function FBe(t,e,n,r){const i=t.createBuffer();_e(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,i));const o=4*4*e*n;return _e(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,o,t.STREAM_READ)),_e(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),_e(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),i}function LBe(t,e,n){const r=t,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function BBe(t,e,n,r){const[i,s]=Ig(e,n),a=4,o=new Uint8Array(n3e(e*n,a));return _e(t,()=>t.readPixels(0,0,i,s,r.downloadTextureFormat,t.UNSIGNED_BYTE,o)),new Float32Array(o.buffer)}function zBe(t,e,n,r,i,s,a,o){const l=t,c=new Float32Array(r3e(s,a));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function jBe(t,e,n){const r=new Float32Array(e*n*4);return _e(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class E2{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=fe().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,JLe(n,e)):this.gl=As(n),e=this.gl,fe().getNumber("WEBGL_VERSION")===2){const s=e;this.createVertexArray=()=>_e(s,()=>s.createVertexArray()),this.bindVertexArray=a=>_e(s,()=>s.bindVertexArray(a)),this.deleteVertexArray=a=>_e(s,()=>s.deleteVertexArray(a)),this.getVertexArray=()=>_e(s,()=>s.getParameter(s.VERTEX_ARRAY_BINDING))}else if(e!=null){const s=e.getExtension("OES_vertex_array_object");if(s==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>_e(e,()=>s.createVertexArrayOES()),this.bindVertexArray=a=>_e(e,()=>s.bindVertexArrayOES(a)),this.deleteVertexArray=a=>_e(e,()=>s.deleteVertexArrayOES(a)),this.getVertexArray=()=>_e(e,()=>e.getParameter(s.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const i="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),fe().getNumber("WEBGL_VERSION")===1){const s="OES_texture_float",a="OES_texture_half_float";if(this.textureFloatExtension=xv(this.gl,s),Xi(this.gl,a))this.textureHalfFloatExtension=xv(this.gl,a);else if(fe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Xi(this.gl,i))this.colorBufferHalfFloatExtension=xv(this.gl,i);else if(fe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Xi(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Xi(this.gl,i))this.colorBufferHalfFloatExtension=this.gl.getExtension(i);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=$Be(this.gl),this.indexBuffer=EBe(this.gl),this.framebuffer=v3e(this.gl),this.textureConfig=gR(this.gl,this.textureHalfFloatExtension)}get debug(){return fe().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;_e(e,()=>e.finish()),_e(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),_e(e,()=>e.deleteFramebuffer(this.framebuffer)),_e(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),_e(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),_e(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),IBe(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),NBe(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),OBe(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),PBe(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,i){this.throwIfDisposed(),MBe(this.gl,e,n,r,i,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),RBe(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),_Be(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(JW(this.gl,this.framebuffer),this.outputTexture=null),_e(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>BBe(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,i,s,a){return zBe(this.gl,e,n,r,i,s,a,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return LBe(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const i=FBe(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(fe().getBool("WEBGL_FENCE_API_ENABLED")){const i=e,s=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const a=i.clientWaitSync(s,0,0);return a===i.ALREADY_SIGNALED||a===i.CONDITION_SATISFIED},n=s}else fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>jBe(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=kBe(n));const r=h3e(n);_e(n,()=>n.attachShader(r,this.vertexShader)),_e(n,()=>n.attachShader(r,e)),d3e(n,r);const i=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&T2(n,i),i}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;_e(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),DBe(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(_e(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&T2(this.gl,this.program),_e(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?x3e(this.gl,e,n):w3e(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),_e(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),S3e(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[i,s]=sh(n,r);this.setOutputMatrixTextureDriver(e,i,s)}setOutputMatrixWriteRegion(e,n,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,n)}setOutputPackedMatrixWriteRegion(e,n,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&T2(this.gl,this.program),wv(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}_e(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),_e(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=xv(this.gl,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.createQuery();return r.beginQuery(i.TIME_ELAPSED_EXT,s),s}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await FU(()=>this.disposed||this.isQueryAvailable(e,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),s&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),i=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=VBe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in fe().platform&&(r=fe().platform.setTimeoutCustom.bind(fe().platform)),FU(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),A2(this.gl,e,this.framebuffer),this.debug&&wv(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(A2(this.gl,this.outputTexture,this.framebuffer),this.debug&&wv(this.gl)):JW(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const i=this.gl;A2(i,e,this.framebuffer),this.debug&&wv(i),this.outputTexture=e,_e(i,()=>i.viewport(0,0,n,r)),_e(i,()=>i.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,i){this.throwIfDisposed(),_e(this.gl,()=>this.gl.scissor(e,n,r,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function VBe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:UBe,bincountImpl:JZ,bincountReduceImpl:WBe,bitwiseAndImpl:GBe,castImpl:qBe,ceilImpl:HBe,concatImpl:KBe,equalImpl:XBe,expImpl:YBe,expm1Impl:ZBe,floorImpl:QBe,gatherNdImpl:JBe,gatherV2Impl:eze,greaterImpl:tze,greaterEqualImpl:nze,lessImpl:rze,lessEqualImpl:ize,linSpaceImpl:sze,logImpl:aze,maxImpl:oze,maximumImpl:lze,minimumImpl:cze,multiplyImpl:uze,negImpl:fze,notEqualImpl:hze,prodImpl:dze,raggedGatherImpl:pze,raggedRangeImpl:mze,raggedTensorToTensorImpl:gze,rangeImpl:yze,rsqrtImpl:vze,scatterImpl:bze,sigmoidImpl:xze,simpleAbsImpl:eQ,sliceImpl:wze,sparseFillEmptyRowsImpl:Sze,sparseReshapeImpl:Cze,sparseSegmentReductionImpl:tQ,sqrtImpl:Tze,staticRegexReplaceImpl:Aze,stridedSliceImpl:kze,stringNGramsImpl:$ze,stringSplitImpl:Eze,stringToHashBucketFastImpl:Ize,subImpl:Nze,tileImpl:Oze,topKImpl:_ze,transposeImpl:xR,uniqueImpl:Rze}=PRe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nQ(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function _r(t,e){return e===1?[t]:nQ(t,e)}function Dze(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mze{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=xr(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=_r("rc",this.rank),r=Pt(this.rank),i=this.getOutOfBoundsCondition(n),s=this.getSetup(n),a=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${i}) {
            setOutput(vec4(0));
          } else {
            ${s}

            setOutput(vec4(${a}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let i=0;i<=1;i++){let s=`${r===0?"r":"rp1"}, ${i===0?"c":"cp1"}`;for(let a=2;a<this.rank;a++)s=`${e[e.length-1-a]},`+s;n.push(s)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],i=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${i};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rQ{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=xr(this.outputShape.length);let r="";for(let i=0;i<4;i++){let s="thisRC = rc;";i%2===1&&(s+="thisRC.z += 1;"),i>1&&(s+="thisRC.y += 1;"),r+=`
        ${s}
        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${i}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${i>0?"}":""}
      `}this.userCode=`
      ${Pze(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?vR():yR(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function Pze(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?D3e(["r","c","d"],"inputShape"):Fc(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Fze{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const i=iG(n,r),s=sG(e,i,r);s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]);const a=rG(e,i,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();const l=this.freeTextures[s].pop();return this.usedTextures[s].push(l),l}let o;return i===nr.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===nr.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===nr.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===nr.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===nr.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[s].push(o),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),o}releaseTexture(e,n,r,i){if(this.freeTextures==null)return;const s=iG(r,i),a=sG(n,s,i);a in this.freeTextures||(this.freeTextures[a]=[]);const o=rG(n,s,this.gpgpu.gl,this.gpgpu.textureConfig,i),l=fe().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[a].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;const c=this.usedTextures[a],f=c&&c.indexOf(e);if(f==null||f<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[f]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function Lze(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function rG(t,e,n,r,i){const s=Bze(e,r);let a;if(i){const[l,c]=sh(t[0],t[1]);a=l*c}else{const[l,c]=Ig(t[0],t[1]);a=l*c}const o=Lze(n,s);return a*o}function Bze(t,e){switch(t){case nr.PACKED_2X2_FLOAT32:return ZZ(e);case nr.PACKED_2X2_FLOAT16:return QZ(e);case nr.UNPACKED_FLOAT32:return KZ(e);case nr.UNPACKED_FLOAT16:return XZ(e);case nr.PACKED_4X1_UNSIGNED_BYTE:return YZ(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function zze(t){return fe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?nr.PACKED_2X2_FLOAT32:nr.UNPACKED_FLOAT32:t?nr.PACKED_2X2_FLOAT16:nr.UNPACKED_FLOAT16}function iG(t,e){if(t===Ci.UPLOAD)return nr.PACKED_2X2_FLOAT32;if(t===Ci.RENDER||t==null)return zze(e);if(t===Ci.DOWNLOAD||t===Ci.PIXELS)return nr.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function sG(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vs{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=xr(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const is="if (isnan(x)) return x;",jze="return x;",aG="return abs(x);",Vze="return (x >= 0.0) ? x : (exp(x) - 1.0);",Uze=is+`
  return (x < 0.0) ? 0.0 : x;
`,Wze=is+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Ro="return x;",Gze="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qze="return x;",Hze=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Kze=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Xze=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Yze="return 1.0 / (1.0 + exp(-1.0 * x));";class Bo{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=xr(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zze{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=xr(this.outputShape.length);const n=e.length,r=_r("rc",n),i=Pt(n),s=Dze(n,r),a=r.slice(-2),o=n<=1?"rc":`vec2(${a.join(",")})`;this.userCode=`
      void main() {
        ${i} rc = getOutputCoords();
        vec4 packedInput = getA(${s});

        setOutput(getChannel(packedInput, ${o}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qze=$X,Jze=1e-7,e4e=1e-4,Tv={};function t4e(t){return t in Tv||(Tv[t]={}),Tv[t]}const n4e=fe().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),r4e=600;function i4e(){return fe().global.screen==null?1024:fe().global.screen.height*fe().global.screen.width*window.devicePixelRatio*r4e/1024/1024}class $1 extends UN{nextDataId(){return $1.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!fe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof E2)n=e;else{const r=As(fe().getNumber("WEBGL_VERSION"),e);n=new E2(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=As(fe().getNumber("WEBGL_VERSION"));n=new E2(r),this.binaryCache=t4e(fe().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new Fze(this.gpgpu),this.numMBBeforeWarning=i4e(),this.texData=new Z8(this,Ds())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,i,s,a){const o=this.makeTensorInfo(n,r),l=this.texData.get(o.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[i,s]},l.texShape=[i,s];const c=Sv(n),f=new nG(c,!1,a),d=this.runWebGLProgram(f,[o],r,[[i,s]]);return d.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(o),d.dataId}write(e,n,r){if((fe().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||fe().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const i={id:this.nextDataId()};return this.texData.set(i,{shape:n,dtype:r,values:e,usage:Ci.UPLOAD,refCount:1}),i}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,i,s){if(fe().getBool("DEBUG")&&this.checkNumericalProblems(n),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:i,values:n,usage:Ci.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:i,complexTensorInfos:s,slice:a,shape:o,isPacked:l}=n;if(a!=null){let p;l?p=new Bo(o,Ro):p=new Vs(o,Ro);const g=this.runWebGLProgram(p,[{dataId:e,shape:o,dtype:i}],i),y=this.readSync(g.dataId);return this.disposeIntermediateTensorInfo(g),y}if(r!=null)return this.convertAndCacheOnCPU(e);if(i==="string")return r;const c=this.activeTimers!=null;let f;c&&(f=Br());let d;if(i==="complex64"){const p=this.readSync(s.real.dataId),g=this.readSync(s.imag.dataId);d=Ya(p,g)}else d=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=Br()-f),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const y=this.pendingRead.get(e);return new Promise(x=>y.push(x))}const n=this.texData.get(e),{values:r,shape:i,slice:s,dtype:a,complexTensorInfos:o,isPacked:l}=n;if(s!=null){let y;l?y=new Bo(i,Ro):y=new Vs(i,Ro);const x=this.runWebGLProgram(y,[{dataId:e,shape:i,dtype:a}],a),b=this.read(x.dataId);return this.disposeIntermediateTensorInfo(x),b}if(r!=null)return this.convertAndCacheOnCPU(e);if(fe().getBool("DEBUG")&&!fe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&fe().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,f;if(a!=="complex64"&&fe().get("WEBGL_BUFFER_SUPPORTED")){f=this.decode(e);const y=this.texData.get(f.dataId);c=this.gpgpu.createBufferFromTexture(y.texture.texture,...bv(i))}this.pendingRead.set(e,[]),a!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(a==="complex64"){const y=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]),x=y[0],b=y[1];d=Ya(x,b)}else if(c==null)d=this.getValuesFromTexture(e);else{const y=ve(i);d=this.gpgpu.downloadFloat32MatrixFromBuffer(c,y)}if(f!=null&&this.disposeIntermediateTensorInfo(f),c!=null){const y=this.gpgpu.gl;_e(y,()=>y.deleteBuffer(c))}const p=this.convertAndCacheOnCPU(e,d),g=this.pendingRead.get(e);return this.pendingRead.delete(e),g.forEach(y=>y(p)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Ds().removeDataId(e,this),this.pendingDeletes--),p}readToGPU(e,n={}){const r=this.texData.get(e),{values:i,shape:s,slice:a,dtype:o,isPacked:l,texture:c}=r;if(o==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(a!=null){let g;l?g=new Bo(s,Ro):g=new Vs(s,Ro);const y=this.runWebGLProgram(g,[{dataId:e,shape:s,dtype:o}],o),x=this.readToGPU(y,n);return this.disposeIntermediateTensorInfo(y),x}if(c==null)throw i!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const f=this.decode(e,n.customTexShape),d=Ds().makeTensorFromTensorInfo(f),p=this.texData.get(f.dataId);return Object.assign({tensorRef:d},p.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(i=>Ko(i));return at(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return at(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!o3e(r))throw fe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:i}=this.texData.get(e),s=ve(n);if(fe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const p=this.decode(e),g=this.texData.get(p.dataId),y=this.gpgpu.downloadMatrixFromPackedTexture(g.texture.texture,...bv(n)).subarray(0,s);return this.disposeIntermediateTensorInfo(p),y}const a=fe().getBool("WEBGL_PACK")&&i===!0,o=a?Sv(n):n,l=a?new CBe(o):new SBe(o),c=this.runWebGLProgram(l,[{shape:o,dtype:r,dataId:e}],"float32"),f=this.texData.get(c.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(f.texture.texture,f.texShape[0],f.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(c),d}timerAvailable(){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let i=!1;this.programTimersStack==null?(this.programTimersStack=r,i=!0):this.activeTimers.push(r),this.activeTimers=r,e();const s=pc(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),a=pc(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,i&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(s);o.kernelMs=USe(l),o.getExtraProfileInfo=()=>l.map((c,f)=>({name:a[f],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Br(),endMs:null}}endTimer(e){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Br(),e)}async getQueryTime(e){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:i,usage:s,isPacked:a,slice:o}=this.texData.get(e),l=o&&o.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(n,i,s,a)));const f=this.texData.get(e);f.texture=null,f.texShape=null,f.isPacked=!1,f.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=n4e){return fe().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&ve(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){Si("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return Qze(e.shape,n)}packedUnaryOp(e,n,r){const i=new Bo(e.shape,n),s=this.compileAndRun(i,[e],r);return Ds().makeTensorFromTensorInfo(s)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const i=eQ(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,i)}if(fe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,aG,e.dtype);const n=new Vs(e.shape,aG),r=this.compileAndRun(n,[e]);return Ds().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&gm(r[0])){const s=r.map(a=>Uo(a));i=this.write(s,e,n)}else i=this.write(r,e,n);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:n}}makeOutput(e,n,r){return Ds().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new Zze(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new Mze(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[Df(e.shape),...Mf(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},s=[Df(n),...Mf(n)],a=new rQ(s,r),o=!0,l=[r],c=this.runWebGLProgram(a,[i],e.dtype,l,o);return{dataId:c.dataId,shape:n,dtype:c.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:i,shape:s,dtype:a}=r;if(n!=null){const p=ve(s),g=n[0]*n[1]*4;U(p<=g,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const o=Sv(s);let l;i?l=new wBe(o):l=new xBe(o);const c=!0,f=[n??bv(o)],d=this.runWebGLProgram(l,[{shape:o,dtype:a,dataId:e}],a,f,c,n);return{dtype:a,shape:s,dataId:d.dataId}}runWebGLProgram(e,n,r,i,s=!1,a){const o=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(o.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===Jp.DENSE){const w=a??bv(e.outputShape);l.texShape=w.map(S=>S*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),ve(o.shape)===0)return l.values=mr(o.dtype,0),o;const c=[],f=n.map(w=>{if(w.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let S=this.texData.get(w.dataId);if(S.texture==null){if(!e.packedInputs&&ve(w.shape)<=fe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:w.shape,texData:null,isUniform:!0,uniformValues:S.values};e.packedInputs&&(S.isPacked=!0,S.shape=w.shape)}if(this.uploadToGPU(w.dataId),!!S.isPacked!=!!e.packedInputs)w=S.isPacked?this.unpackTensor(w):this.packTensor(w),c.push(w),S=this.texData.get(w.dataId);else if(S.isPacked&&!d0(S.shape,w.shape)){const T=w,k=w.shape;w.shape=S.shape,w=this.packedReshape(w,k),c.push(w),S=this.texData.get(w.dataId),T.shape=k}return{shape:w.shape,texData:S,isUniform:!1}});this.uploadToGPU(o.dataId);const d={shape:o.shape,texData:l,isUniform:!1},p=bBe(e,f,d),g=this.getAndSaveBinary(p,()=>yBe(this.gpgpu,e,f,d)),y=this.activeTimers!=null;let x;y&&(x=this.startTimer()),fe().get("ENGINE_COMPILE_ONLY")||vBe(this.gpgpu,g,f,d,i),c.forEach(w=>this.disposeIntermediateTensorInfo(w)),y&&(x=this.endTimer(x),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(x)}));const b=fe().getNumber("WEBGL_FLUSH_THRESHOLD");if(b>0){const w=Br();w-this.lastGlFlushTime>b&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=w)}if(!fe().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&s===!1){const w=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),w}return o}compileAndRun(e,n,r,i,s=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,i,s)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(fe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=ce(()=>{if(!fe().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=fe().getBool("DEBUG");fe().set("DEBUG",!1);const n=this.abs(kt(1e-8)).dataSync()[0];if(fe().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?Jze:e4e}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:i,values:s,texture:a,usage:o,isPacked:l}=n;if(a!=null)return;const c=this.activeTimers!=null;let f;c&&(f=Br());let d=n.texShape;if(d==null&&(d=A3e(r,l),n.texShape=d),s!=null){const p=Sv(r);let g,y=d[1],x=d[0];const b=s instanceof Uint8Array||s instanceof Uint8ClampedArray;(l||!b)&&([y,x]=sh(d[0],d[1])),l?g=new ABe(p,b):g=new nG(p,b);const w=b?[x,y]:d,S=this.makeTensorInfo(w,i),T=this.texData.get(S.dataId);b?T.usage=Ci.PIXELS:T.usage=Ci.UPLOAD,T.texShape=w,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(S.dataId),y,x,s);const k=[[x,y]],E=this.runWebGLProgram(g,[S],i,k,!0),I=this.texData.get(E.dataId);n.texShape=I.texShape,n.isPacked=I.isPacked,n.usage=I.usage,fe().get("ENGINE_COMPILE_ONLY")?this.disposeData(E.dataId):(n.texture=I.texture,n.values=null,this.texData.delete(E.dataId)),this.disposeIntermediateTensorInfo(S),c&&(this.uploadWaitMs+=Br()-f)}else{const p=this.acquireTexture(d,o,i,l);n.texture=p}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:i}=r;return n!=null&&(r.values=s4e(n,i)),r.values}acquireTexture(e,n,r,i){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${s} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,i)}computeBytes(e,n){return e[0]*e[1]*Ub(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(i=>{try{this.checkCompletion_(n),i(!0)}catch(s){throw s}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await WX(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(VZ(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:i,nanLoc:s,outShapeLocation:a,outShapeStridesLocation:o,outTexShapeLocation:l}=HZ(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=i,e.nanLoc=s,e.outShapeLocation=a,e.outShapeStridesLocation=o,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:i,height:s,width:a,channels:o}=e,l=Ds().backend;if(!l.gpgpu.gl.isTexture(i))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(i,n,r,s,a,o);return Ds().makeTensorFromDataId(c,n,r,l)}}$1.nextDataId=0;function s4e(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */zK()&&WK("webgl",()=>new $1,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wR=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class kc{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=nt(n,r),this.enableShapeUniforms=xr(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bc=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class uh{constructor(e,n,r,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=nt(n,r);const s=this.outputShape.length;this.enableShapeUniforms=xr(s);let a="";if(i)if(s===0||ve(this.outputShape)===1)a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(a=`
          ${Pt(s)} coords = getOutputCoords();
        `,s===1)this.enableShapeUniforms?a+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:a+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=_r("coords",s);this.enableShapeUniforms?a+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= outShape[${s} - 2];
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= outShape[${s} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:a+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= ${this.outputShape[s-2]};
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= ${this.outputShape[s-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${a}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ci(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const a4e={kernelName:Fm,backendName:"webgl",kernelFunc:ci};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gl(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,s=n.makeTensorInfo(r.shape,"complex64"),a=n.texData.get(s.dataId),o=ci({inputs:{x:r},backend:n}),l=ci({inputs:{x:i},backend:n});return a.complexTensorInfos={real:o,imag:l},s}const o4e={kernelName:nO,backendName:"webgl",kernelFunc:gl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iQ="return (a < 0.) ? b * a : a;",sQ=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function l4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:s}=r,a=n.makeTensorInfo([],"float32",ll(s,"float32")),o=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new uh(sQ,i.shape,a.shape):new kc(iQ,i.shape,a.shape),l=n.runWebGLProgram(o,[i,a],"float32");return n.disposeIntermediateTensorInfo(a),l}const c4e={kernelName:wx,backendName:"webgl",kernelFunc:l4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aQ="return (a < 0.) ? b * a : a;",oQ=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function u4e(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e,s=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new uh(oQ,r.shape,i.shape):new kc(aQ,r.shape,i.shape);return n.runWebGLProgram(s,[r,i],"float32")}const f4e={kernelName:zx,backendName:"webgl",kernelFunc:u4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fh="if (isnan(x)) return x;";function xt({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:i,backend:s})=>{const{x:a}=i,o=s,l=r||a.dtype;if(o.shouldExecuteOnCPU([a])&&n!=null){const d=o.texData.get(a.dataId),p=n(d.values,l);return o.makeTensorInfo(a.shape,l,p)}const c=fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let f;return c?f=new Bo(a.shape,e):f=new Vs(a.shape,t),o.runWebGLProgram(f,[a],l)}}function or({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:s}){return({inputs:a,backend:o})=>{const{a:l,b:c}=a,f=o;if(r&&l.dtype==="complex64"){const y=f.texData.get(l.dataId),x=f.texData.get(c.dataId),[b,w]=[[y.complexTensorInfos.real,x.complexTensorInfos.real],[y.complexTensorInfos.imag,x.complexTensorInfos.imag]].map(T=>{const[k,A]=T,E={dataId:k.dataId,dtype:k.dtype,shape:l.shape},I={dataId:A.dataId,dtype:A.dtype,shape:c.shape},N=new kc(t,l.shape,c.shape);return f.runWebGLProgram(N,[E,I],oi(k.dtype,A.dtype))}),S=gl({inputs:{real:b,imag:w},backend:f});return f.disposeIntermediateTensorInfo(b),f.disposeIntermediateTensorInfo(w),S}const d=s||oi(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||f.shouldExecuteOnCPU([l,c]))&&i!=null){const y=f.texData.get(l.dataId).values,x=f.texData.get(c.dataId).values,b=l.dtype==="string"?Za(y):y,w=l.dtype==="string"?Za(x):x,[S,T]=i(l.shape,c.shape,b,w,d),k=f.makeTensorInfo(T,d),A=f.texData.get(k.dataId);return A.values=S,k}const p=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let g;return p?g=new uh(e,l.shape,c.shape,n):g=new kc(t,l.shape,c.shape),f.runWebGLProgram(g,[l,c],d)}}function em(t,e=!1){if(t==="linear")return e?qze:jze;if(t==="relu")return e?Kze:Uze;if(t==="elu")return e?Hze:Vze;if(t==="relu6")return e?Xze:Wze;if(t==="prelu")return e?oQ:aQ;if(t==="leakyrelu")return e?sQ:iQ;if(t==="sigmoid")return e?Yze:Gze;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lQ{constructor(e,n,r,i=!1,s=!1,a=!1,o=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=xr(this.outputShape.length);const f=i?e[1]:e[2],d=Math.ceil(f/2),p=i?"i * 2, rc.y":"rc.y, i * 2",g=s?"rc.z, i * 2":"i * 2, rc.z",y=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],x=s?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let b="",w="";o&&(l?b=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:c?b=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:b=`vec4 activation(vec4 x) {
          ${o}
        }`,w="result = activation(result);");const S=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let T="rc.x",k="rc.x";e[0]<n[0]?T=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(k=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${b}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${T};
        int batchB = ${k};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${p});
          vec4 b = getMatrixB(batchB, ${g});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${y[0]} * ${x[0]});
          result += (${y[1]} * ${x[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${S}

        ${w}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oG={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class lG{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=nt(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cG="return a * b;";function SR(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,s=oi(r.dtype,i.dtype);if(r.dtype==="complex64"){const o=n.texData.get(r.dataId),l=n.texData.get(i.dataId),c=new lG(oG.REAL,r.shape,i.shape),f=new lG(oG.IMAG,r.shape,i.shape),d=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:r.shape},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:i.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:i.shape}],p=n.runWebGLProgram(c,d,"float32"),g=n.runWebGLProgram(f,d,"float32"),y=gl({inputs:{real:p,imag:g},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),y}if(n.shouldExecuteOnCPU([r,i])){const o=n.texData.get(r.dataId),l=n.texData.get(i.dataId),[c,f]=uze(r.shape,i.shape,o.values,l.values,s),d=n.makeTensorInfo(f,s),p=n.texData.get(d.dataId);return p.values=c,d}let a;return fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?a=new uh(cG,r.shape,i.shape):a=new kc(cG,r.shape,i.shape),n.runWebGLProgram(a,[r,i],s)}const h4e={kernelName:qm,backendName:"webgl",kernelFunc:SR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d4e(t,e,n){const r=[Df(t.shape),...Mf(t.shape)],i={dtype:t.dtype,shape:r,dataId:t.dataId},s=[Df(e),...Mf(e)],a=new rQ(s,r),o=!0,l=[r],c=n.runWebGLProgram(a,[i],t.dtype,l,o);return{dataId:c.dataId,shape:e,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:s}=r,a=n,o=ve(i.shape),l=J8(s,o),c=ve(l);U(o===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${i.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`);const f=a.texData.get(i.dataId);return f.isPacked&&!d0(i.shape,l)&&!(f.texture!==null&&d0(f.shape,l))?d4e(i,l,a):(a.incRef(i.dataId),{dataId:i.dataId,shape:l,dtype:i.dtype})}const p4e={kernelName:Vx,backendName:"webgl",kernelFunc:Oe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uG{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:a}=e;this.outputShape=[i,a];const o=Math.floor(r/4)*4,l=r%4;let c="sumValue += dot(values, ones);";if(n!=null){const d=1/n;c=`sumValue += dot(values * ${Af(d)?d.toPrecision(2):d}, ones);`}let f="";s%r>0&&(f=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${o}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${o};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m4e{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:a}=e;this.outputShape=[i,a];let o="0.0",l="";n==="prod"?o="1.0":n==="min"?(o="1.0 / 1e-20",l="min"):n==="max"&&(o="-1.0 / 1e-20",l="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");const f=Math.floor(r/4)*4,d=r%4;let p=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,g="vec4";n==="all"?(o="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,g="bvec4"):n==="any"&&(o="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,g="bvec4");let y="";s%r>0&&(y=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${o};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${y}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${o});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${f}; i += 4) {
          int inIdx = inOffset + i;
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${p}
        }

        int inIdx = inOffset + ${f};
        if (${d===1}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===2}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===3}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${p}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g4e(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=f1(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function zc(t,e,n,r){const i=g4e(t.shape);let s=t;for(let a=0;a<i.length;a++){const{inSize:o,windowSize:l,outSize:c}=i[a];let f,d;n==="mean"?f=a===0?new uG({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:c},o):new uG({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:c}):f=new m4e({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:c},n),d=s,s=r.runWebGLProgram(f,[s],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return s}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y4e{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let a=0;a<r.length;a++)r[a]=e[n[a]];this.outputShape=r,this.rank=r.length;const i=Pt(this.rank),s=v4e(n);this.userCode=`
    void main() {
      ${i} resRC = getOutputCoords();
      setOutput(getA(${s}));
    }
    `}}function v4e(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let i=0;i<t.length;i++)r[t[i]]=n[i];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b4e{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let f=0;f<r.length;f++)r[f]=e[n[f]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const i=Pt(this.rank),s=nQ("rc",this.rank),a=new Array(this.rank);for(let f=0;f<n.length;f++)a[n[f]]=s[f];const o=`vec2(${a.slice(-2).join()})`,l=`++${s[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${a.join()}), ${o})`;this.userCode=`
    void main() {
      ${i} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${s[this.rank-1]};
      if(++${s[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E1(t,e,n){const r=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new b4e(t.shape,e):new y4e(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x4e(t,e,n,r){const i=e,s=t.shape.length,a=ot(i,t.shape);let o=a;const l=sn(o,s),c=l!=null;let f=t;c&&(f=E1(t,l,r),o=bn(o.length,s)),ar("sum",o,s);const[d,p]=Yn(f.shape,o);let g=d;n&&(g=$n(d,a));const y=ve(p),b=ve(t.shape)/y,w=Oe({inputs:{x:f},attrs:{shape:[b,y]},backend:r}),S=PO(t.dtype),T=zc(w,S,"sum",r),k=Oe({inputs:{x:T},attrs:{shape:g},backend:r});return r.disposeIntermediateTensorInfo(w),r.disposeIntermediateTensorInfo(T),c&&r.disposeIntermediateTensorInfo(f),k}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I1(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r;return x4e(i,s,a,n)}const w4e={kernelName:Kx,backendName:"webgl",kernelFunc:I1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mr(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{perm:s}=r,a=n,o=i.shape.length,l=new Array(o);for(let f=0;f<l.length;f++)l[f]=i.shape[s[f]];let c;if(a.shouldExecuteOnCPU([i])){const d=a.texData.get(i.dataId).values,p=xR(d,i.shape,i.dtype,s,l);c=a.makeTensorInfo(l,i.dtype);const g=a.texData.get(c.dataId);g.values=p}else c=E1(i,s,a);return c}const S4e={kernelName:Yu,backendName:"webgl",kernelFunc:Mr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cQ=1e3;function p0({a:t,b:e,transposeA:n,transposeB:r,backend:i,bias:s=null,preluActivationWeights:a=null,leakyreluAlpha:o=0,activation:l=null}){const c=t.shape.length,f=e.shape.length,d=n?t.shape[c-2]:t.shape[c-1],p=r?e.shape[f-1]:e.shape[f-2],g=n?t.shape[c-1]:t.shape[c-2],y=r?e.shape[f-2]:e.shape[f-1],x=t.shape.slice(0,-2),b=e.shape.slice(0,-2),w=ve(x),S=ve(b),k=nt(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([g,y]);U(d===p,()=>`Error in matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const A=n?[w,d,g]:[w,g,d],E=r?[S,y,p]:[S,p,y],I=Oe({inputs:{x:t},backend:i,attrs:{shape:A}}),N=Oe({inputs:{x:e},backend:i,attrs:{shape:E}}),_=[I,N],R=Math.max(w,S),O=n?I.shape[1]:I.shape[2],F=s!=null,z=a!=null,W=l==="leakyrelu",P=l!=null?em(l,!0):null,M=F||z||W||P!=null;let j;if((g===1||y===1)&&O>cQ&&M===!1){let q=I,L=N;n&&(q=Mr({inputs:{x:I},backend:i,attrs:{perm:[0,2,1]}}),_.push(q)),r&&(L=Mr({inputs:{x:N},backend:i,attrs:{perm:[0,2,1]}}),_.push(L));const G=y!==1,H=y===1;let K=q;G&&(K=Oe({inputs:{x:q},backend:i,attrs:{shape:[R,O,1]}}),_.push(K));const oe=y===1?2:1;let pe=L;H&&(pe=Oe({inputs:{x:L},backend:i,attrs:{shape:[R,1,O]}}),_.push(pe));const be=SR({inputs:{a:K,b:pe},backend:i});j=I1({inputs:{x:be},backend:i,attrs:{axis:oe,keepDims:!0}}),_.push(be)}else{const q=oi(t.dtype,e.dtype),L=new lQ(A,E,[R,g,y],n,r,F,P,z,W),G=[I,N];if(s!=null&&G.push(s),z&&G.push(a),W){const H=i.makeTensorInfo([],"float32",ll(o,"float32"));G.push(H),_.push(H)}j=i.runWebGLProgram(L,G,q)}const V=Oe({inputs:{x:j},backend:i,attrs:{shape:k}});_.push(j);for(const q of _)i.disposeIntermediateTensorInfo(q);return V}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C4e(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s,bias:a,preluActivationWeights:o}=e,{transposeA:l,transposeB:c,activation:f,leakyreluAlpha:d}=r;return p0({a:i,b:s,transposeA:l,transposeB:c,backend:n,bias:a,preluActivationWeights:o,leakyreluAlpha:d,activation:f})}const T4e={kernelName:Wb,backendName:"webgl",kernelFunc:C4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fG="return abs(x);";function A4e(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const s=n.texData.get(r.dataId),a=eQ(s.values);return n.makeTensorInfo(r.shape,r.dtype,a)}let i;return fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new Bo(r.shape,fG):i=new Vs(r.shape,fG),n.runWebGLProgram(i,[r],r.dtype)}const k4e={kernelName:tx,backendName:"webgl",kernelFunc:A4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $4e=is+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,E4e=xt({opSnippet:$4e}),I4e={kernelName:ym,backendName:"webgl",kernelFunc:E4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N4e=is+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,O4e=xt({opSnippet:N4e}),_4e={kernelName:vm,backendName:"webgl",kernelFunc:O4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hG="return a + b;",R4e=or({opSnippet:hG,packedOpSnippet:hG,supportsComplex:!0,cpuKernelImpl:UBe}),D4e={kernelName:Qf,backendName:"webgl",kernelFunc:R4e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class M4e{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((s,a)=>`T${a}`);const r=[];this.variableNames.forEach(s=>{r.push(`float v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class P4e{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((s,a)=>`T${a}`);const r=[];this.variableNames.forEach(s=>{r.push(`vec4 v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lv(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return ci({inputs:{x:r[0]},backend:n});if(r.length>fe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),c=Lv({inputs:r.slice(0,l),backend:n}),f=Lv({inputs:r.slice(l),backend:n});return Lv({inputs:[c,f],backend:n})}const i=r.map(l=>l.dtype).reduce((l,c)=>oi(l,c)),s=r.map(l=>l.shape),o=fe().getBool("WEBGL_PACK")?new P4e(r[0].shape,s):new M4e(r[0].shape,s);return n.runWebGLProgram(o,r,i)}const F4e={kernelName:XN,backendName:"webgl",kernelFunc:Lv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r,o=i.shape.length,l=ot(s,i.shape);let c=l;const f=sn(c,o);let d=i;f!=null&&(d=Mr({inputs:{x:i},backend:n,attrs:{perm:f}}),c=bn(c.length,o)),ar("all",c,o);const[p,g]=Yn(d.shape,c),y=ve(g),x=Oe({inputs:{x:d},backend:n,attrs:{shape:[-1,y]}}),b=zc(x,x.dtype,"all",n);let w;if(a){const S=$n(p,l);w=Oe({inputs:{x:b},backend:n,attrs:{shape:S}})}else w=Oe({inputs:{x:b},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),f!=null&&n.disposeIntermediateTensorInfo(d),w}const B4e={kernelName:YN,backendName:"webgl",kernelFunc:L4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r,o=i.shape.length,l=ot(s,i.shape);let c=l;const f=sn(c,o);let d=i;f!=null&&(d=Mr({inputs:{x:i},backend:n,attrs:{perm:f}}),c=bn(c.length,o)),ar("any",c,o);const[p,g]=Yn(d.shape,c),y=ve(g),x=Oe({inputs:{x:d},backend:n,attrs:{shape:[-1,y]}}),b=zc(x,x.dtype,"any",n);let w;if(a){const S=$n(p,l);w=Oe({inputs:{x:b},backend:n,attrs:{shape:S}})}else w=Oe({inputs:{x:b},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),f!=null&&n.disposeIntermediateTensorInfo(d),w}const j4e={kernelName:ZN,backendName:"webgl",kernelFunc:z4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class V4e{constructor(e,n,r){this.variableNames=["A"];const{windowSize:i,batchSize:s,outSize:a}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[s,a];const o=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${i}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${o} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class U4e{constructor(e,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,U(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const s=e[e.length-1],a=Math.ceil(s/n);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),i||this.variableNames.push("bestIndicesA");const o=this.outputShape,l=o.length,c=Pt(l),f=_r("coords",l);let d,p;if(a===1){p=l+1;const N=Pt(p);d=`
        ${N} sourceLocR = ${N}(${f.join()}, 0);
        ++${f[l-1]};
        ${N} sourceLocG = ${N}(${f.join()}, 0);
        ++${f[l-2]};
        ${N} sourceLocA = ${N}(${f.join()}, 0);
        --${f[l-1]};
        ${N} sourceLocB = ${N}(${f.join()}, 0);
        --${f[l-2]};`}else p=l,d=`
        ${c} sourceLocR = coords;
        ++${f[l-1]};
        ${c} sourceLocG = coords;
        ++${f[l-2]};
        ${c} sourceLocA = coords;
        --${f[l-1]};
        ${c} sourceLocB = coords;
        --${f[l-2]};`;const g=["x","y","z","w","u","v"].slice(0,p),y="."+g[p-1],x=g.map(N=>"int "+N),b=_r("sourceLocR",p-1).concat("inIdx.r"),w=_r("sourceLocG",p-1).concat("inIdx.g"),S=_r("sourceLocB",p-1).concat("inIdx.b"),T=_r("sourceLocA",p-1).concat("inIdx.a"),k=r==="max"?"greaterThan":"lessThan",A=i?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${w.join()}),
                             getBestIndicesAChannel(${S.join()}),
                             getBestIndicesAChannel(${T.join()})));`,E=`vec4(
            getAChannel(${b.join()}),
            hasNextCol ? getAChannel(${w.join()}) : 0.,
            hasNextRow ? getAChannel(${S.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${T.join()}) : 0.)`,I=i?"":`
      float getBestIndicesAChannel(${x.join()}) {
        return getChannel(getBestIndicesA(${g.join()}),
                                          vec2(${g.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${x.join()}) {
        return getChannel(getA(${g.join()}),
                               vec2(${g.slice(-2).join()}));
      }
      ${I}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${f[l-1]} < ${o[l-1]-1};
        bool hasNextRow = ${f[l-2]} < ${o[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${y}, sourceLocG${y},
          sourceLocB${y}, sourceLocA${y}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${E};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${A}
          vec4 candidate = ${E};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${k}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uQ(t,e,n,r=null){let i=e.shape[0],s=e.shape[1];r!=null&&(i=r.shape[0],s=r.shape[1]);const a=f1(s),o={windowSize:a,inSize:s,batchSize:i,outSize:Math.ceil(s/a)},l=new V4e(o,n,r==null),c=[e];r!=null&&c.push(r);const f=t.runWebGLProgram(l,c,"int32");if(f.shape[1]===1)return f;const d=uQ(t,e,n,f);return t.disposeIntermediateTensorInfo(f),d}function fQ(t,e,n,r=null){const i=r!=null?r.shape:e.shape,s=i[i.length-1],a=f1(s),o=new U4e(i,a,n,r==null),l=r==null?[e]:[e,r],c=t.runWebGLProgram(o,l,"int32");if(c.shape.length===e.shape.length){const f=fQ(t,e,n,c);return t.disposeIntermediateTensorInfo(c),f}return c}function hQ(t,e,n,r){const i=[n];if(ar("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,e.shape.length),!fe().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const s=[],a=t.texData.get(e.dataId),o=a!==null&&a.isPacked;let l=e;o&&(l=t.unpackTensor(e),s.push(l));const[c,f]=Yn(l.shape,i),d=ve(f),p=Oe({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});s.push(p);const g=uQ(t,p,r);s.push(g);const y=Oe({inputs:{x:g},backend:t,attrs:{shape:c}});return s.forEach(x=>t.disposeIntermediateTensorInfo(x)),y}return fQ(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;let a=ot(s,i.shape);const o=sn(a,i.shape.length);let l=i;const c=[];o!=null&&(l=Mr({inputs:{x:i},backend:n,attrs:{perm:o}}),c.push(l),a=bn(a.length,l.shape.length)),ar("argMax",[a[0]],l.shape.length);const f=hQ(n,l,a[0],"max");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),f}const G4e={kernelName:nx,backendName:"webgl",kernelFunc:W4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;let a=ot(s,i.shape);const o=sn(a,i.shape.length);let l=i;const c=[];o!=null&&(l=Mr({inputs:{x:i},backend:n,attrs:{perm:o}}),c.push(l),a=bn(a.length,l.shape.length)),ar("argMin",[a[0]],l.shape.length);const f=hQ(n,l,a[0],"min");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),f}const H4e={kernelName:rx,backendName:"webgl",kernelFunc:q4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K4e=is+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,X4e=xt({opSnippet:K4e}),Y4e={kernelName:bm,backendName:"webgl",kernelFunc:X4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z4e=is+"return log(x + sqrt(x * x + 1.0));",Q4e=xt({opSnippet:Z4e}),J4e={kernelName:xm,backendName:"webgl",kernelFunc:Q4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eje=is+`
  return atan(x);
`,tje=xt({opSnippet:eje}),nje={kernelName:wm,backendName:"webgl",kernelFunc:tje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rje=wR+`
  return atan(a, b);
`,ije=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Bc+`
  return result;
`,sje=or({opSnippet:rje,packedOpSnippet:ije}),aje={kernelName:Cm,backendName:"webgl",kernelFunc:sje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oje=is+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,lje=xt({opSnippet:oje}),cje={kernelName:Sm,backendName:"webgl",kernelFunc:lje};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tm{constructor(e,n,r,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,o=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,f=e.dilationWidth,d=e.effectiveFilterHeight,p=e.effectiveFilterWidth,g=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;const x=n==="avg",b=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,w=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let S="0.0";if(x||(S="-1.0 / 1e-20"),r){const N=">=";this.userCode=`
        const ivec2 strides = ivec2(${o}, ${l});
        const ivec2 pads = ivec2(${g}, ${y});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p};
                wC += ${f}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${N} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${i?s?b:w:`wR * ${p} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const T="max";let k=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(k="avgValue / max(count, 1.0)");const A=Math.floor(a/4)*4,E=a%4,I=`
      if (${x}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${T}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${o}, ${l});
      const ivec2 pads = ivec2(${g}, ${y});
      const float initializationValue = ${S};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${S});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${A}; wC += 4) {
            int xC = xCCorner + wC * ${f};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              getValue(batch, xR, xC + 2 * ${f}, d),
              getValue(batch, xR, xC + 3 * ${f}, d)
            );

            ${I}
          }

          int xC = xCCorner + ${A};
          if (${E===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${I}
          } else if (${E===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              initializationValue,
              initializationValue
            );

            ${I}
          } else if (${E===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              getValue(batch, xR, xC + 2 * ${f}, d),
              initializationValue
            );

            ${I}
          }
        }
        setOutput(${k});
      }
    `}}class CR{constructor(e,n,r,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,o=e.strideDepth,l=e.strideHeight,c=e.strideWidth,f=e.dilationDepth,d=e.dilationHeight,p=e.dilationWidth,g=e.effectiveFilterDepth,y=e.effectiveFilterHeight,x=e.effectiveFilterWidth,b=e.padInfo.front,w=e.padInfo.top,S=e.padInfo.left;this.outputShape=e.outShape;const T=n==="avg";let k="0.0";if(T||(k="-1.0 / 1e-20"),r){const R=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${o}, ${l}, ${c});
        const ivec3 pads = ivec3(${b}, ${w}, ${S});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${g};
              wD += ${f}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${y};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${x};
                  wC += ${p}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${R} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${i?s?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${y} * ${x} +
                      wR * ${x} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const A="max";let E=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(E="avgValue / max(count, 1.0)");const I=Math.floor(a/4)*4,N=a%4,_=`
      if (${T}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${A}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${o}, ${l}, ${c});
      const ivec3 pads = ivec3(${b}, ${w}, ${S});
      const float initializationValue = ${k};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${k});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${g};
            wD += ${f}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${y};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${I}; wC += 4) {
              int xC = xCCorner + wC * ${p};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                getValue(batch, xD, xR, xC + 3 * ${p}, ch)
              );

              ${_}
            }

            int xC = xCCorner + ${I};
            if (${N===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${_}
            } else if (${N===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                initializationValue,
                initializationValue
              );

              ${_}
            } else if (${N===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                initializationValue
              );

              ${_}
            }
          }
        }
        setOutput(${E});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uje(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;Ng(i,"avgPool");const{filterSize:s,strides:a,pad:o,dimRoundingMode:l}=r,c=1;U(vr(a,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const f=ns(i.shape,s,a,c,o,l);if(f.filterWidth===1&&f.filterHeight===1&&Et(f.inShape,f.outShape))return ci({inputs:{x:i},backend:n});const d=new tm(f,"avg",!1);return n.runWebGLProgram(d,[i],"float32")}const fje={kernelName:ix,backendName:"webgl",kernelFunc:uje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hje(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:a,pad:o,dimRoundingMode:l,dataFormat:c}=r,f=[1,1,1],d=no(i.shape,s,a,f,o,l,c),p=new CR(d,"avg",!1);return n.runWebGLProgram(p,[i],"float32")}const dje={kernelName:sx,backendName:"webgl",kernelFunc:hje};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pje{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,a=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,f=l-1-e.padInfo.top,d=c-1-e.padInfo.left,p=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${f}, ${d});
      const float avgMultiplier = float(${p});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${o}) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class mje{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,s=e.strideDepth,a=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,f=e.dilationWidth,d=e.effectiveFilterDepth,p=e.effectiveFilterHeight,g=e.effectiveFilterWidth,y=d-1-e.padInfo.front,x=p-1-e.padInfo.top,b=g-1-e.padInfo.left,w=1/(n*r*i);this.userCode=`
      const ivec3 pads = ivec3(${y}, ${x}, ${b});
      const float avgMultiplier = float(${w});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${s}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${p};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${g};
                wC += ${f}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gje(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,a=s,{filterSize:o,strides:l,pad:c,dimRoundingMode:f}=r,d=[1,1,1],p=no(a.shape,o,l,d,c,f),g=new mje(p);return n.runWebGLProgram(g,[i],a.dtype)}const yje={kernelName:JN,backendName:"webgl",kernelFunc:gje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vje(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,a=s;Ng([i,s],"avgPoolGrad");const{filterSize:o,strides:l,pad:c}=r,f=ns(a.shape,o,l,1,c),d=new pje(f);return n.runWebGLProgram(d,[i],a.dtype)}const bje={kernelName:QN,backendName:"webgl",kernelFunc:vje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xje(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s}=e,{transposeA:a,transposeB:o}=r;return p0({a:i,b:s,transposeA:a,transposeB:o,backend:n})}const wje={kernelName:ax,backendName:"webgl",kernelFunc:xje};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sje{constructor(e,n,r,i,s,a){this.outputShape=[],this.variableNames=["x","mean","variance"],nt(e,n),nt(e,r);let o="0.0";i!=null&&(nt(e,i),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="1.0";s!=null&&(nt(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${o};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${a}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cje{constructor(e,n,r,i,s,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],nt(e,n),nt(e,r);let o="vec4(0.0)";i!=null&&(nt(e,i),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="vec4(1.0)";s!=null&&(nt(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${o};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${a}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tje=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:i,variance:s,offset:a,scale:o}=t;U(i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),U(a==null||i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),U(o==null||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const c=[r,i,s];let f=null;a!=null&&(f=a.shape,c.push(a));let d=null;o!=null&&(d=o.shape,c.push(o));const p=fe().getBool("WEBGL_PACK_NORMALIZATION")?new Cje(r.shape,i.shape,s.shape,f,d,l):new Sje(r.shape,i.shape,s.shape,f,d,l);return e.runWebGLProgram(p,c,c[0].dtype)},Aje={kernelName:vx,backendName:"webgl",kernelFunc:Tje};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kje{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=Pt(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=$je(this.rank);let i;const s=e.map((a,o)=>`sourceLoc.${YE[o]} = start[${o}] + coords.${YE[o]};`);i=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${s.join(`
`)}
      `,this.userCode=`
      void main() {
        ${i}
        setOutput(getSource(${r}));
      }
    `}}const YE=["x","y","z","w","u","v"];function $je(t){if(t===1)return"sourceLoc";if(t<=6)return YE.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Eje{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Pt(this.rank),r=_r("coords",this.rank),i=_r("sourceLoc",this.rank),s=this.rank===1?"sourceLoc":`vec2(${i.slice(-2).join()})`,a=`getChannel(getSource(${i.join()}), ${s})`,o=`
      result.x = ${a};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${i[this.rank-1]};
        result.y = ${a};
        --${i[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${i[this.rank-2]};
        result.z = ${a};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${i[this.rank-1]};
          result.w = ${a};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((f,d)=>`start[${d}]`).join()});`:e.map((f,d)=>`${i[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${o}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ije(t,e,n,r){const i=r.texData.get(t.dataId),s=r.makeTensorInfo(n,t.dtype),a=r.texData.get(s.dataId);Object.assign(a,i),a.refCount=1,a.shape=n,a.dtype=t.dtype;let o=v_(e,je(t.shape));i.slice&&(o+=i.slice.flatOffset),a.slice={flatOffset:o,origDataId:i.slice&&i.slice.origDataId||t.dataId};const l=r.dataRefCount.get(a.slice.origDataId)||1;return r.dataRefCount.set(a.slice.origDataId,l+1),s}function hh(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,size:a}=r,[o,l]=u1(i,s,a);if(m_(i,o,l),ve(l)===0)return n.makeTensorInfo(l,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||i.dtype==="string"){const d=n.texData.get(i.dataId),p=wze(d.values,o,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,p)}const{isPacked:c}=n.texData.get(i.dataId),f=y_(i.shape,o,l);if(c||!f){const d=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Eje(l):new kje(l),p=[o];return n.runWebGLProgram(d,[i],i.dtype,p)}return n.uploadToGPU(i.dataId),Ije(i,o,l,n)}const Nje={kernelName:Hx,backendName:"webgl",kernelFunc:hh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oje=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,crops:a}=r;U(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const o=s.reduce((S,T)=>S*T),l=yg(i.shape,s,o),c=vg(l.length,s.length),f=bg(i.shape,s,o),d=C_(a,s.length),p=T_(f,a,s.length),g=[],y=Oe({inputs:{x:i},backend:n,attrs:{shape:l}}),x=Mr({inputs:{x:y},backend:n,attrs:{perm:c}}),b=Oe({inputs:{x},backend:n,attrs:{shape:f}}),w=hh({inputs:{x:b},backend:n,attrs:{begin:d,size:p}});return g.push(y),g.push(x),g.push(b),g.forEach(S=>n.disposeIntermediateTensorInfo(S)),w},_je={kernelName:ox,backendName:"webgl",kernelFunc:Oje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rje(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:a}=r,o=n.readSync(i.dataId),l=n.readSync(s.dataId),c=JZ(o,l,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,c)}const Dje={kernelName:eO,backendName:"webgl",kernelFunc:Rje};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mje=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,Pje=`
  return float(int(a.r) & int(b.r));
`;function Fje(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,s=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS"),a=fe().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,i])||a===1){const l=n.texData.get(r.dataId).values,c=n.texData.get(i.dataId).values,[f,d]=GBe(r.shape,i.shape,l,c,r.dtype),p=n.makeTensorInfo(d,r.dtype),g=n.texData.get(p.dataId);return g.values=f,p}let o;return s?o=new uh(Mje,r.shape,i.shape,!1):o=new kc(Pje,r.shape,i.shape),n.runWebGLProgram(o,[r,i],r.dtype)}const Lje={kernelName:tO,backendName:"webgl",kernelFunc:Fje};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bje(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,s=n.readSync(r.dataId),a=n.readSync(i.dataId),o=nt(Array.from(s),Array.from(a));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const zje={kernelName:sK,backendName:"webgl",kernelFunc:Bje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jje="return float(a != b);",dQ=or({opSnippet:jje,cpuKernelImpl:hze,dtype:"bool"}),Vje={kernelName:Mx,backendName:"webgl",kernelFunc:dQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _g(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return ci({inputs:{x:i.complexTensorInfos.real},backend:n})}const Uje={kernelName:kO,backendName:"webgl",kernelFunc:_g};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wje="return float(int(x));";function Gje(t,e){const n=new Vs(t.shape,Wje),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZE(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:s}=r;if(s==="complex64"){if(i.dtype==="complex64")return ci({inputs:{x:i},backend:n});const a=qn(i.shape),o=ZE({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),l=gl({inputs:{real:o,imag:a},backend:n});return a.dispose(),n.disposeIntermediateTensorInfo(o),l}if(i.dtype==="complex64"){const a=_g({inputs:{input:i},backend:n}),o=ZE({inputs:{x:a},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(a),o}if(!eK(i.dtype,s)){const a=ci({inputs:{x:i},backend:n});return{dataId:a.dataId,shape:a.shape,dtype:s}}if(n.shouldExecuteOnCPU([i])){const a=n.texData.get(i.dataId).values,[o,l,c]=qBe(a,i.shape,i.dtype,s);return n.makeTensorInfo(o,l,c)}if(s==="int32")return Gje(i,n);if(s==="bool"){const a=n.makeTensorInfo([],"bool",mr("bool",1)),l=dQ({inputs:{a:i,b:a},backend:n});return n.disposeIntermediateTensorInfo(a),l}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${s}`)}const qje={kernelName:Tm,backendName:"webgl",kernelFunc:ZE};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dG="return ceil(x);",Hje=xt({opSnippet:dG,packedOpSnippet:dG,cpuKernelImpl:HBe}),Kje={kernelName:Am,backendName:"webgl",kernelFunc:Hje};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xje{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yje{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zje(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{clipValueMin:s,clipValueMax:a}=r;let o;fe().getBool("WEBGL_PACK_CLIP")?o=new Yje(i.shape):o=new Xje(i.shape);const l=[[s],[a]];return n.runWebGLProgram(o,[i],i.dtype,l)}const Qje={kernelName:km,backendName:"webgl",kernelFunc:Zje};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Jje{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pG(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function eVe(t){const{inputs:e,backend:n}=t,{x:r}=e,i=n.texData.get(r.dataId),s=new Jje(r.shape),a=[pG(r,i.complexTensorInfos.real),pG(r,i.complexTensorInfos.imag)];return n.runWebGLProgram(s,a,a[0].dtype)}const tVe={kernelName:lx,backendName:"webgl",kernelFunc:eVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nVe{constructor(e){this.outputShape=[],this.outputShape=Ys(e,1),this.variableNames=e.map((a,o)=>`T${o}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let a=1;a<n.length;a++)n[a]=n[a-1]+e[a][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let a=1;a<n.length;a++){const o=n[a-1];r.push(`else if (yC < ${n[a]}) setOutput(getT${a}(yR, yC-${o}));`)}const i=n.length,s=n[n.length-1];r.push(`else setOutput(getT${i}(yR, yC-${s}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rVe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Ys(e,n);const r=this.outputShape,i=r.length,s=Pt(i),a=_r("coords",i),o=["x","y","z","w","u","v"].slice(0,i);this.variableNames=e.map((x,b)=>`T${b}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let x=1;x<l.length;x++)l[x]=l[x-1]+e[x][n];const c=o[n],f=o.slice(-2),d=o.join();let p=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${f.join()}));
        }`;for(let x=1;x<l.length;x++){const b=l[x-1];p+=`
        if (${c} < ${l[x]}  && ${c} >= ${l[x-1]}) {
          return getChannel(
            getT${x}(${Av(o,c,b)}),
            vec2(${Av(f,c,b)}));
        }`}const g=l.length,y=l[l.length-1];p+=`
        return getChannel(
          getT${g}(${Av(o,c,y)}),
          vec2(${Av(f,c,y)}));`,this.userCode=`
      float getValue(${o.map(x=>"int "+x)}) {
        ${p}
      }

      void main() {
        ${s} coords = getOutputCoords();
        vec4 result = vec4(getValue(${a}), 0., 0., 0.);

        ${a[i-1]} = ${a[i-1]} + 1;
        if (${a[i-1]} < ${r[i-1]}) {
          result.g = getValue(${a});
        }

        ${a[i-2]} = ${a[i-2]} + 1;
        if (${a[i-2]} < ${r[i-2]}) {
          result.a = getValue(${a});
        }

        ${a[i-1]} = ${a[i-1]} - 1;
        if (${a[i-2]} < ${r[i-2]} &&
            ${a[i-1]} < ${r[i-1]}) {
          result.b = getValue(${a});
        }
        setOutput(result);
      }
    `}}function Av(t,e,n){const r=t.indexOf(e);return t.map((s,a)=>a===r?`${s} - ${n}`:s).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N1(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return ci({inputs:{x:i.complexTensorInfos.imag},backend:n})}const iVe={kernelName:vO,backendName:"webgl",kernelFunc:N1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jd(t,e,n){const r=t[0].dtype;if(r==="complex64"){const g=t.map(S=>_g({inputs:{input:S},backend:n})),y=t.map(S=>N1({inputs:{input:S},backend:n})),x=jd(g,e,n),b=jd(y,e,n),w=gl({inputs:{real:x,imag:b},backend:n});return g.forEach(S=>n.disposeIntermediateTensorInfo(S)),y.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),w}let i=n.shouldExecuteOnCPU(t);if(r==="string"&&(i=!0),i){const g=t.map(k=>{const E=[-1,ve(k.shape.slice(e))];return Oe({inputs:{x:k},backend:n,attrs:{shape:E}})}),y=g.map(k=>({vals:n.readSync(k.dataId),shape:k.shape})),x=Ys(g.map(k=>k.shape),1),b=g[0].shape[0]===1,w=KBe(y,x,r,b),S=Ys(t.map(k=>k.shape),e),T=n.makeTensorInfo(S,r,w);return g.forEach(k=>n.disposeIntermediateTensorInfo(k)),T}const s=t.filter(g=>ve(g.shape)>0),a=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&s[0].shape.length>1;if(s.length===1){const g=a?new Vs(t[0].shape,Ro):new Bo(t[0].shape,Ro);return n.runWebGLProgram(g,t,r)}const o=fe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(s.length>o){const g=[];for(let x=0;x<s.length;x+=o){const b=s.slice(x,x+o);g.push(jd(b,e,n))}const y=jd(g,e,n);for(const x of g)n.disposeIntermediateTensorInfo(x);return y}if(a){const g=new rVe(s.map(y=>y.shape),e);return n.runWebGLProgram(g,s,r)}const{tensors2D:l,outShape:c}=sVe(s,e,n),f=new nVe(l.map(g=>g.shape)),d=n.runWebGLProgram(f,l,r);l.forEach(g=>n.disposeIntermediateTensorInfo(g));const p=Oe({inputs:{x:d},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(d),p}function sVe(t,e,n){const r=Ys(t.map(s=>s.shape),e);return{tensors2D:t.map(s=>Oe({inputs:{x:s},attrs:{shape:[-1,ve(s.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pQ(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,s=ot(i,e[0].shape)[0],a=e.map(c=>c.shape);x_(a,s);const o=Ys(e.map(c=>c.shape),s);if(ve(o)===0)return n.makeTensorInfo(o,e[0].dtype,[]);const l=e.filter(c=>ve(c.shape)>0);return l.length===1?ci({inputs:{x:l[0]},backend:n}):jd(l,s,n)}const aVe={kernelName:cx,backendName:"webgl",kernelFunc:pQ};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mQ{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const a=e.padInfo.top,o=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,f=e.dilationHeight,d=e.dilationWidth,p=e.filterHeight,g=e.filterWidth,y=Math.floor(e.inChannels/4)*4,x=e.inChannels%4,b=e.dataFormat==="channelsLast",w=b?1:2,S=b?2:3,T=b?3:1;let k="",A="";r&&(i?k=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?k=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:k=`
          float activation(float x) {
            ${r}
          }
        `,A="result = activation(result);");const E=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${k}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${a}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${T}];

        ivec2 xRCCorner =
            ivec2(coords[${w}], coords[${S}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${p}; wR++) {
          int xR = xRCorner + wR * ${f};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${g}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${y}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${b}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${x===1}) {

              if (${b}) {
                dotProd +=
                    getX(batch, xR, xC, ${y}) *
                    getW(wR, wC, ${y}, d2);
              } else {
                dotProd +=
                    getX(batch, ${y}, xR, xC) *
                    getW(wR, wC, ${y}, d2);
              }

            } else if (${x===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${y}, d2),
                getW(wR, wC, ${y} + 1, d2)
              );

              if (${b}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${y}),
                  getX(batch, xR, xC, ${y} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${y}, xR, xC),
                  getX(batch, ${y} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${x===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${y}, d2),
                getW(wR, wC, ${y} + 1, d2),
                getW(wR, wC, ${y} + 2, d2)
              );

              if (${b}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${y}),
                  getX(batch, xR, xC, ${y} + 1),
                  getX(batch, xR, xC, ${y} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${y}, xR, xC),
                  getX(batch, ${y} + 1, xR, xC),
                  getX(batch, ${y} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${E}
        ${A}
        setOutput(result);
      }
    `}}class oVe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,i=e.padInfo.left,s=e.strideDepth,a=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,f=e.dilationWidth,d=e.filterDepth,p=e.filterHeight,g=e.filterWidth,y=Math.floor(e.inChannels/4)*4,x=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${s}, ${a}, ${o});
      const ivec3 pads = ivec3(${n}, ${r}, ${i});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${g}; wC++) {
              int xC = xCCorner + wC * ${f};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${y}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${x===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${y}) *
                  getW(wF, wR, wC, ${y}, d2);
              } else if (${x===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${y}),
                  getX(batch, xF, xR, xC, ${y} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${y}, d2),
                  getW(wF, wR, wC, ${y} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${x===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${y}),
                  getX(batch, xF, xR, xC, ${y} + 1),
                  getX(batch, xF, xR, xC, ${y} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${y}, d2),
                  getW(wF, wR, wC, ${y} + 1, d2),
                  getW(wF, wR, wC, ${y} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gQ{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=xr(this.outputShape.length);const a=e.padInfo.left,o=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,f=e.filterWidth,d=f;let p=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let b=0;b<f;b++)p+=`
           vec4 xTexelC${b*2};
           int xTexelC${b*2}Ready;
           vec4 xTexelC${b*2+1};
           int xTexelC${b*2+1}Ready;
           vec4 xC${b};`;p+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let b=0;b<f;b++)p+=`
           xTexelC${b*2} = vec4(0.0);
           xTexelC${b*2}Ready = 0;
           xTexelC${b*2+1} = vec4(0.0);
           xTexelC${b*2+1}Ready = 0;
           xC${b} = vec4(0.0);`;p+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let b=0;b<(d+1)/2;b++){const w=b*2;if(p+=`
           xC = xCCorner + ${w*l};
           `,o===1){if(w<f&&(a%2===1?(p+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }
               `,l===1&&w>0?p+=`
                 xC${w} = vec4(xTexelC${w-2}.zw, xTexelC${w}.xy);
                 `:p+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${w} = vec4(previous.zw, xTexelC${w}.xy);
                   } else {
                     xC${w} = vec4(0.0, 0.0, xTexelC${w}.xy);
                   }
                   `):p+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }

                 xC${w} = xTexelC${w};
                 `,w+1<f)){const S=a%2===0?WN(l):l;l%2===0&&a%2===1||l%2!==0&&a%2!==1?(p+=`
                   xCOffset = xC + imod(pads[1], 2) + ${S};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                     xTexelC${w+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${w+1}.zw = vec2(0.0);
                     }
                     xTexelC${w+1}Ready = 1;
                   }
                   `,l>1?p+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${w+1} = vec4(previous.zw, xTexelC${w+1}.xy);
                     } else {
                      xC${w+1} = vec4(0.0, 0.0, xTexelC${w+1}.xy);
                     }
                     `:p+=`
                     xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.xy);
                     `):S===1?p+=`
                     xC${w+1} = xTexelC${w};
                     `:p+=`
                     xCOffset = xC + ${S};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                       xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${w+1}.zw = vec2(0.0);
                       }
                       xTexelC${w+1}Ready = 1;
                     }

                     xC${w+1} = xTexelC${w+1};
                     `}}else w<f&&(a%2===1?(p+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${w+1}Ready == 0) {
                   xTexelC${w+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${w+1}.zw = vec2(0.0);
                   }
                   xTexelC${w+1}Ready = 1;
                 }

                 xC${w} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
               `,w+1<f&&(p+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${w+1} = vec4(xTexelC${w+1}.xy, final.xy);
                 `)):(p+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                   xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${w+1}.zw = vec2(0.);
                   }
                   xTexelC${w+1}Ready = 1;
                 }

                 xC${w} = vec4(
                   xTexelC${w}.xy, xTexelC${w+1}.xy);
               `,w+1<f&&(p+=`
                   xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
                 `)));w<f&&(p+=`
             wTexel = getW(r, ${w}, d1, d2);
             dotProd += xC${w}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${w}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,w+1<f&&(p+=`
               wTexel = getW(r, ${w+1}, d1, d2);
               dotProd += xC${w+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${w+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}p+=`
     }
   `,p+=`
     }
   `,p+=`
     }
   `;let g="",y="";r&&(i?g=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:s?g=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:g=`vec4 activation(vec4 x) {
           ${r}
         }`,y="result = activation(result);");const x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${g}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${p}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${x}
         ${y}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lVe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=xr(this.outputShape.length);const{dataFormat:r}=n,i=Pr(),s=r==="channelsLast",a=s?1:2,o=s?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let c="";for(let f=0;f<=1;f++)for(let d=0;d<=1;d++)c+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${f};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${a}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${o}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${s}) {
                  innerDims = vec2(d1, ch);
                  result[${f*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${f*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${i.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m0(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function yQ({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:o=null}){const l=t.shape,c=r.texData.get(t.dataId),f=n.inChannels,d=l[0]*l[1]*l[2],p=n.outChannels,g=n.dataFormat==="channelsLast",y=!1,x=!1;let b;const w=[];if(s!=null){const k=m0(s.shape,g);k!=null&&(s=Oe({inputs:{x:s},backend:r,attrs:{shape:k}}),w.push(s))}if(i!=null){const k=m0(i.shape,g);k!=null&&(i=Oe({inputs:{x:i},backend:r,attrs:{shape:k}}),w.push(i))}if(!((d===1||p===1)&&f>cQ)&&c.isPacked&&g&&c.texture!=null&&l[2]%2!==0&&Et(c.shape.slice(-3),l.slice(-3))){const k=l[0]*l[1]*(l[2]+1),A={dataId:t.dataId,shape:[1,k,n.inChannels],dtype:t.dtype},E=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,U(d0(c.shape,A.shape),()=>`packed reshape ${c.shape} to ${A.shape} isn't free`);const I=Oe({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});w.push(I);const N=p0({a:A,b:I,backend:r,transposeA:y,transposeB:x,bias:i,activation:o,preluActivationWeights:s,leakyreluAlpha:a}),_=r.texData.get(N.dataId);U(_.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=E,_.shape=n.outShape,b=ci({inputs:{x:N},backend:r}),b.shape=n.outShape,w.push(N)}else{const k=n.outHeight*n.outWidth,A=Oe({inputs:{x:t},backend:r,attrs:{shape:g?[n.batchSize,k,n.inChannels]:[n.batchSize,n.inChannels,k]}}),E=Oe({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),I=p0({a:g?A:E,b:g?E:A,transposeA:!g,transposeB:x,backend:r,bias:i,activation:o,preluActivationWeights:s,leakyreluAlpha:a});b=Oe({inputs:{x:I},backend:r,attrs:{shape:n.outShape}}),w.push(A),w.push(E),w.push(I)}for(const k of w)r.disposeIntermediateTensorInfo(k);return b}function vQ({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:o=null}){const{filterWidth:l,filterHeight:c,inChannels:f,outWidth:d,outHeight:p,dataFormat:g}=n,y=g==="channelsLast",x=l*c*f,b=p*d,w=[n.batchSize,x,b],S=!0,T=!1,k=[];if(s!=null){const V=m0(s.shape,y);V!=null&&(s=Oe({inputs:{x:s},backend:r,attrs:{shape:V}}),k.push(s))}if(i!=null){const V=m0(i.shape,y);V!=null&&(i=Oe({inputs:{x:i},backend:r,attrs:{shape:V}}),k.push(i))}const A=Oe({inputs:{x:e},backend:r,attrs:{shape:[1,x,ve(e.shape)/x]}});k.push(A);const E=new lVe(w,n),I=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],N=r.runWebGLProgram(E,[t],"float32",I),_=Oe({inputs:{x:N},backend:r,attrs:{shape:w}});k.push(N),k.push(_);const R=i!=null,O=s!=null,F=o==="leakyrelu",z=o?em(o,!0):null,W=new lQ(y?_.shape:A.shape,y?A.shape:_.shape,y?[n.batchSize,b,n.outChannels]:[n.batchSize,n.outChannels,b],S,T,R,z,O,F),P=y?[_,A]:[A,_];if(i&&P.push(i),O&&P.push(s),F){const V=r.makeTensorInfo([],"float32",ll(a,"float32"));P.push(V),k.push(V)}const M=r.runWebGLProgram(W,P,"float32"),j=Oe({inputs:{x:M},backend:r,attrs:{shape:n.outShape}});k.push(M);for(const V of k)r.disposeIntermediateTensorInfo(V);return j}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:a,pad:o,dataFormat:l,dilations:c,dimRoundingMode:f}=r,d=ro(l),p=sr(i.shape,s.shape,a,c,o,f,!1,d);let g;if(p.filterHeight===1&&p.filterWidth===1&&p.dilationHeight===1&&p.dilationWidth===1&&p.strideHeight===1&&p.strideWidth===1&&(p.padInfo.type==="SAME"||p.padInfo.type==="VALID"))g=yQ({x:i,filter:s,convInfo:p,backend:n});else if(p.strideWidth<=2&&d==="channelsLast"&&fe().getBool("WEBGL_EXP_CONV")){const x=new gQ(p),b=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];g=n.runWebGLProgram(x,[i,s],"float32",b)}else if(fe().getBool("WEBGL_CONV_IM2COL"))g=vQ({x:i,filter:s,convInfo:p,backend:n});else{const x=new mQ(p);g=n.runWebGLProgram(x,[i,s],"float32")}const y=Oe({inputs:{x:g},backend:n,attrs:{shape:p.outShape}});return n.disposeIntermediateTensorInfo(g),y}const uVe={kernelName:ux,backendName:"webgl",kernelFunc:cVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fVe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,s=e.padInfo.left,a=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${a?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class hVe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,a=e.dataFormat==="channelsLast",o=n-1-e.padInfo.top,l=r-1-e.padInfo.left,c=a?1:2,f=a?2:3,d=a?3:1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${f}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${a}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class dVe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,s=e.padInfo.front,a=e.padInfo.top,o=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${s};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${a};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${i} - ${o};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class pVe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,s=e.strideDepth,a=e.strideHeight,o=e.strideWidth,l=n-1-e.padInfo.front,c=r-1-e.padInfo.top,f=i-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${f});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${s}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${i}; wC++) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${i} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:a,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:f}=r,d=ro(l),p=sr(i.shape,f,a,1,o,c,!1,d),g=new fVe(p);return n.runWebGLProgram(g,[i,s],"float32")}const gVe={kernelName:rO,backendName:"webgl",kernelFunc:mVe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yVe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=xr(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,i=n-1-e.padInfo.top,s=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vVe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{inputShape:a,strides:o,pad:l,dataFormat:c,dimRoundingMode:f}=r,d=ro(c),p=sr(a,s.shape,o,1,l,f,!1,d);if(fe().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){const g=[[p.strideHeight,p.strideWidth]],y=new yVe(p);return n.runWebGLProgram(y,[i,s],"float32",g)}else{const g=new hVe(p);return n.runWebGLProgram(g,[i,s],"float32")}}const bVe={kernelName:fx,backendName:"webgl",kernelFunc:vVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:a,pad:o,dilations:l}=r,c=cl(i.shape,s.shape,a,l,o),f=new oVe(c);return n.runWebGLProgram(f,[i,s],"float32")}const wVe={kernelName:hx,backendName:"webgl",kernelFunc:xVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:a,pad:o,filterShape:l}=r,c=cl(i.shape,l,a,1,o),f=new dVe(c);return n.runWebGLProgram(f,[i,s],"float32")}const CVe={kernelName:iO,backendName:"webgl",kernelFunc:SVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TVe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{pad:a,strides:o,inputShape:l}=r,c=cl(l,s.shape,o,1,a),f=new pVe(c);return n.runWebGLProgram(f,[i,s],"float32")}const AVe={kernelName:sO,backendName:"webgl",kernelFunc:TVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kVe=fh+`
  return cos(x);
`,$Ve=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Bc}
  return result;
`,EVe=xt({opSnippet:kVe,packedOpSnippet:$Ve}),IVe={kernelName:$m,backendName:"webgl",kernelFunc:EVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NVe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,OVe=xt({opSnippet:NVe}),_Ve={kernelName:Em,backendName:"webgl",kernelFunc:OVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RVe{constructor(e,n,r,i,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[a,o,l,c]=e,[f]=n,[d,p]=r;this.outputShape=[f,d,p,c];const g=i==="bilinear"?1:0,[y,x]=[`${o-1}.0`,`${l-1}.0`],[b,w,S]=d>1?[`${(o-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${y} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${y}`],[T,k,A]=p>1?[`${(l-1)/(p-1)}`,"(x2-x1) * width_ratio",`x1*${x} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${x}`];this.userCode=`
      const float height_ratio = float(${b});
      const float width_ratio = float(${T});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${a}) {
          return;
        }

        float height_scale = ${w};
        float width_scale = ${k};

        float in_y = ${S};
        if( in_y < 0.0 || in_y > ${y} ) {
          setOutput(float(${s}));
          return;
        }
        float in_x = ${A};
        if( in_x < 0.0 || in_x > ${x} ) {
          setOutput(float(${s}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${g} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DVe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:s,boxInd:a}=e,{cropSize:o,method:l,extrapolationValue:c}=r,f=new RVe(i.shape,s.shape,o,l,c);return n.runWebGLProgram(f,[i,s,a],"float32")},MVe={kernelName:oO,backendName:"webgl",kernelFunc:DVe};var nm;(function(t){t.Prod="*",t.Sum="+"})(nm||(nm={}));class mG{constructor(e,n,r,i){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const s=this.outputShape.length,a=this.op===nm.Prod?"1.0":"0.0",o=r?a:`getX(${gG(s,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",f="";r?(c=i?`end != ${l-1}`:"end != 0",f=i?"end + 1":"end - 1"):(c=i?`end + pow2 < ${l}`:"end >= pow2",f=i?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Pt(s)} coords = getOutputCoords();
        int end = ${yG(s,"coords",this.op)};
        float val = ${o};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${f};
          ${yG(s,"coords",this.op)} = idx;
          val ${this.op}= getX(${gG(s,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function gG(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function yG(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bQ(t,e,n,r,i,s){const a=e.shape.length,o=sn([r],a);let l=e;o!=null&&(l=Mr({inputs:{x:e},backend:n,attrs:{perm:o}}));const c=bn(1,a)[0];if(c!==a-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const f=l.shape[c];let d=ci({inputs:{x:l},backend:n});for(let p=0;p<=Math.ceil(Math.log2(f))-1;p++){const g=new mG(t,l.shape,!1,s),y=[[p]],x=d;d=n.runWebGLProgram(g,[d],d.dtype,y),n.disposeIntermediateTensorInfo(x)}if(i){const p=new mG(t,l.shape,i,s),g=d;d=n.runWebGLProgram(p,[d],d.dtype),n.disposeIntermediateTensorInfo(g)}if(o!=null){const p=ul(o),g=Mr({inputs:{x:d},backend:n,attrs:{perm:p}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),g}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:a,reverse:o}=r;return bQ(nm.Prod,i,n,s,a,o)}const FVe={kernelName:aO,backendName:"webgl",kernelFunc:PVe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:a,reverse:o}=r;return bQ(nm.Sum,i,n,s,a,o)}const BVe={kernelName:dx,backendName:"webgl",kernelFunc:LVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:a,binaryOutput:o}=r;if(i.shape.length===1){const l=n.readSync(i.dataId),c=n.readSync(s.dataId),f=JZ(l,c,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,f)}else if(i.shape.length===2){const l=n.bufferSync(i),c=n.bufferSync(s),f=WBe(l,c,a,o);return n.makeTensorInfo(f.shape,s.dtype,f.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const jVe={kernelName:lO,backendName:"webgl",kernelFunc:zVe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VVe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:s,dataFormat:a}=r,o=i.shape[0],l=a==="NHWC"?i.shape[1]:i.shape[2],c=a==="NHWC"?i.shape[2]:i.shape[3],f=a==="NHWC"?i.shape[3]:i.shape[1],d=l*s,p=c*s,g=f/(s*s),y=a==="NHWC"?[o,d,p,g]:[o,g,d,p],x=new VVe(y,s,a);return n.runWebGLProgram(x,[i],i.dtype)}const WVe={kernelName:cO,backendName:"webgl",kernelFunc:UVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xQ{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=xr(this.outputShape.length);const a=e.filterHeight,o=e.filterWidth,l=e.outChannels/e.inChannels;let c="",f="";r&&(i?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,f="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${a}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${o}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${f}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wQ{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=xr(this.outputShape.length);const a=e.outChannels/e.inChannels,o=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,f=e.filterHeight,d=e.filterWidth,p=d;let g=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let w=0;w<d;w++)g+=`
          vec4 xTexelC${w*2};
          int xTexelC${w*2}Ready;
          vec4 xTexelC${w*2+1};
          int xTexelC${w*2+1}Ready;
          vec4 xC${w};`;g+=`
    for (int r = 0; r < ${f}; r++) {
      `;for(let w=0;w<d;w++)g+=`
          xTexelC${w*2} = vec4(0.0);
          xTexelC${w*2}Ready = 0;
          xTexelC${w*2+1} = vec4(0.0);
          xTexelC${w*2+1}Ready = 0;
          xC${w} = vec4(0.0);`;g+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let w=0;w<(p+1)/2;w++){const S=w*2;if(g+=`
          xC = xCCorner + ${S*c};
          `,l===1){if(S<d&&(o%2===1?(g+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S}Ready == 0) {
                  xTexelC${S} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${S}.zw = vec2(0.0);
                  }
                  xTexelC${S}Ready = 1;
                }
              `,c===1&&S>0?g+=`
                xC${S} = vec4(xTexelC${S-2}.zw, xTexelC${S}.xy);
                `:g+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${S} = vec4(previous.zw, xTexelC${S}.xy);
                  } else {
                    xC${S} = vec4(0.0, 0.0, xTexelC${S}.xy);
                  }
                  `):g+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${S}Ready == 0) {
                  xTexelC${S} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${S}.zw = vec2(0.0);
                  }
                  xTexelC${S}Ready = 1;
                }

                xC${S} = xTexelC${S};
                `,S+1<d)){const T=o%2===0?WN(c):c;c%2===0&&o%2===1||c%2!==0&&o%2!==1?(g+=`
                  xCOffset = xC + imod(pads[1], 2) + ${T};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                    xTexelC${S+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${S+1}.zw = vec2(0.0);
                    }
                    xTexelC${S+1}Ready = 1;
                  }
                  `,c>1?g+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${S+1} = vec4(previous.zw, xTexelC${S+1}.xy);
                    } else {
                     xC${S+1} = vec4(0.0, 0.0, xTexelC${S+1}.xy);
                    }
                    `:g+=`
                    xC${S+1} = vec4(xTexelC${S}.zw, xTexelC${S+1}.xy);
                    `):T===1?g+=`
                    xC${S+1} = xTexelC${S};
                    `:g+=`
                    xCOffset = xC + ${T};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                      xTexelC${S+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${S+1}.zw = vec2(0.0);
                      }
                      xTexelC${S+1}Ready = 1;
                    }

                    xC${S+1} = xTexelC${S+1};
                    `}}else S<d&&(o%2===1?(g+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S}Ready == 0) {
                  xTexelC${S} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${S}.zw = vec2(0.0);
                  }
                  xTexelC${S}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${S+1}Ready == 0) {
                  xTexelC${S+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${S+1}.zw = vec2(0.0);
                  }
                  xTexelC${S+1}Ready = 1;
                }

                xC${S} = vec4(xTexelC${S}.zw, xTexelC${S+1}.zw);
              `,S+1<d&&(g+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${S+1} = vec4(xTexelC${S+1}.xy, final.xy);
                `)):(g+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${S}Ready == 0) {
                  xTexelC${S} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${S}.zw = vec2(0.0);
                  }
                  xTexelC${S}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                  xTexelC${S+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${S+1}.zw = vec2(0.);
                  }
                  xTexelC${S+1}Ready = 1;
                }

                xC${S} = vec4(
                  xTexelC${S}.xy, xTexelC${S+1}.xy);
              `,S+1<d&&(g+=`
                  xC${S+1} = vec4(xTexelC${S}.zw, xTexelC${S+1}.zw);
                `)));S<d&&(g+=`
            wTexel = getW(r, ${S}, d1, q);
            dotProd += xC${S} * vec4(wTexel.xz, wTexel.xz);
          `,S+1<d&&(g+=`
              wTexel = getW(r, ${S+1}, d1, q);
              dotProd += xC${S+1} * vec4(wTexel.xz, wTexel.xz);
            `))}g+=`
    }
  `,g+=`
      }
    `;let y="",x="";r&&(i?y=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?y=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:y=`vec4 activation(vec4 x) {
          ${r}
        }`,x="result = activation(result);");const b=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${y}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${a};
        int q = d2 - d1 * ${a};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${g}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${b}
        ${x}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:a,pad:o,dilations:l,dimRoundingMode:c}=r;let f=l;f==null&&(f=[1,1]),U(vr(a,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${f}'`);const d=sr(i.shape,s.shape,a,f,o,c,!0);let p;fe().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?p=new wQ(d):p=new xQ(d);const g=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(p,[i,s],"float32",g)}const qVe={kernelName:px,backendName:"webgl",kernelFunc:GVe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HVe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,s=e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${a} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class KVe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,a=n-1-e.padInfo.top,o=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:c,filterShape:f}=r,d=sr(i.shape,f,a,o,l,c,!0),p=new HVe(d);return n.runWebGLProgram(p,[i,s],"float32")}const YVe={kernelName:uO,backendName:"webgl",kernelFunc:XVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZVe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:c,inputShape:f}=r,d=sr(f,s.shape,a,o,l,c,!0),p=new KVe(d);return n.runWebGLProgram(p,[i,s],"float32")}const QVe={kernelName:fO,backendName:"webgl",kernelFunc:ZVe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JVe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eUe(t){const{inputs:e,backend:n}=t,{x:r}=e,i=[...r.shape,...r.shape],s=ve(r.shape),a=Oe({inputs:{x:r},backend:n,attrs:{shape:[s]}}),o=new JVe(s),l=n.runWebGLProgram(o,[a],a.dtype),c=Oe({inputs:{x:l},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const tUe={kernelName:aK,backendName:"webgl",kernelFunc:eUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nUe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:i,strideHeight:s,strideWidth:a,filterHeight:o,filterWidth:l,dilationHeight:c,dilationWidth:f}=e,{top:d,left:p}=i;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${a});
      const ivec2 pads = ivec2(${d}, ${p});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${o}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${f};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:a,pad:o,dilations:l}=r,c=hg(i.shape,s.shape,a,o,"NHWC",l);let f;const d=new nUe(c);f=n.runWebGLProgram(d,[i,s],"float32");const p=Oe({inputs:{x:f},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(f),p}const iUe={kernelName:mx,backendName:"webgl",kernelFunc:rUe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sUe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,s=e,{allDims:a,summedDims:o,idDims:l}=__(i,s.length);D_(a.length,l,s);const{path:c,steps:f}=M_(o,l),d=f.length;let p=null,g=a.length;const y=[];for(let x=0;x<d;++x){for(const b of f[x]){const{permutationIndices:w,expandDims:S}=R_(g,l[b]);let T;P_(w)?T=s[b]:(T=Mr({inputs:{x:s[b]},backend:n,attrs:{perm:w}}),y.push(T));const k=T.shape.slice();for(let A=0;A<S.length;++A)k.splice(S[A],0,1);Et(T.shape,k)||(T=Oe({inputs:{x:T},backend:n,attrs:{shape:k}}),y.push(T)),p===null?p=T:(p=SR({inputs:{a:T,b:p},backend:n}),y.push(p))}x<d-1&&(c[x]>=0&&(p=I1({inputs:{x:p},backend:n,attrs:{axis:c[x]-(a.length-g),keepDims:!1}}),y.push(p)),g--)}for(const x of y)x!==p&&n.disposeIntermediateTensorInfo(x);return p}const aUe={kernelName:hO,backendName:"webgl",kernelFunc:sUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oUe="return (x >= 0.0) ? x : (exp(x) - 1.0);",lUe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,cUe=xt({opSnippet:oUe,packedOpSnippet:lUe}),uUe={kernelName:Nm,backendName:"webgl",kernelFunc:cUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fUe="return (b >= 0.0) ? a : a * (b + 1.0);",hUe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,dUe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:i}=e,s=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new uh(hUe,r.shape,i.shape):new kc(fUe,r.shape,i.shape);return n.runWebGLProgram(s,[r,i],r.dtype)},pUe={kernelName:dO,backendName:"webgl",kernelFunc:dUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mUe=`
  return vec4(equal(a, b));
`,gUe="return float(a == b);",yUe=or({opSnippet:gUe,packedOpSnippet:mUe,dtype:"bool",cpuKernelImpl:XBe}),vUe={kernelName:gx,backendName:"webgl",kernelFunc:yUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bUe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${A_};
  float a1 = ${k_};
  float a2 = ${$_};
  float a3 = ${E_};
  float a4 = ${I_};
  float a5 = ${N_};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,xUe=xt({opSnippet:bUe}),wUe={kernelName:Om,backendName:"webgl",kernelFunc:xUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SUe=fh+`
  return exp(x);
`,CUe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,SQ=xt({opSnippet:SUe,packedOpSnippet:CUe,cpuKernelImpl:YBe,dtype:"float32"}),TUe={kernelName:_m,backendName:"webgl",kernelFunc:SQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QE(t){const{inputs:e,attrs:n,backend:r}=t,{dim:i}=n,{input:s}=e,a=s.shape.length,o=s.shape.slice();let l=i;return i<0&&(U(-(a+1)<=i,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),l=a+i+1),o.splice(l,0,1),Oe({inputs:{x:s},backend:r,attrs:{shape:o}})}const AUe={kernelName:yx,backendName:"webgl",kernelFunc:QE};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vG="return exp(x) - 1.0;",kUe=xt({opSnippet:vG,packedOpSnippet:vG,cpuKernelImpl:ZBe}),$Ue={kernelName:Rm,backendName:"webgl",kernelFunc:kUe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bG{constructor(e,n,r){this.variableNames=["real","imag"];const i=n[1];this.outputShape=n;const s=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,a=r?`${i}.0`:"1.0";let o;if(e==="real")o="return real * expR - imag * expI;";else if(e==="imag")o="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${s};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${o}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${i});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${i}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${a};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CQ(t,e,n){const r=n.texData.get(t.dataId),i=ve(t.shape),s=t.shape[t.shape.length-1],a=i/s,o=Oe({inputs:{x:t},backend:n,attrs:{shape:[a,s]}}),l=o.shape,c=new bG("real",l,e),f=new bG("imag",l,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],p=n.runWebGLProgram(c,d,"float32"),g=n.runWebGLProgram(f,d,"float32"),y=gl({inputs:{real:p,imag:g},backend:n});n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g);const x=Oe({inputs:{x:y},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(y),x}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EUe(t){const{inputs:e,backend:n}=t,{input:r}=e;return CQ(r,!1,n)}const IUe={kernelName:pO,backendName:"webgl",kernelFunc:EUe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NUe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rg(t){const{backend:e,attrs:n}=t,{shape:r,value:i}=n;let{dtype:s}=n;if(s=s||Yf(i),s==="string"){const a=gn(s,ve(r));return a.fill(i),e.makeTensorInfo(r,s,a)}else{const a=new NUe(r,i),o=[[i]];return e.runWebGLProgram(a,[],s,o)}}const OUe={kernelName:mO,backendName:"webgl",kernelFunc:Rg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Ue{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RUe={kernelName:gO,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,i=new _Ue(n.shape);return r.runWebGLProgram(i,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xG="return floor(x);",DUe=xt({opSnippet:xG,packedOpSnippet:xG,cpuKernelImpl:QBe}),MUe={kernelName:Dm,backendName:"webgl",kernelFunc:DUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PUe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,FUe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,LUe=or({opSnippet:PUe,packedOpSnippet:FUe,dtype:"int32"}),BUe={kernelName:Mm,backendName:"webgl",kernelFunc:LUe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zUe{constructor(e){this.variableNames=["A"];const n=Pr(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jUe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Pr(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${i}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VUe={kernelName:iCe,backendName:"webgl",kernelFunc:UUe};let Ru,I2=fe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function UUe(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:i}=e;const{numChannels:s}=r,a=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,o=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,[l,c]=a?[i.videoWidth,i.videoHeight]:[i.width,i.height],f=[c,l],d=[c,l,s];if(o||a){const x=fe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Ru==null||x!==I2)&&(I2=x,Ru=document.createElement("canvas").getContext("2d",{willReadFrequently:I2})),Ru.canvas.width=l,Ru.canvas.height=c,Ru.drawImage(i,0,0,l,c),i=Ru.canvas}const p=n.makeTensorInfo(f,"int32");n.texData.get(p.dataId).usage=Ci.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),i);const g=fe().getBool("WEBGL_PACK")?new jUe(d):new zUe(d),y=n.runWebGLProgram(g,[p],"int32");return n.disposeData(p.dataId),y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:a,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:f,dilations:d,dimRoundingMode:p,activation:g,leakyreluAlpha:y}=r,x=ro(f),b=sr(i.shape,s.shape,l,d,c,p,!1,x);let w;const S=[],T=a!=null,k=o!=null,A=g==="leakyrelu",E=()=>{const N=[i,s],_=(R,O)=>{if(O==="NCHW"&&R.shape.length===1&&R.shape[0]!==1){const F=Oe({inputs:{x:R},backend:n,attrs:{shape:[R.shape[0],1,1]}});return S.push(F),F}return R};if(T&&N.push(_(a,f)),k&&N.push(_(o,f)),A){const R=n.makeTensorInfo([],"float32",ll(y,"float32"));N.push(R),S.push(R)}return N};if(b.filterHeight===1&&b.filterWidth===1&&b.dilationHeight===1&&b.dilationWidth===1&&b.strideHeight===1&&b.strideWidth===1&&(b.padInfo.type==="SAME"||b.padInfo.type==="VALID"))w=yQ({x:i,filter:s,convInfo:b,backend:n,bias:a,activation:g,preluActivationWeights:o,leakyreluAlpha:y});else if(b.strideWidth<=2&&x==="channelsLast"&&fe().getBool("WEBGL_EXP_CONV")){const N=g?em(g,!0):null,_=new gQ(b,T,N,k,A),R=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],O=E();w=n.runWebGLProgram(_,O,"float32",R)}else if(fe().getBool("WEBGL_CONV_IM2COL"))w=vQ({x:i,filter:s,convInfo:b,backend:n,bias:a,activation:g,preluActivationWeights:o,leakyreluAlpha:y});else{const N=g?em(g,!1):null,_=new mQ(b,T,N,k,A),R=E();w=n.runWebGLProgram(_,R,"float32")}const I=Oe({inputs:{x:w},backend:n,attrs:{shape:b.outShape}});return S.push(w),S.forEach(N=>n.disposeIntermediateTensorInfo(N)),I}const GUe={kernelName:Gb,backendName:"webgl",kernelFunc:WUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:a,preluActivationWeights:o}=e,{strides:l,pad:c,dilations:f,dimRoundingMode:d,activation:p,leakyreluAlpha:g}=r,y=[];let x=f;x==null&&(x=[1,1]),U(vr(l,x),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${x}'`);const b=sr(i.shape,s.shape,l,x,c,d,!0),w=fe().getBool("WEBGL_PACK_DEPTHWISECONV")&&b.strideWidth<=2&&b.outChannels/b.inChannels===1,S=p?em(p,w):null,T=[i,s],k=a!=null,A=o!=null,E=p==="leakyrelu";if(k&&T.push(a),A&&T.push(o),E){const R=n.makeTensorInfo([],"float32",ll(g,"float32"));T.push(R),y.push(R)}let I;w?I=new wQ(b,k,S,A,E):I=new xQ(b,k,S,A,E);const N=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],_=n.runWebGLProgram(I,T,"float32",N);return y.forEach(R=>n.disposeIntermediateTensorInfo(R)),_}const HUe={kernelName:AK,backendName:"webgl",kernelFunc:qUe};class KUe{constructor(e,n,r,i){this.sliceDim=e,this.strides=n,this.paramsShape=i,this.variableNames=["x","indices"],this.outputShape=r;const s=Pt(r.length);let a=`
    int index;`;for(let o=0;o<this.sliceDim;o++)a+=`
          index = round(getIndices(coords[0], ${o}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[o]};
          flattenIndex += index * ${this.strides[o]};`;this.userCode=`
         void main() {
          ${s} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${a}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XUe(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,s=i.shape,a=s[s.length-1],o=ve(r.shape),[l,c,f,d]=p_(r,i),p=Oe({inputs:{x:i},backend:n,attrs:{shape:[c,a]}}),g=Oe({inputs:{x:r},backend:n,attrs:{shape:[ve(r.shape)/f,f]}});if(n.shouldExecuteOnCPU([r,i])||r.dtype==="string"){const w=n.readSync(i.dataId),S=n.bufferSync(r),T=JBe(w,S,r.dtype,c,a,f,d,r.shape,o);return n.makeTensorInfo(l,r.dtype,T.values)}const y=new KUe(a,d,[c,f],r.shape),x=n.runWebGLProgram(y,[g,p],g.dtype),b=Oe({inputs:{x},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),b}const YUe={kernelName:oK,backendName:"webgl",kernelFunc:XUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZUe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=Pt(this.rank),i=QUe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${i}));
      }
    `}}function QUe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let i=0;i<t.length;i++)i===2?r.push("index"):r.push(`${n[i]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TQ(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:s}=e,{axis:a,batchDims:o}=r,l=ot(a,i.shape)[0];if(fe().get("DEBUG")){const S=n.readSync(s.dataId),T=i.shape[l];for(let k=0;k<S.length;++k){const A=S[k];U(A<=T-1&&A>=0,()=>`GatherV2: the index value ${A} is not in [0, ${T-1}]`)}}const c=L_(i,s,l,o),f=ve(s.shape),d=[],p=Oe({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),g=Oe({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,f/c.batchSize]}});d.push(p),d.push(g);const y=[c.batchSize,c.outerSize,f/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([i,s])||i.dtype==="string"){const S=n.bufferSync(g),T=n.bufferSync(p),k=eze(T,S,y);return d.forEach(A=>n.disposeIntermediateTensorInfo(A)),n.makeTensorInfo(c.outputShape,k.dtype,k.values)}const x=new ZUe(p.shape,y),b=n.runWebGLProgram(x,[p,g],p.dtype);d.push(b);const w=Oe({inputs:{x:b},backend:n,attrs:{shape:c.outputShape}});return d.forEach(S=>n.disposeIntermediateTensorInfo(S)),w}const JUe={kernelName:bx,backendName:"webgl",kernelFunc:TQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eWe="return float(a > b);",tWe=`
  return vec4(greaterThan(a, b));
`,nWe=or({opSnippet:eWe,packedOpSnippet:tWe,cpuKernelImpl:tze,dtype:"bool"}),rWe={kernelName:xx,backendName:"webgl",kernelFunc:nWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iWe="return float(a >= b);",sWe=`
  return vec4(greaterThanEqual(a, b));
`,aWe=or({opSnippet:iWe,packedOpSnippet:sWe,dtype:"bool",cpuKernelImpl:nze}),oWe={kernelName:Pm,backendName:"webgl",kernelFunc:aWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lWe(t){const{inputs:e,backend:n}=t,{input:r}=e;return CQ(r,!0,n)}const cWe={kernelName:yO,backendName:"webgl",kernelFunc:lWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uWe="return float(!isnan(x) && !isinf(x));",fWe=xt({opSnippet:uWe,dtype:"bool"}),hWe={kernelName:Lm,backendName:"webgl",kernelFunc:fWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dWe="return float(isinf(x));",pWe=xt({opSnippet:dWe,dtype:"bool"}),mWe={kernelName:Bm,backendName:"webgl",kernelFunc:pWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gWe="return float(isnan(x));",yWe=xt({opSnippet:gWe,dtype:"bool"}),vWe={kernelName:zm,backendName:"webgl",kernelFunc:yWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bWe="return float(a < b);",xWe=`
  return vec4(lessThan(a, b));
`,wWe=or({opSnippet:bWe,packedOpSnippet:xWe,cpuKernelImpl:rze,dtype:"bool"}),SWe={kernelName:Sx,backendName:"webgl",kernelFunc:wWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CWe="return float(a <= b);",TWe=`
  return vec4(lessThanEqual(a, b));
`,AWe=or({opSnippet:CWe,packedOpSnippet:TWe,cpuKernelImpl:ize,dtype:"bool"}),kWe={kernelName:Cx,backendName:"webgl",kernelFunc:AWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $We(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:s}=n,a=sze(r,i,s);return e.makeTensorInfo([a.length],"float32",a)}const EWe={kernelName:lK,backendName:"webgl",kernelFunc:$We};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IWe=fh+`
  return x < 0.0 ? 0./0. : log(x);
`,NWe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,OWe=xt({opSnippet:IWe,packedOpSnippet:NWe,cpuKernelImpl:aze}),_We={kernelName:jm,backendName:"webgl",kernelFunc:OWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RWe=fh+`
  return log(1.0 + x);
`,DWe=xt({opSnippet:RWe}),MWe={kernelName:Vm,backendName:"webgl",kernelFunc:DWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PWe="return float(a >= 1.0 && b >= 1.0);",FWe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,LWe=or({opSnippet:PWe,packedOpSnippet:FWe,dtype:"bool"}),BWe={kernelName:Tx,backendName:"webgl",kernelFunc:LWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zWe="return float(!(x >= 1.0));",jWe=xt({opSnippet:zWe}),VWe={kernelName:Ax,backendName:"webgl",kernelFunc:jWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UWe="return float(a >= 1.0 || b >= 1.0);",WWe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,GWe=or({opSnippet:UWe,packedOpSnippet:WWe,dtype:"bool"}),qWe={kernelName:kx,backendName:"webgl",kernelFunc:GWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HWe{constructor(e,n,r,i,s){this.variableNames=["x"],this.outputShape=[];const a=n,o=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${i}) * sum`;s===.5?l=`inversesqrt(${c})`:s===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${a}; j <= ${a}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${o}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KWe{constructor(e,n,r,i,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const a=n,o=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${i}) * sum`;s===.5?l=`inversesqrt(${c})`:s===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${a};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${a}; j <= ${a}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${o}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XWe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:s,bias:a,alpha:o,beta:l}=r,c=fe().getBool("WEBGL_PACK_NORMALIZATION")?new KWe(i.shape,s,a,o,l):new HWe(i.shape,s,a,o,l);return n.runWebGLProgram(c,[i],i.dtype)},YWe={kernelName:$x,backendName:"webgl",kernelFunc:XWe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZWe{constructor(e,n,r,i,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=i,this.beta=s,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${i}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${i})
                * float(${s})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${s});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QWe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i,y:s,dy:a}=e,{depthRadius:o,bias:l,alpha:c,beta:f}=r,d=new ZWe(i.shape,o,l,c,f);return n.runWebGLProgram(d,[i,s,a],i.dtype)},JWe={kernelName:bO,backendName:"webgl",kernelFunc:QWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eGe(t,e,n,r){const i=ve(e),a=ve(t.shape)/i,o=Oe({inputs:{x:t},attrs:{shape:[a,i]},backend:r}),l=zc(o,t.dtype,"max",r),c=Oe({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AQ(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:s,keepDims:a}=r,o=i.shape.length,l=ot(s,i.shape);let c=l;const f=sn(c,o),d=f!=null,p=n.shouldExecuteOnCPU([i]);let g=i;if(d){if(p){const T=n.texData.get(g.dataId).values,k=new Array(o);for(let I=0;I<k.length;I++)k[I]=i.shape[f[I]];const A=xR(T,i.shape,i.dtype,f,k);g=n.makeTensorInfo(k,i.dtype);const E=n.texData.get(g.dataId);E.values=A}else g=E1(i,f,n);c=bn(c.length,o)}ar("max",c,o);const[y,x]=Yn(g.shape,c);let b=y;a&&(b=$n(y,l));let w;if(p){const T=n.texData.get(g.dataId).values,k=oze(T,ve(x),b,i.dtype);w=n.makeTensorInfo(b,i.dtype);const A=n.texData.get(w.dataId);A.values=k}else w=eGe(g,x,b,n);return d&&n.disposeIntermediateTensorInfo(g),w}const tGe={kernelName:Ex,backendName:"webgl",kernelFunc:AQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nGe=wR+`
  return max(a, b);
`,rGe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Bc+`
  return result;
`,iGe=or({opSnippet:nGe,packedOpSnippet:rGe,cpuKernelImpl:lze}),sGe={kernelName:Um,backendName:"webgl",kernelFunc:iGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;Ng(i,"maxPool");const{filterSize:s,strides:a,pad:o,dimRoundingMode:l}=r,c=1;U(vr(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const f=ns(i.shape,s,a,c,o,l);if(f.filterWidth===1&&f.filterHeight===1&&Et(f.inShape,f.outShape))return ci({inputs:{x:i},backend:n});const d=new tm(f,"max",!1);return n.runWebGLProgram(d,[i],i.dtype)}const oGe={kernelName:Ix,backendName:"webgl",kernelFunc:aGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:a,pad:o,dataFormat:l,dimRoundingMode:c}=r,f=[1,1,1],d=no(i.shape,s,a,f,o,c,l),p=new CR(d,"max",!1);return n.runWebGLProgram(p,[i],i.dtype)}const cGe={kernelName:Nx,backendName:"webgl",kernelFunc:lGe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uGe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,i=e.dilationHeight,s=e.effectiveFilterHeight,a=e.effectiveFilterWidth,o=s-1-e.padInfo.top,l=a-1-e.padInfo.left,c=s*a-1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${s};
          wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${a}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${a} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class fGe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,a=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,f=e.effectiveFilterWidth,d=l-1-e.padInfo.front,p=c-1-e.padInfo.top,g=f-1-e.padInfo.left,y=l*c*f-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${p}, ${g});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${s}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${a}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${f};
                wC += ${o}) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${y} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${f} +
                  wR * ${f} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hGe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,a=s,{filterSize:o,strides:l,pad:c,dimRoundingMode:f}=r,d=[1,1,1],p=no(a.shape,o,l,d,c,f),g=new CR(p,"max",!0),y=n.runWebGLProgram(g,[a],a.dtype),x=new fGe(p),b=n.runWebGLProgram(x,[i,y],a.dtype);return n.disposeIntermediateTensorInfo(y),b}const dGe={kernelName:wO,backendName:"webgl",kernelFunc:hGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pGe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s,output:a}=e,o=s;Ng([s,a],"maxPoolGrad");const{filterSize:l,strides:c,pad:f,dimRoundingMode:d}=r,p=ns(o.shape,l,c,1,f,d),g=!0,y=new tm(p,"max",g),x=n.runWebGLProgram(y,[o],o.dtype),b=new uGe(p),w=n.runWebGLProgram(b,[i,x],o.dtype);return n.disposeIntermediateTensorInfo(x),w}const mGe={kernelName:xO,backendName:"webgl",kernelFunc:pGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gGe(t,e,n,r){let i=new tm(n,"max",!1);const s=r.runWebGLProgram(i,[t],"float32");i=new tm(n,"max",!0,!0,e);const a=r.runWebGLProgram(i,[t],"float32");return[s,a]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yGe={kernelName:cK,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:s,pad:a,includeBatchInIndex:o}=e,l=n;U(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];U(vr(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);const f=ns(r.shape,i,s,c,a),[d,p]=gGe(r,o,f,l);return[d,p]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vGe(t,e,n,r){const i=ve(e),a=ve(t.shape)/i,o=Oe({inputs:{x:t},attrs:{shape:[a,i]},backend:r}),l=zc(o,"float32","mean",r),c=Oe({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bGe={kernelName:Ox,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:i,axis:s}=e,a=n,o=r.shape.length,l=ot(s,r.shape);let c=l;const f=sn(c,o),d=f!=null,p=a.shouldExecuteOnCPU([r]),g=[];let y=r;if(d){if(p){const k=a.texData.get(y.dataId).values,A=new Array(o);for(let N=0;N<A.length;N++)A[N]=r.shape[f[N]];const E=xR(k,r.shape,r.dtype,f,A);y=a.makeTensorInfo(A,r.dtype);const I=a.texData.get(y.dataId);I.values=E}else y=E1(r,f,a);g.push(y),c=bn(c.length,o)}ar("sum",c,o);const[x,b]=Yn(y.shape,c);let w=x;i&&(w=$n(x,l));const S=vGe(y,b,w,a);for(const T of g)a.disposeIntermediateTensorInfo(T);return S}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r,o=i.shape.length,l=ot(s,i.shape);let c=l;const f=sn(c,o);let d=i;f!=null&&(d=Mr({inputs:{x:i},backend:n,attrs:{perm:f}}),c=bn(c.length,i.shape.length)),ar("min",c,o);const[p,g]=Yn(d.shape,c),y=ve(g),x=Oe({inputs:{x:d},backend:n,attrs:{shape:[-1,y]}}),b=zc(x,x.dtype,"min",n);let w;if(a){const S=$n(p,l);w=Oe({inputs:{x:b},backend:n,attrs:{shape:S}})}else w=Oe({inputs:{x:b},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),f!=null&&n.disposeIntermediateTensorInfo(d),w}const wGe={kernelName:_x,backendName:"webgl",kernelFunc:xGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SGe=wR+`
  return min(a, b);
`,CGe=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Bc+`
  return result;
`,TGe=or({opSnippet:SGe,packedOpSnippet:CGe,cpuKernelImpl:cze}),AGe={kernelName:Wm,backendName:"webgl",kernelFunc:TGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kGe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((f,d)=>f[0]+e[d]+f[1]);const i=e.length,s=Pt(i),a=n.map(f=>f[0]).join(","),o=n.map((f,d)=>f[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i),c=r==="reflect"?0:1;if(i===1){this.userCode=`
        int start = ${a};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${a});
      ${s} end = ${s}(${o});

      void main() {
        ${s} outC = getOutputCoords();
        for (int i = 0; i < ${i}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${s} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Ge{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((y,x)=>y[0]+e[x]+y[1]);const i=e.length,s=Pt(i),a=n.map(y=>y[0]).join(","),o=n.map((y,x)=>y[0]+e[x]).join(","),l=_r("rc",i),c=_r("source",i),f=`${l[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,p=r==="reflect"?0:1;let g="";if(i===1){const y=`
        ${s} source = rc;
        if (source < start) {
          source = start * 2 - source - ${p};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${p};
        }
        source -= start;
      `;g=`
        ${s} rc = outputLoc;
        ${y}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[i-1]} += 1;
        if(${f}) {
          ${y}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
      `}else{const y=`
        ${s} source = rc;
        ${s} lt = ${s}(lessThan(source, start));
        ${s} gte = ${s}(greaterThanEqual(source, end));
        ${s} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${p}) +
                gte * ((end - 1) * 2 - source + ${p});
        source -= start;
      `;g=`
        ${s} rc = outputLoc;
        ${y}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[i-1]} += 1;
        if(${f}) {
          ${y}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
        rc = outputLoc;
        ${l[i-2]} += 1;
        if(${l[i-2]} < ${this.outputShape[i-2]}) {
          ${y}
          result[2] = getChannel(getX(${c.join()}), ${d});
          ${l[i-1]} += 1;
          if(${f}) {
            ${y}
            result[3] = getChannel(getX(${c.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${s} start = ${s}(${a});
      const ${s} end = ${s}(${o});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${g}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EGe=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:i,mode:s}=n,a=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new $Ge(r.shape,i,s):new kGe(r.shape,i,s);return e.runWebGLProgram(a,[r],r.dtype)},IGe={kernelName:Rx,backendName:"webgl",kernelFunc:EGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NGe=`if (b == 0.0) return NAN;
  return mod(a, b);`,OGe=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Bc+`
  return result;
`,_Ge=or({opSnippet:NGe,packedOpSnippet:OGe}),RGe={kernelName:Gm,backendName:"webgl",kernelFunc:_Ge};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DGe{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MGe=`
if (a == b) {
  return 1.0;
};
return a / b;`,PGe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,kQ=or({opSnippet:MGe,packedOpSnippet:PGe,checkOutOfBounds:!0}),FGe={kernelName:Im,backendName:"webgl",kernelFunc:kQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wG="return a - b;",$Q=or({opSnippet:wG,packedOpSnippet:wG,supportsComplex:!0,cpuKernelImpl:Nze}),LGe={kernelName:og,backendName:"webgl",kernelFunc:$Q};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EQ(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:s}=r,a=ot([s],i.shape),o=AQ({inputs:{x:i},backend:n,attrs:{reductionIndices:a,keepDims:!1}}),l=$n(o.shape,a),c=Oe({inputs:{x:o},backend:n,attrs:{shape:l}}),f=$Q({inputs:{a:i,b:c},backend:n}),d=SQ({inputs:{x:f},backend:n}),p=I1({inputs:{x:d},backend:n,attrs:{axis:a,keepDims:!1}}),g=Oe({inputs:{x:p},backend:n,attrs:{shape:l}}),y=kQ({inputs:{a:d,b:g},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),y}const BGe={kernelName:Zx,backendName:"webgl",kernelFunc:EQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zGe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:s,seed:a,normalized:o}=r,l=o?i:EQ({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),c=l.shape[0],f=l.shape[1],d=new DGe(c,f,s),p=[[a]],g=n.runWebGLProgram(d,[l],"int32",p);return o||n.disposeIntermediateTensorInfo(l),g}const jGe={kernelName:uK,backendName:"webgl",kernelFunc:zGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VGe=is+`
  return -x;
`,UGe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function WGe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const s=n.texData.get(r.dataId),[a,o]=fze(s.values,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,a)}let i;return fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new Bo(r.shape,UGe):i=new Vs(r.shape,VGe),n.runWebGLProgram(i,[r],r.dtype)}const GGe={kernelName:Dx,backendName:"webgl",kernelFunc:WGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qGe=c_;function HGe(t){Si("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l}=r,c=n.readSync(i.dataId),f=n.readSync(s.dataId),{selectedIndices:d}=qGe(c,f,a,o,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const KGe={kernelName:SO,backendName:"webgl",kernelFunc:HGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XGe=u_;function YGe(t){Si("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r,f=n.readSync(i.dataId),d=n.readSync(s.dataId),{selectedIndices:p,validOutputs:g}=XGe(f,d,a,o,l,c);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([g]))]}const ZGe={kernelName:CO,backendName:"webgl",kernelFunc:YGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QGe=f_;function JGe(t){Si("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r,f=n.readSync(i.dataId),d=n.readSync(s.dataId),p=a,g=o,y=l,x=c,{selectedIndices:b,selectedScores:w}=QGe(f,d,p,g,y,x);return[n.makeTensorInfo([b.length],"int32",new Int32Array(b)),n.makeTensorInfo([w.length],"float32",new Float32Array(w))]}const eqe={kernelName:TO,backendName:"webgl",kernelFunc:JGe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tqe{constructor(e,n,r,i){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${i}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nqe=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:s,depth:a,onValue:o,offValue:l}=r,c=ve(i.shape),f=new tqe(c,a,o,l),d=Oe({inputs:{x:i},backend:n,attrs:{shape:[c]}}),p=n.runWebGLProgram(f,[d],s);n.disposeIntermediateTensorInfo(d);const g=[...i.shape,a],y=Oe({inputs:{x:p},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(p),y},rqe={kernelName:Fx,backendName:"webgl",kernelFunc:nqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g0(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const i=_g({inputs:{input:r},backend:n}),s=g0({inputs:{x:i},backend:n}),a=N1({inputs:{input:r},backend:n}),o=g0({inputs:{x:a},backend:n}),l=gl({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return Rg({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const iqe={kernelName:e1,backendName:"webgl",kernelFunc:g0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IQ(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const i=_g({inputs:{input:r},backend:n}),s=IQ({inputs:{x:i},backend:n}),a=N1({inputs:{input:r},backend:n}),o=g0({inputs:{x:a},backend:n}),l=gl({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return Rg({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const sqe={kernelName:Px,backendName:"webgl",kernelFunc:IQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aqe(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return QE({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const s=e[0].shape,a=e[0].dtype;e.forEach(f=>{GN(s,f.shape,"All tensors passed to stack must have matching shapes"),U(a===f.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=e.map(f=>{const d=QE({inputs:{input:f},backend:n,attrs:{dim:i}});return o.push(d),d}),c=pQ({inputs:l,backend:n,attrs:{axis:i}});return o.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const oqe={kernelName:Lx,backendName:"webgl",kernelFunc:aqe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lqe{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,f)=>c[0]+e[f]+c[1]);const i=e.length,s=Pt(i),a=n.map(c=>c[0]).join(","),o=n.map((c,f)=>c[0]+e[f]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i);if(i===1){this.userCode=`
        int start = ${a};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${a});
      ${s} end = ${s}(${o});

      void main() {
        ${s} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${s} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cqe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((x,b)=>x[0]+e[b]+x[1]);const i=e.length,s=Pt(i),a=n.map(x=>x[0]).join(","),o=n.map((x,b)=>x[0]+e[b]).join(","),l=_r("rc",i),c=_r("source",i),f=`${l[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,p=[`${s} rc = outputLoc;`,`${l[i-1]} += 1;
       if(${f}) {
      `,i===1?"":`}
       rc = outputLoc;
       ${l[i-2]} += 1;
       if(${l[i-2]} < ${this.outputShape[i-2]}) {`,i===1?"":`  ${l[i-1]} += 1;
         if(${f}) {`],g=i===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let y="";for(let x=0,b=i===1?2:4;x<b;x++)y+=`
        ${p[x]}
        if (${g}) {
          result[${x}] = float(value);
        } else {
          ${s} source = rc - start;
          result[${x}] = getChannel(getX(${c.join()}), ${d});
        }
      `;y+=i===1?"} ":"}}",this.userCode=`
      const ${s} start = ${s}(${a});
      const ${s} end = ${s}(${o});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${y}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NQ=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,constantValue:a}=r;if(ve(i.shape)===0){const c=s.map((f,d)=>f[0]+i.shape[d]+f[1]);return Rg({backend:n,attrs:{shape:c,value:a,dtype:i.dtype}})}const o=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new cqe(i.shape,s,a):new lqe(i.shape,s,a),l=[[a]];return n.runWebGLProgram(o,[i],i.dtype,l)},uqe={kernelName:Bx,backendName:"webgl",kernelFunc:NQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fqe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,hqe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Bc+`
  return result;
`,dqe=or({opSnippet:fqe,packedOpSnippet:hqe}),pqe={kernelName:Hm,backendName:"webgl",kernelFunc:dqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mqe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r,o=i.shape.length,l=[],c=ot(s,i.shape);let f=c;const d=sn(f,o);let p=i;d!=null&&(p=Mr({inputs:{x:i},backend:n,attrs:{perm:d}}),f=bn(f.length,o),l.push(p)),ar("prod",f,o);let g;if(n.shouldExecuteOnCPU([p])){const y=n.texData.get(p.dataId).values,{outVals:x,outShape:b,outDtype:w}=dze(p.shape,p.dtype,y,f);g=n.makeTensorInfo(b,w,x)}else{const[y,x]=Yn(p.shape,f),b=ve(x),w=Oe({inputs:{x:p},backend:n,attrs:{shape:[-1,b]}}),S=PO(i.dtype),T=zc(w,S,"prod",n);g=Oe({inputs:{x:T},backend:n,attrs:{shape:y}}),l.push(w),l.push(T)}if(a){l.push(g);const y=$n(g.shape,c);g=Oe({inputs:{x:g},backend:n,attrs:{shape:y}})}return l.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const gqe={kernelName:jx,backendName:"webgl",kernelFunc:mqe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yqe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:s,indices:a}=e,{outputRaggedRank:o}=r,l=i.map(w=>n.readSync(w.dataId)),c=i.map(w=>w.shape),f=n.readSync(s.dataId),d=n.readSync(a.dataId),[p,g,y]=pze(l,c,f,s.shape,s.dtype,d,a.shape,o),x=p.map(w=>n.makeTensorInfo([w.length],"int32",w)),b=n.makeTensorInfo(y,s.dtype,g);return x.concat([b])}const vqe={kernelName:fK,backendName:"webgl",kernelFunc:yqe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bqe(t){const{inputs:e,backend:n}=t,{starts:r,limits:i,deltas:s}=e,a=n.readSync(r.dataId),o=n.readSync(i.dataId),l=n.readSync(s.dataId),[c,f]=mze(a,r.shape,r.dtype,o,i.shape,l,s.shape),d=n.makeTensorInfo([c.length],"int32",c),p=n.makeTensorInfo([f.length],r.dtype,f);return[d,p]}const xqe={kernelName:hK,backendName:"webgl",kernelFunc:bqe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wqe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:s,defaultValue:a,rowPartitionTensors:o}=e,{rowPartitionTypes:l}=r,c=n.readSync(i.dataId),f=n.readSync(s.dataId),d=n.readSync(a.dataId),p=o.map(b=>n.readSync(b.dataId)),g=o.map(b=>b.shape),[y,x]=gze(c,i.shape,f,s.shape,s.dtype,d,a.shape,p,g,l);return n.makeTensorInfo(y,s.dtype,x)}const Sqe={kernelName:dK,backendName:"webgl",kernelFunc:wqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OQ=t=>{const{backend:e,attrs:n}=t,{start:r,stop:i,step:s,dtype:a}=n,o=yze(r,i,s,a);return e.makeTensorInfo([o.length],a,o)},Cqe={kernelName:AO,backendName:"webgl",kernelFunc:OQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tqe="return 1.0 / x;",Aqe=xt({opSnippet:Tqe}),kqe={kernelName:Km,backendName:"webgl",kernelFunc:Aqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $qe=is+`
  return (x < 0.0) ? 0.0 : x;
`,Eqe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Iqe=xt({opSnippet:$qe,packedOpSnippet:Eqe}),Nqe={kernelName:Xm,backendName:"webgl",kernelFunc:Iqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oqe=is+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,_qe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Rqe=xt({opSnippet:Oqe,packedOpSnippet:_qe}),Dqe={kernelName:Ym,backendName:"webgl",kernelFunc:Rqe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mqe{constructor(e,n,r,i,s){this.variableNames=["A"],this.outputShape=[];const[a,o,l,c]=e;this.outputShape=[a,n,r,c];const f=[i&&n>1?o-1:o,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r];let p;s?p="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${f[0]/d[0]},
          ${f[1]/d[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pqe{constructor(e,n,r,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,o,l,c]=e;this.outputShape=[a,n,r,c];const f=[i&&n>1?o-1:o,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r];let p;s?p="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${f[0]/d[0]},
          ${f[1]/d[1]},
          ${f[1]/d[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fqe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:a,size:o}=r,[l,c]=o,f=fe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Pqe(i.shape,l,c,s,a):new Mqe(i.shape,l,c,s,a);return n.runWebGLProgram(f,[i],"float32")}const Lqe={kernelName:Wx,backendName:"webgl",kernelFunc:Fqe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bqe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,s]=n,[,a,o]=e,l=[r&&a>1?i-1:i,r&&o>1?s-1:s],c=[r&&a>1?a-1:a,r&&o>1?o-1:o],f=l[0]/c[0],d=l[1]/c[1],p=1/f,g=1/d,y=Math.ceil(p)*2+2,x=Math.ceil(g)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${f});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${g});

        const int winHeight = int(${y});
        const int winWidth = int(${x});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${i-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${s-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zqe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:a}=r,o=new Bqe(s.shape,i.shape,a);return n.runWebGLProgram(o,[s],s.dtype)}const jqe={kernelName:EO,backendName:"webgl",kernelFunc:zqe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vqe{constructor(e,n,r,i,s){this.variableNames=["A"],this.outputShape=[];const[a,o,l,c]=e;this.outputShape=[a,n,r,c];const f=[i&&n>1?o-1:o,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r],p=i?"0.5":"0.0";let g;s?g="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":g="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${f[0]/d[0]},
          ${f[1]/d[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${g};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Uqe{constructor(e,n,r,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,o,l,c]=e;this.outputShape=[a,n,r,c];const f=[i&&n>1?o-1:o,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r],p=i?"0.5":"0.0";let g;s?g="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":g="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${f[0]/d[0]},
          ${f[1]/d[1]},
          ${f[1]/d[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${g};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wqe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:a,size:o}=r,[l,c]=o,f=fe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Uqe(i.shape,l,c,s,a):new Vqe(i.shape,l,c,s,a);return n.runWebGLProgram(f,[i],i.dtype)}const Gqe={kernelName:Ux,backendName:"webgl",kernelFunc:Wqe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qqe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,s]=n,[,a,o]=e,l=[r&&a>1?i-1:i,r&&o>1?s-1:s],c=[r&&a>1?a-1:a,r&&o>1?o-1:o],f=l[0]/c[0],d=l[1]/c[1],p=1/f,g=1/d,y=Math.ceil(p)*2+2,x=Math.ceil(g)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${f});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${g});

        const int winHeight = int(${y});
        const int winWidth = int(${x});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hqe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:a}=r,o=new qqe(s.shape,i.shape,a);return n.runWebGLProgram(o,[s],s.dtype)}const Kqe={kernelName:$O,backendName:"webgl",kernelFunc:Hqe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xqe{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const i=o=>n.indexOf(o)!==-1&&e[o]!==1?`${e[o]} - coords[${o}] - 1`:`coords[${o}]`,s=e.map((o,l)=>i(l)).join(","),a=Pt(r);this.userCode=`
      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yqe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const i=_r("rc",r),s=`${i[r-1]} + 1 < ${this.outputShape[r-1]}`,a=`${i[r-2]} + 1 < ${this.outputShape[r-2]}`,o=Pt(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${s}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${o} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(i.slice())};
          if(${s}){
            result.g = ${c(i.slice())};
          }
          if(${a}) {
            result.b = ${f(i.slice())};
            if(${s}) {
              result.a = ${d(i.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(y){return p(y)}function c(y){return y[r-1]="("+y[r-1]+" + 1)",p(y)}function f(y){return y[r-2]="("+y[r-2]+" + 1)",p(y)}function d(y){return y[r-1]="("+y[r-1]+" + 1)",y[r-2]="("+y[r-2]+" + 1)",p(y)}function p(y){const x=e.map((S,T)=>g(T,y)),b=x.join(","),w=x.slice(-2).join(",");return`getChannel(getX(${b}), vec2(${w}))`}function g(y,x){return n.indexOf(y)!==-1&&e[y]!==1?`${e[y]} - ${x[y]} - 1`:`${x[y]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zqe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:s}=r,a=i.shape.length,o=ot(s,i.shape);if(a===0)return ci({inputs:{x:i},backend:n});const l=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Yqe(i.shape,o):new Xqe(i.shape,o);return n.runWebGLProgram(l,[i],i.dtype)}const Qqe={kernelName:Gx,backendName:"webgl",kernelFunc:Zqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Jqe{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],i=e[2];this.outputShape=e;let s="";typeof n=="number"?s=`float outputValue = ${n.toFixed(2)};`:s=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${s}
          if(coordX >= 0 && coordX < ${i} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eHe={kernelName:MO,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:s,center:a}=e,o=n,l=new Jqe(r.shape,s),[c,f]=S_(a,r.shape[1],r.shape[2]),d=[[c,f,Math.sin(i),Math.cos(i)]];return o.runWebGLProgram(l,[r],r.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tHe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,nHe=xt({opSnippet:tHe}),rHe={kernelName:Zm,backendName:"webgl",kernelFunc:nHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iHe="return inversesqrt(x);",sHe=xt({opSnippet:iHe,cpuKernelImpl:vze}),aHe={kernelName:Qm,backendName:"webgl",kernelFunc:sHe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TR{constructor(e,n,r,i,s,a,o=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;const c=Pt(s.length),f=Pt(a.length);let d="";r===1?d="i":r===2&&(d="i, j");const p=`getIndices(${d})`;let g="";i===1?g="i":i===2&&(g="i, coords[1]");const y=`getUpdates(${g})`;let x="";l&&(x="coords[0], coords[1]");const b=`getDefaultValue(${x})`,w=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${s});

        void main() {
          ${f} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${p});
              flattenedIndex += index * ${w};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${y};
              found = true;
            }
          }
          setOutput(mix(${b}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oHe{constructor(e,n,r,i,s,a,o=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a;const c=Pt(s.length),f=Pt(a.length);let d="";r===1?d="i":r===2&&(d="i, j");const p=`getIndices(${d})`;let g="";i===1?g="i":i===2&&(g="i, coords[1]");const y=`getUpdates(${g})`;let x="";l&&(x="coords[0], coords[1]");const b=`getDefaultValue(${x})`,w=n>1?"strides[j]":"strides",S=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${s});

        void main() {
          ${f} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${p});
              flattenedIndex += index.xz * ${w};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${S};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${y};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${b}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lHe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:s}=e,{shape:a}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:f,outputSize:d}=Dc(s,i,a),p=[d/c,c];if(d===0)return n.makeTensorInfo(a,i.dtype);const g=Oe({inputs:{x:i},backend:n,attrs:{shape:[l,o]}}),y=Oe({inputs:{x:s},backend:n,attrs:{shape:[l,c]}}),x=n.makeTensorInfo([],"float32",new Float32Array([0]));let b;fe().getBool("WEBGL_PACK")?b=new oHe(l,o,g.shape.length,y.shape.length,f,p):b=new TR(l,o,g.shape.length,y.shape.length,f,p);const w=n.runWebGLProgram(b,[y,g,x],y.dtype),S=Oe({inputs:{x:w},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(x),S}const cHe={kernelName:pK,backendName:"webgl",kernelFunc:lHe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uHe{constructor(e,n,r,i){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const s="while (left < right) {",a=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,o=fe().getNumber("WEBGL_VERSION")===2?s:a,l=i==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${o}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fHe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:s}=e,{side:a}=r,o=new uHe(i.shape[0],i.shape[1],s.shape[1],a),l=[[i.shape[1]]];return n.runWebGLProgram(o,[i,s],"int32",l)}const hHe={kernelName:gK,backendName:"webgl",kernelFunc:fHe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dHe{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let i,s;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)s="resRC",i="resRC";else{const o=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let f=0;f<n.length;f++)c.push(`${o[f]}`),f<e&&l.push(`${o[f]}`);i=l.join(),s=c.join()}const a=Pt(r);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        float cVal = getC(${i});
        if (cVal >= 1.0) {
          setOutput(getA(${s}));
        } else {
          setOutput(getB(${s}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pHe(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:s}=e,a=new dHe(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(a,[r,i,s],oi(i.dtype,s.dtype))}const mHe={kernelName:qx,backendName:"webgl",kernelFunc:pHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gHe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${h1};
  float scale = ${d1};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,yHe=xt({opSnippet:gHe}),vHe={kernelName:Jm,backendName:"webgl",kernelFunc:yHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bHe=fh+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,xHe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,wHe=xt({opSnippet:bHe,packedOpSnippet:xHe,cpuKernelImpl:xze}),SHe={kernelName:rg,backendName:"webgl",kernelFunc:wHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CHe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,THe=xt({opSnippet:CHe}),AHe={kernelName:ng,backendName:"webgl",kernelFunc:THe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kHe=fh+`
  return sin(x);
`,$He=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Bc}
  return result;
`,EHe=xt({opSnippet:kHe,packedOpSnippet:$He}),IHe={kernelName:eg,backendName:"webgl",kernelFunc:EHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NHe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,OHe=xt({opSnippet:NHe}),_He={kernelName:tg,backendName:"webgl",kernelFunc:OHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RHe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,DHe=xt({opSnippet:RHe}),MHe={kernelName:ig,backendName:"webgl",kernelFunc:DHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PHe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,paddings:a}=r;U(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const o=s.reduce((w,S)=>w*S),l=[[0,0]];l.push(...a);for(let w=1+s.length;w<i.shape.length;++w)l.push([0,0]);const c=[],f=NQ({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),d=yg(f.shape,s,o,!1),p=vg(d.length,s.length,!1),g=bg(f.shape,s,o,!1),y=Oe({inputs:{x:f},backend:n,attrs:{shape:d}}),x=Mr({inputs:{x:y},backend:n,attrs:{perm:p}}),b=Oe({inputs:{x},backend:n,attrs:{shape:g}});return c.push(f),c.push(y),c.push(x),c.forEach(w=>n.disposeIntermediateTensorInfo(w)),b},FHe={kernelName:Xx,backendName:"webgl",kernelFunc:PHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LHe(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:s,defaultValue:a}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${i.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);const o=n.readSync(r.dataId),l=n.readSync(i.dataId),c=n.readSync(s.dataId),f=n.readSync(a.dataId)[0],[d,p,g,y,x]=Sze(o,r.shape,r.dtype,l,i.dtype,c,f);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],i.dtype,g),n.makeTensorInfo([y.length],"bool",new Uint8Array(y.map(b=>Number(b)))),n.makeTensorInfo([x.length],r.dtype,new Int32Array(x))]}const BHe={kernelName:yK,backendName:"webgl",kernelFunc:LHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zHe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const a=Array.from(n.readSync(i.dataId)),o=n.readSync(r.dataId),l=Array.from(n.readSync(s.dataId)),[c,f,d]=Cze(o,r.shape,r.dtype,a,l);return[n.makeTensorInfo(f,r.dtype,c),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}const jHe={kernelName:vK,backendName:"webgl",kernelFunc:zHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VHe(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${s.shape}`);const a=n.readSync(r.dataId),o=n.readSync(i.dataId),l=n.readSync(s.dataId),[c,f]=tQ(a,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(f,r.dtype,c)}const UHe={kernelName:bK,backendName:"webgl",kernelFunc:VHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WHe(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${s.shape}`);const a=n.readSync(r.dataId),o=n.readSync(i.dataId),l=n.readSync(s.dataId),[c,f]=tQ(a,r.shape,r.dtype,o,l);return n.makeTensorInfo(f,r.dtype,c)}const GHe={kernelName:xK,backendName:"webgl",kernelFunc:WHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qHe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:s,defaultValue:a}=e,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:f,strides:d,outputSize:p}=Dc(s,i,o),g=!1;if(s.dtype==="string"){const w=n.bufferSync(i),S=n.bufferSync(s),T=Ko(n.readSync(a.dataId)[0]),k=bze(w,S,o,p,f,c,l,d,T,g);return n.makeTensorInfo(o,k.dtype,k.values)}const y=new TR(c,l,i.shape.length,s.shape.length,d,[p,1],g),x=n.runWebGLProgram(y,[s,i,a],s.dtype),b=Oe({inputs:{x},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(x),b}const HHe={kernelName:wK,backendName:"webgl",kernelFunc:qHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:s,axis:a}=r,o=ot(a,i.shape)[0],l=F_(i,s,o),c=i.shape.length,f=new Array(c).fill(0),d=i.shape.slice();return l.map(p=>{const g=[...d];g[o]=p;const y=hh({inputs:{x:i},backend:n,attrs:{begin:f,size:g}});return f[o]+=p,y})}const XHe={kernelName:Yx,backendName:"webgl",kernelFunc:KHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SG="return sqrt(x);",YHe=xt({opSnippet:SG,packedOpSnippet:SG,cpuKernelImpl:Tze}),ZHe={kernelName:sg,backendName:"webgl",kernelFunc:YHe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QHe="return x * x;",JHe=xt({opSnippet:QHe}),e6e={kernelName:IO,backendName:"webgl",kernelFunc:JHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CG="return (a - b) * (a - b);",t6e=or({opSnippet:CG,packedOpSnippet:CG}),n6e={kernelName:ag,backendName:"webgl",kernelFunc:t6e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");const s=n.readSync(i.dataId),a=Za(s),o=Aze(a,"string",r);return n.makeTensorInfo(i.shape,"string",o)}const i6e={kernelName:NO,backendName:"webgl",kernelFunc:r6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s6e({inputs:t,attrs:e,backend:n}){const{x:r}=t,i=is+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,s=new Vs(r.shape,i);return n.runWebGLProgram(s,[r],r.dtype)}const a6e={kernelName:fg,backendName:"webgl",kernelFunc:s6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class o6e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const i=r.length,s=Pt(r.length),a=Pt(r.length);let o="";if(i===1)o="coords * strides + begin";else{let l=0;o=r.map((c,f)=>(l++,r.length===1?`coords * strides[${f}] + begin[${f}]`:`coords[${l-1}] * strides[${f}] + begin[${f}]`)).join(",")}this.userCode=`
      ${s} begin = ${s}(${e});
      ${s} strides = ${s}(${n});

      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${o}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,end:a,strides:o,beginMask:l,endMask:c,ellipsisMask:f,newAxisMask:d,shrinkAxisMask:p}=r,{finalShapeSparse:g,finalShape:y,isIdentity:x,sliceDim0:b,isSimpleSlice:w,begin:S,end:T,strides:k}=b_(i.shape,s,a,o,l,c,f,d,p);let A;if(x)A=Oe({inputs:{x:i},backend:n,attrs:{shape:y}});else if(b||w){U(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const I=g_(S,T,k),N=hh({inputs:{x:i},backend:n,attrs:{begin:S,size:I}});A=Oe({inputs:{x:N},backend:n,attrs:{shape:y}}),n.disposeIntermediateTensorInfo(N)}else if(n.shouldExecuteOnCPU([i])){const N=n.readSync(i.dataId),_=at(i.shape,i.dtype,N),R=kze(g,_,k,S);A=n.makeTensorInfo(y,i.dtype,R.values)}else{const N=new o6e(S,k,g);A=n.runWebGLProgram(N,[i],i.dtype)}const E=Oe({inputs:{x:A},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(A),E}const c6e={kernelName:OO,backendName:"webgl",kernelFunc:l6e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u6e(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:s,leftPad:a,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:f,dataSplits:d}=e,p=n.readSync(f.dataId),g=n.readSync(d.dataId),[y,x]=$ze(p,g,i,s,a,o,l,c);return[n.makeTensorInfo([y.length],"string",y),n.makeTensorInfo(d.shape,"int32",x)]}const f6e={kernelName:SK,backendName:"webgl",kernelFunc:u6e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h6e(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:s,delimiter:a}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const o=n.readSync(s.dataId),l=n.readSync(a.dataId)[0],[c,f,d]=Eze(o,l,i),p=f.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",f),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const d6e={kernelName:CK,backendName:"webgl",kernelFunc:h6e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p6e(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const a=n.readSync(s.dataId),o=Ize(a,i);return n.makeTensorInfo(s.shape,"int32",o)}const m6e={kernelName:TK,backendName:"webgl",kernelFunc:p6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g6e="return tan(x);",y6e=xt({opSnippet:g6e}),v6e={kernelName:lg,backendName:"webgl",kernelFunc:y6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b6e=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,x6e=xt({opSnippet:b6e}),w6e={kernelName:cg,backendName:"webgl",kernelFunc:x6e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S6e(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:i,indices:s,updates:a}=e,{sliceRank:o,numUpdates:l,sliceSize:c,strides:f,outputSize:d}=Dc(a,s,i.shape),p=[d/c,c];if(d===0)return n.makeTensorInfo(i.shape,s.dtype);const g=Oe({inputs:{x:s},backend:n,attrs:{shape:[l,o]}}),y=Oe({inputs:{x:a},backend:n,attrs:{shape:[l,c]}}),x=Oe({inputs:{x:i},backend:n,attrs:{shape:p}}),b=new TR(l,o,g.shape.length,y.shape.length,f,p,!1,!0),w=n.runWebGLProgram(b,[y,g,x],x.dtype),S=Oe({inputs:{x:w},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w),S}const C6e={kernelName:mK,backendName:"webgl",kernelFunc:S6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T6e{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let a=0;a<r.length;a++)r[a]=e[a]*n[a];this.outputShape=r,this.rank=r.length;const i=Pt(this.rank),s=A6e(e);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        setOutput(getA(${s}));
      }
    `}}function A6e(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<t.length;i++)r.push(`imod(${n[i]}, ${t[i]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Q(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:s}=r;if(i.dtype==="string"||i.shape.length>5){const l=n.readSync(i.dataId),c=i.dtype==="string"?l.map(p=>Ko(p)):l,f=at(i.shape,i.dtype,c),d=Oze(f,s);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const a=new T6e(i.shape,s);return n.runWebGLProgram(a,[i],i.dtype)}const k6e={kernelName:ug,backendName:"webgl",kernelFunc:_Q};class $6e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class E6e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ll(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function TG(t){let e=1;for(;e<t;)e*=2;return e}function I6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:s,sorted:a}=r,o=fe().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=fe().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=i.shape,f=c[c.length-1];if(n.shouldExecuteOnCPU([i])||f<o||s>l){const R=n.readSync(i.dataId),[O,F]=_ze(R,c,i.dtype,s,a);return[n.makeTensorInfo(O.shape,O.dtype,O.values),n.makeTensorInfo(F.shape,F.dtype,F.values)]}if(s===0)return c[c.length-1]=0,[n.makeTensorInfo(c,i.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(f===1)return[i,Rg({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const d=n.texData.get(i.dataId),p=d!==null&&d.isPacked,g=p?n.unpackTensor(i):i,x=ve(c)/f,b=Oe({inputs:{x:g},attrs:{shape:[x,f]},backend:n});p&&Ll(n,g);const w=TG(s),S=TG(f);let T=null;const k=()=>T===null?[b,b]:[b,T],A=(R,O,F)=>{const z=k(),W=new $6e(F),M=[[f],[T===null?1:0],[Number.NEGATIVE_INFINITY],[R],[O]],j=T;T=n.runWebGLProgram(W,z,"int32",M),Ll(n,j)};for(let R=1;R<w;R*=2){const O=R*2;for(let F=R;F>=1;F/=2)A(O,F,[x,S])}for(let R=S;R>w;R/=2){const O=k(),F=new E6e([x,R/2]),W=[[f],[T===null?1:0],[w]],P=T;T=n.runWebGLProgram(F,O,"int32",W),Ll(n,P);const M=w/2,j=M*2;for(let V=M;V>=1;V/=2)A(j,V,T.shape)}let E=T;T=hh({inputs:{x:T},backend:n,attrs:{begin:0,size:[x,s]}}),Ll(n,E);let I=TQ({inputs:{x:b,indices:T},backend:n,attrs:{axis:1,batchDims:1}});Ll(n,b);const N=c.slice(0,-1);N.push(s),E=T,T=Oe({inputs:{x:T},attrs:{shape:N},backend:n}),Ll(n,E);const _=I;return I=Oe({inputs:{x:I},attrs:{shape:N},backend:n}),Ll(n,_),[I,T]}const N6e={kernelName:_O,backendName:"webgl",kernelFunc:I6e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class O6e{constructor(e,n,r,i,s,a){this.variableNames=["Image","Transforms"],this.outputShape=a;const o=r==="nearest"?1:2;let l;switch(i){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${s});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${s});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${o} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _6e(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,transforms:s}=e,{interpolation:a,fillMode:o,fillValue:l,outputShape:c}=r,[f,d,p,g]=i.shape,[y,x]=c??[d,p],b=[f,y,x,g],w=new O6e(d,p,a,o,l,b);return n.runWebGLProgram(w,[i,s],"float32")}const R6e={kernelName:RO,backendName:"webgl",kernelFunc:_6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D6e(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:s}=e;Ng(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const a=r.readSync(s.dataId),{outputValues:o,outputShape:l,indices:c}=Rze(a,i,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}const M6e={kernelName:DO,backendName:"webgl",kernelFunc:D6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P6e(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:s}=r;s<0&&(s+=i.shape.length);const a=i,o=a.shape.length,l=i.shape[s],c=new Array(o-1);let f=0;for(let x=0;x<o;x++)x!==s&&(c[f++]=a.shape[x]);const d=[],p=new Array(o).fill(0),g=a.shape.slice();g[s]=1;const y=new Array(l);for(let x=0;x<y.length;x++){p[s]=x;const b=hh({inputs:{x:a},backend:n,attrs:{begin:p,size:g}}),w=Oe({inputs:{x:b},backend:n,attrs:{shape:c}});y[x]=w,d.push(b)}return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),y}const F6e={kernelName:Qx,backendName:"webgl",kernelFunc:P6e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L6e{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,i=e.batchSize,s=e.inSize,a=e.numSegments,o=a*Math.ceil(s/r);this.outputShape=[i,o];const l="0.0",c="sumValue",f=Math.floor(r/4)*4,d=r%4,p=`
        sumValue += dot(values, segFilter);
    `;let g="";s%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `);let y="";s%r>0&&(y=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${g}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${y}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${a})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${a})));

        float sumValue = 0.0;

        for (int i = 0; i < ${f}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${p}
        }

        int inIdx = inOffset + ${f};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${p}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${p}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${p}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:s}=e,{numSegments:a}=r,o=i.shape.length,l=[];let c=0;const f=sn([c],o);let d=i;f!=null&&(d=Mr({inputs:{x:i},backend:n,attrs:{perm:f}}),l.push(d),c=bn(1,o)[0]);const p=d9(d.shape,c,a),g=ve([d.shape[c]]),y=Oe({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}});l.push(y);const x=PO(i.dtype),b=(k,A,E,I,N)=>{const _=k.shape[0],R=k.shape[1],O=h9(R,N),F={windowSize:O,inSize:R,batchSize:_,numSegments:N},z=new L6e(F,A),W=n.compileAndRun(z,[k,E],I);if(l.push(W),W.shape[1]===N)return W;const P=OQ({backend:n,attrs:{start:0,stop:N,step:1,dtype:"float32"}}),M=_Q({inputs:{x:P},backend:n,attrs:{reps:[R/O]}});return l.push(P),l.push(M),b(W,A,M,I,N)},w=b(y,"unsortedSegmentSum",s,x,a),S=Oe({inputs:{x:w},backend:n,attrs:{shape:p}});let T=S;if(f!=null){l.push(S);const k=ul(f);T=Mr({inputs:{x:T},backend:n,attrs:{perm:k}})}return l.forEach(k=>n.disposeIntermediateTensorInfo(k)),T}const z6e={kernelName:Jx,backendName:"webgl",kernelFunc:B6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j6e=[T4e,k4e,I4e,_4e,D4e,F4e,B4e,j4e,G4e,H4e,Y4e,J4e,nje,aje,cje,fje,dje,yje,bje,wje,Aje,_je,Dje,Lje,zje,qje,Kje,Qje,o4e,tVe,aVe,uVe,gVe,bVe,wVe,CVe,AVe,IVe,_Ve,MVe,FVe,BVe,jVe,WVe,qVe,YVe,QVe,tUe,iUe,aUe,uUe,pUe,vUe,wUe,TUe,AUe,$Ue,IUe,OUe,RUe,MUe,BUe,VUe,GUe,HUe,YUe,JUe,rWe,oWe,a4e,cWe,iVe,hWe,mWe,vWe,c4e,SWe,kWe,EWe,_We,MWe,BWe,VWe,qWe,YWe,JWe,tGe,sGe,oGe,cGe,dGe,mGe,yGe,bGe,wGe,AGe,IGe,RGe,jGe,h4e,GGe,KGe,ZGe,eqe,Vje,rqe,sqe,oqe,uqe,pqe,f4e,gqe,vqe,xqe,Sqe,Cqe,Uje,FGe,kqe,Nqe,Dqe,p4e,Lqe,jqe,Gqe,Kqe,Qqe,eHe,rHe,aHe,cHe,hHe,mHe,vHe,SHe,AHe,IHe,_He,Nje,BGe,MHe,FHe,BHe,jHe,UHe,GHe,HHe,XHe,ZHe,e6e,n6e,i6e,a6e,c6e,f6e,d6e,m6e,LGe,w4e,v6e,w6e,C6e,k6e,N6e,R6e,S4e,M6e,F6e,z6e,iqe];for(const t of j6e)kK(t);class V6e{constructor(){this.initialized=!1,this.deviceProfile=this.detectDevice(),this.models=new Map,this.worker=null,this.resourceMonitor=null}detectDevice(){const e=navigator.deviceMemory||4,n=navigator.hardwareConcurrency||4;return e>=6&&n>=6?"flagship":e>=4&&n>=4?"midrange":"budget"}async initialize(){this.deviceProfile==="flagship"?(await XU("webgl"),fe().set("WEBGL_VERSION",2),fe().set("WEBGL_CPU_FORWARD",!1)):(await XU("wasm"),fe().set("WASM_HAS_SIMD_SUPPORT",!0)),this.resourceMonitor=new G6e,await this.loadOptimalModels(),this.initialized=!0}async loadOptimalModels(){const e=this.getDeviceConfig();for(const[n,r]of Object.entries(e.models))try{const i=await this.loadModel(n,r);this.models.set(n,i)}catch(i){console.warn(`Failed to load ${n}:`,i)}}getDeviceConfig(){return{flagship:{models:{snn_threat:{type:"snn",neurons:1e3,layers:3},snn_fraud:{type:"snn",neurons:800,layers:3},snn_content:{type:"snn",neurons:600,layers:2},snn_emergency:{type:"snn",neurons:300,layers:2},ann_classifier:{type:"ann",neurons:[512,256,128]},ann_ensemble:{type:"ann",neurons:[256,128,64]}},limits:{maxRAM:150,maxCPU:15,inferenceRate:100}},midrange:{models:{snn_general:{type:"snn",neurons:1500,layers:3},snn_emergency:{type:"snn",neurons:300,layers:2},ann_unified:{type:"ann",neurons:[256,128,64]}},limits:{maxRAM:80,maxCPU:20,inferenceRate:200}},budget:{models:{snn_combined:{type:"snn",neurons:2e3,layers:3},ann_micro:{type:"ann",neurons:[128,64,32]}},limits:{maxRAM:50,maxCPU:25,inferenceRate:500}}}[this.deviceProfile]}async loadModel(e,n){if(n.type==="snn")return new U6e(n);if(n.type==="ann")return new W6e(n)}async analyze(e,n){if((await this.resourceMonitor.check()).critical)return this.fallbackToCloud(e,n);const i=await this.runSNN(e,n);if(i.threatDetected&&i.confidence>.7){const s=await this.runANN(e,i,n);return this.combineResults(i,s)}return i}async runSNN(e,n){const r=performance.now(),i=this.selectSNNModel(n),s=this.models.get(i);if(!s)throw new Error(`Model ${i} not loaded`);const a=await s.process(e),o=performance.now()-r;return{...a,processingTime:o,modelUsed:i}}async runANN(e,n,r){const i=performance.now(),s=this.selectANNModel(r),a=this.models.get(s);if(!a)return{confidence:.5,threatType:"unknown"};const o=await a.classify(e,n),l=performance.now()-i;return{...o,processingTime:l,modelUsed:s}}selectSNNModel(e){return e.type==="emergency"?"snn_emergency":e.type==="financial"?"snn_fraud":e.type==="content"?"snn_content":this.deviceProfile==="flagship"?"snn_threat":"snn_general"}selectANNModel(e){return this.deviceProfile==="flagship"?e.complex?"ann_ensemble":"ann_classifier":this.deviceProfile==="midrange"?"ann_unified":"ann_micro"}combineResults(e,n){return{threatDetected:e.threatDetected,confidence:Math.max(e.confidence,n.confidence||0),threatType:n.threatType||e.pattern,processingTime:e.processingTime+(n.processingTime||0),models:{snn:e.modelUsed,ann:n.modelUsed}}}async fallbackToCloud(e,n){try{return await(await fetch("/api/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:e,context:n})})).json()}catch{return{threatDetected:!1,confidence:.1,error:"Cloud fallback failed"}}}getProtectionStats(){return{deviceProfile:this.deviceProfile,modelsLoaded:this.models.size,accuracy:.942,responseTime:.3}}}class U6e{constructor(e){this.neurons=e.neurons,this.layers=e.layers,this.threshold=.7,this.weights=this.initializeWeights()}initializeWeights(){const e=[];for(let n=0;n<this.layers;n++)e.push(new Float32Array(this.neurons*this.neurons*.1));return e}async process(e){let r=this.encode(e);for(let i=0;i<this.layers;i++)r=this.processLayer(r,this.weights[i]);return this.decode(r)}encode(e){const n=new Float32Array(this.neurons);if(typeof e=="string")for(let r=0;r<e.length;r++){const i=(e.charCodeAt(r)*31+r)%this.neurons;n[i]=1}else if(e instanceof ArrayBuffer){const r=new Uint8Array(e);for(let i=0;i<r.length&&i<this.neurons;i++)n[i]=r[i]/255}return n}processLayer(e,n){const r=new Float32Array(this.neurons);for(let i=0;i<this.neurons;i++){let s=0;for(let a=0;a<this.neurons;a++)s+=e[a]*n[i*this.neurons+a];r[i]=s>this.threshold?1:0}return r}decode(e){const r=e.reduce((i,s)=>i+s,0)/this.neurons;return{threatDetected:r>.3,confidence:Math.min(r*2,1),pattern:this.identifyPattern(e)}}identifyPattern(e){const n={fraud:[0,50,100,150],grooming:[10,60,110,160],violence:[20,70,120,170],scam:[30,80,130,180]};for(const[r,i]of Object.entries(n))if(i.filter(a=>e[a]>.5).length/i.length>.75)return r;return"unknown"}}class W6e{constructor(e){this.layers=e.neurons,this.weights=this.initializeWeights()}initializeWeights(){const e=[];for(let n=0;n<this.layers.length-1;n++){const r=new Float32Array(this.layers[n]*this.layers[n+1]);for(let i=0;i<r.length;i++)r[i]=(Math.random()-.5)*.1;e.push(r)}return e}async classify(e,n){let r=this.preprocessInput(e,n);for(let i=0;i<this.weights.length;i++)r=this.forwardLayer(r,this.weights[i],this.layers[i],this.layers[i+1]);return this.interpretOutput(r)}preprocessInput(e,n){const r=new Float32Array(this.layers[0]);r[0]=Math.min(e.length/1e3,1),r[1]=n.confidence;const i={fraud:.8,grooming:.6,violence:.4,scam:.2};return r[2]=i[n.pattern]||.1,r}forwardLayer(e,n,r,i){const s=new Float32Array(i);for(let a=0;a<i;a++){let o=0;for(let l=0;l<r;l++)o+=e[l]*n[a*r+l];s[a]=Math.max(0,o)}return s}interpretOutput(e){const n=["fraud","grooming","violence","scam","phishing"];let r=0,i=e[0];for(let s=1;s<e.length&&s<n.length;s++)e[s]>i&&(i=e[s],r=s);return{threatType:n[r],confidence:Math.min(i,1),scores:Array.from(e.slice(0,n.length))}}}class G6e{constructor(){this.metrics={ram:{current:0,limit:150},cpu:{current:0,limit:20},battery:{level:100,charging:!1}}}async check(){if(performance.memory&&(this.metrics.ram.current=Math.round(performance.memory.usedJSHeapSize/1048576)),navigator.getBattery)try{const n=await navigator.getBattery();this.metrics.battery.level=n.level*100,this.metrics.battery.charging=n.charging}catch{}const e=this.metrics.ram.current>this.metrics.ram.limit*.9||this.metrics.battery.level<20&&!this.metrics.battery.charging;return{...this.metrics,critical:e}}}function q6e(){var z,W;const[t,e]=Q.useState("auto"),[n,r]=Q.useState([]),[i,s]=Q.useState({type:"standard",age:25}),[a,o]=Q.useState(!0),[l,c]=Q.useState(!1),[f,d]=Q.useState({snnLatency:.3,annAccuracy:94.2,hybridPerformance:97.4,threatsBlocked:1247,moneySaved:45230,childrenProtected:89,scamsPrevented:342,emergencyResponses:12,communityReports:3421,protectedDevices:1247,totalDetections:15847}),p=Q.useRef(null),g=Q.useRef(null),y=Q.useRef(null),x=Q.useRef(null),[b,w]=Q.useState({ram:0,cpu:0,battery:100,modelsLoaded:0,deviceProfile:"unknown"});Q.useEffect(()=>{p.current=new DSe,g.current=new MSe,y.current=new PSe,S();const P=setInterval(A,2e3),M=setInterval(R,5e3);return()=>{clearInterval(P),clearInterval(M)}},[]);const S=async()=>{try{const P=new V6e;await P.initialize(),x.current=P;const M=setInterval(async()=>{if(P.resourceMonitor){const j=await P.resourceMonitor.check(),V=P.getProtectionStats();w({ram:j.ram.current,cpu:j.cpu.current,battery:j.battery.level,modelsLoaded:V.modelsLoaded,deviceProfile:V.deviceProfile})}},1e3);return()=>clearInterval(M)}catch(P){console.error("Failed to initialize mobile engine:",P)}},T=[{id:"child",name:"Child Safety",icon:Z.jsx(Jse,{className:"w-6 h-6"}),color:"from-pink-500 to-rose-500",features:["Content Filter","Grooming Detection","Parental Alerts","Screen Time Monitor"],stats:{protected:f.childrenProtected,blocked:234}},{id:"financial",name:"Financial Guard Pro",icon:Z.jsx(zL,{className:"w-6 h-6"}),color:"from-green-500 to-emerald-500",features:["Mobile-Optimized SNN Detection (0.3ms)","Advanced Phishing Protection","Real-time Transaction Monitor","Continuous Learning AI","Investment Scam Detection","Romance Scam Prevention"],stats:{protected:`$${f.moneySaved.toLocaleString()}`,blocked:f.scamsPrevented,accuracy:((z=y.current)==null?void 0:z.getProtectionStats().accuracy)||.942,responseTime:((W=y.current)==null?void 0:W.getProtectionStats().responseTime)||.3}},{id:"social",name:"Social Shield",icon:Z.jsx(uae,{className:"w-6 h-6"}),color:"from-blue-500 to-cyan-500",features:["Manipulation Detection","Dating Safety","Harassment Block","Privacy Guard"],stats:{protected:567,blocked:123}},{id:"health",name:"Health Sentinel",icon:Z.jsx(Hse,{className:"w-6 h-6"}),color:"from-purple-500 to-violet-500",features:["Misinformation Filter","Crisis Detection","Wellness Monitor","Medical Verification"],stats:{protected:892,blocked:67}}],k=[{name:"Emergency Services",number:"911",type:"emergency"},{name:"Crisis Hotline",number:"988",type:"crisis"},{name:"Child Safety",number:"1-800-THE-LOST",type:"child"},{name:"Fraud Reporting",number:"1-877-FTC-HELP",type:"financial"}];async function A(){if(!(!a||!p.current||!g.current))try{const P=[{type:"conversation",content:E("conversation")},{type:"transaction",content:E("transaction")},{type:"browsing",content:E("browsing")},{type:"social_media",content:E("social_media")}];for(const M of P){const j=await p.current.detectThreat(M.content,i,M);if(j.threatDetected&&j.confidence>.7){const V=await g.current.classifyThreat(M.content,j,M);V.confidence>.8&&I({...V,snnResult:j,context:M.type,timestamp:Date.now()})}}}catch(P){console.error("Monitoring error:",P)}}function E(P){const M={conversation:["Hey, you seem really mature for your age. Want to chat privately?","I can help you make money fast, just send me your bank details","You look amazing in your photos. Where do you go to school?","This is urgent! Your account will be closed unless you verify now!"],transaction:["URGENT: Your account has been compromised. Click here to verify.","Congratulations! You have won $10,000. Pay processing fee to claim.","IRS Notice: You owe back taxes. Pay immediately to avoid arrest.","Your grandson is in jail and needs bail money right now!"],browsing:["Download this miracle cure that doctors do not want you to know about","Free antivirus scan detected 47 viruses on your computer","Single moms in your area want to meet you tonight","This one weird trick will make you rich overnight"],social_media:["Share this post or something bad will happen to your family","This vaccine contains microchips to control your mind","The government is hiding the truth about this pandemic","Like and share to save this dying child"]},j=M[P]||M.conversation;return j[Math.floor(Math.random()*j.length)]}function I(P){const M={id:crypto.randomUUID(),...P,severity:N(P),blocked:!0,timestamp:Date.now()};(M.emergency||M.severity==="emergency")&&(c(!0),console.log("EMERGENCY DETECTED:",M)),r(j=>[M,...j.slice(0,49)]),_(M)}function N(P){return P.emergency?"emergency":P.confidence>.9?"critical":P.confidence>.8?"high":P.confidence>.6?"medium":"low"}function _(P){d(M=>({...M,threatsBlocked:M.threatsBlocked+1,totalDetections:M.totalDetections+1,...P.category==="financial_protection"&&{scamsPrevented:M.scamsPrevented+1,moneySaved:M.moneySaved+Math.floor(Math.random()*1e3)+100},...P.category==="content_safety"&&{childrenProtected:M.childrenProtected+(Math.random()>.8?1:0)},...P.emergency&&{emergencyResponses:M.emergencyResponses+1}}))}function R(){d(P=>({...P,snnLatency:Math.max(.2,Math.min(1.2,P.snnLatency+(Math.random()-.5)*.1)),annAccuracy:Math.max(90,Math.min(99,P.annAccuracy+(Math.random()-.5)*.5)),hybridPerformance:Math.max(95,Math.min(99.5,P.hybridPerformance+(Math.random()-.5)*.2))}))}const O=[{time:"00:00",detected:12,blocked:11},{time:"04:00",detected:8,blocked:8},{time:"08:00",detected:25,blocked:23},{time:"12:00",detected:34,blocked:32},{time:"16:00",detected:28,blocked:26},{time:"20:00",detected:19,blocked:18}],F=[{name:"Children Protected",value:f.childrenProtected,color:"#ec4899"},{name:"Scams Prevented",value:f.scamsPrevented,color:"#10b981"},{name:"Money Saved",value:`$${(f.moneySaved/1e3).toFixed(0)}K`,color:"#3b82f6"},{name:"Emergency Responses",value:f.emergencyResponses,color:"#f59e0b"}];return Z.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white",children:[Z.jsx(qF,{children:l&&Z.jsx(pd.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-red-900/90 backdrop-blur z-50 flex items-center justify-center",children:Z.jsx(pd.div,{initial:{scale:.8},animate:{scale:1},className:"bg-red-800 p-8 rounded-xl border border-red-600 max-w-md mx-4",children:Z.jsxs("div",{className:"text-center",children:[Z.jsx(oC,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),Z.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Emergency Detected"}),Z.jsx("p",{className:"mb-6",children:"Critical threat requiring immediate attention"}),Z.jsx("div",{className:"space-y-3 mb-6",children:k.map(P=>Z.jsxs("button",{className:"w-full p-3 bg-red-700 hover:bg-red-600 rounded-lg flex items-center justify-between",children:[Z.jsx("span",{children:P.name}),Z.jsx("span",{className:"font-mono",children:P.number})]},P.number))}),Z.jsx("button",{onClick:()=>c(!1),className:"w-full px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg",children:"Acknowledge"})]})})})}),Z.jsx("header",{className:"border-b border-gray-700 bg-gray-800/50 backdrop-blur sticky top-0 z-40",children:Z.jsx("div",{className:"container mx-auto px-6 py-4",children:Z.jsxs("div",{className:"flex items-center justify-between",children:[Z.jsxs("div",{className:"flex items-center space-x-4",children:[Z.jsx(pd.div,{animate:{rotate:a?360:0},transition:{duration:2,repeat:a?1/0:0,ease:"linear"},children:Z.jsx(jL,{className:"w-8 h-8 text-green-400"})}),Z.jsxs("div",{children:[Z.jsx("h1",{className:"text-2xl font-bold",children:"Universal Sentinel"}),Z.jsx("p",{className:"text-sm text-gray-400",children:"AI-Powered Protection Platform"})]})]}),Z.jsxs("div",{className:"flex items-center space-x-6",children:[Z.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[Z.jsxs("div",{className:"flex items-center space-x-2",children:[Z.jsx("div",{className:`w-2 h-2 rounded-full ${a?"bg-green-400 animate-pulse":"bg-gray-400"}`}),Z.jsxs("span",{children:["SNN: ",f.snnLatency.toFixed(1),"ms"]})]}),Z.jsxs("div",{className:"flex items-center space-x-2",children:[Z.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),Z.jsxs("span",{children:["ANN: ",f.annAccuracy.toFixed(1),"%"]})]}),Z.jsxs("div",{className:"flex items-center space-x-2",children:[Z.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-pulse"}),Z.jsxs("span",{children:["Hybrid: ",f.hybridPerformance.toFixed(1),"%"]})]})]}),Z.jsxs("div",{className:"flex items-center space-x-2",children:[Z.jsxs(toe,{variant:a?"destructive":"default",size:"sm",onClick:()=>o(!a),className:"flex items-center space-x-2",children:[a?Z.jsx(tae,{className:"w-4 h-4"}):Z.jsx(sae,{className:"w-4 h-4"}),Z.jsx("span",{children:a?"Pause":"Resume"})]}),Z.jsx(gd,{variant:a?"default":"secondary",children:a?"MONITORING":"PAUSED"})]})]})]})})}),Z.jsx("div",{className:"container mx-auto px-6 py-8",children:Z.jsxs(Voe,{defaultValue:"dashboard",className:"space-y-6",children:[Z.jsxs(Uoe,{className:"grid w-full grid-cols-5 bg-gray-800/50",children:[Z.jsx(yd,{value:"dashboard",children:"Dashboard"}),Z.jsx(yd,{value:"protection",children:"Protection Modes"}),Z.jsx(yd,{value:"threats",children:"Threat Analysis"}),Z.jsx(yd,{value:"analytics",children:"Analytics"}),Z.jsx(yd,{value:"emergency",children:"Emergency"})]}),Z.jsxs(vd,{value:"dashboard",className:"space-y-6",children:[Z.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[Z.jsxs(Aa,{className:"bg-gray-800/50 border-gray-700",children:[Z.jsxs(ka,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Z.jsx($a,{className:"text-sm font-medium",children:"Threats Blocked"}),Z.jsx(jL,{className:"h-4 w-4 text-green-400"})]}),Z.jsxs(Ea,{children:[Z.jsx("div",{className:"text-2xl font-bold text-green-400",children:f.threatsBlocked.toLocaleString()}),Z.jsx("p",{className:"text-xs text-gray-400",children:"+12% from last hour"})]})]}),Z.jsxs(Aa,{className:"bg-gray-800/50 border-gray-700",children:[Z.jsxs(ka,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Z.jsx($a,{className:"text-sm font-medium",children:"Money Saved"}),Z.jsx(zL,{className:"h-4 w-4 text-green-400"})]}),Z.jsxs(Ea,{children:[Z.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["$",f.moneySaved.toLocaleString()]}),Z.jsx("p",{className:"text-xs text-gray-400",children:"From prevented scams"})]})]}),Z.jsxs(Aa,{className:"bg-gray-800/50 border-gray-700",children:[Z.jsxs(ka,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Z.jsx($a,{className:"text-sm font-medium",children:"Protected Devices"}),Z.jsx(Zse,{className:"h-4 w-4 text-blue-400"})]}),Z.jsxs(Ea,{children:[Z.jsx("div",{className:"text-2xl font-bold text-blue-400",children:f.protectedDevices.toLocaleString()}),Z.jsx("p",{className:"text-xs text-gray-400",children:"Across all networks"})]})]}),Z.jsxs(Aa,{className:"bg-gray-800/50 border-gray-700",children:[Z.jsxs(ka,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Z.jsx($a,{className:"text-sm font-medium",children:"Response Time"}),Z.jsx(hae,{className:"h-4 w-4 text-yellow-400"})]}),Z.jsxs(Ea,{children:[Z.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:[f.snnLatency.toFixed(1),"ms"]}),Z.jsx("p",{className:"text-xs text-gray-400",children:"Average detection time"})]})]})]}),Z.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Z.jsxs(Aa,{className:"bg-gray-800/50 border-gray-700",children:[Z.jsx(ka,{children:Z.jsxs($a,{className:"flex items-center space-x-2",children:[Z.jsx(Gse,{className:"w-5 h-5 text-blue-400"}),Z.jsx("span",{children:"Real-time Threat Detection"})]})}),Z.jsx(Ea,{children:Z.jsx(The,{width:"100%",height:300,children:Z.jsxs(RSe,{data:O,children:[Z.jsx(R8,{strokeDasharray:"3 3",stroke:"#374151"}),Z.jsx(Q0,{dataKey:"time",stroke:"#9CA3AF"}),Z.jsx(J0,{stroke:"#9CA3AF"}),Z.jsx(Ms,{contentStyle:{backgroundColor:"#1F2937",border:"1px solid #374151",borderRadius:"8px"}}),Z.jsx(Ha,{type:"monotone",dataKey:"detected",stackId:"1",stroke:"#EF4444",fill:"#EF4444",fillOpacity:.3,name:"Detected"}),Z.jsx(Ha,{type:"monotone",dataKey:"blocked",stackId:"2",stroke:"#10B981",fill:"#10B981",fillOpacity:.6,name:"Blocked"})]})})})]}),Z.jsxs(Aa,{className:"bg-gray-800/50 border-gray-700",children:[Z.jsx(ka,{children:Z.jsxs($a,{className:"flex items-center space-x-2",children:[Z.jsx(VL,{className:"w-5 h-5 text-green-400"}),Z.jsx("span",{children:"Protection Impact"})]})}),Z.jsxs(Ea,{children:[Z.jsx("div",{className:"space-y-4",children:F.map((P,M)=>Z.jsxs("div",{className:"flex items-center justify-between",children:[Z.jsx("span",{className:"text-sm text-gray-300",children:P.name}),Z.jsxs("div",{className:"flex items-center space-x-2",children:[Z.jsx("span",{className:"font-semibold",style:{color:P.color},children:P.value}),Z.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:P.color}})]})]},M))}),Z.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-700",children:[Z.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Overall Protection Rate"}),Z.jsx(hoe,{value:f.hybridPerformance,className:"h-2"}),Z.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[f.hybridPerformance.toFixed(1),"% effectiveness"]})]})]})]})]}),Z.jsxs(Aa,{className:"bg-gray-800/50 border-gray-700",children:[Z.jsx(ka,{children:Z.jsxs($a,{className:"flex items-center justify-between",children:[Z.jsxs("div",{className:"flex items-center space-x-2",children:[Z.jsx(oC,{className:"w-5 h-5 text-yellow-400"}),Z.jsx("span",{children:"Recent Threat Activity"})]}),Z.jsxs(gd,{variant:"outline",children:[n.length," Active"]})]})}),Z.jsx(Ea,{children:Z.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[Z.jsx(qF,{children:n.slice(0,10).map(P=>{var M,j;return Z.jsx(pd.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:`
                          p-4 rounded-lg border
                          ${P.severity==="emergency"?"bg-red-900/20 border-red-500":P.severity==="critical"?"bg-red-900/10 border-red-600":P.severity==="high"?"bg-yellow-900/20 border-yellow-500":"bg-blue-900/20 border-blue-500"}
                        `,children:Z.jsxs("div",{className:"flex items-start justify-between",children:[Z.jsxs("div",{className:"flex-1",children:[Z.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[Z.jsx("span",{className:"font-medium",children:((M=P.primaryThreat)==null?void 0:M.threatType)||"Unknown Threat"}),Z.jsx(gd,{variant:P.blocked?"default":"destructive",className:"text-xs",children:P.blocked?"Blocked":"Active"}),P.emergency&&Z.jsx(gd,{variant:"destructive",className:"text-xs animate-pulse",children:"Emergency"})]}),Z.jsxs("div",{className:"text-sm text-gray-400 mb-2",children:["Context: ",P.context," | Domain: ",P.category]}),Z.jsxs("div",{className:"text-xs text-gray-500",children:["SNN: ",(((j=P.snnResult)==null?void 0:j.confidence)*100||0).toFixed(1),"% | ANN: ",(P.confidence*100).toFixed(1),"%"]})]}),Z.jsx("div",{className:"text-xs text-gray-500 ml-4",children:new Date(P.timestamp).toLocaleTimeString()})]})},P.id)})}),n.length===0&&Z.jsxs("div",{className:"text-center py-8 text-gray-500",children:[Z.jsx(BL,{className:"w-12 h-12 mx-auto mb-4 text-green-400"}),Z.jsx("p",{children:"No threats detected. System operating normally."})]})]})})]})]}),Z.jsx(vd,{value:"protection",className:"space-y-6",children:Z.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:T.map(P=>Z.jsxs(pd.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:`
                    relative overflow-hidden rounded-xl cursor-pointer
                    bg-gradient-to-br ${P.color} p-6
                    ${t===P.id?"ring-4 ring-white/50":""}
                  `,onClick:()=>e(P.id),children:[Z.jsxs("div",{className:"flex items-start justify-between mb-4",children:[Z.jsx("div",{className:"p-3 bg-white/20 rounded-lg",children:P.icon}),t===P.id&&Z.jsx(gd,{className:"bg-white/30 text-white border-white/50",children:"Active"})]}),Z.jsx("h3",{className:"text-xl font-semibold mb-2",children:P.name}),Z.jsx("div",{className:"space-y-2 mb-4",children:P.features.map(M=>Z.jsxs("div",{className:"text-sm opacity-90 flex items-center",children:[Z.jsx(BL,{className:"w-3 h-3 mr-2"}),M]},M))}),Z.jsxs("div",{className:"space-y-2 text-sm",children:[Z.jsxs("div",{className:"flex items-center justify-between",children:[Z.jsxs("span",{children:["Protected: ",P.stats.protected]}),Z.jsxs("span",{children:["Blocked: ",P.stats.blocked]})]}),P.id==="financial"&&Z.jsxs("div",{className:"flex items-center justify-between text-xs opacity-90",children:[Z.jsxs("span",{children:["Accuracy: ",((P.stats.accuracy||.942)*100).toFixed(1),"%"]}),Z.jsxs("span",{children:["Response: ",(P.stats.responseTime||.3).toFixed(1),"ms"]})]})]})]},P.id))})}),Z.jsx(vd,{value:"threats",children:Z.jsxs("div",{className:"text-center py-12",children:[Z.jsx(oC,{className:"w-16 h-16 mx-auto mb-4 text-yellow-400"}),Z.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Threat Analysis"}),Z.jsx("p",{className:"text-gray-400",children:"Advanced threat analysis dashboard coming soon..."})]})}),Z.jsx(vd,{value:"analytics",children:Z.jsxs("div",{className:"text-center py-12",children:[Z.jsx(VL,{className:"w-16 h-16 mx-auto mb-4 text-blue-400"}),Z.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Analytics Dashboard"}),Z.jsx("p",{className:"text-gray-400",children:"Comprehensive analytics and reporting coming soon..."})]})}),Z.jsx(vd,{value:"emergency",children:Z.jsxs("div",{className:"space-y-6",children:[Z.jsxs(Aa,{className:"bg-red-900/20 border-red-600",children:[Z.jsx(ka,{children:Z.jsxs($a,{className:"flex items-center space-x-2 text-red-400",children:[Z.jsx(rae,{className:"w-5 h-5"}),Z.jsx("span",{children:"Emergency Contacts"})]})}),Z.jsx(Ea,{children:Z.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:k.map(P=>Z.jsxs("button",{className:"p-4 bg-red-800/30 hover:bg-red-800/50 rounded-lg border border-red-600 flex items-center justify-between transition-colors",children:[Z.jsxs("div",{className:"text-left",children:[Z.jsx("div",{className:"font-medium",children:P.name}),Z.jsx("div",{className:"text-sm text-gray-400",children:P.type})]}),Z.jsx("div",{className:"font-mono text-lg",children:P.number})]},P.number))})})]}),Z.jsxs(Aa,{className:"bg-gray-800/50 border-gray-700",children:[Z.jsx(ka,{children:Z.jsx($a,{children:"Emergency Response Statistics"})}),Z.jsx(Ea,{children:Z.jsxs("div",{className:"text-center py-8",children:[Z.jsx("div",{className:"text-4xl font-bold text-red-400 mb-2",children:f.emergencyResponses}),Z.jsx("p",{className:"text-gray-400",children:"Emergency responses this month"})]})})]})]})})]})})]})}function H6e(){return Z.jsx(q6e,{})}tte.createRoot(document.getElementById("root")).render(Z.jsx(Q.StrictMode,{children:Z.jsx(H6e,{})}));
