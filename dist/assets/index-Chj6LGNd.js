function J5(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var bv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function One(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var IC={exports:{}},Pd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xL;function _ne(){if(xL)return Pd;xL=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var o in i)o!=="key"&&(s[o]=i[o])}else s=i;return i=s.ref,{$$typeof:t,type:r,key:a,ref:i!==void 0?i:null,props:s}}return Pd.Fragment=e,Pd.jsx=n,Pd.jsxs=n,Pd}var wL;function Rne(){return wL||(wL=1,IC.exports=_ne()),IC.exports}var V=Rne(),NC={exports:{}},it={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SL;function Dne(){if(SL)return it;SL=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;function p(L){return L===null||typeof L!="object"?null:(L=h&&L[h]||L["@@iterator"],typeof L=="function"?L:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,b={};function v(L,H,X){this.props=L,this.context=H,this.refs=b,this.updater=X||g}v.prototype.isReactComponent={},v.prototype.setState=function(L,H){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,H,"setState")},v.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function w(){}w.prototype=v.prototype;function S(L,H,X){this.props=L,this.context=H,this.refs=b,this.updater=X||g}var T=S.prototype=new w;T.constructor=S,y(T,v.prototype),T.isPureReactComponent=!0;var A=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},E=Object.prototype.hasOwnProperty;function I(L,H,X,Y,ie,pe){return X=pe.ref,{$$typeof:t,type:L,key:H,ref:X!==void 0?X:null,props:pe}}function N(L,H){return I(L.type,H,void 0,void 0,void 0,L.props)}function _(L){return typeof L=="object"&&L!==null&&L.$$typeof===t}function D(L){var H={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(X){return H[X]})}var O=/\/+/g;function P(L,H){return typeof L=="object"&&L!==null&&L.key!=null?D(""+L.key):H.toString(36)}function z(){}function W(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(z,z):(L.status="pending",L.then(function(H){L.status==="pending"&&(L.status="fulfilled",L.value=H)},function(H){L.status==="pending"&&(L.status="rejected",L.reason=H)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function U(L,H,X,Y,ie){var pe=typeof L;(pe==="undefined"||pe==="boolean")&&(L=null);var ve=!1;if(L===null)ve=!0;else switch(pe){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(L.$$typeof){case t:case e:ve=!0;break;case f:return ve=L._init,U(ve(L._payload),H,X,Y,ie)}}if(ve)return ie=ie(L),ve=Y===""?"."+P(L,0):Y,A(ie)?(X="",ve!=null&&(X=ve.replace(O,"$&/")+"/"),U(ie,H,X,"",function(me){return me})):ie!=null&&(_(ie)&&(ie=N(ie,X+(ie.key==null||L&&L.key===ie.key?"":(""+ie.key).replace(O,"$&/")+"/")+ve)),H.push(ie)),1;ve=0;var ke=Y===""?".":Y+":";if(A(L))for(var Ee=0;Ee<L.length;Ee++)Y=L[Ee],pe=ke+P(Y,Ee),ve+=U(Y,H,X,pe,ie);else if(Ee=p(L),typeof Ee=="function")for(L=Ee.call(L),Ee=0;!(Y=L.next()).done;)Y=Y.value,pe=ke+P(Y,Ee++),ve+=U(Y,H,X,pe,ie);else if(pe==="object"){if(typeof L.then=="function")return U(W(L),H,X,Y,ie);throw H=String(L),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return ve}function R(L,H,X){if(L==null)return L;var Y=[],ie=0;return U(L,Y,"","",function(pe){return H.call(X,pe,ie++)}),Y}function F(L){if(L._status===-1){var H=L._result;H=H(),H.then(function(X){(L._status===0||L._status===-1)&&(L._status=1,L._result=X)},function(X){(L._status===0||L._status===-1)&&(L._status=2,L._result=X)}),L._status===-1&&(L._status=0,L._result=H)}if(L._status===1)return L._result.default;throw L._result}var B=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function K(){}return it.Children={map:R,forEach:function(L,H,X){R(L,function(){H.apply(this,arguments)},X)},count:function(L){var H=0;return R(L,function(){H++}),H},toArray:function(L){return R(L,function(H){return H})||[]},only:function(L){if(!_(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},it.Component=v,it.Fragment=n,it.Profiler=i,it.PureComponent=S,it.StrictMode=r,it.Suspense=l,it.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,it.__COMPILER_RUNTIME={__proto__:null,c:function(L){return k.H.useMemoCache(L)}},it.cache=function(L){return function(){return L.apply(null,arguments)}},it.cloneElement=function(L,H,X){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var Y=y({},L.props),ie=L.key,pe=void 0;if(H!=null)for(ve in H.ref!==void 0&&(pe=void 0),H.key!==void 0&&(ie=""+H.key),H)!E.call(H,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&H.ref===void 0||(Y[ve]=H[ve]);var ve=arguments.length-2;if(ve===1)Y.children=X;else if(1<ve){for(var ke=Array(ve),Ee=0;Ee<ve;Ee++)ke[Ee]=arguments[Ee+2];Y.children=ke}return I(L.type,ie,void 0,void 0,pe,Y)},it.createContext=function(L){return L={$$typeof:a,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:s,_context:L},L},it.createElement=function(L,H,X){var Y,ie={},pe=null;if(H!=null)for(Y in H.key!==void 0&&(pe=""+H.key),H)E.call(H,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(ie[Y]=H[Y]);var ve=arguments.length-2;if(ve===1)ie.children=X;else if(1<ve){for(var ke=Array(ve),Ee=0;Ee<ve;Ee++)ke[Ee]=arguments[Ee+2];ie.children=ke}if(L&&L.defaultProps)for(Y in ve=L.defaultProps,ve)ie[Y]===void 0&&(ie[Y]=ve[Y]);return I(L,pe,void 0,void 0,null,ie)},it.createRef=function(){return{current:null}},it.forwardRef=function(L){return{$$typeof:o,render:L}},it.isValidElement=_,it.lazy=function(L){return{$$typeof:f,_payload:{_status:-1,_result:L},_init:F}},it.memo=function(L,H){return{$$typeof:c,type:L,compare:H===void 0?null:H}},it.startTransition=function(L){var H=k.T,X={};k.T=X;try{var Y=L(),ie=k.S;ie!==null&&ie(X,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(K,B)}catch(pe){B(pe)}finally{k.T=H}},it.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},it.use=function(L){return k.H.use(L)},it.useActionState=function(L,H,X){return k.H.useActionState(L,H,X)},it.useCallback=function(L,H){return k.H.useCallback(L,H)},it.useContext=function(L){return k.H.useContext(L)},it.useDebugValue=function(){},it.useDeferredValue=function(L,H){return k.H.useDeferredValue(L,H)},it.useEffect=function(L,H,X){var Y=k.H;if(typeof X=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Y.useEffect(L,H)},it.useId=function(){return k.H.useId()},it.useImperativeHandle=function(L,H,X){return k.H.useImperativeHandle(L,H,X)},it.useInsertionEffect=function(L,H){return k.H.useInsertionEffect(L,H)},it.useLayoutEffect=function(L,H){return k.H.useLayoutEffect(L,H)},it.useMemo=function(L,H){return k.H.useMemo(L,H)},it.useOptimistic=function(L,H){return k.H.useOptimistic(L,H)},it.useReducer=function(L,H,X){return k.H.useReducer(L,H,X)},it.useRef=function(L){return k.H.useRef(L)},it.useState=function(L){return k.H.useState(L)},it.useSyncExternalStore=function(L,H,X){return k.H.useSyncExternalStore(L,H,X)},it.useTransition=function(){return k.H.useTransition()},it.version="19.1.0",it}var CL;function ah(){return CL||(CL=1,NC.exports=Dne()),NC.exports}var q=ah();const J=Nt(q),e6=J5({__proto__:null,default:J},[q]);var OC={exports:{}},Ld={},_C={exports:{}},RC={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TL;function Mne(){return TL||(TL=1,function(t){function e(R,F){var B=R.length;R.push(F);e:for(;0<B;){var K=B-1>>>1,L=R[K];if(0<i(L,F))R[K]=F,R[B]=L,B=K;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var F=R[0],B=R.pop();if(B!==F){R[0]=B;e:for(var K=0,L=R.length,H=L>>>1;K<H;){var X=2*(K+1)-1,Y=R[X],ie=X+1,pe=R[ie];if(0>i(Y,B))ie<L&&0>i(pe,Y)?(R[K]=pe,R[ie]=B,K=ie):(R[K]=Y,R[X]=B,K=X);else if(ie<L&&0>i(pe,B))R[K]=pe,R[ie]=B,K=ie;else break e}}return F}function i(R,F){var B=R.sortIndex-F.sortIndex;return B!==0?B:R.id-F.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],f=1,h=null,p=3,g=!1,y=!1,b=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function A(R){for(var F=n(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=R)r(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(c)}}function k(R){if(b=!1,A(R),!y)if(n(l)!==null)y=!0,E||(E=!0,P());else{var F=n(c);F!==null&&U(k,F.startTime-R)}}var E=!1,I=-1,N=5,_=-1;function D(){return v?!0:!(t.unstable_now()-_<N)}function O(){if(v=!1,E){var R=t.unstable_now();_=R;var F=!0;try{e:{y=!1,b&&(b=!1,S(I),I=-1),g=!0;var B=p;try{t:{for(A(R),h=n(l);h!==null&&!(h.expirationTime>R&&D());){var K=h.callback;if(typeof K=="function"){h.callback=null,p=h.priorityLevel;var L=K(h.expirationTime<=R);if(R=t.unstable_now(),typeof L=="function"){h.callback=L,A(R),F=!0;break t}h===n(l)&&r(l),A(R)}else r(l);h=n(l)}if(h!==null)F=!0;else{var H=n(c);H!==null&&U(k,H.startTime-R),F=!1}}break e}finally{h=null,p=B,g=!1}F=void 0}}finally{F?P():E=!1}}}var P;if(typeof T=="function")P=function(){T(O)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,W=z.port2;z.port1.onmessage=O,P=function(){W.postMessage(null)}}else P=function(){w(O,0)};function U(R,F){I=w(function(){R(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(R){switch(p){case 1:case 2:case 3:var F=3;break;default:F=p}var B=p;p=F;try{return R()}finally{p=B}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(R,F){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var B=p;p=R;try{return F()}finally{p=B}},t.unstable_scheduleCallback=function(R,F,B){var K=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?K+B:K):B=K,R){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=B+L,R={id:f++,callback:F,priorityLevel:R,startTime:B,expirationTime:L,sortIndex:-1},B>K?(R.sortIndex=B,e(c,R),n(l)===null&&R===n(c)&&(b?(S(I),I=-1):b=!0,U(k,B-K))):(R.sortIndex=L,e(l,R),y||g||(y=!0,E||(E=!0,P()))),R},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(R){var F=p;return function(){var B=p;p=F;try{return R.apply(this,arguments)}finally{p=B}}}}(RC)),RC}var kL;function Pne(){return kL||(kL=1,_C.exports=Mne()),_C.exports}var DC={exports:{}},Ir={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AL;function Lne(){if(AL)return Ir;AL=1;var t=ah();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(l,c,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:h==null?null:""+h,children:l,containerInfo:c,implementation:f}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Ir.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ir.createPortal=function(l,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return s(l,c,null,f)},Ir.flushSync=function(l){var c=a.T,f=r.p;try{if(a.T=null,r.p=2,l)return l()}finally{a.T=c,r.p=f,r.d.f()}},Ir.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},Ir.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},Ir.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var f=c.as,h=o(f,c.crossOrigin),p=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;f==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:g}):f==="script"&&r.d.X(l,{crossOrigin:h,integrity:p,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Ir.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var f=o(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},Ir.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var f=c.as,h=o(f,c.crossOrigin);r.d.L(l,f,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Ir.preloadModule=function(l,c){if(typeof l=="string")if(c){var f=o(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},Ir.requestFormReset=function(l){r.d.r(l)},Ir.unstable_batchedUpdates=function(l,c){return l(c)},Ir.useFormState=function(l,c,f){return a.H.useFormState(l,c,f)},Ir.useFormStatus=function(){return a.H.useHostTransitionStatus()},Ir.version="19.1.0",Ir}var EL;function ZI(){if(EL)return DC.exports;EL=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),DC.exports=Lne(),DC.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $L;function Fne(){if($L)return Ld;$L=1;var t=Pne(),e=ah(),n=ZI();function r(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function s(u){var d=u,m=u;if(u.alternate)for(;d.return;)d=d.return;else{u=d;do d=u,(d.flags&4098)!==0&&(m=d.return),u=d.return;while(u)}return d.tag===3?m:null}function a(u){if(u.tag===13){var d=u.memoizedState;if(d===null&&(u=u.alternate,u!==null&&(d=u.memoizedState)),d!==null)return d.dehydrated}return null}function o(u){if(s(u)!==u)throw Error(r(188))}function l(u){var d=u.alternate;if(!d){if(d=s(u),d===null)throw Error(r(188));return d!==u?null:u}for(var m=u,x=d;;){var C=m.return;if(C===null)break;var $=C.alternate;if($===null){if(x=C.return,x!==null){m=x;continue}break}if(C.child===$.child){for($=C.child;$;){if($===m)return o(C),u;if($===x)return o(C),d;$=$.sibling}throw Error(r(188))}if(m.return!==x.return)m=C,x=$;else{for(var M=!1,j=C.child;j;){if(j===m){M=!0,m=C,x=$;break}if(j===x){M=!0,x=C,m=$;break}j=j.sibling}if(!M){for(j=$.child;j;){if(j===m){M=!0,m=$,x=C;break}if(j===x){M=!0,x=$,m=C;break}j=j.sibling}if(!M)throw Error(r(189))}}if(m.alternate!==x)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?u:d}function c(u){var d=u.tag;if(d===5||d===26||d===27||d===6)return u;for(u=u.child;u!==null;){if(d=c(u),d!==null)return d;u=u.sibling}return null}var f=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),T=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function P(u){return u===null||typeof u!="object"?null:(u=O&&u[O]||u["@@iterator"],typeof u=="function"?u:null)}var z=Symbol.for("react.client.reference");function W(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===z?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case y:return"Fragment";case v:return"Profiler";case b:return"StrictMode";case k:return"Suspense";case E:return"SuspenseList";case _:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case g:return"Portal";case T:return(u.displayName||"Context")+".Provider";case S:return(u._context.displayName||"Context")+".Consumer";case A:var d=u.render;return u=u.displayName,u||(u=d.displayName||d.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case I:return d=u.displayName||null,d!==null?d:W(u.type)||"Memo";case N:d=u._payload,u=u._init;try{return W(u(d))}catch{}}return null}var U=Array.isArray,R=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B={pending:!1,data:null,method:null,action:null},K=[],L=-1;function H(u){return{current:u}}function X(u){0>L||(u.current=K[L],K[L]=null,L--)}function Y(u,d){L++,K[L]=u.current,u.current=d}var ie=H(null),pe=H(null),ve=H(null),ke=H(null);function Ee(u,d){switch(Y(ve,d),Y(pe,u),Y(ie,null),d.nodeType){case 9:case 11:u=(u=d.documentElement)&&(u=u.namespaceURI)?K3(u):0;break;default:if(u=d.tagName,d=d.namespaceURI)d=K3(d),u=X3(d,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}X(ie),Y(ie,u)}function me(){X(ie),X(pe),X(ve)}function $e(u){u.memoizedState!==null&&Y(ke,u);var d=ie.current,m=X3(d,u.type);d!==m&&(Y(pe,u),Y(ie,m))}function Ie(u){pe.current===u&&(X(ie),X(pe)),ke.current===u&&(X(ke),Od._currentValue=B)}var ye=Object.prototype.hasOwnProperty,Ge=t.unstable_scheduleCallback,ze=t.unstable_cancelCallback,Je=t.unstable_shouldYield,qe=t.unstable_requestPaint,Xe=t.unstable_now,gt=t.unstable_getCurrentPriorityLevel,Un=t.unstable_ImmediatePriority,Xt=t.unstable_UserBlockingPriority,kn=t.unstable_NormalPriority,cn=t.unstable_LowPriority,Jr=t.unstable_IdlePriority,Ar=t.log,ei=t.unstable_setDisableYieldValue,ti=null,pn=null;function hr(u){if(typeof Ar=="function"&&ei(u),pn&&typeof pn.setStrictMode=="function")try{pn.setStrictMode(ti,u)}catch{}}var Wn=Math.clz32?Math.clz32:yw,Fh=Math.log,Bh=Math.LN2;function yw(u){return u>>>=0,u===0?32:31-(Fh(u)/Bh|0)|0}var ya=256,uu=4194304;function va(u){var d=u&42;if(d!==0)return d;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function ly(u,d,m){var x=u.pendingLanes;if(x===0)return 0;var C=0,$=u.suspendedLanes,M=u.pingedLanes;u=u.warmLanes;var j=x&134217727;return j!==0?(x=j&~$,x!==0?C=va(x):(M&=j,M!==0?C=va(M):m||(m=j&~u,m!==0&&(C=va(m))))):(j=x&~$,j!==0?C=va(j):M!==0?C=va(M):m||(m=x&~u,m!==0&&(C=va(m)))),C===0?0:d!==0&&d!==C&&(d&$)===0&&($=C&-C,m=d&-d,$>=m||$===32&&(m&4194048)!==0)?d:C}function zh(u,d){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&d)===0}function vee(u,d){switch(u){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OD(){var u=ya;return ya<<=1,(ya&4194048)===0&&(ya=256),u}function _D(){var u=uu;return uu<<=1,(uu&62914560)===0&&(uu=4194304),u}function vw(u){for(var d=[],m=0;31>m;m++)d.push(u);return d}function jh(u,d){u.pendingLanes|=d,d!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function bee(u,d,m,x,C,$){var M=u.pendingLanes;u.pendingLanes=m,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=m,u.entangledLanes&=m,u.errorRecoveryDisabledLanes&=m,u.shellSuspendCounter=0;var j=u.entanglements,Q=u.expirationTimes,ue=u.hiddenUpdates;for(m=M&~m;0<m;){var we=31-Wn(m),Ce=1<<we;j[we]=0,Q[we]=-1;var he=ue[we];if(he!==null)for(ue[we]=null,we=0;we<he.length;we++){var de=he[we];de!==null&&(de.lane&=-536870913)}m&=~Ce}x!==0&&RD(u,x,0),$!==0&&C===0&&u.tag!==0&&(u.suspendedLanes|=$&~(M&~d))}function RD(u,d,m){u.pendingLanes|=d,u.suspendedLanes&=~d;var x=31-Wn(d);u.entangledLanes|=d,u.entanglements[x]=u.entanglements[x]|1073741824|m&4194090}function DD(u,d){var m=u.entangledLanes|=d;for(u=u.entanglements;m;){var x=31-Wn(m),C=1<<x;C&d|u[x]&d&&(u[x]|=d),m&=~C}}function bw(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function xw(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function MD(){var u=F.p;return u!==0?u:(u=window.event,u===void 0?32:pL(u.type))}function xee(u,d){var m=F.p;try{return F.p=u,d()}finally{F.p=m}}var wo=Math.random().toString(36).slice(2),Er="__reactFiber$"+wo,ni="__reactProps$"+wo,fu="__reactContainer$"+wo,ww="__reactEvents$"+wo,wee="__reactListeners$"+wo,See="__reactHandles$"+wo,PD="__reactResources$"+wo,Vh="__reactMarker$"+wo;function Sw(u){delete u[Er],delete u[ni],delete u[ww],delete u[wee],delete u[See]}function hu(u){var d=u[Er];if(d)return d;for(var m=u.parentNode;m;){if(d=m[fu]||m[Er]){if(m=d.alternate,d.child!==null||m!==null&&m.child!==null)for(u=J3(u);u!==null;){if(m=u[Er])return m;u=J3(u)}return d}u=m,m=u.parentNode}return null}function du(u){if(u=u[Er]||u[fu]){var d=u.tag;if(d===5||d===6||d===13||d===26||d===27||d===3)return u}return null}function Uh(u){var d=u.tag;if(d===5||d===26||d===27||d===6)return u.stateNode;throw Error(r(33))}function pu(u){var d=u[PD];return d||(d=u[PD]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function tr(u){u[Vh]=!0}var LD=new Set,FD={};function Ml(u,d){mu(u,d),mu(u+"Capture",d)}function mu(u,d){for(FD[u]=d,u=0;u<d.length;u++)LD.add(d[u])}var Cee=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),BD={},zD={};function Tee(u){return ye.call(zD,u)?!0:ye.call(BD,u)?!1:Cee.test(u)?zD[u]=!0:(BD[u]=!0,!1)}function cy(u,d,m){if(Tee(d))if(m===null)u.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":u.removeAttribute(d);return;case"boolean":var x=d.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){u.removeAttribute(d);return}}u.setAttribute(d,""+m)}}function uy(u,d,m){if(m===null)u.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(d);return}u.setAttribute(d,""+m)}}function ba(u,d,m,x){if(x===null)u.removeAttribute(m);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(m);return}u.setAttributeNS(d,m,""+x)}}var Cw,jD;function gu(u){if(Cw===void 0)try{throw Error()}catch(m){var d=m.stack.trim().match(/\n( *(at )?)/);Cw=d&&d[1]||"",jD=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Cw+u+jD}var Tw=!1;function kw(u,d){if(!u||Tw)return"";Tw=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(d){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(de){var he=de}Reflect.construct(u,[],Ce)}else{try{Ce.call()}catch(de){he=de}u.call(Ce.prototype)}}else{try{throw Error()}catch(de){he=de}(Ce=u())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(de){if(de&&he&&typeof de.stack=="string")return[de.stack,he.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var $=x.DetermineComponentFrameRoot(),M=$[0],j=$[1];if(M&&j){var Q=M.split(`
`),ue=j.split(`
`);for(C=x=0;x<Q.length&&!Q[x].includes("DetermineComponentFrameRoot");)x++;for(;C<ue.length&&!ue[C].includes("DetermineComponentFrameRoot");)C++;if(x===Q.length||C===ue.length)for(x=Q.length-1,C=ue.length-1;1<=x&&0<=C&&Q[x]!==ue[C];)C--;for(;1<=x&&0<=C;x--,C--)if(Q[x]!==ue[C]){if(x!==1||C!==1)do if(x--,C--,0>C||Q[x]!==ue[C]){var we=`
`+Q[x].replace(" at new "," at ");return u.displayName&&we.includes("<anonymous>")&&(we=we.replace("<anonymous>",u.displayName)),we}while(1<=x&&0<=C);break}}}finally{Tw=!1,Error.prepareStackTrace=m}return(m=u?u.displayName||u.name:"")?gu(m):""}function kee(u){switch(u.tag){case 26:case 27:case 5:return gu(u.type);case 16:return gu("Lazy");case 13:return gu("Suspense");case 19:return gu("SuspenseList");case 0:case 15:return kw(u.type,!1);case 11:return kw(u.type.render,!1);case 1:return kw(u.type,!0);case 31:return gu("Activity");default:return""}}function VD(u){try{var d="";do d+=kee(u),u=u.return;while(u);return d}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function Li(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function UD(u){var d=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Aee(u){var d=UD(u)?"checked":"value",m=Object.getOwnPropertyDescriptor(u.constructor.prototype,d),x=""+u[d];if(!u.hasOwnProperty(d)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var C=m.get,$=m.set;return Object.defineProperty(u,d,{configurable:!0,get:function(){return C.call(this)},set:function(M){x=""+M,$.call(this,M)}}),Object.defineProperty(u,d,{enumerable:m.enumerable}),{getValue:function(){return x},setValue:function(M){x=""+M},stopTracking:function(){u._valueTracker=null,delete u[d]}}}}function fy(u){u._valueTracker||(u._valueTracker=Aee(u))}function WD(u){if(!u)return!1;var d=u._valueTracker;if(!d)return!0;var m=d.getValue(),x="";return u&&(x=UD(u)?u.checked?"true":"false":u.value),u=x,u!==m?(d.setValue(u),!0):!1}function hy(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var Eee=/[\n"\\]/g;function Fi(u){return u.replace(Eee,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function Aw(u,d,m,x,C,$,M,j){u.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?u.type=M:u.removeAttribute("type"),d!=null?M==="number"?(d===0&&u.value===""||u.value!=d)&&(u.value=""+Li(d)):u.value!==""+Li(d)&&(u.value=""+Li(d)):M!=="submit"&&M!=="reset"||u.removeAttribute("value"),d!=null?Ew(u,M,Li(d)):m!=null?Ew(u,M,Li(m)):x!=null&&u.removeAttribute("value"),C==null&&$!=null&&(u.defaultChecked=!!$),C!=null&&(u.checked=C&&typeof C!="function"&&typeof C!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?u.name=""+Li(j):u.removeAttribute("name")}function GD(u,d,m,x,C,$,M,j){if($!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"&&(u.type=$),d!=null||m!=null){if(!($!=="submit"&&$!=="reset"||d!=null))return;m=m!=null?""+Li(m):"",d=d!=null?""+Li(d):m,j||d===u.value||(u.value=d),u.defaultValue=d}x=x??C,x=typeof x!="function"&&typeof x!="symbol"&&!!x,u.checked=j?u.checked:!!x,u.defaultChecked=!!x,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(u.name=M)}function Ew(u,d,m){d==="number"&&hy(u.ownerDocument)===u||u.defaultValue===""+m||(u.defaultValue=""+m)}function yu(u,d,m,x){if(u=u.options,d){d={};for(var C=0;C<m.length;C++)d["$"+m[C]]=!0;for(m=0;m<u.length;m++)C=d.hasOwnProperty("$"+u[m].value),u[m].selected!==C&&(u[m].selected=C),C&&x&&(u[m].defaultSelected=!0)}else{for(m=""+Li(m),d=null,C=0;C<u.length;C++){if(u[C].value===m){u[C].selected=!0,x&&(u[C].defaultSelected=!0);return}d!==null||u[C].disabled||(d=u[C])}d!==null&&(d.selected=!0)}}function qD(u,d,m){if(d!=null&&(d=""+Li(d),d!==u.value&&(u.value=d),m==null)){u.defaultValue!==d&&(u.defaultValue=d);return}u.defaultValue=m!=null?""+Li(m):""}function HD(u,d,m,x){if(d==null){if(x!=null){if(m!=null)throw Error(r(92));if(U(x)){if(1<x.length)throw Error(r(93));x=x[0]}m=x}m==null&&(m=""),d=m}m=Li(d),u.defaultValue=m,x=u.textContent,x===m&&x!==""&&x!==null&&(u.value=x)}function vu(u,d){if(d){var m=u.firstChild;if(m&&m===u.lastChild&&m.nodeType===3){m.nodeValue=d;return}}u.textContent=d}var $ee=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function KD(u,d,m){var x=d.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?x?u.setProperty(d,""):d==="float"?u.cssFloat="":u[d]="":x?u.setProperty(d,m):typeof m!="number"||m===0||$ee.has(d)?d==="float"?u.cssFloat=m:u[d]=(""+m).trim():u[d]=m+"px"}function XD(u,d,m){if(d!=null&&typeof d!="object")throw Error(r(62));if(u=u.style,m!=null){for(var x in m)!m.hasOwnProperty(x)||d!=null&&d.hasOwnProperty(x)||(x.indexOf("--")===0?u.setProperty(x,""):x==="float"?u.cssFloat="":u[x]="");for(var C in d)x=d[C],d.hasOwnProperty(C)&&m[C]!==x&&KD(u,C,x)}else for(var $ in d)d.hasOwnProperty($)&&KD(u,$,d[$])}function $w(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Iee=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Nee=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function dy(u){return Nee.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var Iw=null;function Nw(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var bu=null,xu=null;function YD(u){var d=du(u);if(d&&(u=d.stateNode)){var m=u[ni]||null;e:switch(u=d.stateNode,d.type){case"input":if(Aw(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),d=m.name,m.type==="radio"&&d!=null){for(m=u;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+Fi(""+d)+'"][type="radio"]'),d=0;d<m.length;d++){var x=m[d];if(x!==u&&x.form===u.form){var C=x[ni]||null;if(!C)throw Error(r(90));Aw(x,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(d=0;d<m.length;d++)x=m[d],x.form===u.form&&WD(x)}break e;case"textarea":qD(u,m.value,m.defaultValue);break e;case"select":d=m.value,d!=null&&yu(u,!!m.multiple,d,!1)}}}var Ow=!1;function ZD(u,d,m){if(Ow)return u(d,m);Ow=!0;try{var x=u(d);return x}finally{if(Ow=!1,(bu!==null||xu!==null)&&(Qy(),bu&&(d=bu,u=xu,xu=bu=null,YD(d),u)))for(d=0;d<u.length;d++)YD(u[d])}}function Wh(u,d){var m=u.stateNode;if(m===null)return null;var x=m[ni]||null;if(x===null)return null;m=x[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(u=u.type,x=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!x;break e;default:u=!1}if(u)return null;if(m&&typeof m!="function")throw Error(r(231,d,typeof m));return m}var xa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_w=!1;if(xa)try{var Gh={};Object.defineProperty(Gh,"passive",{get:function(){_w=!0}}),window.addEventListener("test",Gh,Gh),window.removeEventListener("test",Gh,Gh)}catch{_w=!1}var So=null,Rw=null,py=null;function QD(){if(py)return py;var u,d=Rw,m=d.length,x,C="value"in So?So.value:So.textContent,$=C.length;for(u=0;u<m&&d[u]===C[u];u++);var M=m-u;for(x=1;x<=M&&d[m-x]===C[$-x];x++);return py=C.slice(u,1<x?1-x:void 0)}function my(u){var d=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&d===13&&(u=13)):u=d,u===10&&(u=13),32<=u||u===13?u:0}function gy(){return!0}function JD(){return!1}function ri(u){function d(m,x,C,$,M){this._reactName=m,this._targetInst=C,this.type=x,this.nativeEvent=$,this.target=M,this.currentTarget=null;for(var j in u)u.hasOwnProperty(j)&&(m=u[j],this[j]=m?m($):$[j]);return this.isDefaultPrevented=($.defaultPrevented!=null?$.defaultPrevented:$.returnValue===!1)?gy:JD,this.isPropagationStopped=JD,this}return f(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=gy)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=gy)},persist:function(){},isPersistent:gy}),d}var Pl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yy=ri(Pl),qh=f({},Pl,{view:0,detail:0}),Oee=ri(qh),Dw,Mw,Hh,vy=f({},qh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lw,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Hh&&(Hh&&u.type==="mousemove"?(Dw=u.screenX-Hh.screenX,Mw=u.screenY-Hh.screenY):Mw=Dw=0,Hh=u),Dw)},movementY:function(u){return"movementY"in u?u.movementY:Mw}}),eM=ri(vy),_ee=f({},vy,{dataTransfer:0}),Ree=ri(_ee),Dee=f({},qh,{relatedTarget:0}),Pw=ri(Dee),Mee=f({},Pl,{animationName:0,elapsedTime:0,pseudoElement:0}),Pee=ri(Mee),Lee=f({},Pl,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),Fee=ri(Lee),Bee=f({},Pl,{data:0}),tM=ri(Bee),zee={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jee={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vee={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uee(u){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(u):(u=Vee[u])?!!d[u]:!1}function Lw(){return Uee}var Wee=f({},qh,{key:function(u){if(u.key){var d=zee[u.key]||u.key;if(d!=="Unidentified")return d}return u.type==="keypress"?(u=my(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?jee[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lw,charCode:function(u){return u.type==="keypress"?my(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?my(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),Gee=ri(Wee),qee=f({},vy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nM=ri(qee),Hee=f({},qh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lw}),Kee=ri(Hee),Xee=f({},Pl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yee=ri(Xee),Zee=f({},vy,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),Qee=ri(Zee),Jee=f({},Pl,{newState:0,oldState:0}),ete=ri(Jee),tte=[9,13,27,32],Fw=xa&&"CompositionEvent"in window,Kh=null;xa&&"documentMode"in document&&(Kh=document.documentMode);var nte=xa&&"TextEvent"in window&&!Kh,rM=xa&&(!Fw||Kh&&8<Kh&&11>=Kh),iM=" ",sM=!1;function aM(u,d){switch(u){case"keyup":return tte.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oM(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var wu=!1;function rte(u,d){switch(u){case"compositionend":return oM(d);case"keypress":return d.which!==32?null:(sM=!0,iM);case"textInput":return u=d.data,u===iM&&sM?null:u;default:return null}}function ite(u,d){if(wu)return u==="compositionend"||!Fw&&aM(u,d)?(u=QD(),py=Rw=So=null,wu=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return rM&&d.locale!=="ko"?null:d.data;default:return null}}var ste={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lM(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d==="input"?!!ste[u.type]:d==="textarea"}function cM(u,d,m,x){bu?xu?xu.push(x):xu=[x]:bu=x,d=iv(d,"onChange"),0<d.length&&(m=new yy("onChange","change",null,m,x),u.push({event:m,listeners:d}))}var Xh=null,Yh=null;function ate(u){U3(u,0)}function by(u){var d=Uh(u);if(WD(d))return u}function uM(u,d){if(u==="change")return d}var fM=!1;if(xa){var Bw;if(xa){var zw="oninput"in document;if(!zw){var hM=document.createElement("div");hM.setAttribute("oninput","return;"),zw=typeof hM.oninput=="function"}Bw=zw}else Bw=!1;fM=Bw&&(!document.documentMode||9<document.documentMode)}function dM(){Xh&&(Xh.detachEvent("onpropertychange",pM),Yh=Xh=null)}function pM(u){if(u.propertyName==="value"&&by(Yh)){var d=[];cM(d,Yh,u,Nw(u)),ZD(ate,d)}}function ote(u,d,m){u==="focusin"?(dM(),Xh=d,Yh=m,Xh.attachEvent("onpropertychange",pM)):u==="focusout"&&dM()}function lte(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return by(Yh)}function cte(u,d){if(u==="click")return by(d)}function ute(u,d){if(u==="input"||u==="change")return by(d)}function fte(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var yi=typeof Object.is=="function"?Object.is:fte;function Zh(u,d){if(yi(u,d))return!0;if(typeof u!="object"||u===null||typeof d!="object"||d===null)return!1;var m=Object.keys(u),x=Object.keys(d);if(m.length!==x.length)return!1;for(x=0;x<m.length;x++){var C=m[x];if(!ye.call(d,C)||!yi(u[C],d[C]))return!1}return!0}function mM(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function gM(u,d){var m=mM(u);u=0;for(var x;m;){if(m.nodeType===3){if(x=u+m.textContent.length,u<=d&&x>=d)return{node:m,offset:d-u};u=x}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=mM(m)}}function yM(u,d){return u&&d?u===d?!0:u&&u.nodeType===3?!1:d&&d.nodeType===3?yM(u,d.parentNode):"contains"in u?u.contains(d):u.compareDocumentPosition?!!(u.compareDocumentPosition(d)&16):!1:!1}function vM(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var d=hy(u.document);d instanceof u.HTMLIFrameElement;){try{var m=typeof d.contentWindow.location.href=="string"}catch{m=!1}if(m)u=d.contentWindow;else break;d=hy(u.document)}return d}function jw(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d&&(d==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||d==="textarea"||u.contentEditable==="true")}var hte=xa&&"documentMode"in document&&11>=document.documentMode,Su=null,Vw=null,Qh=null,Uw=!1;function bM(u,d,m){var x=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Uw||Su==null||Su!==hy(x)||(x=Su,"selectionStart"in x&&jw(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Qh&&Zh(Qh,x)||(Qh=x,x=iv(Vw,"onSelect"),0<x.length&&(d=new yy("onSelect","select",null,d,m),u.push({event:d,listeners:x}),d.target=Su)))}function Ll(u,d){var m={};return m[u.toLowerCase()]=d.toLowerCase(),m["Webkit"+u]="webkit"+d,m["Moz"+u]="moz"+d,m}var Cu={animationend:Ll("Animation","AnimationEnd"),animationiteration:Ll("Animation","AnimationIteration"),animationstart:Ll("Animation","AnimationStart"),transitionrun:Ll("Transition","TransitionRun"),transitionstart:Ll("Transition","TransitionStart"),transitioncancel:Ll("Transition","TransitionCancel"),transitionend:Ll("Transition","TransitionEnd")},Ww={},xM={};xa&&(xM=document.createElement("div").style,"AnimationEvent"in window||(delete Cu.animationend.animation,delete Cu.animationiteration.animation,delete Cu.animationstart.animation),"TransitionEvent"in window||delete Cu.transitionend.transition);function Fl(u){if(Ww[u])return Ww[u];if(!Cu[u])return u;var d=Cu[u],m;for(m in d)if(d.hasOwnProperty(m)&&m in xM)return Ww[u]=d[m];return u}var wM=Fl("animationend"),SM=Fl("animationiteration"),CM=Fl("animationstart"),dte=Fl("transitionrun"),pte=Fl("transitionstart"),mte=Fl("transitioncancel"),TM=Fl("transitionend"),kM=new Map,Gw="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Gw.push("scrollEnd");function ds(u,d){kM.set(u,d),Ml(d,[u])}var AM=new WeakMap;function Bi(u,d){if(typeof u=="object"&&u!==null){var m=AM.get(u);return m!==void 0?m:(d={value:u,source:d,stack:VD(d)},AM.set(u,d),d)}return{value:u,source:d,stack:VD(d)}}var zi=[],Tu=0,qw=0;function xy(){for(var u=Tu,d=qw=Tu=0;d<u;){var m=zi[d];zi[d++]=null;var x=zi[d];zi[d++]=null;var C=zi[d];zi[d++]=null;var $=zi[d];if(zi[d++]=null,x!==null&&C!==null){var M=x.pending;M===null?C.next=C:(C.next=M.next,M.next=C),x.pending=C}$!==0&&EM(m,C,$)}}function wy(u,d,m,x){zi[Tu++]=u,zi[Tu++]=d,zi[Tu++]=m,zi[Tu++]=x,qw|=x,u.lanes|=x,u=u.alternate,u!==null&&(u.lanes|=x)}function Hw(u,d,m,x){return wy(u,d,m,x),Sy(u)}function ku(u,d){return wy(u,null,null,d),Sy(u)}function EM(u,d,m){u.lanes|=m;var x=u.alternate;x!==null&&(x.lanes|=m);for(var C=!1,$=u.return;$!==null;)$.childLanes|=m,x=$.alternate,x!==null&&(x.childLanes|=m),$.tag===22&&(u=$.stateNode,u===null||u._visibility&1||(C=!0)),u=$,$=$.return;return u.tag===3?($=u.stateNode,C&&d!==null&&(C=31-Wn(m),u=$.hiddenUpdates,x=u[C],x===null?u[C]=[d]:x.push(d),d.lane=m|536870912),$):null}function Sy(u){if(50<Cd)throw Cd=0,JS=null,Error(r(185));for(var d=u.return;d!==null;)u=d,d=u.return;return u.tag===3?u.stateNode:null}var Au={};function gte(u,d,m,x){this.tag=u,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vi(u,d,m,x){return new gte(u,d,m,x)}function Kw(u){return u=u.prototype,!(!u||!u.isReactComponent)}function wa(u,d){var m=u.alternate;return m===null?(m=vi(u.tag,d,u.key,u.mode),m.elementType=u.elementType,m.type=u.type,m.stateNode=u.stateNode,m.alternate=u,u.alternate=m):(m.pendingProps=d,m.type=u.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=u.flags&65011712,m.childLanes=u.childLanes,m.lanes=u.lanes,m.child=u.child,m.memoizedProps=u.memoizedProps,m.memoizedState=u.memoizedState,m.updateQueue=u.updateQueue,d=u.dependencies,m.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},m.sibling=u.sibling,m.index=u.index,m.ref=u.ref,m.refCleanup=u.refCleanup,m}function $M(u,d){u.flags&=65011714;var m=u.alternate;return m===null?(u.childLanes=0,u.lanes=d,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=m.childLanes,u.lanes=m.lanes,u.child=m.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=m.memoizedProps,u.memoizedState=m.memoizedState,u.updateQueue=m.updateQueue,u.type=m.type,d=m.dependencies,u.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),u}function Cy(u,d,m,x,C,$){var M=0;if(x=u,typeof u=="function")Kw(u)&&(M=1);else if(typeof u=="string")M=vne(u,m,ie.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case _:return u=vi(31,m,d,C),u.elementType=_,u.lanes=$,u;case y:return Bl(m.children,C,$,d);case b:M=8,C|=24;break;case v:return u=vi(12,m,d,C|2),u.elementType=v,u.lanes=$,u;case k:return u=vi(13,m,d,C),u.elementType=k,u.lanes=$,u;case E:return u=vi(19,m,d,C),u.elementType=E,u.lanes=$,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case w:case T:M=10;break e;case S:M=9;break e;case A:M=11;break e;case I:M=14;break e;case N:M=16,x=null;break e}M=29,m=Error(r(130,u===null?"null":typeof u,"")),x=null}return d=vi(M,m,d,C),d.elementType=u,d.type=x,d.lanes=$,d}function Bl(u,d,m,x){return u=vi(7,u,x,d),u.lanes=m,u}function Xw(u,d,m){return u=vi(6,u,null,d),u.lanes=m,u}function Yw(u,d,m){return d=vi(4,u.children!==null?u.children:[],u.key,d),d.lanes=m,d.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},d}var Eu=[],$u=0,Ty=null,ky=0,ji=[],Vi=0,zl=null,Sa=1,Ca="";function jl(u,d){Eu[$u++]=ky,Eu[$u++]=Ty,Ty=u,ky=d}function IM(u,d,m){ji[Vi++]=Sa,ji[Vi++]=Ca,ji[Vi++]=zl,zl=u;var x=Sa;u=Ca;var C=32-Wn(x)-1;x&=~(1<<C),m+=1;var $=32-Wn(d)+C;if(30<$){var M=C-C%5;$=(x&(1<<M)-1).toString(32),x>>=M,C-=M,Sa=1<<32-Wn(d)+C|m<<C|x,Ca=$+u}else Sa=1<<$|m<<C|x,Ca=u}function Zw(u){u.return!==null&&(jl(u,1),IM(u,1,0))}function Qw(u){for(;u===Ty;)Ty=Eu[--$u],Eu[$u]=null,ky=Eu[--$u],Eu[$u]=null;for(;u===zl;)zl=ji[--Vi],ji[Vi]=null,Ca=ji[--Vi],ji[Vi]=null,Sa=ji[--Vi],ji[Vi]=null}var Vr=null,mn=null,It=!1,Vl=null,Ls=!1,Jw=Error(r(519));function Ul(u){var d=Error(r(418,""));throw td(Bi(d,u)),Jw}function NM(u){var d=u.stateNode,m=u.type,x=u.memoizedProps;switch(d[Er]=u,d[ni]=x,m){case"dialog":pt("cancel",d),pt("close",d);break;case"iframe":case"object":case"embed":pt("load",d);break;case"video":case"audio":for(m=0;m<kd.length;m++)pt(kd[m],d);break;case"source":pt("error",d);break;case"img":case"image":case"link":pt("error",d),pt("load",d);break;case"details":pt("toggle",d);break;case"input":pt("invalid",d),GD(d,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0),fy(d);break;case"select":pt("invalid",d);break;case"textarea":pt("invalid",d),HD(d,x.value,x.defaultValue,x.children),fy(d)}m=x.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||d.textContent===""+m||x.suppressHydrationWarning===!0||H3(d.textContent,m)?(x.popover!=null&&(pt("beforetoggle",d),pt("toggle",d)),x.onScroll!=null&&pt("scroll",d),x.onScrollEnd!=null&&pt("scrollend",d),x.onClick!=null&&(d.onclick=sv),d=!0):d=!1,d||Ul(u)}function OM(u){for(Vr=u.return;Vr;)switch(Vr.tag){case 5:case 13:Ls=!1;return;case 27:case 3:Ls=!0;return;default:Vr=Vr.return}}function Jh(u){if(u!==Vr)return!1;if(!It)return OM(u),It=!0,!1;var d=u.tag,m;if((m=d!==3&&d!==27)&&((m=d===5)&&(m=u.type,m=!(m!=="form"&&m!=="button")||mC(u.type,u.memoizedProps)),m=!m),m&&mn&&Ul(u),OM(u),d===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));e:{for(u=u.nextSibling,d=0;u;){if(u.nodeType===8)if(m=u.data,m==="/$"){if(d===0){mn=ms(u.nextSibling);break e}d--}else m!=="$"&&m!=="$!"&&m!=="$?"||d++;u=u.nextSibling}mn=null}}else d===27?(d=mn,Fo(u.type)?(u=bC,bC=null,mn=u):mn=d):mn=Vr?ms(u.stateNode.nextSibling):null;return!0}function ed(){mn=Vr=null,It=!1}function _M(){var u=Vl;return u!==null&&(ai===null?ai=u:ai.push.apply(ai,u),Vl=null),u}function td(u){Vl===null?Vl=[u]:Vl.push(u)}var eS=H(null),Wl=null,Ta=null;function Co(u,d,m){Y(eS,d._currentValue),d._currentValue=m}function ka(u){u._currentValue=eS.current,X(eS)}function tS(u,d,m){for(;u!==null;){var x=u.alternate;if((u.childLanes&d)!==d?(u.childLanes|=d,x!==null&&(x.childLanes|=d)):x!==null&&(x.childLanes&d)!==d&&(x.childLanes|=d),u===m)break;u=u.return}}function nS(u,d,m,x){var C=u.child;for(C!==null&&(C.return=u);C!==null;){var $=C.dependencies;if($!==null){var M=C.child;$=$.firstContext;e:for(;$!==null;){var j=$;$=C;for(var Q=0;Q<d.length;Q++)if(j.context===d[Q]){$.lanes|=m,j=$.alternate,j!==null&&(j.lanes|=m),tS($.return,m,u),x||(M=null);break e}$=j.next}}else if(C.tag===18){if(M=C.return,M===null)throw Error(r(341));M.lanes|=m,$=M.alternate,$!==null&&($.lanes|=m),tS(M,m,u),M=null}else M=C.child;if(M!==null)M.return=C;else for(M=C;M!==null;){if(M===u){M=null;break}if(C=M.sibling,C!==null){C.return=M.return,M=C;break}M=M.return}C=M}}function nd(u,d,m,x){u=null;for(var C=d,$=!1;C!==null;){if(!$){if((C.flags&524288)!==0)$=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var M=C.alternate;if(M===null)throw Error(r(387));if(M=M.memoizedProps,M!==null){var j=C.type;yi(C.pendingProps.value,M.value)||(u!==null?u.push(j):u=[j])}}else if(C===ke.current){if(M=C.alternate,M===null)throw Error(r(387));M.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(u!==null?u.push(Od):u=[Od])}C=C.return}u!==null&&nS(d,u,m,x),d.flags|=262144}function Ay(u){for(u=u.firstContext;u!==null;){if(!yi(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function Gl(u){Wl=u,Ta=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function $r(u){return RM(Wl,u)}function Ey(u,d){return Wl===null&&Gl(u),RM(u,d)}function RM(u,d){var m=d._currentValue;if(d={context:d,memoizedValue:m,next:null},Ta===null){if(u===null)throw Error(r(308));Ta=d,u.dependencies={lanes:0,firstContext:d},u.flags|=524288}else Ta=Ta.next=d;return m}var yte=typeof AbortController<"u"?AbortController:function(){var u=[],d=this.signal={aborted:!1,addEventListener:function(m,x){u.push(x)}};this.abort=function(){d.aborted=!0,u.forEach(function(m){return m()})}},vte=t.unstable_scheduleCallback,bte=t.unstable_NormalPriority,Gn={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rS(){return{controller:new yte,data:new Map,refCount:0}}function rd(u){u.refCount--,u.refCount===0&&vte(bte,function(){u.controller.abort()})}var id=null,iS=0,Iu=0,Nu=null;function xte(u,d){if(id===null){var m=id=[];iS=0,Iu=aC(),Nu={status:"pending",value:void 0,then:function(x){m.push(x)}}}return iS++,d.then(DM,DM),d}function DM(){if(--iS===0&&id!==null){Nu!==null&&(Nu.status="fulfilled");var u=id;id=null,Iu=0,Nu=null;for(var d=0;d<u.length;d++)(0,u[d])()}}function wte(u,d){var m=[],x={status:"pending",value:null,reason:null,then:function(C){m.push(C)}};return u.then(function(){x.status="fulfilled",x.value=d;for(var C=0;C<m.length;C++)(0,m[C])(d)},function(C){for(x.status="rejected",x.reason=C,C=0;C<m.length;C++)(0,m[C])(void 0)}),x}var MM=R.S;R.S=function(u,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&xte(u,d),MM!==null&&MM(u,d)};var ql=H(null);function sS(){var u=ql.current;return u!==null?u:Yt.pooledCache}function $y(u,d){d===null?Y(ql,ql.current):Y(ql,d.pool)}function PM(){var u=sS();return u===null?null:{parent:Gn._currentValue,pool:u}}var sd=Error(r(460)),LM=Error(r(474)),Iy=Error(r(542)),aS={then:function(){}};function FM(u){return u=u.status,u==="fulfilled"||u==="rejected"}function Ny(){}function BM(u,d,m){switch(m=u[m],m===void 0?u.push(d):m!==d&&(d.then(Ny,Ny),d=m),d.status){case"fulfilled":return d.value;case"rejected":throw u=d.reason,jM(u),u;default:if(typeof d.status=="string")d.then(Ny,Ny);else{if(u=Yt,u!==null&&100<u.shellSuspendCounter)throw Error(r(482));u=d,u.status="pending",u.then(function(x){if(d.status==="pending"){var C=d;C.status="fulfilled",C.value=x}},function(x){if(d.status==="pending"){var C=d;C.status="rejected",C.reason=x}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw u=d.reason,jM(u),u}throw ad=d,sd}}var ad=null;function zM(){if(ad===null)throw Error(r(459));var u=ad;return ad=null,u}function jM(u){if(u===sd||u===Iy)throw Error(r(483))}var To=!1;function oS(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lS(u,d){u=u.updateQueue,d.updateQueue===u&&(d.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function ko(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function Ao(u,d,m){var x=u.updateQueue;if(x===null)return null;if(x=x.shared,(Mt&2)!==0){var C=x.pending;return C===null?d.next=d:(d.next=C.next,C.next=d),x.pending=d,d=Sy(u),EM(u,null,m),d}return wy(u,x,d,m),Sy(u)}function od(u,d,m){if(d=d.updateQueue,d!==null&&(d=d.shared,(m&4194048)!==0)){var x=d.lanes;x&=u.pendingLanes,m|=x,d.lanes=m,DD(u,m)}}function cS(u,d){var m=u.updateQueue,x=u.alternate;if(x!==null&&(x=x.updateQueue,m===x)){var C=null,$=null;if(m=m.firstBaseUpdate,m!==null){do{var M={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};$===null?C=$=M:$=$.next=M,m=m.next}while(m!==null);$===null?C=$=d:$=$.next=d}else C=$=d;m={baseState:x.baseState,firstBaseUpdate:C,lastBaseUpdate:$,shared:x.shared,callbacks:x.callbacks},u.updateQueue=m;return}u=m.lastBaseUpdate,u===null?m.firstBaseUpdate=d:u.next=d,m.lastBaseUpdate=d}var uS=!1;function ld(){if(uS){var u=Nu;if(u!==null)throw u}}function cd(u,d,m,x){uS=!1;var C=u.updateQueue;To=!1;var $=C.firstBaseUpdate,M=C.lastBaseUpdate,j=C.shared.pending;if(j!==null){C.shared.pending=null;var Q=j,ue=Q.next;Q.next=null,M===null?$=ue:M.next=ue,M=Q;var we=u.alternate;we!==null&&(we=we.updateQueue,j=we.lastBaseUpdate,j!==M&&(j===null?we.firstBaseUpdate=ue:j.next=ue,we.lastBaseUpdate=Q))}if($!==null){var Ce=C.baseState;M=0,we=ue=Q=null,j=$;do{var he=j.lane&-536870913,de=he!==j.lane;if(de?(wt&he)===he:(x&he)===he){he!==0&&he===Iu&&(uS=!0),we!==null&&(we=we.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var et=u,He=j;he=d;var zt=m;switch(He.tag){case 1:if(et=He.payload,typeof et=="function"){Ce=et.call(zt,Ce,he);break e}Ce=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=He.payload,he=typeof et=="function"?et.call(zt,Ce,he):et,he==null)break e;Ce=f({},Ce,he);break e;case 2:To=!0}}he=j.callback,he!==null&&(u.flags|=64,de&&(u.flags|=8192),de=C.callbacks,de===null?C.callbacks=[he]:de.push(he))}else de={lane:he,tag:j.tag,payload:j.payload,callback:j.callback,next:null},we===null?(ue=we=de,Q=Ce):we=we.next=de,M|=he;if(j=j.next,j===null){if(j=C.shared.pending,j===null)break;de=j,j=de.next,de.next=null,C.lastBaseUpdate=de,C.shared.pending=null}}while(!0);we===null&&(Q=Ce),C.baseState=Q,C.firstBaseUpdate=ue,C.lastBaseUpdate=we,$===null&&(C.shared.lanes=0),Do|=M,u.lanes=M,u.memoizedState=Ce}}function VM(u,d){if(typeof u!="function")throw Error(r(191,u));u.call(d)}function UM(u,d){var m=u.callbacks;if(m!==null)for(u.callbacks=null,u=0;u<m.length;u++)VM(m[u],d)}var Ou=H(null),Oy=H(0);function WM(u,d){u=_a,Y(Oy,u),Y(Ou,d),_a=u|d.baseLanes}function fS(){Y(Oy,_a),Y(Ou,Ou.current)}function hS(){_a=Oy.current,X(Ou),X(Oy)}var Eo=0,ct=null,Ft=null,_n=null,_y=!1,_u=!1,Hl=!1,Ry=0,ud=0,Ru=null,Ste=0;function An(){throw Error(r(321))}function dS(u,d){if(d===null)return!1;for(var m=0;m<d.length&&m<u.length;m++)if(!yi(u[m],d[m]))return!1;return!0}function pS(u,d,m,x,C,$){return Eo=$,ct=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,R.H=u===null||u.memoizedState===null?EP:$P,Hl=!1,$=m(x,C),Hl=!1,_u&&($=qM(d,m,x,C)),GM(u),$}function GM(u){R.H=By;var d=Ft!==null&&Ft.next!==null;if(Eo=0,_n=Ft=ct=null,_y=!1,ud=0,Ru=null,d)throw Error(r(300));u===null||nr||(u=u.dependencies,u!==null&&Ay(u)&&(nr=!0))}function qM(u,d,m,x){ct=u;var C=0;do{if(_u&&(Ru=null),ud=0,_u=!1,25<=C)throw Error(r(301));if(C+=1,_n=Ft=null,u.updateQueue!=null){var $=u.updateQueue;$.lastEffect=null,$.events=null,$.stores=null,$.memoCache!=null&&($.memoCache.index=0)}R.H=Ite,$=d(m,x)}while(_u);return $}function Cte(){var u=R.H,d=u.useState()[0];return d=typeof d.then=="function"?fd(d):d,u=u.useState()[0],(Ft!==null?Ft.memoizedState:null)!==u&&(ct.flags|=1024),d}function mS(){var u=Ry!==0;return Ry=0,u}function gS(u,d,m){d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~m}function yS(u){if(_y){for(u=u.memoizedState;u!==null;){var d=u.queue;d!==null&&(d.pending=null),u=u.next}_y=!1}Eo=0,_n=Ft=ct=null,_u=!1,ud=Ry=0,Ru=null}function ii(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?ct.memoizedState=_n=u:_n=_n.next=u,_n}function Rn(){if(Ft===null){var u=ct.alternate;u=u!==null?u.memoizedState:null}else u=Ft.next;var d=_n===null?ct.memoizedState:_n.next;if(d!==null)_n=d,Ft=u;else{if(u===null)throw ct.alternate===null?Error(r(467)):Error(r(310));Ft=u,u={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},_n===null?ct.memoizedState=_n=u:_n=_n.next=u}return _n}function vS(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fd(u){var d=ud;return ud+=1,Ru===null&&(Ru=[]),u=BM(Ru,u,d),d=ct,(_n===null?d.memoizedState:_n.next)===null&&(d=d.alternate,R.H=d===null||d.memoizedState===null?EP:$P),u}function Dy(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return fd(u);if(u.$$typeof===T)return $r(u)}throw Error(r(438,String(u)))}function bS(u){var d=null,m=ct.updateQueue;if(m!==null&&(d=m.memoCache),d==null){var x=ct.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(d={data:x.data.map(function(C){return C.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),m===null&&(m=vS(),ct.updateQueue=m),m.memoCache=d,m=d.data[d.index],m===void 0)for(m=d.data[d.index]=Array(u),x=0;x<u;x++)m[x]=D;return d.index++,m}function Aa(u,d){return typeof d=="function"?d(u):d}function My(u){var d=Rn();return xS(d,Ft,u)}function xS(u,d,m){var x=u.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=m;var C=u.baseQueue,$=x.pending;if($!==null){if(C!==null){var M=C.next;C.next=$.next,$.next=M}d.baseQueue=C=$,x.pending=null}if($=u.baseState,C===null)u.memoizedState=$;else{d=C.next;var j=M=null,Q=null,ue=d,we=!1;do{var Ce=ue.lane&-536870913;if(Ce!==ue.lane?(wt&Ce)===Ce:(Eo&Ce)===Ce){var he=ue.revertLane;if(he===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),Ce===Iu&&(we=!0);else if((Eo&he)===he){ue=ue.next,he===Iu&&(we=!0);continue}else Ce={lane:0,revertLane:ue.revertLane,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},Q===null?(j=Q=Ce,M=$):Q=Q.next=Ce,ct.lanes|=he,Do|=he;Ce=ue.action,Hl&&m($,Ce),$=ue.hasEagerState?ue.eagerState:m($,Ce)}else he={lane:Ce,revertLane:ue.revertLane,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},Q===null?(j=Q=he,M=$):Q=Q.next=he,ct.lanes|=Ce,Do|=Ce;ue=ue.next}while(ue!==null&&ue!==d);if(Q===null?M=$:Q.next=j,!yi($,u.memoizedState)&&(nr=!0,we&&(m=Nu,m!==null)))throw m;u.memoizedState=$,u.baseState=M,u.baseQueue=Q,x.lastRenderedState=$}return C===null&&(x.lanes=0),[u.memoizedState,x.dispatch]}function wS(u){var d=Rn(),m=d.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=u;var x=m.dispatch,C=m.pending,$=d.memoizedState;if(C!==null){m.pending=null;var M=C=C.next;do $=u($,M.action),M=M.next;while(M!==C);yi($,d.memoizedState)||(nr=!0),d.memoizedState=$,d.baseQueue===null&&(d.baseState=$),m.lastRenderedState=$}return[$,x]}function HM(u,d,m){var x=ct,C=Rn(),$=It;if($){if(m===void 0)throw Error(r(407));m=m()}else m=d();var M=!yi((Ft||C).memoizedState,m);M&&(C.memoizedState=m,nr=!0),C=C.queue;var j=YM.bind(null,x,C,u);if(hd(2048,8,j,[u]),C.getSnapshot!==d||M||_n!==null&&_n.memoizedState.tag&1){if(x.flags|=2048,Du(9,Py(),XM.bind(null,x,C,m,d),null),Yt===null)throw Error(r(349));$||(Eo&124)!==0||KM(x,d,m)}return m}function KM(u,d,m){u.flags|=16384,u={getSnapshot:d,value:m},d=ct.updateQueue,d===null?(d=vS(),ct.updateQueue=d,d.stores=[u]):(m=d.stores,m===null?d.stores=[u]:m.push(u))}function XM(u,d,m,x){d.value=m,d.getSnapshot=x,ZM(d)&&QM(u)}function YM(u,d,m){return m(function(){ZM(d)&&QM(u)})}function ZM(u){var d=u.getSnapshot;u=u.value;try{var m=d();return!yi(u,m)}catch{return!0}}function QM(u){var d=ku(u,2);d!==null&&Ci(d,u,2)}function SS(u){var d=ii();if(typeof u=="function"){var m=u;if(u=m(),Hl){hr(!0);try{m()}finally{hr(!1)}}}return d.memoizedState=d.baseState=u,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:u},d}function JM(u,d,m,x){return u.baseState=m,xS(u,Ft,typeof x=="function"?x:Aa)}function Tte(u,d,m,x,C){if(Fy(u))throw Error(r(485));if(u=d.action,u!==null){var $={payload:C,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){$.listeners.push(M)}};R.T!==null?m(!0):$.isTransition=!1,x($),m=d.pending,m===null?($.next=d.pending=$,eP(d,$)):($.next=m.next,d.pending=m.next=$)}}function eP(u,d){var m=d.action,x=d.payload,C=u.state;if(d.isTransition){var $=R.T,M={};R.T=M;try{var j=m(C,x),Q=R.S;Q!==null&&Q(M,j),tP(u,d,j)}catch(ue){CS(u,d,ue)}finally{R.T=$}}else try{$=m(C,x),tP(u,d,$)}catch(ue){CS(u,d,ue)}}function tP(u,d,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(x){nP(u,d,x)},function(x){return CS(u,d,x)}):nP(u,d,m)}function nP(u,d,m){d.status="fulfilled",d.value=m,rP(d),u.state=m,d=u.pending,d!==null&&(m=d.next,m===d?u.pending=null:(m=m.next,d.next=m,eP(u,m)))}function CS(u,d,m){var x=u.pending;if(u.pending=null,x!==null){x=x.next;do d.status="rejected",d.reason=m,rP(d),d=d.next;while(d!==x)}u.action=null}function rP(u){u=u.listeners;for(var d=0;d<u.length;d++)(0,u[d])()}function iP(u,d){return d}function sP(u,d){if(It){var m=Yt.formState;if(m!==null){e:{var x=ct;if(It){if(mn){t:{for(var C=mn,$=Ls;C.nodeType!==8;){if(!$){C=null;break t}if(C=ms(C.nextSibling),C===null){C=null;break t}}$=C.data,C=$==="F!"||$==="F"?C:null}if(C){mn=ms(C.nextSibling),x=C.data==="F!";break e}}Ul(x)}x=!1}x&&(d=m[0])}}return m=ii(),m.memoizedState=m.baseState=d,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:iP,lastRenderedState:d},m.queue=x,m=TP.bind(null,ct,x),x.dispatch=m,x=SS(!1),$=$S.bind(null,ct,!1,x.queue),x=ii(),C={state:d,dispatch:null,action:u,pending:null},x.queue=C,m=Tte.bind(null,ct,C,$,m),C.dispatch=m,x.memoizedState=u,[d,m,!1]}function aP(u){var d=Rn();return oP(d,Ft,u)}function oP(u,d,m){if(d=xS(u,d,iP)[0],u=My(Aa)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var x=fd(d)}catch(M){throw M===sd?Iy:M}else x=d;d=Rn();var C=d.queue,$=C.dispatch;return m!==d.memoizedState&&(ct.flags|=2048,Du(9,Py(),kte.bind(null,C,m),null)),[x,$,u]}function kte(u,d){u.action=d}function lP(u){var d=Rn(),m=Ft;if(m!==null)return oP(d,m,u);Rn(),d=d.memoizedState,m=Rn();var x=m.queue.dispatch;return m.memoizedState=u,[d,x,!1]}function Du(u,d,m,x){return u={tag:u,create:m,deps:x,inst:d,next:null},d=ct.updateQueue,d===null&&(d=vS(),ct.updateQueue=d),m=d.lastEffect,m===null?d.lastEffect=u.next=u:(x=m.next,m.next=u,u.next=x,d.lastEffect=u),u}function Py(){return{destroy:void 0,resource:void 0}}function cP(){return Rn().memoizedState}function Ly(u,d,m,x){var C=ii();x=x===void 0?null:x,ct.flags|=u,C.memoizedState=Du(1|d,Py(),m,x)}function hd(u,d,m,x){var C=Rn();x=x===void 0?null:x;var $=C.memoizedState.inst;Ft!==null&&x!==null&&dS(x,Ft.memoizedState.deps)?C.memoizedState=Du(d,$,m,x):(ct.flags|=u,C.memoizedState=Du(1|d,$,m,x))}function uP(u,d){Ly(8390656,8,u,d)}function fP(u,d){hd(2048,8,u,d)}function hP(u,d){return hd(4,2,u,d)}function dP(u,d){return hd(4,4,u,d)}function pP(u,d){if(typeof d=="function"){u=u();var m=d(u);return function(){typeof m=="function"?m():d(null)}}if(d!=null)return u=u(),d.current=u,function(){d.current=null}}function mP(u,d,m){m=m!=null?m.concat([u]):null,hd(4,4,pP.bind(null,d,u),m)}function TS(){}function gP(u,d){var m=Rn();d=d===void 0?null:d;var x=m.memoizedState;return d!==null&&dS(d,x[1])?x[0]:(m.memoizedState=[u,d],u)}function yP(u,d){var m=Rn();d=d===void 0?null:d;var x=m.memoizedState;if(d!==null&&dS(d,x[1]))return x[0];if(x=u(),Hl){hr(!0);try{u()}finally{hr(!1)}}return m.memoizedState=[x,d],x}function kS(u,d,m){return m===void 0||(Eo&1073741824)!==0?u.memoizedState=d:(u.memoizedState=m,u=x3(),ct.lanes|=u,Do|=u,m)}function vP(u,d,m,x){return yi(m,d)?m:Ou.current!==null?(u=kS(u,m,x),yi(u,d)||(nr=!0),u):(Eo&42)===0?(nr=!0,u.memoizedState=m):(u=x3(),ct.lanes|=u,Do|=u,d)}function bP(u,d,m,x,C){var $=F.p;F.p=$!==0&&8>$?$:8;var M=R.T,j={};R.T=j,$S(u,!1,d,m);try{var Q=C(),ue=R.S;if(ue!==null&&ue(j,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var we=wte(Q,x);dd(u,d,we,Si(u))}else dd(u,d,x,Si(u))}catch(Ce){dd(u,d,{then:function(){},status:"rejected",reason:Ce},Si())}finally{F.p=$,R.T=M}}function Ate(){}function AS(u,d,m,x){if(u.tag!==5)throw Error(r(476));var C=xP(u).queue;bP(u,C,d,B,m===null?Ate:function(){return wP(u),m(x)})}function xP(u){var d=u.memoizedState;if(d!==null)return d;d={memoizedState:B,baseState:B,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:B},next:null};var m={};return d.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:m},next:null},u.memoizedState=d,u=u.alternate,u!==null&&(u.memoizedState=d),d}function wP(u){var d=xP(u).next.queue;dd(u,d,{},Si())}function ES(){return $r(Od)}function SP(){return Rn().memoizedState}function CP(){return Rn().memoizedState}function Ete(u){for(var d=u.return;d!==null;){switch(d.tag){case 24:case 3:var m=Si();u=ko(m);var x=Ao(d,u,m);x!==null&&(Ci(x,d,m),od(x,d,m)),d={cache:rS()},u.payload=d;return}d=d.return}}function $te(u,d,m){var x=Si();m={lane:x,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},Fy(u)?kP(d,m):(m=Hw(u,d,m,x),m!==null&&(Ci(m,u,x),AP(m,d,x)))}function TP(u,d,m){var x=Si();dd(u,d,m,x)}function dd(u,d,m,x){var C={lane:x,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(Fy(u))kP(d,C);else{var $=u.alternate;if(u.lanes===0&&($===null||$.lanes===0)&&($=d.lastRenderedReducer,$!==null))try{var M=d.lastRenderedState,j=$(M,m);if(C.hasEagerState=!0,C.eagerState=j,yi(j,M))return wy(u,d,C,0),Yt===null&&xy(),!1}catch{}finally{}if(m=Hw(u,d,C,x),m!==null)return Ci(m,u,x),AP(m,d,x),!0}return!1}function $S(u,d,m,x){if(x={lane:2,revertLane:aC(),action:x,hasEagerState:!1,eagerState:null,next:null},Fy(u)){if(d)throw Error(r(479))}else d=Hw(u,m,x,2),d!==null&&Ci(d,u,2)}function Fy(u){var d=u.alternate;return u===ct||d!==null&&d===ct}function kP(u,d){_u=_y=!0;var m=u.pending;m===null?d.next=d:(d.next=m.next,m.next=d),u.pending=d}function AP(u,d,m){if((m&4194048)!==0){var x=d.lanes;x&=u.pendingLanes,m|=x,d.lanes=m,DD(u,m)}}var By={readContext:$r,use:Dy,useCallback:An,useContext:An,useEffect:An,useImperativeHandle:An,useLayoutEffect:An,useInsertionEffect:An,useMemo:An,useReducer:An,useRef:An,useState:An,useDebugValue:An,useDeferredValue:An,useTransition:An,useSyncExternalStore:An,useId:An,useHostTransitionStatus:An,useFormState:An,useActionState:An,useOptimistic:An,useMemoCache:An,useCacheRefresh:An},EP={readContext:$r,use:Dy,useCallback:function(u,d){return ii().memoizedState=[u,d===void 0?null:d],u},useContext:$r,useEffect:uP,useImperativeHandle:function(u,d,m){m=m!=null?m.concat([u]):null,Ly(4194308,4,pP.bind(null,d,u),m)},useLayoutEffect:function(u,d){return Ly(4194308,4,u,d)},useInsertionEffect:function(u,d){Ly(4,2,u,d)},useMemo:function(u,d){var m=ii();d=d===void 0?null:d;var x=u();if(Hl){hr(!0);try{u()}finally{hr(!1)}}return m.memoizedState=[x,d],x},useReducer:function(u,d,m){var x=ii();if(m!==void 0){var C=m(d);if(Hl){hr(!0);try{m(d)}finally{hr(!1)}}}else C=d;return x.memoizedState=x.baseState=C,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:C},x.queue=u,u=u.dispatch=$te.bind(null,ct,u),[x.memoizedState,u]},useRef:function(u){var d=ii();return u={current:u},d.memoizedState=u},useState:function(u){u=SS(u);var d=u.queue,m=TP.bind(null,ct,d);return d.dispatch=m,[u.memoizedState,m]},useDebugValue:TS,useDeferredValue:function(u,d){var m=ii();return kS(m,u,d)},useTransition:function(){var u=SS(!1);return u=bP.bind(null,ct,u.queue,!0,!1),ii().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,d,m){var x=ct,C=ii();if(It){if(m===void 0)throw Error(r(407));m=m()}else{if(m=d(),Yt===null)throw Error(r(349));(wt&124)!==0||KM(x,d,m)}C.memoizedState=m;var $={value:m,getSnapshot:d};return C.queue=$,uP(YM.bind(null,x,$,u),[u]),x.flags|=2048,Du(9,Py(),XM.bind(null,x,$,m,d),null),m},useId:function(){var u=ii(),d=Yt.identifierPrefix;if(It){var m=Ca,x=Sa;m=(x&~(1<<32-Wn(x)-1)).toString(32)+m,d="«"+d+"R"+m,m=Ry++,0<m&&(d+="H"+m.toString(32)),d+="»"}else m=Ste++,d="«"+d+"r"+m.toString(32)+"»";return u.memoizedState=d},useHostTransitionStatus:ES,useFormState:sP,useActionState:sP,useOptimistic:function(u){var d=ii();d.memoizedState=d.baseState=u;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=m,d=$S.bind(null,ct,!0,m),m.dispatch=d,[u,d]},useMemoCache:bS,useCacheRefresh:function(){return ii().memoizedState=Ete.bind(null,ct)}},$P={readContext:$r,use:Dy,useCallback:gP,useContext:$r,useEffect:fP,useImperativeHandle:mP,useInsertionEffect:hP,useLayoutEffect:dP,useMemo:yP,useReducer:My,useRef:cP,useState:function(){return My(Aa)},useDebugValue:TS,useDeferredValue:function(u,d){var m=Rn();return vP(m,Ft.memoizedState,u,d)},useTransition:function(){var u=My(Aa)[0],d=Rn().memoizedState;return[typeof u=="boolean"?u:fd(u),d]},useSyncExternalStore:HM,useId:SP,useHostTransitionStatus:ES,useFormState:aP,useActionState:aP,useOptimistic:function(u,d){var m=Rn();return JM(m,Ft,u,d)},useMemoCache:bS,useCacheRefresh:CP},Ite={readContext:$r,use:Dy,useCallback:gP,useContext:$r,useEffect:fP,useImperativeHandle:mP,useInsertionEffect:hP,useLayoutEffect:dP,useMemo:yP,useReducer:wS,useRef:cP,useState:function(){return wS(Aa)},useDebugValue:TS,useDeferredValue:function(u,d){var m=Rn();return Ft===null?kS(m,u,d):vP(m,Ft.memoizedState,u,d)},useTransition:function(){var u=wS(Aa)[0],d=Rn().memoizedState;return[typeof u=="boolean"?u:fd(u),d]},useSyncExternalStore:HM,useId:SP,useHostTransitionStatus:ES,useFormState:lP,useActionState:lP,useOptimistic:function(u,d){var m=Rn();return Ft!==null?JM(m,Ft,u,d):(m.baseState=u,[u,m.queue.dispatch])},useMemoCache:bS,useCacheRefresh:CP},Mu=null,pd=0;function zy(u){var d=pd;return pd+=1,Mu===null&&(Mu=[]),BM(Mu,u,d)}function md(u,d){d=d.props.ref,u.ref=d!==void 0?d:null}function jy(u,d){throw d.$$typeof===h?Error(r(525)):(u=Object.prototype.toString.call(d),Error(r(31,u==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":u)))}function IP(u){var d=u._init;return d(u._payload)}function NP(u){function d(oe,te){if(u){var le=oe.deletions;le===null?(oe.deletions=[te],oe.flags|=16):le.push(te)}}function m(oe,te){if(!u)return null;for(;te!==null;)d(oe,te),te=te.sibling;return null}function x(oe){for(var te=new Map;oe!==null;)oe.key!==null?te.set(oe.key,oe):te.set(oe.index,oe),oe=oe.sibling;return te}function C(oe,te){return oe=wa(oe,te),oe.index=0,oe.sibling=null,oe}function $(oe,te,le){return oe.index=le,u?(le=oe.alternate,le!==null?(le=le.index,le<te?(oe.flags|=67108866,te):le):(oe.flags|=67108866,te)):(oe.flags|=1048576,te)}function M(oe){return u&&oe.alternate===null&&(oe.flags|=67108866),oe}function j(oe,te,le,Se){return te===null||te.tag!==6?(te=Xw(le,oe.mode,Se),te.return=oe,te):(te=C(te,le),te.return=oe,te)}function Q(oe,te,le,Se){var Pe=le.type;return Pe===y?we(oe,te,le.props.children,Se,le.key):te!==null&&(te.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===N&&IP(Pe)===te.type)?(te=C(te,le.props),md(te,le),te.return=oe,te):(te=Cy(le.type,le.key,le.props,null,oe.mode,Se),md(te,le),te.return=oe,te)}function ue(oe,te,le,Se){return te===null||te.tag!==4||te.stateNode.containerInfo!==le.containerInfo||te.stateNode.implementation!==le.implementation?(te=Yw(le,oe.mode,Se),te.return=oe,te):(te=C(te,le.children||[]),te.return=oe,te)}function we(oe,te,le,Se,Pe){return te===null||te.tag!==7?(te=Bl(le,oe.mode,Se,Pe),te.return=oe,te):(te=C(te,le),te.return=oe,te)}function Ce(oe,te,le){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return te=Xw(""+te,oe.mode,le),te.return=oe,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case p:return le=Cy(te.type,te.key,te.props,null,oe.mode,le),md(le,te),le.return=oe,le;case g:return te=Yw(te,oe.mode,le),te.return=oe,te;case N:var Se=te._init;return te=Se(te._payload),Ce(oe,te,le)}if(U(te)||P(te))return te=Bl(te,oe.mode,le,null),te.return=oe,te;if(typeof te.then=="function")return Ce(oe,zy(te),le);if(te.$$typeof===T)return Ce(oe,Ey(oe,te),le);jy(oe,te)}return null}function he(oe,te,le,Se){var Pe=te!==null?te.key:null;if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return Pe!==null?null:j(oe,te,""+le,Se);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case p:return le.key===Pe?Q(oe,te,le,Se):null;case g:return le.key===Pe?ue(oe,te,le,Se):null;case N:return Pe=le._init,le=Pe(le._payload),he(oe,te,le,Se)}if(U(le)||P(le))return Pe!==null?null:we(oe,te,le,Se,null);if(typeof le.then=="function")return he(oe,te,zy(le),Se);if(le.$$typeof===T)return he(oe,te,Ey(oe,le),Se);jy(oe,le)}return null}function de(oe,te,le,Se,Pe){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return oe=oe.get(le)||null,j(te,oe,""+Se,Pe);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case p:return oe=oe.get(Se.key===null?le:Se.key)||null,Q(te,oe,Se,Pe);case g:return oe=oe.get(Se.key===null?le:Se.key)||null,ue(te,oe,Se,Pe);case N:var ht=Se._init;return Se=ht(Se._payload),de(oe,te,le,Se,Pe)}if(U(Se)||P(Se))return oe=oe.get(le)||null,we(te,oe,Se,Pe,null);if(typeof Se.then=="function")return de(oe,te,le,zy(Se),Pe);if(Se.$$typeof===T)return de(oe,te,le,Ey(te,Se),Pe);jy(te,Se)}return null}function et(oe,te,le,Se){for(var Pe=null,ht=null,Ve=te,Ye=te=0,ir=null;Ve!==null&&Ye<le.length;Ye++){Ve.index>Ye?(ir=Ve,Ve=null):ir=Ve.sibling;var Tt=he(oe,Ve,le[Ye],Se);if(Tt===null){Ve===null&&(Ve=ir);break}u&&Ve&&Tt.alternate===null&&d(oe,Ve),te=$(Tt,te,Ye),ht===null?Pe=Tt:ht.sibling=Tt,ht=Tt,Ve=ir}if(Ye===le.length)return m(oe,Ve),It&&jl(oe,Ye),Pe;if(Ve===null){for(;Ye<le.length;Ye++)Ve=Ce(oe,le[Ye],Se),Ve!==null&&(te=$(Ve,te,Ye),ht===null?Pe=Ve:ht.sibling=Ve,ht=Ve);return It&&jl(oe,Ye),Pe}for(Ve=x(Ve);Ye<le.length;Ye++)ir=de(Ve,oe,Ye,le[Ye],Se),ir!==null&&(u&&ir.alternate!==null&&Ve.delete(ir.key===null?Ye:ir.key),te=$(ir,te,Ye),ht===null?Pe=ir:ht.sibling=ir,ht=ir);return u&&Ve.forEach(function(Uo){return d(oe,Uo)}),It&&jl(oe,Ye),Pe}function He(oe,te,le,Se){if(le==null)throw Error(r(151));for(var Pe=null,ht=null,Ve=te,Ye=te=0,ir=null,Tt=le.next();Ve!==null&&!Tt.done;Ye++,Tt=le.next()){Ve.index>Ye?(ir=Ve,Ve=null):ir=Ve.sibling;var Uo=he(oe,Ve,Tt.value,Se);if(Uo===null){Ve===null&&(Ve=ir);break}u&&Ve&&Uo.alternate===null&&d(oe,Ve),te=$(Uo,te,Ye),ht===null?Pe=Uo:ht.sibling=Uo,ht=Uo,Ve=ir}if(Tt.done)return m(oe,Ve),It&&jl(oe,Ye),Pe;if(Ve===null){for(;!Tt.done;Ye++,Tt=le.next())Tt=Ce(oe,Tt.value,Se),Tt!==null&&(te=$(Tt,te,Ye),ht===null?Pe=Tt:ht.sibling=Tt,ht=Tt);return It&&jl(oe,Ye),Pe}for(Ve=x(Ve);!Tt.done;Ye++,Tt=le.next())Tt=de(Ve,oe,Ye,Tt.value,Se),Tt!==null&&(u&&Tt.alternate!==null&&Ve.delete(Tt.key===null?Ye:Tt.key),te=$(Tt,te,Ye),ht===null?Pe=Tt:ht.sibling=Tt,ht=Tt);return u&&Ve.forEach(function(Nne){return d(oe,Nne)}),It&&jl(oe,Ye),Pe}function zt(oe,te,le,Se){if(typeof le=="object"&&le!==null&&le.type===y&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case p:e:{for(var Pe=le.key;te!==null;){if(te.key===Pe){if(Pe=le.type,Pe===y){if(te.tag===7){m(oe,te.sibling),Se=C(te,le.props.children),Se.return=oe,oe=Se;break e}}else if(te.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===N&&IP(Pe)===te.type){m(oe,te.sibling),Se=C(te,le.props),md(Se,le),Se.return=oe,oe=Se;break e}m(oe,te);break}else d(oe,te);te=te.sibling}le.type===y?(Se=Bl(le.props.children,oe.mode,Se,le.key),Se.return=oe,oe=Se):(Se=Cy(le.type,le.key,le.props,null,oe.mode,Se),md(Se,le),Se.return=oe,oe=Se)}return M(oe);case g:e:{for(Pe=le.key;te!==null;){if(te.key===Pe)if(te.tag===4&&te.stateNode.containerInfo===le.containerInfo&&te.stateNode.implementation===le.implementation){m(oe,te.sibling),Se=C(te,le.children||[]),Se.return=oe,oe=Se;break e}else{m(oe,te);break}else d(oe,te);te=te.sibling}Se=Yw(le,oe.mode,Se),Se.return=oe,oe=Se}return M(oe);case N:return Pe=le._init,le=Pe(le._payload),zt(oe,te,le,Se)}if(U(le))return et(oe,te,le,Se);if(P(le)){if(Pe=P(le),typeof Pe!="function")throw Error(r(150));return le=Pe.call(le),He(oe,te,le,Se)}if(typeof le.then=="function")return zt(oe,te,zy(le),Se);if(le.$$typeof===T)return zt(oe,te,Ey(oe,le),Se);jy(oe,le)}return typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint"?(le=""+le,te!==null&&te.tag===6?(m(oe,te.sibling),Se=C(te,le),Se.return=oe,oe=Se):(m(oe,te),Se=Xw(le,oe.mode,Se),Se.return=oe,oe=Se),M(oe)):m(oe,te)}return function(oe,te,le,Se){try{pd=0;var Pe=zt(oe,te,le,Se);return Mu=null,Pe}catch(Ve){if(Ve===sd||Ve===Iy)throw Ve;var ht=vi(29,Ve,null,oe.mode);return ht.lanes=Se,ht.return=oe,ht}finally{}}}var Pu=NP(!0),OP=NP(!1),Ui=H(null),Fs=null;function $o(u){var d=u.alternate;Y(qn,qn.current&1),Y(Ui,u),Fs===null&&(d===null||Ou.current!==null||d.memoizedState!==null)&&(Fs=u)}function _P(u){if(u.tag===22){if(Y(qn,qn.current),Y(Ui,u),Fs===null){var d=u.alternate;d!==null&&d.memoizedState!==null&&(Fs=u)}}else Io()}function Io(){Y(qn,qn.current),Y(Ui,Ui.current)}function Ea(u){X(Ui),Fs===u&&(Fs=null),X(qn)}var qn=H(0);function Vy(u){for(var d=u;d!==null;){if(d.tag===13){var m=d.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||vC(m)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function IS(u,d,m,x){d=u.memoizedState,m=m(x,d),m=m==null?d:f({},d,m),u.memoizedState=m,u.lanes===0&&(u.updateQueue.baseState=m)}var NS={enqueueSetState:function(u,d,m){u=u._reactInternals;var x=Si(),C=ko(x);C.payload=d,m!=null&&(C.callback=m),d=Ao(u,C,x),d!==null&&(Ci(d,u,x),od(d,u,x))},enqueueReplaceState:function(u,d,m){u=u._reactInternals;var x=Si(),C=ko(x);C.tag=1,C.payload=d,m!=null&&(C.callback=m),d=Ao(u,C,x),d!==null&&(Ci(d,u,x),od(d,u,x))},enqueueForceUpdate:function(u,d){u=u._reactInternals;var m=Si(),x=ko(m);x.tag=2,d!=null&&(x.callback=d),d=Ao(u,x,m),d!==null&&(Ci(d,u,m),od(d,u,m))}};function RP(u,d,m,x,C,$,M){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(x,$,M):d.prototype&&d.prototype.isPureReactComponent?!Zh(m,x)||!Zh(C,$):!0}function DP(u,d,m,x){u=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(m,x),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(m,x),d.state!==u&&NS.enqueueReplaceState(d,d.state,null)}function Kl(u,d){var m=d;if("ref"in d){m={};for(var x in d)x!=="ref"&&(m[x]=d[x])}if(u=u.defaultProps){m===d&&(m=f({},m));for(var C in u)m[C]===void 0&&(m[C]=u[C])}return m}var Uy=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)};function MP(u){Uy(u)}function PP(u){console.error(u)}function LP(u){Uy(u)}function Wy(u,d){try{var m=u.onUncaughtError;m(d.value,{componentStack:d.stack})}catch(x){setTimeout(function(){throw x})}}function FP(u,d,m){try{var x=u.onCaughtError;x(m.value,{componentStack:m.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function OS(u,d,m){return m=ko(m),m.tag=3,m.payload={element:null},m.callback=function(){Wy(u,d)},m}function BP(u){return u=ko(u),u.tag=3,u}function zP(u,d,m,x){var C=m.type.getDerivedStateFromError;if(typeof C=="function"){var $=x.value;u.payload=function(){return C($)},u.callback=function(){FP(d,m,x)}}var M=m.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(u.callback=function(){FP(d,m,x),typeof C!="function"&&(Mo===null?Mo=new Set([this]):Mo.add(this));var j=x.stack;this.componentDidCatch(x.value,{componentStack:j!==null?j:""})})}function Nte(u,d,m,x,C){if(m.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(d=m.alternate,d!==null&&nd(d,m,C,!0),m=Ui.current,m!==null){switch(m.tag){case 13:return Fs===null?tC():m.alternate===null&&gn===0&&(gn=3),m.flags&=-257,m.flags|=65536,m.lanes=C,x===aS?m.flags|=16384:(d=m.updateQueue,d===null?m.updateQueue=new Set([x]):d.add(x),rC(u,x,C)),!1;case 22:return m.flags|=65536,x===aS?m.flags|=16384:(d=m.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([x])},m.updateQueue=d):(m=d.retryQueue,m===null?d.retryQueue=new Set([x]):m.add(x)),rC(u,x,C)),!1}throw Error(r(435,m.tag))}return rC(u,x,C),tC(),!1}if(It)return d=Ui.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=C,x!==Jw&&(u=Error(r(422),{cause:x}),td(Bi(u,m)))):(x!==Jw&&(d=Error(r(423),{cause:x}),td(Bi(d,m))),u=u.current.alternate,u.flags|=65536,C&=-C,u.lanes|=C,x=Bi(x,m),C=OS(u.stateNode,x,C),cS(u,C),gn!==4&&(gn=2)),!1;var $=Error(r(520),{cause:x});if($=Bi($,m),Sd===null?Sd=[$]:Sd.push($),gn!==4&&(gn=2),d===null)return!0;x=Bi(x,m),m=d;do{switch(m.tag){case 3:return m.flags|=65536,u=C&-C,m.lanes|=u,u=OS(m.stateNode,x,u),cS(m,u),!1;case 1:if(d=m.type,$=m.stateNode,(m.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(Mo===null||!Mo.has($))))return m.flags|=65536,C&=-C,m.lanes|=C,C=BP(C),zP(C,u,m,x),cS(m,C),!1}m=m.return}while(m!==null);return!1}var jP=Error(r(461)),nr=!1;function dr(u,d,m,x){d.child=u===null?OP(d,null,m,x):Pu(d,u.child,m,x)}function VP(u,d,m,x,C){m=m.render;var $=d.ref;if("ref"in x){var M={};for(var j in x)j!=="ref"&&(M[j]=x[j])}else M=x;return Gl(d),x=pS(u,d,m,M,$,C),j=mS(),u!==null&&!nr?(gS(u,d,C),$a(u,d,C)):(It&&j&&Zw(d),d.flags|=1,dr(u,d,x,C),d.child)}function UP(u,d,m,x,C){if(u===null){var $=m.type;return typeof $=="function"&&!Kw($)&&$.defaultProps===void 0&&m.compare===null?(d.tag=15,d.type=$,WP(u,d,$,x,C)):(u=Cy(m.type,null,x,d,d.mode,C),u.ref=d.ref,u.return=d,d.child=u)}if($=u.child,!BS(u,C)){var M=$.memoizedProps;if(m=m.compare,m=m!==null?m:Zh,m(M,x)&&u.ref===d.ref)return $a(u,d,C)}return d.flags|=1,u=wa($,x),u.ref=d.ref,u.return=d,d.child=u}function WP(u,d,m,x,C){if(u!==null){var $=u.memoizedProps;if(Zh($,x)&&u.ref===d.ref)if(nr=!1,d.pendingProps=x=$,BS(u,C))(u.flags&131072)!==0&&(nr=!0);else return d.lanes=u.lanes,$a(u,d,C)}return _S(u,d,m,x,C)}function GP(u,d,m){var x=d.pendingProps,C=x.children,$=u!==null?u.memoizedState:null;if(x.mode==="hidden"){if((d.flags&128)!==0){if(x=$!==null?$.baseLanes|m:m,u!==null){for(C=d.child=u.child,$=0;C!==null;)$=$|C.lanes|C.childLanes,C=C.sibling;d.childLanes=$&~x}else d.childLanes=0,d.child=null;return qP(u,d,x,m)}if((m&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},u!==null&&$y(d,$!==null?$.cachePool:null),$!==null?WM(d,$):fS(),_P(d);else return d.lanes=d.childLanes=536870912,qP(u,d,$!==null?$.baseLanes|m:m,m)}else $!==null?($y(d,$.cachePool),WM(d,$),Io(),d.memoizedState=null):(u!==null&&$y(d,null),fS(),Io());return dr(u,d,C,m),d.child}function qP(u,d,m,x){var C=sS();return C=C===null?null:{parent:Gn._currentValue,pool:C},d.memoizedState={baseLanes:m,cachePool:C},u!==null&&$y(d,null),fS(),_P(d),u!==null&&nd(u,d,x,!0),null}function Gy(u,d){var m=d.ref;if(m===null)u!==null&&u.ref!==null&&(d.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(u===null||u.ref!==m)&&(d.flags|=4194816)}}function _S(u,d,m,x,C){return Gl(d),m=pS(u,d,m,x,void 0,C),x=mS(),u!==null&&!nr?(gS(u,d,C),$a(u,d,C)):(It&&x&&Zw(d),d.flags|=1,dr(u,d,m,C),d.child)}function HP(u,d,m,x,C,$){return Gl(d),d.updateQueue=null,m=qM(d,x,m,C),GM(u),x=mS(),u!==null&&!nr?(gS(u,d,$),$a(u,d,$)):(It&&x&&Zw(d),d.flags|=1,dr(u,d,m,$),d.child)}function KP(u,d,m,x,C){if(Gl(d),d.stateNode===null){var $=Au,M=m.contextType;typeof M=="object"&&M!==null&&($=$r(M)),$=new m(x,$),d.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,$.updater=NS,d.stateNode=$,$._reactInternals=d,$=d.stateNode,$.props=x,$.state=d.memoizedState,$.refs={},oS(d),M=m.contextType,$.context=typeof M=="object"&&M!==null?$r(M):Au,$.state=d.memoizedState,M=m.getDerivedStateFromProps,typeof M=="function"&&(IS(d,m,M,x),$.state=d.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof $.getSnapshotBeforeUpdate=="function"||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(M=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),M!==$.state&&NS.enqueueReplaceState($,$.state,null),cd(d,x,$,C),ld(),$.state=d.memoizedState),typeof $.componentDidMount=="function"&&(d.flags|=4194308),x=!0}else if(u===null){$=d.stateNode;var j=d.memoizedProps,Q=Kl(m,j);$.props=Q;var ue=$.context,we=m.contextType;M=Au,typeof we=="object"&&we!==null&&(M=$r(we));var Ce=m.getDerivedStateFromProps;we=typeof Ce=="function"||typeof $.getSnapshotBeforeUpdate=="function",j=d.pendingProps!==j,we||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(j||ue!==M)&&DP(d,$,x,M),To=!1;var he=d.memoizedState;$.state=he,cd(d,x,$,C),ld(),ue=d.memoizedState,j||he!==ue||To?(typeof Ce=="function"&&(IS(d,m,Ce,x),ue=d.memoizedState),(Q=To||RP(d,m,Q,x,he,ue,M))?(we||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(d.flags|=4194308)):(typeof $.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=x,d.memoizedState=ue),$.props=x,$.state=ue,$.context=M,x=Q):(typeof $.componentDidMount=="function"&&(d.flags|=4194308),x=!1)}else{$=d.stateNode,lS(u,d),M=d.memoizedProps,we=Kl(m,M),$.props=we,Ce=d.pendingProps,he=$.context,ue=m.contextType,Q=Au,typeof ue=="object"&&ue!==null&&(Q=$r(ue)),j=m.getDerivedStateFromProps,(ue=typeof j=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(M!==Ce||he!==Q)&&DP(d,$,x,Q),To=!1,he=d.memoizedState,$.state=he,cd(d,x,$,C),ld();var de=d.memoizedState;M!==Ce||he!==de||To||u!==null&&u.dependencies!==null&&Ay(u.dependencies)?(typeof j=="function"&&(IS(d,m,j,x),de=d.memoizedState),(we=To||RP(d,m,we,x,he,de,Q)||u!==null&&u.dependencies!==null&&Ay(u.dependencies))?(ue||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(x,de,Q),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(x,de,Q)),typeof $.componentDidUpdate=="function"&&(d.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof $.componentDidUpdate!="function"||M===u.memoizedProps&&he===u.memoizedState||(d.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||M===u.memoizedProps&&he===u.memoizedState||(d.flags|=1024),d.memoizedProps=x,d.memoizedState=de),$.props=x,$.state=de,$.context=Q,x=we):(typeof $.componentDidUpdate!="function"||M===u.memoizedProps&&he===u.memoizedState||(d.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||M===u.memoizedProps&&he===u.memoizedState||(d.flags|=1024),x=!1)}return $=x,Gy(u,d),x=(d.flags&128)!==0,$||x?($=d.stateNode,m=x&&typeof m.getDerivedStateFromError!="function"?null:$.render(),d.flags|=1,u!==null&&x?(d.child=Pu(d,u.child,null,C),d.child=Pu(d,null,m,C)):dr(u,d,m,C),d.memoizedState=$.state,u=d.child):u=$a(u,d,C),u}function XP(u,d,m,x){return ed(),d.flags|=256,dr(u,d,m,x),d.child}var RS={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function DS(u){return{baseLanes:u,cachePool:PM()}}function MS(u,d,m){return u=u!==null?u.childLanes&~m:0,d&&(u|=Wi),u}function YP(u,d,m){var x=d.pendingProps,C=!1,$=(d.flags&128)!==0,M;if((M=$)||(M=u!==null&&u.memoizedState===null?!1:(qn.current&2)!==0),M&&(C=!0,d.flags&=-129),M=(d.flags&32)!==0,d.flags&=-33,u===null){if(It){if(C?$o(d):Io(),It){var j=mn,Q;if(Q=j){e:{for(Q=j,j=Ls;Q.nodeType!==8;){if(!j){j=null;break e}if(Q=ms(Q.nextSibling),Q===null){j=null;break e}}j=Q}j!==null?(d.memoizedState={dehydrated:j,treeContext:zl!==null?{id:Sa,overflow:Ca}:null,retryLane:536870912,hydrationErrors:null},Q=vi(18,null,null,0),Q.stateNode=j,Q.return=d,d.child=Q,Vr=d,mn=null,Q=!0):Q=!1}Q||Ul(d)}if(j=d.memoizedState,j!==null&&(j=j.dehydrated,j!==null))return vC(j)?d.lanes=32:d.lanes=536870912,null;Ea(d)}return j=x.children,x=x.fallback,C?(Io(),C=d.mode,j=qy({mode:"hidden",children:j},C),x=Bl(x,C,m,null),j.return=d,x.return=d,j.sibling=x,d.child=j,C=d.child,C.memoizedState=DS(m),C.childLanes=MS(u,M,m),d.memoizedState=RS,x):($o(d),PS(d,j))}if(Q=u.memoizedState,Q!==null&&(j=Q.dehydrated,j!==null)){if($)d.flags&256?($o(d),d.flags&=-257,d=LS(u,d,m)):d.memoizedState!==null?(Io(),d.child=u.child,d.flags|=128,d=null):(Io(),C=x.fallback,j=d.mode,x=qy({mode:"visible",children:x.children},j),C=Bl(C,j,m,null),C.flags|=2,x.return=d,C.return=d,x.sibling=C,d.child=x,Pu(d,u.child,null,m),x=d.child,x.memoizedState=DS(m),x.childLanes=MS(u,M,m),d.memoizedState=RS,d=C);else if($o(d),vC(j)){if(M=j.nextSibling&&j.nextSibling.dataset,M)var ue=M.dgst;M=ue,x=Error(r(419)),x.stack="",x.digest=M,td({value:x,source:null,stack:null}),d=LS(u,d,m)}else if(nr||nd(u,d,m,!1),M=(m&u.childLanes)!==0,nr||M){if(M=Yt,M!==null&&(x=m&-m,x=(x&42)!==0?1:bw(x),x=(x&(M.suspendedLanes|m))!==0?0:x,x!==0&&x!==Q.retryLane))throw Q.retryLane=x,ku(u,x),Ci(M,u,x),jP;j.data==="$?"||tC(),d=LS(u,d,m)}else j.data==="$?"?(d.flags|=192,d.child=u.child,d=null):(u=Q.treeContext,mn=ms(j.nextSibling),Vr=d,It=!0,Vl=null,Ls=!1,u!==null&&(ji[Vi++]=Sa,ji[Vi++]=Ca,ji[Vi++]=zl,Sa=u.id,Ca=u.overflow,zl=d),d=PS(d,x.children),d.flags|=4096);return d}return C?(Io(),C=x.fallback,j=d.mode,Q=u.child,ue=Q.sibling,x=wa(Q,{mode:"hidden",children:x.children}),x.subtreeFlags=Q.subtreeFlags&65011712,ue!==null?C=wa(ue,C):(C=Bl(C,j,m,null),C.flags|=2),C.return=d,x.return=d,x.sibling=C,d.child=x,x=C,C=d.child,j=u.child.memoizedState,j===null?j=DS(m):(Q=j.cachePool,Q!==null?(ue=Gn._currentValue,Q=Q.parent!==ue?{parent:ue,pool:ue}:Q):Q=PM(),j={baseLanes:j.baseLanes|m,cachePool:Q}),C.memoizedState=j,C.childLanes=MS(u,M,m),d.memoizedState=RS,x):($o(d),m=u.child,u=m.sibling,m=wa(m,{mode:"visible",children:x.children}),m.return=d,m.sibling=null,u!==null&&(M=d.deletions,M===null?(d.deletions=[u],d.flags|=16):M.push(u)),d.child=m,d.memoizedState=null,m)}function PS(u,d){return d=qy({mode:"visible",children:d},u.mode),d.return=u,u.child=d}function qy(u,d){return u=vi(22,u,null,d),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function LS(u,d,m){return Pu(d,u.child,null,m),u=PS(d,d.pendingProps.children),u.flags|=2,d.memoizedState=null,u}function ZP(u,d,m){u.lanes|=d;var x=u.alternate;x!==null&&(x.lanes|=d),tS(u.return,d,m)}function FS(u,d,m,x,C){var $=u.memoizedState;$===null?u.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:x,tail:m,tailMode:C}:($.isBackwards=d,$.rendering=null,$.renderingStartTime=0,$.last=x,$.tail=m,$.tailMode=C)}function QP(u,d,m){var x=d.pendingProps,C=x.revealOrder,$=x.tail;if(dr(u,d,x.children,m),x=qn.current,(x&2)!==0)x=x&1|2,d.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=d.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&ZP(u,m,d);else if(u.tag===19)ZP(u,m,d);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===d)break e;for(;u.sibling===null;){if(u.return===null||u.return===d)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}x&=1}switch(Y(qn,x),C){case"forwards":for(m=d.child,C=null;m!==null;)u=m.alternate,u!==null&&Vy(u)===null&&(C=m),m=m.sibling;m=C,m===null?(C=d.child,d.child=null):(C=m.sibling,m.sibling=null),FS(d,!1,C,m,$);break;case"backwards":for(m=null,C=d.child,d.child=null;C!==null;){if(u=C.alternate,u!==null&&Vy(u)===null){d.child=C;break}u=C.sibling,C.sibling=m,m=C,C=u}FS(d,!0,m,null,$);break;case"together":FS(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function $a(u,d,m){if(u!==null&&(d.dependencies=u.dependencies),Do|=d.lanes,(m&d.childLanes)===0)if(u!==null){if(nd(u,d,m,!1),(m&d.childLanes)===0)return null}else return null;if(u!==null&&d.child!==u.child)throw Error(r(153));if(d.child!==null){for(u=d.child,m=wa(u,u.pendingProps),d.child=m,m.return=d;u.sibling!==null;)u=u.sibling,m=m.sibling=wa(u,u.pendingProps),m.return=d;m.sibling=null}return d.child}function BS(u,d){return(u.lanes&d)!==0?!0:(u=u.dependencies,!!(u!==null&&Ay(u)))}function Ote(u,d,m){switch(d.tag){case 3:Ee(d,d.stateNode.containerInfo),Co(d,Gn,u.memoizedState.cache),ed();break;case 27:case 5:$e(d);break;case 4:Ee(d,d.stateNode.containerInfo);break;case 10:Co(d,d.type,d.memoizedProps.value);break;case 13:var x=d.memoizedState;if(x!==null)return x.dehydrated!==null?($o(d),d.flags|=128,null):(m&d.child.childLanes)!==0?YP(u,d,m):($o(d),u=$a(u,d,m),u!==null?u.sibling:null);$o(d);break;case 19:var C=(u.flags&128)!==0;if(x=(m&d.childLanes)!==0,x||(nd(u,d,m,!1),x=(m&d.childLanes)!==0),C){if(x)return QP(u,d,m);d.flags|=128}if(C=d.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),Y(qn,qn.current),x)break;return null;case 22:case 23:return d.lanes=0,GP(u,d,m);case 24:Co(d,Gn,u.memoizedState.cache)}return $a(u,d,m)}function JP(u,d,m){if(u!==null)if(u.memoizedProps!==d.pendingProps)nr=!0;else{if(!BS(u,m)&&(d.flags&128)===0)return nr=!1,Ote(u,d,m);nr=(u.flags&131072)!==0}else nr=!1,It&&(d.flags&1048576)!==0&&IM(d,ky,d.index);switch(d.lanes=0,d.tag){case 16:e:{u=d.pendingProps;var x=d.elementType,C=x._init;if(x=C(x._payload),d.type=x,typeof x=="function")Kw(x)?(u=Kl(x,u),d.tag=1,d=KP(null,d,x,u,m)):(d.tag=0,d=_S(null,d,x,u,m));else{if(x!=null){if(C=x.$$typeof,C===A){d.tag=11,d=VP(null,d,x,u,m);break e}else if(C===I){d.tag=14,d=UP(null,d,x,u,m);break e}}throw d=W(x)||x,Error(r(306,d,""))}}return d;case 0:return _S(u,d,d.type,d.pendingProps,m);case 1:return x=d.type,C=Kl(x,d.pendingProps),KP(u,d,x,C,m);case 3:e:{if(Ee(d,d.stateNode.containerInfo),u===null)throw Error(r(387));x=d.pendingProps;var $=d.memoizedState;C=$.element,lS(u,d),cd(d,x,null,m);var M=d.memoizedState;if(x=M.cache,Co(d,Gn,x),x!==$.cache&&nS(d,[Gn],m,!0),ld(),x=M.element,$.isDehydrated)if($={element:x,isDehydrated:!1,cache:M.cache},d.updateQueue.baseState=$,d.memoizedState=$,d.flags&256){d=XP(u,d,x,m);break e}else if(x!==C){C=Bi(Error(r(424)),d),td(C),d=XP(u,d,x,m);break e}else{switch(u=d.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(mn=ms(u.firstChild),Vr=d,It=!0,Vl=null,Ls=!0,m=OP(d,null,x,m),d.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(ed(),x===C){d=$a(u,d,m);break e}dr(u,d,x,m)}d=d.child}return d;case 26:return Gy(u,d),u===null?(m=rL(d.type,null,d.pendingProps,null))?d.memoizedState=m:It||(m=d.type,u=d.pendingProps,x=av(ve.current).createElement(m),x[Er]=d,x[ni]=u,mr(x,m,u),tr(x),d.stateNode=x):d.memoizedState=rL(d.type,u.memoizedProps,d.pendingProps,u.memoizedState),null;case 27:return $e(d),u===null&&It&&(x=d.stateNode=eL(d.type,d.pendingProps,ve.current),Vr=d,Ls=!0,C=mn,Fo(d.type)?(bC=C,mn=ms(x.firstChild)):mn=C),dr(u,d,d.pendingProps.children,m),Gy(u,d),u===null&&(d.flags|=4194304),d.child;case 5:return u===null&&It&&((C=x=mn)&&(x=sne(x,d.type,d.pendingProps,Ls),x!==null?(d.stateNode=x,Vr=d,mn=ms(x.firstChild),Ls=!1,C=!0):C=!1),C||Ul(d)),$e(d),C=d.type,$=d.pendingProps,M=u!==null?u.memoizedProps:null,x=$.children,mC(C,$)?x=null:M!==null&&mC(C,M)&&(d.flags|=32),d.memoizedState!==null&&(C=pS(u,d,Cte,null,null,m),Od._currentValue=C),Gy(u,d),dr(u,d,x,m),d.child;case 6:return u===null&&It&&((u=m=mn)&&(m=ane(m,d.pendingProps,Ls),m!==null?(d.stateNode=m,Vr=d,mn=null,u=!0):u=!1),u||Ul(d)),null;case 13:return YP(u,d,m);case 4:return Ee(d,d.stateNode.containerInfo),x=d.pendingProps,u===null?d.child=Pu(d,null,x,m):dr(u,d,x,m),d.child;case 11:return VP(u,d,d.type,d.pendingProps,m);case 7:return dr(u,d,d.pendingProps,m),d.child;case 8:return dr(u,d,d.pendingProps.children,m),d.child;case 12:return dr(u,d,d.pendingProps.children,m),d.child;case 10:return x=d.pendingProps,Co(d,d.type,x.value),dr(u,d,x.children,m),d.child;case 9:return C=d.type._context,x=d.pendingProps.children,Gl(d),C=$r(C),x=x(C),d.flags|=1,dr(u,d,x,m),d.child;case 14:return UP(u,d,d.type,d.pendingProps,m);case 15:return WP(u,d,d.type,d.pendingProps,m);case 19:return QP(u,d,m);case 31:return x=d.pendingProps,m=d.mode,x={mode:x.mode,children:x.children},u===null?(m=qy(x,m),m.ref=d.ref,d.child=m,m.return=d,d=m):(m=wa(u.child,x),m.ref=d.ref,d.child=m,m.return=d,d=m),d;case 22:return GP(u,d,m);case 24:return Gl(d),x=$r(Gn),u===null?(C=sS(),C===null&&(C=Yt,$=rS(),C.pooledCache=$,$.refCount++,$!==null&&(C.pooledCacheLanes|=m),C=$),d.memoizedState={parent:x,cache:C},oS(d),Co(d,Gn,C)):((u.lanes&m)!==0&&(lS(u,d),cd(d,null,null,m),ld()),C=u.memoizedState,$=d.memoizedState,C.parent!==x?(C={parent:x,cache:x},d.memoizedState=C,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=C),Co(d,Gn,x)):(x=$.cache,Co(d,Gn,x),x!==C.cache&&nS(d,[Gn],m,!0))),dr(u,d,d.pendingProps.children,m),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function Ia(u){u.flags|=4}function e3(u,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!lL(d)){if(d=Ui.current,d!==null&&((wt&4194048)===wt?Fs!==null:(wt&62914560)!==wt&&(wt&536870912)===0||d!==Fs))throw ad=aS,LM;u.flags|=8192}}function Hy(u,d){d!==null&&(u.flags|=4),u.flags&16384&&(d=u.tag!==22?_D():536870912,u.lanes|=d,zu|=d)}function gd(u,d){if(!It)switch(u.tailMode){case"hidden":d=u.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?u.tail=null:m.sibling=null;break;case"collapsed":m=u.tail;for(var x=null;m!==null;)m.alternate!==null&&(x=m),m=m.sibling;x===null?d||u.tail===null?u.tail=null:u.tail.sibling=null:x.sibling=null}}function un(u){var d=u.alternate!==null&&u.alternate.child===u.child,m=0,x=0;if(d)for(var C=u.child;C!==null;)m|=C.lanes|C.childLanes,x|=C.subtreeFlags&65011712,x|=C.flags&65011712,C.return=u,C=C.sibling;else for(C=u.child;C!==null;)m|=C.lanes|C.childLanes,x|=C.subtreeFlags,x|=C.flags,C.return=u,C=C.sibling;return u.subtreeFlags|=x,u.childLanes=m,d}function _te(u,d,m){var x=d.pendingProps;switch(Qw(d),d.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(d),null;case 1:return un(d),null;case 3:return m=d.stateNode,x=null,u!==null&&(x=u.memoizedState.cache),d.memoizedState.cache!==x&&(d.flags|=2048),ka(Gn),me(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(u===null||u.child===null)&&(Jh(d)?Ia(d):u===null||u.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,_M())),un(d),null;case 26:return m=d.memoizedState,u===null?(Ia(d),m!==null?(un(d),e3(d,m)):(un(d),d.flags&=-16777217)):m?m!==u.memoizedState?(Ia(d),un(d),e3(d,m)):(un(d),d.flags&=-16777217):(u.memoizedProps!==x&&Ia(d),un(d),d.flags&=-16777217),null;case 27:Ie(d),m=ve.current;var C=d.type;if(u!==null&&d.stateNode!=null)u.memoizedProps!==x&&Ia(d);else{if(!x){if(d.stateNode===null)throw Error(r(166));return un(d),null}u=ie.current,Jh(d)?NM(d):(u=eL(C,x,m),d.stateNode=u,Ia(d))}return un(d),null;case 5:if(Ie(d),m=d.type,u!==null&&d.stateNode!=null)u.memoizedProps!==x&&Ia(d);else{if(!x){if(d.stateNode===null)throw Error(r(166));return un(d),null}if(u=ie.current,Jh(d))NM(d);else{switch(C=av(ve.current),u){case 1:u=C.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:u=C.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":u=C.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":u=C.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":u=C.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof x.is=="string"?C.createElement("select",{is:x.is}):C.createElement("select"),x.multiple?u.multiple=!0:x.size&&(u.size=x.size);break;default:u=typeof x.is=="string"?C.createElement(m,{is:x.is}):C.createElement(m)}}u[Er]=d,u[ni]=x;e:for(C=d.child;C!==null;){if(C.tag===5||C.tag===6)u.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===d)break e;for(;C.sibling===null;){if(C.return===null||C.return===d)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}d.stateNode=u;e:switch(mr(u,m,x),m){case"button":case"input":case"select":case"textarea":u=!!x.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Ia(d)}}return un(d),d.flags&=-16777217,null;case 6:if(u&&d.stateNode!=null)u.memoizedProps!==x&&Ia(d);else{if(typeof x!="string"&&d.stateNode===null)throw Error(r(166));if(u=ve.current,Jh(d)){if(u=d.stateNode,m=d.memoizedProps,x=null,C=Vr,C!==null)switch(C.tag){case 27:case 5:x=C.memoizedProps}u[Er]=d,u=!!(u.nodeValue===m||x!==null&&x.suppressHydrationWarning===!0||H3(u.nodeValue,m)),u||Ul(d)}else u=av(u).createTextNode(x),u[Er]=d,d.stateNode=u}return un(d),null;case 13:if(x=d.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(C=Jh(d),x!==null&&x.dehydrated!==null){if(u===null){if(!C)throw Error(r(318));if(C=d.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(r(317));C[Er]=d}else ed(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;un(d),C=!1}else C=_M(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=C),C=!0;if(!C)return d.flags&256?(Ea(d),d):(Ea(d),null)}if(Ea(d),(d.flags&128)!==0)return d.lanes=m,d;if(m=x!==null,u=u!==null&&u.memoizedState!==null,m){x=d.child,C=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(C=x.alternate.memoizedState.cachePool.pool);var $=null;x.memoizedState!==null&&x.memoizedState.cachePool!==null&&($=x.memoizedState.cachePool.pool),$!==C&&(x.flags|=2048)}return m!==u&&m&&(d.child.flags|=8192),Hy(d,d.updateQueue),un(d),null;case 4:return me(),u===null&&uC(d.stateNode.containerInfo),un(d),null;case 10:return ka(d.type),un(d),null;case 19:if(X(qn),C=d.memoizedState,C===null)return un(d),null;if(x=(d.flags&128)!==0,$=C.rendering,$===null)if(x)gd(C,!1);else{if(gn!==0||u!==null&&(u.flags&128)!==0)for(u=d.child;u!==null;){if($=Vy(u),$!==null){for(d.flags|=128,gd(C,!1),u=$.updateQueue,d.updateQueue=u,Hy(d,u),d.subtreeFlags=0,u=m,m=d.child;m!==null;)$M(m,u),m=m.sibling;return Y(qn,qn.current&1|2),d.child}u=u.sibling}C.tail!==null&&Xe()>Yy&&(d.flags|=128,x=!0,gd(C,!1),d.lanes=4194304)}else{if(!x)if(u=Vy($),u!==null){if(d.flags|=128,x=!0,u=u.updateQueue,d.updateQueue=u,Hy(d,u),gd(C,!0),C.tail===null&&C.tailMode==="hidden"&&!$.alternate&&!It)return un(d),null}else 2*Xe()-C.renderingStartTime>Yy&&m!==536870912&&(d.flags|=128,x=!0,gd(C,!1),d.lanes=4194304);C.isBackwards?($.sibling=d.child,d.child=$):(u=C.last,u!==null?u.sibling=$:d.child=$,C.last=$)}return C.tail!==null?(d=C.tail,C.rendering=d,C.tail=d.sibling,C.renderingStartTime=Xe(),d.sibling=null,u=qn.current,Y(qn,x?u&1|2:u&1),d):(un(d),null);case 22:case 23:return Ea(d),hS(),x=d.memoizedState!==null,u!==null?u.memoizedState!==null!==x&&(d.flags|=8192):x&&(d.flags|=8192),x?(m&536870912)!==0&&(d.flags&128)===0&&(un(d),d.subtreeFlags&6&&(d.flags|=8192)):un(d),m=d.updateQueue,m!==null&&Hy(d,m.retryQueue),m=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),x=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(x=d.memoizedState.cachePool.pool),x!==m&&(d.flags|=2048),u!==null&&X(ql),null;case 24:return m=null,u!==null&&(m=u.memoizedState.cache),d.memoizedState.cache!==m&&(d.flags|=2048),ka(Gn),un(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function Rte(u,d){switch(Qw(d),d.tag){case 1:return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 3:return ka(Gn),me(),u=d.flags,(u&65536)!==0&&(u&128)===0?(d.flags=u&-65537|128,d):null;case 26:case 27:case 5:return Ie(d),null;case 13:if(Ea(d),u=d.memoizedState,u!==null&&u.dehydrated!==null){if(d.alternate===null)throw Error(r(340));ed()}return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 19:return X(qn),null;case 4:return me(),null;case 10:return ka(d.type),null;case 22:case 23:return Ea(d),hS(),u!==null&&X(ql),u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 24:return ka(Gn),null;case 25:return null;default:return null}}function t3(u,d){switch(Qw(d),d.tag){case 3:ka(Gn),me();break;case 26:case 27:case 5:Ie(d);break;case 4:me();break;case 13:Ea(d);break;case 19:X(qn);break;case 10:ka(d.type);break;case 22:case 23:Ea(d),hS(),u!==null&&X(ql);break;case 24:ka(Gn)}}function yd(u,d){try{var m=d.updateQueue,x=m!==null?m.lastEffect:null;if(x!==null){var C=x.next;m=C;do{if((m.tag&u)===u){x=void 0;var $=m.create,M=m.inst;x=$(),M.destroy=x}m=m.next}while(m!==C)}}catch(j){Wt(d,d.return,j)}}function No(u,d,m){try{var x=d.updateQueue,C=x!==null?x.lastEffect:null;if(C!==null){var $=C.next;x=$;do{if((x.tag&u)===u){var M=x.inst,j=M.destroy;if(j!==void 0){M.destroy=void 0,C=d;var Q=m,ue=j;try{ue()}catch(we){Wt(C,Q,we)}}}x=x.next}while(x!==$)}}catch(we){Wt(d,d.return,we)}}function n3(u){var d=u.updateQueue;if(d!==null){var m=u.stateNode;try{UM(d,m)}catch(x){Wt(u,u.return,x)}}}function r3(u,d,m){m.props=Kl(u.type,u.memoizedProps),m.state=u.memoizedState;try{m.componentWillUnmount()}catch(x){Wt(u,d,x)}}function vd(u,d){try{var m=u.ref;if(m!==null){switch(u.tag){case 26:case 27:case 5:var x=u.stateNode;break;case 30:x=u.stateNode;break;default:x=u.stateNode}typeof m=="function"?u.refCleanup=m(x):m.current=x}}catch(C){Wt(u,d,C)}}function Bs(u,d){var m=u.ref,x=u.refCleanup;if(m!==null)if(typeof x=="function")try{x()}catch(C){Wt(u,d,C)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(C){Wt(u,d,C)}else m.current=null}function i3(u){var d=u.type,m=u.memoizedProps,x=u.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":m.autoFocus&&x.focus();break e;case"img":m.src?x.src=m.src:m.srcSet&&(x.srcset=m.srcSet)}}catch(C){Wt(u,u.return,C)}}function zS(u,d,m){try{var x=u.stateNode;ene(x,u.type,m,d),x[ni]=d}catch(C){Wt(u,u.return,C)}}function s3(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&Fo(u.type)||u.tag===4}function jS(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||s3(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&Fo(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function VS(u,d,m){var x=u.tag;if(x===5||x===6)u=u.stateNode,d?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(u,d):(d=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,d.appendChild(u),m=m._reactRootContainer,m!=null||d.onclick!==null||(d.onclick=sv));else if(x!==4&&(x===27&&Fo(u.type)&&(m=u.stateNode,d=null),u=u.child,u!==null))for(VS(u,d,m),u=u.sibling;u!==null;)VS(u,d,m),u=u.sibling}function Ky(u,d,m){var x=u.tag;if(x===5||x===6)u=u.stateNode,d?m.insertBefore(u,d):m.appendChild(u);else if(x!==4&&(x===27&&Fo(u.type)&&(m=u.stateNode),u=u.child,u!==null))for(Ky(u,d,m),u=u.sibling;u!==null;)Ky(u,d,m),u=u.sibling}function a3(u){var d=u.stateNode,m=u.memoizedProps;try{for(var x=u.type,C=d.attributes;C.length;)d.removeAttributeNode(C[0]);mr(d,x,m),d[Er]=u,d[ni]=m}catch($){Wt(u,u.return,$)}}var Na=!1,En=!1,US=!1,o3=typeof WeakSet=="function"?WeakSet:Set,rr=null;function Dte(u,d){if(u=u.containerInfo,dC=hv,u=vM(u),jw(u)){if("selectionStart"in u)var m={start:u.selectionStart,end:u.selectionEnd};else e:{m=(m=u.ownerDocument)&&m.defaultView||window;var x=m.getSelection&&m.getSelection();if(x&&x.rangeCount!==0){m=x.anchorNode;var C=x.anchorOffset,$=x.focusNode;x=x.focusOffset;try{m.nodeType,$.nodeType}catch{m=null;break e}var M=0,j=-1,Q=-1,ue=0,we=0,Ce=u,he=null;t:for(;;){for(var de;Ce!==m||C!==0&&Ce.nodeType!==3||(j=M+C),Ce!==$||x!==0&&Ce.nodeType!==3||(Q=M+x),Ce.nodeType===3&&(M+=Ce.nodeValue.length),(de=Ce.firstChild)!==null;)he=Ce,Ce=de;for(;;){if(Ce===u)break t;if(he===m&&++ue===C&&(j=M),he===$&&++we===x&&(Q=M),(de=Ce.nextSibling)!==null)break;Ce=he,he=Ce.parentNode}Ce=de}m=j===-1||Q===-1?null:{start:j,end:Q}}else m=null}m=m||{start:0,end:0}}else m=null;for(pC={focusedElem:u,selectionRange:m},hv=!1,rr=d;rr!==null;)if(d=rr,u=d.child,(d.subtreeFlags&1024)!==0&&u!==null)u.return=d,rr=u;else for(;rr!==null;){switch(d=rr,$=d.alternate,u=d.flags,d.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&$!==null){u=void 0,m=d,C=$.memoizedProps,$=$.memoizedState,x=m.stateNode;try{var et=Kl(m.type,C,m.elementType===m.type);u=x.getSnapshotBeforeUpdate(et,$),x.__reactInternalSnapshotBeforeUpdate=u}catch(He){Wt(m,m.return,He)}}break;case 3:if((u&1024)!==0){if(u=d.stateNode.containerInfo,m=u.nodeType,m===9)yC(u);else if(m===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":yC(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(r(163))}if(u=d.sibling,u!==null){u.return=d.return,rr=u;break}rr=d.return}}function l3(u,d,m){var x=m.flags;switch(m.tag){case 0:case 11:case 15:Oo(u,m),x&4&&yd(5,m);break;case 1:if(Oo(u,m),x&4)if(u=m.stateNode,d===null)try{u.componentDidMount()}catch(M){Wt(m,m.return,M)}else{var C=Kl(m.type,d.memoizedProps);d=d.memoizedState;try{u.componentDidUpdate(C,d,u.__reactInternalSnapshotBeforeUpdate)}catch(M){Wt(m,m.return,M)}}x&64&&n3(m),x&512&&vd(m,m.return);break;case 3:if(Oo(u,m),x&64&&(u=m.updateQueue,u!==null)){if(d=null,m.child!==null)switch(m.child.tag){case 27:case 5:d=m.child.stateNode;break;case 1:d=m.child.stateNode}try{UM(u,d)}catch(M){Wt(m,m.return,M)}}break;case 27:d===null&&x&4&&a3(m);case 26:case 5:Oo(u,m),d===null&&x&4&&i3(m),x&512&&vd(m,m.return);break;case 12:Oo(u,m);break;case 13:Oo(u,m),x&4&&f3(u,m),x&64&&(u=m.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(m=Ute.bind(null,m),one(u,m))));break;case 22:if(x=m.memoizedState!==null||Na,!x){d=d!==null&&d.memoizedState!==null||En,C=Na;var $=En;Na=x,(En=d)&&!$?_o(u,m,(m.subtreeFlags&8772)!==0):Oo(u,m),Na=C,En=$}break;case 30:break;default:Oo(u,m)}}function c3(u){var d=u.alternate;d!==null&&(u.alternate=null,c3(d)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(d=u.stateNode,d!==null&&Sw(d)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var rn=null,si=!1;function Oa(u,d,m){for(m=m.child;m!==null;)u3(u,d,m),m=m.sibling}function u3(u,d,m){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(ti,m)}catch{}switch(m.tag){case 26:En||Bs(m,d),Oa(u,d,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:En||Bs(m,d);var x=rn,C=si;Fo(m.type)&&(rn=m.stateNode,si=!1),Oa(u,d,m),Ed(m.stateNode),rn=x,si=C;break;case 5:En||Bs(m,d);case 6:if(x=rn,C=si,rn=null,Oa(u,d,m),rn=x,si=C,rn!==null)if(si)try{(rn.nodeType===9?rn.body:rn.nodeName==="HTML"?rn.ownerDocument.body:rn).removeChild(m.stateNode)}catch($){Wt(m,d,$)}else try{rn.removeChild(m.stateNode)}catch($){Wt(m,d,$)}break;case 18:rn!==null&&(si?(u=rn,Q3(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,m.stateNode),Md(u)):Q3(rn,m.stateNode));break;case 4:x=rn,C=si,rn=m.stateNode.containerInfo,si=!0,Oa(u,d,m),rn=x,si=C;break;case 0:case 11:case 14:case 15:En||No(2,m,d),En||No(4,m,d),Oa(u,d,m);break;case 1:En||(Bs(m,d),x=m.stateNode,typeof x.componentWillUnmount=="function"&&r3(m,d,x)),Oa(u,d,m);break;case 21:Oa(u,d,m);break;case 22:En=(x=En)||m.memoizedState!==null,Oa(u,d,m),En=x;break;default:Oa(u,d,m)}}function f3(u,d){if(d.memoizedState===null&&(u=d.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Md(u)}catch(m){Wt(d,d.return,m)}}function Mte(u){switch(u.tag){case 13:case 19:var d=u.stateNode;return d===null&&(d=u.stateNode=new o3),d;case 22:return u=u.stateNode,d=u._retryCache,d===null&&(d=u._retryCache=new o3),d;default:throw Error(r(435,u.tag))}}function WS(u,d){var m=Mte(u);d.forEach(function(x){var C=Wte.bind(null,u,x);m.has(x)||(m.add(x),x.then(C,C))})}function bi(u,d){var m=d.deletions;if(m!==null)for(var x=0;x<m.length;x++){var C=m[x],$=u,M=d,j=M;e:for(;j!==null;){switch(j.tag){case 27:if(Fo(j.type)){rn=j.stateNode,si=!1;break e}break;case 5:rn=j.stateNode,si=!1;break e;case 3:case 4:rn=j.stateNode.containerInfo,si=!0;break e}j=j.return}if(rn===null)throw Error(r(160));u3($,M,C),rn=null,si=!1,$=C.alternate,$!==null&&($.return=null),C.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)h3(d,u),d=d.sibling}var ps=null;function h3(u,d){var m=u.alternate,x=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:bi(d,u),xi(u),x&4&&(No(3,u,u.return),yd(3,u),No(5,u,u.return));break;case 1:bi(d,u),xi(u),x&512&&(En||m===null||Bs(m,m.return)),x&64&&Na&&(u=u.updateQueue,u!==null&&(x=u.callbacks,x!==null&&(m=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=m===null?x:m.concat(x))));break;case 26:var C=ps;if(bi(d,u),xi(u),x&512&&(En||m===null||Bs(m,m.return)),x&4){var $=m!==null?m.memoizedState:null;if(x=u.memoizedState,m===null)if(x===null)if(u.stateNode===null){e:{x=u.type,m=u.memoizedProps,C=C.ownerDocument||C;t:switch(x){case"title":$=C.getElementsByTagName("title")[0],(!$||$[Vh]||$[Er]||$.namespaceURI==="http://www.w3.org/2000/svg"||$.hasAttribute("itemprop"))&&($=C.createElement(x),C.head.insertBefore($,C.querySelector("head > title"))),mr($,x,m),$[Er]=u,tr($),x=$;break e;case"link":var M=aL("link","href",C).get(x+(m.href||""));if(M){for(var j=0;j<M.length;j++)if($=M[j],$.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&$.getAttribute("rel")===(m.rel==null?null:m.rel)&&$.getAttribute("title")===(m.title==null?null:m.title)&&$.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){M.splice(j,1);break t}}$=C.createElement(x),mr($,x,m),C.head.appendChild($);break;case"meta":if(M=aL("meta","content",C).get(x+(m.content||""))){for(j=0;j<M.length;j++)if($=M[j],$.getAttribute("content")===(m.content==null?null:""+m.content)&&$.getAttribute("name")===(m.name==null?null:m.name)&&$.getAttribute("property")===(m.property==null?null:m.property)&&$.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&$.getAttribute("charset")===(m.charSet==null?null:m.charSet)){M.splice(j,1);break t}}$=C.createElement(x),mr($,x,m),C.head.appendChild($);break;default:throw Error(r(468,x))}$[Er]=u,tr($),x=$}u.stateNode=x}else oL(C,u.type,u.stateNode);else u.stateNode=sL(C,x,u.memoizedProps);else $!==x?($===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):$.count--,x===null?oL(C,u.type,u.stateNode):sL(C,x,u.memoizedProps)):x===null&&u.stateNode!==null&&zS(u,u.memoizedProps,m.memoizedProps)}break;case 27:bi(d,u),xi(u),x&512&&(En||m===null||Bs(m,m.return)),m!==null&&x&4&&zS(u,u.memoizedProps,m.memoizedProps);break;case 5:if(bi(d,u),xi(u),x&512&&(En||m===null||Bs(m,m.return)),u.flags&32){C=u.stateNode;try{vu(C,"")}catch(de){Wt(u,u.return,de)}}x&4&&u.stateNode!=null&&(C=u.memoizedProps,zS(u,C,m!==null?m.memoizedProps:C)),x&1024&&(US=!0);break;case 6:if(bi(d,u),xi(u),x&4){if(u.stateNode===null)throw Error(r(162));x=u.memoizedProps,m=u.stateNode;try{m.nodeValue=x}catch(de){Wt(u,u.return,de)}}break;case 3:if(cv=null,C=ps,ps=ov(d.containerInfo),bi(d,u),ps=C,xi(u),x&4&&m!==null&&m.memoizedState.isDehydrated)try{Md(d.containerInfo)}catch(de){Wt(u,u.return,de)}US&&(US=!1,d3(u));break;case 4:x=ps,ps=ov(u.stateNode.containerInfo),bi(d,u),xi(u),ps=x;break;case 12:bi(d,u),xi(u);break;case 13:bi(d,u),xi(u),u.child.flags&8192&&u.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(YS=Xe()),x&4&&(x=u.updateQueue,x!==null&&(u.updateQueue=null,WS(u,x)));break;case 22:C=u.memoizedState!==null;var Q=m!==null&&m.memoizedState!==null,ue=Na,we=En;if(Na=ue||C,En=we||Q,bi(d,u),En=we,Na=ue,xi(u),x&8192)e:for(d=u.stateNode,d._visibility=C?d._visibility&-2:d._visibility|1,C&&(m===null||Q||Na||En||Xl(u)),m=null,d=u;;){if(d.tag===5||d.tag===26){if(m===null){Q=m=d;try{if($=Q.stateNode,C)M=$.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{j=Q.stateNode;var Ce=Q.memoizedProps.style,he=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;j.style.display=he==null||typeof he=="boolean"?"":(""+he).trim()}}catch(de){Wt(Q,Q.return,de)}}}else if(d.tag===6){if(m===null){Q=d;try{Q.stateNode.nodeValue=C?"":Q.memoizedProps}catch(de){Wt(Q,Q.return,de)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===u)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break e;for(;d.sibling===null;){if(d.return===null||d.return===u)break e;m===d&&(m=null),d=d.return}m===d&&(m=null),d.sibling.return=d.return,d=d.sibling}x&4&&(x=u.updateQueue,x!==null&&(m=x.retryQueue,m!==null&&(x.retryQueue=null,WS(u,m))));break;case 19:bi(d,u),xi(u),x&4&&(x=u.updateQueue,x!==null&&(u.updateQueue=null,WS(u,x)));break;case 30:break;case 21:break;default:bi(d,u),xi(u)}}function xi(u){var d=u.flags;if(d&2){try{for(var m,x=u.return;x!==null;){if(s3(x)){m=x;break}x=x.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:var C=m.stateNode,$=jS(u);Ky(u,$,C);break;case 5:var M=m.stateNode;m.flags&32&&(vu(M,""),m.flags&=-33);var j=jS(u);Ky(u,j,M);break;case 3:case 4:var Q=m.stateNode.containerInfo,ue=jS(u);VS(u,ue,Q);break;default:throw Error(r(161))}}catch(we){Wt(u,u.return,we)}u.flags&=-3}d&4096&&(u.flags&=-4097)}function d3(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var d=u;d3(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),u=u.sibling}}function Oo(u,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)l3(u,d.alternate,d),d=d.sibling}function Xl(u){for(u=u.child;u!==null;){var d=u;switch(d.tag){case 0:case 11:case 14:case 15:No(4,d,d.return),Xl(d);break;case 1:Bs(d,d.return);var m=d.stateNode;typeof m.componentWillUnmount=="function"&&r3(d,d.return,m),Xl(d);break;case 27:Ed(d.stateNode);case 26:case 5:Bs(d,d.return),Xl(d);break;case 22:d.memoizedState===null&&Xl(d);break;case 30:Xl(d);break;default:Xl(d)}u=u.sibling}}function _o(u,d,m){for(m=m&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var x=d.alternate,C=u,$=d,M=$.flags;switch($.tag){case 0:case 11:case 15:_o(C,$,m),yd(4,$);break;case 1:if(_o(C,$,m),x=$,C=x.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(ue){Wt(x,x.return,ue)}if(x=$,C=x.updateQueue,C!==null){var j=x.stateNode;try{var Q=C.shared.hiddenCallbacks;if(Q!==null)for(C.shared.hiddenCallbacks=null,C=0;C<Q.length;C++)VM(Q[C],j)}catch(ue){Wt(x,x.return,ue)}}m&&M&64&&n3($),vd($,$.return);break;case 27:a3($);case 26:case 5:_o(C,$,m),m&&x===null&&M&4&&i3($),vd($,$.return);break;case 12:_o(C,$,m);break;case 13:_o(C,$,m),m&&M&4&&f3(C,$);break;case 22:$.memoizedState===null&&_o(C,$,m),vd($,$.return);break;case 30:break;default:_o(C,$,m)}d=d.sibling}}function GS(u,d){var m=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),u=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(u=d.memoizedState.cachePool.pool),u!==m&&(u!=null&&u.refCount++,m!=null&&rd(m))}function qS(u,d){u=null,d.alternate!==null&&(u=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==u&&(d.refCount++,u!=null&&rd(u))}function zs(u,d,m,x){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)p3(u,d,m,x),d=d.sibling}function p3(u,d,m,x){var C=d.flags;switch(d.tag){case 0:case 11:case 15:zs(u,d,m,x),C&2048&&yd(9,d);break;case 1:zs(u,d,m,x);break;case 3:zs(u,d,m,x),C&2048&&(u=null,d.alternate!==null&&(u=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==u&&(d.refCount++,u!=null&&rd(u)));break;case 12:if(C&2048){zs(u,d,m,x),u=d.stateNode;try{var $=d.memoizedProps,M=$.id,j=$.onPostCommit;typeof j=="function"&&j(M,d.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(Q){Wt(d,d.return,Q)}}else zs(u,d,m,x);break;case 13:zs(u,d,m,x);break;case 23:break;case 22:$=d.stateNode,M=d.alternate,d.memoizedState!==null?$._visibility&2?zs(u,d,m,x):bd(u,d):$._visibility&2?zs(u,d,m,x):($._visibility|=2,Lu(u,d,m,x,(d.subtreeFlags&10256)!==0)),C&2048&&GS(M,d);break;case 24:zs(u,d,m,x),C&2048&&qS(d.alternate,d);break;default:zs(u,d,m,x)}}function Lu(u,d,m,x,C){for(C=C&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var $=u,M=d,j=m,Q=x,ue=M.flags;switch(M.tag){case 0:case 11:case 15:Lu($,M,j,Q,C),yd(8,M);break;case 23:break;case 22:var we=M.stateNode;M.memoizedState!==null?we._visibility&2?Lu($,M,j,Q,C):bd($,M):(we._visibility|=2,Lu($,M,j,Q,C)),C&&ue&2048&&GS(M.alternate,M);break;case 24:Lu($,M,j,Q,C),C&&ue&2048&&qS(M.alternate,M);break;default:Lu($,M,j,Q,C)}d=d.sibling}}function bd(u,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var m=u,x=d,C=x.flags;switch(x.tag){case 22:bd(m,x),C&2048&&GS(x.alternate,x);break;case 24:bd(m,x),C&2048&&qS(x.alternate,x);break;default:bd(m,x)}d=d.sibling}}var xd=8192;function Fu(u){if(u.subtreeFlags&xd)for(u=u.child;u!==null;)m3(u),u=u.sibling}function m3(u){switch(u.tag){case 26:Fu(u),u.flags&xd&&u.memoizedState!==null&&xne(ps,u.memoizedState,u.memoizedProps);break;case 5:Fu(u);break;case 3:case 4:var d=ps;ps=ov(u.stateNode.containerInfo),Fu(u),ps=d;break;case 22:u.memoizedState===null&&(d=u.alternate,d!==null&&d.memoizedState!==null?(d=xd,xd=16777216,Fu(u),xd=d):Fu(u));break;default:Fu(u)}}function g3(u){var d=u.alternate;if(d!==null&&(u=d.child,u!==null)){d.child=null;do d=u.sibling,u.sibling=null,u=d;while(u!==null)}}function wd(u){var d=u.deletions;if((u.flags&16)!==0){if(d!==null)for(var m=0;m<d.length;m++){var x=d[m];rr=x,v3(x,u)}g3(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)y3(u),u=u.sibling}function y3(u){switch(u.tag){case 0:case 11:case 15:wd(u),u.flags&2048&&No(9,u,u.return);break;case 3:wd(u);break;case 12:wd(u);break;case 22:var d=u.stateNode;u.memoizedState!==null&&d._visibility&2&&(u.return===null||u.return.tag!==13)?(d._visibility&=-3,Xy(u)):wd(u);break;default:wd(u)}}function Xy(u){var d=u.deletions;if((u.flags&16)!==0){if(d!==null)for(var m=0;m<d.length;m++){var x=d[m];rr=x,v3(x,u)}g3(u)}for(u=u.child;u!==null;){switch(d=u,d.tag){case 0:case 11:case 15:No(8,d,d.return),Xy(d);break;case 22:m=d.stateNode,m._visibility&2&&(m._visibility&=-3,Xy(d));break;default:Xy(d)}u=u.sibling}}function v3(u,d){for(;rr!==null;){var m=rr;switch(m.tag){case 0:case 11:case 15:No(8,m,d);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var x=m.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:rd(m.memoizedState.cache)}if(x=m.child,x!==null)x.return=m,rr=x;else e:for(m=u;rr!==null;){x=rr;var C=x.sibling,$=x.return;if(c3(x),x===m){rr=null;break e}if(C!==null){C.return=$,rr=C;break e}rr=$}}}var Pte={getCacheForType:function(u){var d=$r(Gn),m=d.data.get(u);return m===void 0&&(m=u(),d.data.set(u,m)),m}},Lte=typeof WeakMap=="function"?WeakMap:Map,Mt=0,Yt=null,dt=null,wt=0,Pt=0,wi=null,Ro=!1,Bu=!1,HS=!1,_a=0,gn=0,Do=0,Yl=0,KS=0,Wi=0,zu=0,Sd=null,ai=null,XS=!1,YS=0,Yy=1/0,Zy=null,Mo=null,pr=0,Po=null,ju=null,Vu=0,ZS=0,QS=null,b3=null,Cd=0,JS=null;function Si(){if((Mt&2)!==0&&wt!==0)return wt&-wt;if(R.T!==null){var u=Iu;return u!==0?u:aC()}return MD()}function x3(){Wi===0&&(Wi=(wt&536870912)===0||It?OD():536870912);var u=Ui.current;return u!==null&&(u.flags|=32),Wi}function Ci(u,d,m){(u===Yt&&(Pt===2||Pt===9)||u.cancelPendingCommit!==null)&&(Uu(u,0),Lo(u,wt,Wi,!1)),jh(u,m),((Mt&2)===0||u!==Yt)&&(u===Yt&&((Mt&2)===0&&(Yl|=m),gn===4&&Lo(u,wt,Wi,!1)),js(u))}function w3(u,d,m){if((Mt&6)!==0)throw Error(r(327));var x=!m&&(d&124)===0&&(d&u.expiredLanes)===0||zh(u,d),C=x?zte(u,d):nC(u,d,!0),$=x;do{if(C===0){Bu&&!x&&Lo(u,d,0,!1);break}else{if(m=u.current.alternate,$&&!Fte(m)){C=nC(u,d,!1),$=!1;continue}if(C===2){if($=d,u.errorRecoveryDisabledLanes&$)var M=0;else M=u.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){d=M;e:{var j=u;C=Sd;var Q=j.current.memoizedState.isDehydrated;if(Q&&(Uu(j,M).flags|=256),M=nC(j,M,!1),M!==2){if(HS&&!Q){j.errorRecoveryDisabledLanes|=$,Yl|=$,C=4;break e}$=ai,ai=C,$!==null&&(ai===null?ai=$:ai.push.apply(ai,$))}C=M}if($=!1,C!==2)continue}}if(C===1){Uu(u,0),Lo(u,d,0,!0);break}e:{switch(x=u,$=C,$){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:Lo(x,d,Wi,!Ro);break e;case 2:ai=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(C=YS+300-Xe(),10<C)){if(Lo(x,d,Wi,!Ro),ly(x,0,!0)!==0)break e;x.timeoutHandle=Y3(S3.bind(null,x,m,ai,Zy,XS,d,Wi,Yl,zu,Ro,$,2,-0,0),C);break e}S3(x,m,ai,Zy,XS,d,Wi,Yl,zu,Ro,$,0,-0,0)}}break}while(!0);js(u)}function S3(u,d,m,x,C,$,M,j,Q,ue,we,Ce,he,de){if(u.timeoutHandle=-1,Ce=d.subtreeFlags,(Ce&8192||(Ce&16785408)===16785408)&&(Nd={stylesheets:null,count:0,unsuspend:bne},m3(d),Ce=wne(),Ce!==null)){u.cancelPendingCommit=Ce(I3.bind(null,u,d,$,m,x,C,M,j,Q,we,1,he,de)),Lo(u,$,M,!ue);return}I3(u,d,$,m,x,C,M,j,Q)}function Fte(u){for(var d=u;;){var m=d.tag;if((m===0||m===11||m===15)&&d.flags&16384&&(m=d.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var x=0;x<m.length;x++){var C=m[x],$=C.getSnapshot;C=C.value;try{if(!yi($(),C))return!1}catch{return!1}}if(m=d.child,d.subtreeFlags&16384&&m!==null)m.return=d,d=m;else{if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Lo(u,d,m,x){d&=~KS,d&=~Yl,u.suspendedLanes|=d,u.pingedLanes&=~d,x&&(u.warmLanes|=d),x=u.expirationTimes;for(var C=d;0<C;){var $=31-Wn(C),M=1<<$;x[$]=-1,C&=~M}m!==0&&RD(u,m,d)}function Qy(){return(Mt&6)===0?(Td(0),!1):!0}function eC(){if(dt!==null){if(Pt===0)var u=dt.return;else u=dt,Ta=Wl=null,yS(u),Mu=null,pd=0,u=dt;for(;u!==null;)t3(u.alternate,u),u=u.return;dt=null}}function Uu(u,d){var m=u.timeoutHandle;m!==-1&&(u.timeoutHandle=-1,nne(m)),m=u.cancelPendingCommit,m!==null&&(u.cancelPendingCommit=null,m()),eC(),Yt=u,dt=m=wa(u.current,null),wt=d,Pt=0,wi=null,Ro=!1,Bu=zh(u,d),HS=!1,zu=Wi=KS=Yl=Do=gn=0,ai=Sd=null,XS=!1,(d&8)!==0&&(d|=d&32);var x=u.entangledLanes;if(x!==0)for(u=u.entanglements,x&=d;0<x;){var C=31-Wn(x),$=1<<C;d|=u[C],x&=~$}return _a=d,xy(),m}function C3(u,d){ct=null,R.H=By,d===sd||d===Iy?(d=zM(),Pt=3):d===LM?(d=zM(),Pt=4):Pt=d===jP?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,wi=d,dt===null&&(gn=1,Wy(u,Bi(d,u.current)))}function T3(){var u=R.H;return R.H=By,u===null?By:u}function k3(){var u=R.A;return R.A=Pte,u}function tC(){gn=4,Ro||(wt&4194048)!==wt&&Ui.current!==null||(Bu=!0),(Do&134217727)===0&&(Yl&134217727)===0||Yt===null||Lo(Yt,wt,Wi,!1)}function nC(u,d,m){var x=Mt;Mt|=2;var C=T3(),$=k3();(Yt!==u||wt!==d)&&(Zy=null,Uu(u,d)),d=!1;var M=gn;e:do try{if(Pt!==0&&dt!==null){var j=dt,Q=wi;switch(Pt){case 8:eC(),M=6;break e;case 3:case 2:case 9:case 6:Ui.current===null&&(d=!0);var ue=Pt;if(Pt=0,wi=null,Wu(u,j,Q,ue),m&&Bu){M=0;break e}break;default:ue=Pt,Pt=0,wi=null,Wu(u,j,Q,ue)}}Bte(),M=gn;break}catch(we){C3(u,we)}while(!0);return d&&u.shellSuspendCounter++,Ta=Wl=null,Mt=x,R.H=C,R.A=$,dt===null&&(Yt=null,wt=0,xy()),M}function Bte(){for(;dt!==null;)A3(dt)}function zte(u,d){var m=Mt;Mt|=2;var x=T3(),C=k3();Yt!==u||wt!==d?(Zy=null,Yy=Xe()+500,Uu(u,d)):Bu=zh(u,d);e:do try{if(Pt!==0&&dt!==null){d=dt;var $=wi;t:switch(Pt){case 1:Pt=0,wi=null,Wu(u,d,$,1);break;case 2:case 9:if(FM($)){Pt=0,wi=null,E3(d);break}d=function(){Pt!==2&&Pt!==9||Yt!==u||(Pt=7),js(u)},$.then(d,d);break e;case 3:Pt=7;break e;case 4:Pt=5;break e;case 7:FM($)?(Pt=0,wi=null,E3(d)):(Pt=0,wi=null,Wu(u,d,$,7));break;case 5:var M=null;switch(dt.tag){case 26:M=dt.memoizedState;case 5:case 27:var j=dt;if(!M||lL(M)){Pt=0,wi=null;var Q=j.sibling;if(Q!==null)dt=Q;else{var ue=j.return;ue!==null?(dt=ue,Jy(ue)):dt=null}break t}}Pt=0,wi=null,Wu(u,d,$,5);break;case 6:Pt=0,wi=null,Wu(u,d,$,6);break;case 8:eC(),gn=6;break e;default:throw Error(r(462))}}jte();break}catch(we){C3(u,we)}while(!0);return Ta=Wl=null,R.H=x,R.A=C,Mt=m,dt!==null?0:(Yt=null,wt=0,xy(),gn)}function jte(){for(;dt!==null&&!Je();)A3(dt)}function A3(u){var d=JP(u.alternate,u,_a);u.memoizedProps=u.pendingProps,d===null?Jy(u):dt=d}function E3(u){var d=u,m=d.alternate;switch(d.tag){case 15:case 0:d=HP(m,d,d.pendingProps,d.type,void 0,wt);break;case 11:d=HP(m,d,d.pendingProps,d.type.render,d.ref,wt);break;case 5:yS(d);default:t3(m,d),d=dt=$M(d,_a),d=JP(m,d,_a)}u.memoizedProps=u.pendingProps,d===null?Jy(u):dt=d}function Wu(u,d,m,x){Ta=Wl=null,yS(d),Mu=null,pd=0;var C=d.return;try{if(Nte(u,C,d,m,wt)){gn=1,Wy(u,Bi(m,u.current)),dt=null;return}}catch($){if(C!==null)throw dt=C,$;gn=1,Wy(u,Bi(m,u.current)),dt=null;return}d.flags&32768?(It||x===1?u=!0:Bu||(wt&536870912)!==0?u=!1:(Ro=u=!0,(x===2||x===9||x===3||x===6)&&(x=Ui.current,x!==null&&x.tag===13&&(x.flags|=16384))),$3(d,u)):Jy(d)}function Jy(u){var d=u;do{if((d.flags&32768)!==0){$3(d,Ro);return}u=d.return;var m=_te(d.alternate,d,_a);if(m!==null){dt=m;return}if(d=d.sibling,d!==null){dt=d;return}dt=d=u}while(d!==null);gn===0&&(gn=5)}function $3(u,d){do{var m=Rte(u.alternate,u);if(m!==null){m.flags&=32767,dt=m;return}if(m=u.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!d&&(u=u.sibling,u!==null)){dt=u;return}dt=u=m}while(u!==null);gn=6,dt=null}function I3(u,d,m,x,C,$,M,j,Q){u.cancelPendingCommit=null;do ev();while(pr!==0);if((Mt&6)!==0)throw Error(r(327));if(d!==null){if(d===u.current)throw Error(r(177));if($=d.lanes|d.childLanes,$|=qw,bee(u,m,$,M,j,Q),u===Yt&&(dt=Yt=null,wt=0),ju=d,Po=u,Vu=m,ZS=$,QS=C,b3=x,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,Gte(kn,function(){return D3(),null})):(u.callbackNode=null,u.callbackPriority=0),x=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||x){x=R.T,R.T=null,C=F.p,F.p=2,M=Mt,Mt|=4;try{Dte(u,d,m)}finally{Mt=M,F.p=C,R.T=x}}pr=1,N3(),O3(),_3()}}function N3(){if(pr===1){pr=0;var u=Po,d=ju,m=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||m){m=R.T,R.T=null;var x=F.p;F.p=2;var C=Mt;Mt|=4;try{h3(d,u);var $=pC,M=vM(u.containerInfo),j=$.focusedElem,Q=$.selectionRange;if(M!==j&&j&&j.ownerDocument&&yM(j.ownerDocument.documentElement,j)){if(Q!==null&&jw(j)){var ue=Q.start,we=Q.end;if(we===void 0&&(we=ue),"selectionStart"in j)j.selectionStart=ue,j.selectionEnd=Math.min(we,j.value.length);else{var Ce=j.ownerDocument||document,he=Ce&&Ce.defaultView||window;if(he.getSelection){var de=he.getSelection(),et=j.textContent.length,He=Math.min(Q.start,et),zt=Q.end===void 0?He:Math.min(Q.end,et);!de.extend&&He>zt&&(M=zt,zt=He,He=M);var oe=gM(j,He),te=gM(j,zt);if(oe&&te&&(de.rangeCount!==1||de.anchorNode!==oe.node||de.anchorOffset!==oe.offset||de.focusNode!==te.node||de.focusOffset!==te.offset)){var le=Ce.createRange();le.setStart(oe.node,oe.offset),de.removeAllRanges(),He>zt?(de.addRange(le),de.extend(te.node,te.offset)):(le.setEnd(te.node,te.offset),de.addRange(le))}}}}for(Ce=[],de=j;de=de.parentNode;)de.nodeType===1&&Ce.push({element:de,left:de.scrollLeft,top:de.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<Ce.length;j++){var Se=Ce[j];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}hv=!!dC,pC=dC=null}finally{Mt=C,F.p=x,R.T=m}}u.current=d,pr=2}}function O3(){if(pr===2){pr=0;var u=Po,d=ju,m=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||m){m=R.T,R.T=null;var x=F.p;F.p=2;var C=Mt;Mt|=4;try{l3(u,d.alternate,d)}finally{Mt=C,F.p=x,R.T=m}}pr=3}}function _3(){if(pr===4||pr===3){pr=0,qe();var u=Po,d=ju,m=Vu,x=b3;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?pr=5:(pr=0,ju=Po=null,R3(u,u.pendingLanes));var C=u.pendingLanes;if(C===0&&(Mo=null),xw(m),d=d.stateNode,pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(ti,d,void 0,(d.current.flags&128)===128)}catch{}if(x!==null){d=R.T,C=F.p,F.p=2,R.T=null;try{for(var $=u.onRecoverableError,M=0;M<x.length;M++){var j=x[M];$(j.value,{componentStack:j.stack})}}finally{R.T=d,F.p=C}}(Vu&3)!==0&&ev(),js(u),C=u.pendingLanes,(m&4194090)!==0&&(C&42)!==0?u===JS?Cd++:(Cd=0,JS=u):Cd=0,Td(0)}}function R3(u,d){(u.pooledCacheLanes&=d)===0&&(d=u.pooledCache,d!=null&&(u.pooledCache=null,rd(d)))}function ev(u){return N3(),O3(),_3(),D3()}function D3(){if(pr!==5)return!1;var u=Po,d=ZS;ZS=0;var m=xw(Vu),x=R.T,C=F.p;try{F.p=32>m?32:m,R.T=null,m=QS,QS=null;var $=Po,M=Vu;if(pr=0,ju=Po=null,Vu=0,(Mt&6)!==0)throw Error(r(331));var j=Mt;if(Mt|=4,y3($.current),p3($,$.current,M,m),Mt=j,Td(0,!1),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(ti,$)}catch{}return!0}finally{F.p=C,R.T=x,R3(u,d)}}function M3(u,d,m){d=Bi(m,d),d=OS(u.stateNode,d,2),u=Ao(u,d,2),u!==null&&(jh(u,2),js(u))}function Wt(u,d,m){if(u.tag===3)M3(u,u,m);else for(;d!==null;){if(d.tag===3){M3(d,u,m);break}else if(d.tag===1){var x=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Mo===null||!Mo.has(x))){u=Bi(m,u),m=BP(2),x=Ao(d,m,2),x!==null&&(zP(m,x,d,u),jh(x,2),js(x));break}}d=d.return}}function rC(u,d,m){var x=u.pingCache;if(x===null){x=u.pingCache=new Lte;var C=new Set;x.set(d,C)}else C=x.get(d),C===void 0&&(C=new Set,x.set(d,C));C.has(m)||(HS=!0,C.add(m),u=Vte.bind(null,u,d,m),d.then(u,u))}function Vte(u,d,m){var x=u.pingCache;x!==null&&x.delete(d),u.pingedLanes|=u.suspendedLanes&m,u.warmLanes&=~m,Yt===u&&(wt&m)===m&&(gn===4||gn===3&&(wt&62914560)===wt&&300>Xe()-YS?(Mt&2)===0&&Uu(u,0):KS|=m,zu===wt&&(zu=0)),js(u)}function P3(u,d){d===0&&(d=_D()),u=ku(u,d),u!==null&&(jh(u,d),js(u))}function Ute(u){var d=u.memoizedState,m=0;d!==null&&(m=d.retryLane),P3(u,m)}function Wte(u,d){var m=0;switch(u.tag){case 13:var x=u.stateNode,C=u.memoizedState;C!==null&&(m=C.retryLane);break;case 19:x=u.stateNode;break;case 22:x=u.stateNode._retryCache;break;default:throw Error(r(314))}x!==null&&x.delete(d),P3(u,m)}function Gte(u,d){return Ge(u,d)}var tv=null,Gu=null,iC=!1,nv=!1,sC=!1,Zl=0;function js(u){u!==Gu&&u.next===null&&(Gu===null?tv=Gu=u:Gu=Gu.next=u),nv=!0,iC||(iC=!0,Hte())}function Td(u,d){if(!sC&&nv){sC=!0;do for(var m=!1,x=tv;x!==null;){if(u!==0){var C=x.pendingLanes;if(C===0)var $=0;else{var M=x.suspendedLanes,j=x.pingedLanes;$=(1<<31-Wn(42|u)+1)-1,$&=C&~(M&~j),$=$&201326741?$&201326741|1:$?$|2:0}$!==0&&(m=!0,z3(x,$))}else $=wt,$=ly(x,x===Yt?$:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),($&3)===0||zh(x,$)||(m=!0,z3(x,$));x=x.next}while(m);sC=!1}}function qte(){L3()}function L3(){nv=iC=!1;var u=0;Zl!==0&&(tne()&&(u=Zl),Zl=0);for(var d=Xe(),m=null,x=tv;x!==null;){var C=x.next,$=F3(x,d);$===0?(x.next=null,m===null?tv=C:m.next=C,C===null&&(Gu=m)):(m=x,(u!==0||($&3)!==0)&&(nv=!0)),x=C}Td(u)}function F3(u,d){for(var m=u.suspendedLanes,x=u.pingedLanes,C=u.expirationTimes,$=u.pendingLanes&-62914561;0<$;){var M=31-Wn($),j=1<<M,Q=C[M];Q===-1?((j&m)===0||(j&x)!==0)&&(C[M]=vee(j,d)):Q<=d&&(u.expiredLanes|=j),$&=~j}if(d=Yt,m=wt,m=ly(u,u===d?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),x=u.callbackNode,m===0||u===d&&(Pt===2||Pt===9)||u.cancelPendingCommit!==null)return x!==null&&x!==null&&ze(x),u.callbackNode=null,u.callbackPriority=0;if((m&3)===0||zh(u,m)){if(d=m&-m,d===u.callbackPriority)return d;switch(x!==null&&ze(x),xw(m)){case 2:case 8:m=Xt;break;case 32:m=kn;break;case 268435456:m=Jr;break;default:m=kn}return x=B3.bind(null,u),m=Ge(m,x),u.callbackPriority=d,u.callbackNode=m,d}return x!==null&&x!==null&&ze(x),u.callbackPriority=2,u.callbackNode=null,2}function B3(u,d){if(pr!==0&&pr!==5)return u.callbackNode=null,u.callbackPriority=0,null;var m=u.callbackNode;if(ev()&&u.callbackNode!==m)return null;var x=wt;return x=ly(u,u===Yt?x:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),x===0?null:(w3(u,x,d),F3(u,Xe()),u.callbackNode!=null&&u.callbackNode===m?B3.bind(null,u):null)}function z3(u,d){if(ev())return null;w3(u,d,!0)}function Hte(){rne(function(){(Mt&6)!==0?Ge(Un,qte):L3()})}function aC(){return Zl===0&&(Zl=OD()),Zl}function j3(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:dy(""+u)}function V3(u,d){var m=d.ownerDocument.createElement("input");return m.name=d.name,m.value=d.value,u.id&&m.setAttribute("form",u.id),d.parentNode.insertBefore(m,d),u=new FormData(u),m.parentNode.removeChild(m),u}function Kte(u,d,m,x,C){if(d==="submit"&&m&&m.stateNode===C){var $=j3((C[ni]||null).action),M=x.submitter;M&&(d=(d=M[ni]||null)?j3(d.formAction):M.getAttribute("formAction"),d!==null&&($=d,M=null));var j=new yy("action","action",null,x,C);u.push({event:j,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(Zl!==0){var Q=M?V3(C,M):new FormData(C);AS(m,{pending:!0,data:Q,method:C.method,action:$},null,Q)}}else typeof $=="function"&&(j.preventDefault(),Q=M?V3(C,M):new FormData(C),AS(m,{pending:!0,data:Q,method:C.method,action:$},$,Q))},currentTarget:C}]})}}for(var oC=0;oC<Gw.length;oC++){var lC=Gw[oC],Xte=lC.toLowerCase(),Yte=lC[0].toUpperCase()+lC.slice(1);ds(Xte,"on"+Yte)}ds(wM,"onAnimationEnd"),ds(SM,"onAnimationIteration"),ds(CM,"onAnimationStart"),ds("dblclick","onDoubleClick"),ds("focusin","onFocus"),ds("focusout","onBlur"),ds(dte,"onTransitionRun"),ds(pte,"onTransitionStart"),ds(mte,"onTransitionCancel"),ds(TM,"onTransitionEnd"),mu("onMouseEnter",["mouseout","mouseover"]),mu("onMouseLeave",["mouseout","mouseover"]),mu("onPointerEnter",["pointerout","pointerover"]),mu("onPointerLeave",["pointerout","pointerover"]),Ml("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ml("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ml("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ml("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ml("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ml("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zte=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kd));function U3(u,d){d=(d&4)!==0;for(var m=0;m<u.length;m++){var x=u[m],C=x.event;x=x.listeners;e:{var $=void 0;if(d)for(var M=x.length-1;0<=M;M--){var j=x[M],Q=j.instance,ue=j.currentTarget;if(j=j.listener,Q!==$&&C.isPropagationStopped())break e;$=j,C.currentTarget=ue;try{$(C)}catch(we){Uy(we)}C.currentTarget=null,$=Q}else for(M=0;M<x.length;M++){if(j=x[M],Q=j.instance,ue=j.currentTarget,j=j.listener,Q!==$&&C.isPropagationStopped())break e;$=j,C.currentTarget=ue;try{$(C)}catch(we){Uy(we)}C.currentTarget=null,$=Q}}}}function pt(u,d){var m=d[ww];m===void 0&&(m=d[ww]=new Set);var x=u+"__bubble";m.has(x)||(W3(d,u,2,!1),m.add(x))}function cC(u,d,m){var x=0;d&&(x|=4),W3(m,u,x,d)}var rv="_reactListening"+Math.random().toString(36).slice(2);function uC(u){if(!u[rv]){u[rv]=!0,LD.forEach(function(m){m!=="selectionchange"&&(Zte.has(m)||cC(m,!1,u),cC(m,!0,u))});var d=u.nodeType===9?u:u.ownerDocument;d===null||d[rv]||(d[rv]=!0,cC("selectionchange",!1,d))}}function W3(u,d,m,x){switch(pL(d)){case 2:var C=Tne;break;case 8:C=kne;break;default:C=TC}m=C.bind(null,d,m,u),C=void 0,!_w||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(C=!0),x?C!==void 0?u.addEventListener(d,m,{capture:!0,passive:C}):u.addEventListener(d,m,!0):C!==void 0?u.addEventListener(d,m,{passive:C}):u.addEventListener(d,m,!1)}function fC(u,d,m,x,C){var $=x;if((d&1)===0&&(d&2)===0&&x!==null)e:for(;;){if(x===null)return;var M=x.tag;if(M===3||M===4){var j=x.stateNode.containerInfo;if(j===C)break;if(M===4)for(M=x.return;M!==null;){var Q=M.tag;if((Q===3||Q===4)&&M.stateNode.containerInfo===C)return;M=M.return}for(;j!==null;){if(M=hu(j),M===null)return;if(Q=M.tag,Q===5||Q===6||Q===26||Q===27){x=$=M;continue e}j=j.parentNode}}x=x.return}ZD(function(){var ue=$,we=Nw(m),Ce=[];e:{var he=kM.get(u);if(he!==void 0){var de=yy,et=u;switch(u){case"keypress":if(my(m)===0)break e;case"keydown":case"keyup":de=Gee;break;case"focusin":et="focus",de=Pw;break;case"focusout":et="blur",de=Pw;break;case"beforeblur":case"afterblur":de=Pw;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=eM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=Ree;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=Kee;break;case wM:case SM:case CM:de=Pee;break;case TM:de=Yee;break;case"scroll":case"scrollend":de=Oee;break;case"wheel":de=Qee;break;case"copy":case"cut":case"paste":de=Fee;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=nM;break;case"toggle":case"beforetoggle":de=ete}var He=(d&4)!==0,zt=!He&&(u==="scroll"||u==="scrollend"),oe=He?he!==null?he+"Capture":null:he;He=[];for(var te=ue,le;te!==null;){var Se=te;if(le=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||le===null||oe===null||(Se=Wh(te,oe),Se!=null&&He.push(Ad(te,Se,le))),zt)break;te=te.return}0<He.length&&(he=new de(he,et,null,m,we),Ce.push({event:he,listeners:He}))}}if((d&7)===0){e:{if(he=u==="mouseover"||u==="pointerover",de=u==="mouseout"||u==="pointerout",he&&m!==Iw&&(et=m.relatedTarget||m.fromElement)&&(hu(et)||et[fu]))break e;if((de||he)&&(he=we.window===we?we:(he=we.ownerDocument)?he.defaultView||he.parentWindow:window,de?(et=m.relatedTarget||m.toElement,de=ue,et=et?hu(et):null,et!==null&&(zt=s(et),He=et.tag,et!==zt||He!==5&&He!==27&&He!==6)&&(et=null)):(de=null,et=ue),de!==et)){if(He=eM,Se="onMouseLeave",oe="onMouseEnter",te="mouse",(u==="pointerout"||u==="pointerover")&&(He=nM,Se="onPointerLeave",oe="onPointerEnter",te="pointer"),zt=de==null?he:Uh(de),le=et==null?he:Uh(et),he=new He(Se,te+"leave",de,m,we),he.target=zt,he.relatedTarget=le,Se=null,hu(we)===ue&&(He=new He(oe,te+"enter",et,m,we),He.target=le,He.relatedTarget=zt,Se=He),zt=Se,de&&et)t:{for(He=de,oe=et,te=0,le=He;le;le=qu(le))te++;for(le=0,Se=oe;Se;Se=qu(Se))le++;for(;0<te-le;)He=qu(He),te--;for(;0<le-te;)oe=qu(oe),le--;for(;te--;){if(He===oe||oe!==null&&He===oe.alternate)break t;He=qu(He),oe=qu(oe)}He=null}else He=null;de!==null&&G3(Ce,he,de,He,!1),et!==null&&zt!==null&&G3(Ce,zt,et,He,!0)}}e:{if(he=ue?Uh(ue):window,de=he.nodeName&&he.nodeName.toLowerCase(),de==="select"||de==="input"&&he.type==="file")var Pe=uM;else if(lM(he))if(fM)Pe=ute;else{Pe=lte;var ht=ote}else de=he.nodeName,!de||de.toLowerCase()!=="input"||he.type!=="checkbox"&&he.type!=="radio"?ue&&$w(ue.elementType)&&(Pe=uM):Pe=cte;if(Pe&&(Pe=Pe(u,ue))){cM(Ce,Pe,m,we);break e}ht&&ht(u,he,ue),u==="focusout"&&ue&&he.type==="number"&&ue.memoizedProps.value!=null&&Ew(he,"number",he.value)}switch(ht=ue?Uh(ue):window,u){case"focusin":(lM(ht)||ht.contentEditable==="true")&&(Su=ht,Vw=ue,Qh=null);break;case"focusout":Qh=Vw=Su=null;break;case"mousedown":Uw=!0;break;case"contextmenu":case"mouseup":case"dragend":Uw=!1,bM(Ce,m,we);break;case"selectionchange":if(hte)break;case"keydown":case"keyup":bM(Ce,m,we)}var Ve;if(Fw)e:{switch(u){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else wu?aM(u,m)&&(Ye="onCompositionEnd"):u==="keydown"&&m.keyCode===229&&(Ye="onCompositionStart");Ye&&(rM&&m.locale!=="ko"&&(wu||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&wu&&(Ve=QD()):(So=we,Rw="value"in So?So.value:So.textContent,wu=!0)),ht=iv(ue,Ye),0<ht.length&&(Ye=new tM(Ye,u,null,m,we),Ce.push({event:Ye,listeners:ht}),Ve?Ye.data=Ve:(Ve=oM(m),Ve!==null&&(Ye.data=Ve)))),(Ve=nte?rte(u,m):ite(u,m))&&(Ye=iv(ue,"onBeforeInput"),0<Ye.length&&(ht=new tM("onBeforeInput","beforeinput",null,m,we),Ce.push({event:ht,listeners:Ye}),ht.data=Ve)),Kte(Ce,u,ue,m,we)}U3(Ce,d)})}function Ad(u,d,m){return{instance:u,listener:d,currentTarget:m}}function iv(u,d){for(var m=d+"Capture",x=[];u!==null;){var C=u,$=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||$===null||(C=Wh(u,m),C!=null&&x.unshift(Ad(u,C,$)),C=Wh(u,d),C!=null&&x.push(Ad(u,C,$))),u.tag===3)return x;u=u.return}return[]}function qu(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function G3(u,d,m,x,C){for(var $=d._reactName,M=[];m!==null&&m!==x;){var j=m,Q=j.alternate,ue=j.stateNode;if(j=j.tag,Q!==null&&Q===x)break;j!==5&&j!==26&&j!==27||ue===null||(Q=ue,C?(ue=Wh(m,$),ue!=null&&M.unshift(Ad(m,ue,Q))):C||(ue=Wh(m,$),ue!=null&&M.push(Ad(m,ue,Q)))),m=m.return}M.length!==0&&u.push({event:d,listeners:M})}var Qte=/\r\n?/g,Jte=/\u0000|\uFFFD/g;function q3(u){return(typeof u=="string"?u:""+u).replace(Qte,`
`).replace(Jte,"")}function H3(u,d){return d=q3(d),q3(u)===d}function sv(){}function Bt(u,d,m,x,C,$){switch(m){case"children":typeof x=="string"?d==="body"||d==="textarea"&&x===""||vu(u,x):(typeof x=="number"||typeof x=="bigint")&&d!=="body"&&vu(u,""+x);break;case"className":uy(u,"class",x);break;case"tabIndex":uy(u,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":uy(u,m,x);break;case"style":XD(u,x,$);break;case"data":if(d!=="object"){uy(u,"data",x);break}case"src":case"href":if(x===""&&(d!=="a"||m!=="href")){u.removeAttribute(m);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){u.removeAttribute(m);break}x=dy(""+x),u.setAttribute(m,x);break;case"action":case"formAction":if(typeof x=="function"){u.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof $=="function"&&(m==="formAction"?(d!=="input"&&Bt(u,d,"name",C.name,C,null),Bt(u,d,"formEncType",C.formEncType,C,null),Bt(u,d,"formMethod",C.formMethod,C,null),Bt(u,d,"formTarget",C.formTarget,C,null)):(Bt(u,d,"encType",C.encType,C,null),Bt(u,d,"method",C.method,C,null),Bt(u,d,"target",C.target,C,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){u.removeAttribute(m);break}x=dy(""+x),u.setAttribute(m,x);break;case"onClick":x!=null&&(u.onclick=sv);break;case"onScroll":x!=null&&pt("scroll",u);break;case"onScrollEnd":x!=null&&pt("scrollend",u);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(r(61));if(m=x.__html,m!=null){if(C.children!=null)throw Error(r(60));u.innerHTML=m}}break;case"multiple":u.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":u.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){u.removeAttribute("xlink:href");break}m=dy(""+x),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?u.setAttribute(m,""+x):u.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?u.setAttribute(m,""):u.removeAttribute(m);break;case"capture":case"download":x===!0?u.setAttribute(m,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?u.setAttribute(m,x):u.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?u.setAttribute(m,x):u.removeAttribute(m);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?u.removeAttribute(m):u.setAttribute(m,x);break;case"popover":pt("beforetoggle",u),pt("toggle",u),cy(u,"popover",x);break;case"xlinkActuate":ba(u,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":ba(u,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":ba(u,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":ba(u,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":ba(u,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":ba(u,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":ba(u,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":ba(u,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":ba(u,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":cy(u,"is",x);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=Iee.get(m)||m,cy(u,m,x))}}function hC(u,d,m,x,C,$){switch(m){case"style":XD(u,x,$);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(r(61));if(m=x.__html,m!=null){if(C.children!=null)throw Error(r(60));u.innerHTML=m}}break;case"children":typeof x=="string"?vu(u,x):(typeof x=="number"||typeof x=="bigint")&&vu(u,""+x);break;case"onScroll":x!=null&&pt("scroll",u);break;case"onScrollEnd":x!=null&&pt("scrollend",u);break;case"onClick":x!=null&&(u.onclick=sv);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!FD.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(C=m.endsWith("Capture"),d=m.slice(2,C?m.length-7:void 0),$=u[ni]||null,$=$!=null?$[m]:null,typeof $=="function"&&u.removeEventListener(d,$,C),typeof x=="function")){typeof $!="function"&&$!==null&&(m in u?u[m]=null:u.hasAttribute(m)&&u.removeAttribute(m)),u.addEventListener(d,x,C);break e}m in u?u[m]=x:x===!0?u.setAttribute(m,""):cy(u,m,x)}}}function mr(u,d,m){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pt("error",u),pt("load",u);var x=!1,C=!1,$;for($ in m)if(m.hasOwnProperty($)){var M=m[$];if(M!=null)switch($){case"src":x=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Bt(u,d,$,M,m,null)}}C&&Bt(u,d,"srcSet",m.srcSet,m,null),x&&Bt(u,d,"src",m.src,m,null);return;case"input":pt("invalid",u);var j=$=M=C=null,Q=null,ue=null;for(x in m)if(m.hasOwnProperty(x)){var we=m[x];if(we!=null)switch(x){case"name":C=we;break;case"type":M=we;break;case"checked":Q=we;break;case"defaultChecked":ue=we;break;case"value":$=we;break;case"defaultValue":j=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(r(137,d));break;default:Bt(u,d,x,we,m,null)}}GD(u,$,j,Q,ue,M,C,!1),fy(u);return;case"select":pt("invalid",u),x=M=$=null;for(C in m)if(m.hasOwnProperty(C)&&(j=m[C],j!=null))switch(C){case"value":$=j;break;case"defaultValue":M=j;break;case"multiple":x=j;default:Bt(u,d,C,j,m,null)}d=$,m=M,u.multiple=!!x,d!=null?yu(u,!!x,d,!1):m!=null&&yu(u,!!x,m,!0);return;case"textarea":pt("invalid",u),$=C=x=null;for(M in m)if(m.hasOwnProperty(M)&&(j=m[M],j!=null))switch(M){case"value":x=j;break;case"defaultValue":C=j;break;case"children":$=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(91));break;default:Bt(u,d,M,j,m,null)}HD(u,x,C,$),fy(u);return;case"option":for(Q in m)if(m.hasOwnProperty(Q)&&(x=m[Q],x!=null))switch(Q){case"selected":u.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:Bt(u,d,Q,x,m,null)}return;case"dialog":pt("beforetoggle",u),pt("toggle",u),pt("cancel",u),pt("close",u);break;case"iframe":case"object":pt("load",u);break;case"video":case"audio":for(x=0;x<kd.length;x++)pt(kd[x],u);break;case"image":pt("error",u),pt("load",u);break;case"details":pt("toggle",u);break;case"embed":case"source":case"link":pt("error",u),pt("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ue in m)if(m.hasOwnProperty(ue)&&(x=m[ue],x!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Bt(u,d,ue,x,m,null)}return;default:if($w(d)){for(we in m)m.hasOwnProperty(we)&&(x=m[we],x!==void 0&&hC(u,d,we,x,m,void 0));return}}for(j in m)m.hasOwnProperty(j)&&(x=m[j],x!=null&&Bt(u,d,j,x,m,null))}function ene(u,d,m,x){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,$=null,M=null,j=null,Q=null,ue=null,we=null;for(de in m){var Ce=m[de];if(m.hasOwnProperty(de)&&Ce!=null)switch(de){case"checked":break;case"value":break;case"defaultValue":Q=Ce;default:x.hasOwnProperty(de)||Bt(u,d,de,null,x,Ce)}}for(var he in x){var de=x[he];if(Ce=m[he],x.hasOwnProperty(he)&&(de!=null||Ce!=null))switch(he){case"type":$=de;break;case"name":C=de;break;case"checked":ue=de;break;case"defaultChecked":we=de;break;case"value":M=de;break;case"defaultValue":j=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,d));break;default:de!==Ce&&Bt(u,d,he,de,x,Ce)}}Aw(u,M,j,Q,ue,we,$,C);return;case"select":de=M=j=he=null;for($ in m)if(Q=m[$],m.hasOwnProperty($)&&Q!=null)switch($){case"value":break;case"multiple":de=Q;default:x.hasOwnProperty($)||Bt(u,d,$,null,x,Q)}for(C in x)if($=x[C],Q=m[C],x.hasOwnProperty(C)&&($!=null||Q!=null))switch(C){case"value":he=$;break;case"defaultValue":j=$;break;case"multiple":M=$;default:$!==Q&&Bt(u,d,C,$,x,Q)}d=j,m=M,x=de,he!=null?yu(u,!!m,he,!1):!!x!=!!m&&(d!=null?yu(u,!!m,d,!0):yu(u,!!m,m?[]:"",!1));return;case"textarea":de=he=null;for(j in m)if(C=m[j],m.hasOwnProperty(j)&&C!=null&&!x.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:Bt(u,d,j,null,x,C)}for(M in x)if(C=x[M],$=m[M],x.hasOwnProperty(M)&&(C!=null||$!=null))switch(M){case"value":he=C;break;case"defaultValue":de=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(r(91));break;default:C!==$&&Bt(u,d,M,C,x,$)}qD(u,he,de);return;case"option":for(var et in m)if(he=m[et],m.hasOwnProperty(et)&&he!=null&&!x.hasOwnProperty(et))switch(et){case"selected":u.selected=!1;break;default:Bt(u,d,et,null,x,he)}for(Q in x)if(he=x[Q],de=m[Q],x.hasOwnProperty(Q)&&he!==de&&(he!=null||de!=null))switch(Q){case"selected":u.selected=he&&typeof he!="function"&&typeof he!="symbol";break;default:Bt(u,d,Q,he,x,de)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in m)he=m[He],m.hasOwnProperty(He)&&he!=null&&!x.hasOwnProperty(He)&&Bt(u,d,He,null,x,he);for(ue in x)if(he=x[ue],de=m[ue],x.hasOwnProperty(ue)&&he!==de&&(he!=null||de!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(137,d));break;default:Bt(u,d,ue,he,x,de)}return;default:if($w(d)){for(var zt in m)he=m[zt],m.hasOwnProperty(zt)&&he!==void 0&&!x.hasOwnProperty(zt)&&hC(u,d,zt,void 0,x,he);for(we in x)he=x[we],de=m[we],!x.hasOwnProperty(we)||he===de||he===void 0&&de===void 0||hC(u,d,we,he,x,de);return}}for(var oe in m)he=m[oe],m.hasOwnProperty(oe)&&he!=null&&!x.hasOwnProperty(oe)&&Bt(u,d,oe,null,x,he);for(Ce in x)he=x[Ce],de=m[Ce],!x.hasOwnProperty(Ce)||he===de||he==null&&de==null||Bt(u,d,Ce,he,x,de)}var dC=null,pC=null;function av(u){return u.nodeType===9?u:u.ownerDocument}function K3(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function X3(u,d){if(u===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&d==="foreignObject"?0:u}function mC(u,d){return u==="textarea"||u==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var gC=null;function tne(){var u=window.event;return u&&u.type==="popstate"?u===gC?!1:(gC=u,!0):(gC=null,!1)}var Y3=typeof setTimeout=="function"?setTimeout:void 0,nne=typeof clearTimeout=="function"?clearTimeout:void 0,Z3=typeof Promise=="function"?Promise:void 0,rne=typeof queueMicrotask=="function"?queueMicrotask:typeof Z3<"u"?function(u){return Z3.resolve(null).then(u).catch(ine)}:Y3;function ine(u){setTimeout(function(){throw u})}function Fo(u){return u==="head"}function Q3(u,d){var m=d,x=0,C=0;do{var $=m.nextSibling;if(u.removeChild(m),$&&$.nodeType===8)if(m=$.data,m==="/$"){if(0<x&&8>x){m=x;var M=u.ownerDocument;if(m&1&&Ed(M.documentElement),m&2&&Ed(M.body),m&4)for(m=M.head,Ed(m),M=m.firstChild;M;){var j=M.nextSibling,Q=M.nodeName;M[Vh]||Q==="SCRIPT"||Q==="STYLE"||Q==="LINK"&&M.rel.toLowerCase()==="stylesheet"||m.removeChild(M),M=j}}if(C===0){u.removeChild($),Md(d);return}C--}else m==="$"||m==="$?"||m==="$!"?C++:x=m.charCodeAt(0)-48;else x=0;m=$}while(m);Md(d)}function yC(u){var d=u.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var m=d;switch(d=d.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":yC(m),Sw(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}u.removeChild(m)}}function sne(u,d,m,x){for(;u.nodeType===1;){var C=m;if(u.nodeName.toLowerCase()!==d.toLowerCase()){if(!x&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(x){if(!u[Vh])switch(d){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if($=u.getAttribute("rel"),$==="stylesheet"&&u.hasAttribute("data-precedence"))break;if($!==C.rel||u.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||u.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||u.getAttribute("title")!==(C.title==null?null:C.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if($=u.getAttribute("src"),($!==(C.src==null?null:C.src)||u.getAttribute("type")!==(C.type==null?null:C.type)||u.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&$&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(d==="input"&&u.type==="hidden"){var $=C.name==null?null:""+C.name;if(C.type==="hidden"&&u.getAttribute("name")===$)return u}else return u;if(u=ms(u.nextSibling),u===null)break}return null}function ane(u,d,m){if(d==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!m||(u=ms(u.nextSibling),u===null))return null;return u}function vC(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState==="complete"}function one(u,d){var m=u.ownerDocument;if(u.data!=="$?"||m.readyState==="complete")d();else{var x=function(){d(),m.removeEventListener("DOMContentLoaded",x)};m.addEventListener("DOMContentLoaded",x),u._reactRetry=x}}function ms(u){for(;u!=null;u=u.nextSibling){var d=u.nodeType;if(d===1||d===3)break;if(d===8){if(d=u.data,d==="$"||d==="$!"||d==="$?"||d==="F!"||d==="F")break;if(d==="/$")return null}}return u}var bC=null;function J3(u){u=u.previousSibling;for(var d=0;u;){if(u.nodeType===8){var m=u.data;if(m==="$"||m==="$!"||m==="$?"){if(d===0)return u;d--}else m==="/$"&&d++}u=u.previousSibling}return null}function eL(u,d,m){switch(d=av(m),u){case"html":if(u=d.documentElement,!u)throw Error(r(452));return u;case"head":if(u=d.head,!u)throw Error(r(453));return u;case"body":if(u=d.body,!u)throw Error(r(454));return u;default:throw Error(r(451))}}function Ed(u){for(var d=u.attributes;d.length;)u.removeAttributeNode(d[0]);Sw(u)}var Gi=new Map,tL=new Set;function ov(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var Ra=F.d;F.d={f:lne,r:cne,D:une,C:fne,L:hne,m:dne,X:mne,S:pne,M:gne};function lne(){var u=Ra.f(),d=Qy();return u||d}function cne(u){var d=du(u);d!==null&&d.tag===5&&d.type==="form"?wP(d):Ra.r(u)}var Hu=typeof document>"u"?null:document;function nL(u,d,m){var x=Hu;if(x&&typeof d=="string"&&d){var C=Fi(d);C='link[rel="'+u+'"][href="'+C+'"]',typeof m=="string"&&(C+='[crossorigin="'+m+'"]'),tL.has(C)||(tL.add(C),u={rel:u,crossOrigin:m,href:d},x.querySelector(C)===null&&(d=x.createElement("link"),mr(d,"link",u),tr(d),x.head.appendChild(d)))}}function une(u){Ra.D(u),nL("dns-prefetch",u,null)}function fne(u,d){Ra.C(u,d),nL("preconnect",u,d)}function hne(u,d,m){Ra.L(u,d,m);var x=Hu;if(x&&u&&d){var C='link[rel="preload"][as="'+Fi(d)+'"]';d==="image"&&m&&m.imageSrcSet?(C+='[imagesrcset="'+Fi(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(C+='[imagesizes="'+Fi(m.imageSizes)+'"]')):C+='[href="'+Fi(u)+'"]';var $=C;switch(d){case"style":$=Ku(u);break;case"script":$=Xu(u)}Gi.has($)||(u=f({rel:"preload",href:d==="image"&&m&&m.imageSrcSet?void 0:u,as:d},m),Gi.set($,u),x.querySelector(C)!==null||d==="style"&&x.querySelector($d($))||d==="script"&&x.querySelector(Id($))||(d=x.createElement("link"),mr(d,"link",u),tr(d),x.head.appendChild(d)))}}function dne(u,d){Ra.m(u,d);var m=Hu;if(m&&u){var x=d&&typeof d.as=="string"?d.as:"script",C='link[rel="modulepreload"][as="'+Fi(x)+'"][href="'+Fi(u)+'"]',$=C;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":$=Xu(u)}if(!Gi.has($)&&(u=f({rel:"modulepreload",href:u},d),Gi.set($,u),m.querySelector(C)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Id($)))return}x=m.createElement("link"),mr(x,"link",u),tr(x),m.head.appendChild(x)}}}function pne(u,d,m){Ra.S(u,d,m);var x=Hu;if(x&&u){var C=pu(x).hoistableStyles,$=Ku(u);d=d||"default";var M=C.get($);if(!M){var j={loading:0,preload:null};if(M=x.querySelector($d($)))j.loading=5;else{u=f({rel:"stylesheet",href:u,"data-precedence":d},m),(m=Gi.get($))&&xC(u,m);var Q=M=x.createElement("link");tr(Q),mr(Q,"link",u),Q._p=new Promise(function(ue,we){Q.onload=ue,Q.onerror=we}),Q.addEventListener("load",function(){j.loading|=1}),Q.addEventListener("error",function(){j.loading|=2}),j.loading|=4,lv(M,d,x)}M={type:"stylesheet",instance:M,count:1,state:j},C.set($,M)}}}function mne(u,d){Ra.X(u,d);var m=Hu;if(m&&u){var x=pu(m).hoistableScripts,C=Xu(u),$=x.get(C);$||($=m.querySelector(Id(C)),$||(u=f({src:u,async:!0},d),(d=Gi.get(C))&&wC(u,d),$=m.createElement("script"),tr($),mr($,"link",u),m.head.appendChild($)),$={type:"script",instance:$,count:1,state:null},x.set(C,$))}}function gne(u,d){Ra.M(u,d);var m=Hu;if(m&&u){var x=pu(m).hoistableScripts,C=Xu(u),$=x.get(C);$||($=m.querySelector(Id(C)),$||(u=f({src:u,async:!0,type:"module"},d),(d=Gi.get(C))&&wC(u,d),$=m.createElement("script"),tr($),mr($,"link",u),m.head.appendChild($)),$={type:"script",instance:$,count:1,state:null},x.set(C,$))}}function rL(u,d,m,x){var C=(C=ve.current)?ov(C):null;if(!C)throw Error(r(446));switch(u){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(d=Ku(m.href),m=pu(C).hoistableStyles,x=m.get(d),x||(x={type:"style",instance:null,count:0,state:null},m.set(d,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){u=Ku(m.href);var $=pu(C).hoistableStyles,M=$.get(u);if(M||(C=C.ownerDocument||C,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},$.set(u,M),($=C.querySelector($d(u)))&&!$._p&&(M.instance=$,M.state.loading=5),Gi.has(u)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Gi.set(u,m),$||yne(C,u,m,M.state))),d&&x===null)throw Error(r(528,""));return M}if(d&&x!==null)throw Error(r(529,""));return null;case"script":return d=m.async,m=m.src,typeof m=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=Xu(m),m=pu(C).hoistableScripts,x=m.get(d),x||(x={type:"script",instance:null,count:0,state:null},m.set(d,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,u))}}function Ku(u){return'href="'+Fi(u)+'"'}function $d(u){return'link[rel="stylesheet"]['+u+"]"}function iL(u){return f({},u,{"data-precedence":u.precedence,precedence:null})}function yne(u,d,m,x){u.querySelector('link[rel="preload"][as="style"]['+d+"]")?x.loading=1:(d=u.createElement("link"),x.preload=d,d.addEventListener("load",function(){return x.loading|=1}),d.addEventListener("error",function(){return x.loading|=2}),mr(d,"link",m),tr(d),u.head.appendChild(d))}function Xu(u){return'[src="'+Fi(u)+'"]'}function Id(u){return"script[async]"+u}function sL(u,d,m){if(d.count++,d.instance===null)switch(d.type){case"style":var x=u.querySelector('style[data-href~="'+Fi(m.href)+'"]');if(x)return d.instance=x,tr(x),x;var C=f({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return x=(u.ownerDocument||u).createElement("style"),tr(x),mr(x,"style",C),lv(x,m.precedence,u),d.instance=x;case"stylesheet":C=Ku(m.href);var $=u.querySelector($d(C));if($)return d.state.loading|=4,d.instance=$,tr($),$;x=iL(m),(C=Gi.get(C))&&xC(x,C),$=(u.ownerDocument||u).createElement("link"),tr($);var M=$;return M._p=new Promise(function(j,Q){M.onload=j,M.onerror=Q}),mr($,"link",x),d.state.loading|=4,lv($,m.precedence,u),d.instance=$;case"script":return $=Xu(m.src),(C=u.querySelector(Id($)))?(d.instance=C,tr(C),C):(x=m,(C=Gi.get($))&&(x=f({},m),wC(x,C)),u=u.ownerDocument||u,C=u.createElement("script"),tr(C),mr(C,"link",x),u.head.appendChild(C),d.instance=C);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(x=d.instance,d.state.loading|=4,lv(x,m.precedence,u));return d.instance}function lv(u,d,m){for(var x=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=x.length?x[x.length-1]:null,$=C,M=0;M<x.length;M++){var j=x[M];if(j.dataset.precedence===d)$=j;else if($!==C)break}$?$.parentNode.insertBefore(u,$.nextSibling):(d=m.nodeType===9?m.head:m,d.insertBefore(u,d.firstChild))}function xC(u,d){u.crossOrigin==null&&(u.crossOrigin=d.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=d.referrerPolicy),u.title==null&&(u.title=d.title)}function wC(u,d){u.crossOrigin==null&&(u.crossOrigin=d.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=d.referrerPolicy),u.integrity==null&&(u.integrity=d.integrity)}var cv=null;function aL(u,d,m){if(cv===null){var x=new Map,C=cv=new Map;C.set(m,x)}else C=cv,x=C.get(m),x||(x=new Map,C.set(m,x));if(x.has(u))return x;for(x.set(u,null),m=m.getElementsByTagName(u),C=0;C<m.length;C++){var $=m[C];if(!($[Vh]||$[Er]||u==="link"&&$.getAttribute("rel")==="stylesheet")&&$.namespaceURI!=="http://www.w3.org/2000/svg"){var M=$.getAttribute(d)||"";M=u+M;var j=x.get(M);j?j.push($):x.set(M,[$])}}return x}function oL(u,d,m){u=u.ownerDocument||u,u.head.insertBefore(m,d==="title"?u.querySelector("head > title"):null)}function vne(u,d,m){if(m===1||d.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return u=d.disabled,typeof d.precedence=="string"&&u==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function lL(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}var Nd=null;function bne(){}function xne(u,d,m){if(Nd===null)throw Error(r(475));var x=Nd;if(d.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var C=Ku(m.href),$=u.querySelector($d(C));if($){u=$._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(x.count++,x=uv.bind(x),u.then(x,x)),d.state.loading|=4,d.instance=$,tr($);return}$=u.ownerDocument||u,m=iL(m),(C=Gi.get(C))&&xC(m,C),$=$.createElement("link"),tr($);var M=$;M._p=new Promise(function(j,Q){M.onload=j,M.onerror=Q}),mr($,"link",m),d.instance=$}x.stylesheets===null&&(x.stylesheets=new Map),x.stylesheets.set(d,u),(u=d.state.preload)&&(d.state.loading&3)===0&&(x.count++,d=uv.bind(x),u.addEventListener("load",d),u.addEventListener("error",d))}}function wne(){if(Nd===null)throw Error(r(475));var u=Nd;return u.stylesheets&&u.count===0&&SC(u,u.stylesheets),0<u.count?function(d){var m=setTimeout(function(){if(u.stylesheets&&SC(u,u.stylesheets),u.unsuspend){var x=u.unsuspend;u.unsuspend=null,x()}},6e4);return u.unsuspend=d,function(){u.unsuspend=null,clearTimeout(m)}}:null}function uv(){if(this.count--,this.count===0){if(this.stylesheets)SC(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var fv=null;function SC(u,d){u.stylesheets=null,u.unsuspend!==null&&(u.count++,fv=new Map,d.forEach(Sne,u),fv=null,uv.call(u))}function Sne(u,d){if(!(d.state.loading&4)){var m=fv.get(u);if(m)var x=m.get(null);else{m=new Map,fv.set(u,m);for(var C=u.querySelectorAll("link[data-precedence],style[data-precedence]"),$=0;$<C.length;$++){var M=C[$];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(m.set(M.dataset.precedence,M),x=M)}x&&m.set(null,x)}C=d.instance,M=C.getAttribute("data-precedence"),$=m.get(M)||x,$===x&&m.set(null,C),m.set(M,C),this.count++,x=uv.bind(this),C.addEventListener("load",x),C.addEventListener("error",x),$?$.parentNode.insertBefore(C,$.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(C,u.firstChild)),d.state.loading|=4}}var Od={$$typeof:T,Provider:null,Consumer:null,_currentValue:B,_currentValue2:B,_threadCount:0};function Cne(u,d,m,x,C,$,M,j){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vw(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vw(0),this.hiddenUpdates=vw(null),this.identifierPrefix=x,this.onUncaughtError=C,this.onCaughtError=$,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function cL(u,d,m,x,C,$,M,j,Q,ue,we,Ce){return u=new Cne(u,d,m,M,j,Q,ue,Ce),d=1,$===!0&&(d|=24),$=vi(3,null,null,d),u.current=$,$.stateNode=u,d=rS(),d.refCount++,u.pooledCache=d,d.refCount++,$.memoizedState={element:x,isDehydrated:m,cache:d},oS($),u}function uL(u){return u?(u=Au,u):Au}function fL(u,d,m,x,C,$){C=uL(C),x.context===null?x.context=C:x.pendingContext=C,x=ko(d),x.payload={element:m},$=$===void 0?null:$,$!==null&&(x.callback=$),m=Ao(u,x,d),m!==null&&(Ci(m,u,d),od(m,u,d))}function hL(u,d){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var m=u.retryLane;u.retryLane=m!==0&&m<d?m:d}}function CC(u,d){hL(u,d),(u=u.alternate)&&hL(u,d)}function dL(u){if(u.tag===13){var d=ku(u,67108864);d!==null&&Ci(d,u,67108864),CC(u,67108864)}}var hv=!0;function Tne(u,d,m,x){var C=R.T;R.T=null;var $=F.p;try{F.p=2,TC(u,d,m,x)}finally{F.p=$,R.T=C}}function kne(u,d,m,x){var C=R.T;R.T=null;var $=F.p;try{F.p=8,TC(u,d,m,x)}finally{F.p=$,R.T=C}}function TC(u,d,m,x){if(hv){var C=kC(x);if(C===null)fC(u,d,x,dv,m),mL(u,x);else if(Ene(C,u,d,m,x))x.stopPropagation();else if(mL(u,x),d&4&&-1<Ane.indexOf(u)){for(;C!==null;){var $=du(C);if($!==null)switch($.tag){case 3:if($=$.stateNode,$.current.memoizedState.isDehydrated){var M=va($.pendingLanes);if(M!==0){var j=$;for(j.pendingLanes|=2,j.entangledLanes|=2;M;){var Q=1<<31-Wn(M);j.entanglements[1]|=Q,M&=~Q}js($),(Mt&6)===0&&(Yy=Xe()+500,Td(0))}}break;case 13:j=ku($,2),j!==null&&Ci(j,$,2),Qy(),CC($,2)}if($=kC(x),$===null&&fC(u,d,x,dv,m),$===C)break;C=$}C!==null&&x.stopPropagation()}else fC(u,d,x,null,m)}}function kC(u){return u=Nw(u),AC(u)}var dv=null;function AC(u){if(dv=null,u=hu(u),u!==null){var d=s(u);if(d===null)u=null;else{var m=d.tag;if(m===13){if(u=a(d),u!==null)return u;u=null}else if(m===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;u=null}else d!==u&&(u=null)}}return dv=u,null}function pL(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gt()){case Un:return 2;case Xt:return 8;case kn:case cn:return 32;case Jr:return 268435456;default:return 32}default:return 32}}var EC=!1,Bo=null,zo=null,jo=null,_d=new Map,Rd=new Map,Vo=[],Ane="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mL(u,d){switch(u){case"focusin":case"focusout":Bo=null;break;case"dragenter":case"dragleave":zo=null;break;case"mouseover":case"mouseout":jo=null;break;case"pointerover":case"pointerout":_d.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rd.delete(d.pointerId)}}function Dd(u,d,m,x,C,$){return u===null||u.nativeEvent!==$?(u={blockedOn:d,domEventName:m,eventSystemFlags:x,nativeEvent:$,targetContainers:[C]},d!==null&&(d=du(d),d!==null&&dL(d)),u):(u.eventSystemFlags|=x,d=u.targetContainers,C!==null&&d.indexOf(C)===-1&&d.push(C),u)}function Ene(u,d,m,x,C){switch(d){case"focusin":return Bo=Dd(Bo,u,d,m,x,C),!0;case"dragenter":return zo=Dd(zo,u,d,m,x,C),!0;case"mouseover":return jo=Dd(jo,u,d,m,x,C),!0;case"pointerover":var $=C.pointerId;return _d.set($,Dd(_d.get($)||null,u,d,m,x,C)),!0;case"gotpointercapture":return $=C.pointerId,Rd.set($,Dd(Rd.get($)||null,u,d,m,x,C)),!0}return!1}function gL(u){var d=hu(u.target);if(d!==null){var m=s(d);if(m!==null){if(d=m.tag,d===13){if(d=a(m),d!==null){u.blockedOn=d,xee(u.priority,function(){if(m.tag===13){var x=Si();x=bw(x);var C=ku(m,x);C!==null&&Ci(C,m,x),CC(m,x)}});return}}else if(d===3&&m.stateNode.current.memoizedState.isDehydrated){u.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}u.blockedOn=null}function pv(u){if(u.blockedOn!==null)return!1;for(var d=u.targetContainers;0<d.length;){var m=kC(u.nativeEvent);if(m===null){m=u.nativeEvent;var x=new m.constructor(m.type,m);Iw=x,m.target.dispatchEvent(x),Iw=null}else return d=du(m),d!==null&&dL(d),u.blockedOn=m,!1;d.shift()}return!0}function yL(u,d,m){pv(u)&&m.delete(d)}function $ne(){EC=!1,Bo!==null&&pv(Bo)&&(Bo=null),zo!==null&&pv(zo)&&(zo=null),jo!==null&&pv(jo)&&(jo=null),_d.forEach(yL),Rd.forEach(yL)}function mv(u,d){u.blockedOn===d&&(u.blockedOn=null,EC||(EC=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,$ne)))}var gv=null;function vL(u){gv!==u&&(gv=u,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){gv===u&&(gv=null);for(var d=0;d<u.length;d+=3){var m=u[d],x=u[d+1],C=u[d+2];if(typeof x!="function"){if(AC(x||m)===null)continue;break}var $=du(m);$!==null&&(u.splice(d,3),d-=3,AS($,{pending:!0,data:C,method:m.method,action:x},x,C))}}))}function Md(u){function d(Q){return mv(Q,u)}Bo!==null&&mv(Bo,u),zo!==null&&mv(zo,u),jo!==null&&mv(jo,u),_d.forEach(d),Rd.forEach(d);for(var m=0;m<Vo.length;m++){var x=Vo[m];x.blockedOn===u&&(x.blockedOn=null)}for(;0<Vo.length&&(m=Vo[0],m.blockedOn===null);)gL(m),m.blockedOn===null&&Vo.shift();if(m=(u.ownerDocument||u).$$reactFormReplay,m!=null)for(x=0;x<m.length;x+=3){var C=m[x],$=m[x+1],M=C[ni]||null;if(typeof $=="function")M||vL(m);else if(M){var j=null;if($&&$.hasAttribute("formAction")){if(C=$,M=$[ni]||null)j=M.formAction;else if(AC(C)!==null)continue}else j=M.action;typeof j=="function"?m[x+1]=j:(m.splice(x,3),x-=3),vL(m)}}}function $C(u){this._internalRoot=u}yv.prototype.render=$C.prototype.render=function(u){var d=this._internalRoot;if(d===null)throw Error(r(409));var m=d.current,x=Si();fL(m,x,u,d,null,null)},yv.prototype.unmount=$C.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var d=u.containerInfo;fL(u.current,2,null,u,null,null),Qy(),d[fu]=null}};function yv(u){this._internalRoot=u}yv.prototype.unstable_scheduleHydration=function(u){if(u){var d=MD();u={blockedOn:null,target:u,priority:d};for(var m=0;m<Vo.length&&d!==0&&d<Vo[m].priority;m++);Vo.splice(m,0,u),m===0&&gL(u)}};var bL=e.version;if(bL!=="19.1.0")throw Error(r(527,bL,"19.1.0"));F.findDOMNode=function(u){var d=u._reactInternals;if(d===void 0)throw typeof u.render=="function"?Error(r(188)):(u=Object.keys(u).join(","),Error(r(268,u)));return u=l(d),u=u!==null?c(u):null,u=u===null?null:u.stateNode,u};var Ine={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vv.isDisabled&&vv.supportsFiber)try{ti=vv.inject(Ine),pn=vv}catch{}}return Ld.createRoot=function(u,d){if(!i(u))throw Error(r(299));var m=!1,x="",C=MP,$=PP,M=LP,j=null;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(x=d.identifierPrefix),d.onUncaughtError!==void 0&&(C=d.onUncaughtError),d.onCaughtError!==void 0&&($=d.onCaughtError),d.onRecoverableError!==void 0&&(M=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(j=d.unstable_transitionCallbacks)),d=cL(u,1,!1,null,null,m,x,C,$,M,j,null),u[fu]=d.current,uC(u),new $C(d)},Ld.hydrateRoot=function(u,d,m){if(!i(u))throw Error(r(299));var x=!1,C="",$=MP,M=PP,j=LP,Q=null,ue=null;return m!=null&&(m.unstable_strictMode===!0&&(x=!0),m.identifierPrefix!==void 0&&(C=m.identifierPrefix),m.onUncaughtError!==void 0&&($=m.onUncaughtError),m.onCaughtError!==void 0&&(M=m.onCaughtError),m.onRecoverableError!==void 0&&(j=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(Q=m.unstable_transitionCallbacks),m.formState!==void 0&&(ue=m.formState)),d=cL(u,1,!0,d,m??null,x,C,$,M,j,Q,ue),d.context=uL(null),m=d.current,x=Si(),x=bw(x),C=ko(x),C.callback=null,Ao(m,C,x),m=x,d.current.lanes=m,jh(d,m),js(d),u[fu]=d.current,uC(u),new yv(d)},Ld.version="19.1.0",Ld}var IL;function Bne(){if(IL)return OC.exports;IL=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),OC.exports=Fne(),OC.exports}var zne=Bne();const QI=q.createContext({});function JI(t){const e=q.useRef(null);return e.current===null&&(e.current=t()),e.current}const eN=typeof window<"u",t6=eN?q.useLayoutEffect:q.useEffect,Jb=q.createContext(null);function tN(t,e){t.indexOf(e)===-1&&t.push(e)}function nN(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const to=(t,e,n)=>n>e?e:n<t?t:n;let rN=()=>{};const no={},n6=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function r6(t){return typeof t=="object"&&t!==null}const i6=t=>/^0[^.\s]+$/u.test(t);function iN(t){let e;return()=>(e===void 0&&(e=t()),e)}const is=t=>t,jne=(t,e)=>n=>e(t(n)),Nm=(...t)=>t.reduce(jne),Ep=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class sN{constructor(){this.subscriptions=[]}add(e){return tN(this.subscriptions,e),()=>nN(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Qs=t=>t*1e3,Js=t=>t/1e3;function s6(t,e){return e?t*(1e3/e):0}const a6=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Vne=1e-7,Une=12;function Wne(t,e,n,r,i){let s,a,o=0;do a=e+(n-e)/2,s=a6(a,r,i)-t,s>0?n=a:e=a;while(Math.abs(s)>Vne&&++o<Une);return a}function Om(t,e,n,r){if(t===e&&n===r)return is;const i=s=>Wne(s,0,1,t,n);return s=>s===0||s===1?s:a6(i(s),e,r)}const o6=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,l6=t=>e=>1-t(1-e),c6=Om(.33,1.53,.69,.99),aN=l6(c6),u6=o6(aN),f6=t=>(t*=2)<1?.5*aN(t):.5*(2-Math.pow(2,-10*(t-1))),oN=t=>1-Math.sin(Math.acos(t)),h6=l6(oN),d6=o6(oN),Gne=Om(.42,0,1,1),qne=Om(0,0,.58,1),p6=Om(.42,0,.58,1),Hne=t=>Array.isArray(t)&&typeof t[0]!="number",m6=t=>Array.isArray(t)&&typeof t[0]=="number",Kne={linear:is,easeIn:Gne,easeInOut:p6,easeOut:qne,circIn:oN,circInOut:d6,circOut:h6,backIn:aN,backInOut:u6,backOut:c6,anticipate:f6},Xne=t=>typeof t=="string",NL=t=>{if(m6(t)){rN(t.length===4);const[e,n,r,i]=t;return Om(e,n,r,i)}else if(Xne(t))return Kne[t];return t},xv=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],OL={value:null};function Yne(t,e){let n=new Set,r=new Set,i=!1,s=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function c(h){a.has(h)&&(f.schedule(h),t()),l++,h(o)}const f={schedule:(h,p=!1,g=!1)=>{const b=g&&i?n:r;return p&&a.add(h),b.has(h)||b.add(h),h},cancel:h=>{r.delete(h),a.delete(h)},process:h=>{if(o=h,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),e&&OL.value&&OL.value.frameloop[e].push(l),l=0,n.clear(),i=!1,s&&(s=!1,f.process(h))}};return f}const Zne=40;function g6(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=xv.reduce((T,A)=>(T[A]=Yne(s,e?A:void 0),T),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:f,update:h,preRender:p,render:g,postRender:y}=a,b=()=>{const T=no.useManualTiming?i.timestamp:performance.now();n=!1,no.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(T-i.timestamp,Zne),1)),i.timestamp=T,i.isProcessing=!0,o.process(i),l.process(i),c.process(i),f.process(i),h.process(i),p.process(i),g.process(i),y.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(b))},v=()=>{n=!0,r=!0,i.isProcessing||t(b)};return{schedule:xv.reduce((T,A)=>{const k=a[A];return T[A]=(E,I=!1,N=!1)=>(n||v(),k.schedule(E,I,N)),T},{}),cancel:T=>{for(let A=0;A<xv.length;A++)a[xv[A]].cancel(T)},state:i,steps:a}}const{schedule:dn,cancel:cl,state:yr,steps:MC}=g6(typeof requestAnimationFrame<"u"?requestAnimationFrame:is,!0);let i0;function Qne(){i0=void 0}const ci={now:()=>(i0===void 0&&ci.set(yr.isProcessing||no.useManualTiming?yr.timestamp:performance.now()),i0),set:t=>{i0=t,queueMicrotask(Qne)}},y6=t=>e=>typeof e=="string"&&e.startsWith(t),lN=y6("--"),Jne=y6("var(--"),cN=t=>Jne(t)?ere.test(t.split("/*")[0].trim()):!1,ere=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,oh={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},$p={...oh,transform:t=>to(0,1,t)},wv={...oh,default:1},pp=t=>Math.round(t*1e5)/1e5,uN=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function tre(t){return t==null}const nre=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,fN=(t,e)=>n=>!!(typeof n=="string"&&nre.test(n)&&n.startsWith(t)||e&&!tre(n)&&Object.prototype.hasOwnProperty.call(n,e)),v6=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,a,o]=r.match(uN);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},rre=t=>to(0,255,t),PC={...oh,transform:t=>Math.round(rre(t))},dc={test:fN("rgb","red"),parse:v6("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+PC.transform(t)+", "+PC.transform(e)+", "+PC.transform(n)+", "+pp($p.transform(r))+")"};function ire(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const AE={test:fN("#"),parse:ire,transform:dc.transform},_m=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Go=_m("deg"),ea=_m("%"),tt=_m("px"),sre=_m("vh"),are=_m("vw"),_L={...ea,parse:t=>ea.parse(t)/100,transform:t=>ea.transform(t*100)},of={test:fN("hsl","hue"),parse:v6("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+ea.transform(pp(e))+", "+ea.transform(pp(n))+", "+pp($p.transform(r))+")"},Nr={test:t=>dc.test(t)||AE.test(t)||of.test(t),parse:t=>dc.test(t)?dc.parse(t):of.test(t)?of.parse(t):AE.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?dc.transform(t):of.transform(t)},ore=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function lre(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(uN))==null?void 0:e.length)||0)+(((n=t.match(ore))==null?void 0:n.length)||0)>0}const b6="number",x6="color",cre="var",ure="var(",RL="${}",fre=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ip(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=e.replace(fre,l=>(Nr.test(l)?(r.color.push(s),i.push(x6),n.push(Nr.parse(l))):l.startsWith(ure)?(r.var.push(s),i.push(cre),n.push(l)):(r.number.push(s),i.push(b6),n.push(parseFloat(l))),++s,RL)).split(RL);return{values:n,split:o,indexes:r,types:i}}function w6(t){return Ip(t).values}function S6(t){const{split:e,types:n}=Ip(t),r=e.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=e[a],i[a]!==void 0){const o=n[a];o===b6?s+=pp(i[a]):o===x6?s+=Nr.transform(i[a]):s+=i[a]}return s}}const hre=t=>typeof t=="number"?0:t;function dre(t){const e=w6(t);return S6(t)(e.map(hre))}const ul={test:lre,parse:w6,createTransformer:S6,getAnimatableNone:dre};function LC(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function pre({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,a=0;if(!e)i=s=a=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;i=LC(l,o,t+1/3),s=LC(l,o,t),a=LC(l,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function v0(t,e){return n=>n>0?e:t}const fn=(t,e,n)=>t+(e-t)*n,FC=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},mre=[AE,dc,of],gre=t=>mre.find(e=>e.test(t));function DL(t){const e=gre(t);if(!e)return!1;let n=e.parse(t);return e===of&&(n=pre(n)),n}const ML=(t,e)=>{const n=DL(t),r=DL(e);if(!n||!r)return v0(t,e);const i={...n};return s=>(i.red=FC(n.red,r.red,s),i.green=FC(n.green,r.green,s),i.blue=FC(n.blue,r.blue,s),i.alpha=fn(n.alpha,r.alpha,s),dc.transform(i))},EE=new Set(["none","hidden"]);function yre(t,e){return EE.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function vre(t,e){return n=>fn(t,e,n)}function hN(t){return typeof t=="number"?vre:typeof t=="string"?cN(t)?v0:Nr.test(t)?ML:wre:Array.isArray(t)?C6:typeof t=="object"?Nr.test(t)?ML:bre:v0}function C6(t,e){const n=[...t],r=n.length,i=t.map((s,a)=>hN(s)(s,e[a]));return s=>{for(let a=0;a<r;a++)n[a]=i[a](s);return n}}function bre(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=hN(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function xre(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],a=t.indexes[s][r[s]],o=t.values[a]??0;n[i]=o,r[s]++}return n}const wre=(t,e)=>{const n=ul.createTransformer(e),r=Ip(t),i=Ip(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?EE.has(t)&&!i.values.length||EE.has(e)&&!r.values.length?yre(t,e):Nm(C6(xre(r,i),i.values),n):v0(t,e)};function T6(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?fn(t,e,n):hN(t)(t,e)}const Sre=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>dn.update(e,n),stop:()=>cl(e),now:()=>yr.isProcessing?yr.timestamp:ci.now()}},k6=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(s/(i-1))+", ";return`linear(${r.substring(0,r.length-2)})`},b0=2e4;function dN(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<b0;)e+=n,r=t.next(e);return e>=b0?1/0:e}function Cre(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(dN(r),b0);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:Js(i)}}const Tre=5;function A6(t,e,n){const r=Math.max(e-Tre,0);return s6(n-t(r),e-r)}const yn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},PL=.001;function kre({duration:t=yn.duration,bounce:e=yn.bounce,velocity:n=yn.velocity,mass:r=yn.mass}){let i,s,a=1-e;a=to(yn.minDamping,yn.maxDamping,a),t=to(yn.minDuration,yn.maxDuration,Js(t)),a<1?(i=c=>{const f=c*a,h=f*t,p=f-n,g=$E(c,a),y=Math.exp(-h);return PL-p/g*y},s=c=>{const h=c*a*t,p=h*n+n,g=Math.pow(a,2)*Math.pow(c,2)*t,y=Math.exp(-h),b=$E(Math.pow(c,2),a);return(-i(c)+PL>0?-1:1)*((p-g)*y)/b}):(i=c=>{const f=Math.exp(-c*t),h=(c-n)*t+1;return-.001+f*h},s=c=>{const f=Math.exp(-c*t),h=(n-c)*(t*t);return f*h});const o=5/t,l=Ere(i,s,o);if(t=Qs(t),isNaN(l))return{stiffness:yn.stiffness,damping:yn.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:a*2*Math.sqrt(r*c),duration:t}}}const Are=12;function Ere(t,e,n){let r=n;for(let i=1;i<Are;i++)r=r-t(r)/e(r);return r}function $E(t,e){return t*Math.sqrt(1-e*e)}const $re=["duration","bounce"],Ire=["stiffness","damping","mass"];function LL(t,e){return e.some(n=>t[n]!==void 0)}function Nre(t){let e={velocity:yn.velocity,stiffness:yn.stiffness,damping:yn.damping,mass:yn.mass,isResolvedFromDuration:!1,...t};if(!LL(t,Ire)&&LL(t,$re))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*to(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:yn.mass,stiffness:i,damping:s}}else{const n=kre(t);e={...e,...n,mass:yn.mass},e.isResolvedFromDuration=!0}return e}function x0(t=yn.visualDuration,e=yn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:f,duration:h,velocity:p,isResolvedFromDuration:g}=Nre({...n,velocity:-Js(n.velocity||0)}),y=p||0,b=c/(2*Math.sqrt(l*f)),v=a-s,w=Js(Math.sqrt(l/f)),S=Math.abs(v)<5;r||(r=S?yn.restSpeed.granular:yn.restSpeed.default),i||(i=S?yn.restDelta.granular:yn.restDelta.default);let T;if(b<1){const k=$E(w,b);T=E=>{const I=Math.exp(-b*w*E);return a-I*((y+b*w*v)/k*Math.sin(k*E)+v*Math.cos(k*E))}}else if(b===1)T=k=>a-Math.exp(-w*k)*(v+(y+w*v)*k);else{const k=w*Math.sqrt(b*b-1);T=E=>{const I=Math.exp(-b*w*E),N=Math.min(k*E,300);return a-I*((y+b*w*v)*Math.sinh(N)+k*v*Math.cosh(N))/k}}const A={calculatedDuration:g&&h||null,next:k=>{const E=T(k);if(g)o.done=k>=h;else{let I=k===0?y:0;b<1&&(I=k===0?Qs(y):A6(T,k,E));const N=Math.abs(I)<=r,_=Math.abs(a-E)<=i;o.done=N&&_}return o.value=o.done?a:E,o},toString:()=>{const k=Math.min(dN(A),b0),E=k6(I=>A.next(k*I).value,k,30);return k+"ms "+E},toTransition:()=>{}};return A}x0.applyToOptions=t=>{const e=Cre(t,100,x0);return t.ease=e.ease,t.duration=Qs(e.duration),t.type="keyframes",t};function IE({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:f}){const h=t[0],p={done:!1,value:h},g=N=>o!==void 0&&N<o||l!==void 0&&N>l,y=N=>o===void 0?l:l===void 0||Math.abs(o-N)<Math.abs(l-N)?o:l;let b=n*e;const v=h+b,w=a===void 0?v:a(v);w!==v&&(b=w-h);const S=N=>-b*Math.exp(-N/r),T=N=>w+S(N),A=N=>{const _=S(N),D=T(N);p.done=Math.abs(_)<=c,p.value=p.done?w:D};let k,E;const I=N=>{g(p.value)&&(k=N,E=x0({keyframes:[p.value,y(p.value)],velocity:A6(T,N,p.value),damping:i,stiffness:s,restDelta:c,restSpeed:f}))};return I(0),{calculatedDuration:null,next:N=>{let _=!1;return!E&&k===void 0&&(_=!0,A(N),I(N)),k!==void 0&&N>=k?E.next(N-k):(!_&&A(N),p)}}}function Ore(t,e,n){const r=[],i=n||no.mix||T6,s=t.length-1;for(let a=0;a<s;a++){let o=i(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||is:e;o=Nm(l,o)}r.push(o)}return r}function _re(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(rN(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=Ore(e,r,i),l=o.length,c=f=>{if(a&&f<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(f<t[h+1]);h++);const p=Ep(t[h],t[h+1],f);return o[h](p)};return n?f=>c(to(t[0],t[s-1],f)):c}function Rre(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Ep(0,e,r);t.push(fn(n,1,i))}}function Dre(t){const e=[0];return Rre(e,t.length-1),e}function Mre(t,e){return t.map(n=>n*e)}function Pre(t,e){return t.map(()=>e||p6).splice(0,t.length-1)}function mp({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Hne(r)?r.map(NL):NL(r),s={done:!1,value:e[0]},a=Mre(n&&n.length===e.length?n:Dre(e),t),o=_re(a,e,{ease:Array.isArray(i)?i:Pre(e,i)});return{calculatedDuration:t,next:l=>(s.value=o(l),s.done=l>=t,s)}}const Lre=t=>t!==null;function pN(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(Lre),o=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const Fre={decay:IE,inertia:IE,tween:mp,keyframes:mp,spring:x0};function E6(t){typeof t.type=="string"&&(t.type=Fre[t.type])}class mN{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Bre=t=>t/100;class gN extends mN{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==ci.now()&&this.tick(ci.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;E6(e);const{type:n=mp,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=e;let{keyframes:o}=e;const l=n||mp;l!==mp&&typeof o[0]!="number"&&(this.mixKeyframes=Nm(Bre,T6(o[0],o[1])),o=[0,100]);const c=l({...e,keyframes:o});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...o].reverse(),velocity:-a})),c.calculatedDuration===null&&(c.calculatedDuration=dN(c));const{calculatedDuration:f}=c;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:f,repeat:h,repeatType:p,repeatDelay:g,type:y,onUpdate:b,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const w=this.currentTime-c*(this.playbackSpeed>=0?1:-1),S=this.playbackSpeed>=0?w<0:w>i;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let T=this.currentTime,A=r;if(h){const N=Math.min(this.currentTime,i)/o;let _=Math.floor(N),D=N%1;!D&&N>=1&&(D=1),D===1&&_--,_=Math.min(_,h+1),!!(_%2)&&(p==="reverse"?(D=1-D,g&&(D-=g/o)):p==="mirror"&&(A=a)),T=to(0,1,D)*o}const k=S?{done:!1,value:f[0]}:A.next(T);s&&(k.value=s(k.value));let{done:E}=k;!S&&l!==null&&(E=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return I&&y!==IE&&(k.value=pN(f,this.options,v,this.speed)),b&&b(k.value),I&&this.finish(),k}then(e,n){return this.finished.then(e,n)}get duration(){return Js(this.calculatedDuration)}get time(){return Js(this.currentTime)}set time(e){var n;e=Qs(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ci.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Js(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=Sre,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ci.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function zre(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const pc=t=>t*180/Math.PI,NE=t=>{const e=pc(Math.atan2(t[1],t[0]));return OE(e)},jre={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:NE,rotateZ:NE,skewX:t=>pc(Math.atan(t[1])),skewY:t=>pc(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},OE=t=>(t=t%360,t<0&&(t+=360),t),FL=NE,BL=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),zL=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Vre={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:BL,scaleY:zL,scale:t=>(BL(t)+zL(t))/2,rotateX:t=>OE(pc(Math.atan2(t[6],t[5]))),rotateY:t=>OE(pc(Math.atan2(-t[2],t[0]))),rotateZ:FL,rotate:FL,skewX:t=>pc(Math.atan(t[4])),skewY:t=>pc(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function _E(t){return t.includes("scale")?1:0}function RE(t,e){if(!t||t==="none")return _E(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=Vre,i=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=jre,i=o}if(!i)return _E(e);const s=r[e],a=i[1].split(",").map(Wre);return typeof s=="function"?s(a):a[s]}const Ure=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return RE(n,e)};function Wre(t){return parseFloat(t.trim())}const lh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ch=new Set(lh),jL=t=>t===oh||t===tt,Gre=new Set(["x","y","z"]),qre=lh.filter(t=>!Gre.has(t));function Hre(t){const e=[];return qre.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Sc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>RE(e,"x"),y:(t,{transform:e})=>RE(e,"y")};Sc.translateX=Sc.x;Sc.translateY=Sc.y;const Cc=new Set;let DE=!1,ME=!1,PE=!1;function $6(){if(ME){const t=Array.from(Cc).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=Hre(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,a])=>{var o;(o=r.getValue(s))==null||o.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}ME=!1,DE=!1,Cc.forEach(t=>t.complete(PE)),Cc.clear()}function I6(){Cc.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(ME=!0)})}function Kre(){PE=!0,I6(),$6(),PE=!1}class yN{constructor(e,n,r,i,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Cc.add(this),DE||(DE=!0,dn.read(I6),dn.resolveKeyframes($6))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),a=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const o=r.readValue(n,a);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=a),i&&s===void 0&&i.set(e[0])}zre(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Cc.delete(this)}cancel(){this.state==="scheduled"&&(Cc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Xre=t=>t.startsWith("--");function Yre(t,e,n){Xre(e)?t.style.setProperty(e,n):t.style[e]=n}const Zre=iN(()=>window.ScrollTimeline!==void 0),Qre={};function Jre(t,e){const n=iN(t);return()=>Qre[e]??n()}const N6=Jre(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ip=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,VL={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ip([0,.65,.55,1]),circOut:ip([.55,0,1,.45]),backIn:ip([.31,.01,.66,-.59]),backOut:ip([.33,1.53,.69,.99])};function O6(t,e){if(t)return typeof t=="function"?N6()?k6(t,e):"ease-out":m6(t)?ip(t):Array.isArray(t)?t.map(n=>O6(n,e)||VL.easeOut):VL[t]}function eie(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeOut",times:l}={},c=void 0){const f={[e]:n};l&&(f.offset=l);const h=O6(o,i);Array.isArray(h)&&(f.easing=h);const p={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return c&&(p.pseudoElement=c),t.animate(f,p)}function _6(t){return typeof t=="function"&&"applyToOptions"in t}function tie({type:t,...e}){return _6(t)&&N6()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class nie extends mN{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=e,rN(typeof e.type!="string");const c=tie(e);this.animation=eie(n,r,i,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const f=pN(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(f):Yre(n,r,f),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Js(Number(e))}get time(){return Js(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Qs(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Zre()?(this.animation.timeline=e,is):n(this)}}const R6={anticipate:f6,backInOut:u6,circInOut:d6};function rie(t){return t in R6}function iie(t){typeof t.ease=="string"&&rie(t.ease)&&(t.ease=R6[t.ease])}const UL=10;class sie extends nie{constructor(e){iie(e),E6(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...a}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new gN({...a,autoplay:!1}),l=Qs(this.finishedTime??this.time);n.setWithVelocity(o.sample(l-UL).value,o.sample(l).value,UL),o.stop()}}const WL=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ul.test(t)||t==="0")&&!t.startsWith("url("));function aie(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function oie(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],a=WL(i,e),o=WL(s,e);return!a||!o?!1:aie(t)||(n==="spring"||_6(n))&&r}function vN(t){return r6(t)&&"offsetHeight"in t}const lie=new Set(["opacity","clipPath","filter","transform"]),cie=iN(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function uie(t){var c;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:a}=t;if(!vN((c=e==null?void 0:e.owner)==null?void 0:c.current))return!1;const{onUpdate:o,transformTemplate:l}=e.owner.getProps();return cie()&&n&&lie.has(n)&&(n!=="transform"||!l)&&!o&&!r&&i!=="mirror"&&s!==0&&a!=="inertia"}const fie=40;class hie extends mN{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",keyframes:o,name:l,motionValue:c,element:f,...h}){var y;super(),this.stop=()=>{var b,v;this._animation&&(this._animation.stop(),(b=this.stopTimeline)==null||b.call(this)),(v=this.keyframeResolver)==null||v.cancel()},this.createdAt=ci.now();const p={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:a,name:l,motionValue:c,element:f,...h},g=(f==null?void 0:f.KeyframeResolver)||yN;this.keyframeResolver=new g(o,(b,v,w)=>this.onKeyframesResolved(b,v,p,!w),l,c,f),(y=this.keyframeResolver)==null||y.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:a,velocity:o,delay:l,isHandoff:c,onUpdate:f}=r;this.resolvedAt=ci.now(),oie(e,s,a,o)||((no.instantAnimations||!l)&&(f==null||f(pN(e,r,n))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const p={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>fie?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},g=!c&&uie(p)?new sie({...p,element:p.motionValue.owner.current}):new gN(p);g.finished.then(()=>this.notifyFinished()).catch(is),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),Kre()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const die=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function pie(t){const e=die.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function D6(t,e,n=1){const[r,i]=pie(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return n6(a)?parseFloat(a):a}return cN(i)?D6(i,e,n+1):i}function bN(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const M6=new Set(["width","height","top","left","right","bottom",...lh]),mie={test:t=>t==="auto",parse:t=>t},P6=t=>e=>e.test(t),L6=[oh,tt,ea,Go,are,sre,mie],GL=t=>L6.find(P6(t));function gie(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||i6(t):!0}const yie=new Set(["brightness","contrast","saturate","opacity"]);function vie(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(uN)||[];if(!r)return t;const i=n.replace(r,"");let s=yie.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const bie=/\b([a-z-]*)\(.*?\)/gu,LE={...ul,getAnimatableNone:t=>{const e=t.match(bie);return e?e.map(vie).join(" "):t}},qL={...oh,transform:Math.round},xie={rotate:Go,rotateX:Go,rotateY:Go,rotateZ:Go,scale:wv,scaleX:wv,scaleY:wv,scaleZ:wv,skew:Go,skewX:Go,skewY:Go,distance:tt,translateX:tt,translateY:tt,translateZ:tt,x:tt,y:tt,z:tt,perspective:tt,transformPerspective:tt,opacity:$p,originX:_L,originY:_L,originZ:tt},xN={borderWidth:tt,borderTopWidth:tt,borderRightWidth:tt,borderBottomWidth:tt,borderLeftWidth:tt,borderRadius:tt,radius:tt,borderTopLeftRadius:tt,borderTopRightRadius:tt,borderBottomRightRadius:tt,borderBottomLeftRadius:tt,width:tt,maxWidth:tt,height:tt,maxHeight:tt,top:tt,right:tt,bottom:tt,left:tt,padding:tt,paddingTop:tt,paddingRight:tt,paddingBottom:tt,paddingLeft:tt,margin:tt,marginTop:tt,marginRight:tt,marginBottom:tt,marginLeft:tt,backgroundPositionX:tt,backgroundPositionY:tt,...xie,zIndex:qL,fillOpacity:$p,strokeOpacity:$p,numOctaves:qL},wie={...xN,color:Nr,backgroundColor:Nr,outlineColor:Nr,fill:Nr,stroke:Nr,borderColor:Nr,borderTopColor:Nr,borderRightColor:Nr,borderBottomColor:Nr,borderLeftColor:Nr,filter:LE,WebkitFilter:LE},F6=t=>wie[t];function B6(t,e){let n=F6(t);return n!==LE&&(n=ul),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Sie=new Set(["auto","none","0"]);function Cie(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!Sie.has(s)&&Ip(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=B6(n,i)}class Tie extends yN{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),cN(c))){const f=D6(c,n.current);f!==void 0&&(e[l]=f),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!M6.has(r)||e.length!==2)return;const[i,s]=e,a=GL(i),o=GL(s);if(a!==o)if(jL(a)&&jL(o))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else Sc[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||gie(e[i]))&&r.push(i);r.length&&Cie(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Sc[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var o;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,a=r[s];r[s]=Sc[n](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function kie(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const z6=(t,e)=>e&&typeof t=="number"?e.transform(t):t,HL=30,Aie=t=>!isNaN(parseFloat(t));class Eie{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{var a,o;const s=ci.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();i&&((o=this.events.renderRequest)==null||o.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ci.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Aie(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new sN);const r=this.events[e].add(n);return e==="change"?()=>{r(),dn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ci.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>HL)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,HL);return s6(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function kf(t,e){return new Eie(t,e)}const{schedule:wN}=g6(queueMicrotask,!1),bs={x:!1,y:!1};function j6(){return bs.x||bs.y}function $ie(t){return t==="x"||t==="y"?bs[t]?null:(bs[t]=!0,()=>{bs[t]=!1}):bs.x||bs.y?null:(bs.x=bs.y=!0,()=>{bs.x=bs.y=!1})}function V6(t,e){const n=kie(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function KL(t){return!(t.pointerType==="touch"||j6())}function Iie(t,e,n={}){const[r,i,s]=V6(t,n),a=o=>{if(!KL(o))return;const{target:l}=o,c=e(l,o);if(typeof c!="function"||!l)return;const f=h=>{KL(h)&&(c(h),l.removeEventListener("pointerleave",f))};l.addEventListener("pointerleave",f,i)};return r.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const U6=(t,e)=>e?t===e?!0:U6(t,e.parentElement):!1,SN=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Nie=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Oie(t){return Nie.has(t.tagName)||t.tabIndex!==-1}const s0=new WeakSet;function XL(t){return e=>{e.key==="Enter"&&t(e)}}function BC(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const _ie=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=XL(()=>{if(s0.has(n))return;BC(n,"down");const i=XL(()=>{BC(n,"up")}),s=()=>BC(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function YL(t){return SN(t)&&!j6()}function Rie(t,e,n={}){const[r,i,s]=V6(t,n),a=o=>{const l=o.currentTarget;if(!YL(o))return;s0.add(l);const c=e(l,o),f=(g,y)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",p),s0.has(l)&&s0.delete(l),YL(g)&&typeof c=="function"&&c(g,{success:y})},h=g=>{f(g,l===window||l===document||n.useGlobalTarget||U6(l,g.target))},p=g=>{f(g,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",p,i)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),vN(o)&&(o.addEventListener("focus",c=>_ie(c,i)),!Oie(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),s}function W6(t){return r6(t)&&"ownerSVGElement"in t}function Die(t){return W6(t)&&t.tagName==="svg"}const Fr=t=>!!(t&&t.getVelocity),Mie=[...L6,Nr,ul],Pie=t=>Mie.find(P6(t)),CN=q.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class Lie extends q.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=vN(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Fie({children:t,isPresent:e,anchorX:n}){const r=q.useId(),i=q.useRef(null),s=q.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=q.useContext(CN);return q.useInsertionEffect(()=>{const{width:o,height:l,top:c,left:f,right:h}=s.current;if(e||!i.current||!o||!l)return;const p=n==="left"?`left: ${f}`:`right: ${h}`;i.current.dataset.motionPopId=r;const g=document.createElement("style");return a&&(g.nonce=a),document.head.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            ${p}px !important;
            top: ${c}px !important;
          }
        `),()=>{document.head.contains(g)&&document.head.removeChild(g)}},[e]),V.jsx(Lie,{isPresent:e,childRef:i,sizeRef:s,children:q.cloneElement(t,{ref:i})})}const Bie=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a,anchorX:o})=>{const l=JI(zie),c=q.useId();let f=!0,h=q.useMemo(()=>(f=!1,{id:c,initial:e,isPresent:n,custom:i,onExitComplete:p=>{l.set(p,!0);for(const g of l.values())if(!g)return;r&&r()},register:p=>(l.set(p,!1),()=>l.delete(p))}),[n,l,r]);return s&&f&&(h={...h}),q.useMemo(()=>{l.forEach((p,g)=>l.set(g,!1))},[n]),q.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),a==="popLayout"&&(t=V.jsx(Fie,{isPresent:n,anchorX:o,children:t})),V.jsx(Jb.Provider,{value:h,children:t})};function zie(){return new Map}function G6(t=!0){const e=q.useContext(Jb);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=q.useId();q.useEffect(()=>{if(t)return i(s)},[t]);const a=q.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,a]:[!0]}const Sv=t=>t.key||"";function ZL(t){const e=[];return q.Children.forEach(t,n=>{q.isValidElement(n)&&e.push(n)}),e}const w0=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:a=!1,anchorX:o="left"})=>{const[l,c]=G6(a),f=q.useMemo(()=>ZL(t),[t]),h=a&&!l?[]:f.map(Sv),p=q.useRef(!0),g=q.useRef(f),y=JI(()=>new Map),[b,v]=q.useState(f),[w,S]=q.useState(f);t6(()=>{p.current=!1,g.current=f;for(let k=0;k<w.length;k++){const E=Sv(w[k]);h.includes(E)?y.delete(E):y.get(E)!==!0&&y.set(E,!1)}},[w,h.length,h.join("-")]);const T=[];if(f!==b){let k=[...f];for(let E=0;E<w.length;E++){const I=w[E],N=Sv(I);h.includes(N)||(k.splice(E,0,I),T.push(I))}return s==="wait"&&T.length&&(k=T),S(ZL(k)),v(f),null}const{forceRender:A}=q.useContext(QI);return V.jsx(V.Fragment,{children:w.map(k=>{const E=Sv(k),I=a&&!l?!1:f===w||h.includes(E),N=()=>{if(y.has(E))y.set(E,!0);else return;let _=!0;y.forEach(D=>{D||(_=!1)}),_&&(A==null||A(),S(g.current),a&&(c==null||c()),r&&r())};return V.jsx(Bie,{isPresent:I,initial:!p.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,onExitComplete:I?void 0:N,anchorX:o,children:k},E)})})},q6=q.createContext({strict:!1}),QL={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Af={};for(const t in QL)Af[t]={isEnabled:e=>QL[t].some(n=>!!e[n])};function jie(t){for(const e in t)Af[e]={...Af[e],...t[e]}}const Vie=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function S0(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Vie.has(t)}let H6=t=>!S0(t);function Uie(t){t&&(H6=e=>e.startsWith("on")?!S0(e):t(e))}try{Uie(require("@emotion/is-prop-valid").default)}catch{}function Wie(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(H6(i)||n===!0&&S0(i)||!e&&!S0(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function Gie(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const ex=q.createContext({});function tx(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Np(t){return typeof t=="string"||Array.isArray(t)}const TN=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],kN=["initial",...TN];function nx(t){return tx(t.animate)||kN.some(e=>Np(t[e]))}function K6(t){return!!(nx(t)||t.variants)}function qie(t,e){if(nx(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Np(n)?n:void 0,animate:Np(r)?r:void 0}}return t.inherit!==!1?e:{}}function Hie(t){const{initial:e,animate:n}=qie(t,q.useContext(ex));return q.useMemo(()=>({initial:e,animate:n}),[JL(e),JL(n)])}function JL(t){return Array.isArray(t)?t.join(" "):t}const Kie=Symbol.for("motionComponentSymbol");function lf(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Xie(t,e,n){return q.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):lf(n)&&(n.current=r))},[e])}const AN=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Yie="framerAppearId",X6="data-"+AN(Yie),Y6=q.createContext({});function Zie(t,e,n,r,i){var b,v;const{visualElement:s}=q.useContext(ex),a=q.useContext(q6),o=q.useContext(Jb),l=q.useContext(CN).reducedMotion,c=q.useRef(null);r=r||a.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const f=c.current,h=q.useContext(Y6);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&Qie(c.current,n,i,h);const p=q.useRef(!1);q.useInsertionEffect(()=>{f&&p.current&&f.update(n,o)});const g=n[X6],y=q.useRef(!!g&&!((b=window.MotionHandoffIsComplete)!=null&&b.call(window,g))&&((v=window.MotionHasOptimisedAnimation)==null?void 0:v.call(window,g)));return t6(()=>{f&&(p.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),wN.render(f.render),y.current&&f.animationState&&f.animationState.animateChanges())}),q.useEffect(()=>{f&&(!y.current&&f.animationState&&f.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)==null||w.call(window,g)}),y.current=!1))}),f}function Qie(t,e,n,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Z6(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&lf(o),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:l,layoutRoot:c})}function Z6(t){if(t)return t.options.allowProjection!==!1?t.projection:Z6(t.parent)}function Jie({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&jie(t);function s(o,l){let c;const f={...q.useContext(CN),...o,layoutId:ese(o)},{isStatic:h}=f,p=Hie(o),g=r(o,h);if(!h&&eN){tse();const y=nse(f);c=y.MeasureLayout,p.visualElement=Zie(i,g,f,e,y.ProjectionNode)}return V.jsxs(ex.Provider,{value:p,children:[c&&p.visualElement?V.jsx(c,{visualElement:p.visualElement,...f}):null,n(i,o,Xie(g,p.visualElement,l),g,h,p.visualElement)]})}s.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const a=q.forwardRef(s);return a[Kie]=i,a}function ese({layoutId:t}){const e=q.useContext(QI).id;return e&&t!==void 0?e+"-"+t:t}function tse(t,e){q.useContext(q6).strict}function nse(t){const{drag:e,layout:n}=Af;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Op={};function rse(t){for(const e in t)Op[e]=t[e],lN(e)&&(Op[e].isCSSVariable=!0)}function Q6(t,{layout:e,layoutId:n}){return ch.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Op[t]||t==="opacity")}const ise={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},sse=lh.length;function ase(t,e,n){let r="",i=!0;for(let s=0;s<sse;s++){const a=lh[s],o=t[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const c=z6(o,xN[a]);if(!l){i=!1;const f=ise[a]||a;r+=`${f}(${c}) `}n&&(e[a]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function EN(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let a=!1,o=!1;for(const l in e){const c=e[l];if(ch.has(l)){a=!0;continue}else if(lN(l)){i[l]=c;continue}else{const f=z6(c,xN[l]);l.startsWith("origin")?(o=!0,s[l]=f):r[l]=f}}if(e.transform||(a||n?r.transform=ase(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:f=0}=s;r.transformOrigin=`${l} ${c} ${f}`}}const $N=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function J6(t,e,n){for(const r in e)!Fr(e[r])&&!Q6(r,n)&&(t[r]=e[r])}function ose({transformTemplate:t},e){return q.useMemo(()=>{const n=$N();return EN(n,e,t),Object.assign({},n.vars,n.style)},[e])}function lse(t,e){const n=t.style||{},r={};return J6(r,n,t),Object.assign(r,ose(t,e)),r}function cse(t,e){const n={},r=lse(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const use={offset:"stroke-dashoffset",array:"stroke-dasharray"},fse={offset:"strokeDashoffset",array:"strokeDasharray"};function hse(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?use:fse;t[s.offset]=tt.transform(-r);const a=tt.transform(e),o=tt.transform(n);t[s.array]=`${a} ${o}`}function eq(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:a=0,...o},l,c,f){if(EN(t,o,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:p}=t;h.transform&&(p.transform=h.transform,delete h.transform),(p.transform||h.transformOrigin)&&(p.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),p.transform&&(p.transformBox=(f==null?void 0:f.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),i!==void 0&&hse(h,i,s,a,!1)}const tq=()=>({...$N(),attrs:{}}),nq=t=>typeof t=="string"&&t.toLowerCase()==="svg";function dse(t,e,n,r){const i=q.useMemo(()=>{const s=tq();return eq(s,e,nq(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};J6(s,t.style,t),i.style={...s,...i.style}}return i}const pse=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function IN(t){return typeof t!="string"||t.includes("-")?!1:!!(pse.indexOf(t)>-1||/[A-Z]/u.test(t))}function mse(t=!1){return(n,r,i,{latestValues:s},a)=>{const l=(IN(n)?dse:cse)(r,s,a,n),c=Wie(r,typeof n=="string",t),f=n!==q.Fragment?{...c,...l,ref:i}:{},{children:h}=r,p=q.useMemo(()=>Fr(h)?h.get():h,[h]);return q.createElement(n,{...f,children:p})}}function eF(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function NN(t,e,n,r){if(typeof e=="function"){const[i,s]=eF(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=eF(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function a0(t){return Fr(t)?t.get():t}function gse({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:yse(n,r,i,t),renderState:e()}}const rq=t=>(e,n)=>{const r=q.useContext(ex),i=q.useContext(Jb),s=()=>gse(t,e,r,i);return n?s():JI(s)};function yse(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=a0(s[p]);let{initial:a,animate:o}=t;const l=nx(t),c=K6(t);e&&c&&!l&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let f=n?n.initial===!1:!1;f=f||a===!1;const h=f?o:a;if(h&&typeof h!="boolean"&&!tx(h)){const p=Array.isArray(h)?h:[h];for(let g=0;g<p.length;g++){const y=NN(t,p[g]);if(y){const{transitionEnd:b,transition:v,...w}=y;for(const S in w){let T=w[S];if(Array.isArray(T)){const A=f?T.length-1:0;T=T[A]}T!==null&&(i[S]=T)}for(const S in b)i[S]=b[S]}}}return i}function ON(t,e,n){var s;const{style:r}=t,i={};for(const a in r)(Fr(r[a])||e.style&&Fr(e.style[a])||Q6(a,t)||((s=n==null?void 0:n.getValue(a))==null?void 0:s.liveStyle)!==void 0)&&(i[a]=r[a]);return i}const vse={useVisualState:rq({scrapeMotionValuesFromProps:ON,createRenderState:$N})};function iq(t,e,n){const r=ON(t,e,n);for(const i in t)if(Fr(t[i])||Fr(e[i])){const s=lh.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const bse={useVisualState:rq({scrapeMotionValuesFromProps:iq,createRenderState:tq})};function xse(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...IN(r)?bse:vse,preloadedFeatures:t,useRender:mse(i),createVisualElement:e,Component:r};return Jie(a)}}function _p(t,e,n){const r=t.getProps();return NN(r,e,n!==void 0?n:r.custom,t)}const FE=t=>Array.isArray(t);function wse(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,kf(n))}function Sse(t){return FE(t)?t[t.length-1]||0:t}function Cse(t,e){const n=_p(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const a in s){const o=Sse(s[a]);wse(t,a,o)}}function Tse(t){return!!(Fr(t)&&t.add)}function BE(t,e){const n=t.getValue("willChange");if(Tse(n))return n.add(e);if(!n&&no.WillChange){const r=new no.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function sq(t){return t.props[X6]}const kse=t=>t!==null;function Ase(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(kse),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const Ese={type:"spring",stiffness:500,damping:25,restSpeed:10},$se=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Ise={type:"keyframes",duration:.8},Nse={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Ose=(t,{keyframes:e})=>e.length>2?Ise:ch.has(t)?t.startsWith("scale")?$se(e[1]):Ese:Nse;function _se({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:c,...f}){return!!Object.keys(f).length}const _N=(t,e,n,r={},i,s)=>a=>{const o=bN(r,t)||{},l=o.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Qs(l);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-c,onUpdate:p=>{e.set(p),o.onUpdate&&o.onUpdate(p)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:s?void 0:i};_se(o)||Object.assign(f,Ose(t,f)),f.duration&&(f.duration=Qs(f.duration)),f.repeatDelay&&(f.repeatDelay=Qs(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let h=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(f.duration=0,f.delay===0&&(h=!0)),(no.instantAnimations||no.skipAnimations)&&(h=!0,f.duration=0,f.delay=0),f.allowFlatten=!o.type&&!o.ease,h&&!s&&e.get()!==void 0){const p=Ase(f.keyframes,o);if(p!==void 0){dn.update(()=>{f.onUpdate(p),f.onComplete()});return}}return o.isSync?new gN(f):new hie(f)};function Rse({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function aq(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:a,...o}=e;r&&(s=r);const l=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const f in o){const h=t.getValue(f,t.latestValues[f]??null),p=o[f];if(p===void 0||c&&Rse(c,f))continue;const g={delay:n,...bN(s||{},f)},y=h.get();if(y!==void 0&&!h.isAnimating&&!Array.isArray(p)&&p===y&&!g.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const w=sq(t);if(w){const S=window.MotionHandoffAnimation(w,f,dn);S!==null&&(g.startTime=S,b=!0)}}BE(t,f),h.start(_N(f,h,p,t.shouldReduceMotion&&M6.has(f)?{type:!1}:g,t,b));const v=h.animation;v&&l.push(v)}return a&&Promise.all(l).then(()=>{dn.update(()=>{a&&Cse(t,a)})}),l}function zE(t,e,n={}){var l;const r=_p(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(aq(t,r,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:f=0,staggerChildren:h,staggerDirection:p}=i;return Dse(t,e,f+c,h,p,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[c,f]=o==="beforeChildren"?[s,a]:[a,s];return c().then(()=>f())}else return Promise.all([s(),a(n.delay)])}function Dse(t,e,n=0,r=0,i=1,s){const a=[],o=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>o-c*r;return Array.from(t.variantChildren).sort(Mse).forEach((c,f)=>{c.notify("AnimationStart",e),a.push(zE(c,e,{...s,delay:n+l(f)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(a)}function Mse(t,e){return t.sortNodePosition(e)}function Pse(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>zE(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=zE(t,e,n);else{const i=typeof e=="function"?_p(t,e,n.custom):e;r=Promise.all(aq(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function oq(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const Lse=kN.length;function lq(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?lq(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Lse;n++){const r=kN[n],i=t.props[r];(Np(i)||i===!1)&&(e[r]=i)}return e}const Fse=[...TN].reverse(),Bse=TN.length;function zse(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Pse(t,n,r)))}function jse(t){let e=zse(t),n=tF(),r=!0;const i=l=>(c,f)=>{var p;const h=_p(t,f,l==="exit"?(p=t.presenceContext)==null?void 0:p.custom:void 0);if(h){const{transition:g,transitionEnd:y,...b}=h;c={...c,...b,...y}}return c};function s(l){e=l(t)}function a(l){const{props:c}=t,f=lq(t.parent)||{},h=[],p=new Set;let g={},y=1/0;for(let v=0;v<Bse;v++){const w=Fse[v],S=n[w],T=c[w]!==void 0?c[w]:f[w],A=Np(T),k=w===l?S.isActive:null;k===!1&&(y=v);let E=T===f[w]&&T!==c[w]&&A;if(E&&r&&t.manuallyAnimateOnMount&&(E=!1),S.protectedKeys={...g},!S.isActive&&k===null||!T&&!S.prevProp||tx(T)||typeof T=="boolean")continue;const I=Vse(S.prevProp,T);let N=I||w===l&&S.isActive&&!E&&A||v>y&&A,_=!1;const D=Array.isArray(T)?T:[T];let O=D.reduce(i(w),{});k===!1&&(O={});const{prevResolvedValues:P={}}=S,z={...P,...O},W=F=>{N=!0,p.has(F)&&(_=!0,p.delete(F)),S.needsAnimating[F]=!0;const B=t.getValue(F);B&&(B.liveStyle=!1)};for(const F in z){const B=O[F],K=P[F];if(g.hasOwnProperty(F))continue;let L=!1;FE(B)&&FE(K)?L=!oq(B,K):L=B!==K,L?B!=null?W(F):p.add(F):B!==void 0&&p.has(F)?W(F):S.protectedKeys[F]=!0}S.prevProp=T,S.prevResolvedValues=O,S.isActive&&(g={...g,...O}),r&&t.blockInitialAnimation&&(N=!1),N&&(!(E&&I)||_)&&h.push(...D.map(F=>({animation:F,options:{type:w}})))}if(p.size){const v={};if(typeof c.initial!="boolean"){const w=_p(t,Array.isArray(c.initial)?c.initial[0]:c.initial);w&&w.transition&&(v.transition=w.transition)}p.forEach(w=>{const S=t.getBaseTarget(w),T=t.getValue(w);T&&(T.liveStyle=!0),v[w]=S??null}),h.push({animation:v})}let b=!!h.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(b=!1),r=!1,b?e(h):Promise.resolve()}function o(l,c){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(p=>{var g;return(g=p.animationState)==null?void 0:g.setActive(l,c)}),n[l].isActive=c;const f=a(l);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>n,reset:()=>{n=tF(),r=!0}}}function Vse(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!oq(e,t):!1}function Ql(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function tF(){return{animate:Ql(!0),whileInView:Ql(),whileHover:Ql(),whileTap:Ql(),whileDrag:Ql(),whileFocus:Ql(),exit:Ql()}}class yl{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Use extends yl{constructor(e){super(e),e.animationState||(e.animationState=jse(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();tx(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let Wse=0;class Gse extends yl{constructor(){super(...arguments),this.id=Wse++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const qse={animation:{Feature:Use},exit:{Feature:Gse}};function Rp(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Rm(t){return{point:{x:t.pageX,y:t.pageY}}}const Hse=t=>e=>SN(e)&&t(e,Rm(e));function gp(t,e,n,r){return Rp(t,e,Hse(n),r)}function cq({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Kse({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Xse(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const uq=1e-4,Yse=1-uq,Zse=1+uq,fq=.01,Qse=0-fq,Jse=0+fq;function Hr(t){return t.max-t.min}function eae(t,e,n){return Math.abs(t-e)<=n}function nF(t,e,n,r=.5){t.origin=r,t.originPoint=fn(e.min,e.max,t.origin),t.scale=Hr(n)/Hr(e),t.translate=fn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Yse&&t.scale<=Zse||isNaN(t.scale))&&(t.scale=1),(t.translate>=Qse&&t.translate<=Jse||isNaN(t.translate))&&(t.translate=0)}function yp(t,e,n,r){nF(t.x,e.x,n.x,r?r.originX:void 0),nF(t.y,e.y,n.y,r?r.originY:void 0)}function rF(t,e,n){t.min=n.min+e.min,t.max=t.min+Hr(e)}function tae(t,e,n){rF(t.x,e.x,n.x),rF(t.y,e.y,n.y)}function iF(t,e,n){t.min=e.min-n.min,t.max=t.min+Hr(e)}function vp(t,e,n){iF(t.x,e.x,n.x),iF(t.y,e.y,n.y)}const sF=()=>({translate:0,scale:1,origin:0,originPoint:0}),cf=()=>({x:sF(),y:sF()}),aF=()=>({min:0,max:0}),$n=()=>({x:aF(),y:aF()});function Zi(t){return[t("x"),t("y")]}function zC(t){return t===void 0||t===1}function jE({scale:t,scaleX:e,scaleY:n}){return!zC(t)||!zC(e)||!zC(n)}function ac(t){return jE(t)||hq(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function hq(t){return oF(t.x)||oF(t.y)}function oF(t){return t&&t!=="0%"}function C0(t,e,n){const r=t-n,i=e*r;return n+i}function lF(t,e,n,r,i){return i!==void 0&&(t=C0(t,i,r)),C0(t,n,r)+e}function VE(t,e=0,n=1,r,i){t.min=lF(t.min,e,n,r,i),t.max=lF(t.max,e,n,r,i)}function dq(t,{x:e,y:n}){VE(t.x,e.translate,e.scale,e.originPoint),VE(t.y,n.translate,n.scale,n.originPoint)}const cF=.999999999999,uF=1.0000000000001;function nae(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,a;for(let o=0;o<i;o++){s=n[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ff(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,dq(t,a)),r&&ac(s.latestValues)&&ff(t,s.latestValues))}e.x<uF&&e.x>cF&&(e.x=1),e.y<uF&&e.y>cF&&(e.y=1)}function uf(t,e){t.min=t.min+e,t.max=t.max+e}function fF(t,e,n,r,i=.5){const s=fn(t.min,t.max,i);VE(t,e,n,s,r)}function ff(t,e){fF(t.x,e.x,e.scaleX,e.scale,e.originX),fF(t.y,e.y,e.scaleY,e.scale,e.originY)}function pq(t,e){return cq(Xse(t.getBoundingClientRect(),e))}function rae(t,e,n){const r=pq(t,n),{scroll:i}=e;return i&&(uf(r.x,i.offset.x),uf(r.y,i.offset.y)),r}const mq=({current:t})=>t?t.ownerDocument.defaultView:null,hF=(t,e)=>Math.abs(t-e);function iae(t,e){const n=hF(t.x,e.x),r=hF(t.y,e.y);return Math.sqrt(n**2+r**2)}class gq{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=VC(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=iae(h.offset,{x:0,y:0})>=3;if(!p&&!g)return;const{point:y}=h,{timestamp:b}=yr;this.history.push({...y,timestamp:b});const{onStart:v,onMove:w}=this.handlers;p||(v&&v(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=jC(p,this.transformPagePoint),dn.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:g,onSessionEnd:y,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=VC(h.type==="pointercancel"?this.lastMoveEventInfo:jC(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(h,v),y&&y(h,v)},!SN(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const a=Rm(e),o=jC(a,this.transformPagePoint),{point:l}=o,{timestamp:c}=yr;this.history=[{...l,timestamp:c}];const{onSessionStart:f}=n;f&&f(e,VC(o,this.history)),this.removeListeners=Nm(gp(this.contextWindow,"pointermove",this.handlePointerMove),gp(this.contextWindow,"pointerup",this.handlePointerUp),gp(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cl(this.updatePoint)}}function jC(t,e){return e?{point:e(t.point)}:t}function dF(t,e){return{x:t.x-e.x,y:t.y-e.y}}function VC({point:t},e){return{point:t,delta:dF(t,yq(e)),offset:dF(t,sae(e)),velocity:aae(e,.1)}}function sae(t){return t[0]}function yq(t){return t[t.length-1]}function aae(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=yq(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Qs(e)));)n--;if(!r)return{x:0,y:0};const s=Js(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function oae(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?fn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?fn(n,t,r.max):Math.min(t,n)),t}function pF(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function lae(t,{top:e,left:n,bottom:r,right:i}){return{x:pF(t.x,n,i),y:pF(t.y,e,r)}}function mF(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function cae(t,e){return{x:mF(t.x,e.x),y:mF(t.y,e.y)}}function uae(t,e){let n=.5;const r=Hr(t),i=Hr(e);return i>r?n=Ep(e.min,e.max-r,t.min):r>i&&(n=Ep(t.min,t.max-i,e.min)),to(0,1,n)}function fae(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const UE=.35;function hae(t=UE){return t===!1?t=0:t===!0&&(t=UE),{x:gF(t,"left","right"),y:gF(t,"top","bottom")}}function gF(t,e,n){return{min:yF(t,e),max:yF(t,n)}}function yF(t,e){return typeof t=="number"?t:t[e]||0}const dae=new WeakMap;class pae{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=$n(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Rm(f).point)},s=(f,h)=>{const{drag:p,dragPropagation:g,onDragStart:y}=this.getProps();if(p&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=$ie(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Zi(v=>{let w=this.getAxisMotionValue(v).get()||0;if(ea.test(w)){const{projection:S}=this.visualElement;if(S&&S.layout){const T=S.layout.layoutBox[v];T&&(w=Hr(T)*(parseFloat(w)/100))}}this.originPoint[v]=w}),y&&dn.postRender(()=>y(f,h)),BE(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(f,h)=>{const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:y,onDrag:b}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:v}=h;if(g&&this.currentDirection===null){this.currentDirection=mae(v),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",h.point,v),this.updateAxis("y",h.point,v),this.visualElement.render(),b&&b(f,h)},o=(f,h)=>this.stop(f,h),l=()=>Zi(f=>{var h;return this.getAnimationState(f)==="paused"&&((h=this.getAxisMotionValue(f).animation)==null?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new gq(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:mq(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&dn.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Cv(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=oae(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&lf(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=lae(r.layoutBox,e):this.constraints=!1,this.elastic=hae(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Zi(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=fae(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!lf(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=rae(r,i.root,this.visualElement.getTransformPagePoint());let a=cae(i.layout.layoutBox,s);if(n){const o=n(Kse(a));this.hasMutatedConstraints=!!o,o&&(a=cq(o))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=Zi(f=>{if(!Cv(f,n,this.currentDirection))return;let h=l&&l[f]||{};a&&(h={min:0,max:0});const p=i?200:1e6,g=i?40:1e7,y={type:"inertia",velocity:r?e[f]:0,bounceStiffness:p,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(f,y)});return Promise.all(c).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return BE(this.visualElement,e),r.start(_N(e,r,0,n,this.visualElement,!1))}stopAnimation(){Zi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Zi(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Zi(n=>{const{drag:r}=this.getProps();if(!Cv(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[n];s.set(e[n]-fn(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!lf(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Zi(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=uae({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Zi(a=>{if(!Cv(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set(fn(l,c,i[a]))})}addListeners(){if(!this.visualElement.current)return;dae.set(this.visualElement,this);const e=this.visualElement.current,n=gp(e,"pointerdown",l=>{const{drag:c,dragListener:f=!0}=this.getProps();c&&f&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();lf(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),dn.read(r);const a=Rp(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Zi(f=>{const h=this.getAxisMotionValue(f);h&&(this.originPoint[f]+=l[f].translate,h.set(h.get()+l[f].translate))}),this.visualElement.render())});return()=>{a(),n(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=UE,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function Cv(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function mae(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class gae extends yl{constructor(e){super(e),this.removeGroupControls=is,this.removeListeners=is,this.controls=new pae(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||is}unmount(){this.removeGroupControls(),this.removeListeners()}}const vF=t=>(e,n)=>{t&&dn.postRender(()=>t(e,n))};class yae extends yl{constructor(){super(...arguments),this.removePointerDownListener=is}onPointerDown(e){this.session=new gq(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:mq(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:vF(e),onStart:vF(n),onMove:r,onEnd:(s,a)=>{delete this.session,i&&dn.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=gp(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const o0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function bF(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Fd={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(tt.test(t))t=parseFloat(t);else return t;const n=bF(t,e.target.x),r=bF(t,e.target.y);return`${n}% ${r}%`}},vae={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=ul.parse(t);if(i.length>5)return r;const s=ul.createTransformer(t),a=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;i[0+a]/=o,i[1+a]/=l;const c=fn(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=c),typeof i[3+a]=="number"&&(i[3+a]/=c),s(i)}};class bae extends q.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;rse(xae),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),o0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:a}=r;return a&&(a.isPresent=s,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||dn.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),wN.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function vq(t){const[e,n]=G6(),r=q.useContext(QI);return V.jsx(bae,{...t,layoutGroup:r,switchLayoutGroup:q.useContext(Y6),isPresent:e,safeToRemove:n})}const xae={borderRadius:{...Fd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Fd,borderTopRightRadius:Fd,borderBottomLeftRadius:Fd,borderBottomRightRadius:Fd,boxShadow:vae};function wae(t,e,n){const r=Fr(t)?t:kf(t);return r.start(_N("",r,e,n)),r.animation}const Sae=(t,e)=>t.depth-e.depth;class Cae{constructor(){this.children=[],this.isDirty=!1}add(e){tN(this.children,e),this.isDirty=!0}remove(e){nN(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Sae),this.isDirty=!1,this.children.forEach(e)}}function Tae(t,e){const n=ci.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(cl(r),t(s-e))};return dn.setup(r,!0),()=>cl(r)}const bq=["TopLeft","TopRight","BottomLeft","BottomRight"],kae=bq.length,xF=t=>typeof t=="string"?parseFloat(t):t,wF=t=>typeof t=="number"||tt.test(t);function Aae(t,e,n,r,i,s){i?(t.opacity=fn(0,n.opacity??1,Eae(r)),t.opacityExit=fn(e.opacity??1,0,$ae(r))):s&&(t.opacity=fn(e.opacity??1,n.opacity??1,r));for(let a=0;a<kae;a++){const o=`border${bq[a]}Radius`;let l=SF(e,o),c=SF(n,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||wF(l)===wF(c)?(t[o]=Math.max(fn(xF(l),xF(c),r),0),(ea.test(c)||ea.test(l))&&(t[o]+="%")):t[o]=c}(e.rotate||n.rotate)&&(t.rotate=fn(e.rotate||0,n.rotate||0,r))}function SF(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Eae=xq(0,.5,h6),$ae=xq(.5,.95,is);function xq(t,e,n){return r=>r<t?0:r>e?1:n(Ep(t,e,r))}function CF(t,e){t.min=e.min,t.max=e.max}function qi(t,e){CF(t.x,e.x),CF(t.y,e.y)}function TF(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function kF(t,e,n,r,i){return t-=e,t=C0(t,1/n,r),i!==void 0&&(t=C0(t,1/i,r)),t}function Iae(t,e=0,n=1,r=.5,i,s=t,a=t){if(ea.test(e)&&(e=parseFloat(e),e=fn(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=fn(s.min,s.max,r);t===s&&(o-=e),t.min=kF(t.min,e,n,o,i),t.max=kF(t.max,e,n,o,i)}function AF(t,e,[n,r,i],s,a){Iae(t,e[n],e[r],e[i],e.scale,s,a)}const Nae=["x","scaleX","originX"],Oae=["y","scaleY","originY"];function EF(t,e,n,r){AF(t.x,e,Nae,n?n.x:void 0,r?r.x:void 0),AF(t.y,e,Oae,n?n.y:void 0,r?r.y:void 0)}function $F(t){return t.translate===0&&t.scale===1}function wq(t){return $F(t.x)&&$F(t.y)}function IF(t,e){return t.min===e.min&&t.max===e.max}function _ae(t,e){return IF(t.x,e.x)&&IF(t.y,e.y)}function NF(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Sq(t,e){return NF(t.x,e.x)&&NF(t.y,e.y)}function OF(t){return Hr(t.x)/Hr(t.y)}function _F(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Rae{constructor(){this.members=[]}add(e){tN(this.members,e),e.scheduleRender()}remove(e){if(nN(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Dae(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:f,rotateX:h,rotateY:p,skewX:g,skewY:y}=n;c&&(r=`perspective(${c}px) ${r}`),f&&(r+=`rotate(${f}deg) `),h&&(r+=`rotateX(${h}deg) `),p&&(r+=`rotateY(${p}deg) `),g&&(r+=`skewX(${g}deg) `),y&&(r+=`skewY(${y}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const UC=["","X","Y","Z"],Mae={visibility:"hidden"},Pae=1e3;let Lae=0;function WC(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Cq(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=sq(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",dn,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Cq(r)}function Tq({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},o=e==null?void 0:e()){this.id=Lae++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(zae),this.nodes.forEach(Gae),this.nodes.forEach(qae),this.nodes.forEach(jae)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Cae)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new sN),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=W6(a)&&!Die(a),this.instance=a;const{layoutId:o,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),t){let f;const h=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Tae(h,250),o0.hasAnimatedSinceResize&&(o0.hasAnimatedSinceResize=!1,this.nodes.forEach(DF))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&c&&(o||l)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeLayoutChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||c.getDefaultTransition()||Zae,{onLayoutAnimationStart:b,onLayoutAnimationComplete:v}=c.getProps(),w=!this.targetLayout||!Sq(this.targetLayout,g),S=!h&&p;if(this.options.layoutRoot||this.resumeFrom||S||h&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const T={...bN(y,"layout"),onPlay:b,onComplete:v};(c.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T),this.setAnimationOrigin(f,S)}else h||DF(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Hae),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Cq(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const h=this.path[f];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(RF);return}this.isUpdating||this.nodes.forEach(Uae),this.isUpdating=!1,this.nodes.forEach(Wae),this.nodes.forEach(Fae),this.nodes.forEach(Bae),this.clearAllSnapshots();const o=ci.now();yr.delta=to(0,1e3/60,o-yr.timestamp),yr.timestamp=o,yr.isProcessing=!0,MC.update.process(yr),MC.preRender.process(yr),MC.render.process(yr),yr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,wN.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Vae),this.sharedNodes.forEach(Kae)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,dn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){dn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Hr(this.snapshot.measuredBox.x)&&!Hr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=$n(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!wq(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,f=c!==this.prevTransformTemplateValue;a&&this.instance&&(o||ac(this.latestValues)||f)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),Qae(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:a}=this.options;if(!a)return $n();const o=a.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(Jae))){const{scroll:f}=this.root;f&&(uf(o.x,f.offset.x),uf(o.y,f.offset.y))}return o}removeElementScroll(a){var l;const o=$n();if(qi(o,a),(l=this.scroll)!=null&&l.wasRoot)return o;for(let c=0;c<this.path.length;c++){const f=this.path[c],{scroll:h,options:p}=f;f!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&qi(o,a),uf(o.x,h.offset.x),uf(o.y,h.offset.y))}return o}applyTransform(a,o=!1){const l=$n();qi(l,a);for(let c=0;c<this.path.length;c++){const f=this.path[c];!o&&f.options.layoutScroll&&f.scroll&&f!==f.root&&ff(l,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),ac(f.latestValues)&&ff(l,f.latestValues)}return ac(this.latestValues)&&ff(l,this.latestValues),l}removeTransform(a){const o=$n();qi(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!ac(c.latestValues))continue;jE(c.latestValues)&&c.updateSnapshot();const f=$n(),h=c.measurePageBox();qi(f,h),EF(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,f)}return ac(this.latestValues)&&EF(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==yr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var p;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=yr.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$n(),this.relativeTargetOrigin=$n(),vp(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),qi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=$n(),this.targetWithTransforms=$n()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),tae(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):qi(this.target,this.layout.layoutBox),dq(this.target,this.targetDelta)):qi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$n(),this.relativeTargetOrigin=$n(),vp(this.relativeTargetOrigin,this.target,g.target),qi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||jE(this.parent.latestValues)||hq(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var y;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===yr.timestamp&&(l=!1),l)return;const{layout:c,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||f))return;qi(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;nae(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=$n());const{target:g}=a;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(TF(this.prevProjectionDelta.x,this.projectionDelta.x),TF(this.prevProjectionDelta.y,this.projectionDelta.y)),yp(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!_F(this.projectionDelta.x,this.prevProjectionDelta.x)||!_F(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=cf(),this.projectionDelta=cf(),this.projectionDeltaWithTransform=cf()}setAnimationOrigin(a,o=!1){const l=this.snapshot,c=l?l.latestValues:{},f={...this.latestValues},h=cf();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const p=$n(),g=l?l.source:void 0,y=this.layout?this.layout.source:void 0,b=g!==y,v=this.getStack(),w=!v||v.members.length<=1,S=!!(b&&!w&&this.options.crossfade===!0&&!this.path.some(Yae));this.animationProgress=0;let T;this.mixTargetDelta=A=>{const k=A/1e3;MF(h.x,a.x,k),MF(h.y,a.y,k),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vp(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Xae(this.relativeTarget,this.relativeTargetOrigin,p,k),T&&_ae(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=$n()),qi(T,this.relativeTarget)),b&&(this.animationValues=f,Aae(f,c,this.latestValues,k,S,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var o,l,c;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(cl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=dn.update(()=>{o0.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=kf(0)),this.currentAnimation=wae(this.motionValue,[0,1e3],{...a,isSync:!0,onUpdate:f=>{this.mixTargetDelta(f),a.onUpdate&&a.onUpdate(f)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Pae),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:f}=a;if(!(!o||!l||!c)){if(this!==a&&this.layout&&c&&kq(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||$n();const h=Hr(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+h;const p=Hr(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+p}qi(o,l),ff(o,f),yp(this.projectionDeltaWithTransform,this.layoutCorrected,o,f)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Rae),this.sharedNodes.get(a).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&WC("z",a,c,this.animationValues);for(let f=0;f<UC.length;f++)WC(`rotate${UC[f]}`,a,c,this.animationValues),WC(`skew${UC[f]}`,a,c,this.animationValues);a.render();for(const f in c)a.setStaticValue(f,c[f]),this.animationValues&&(this.animationValues[f]=c[f]);a.scheduleRender()}getProjectionStyles(a){if(!this.instance||this.isSVG)return;if(!this.isVisible)return Mae;const o={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,o.opacity="",o.pointerEvents=a0(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none",o;const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=a0(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!ac(this.latestValues)&&(g.transform=l?l({},""):"none",this.hasProjected=!1),g}const f=c.animationValues||c.latestValues;this.applyTransformsToTarget(),o.transform=Dae(this.projectionDeltaWithTransform,this.treeScale,f),l&&(o.transform=l(f,o.transform));const{x:h,y:p}=this.projectionDelta;o.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,c.animationValues?o.opacity=c===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:o.opacity=c===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const g in Op){if(f[g]===void 0)continue;const{correct:y,applyTo:b,isCSSVariable:v}=Op[g],w=o.transform==="none"?f[g]:y(f[g],c);if(b){const S=b.length;for(let T=0;T<S;T++)o[b[T]]=w}else v?this.options.visualElement.renderState.vars[g]=w:o[g]=w}return this.options.layoutId&&(o.pointerEvents=c===this?a0(a==null?void 0:a.pointerEvents)||"":"none"),o}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(RF),this.root.sharedNodes.clear()}}}function Fae(t){t.updateLayout()}function Bae(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,a=e.source!==t.layout.source;s==="size"?Zi(h=>{const p=a?e.measuredBox[h]:e.layoutBox[h],g=Hr(p);p.min=r[h].min,p.max=p.min+g}):kq(s,e.layoutBox,r)&&Zi(h=>{const p=a?e.measuredBox[h]:e.layoutBox[h],g=Hr(r[h]);p.max=p.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+g)});const o=cf();yp(o,r,e.layoutBox);const l=cf();a?yp(l,t.applyTransform(i,!0),e.measuredBox):yp(l,r,e.layoutBox);const c=!wq(o);let f=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:g}=h;if(p&&g){const y=$n();vp(y,e.layoutBox,p.layoutBox);const b=$n();vp(b,r,g.layoutBox),Sq(y,b)||(f=!0),h.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=y,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:f})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function zae(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function jae(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Vae(t){t.clearSnapshot()}function RF(t){t.clearMeasurements()}function Uae(t){t.isLayoutDirty=!1}function Wae(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function DF(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Gae(t){t.resolveTargetDelta()}function qae(t){t.calcProjection()}function Hae(t){t.resetSkewAndRotation()}function Kae(t){t.removeLeadSnapshot()}function MF(t,e,n){t.translate=fn(e.translate,0,n),t.scale=fn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function PF(t,e,n,r){t.min=fn(e.min,n.min,r),t.max=fn(e.max,n.max,r)}function Xae(t,e,n,r){PF(t.x,e.x,n.x,r),PF(t.y,e.y,n.y,r)}function Yae(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Zae={duration:.45,ease:[.4,0,.1,1]},LF=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),FF=LF("applewebkit/")&&!LF("chrome/")?Math.round:is;function BF(t){t.min=FF(t.min),t.max=FF(t.max)}function Qae(t){BF(t.x),BF(t.y)}function kq(t,e,n){return t==="position"||t==="preserve-aspect"&&!eae(OF(e),OF(n),.2)}function Jae(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const eoe=Tq({attachResizeListener:(t,e)=>Rp(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),GC={current:void 0},Aq=Tq({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!GC.current){const t=new eoe({});t.mount(window),t.setOptions({layoutScroll:!0}),GC.current=t}return GC.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),toe={pan:{Feature:yae},drag:{Feature:gae,ProjectionNode:Aq,MeasureLayout:vq}};function zF(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&dn.postRender(()=>s(e,Rm(e)))}class noe extends yl{mount(){const{current:e}=this.node;e&&(this.unmount=Iie(e,(n,r)=>(zF(this.node,r,"Start"),i=>zF(this.node,i,"End"))))}unmount(){}}class roe extends yl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Nm(Rp(this.node.current,"focus",()=>this.onFocus()),Rp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function jF(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&dn.postRender(()=>s(e,Rm(e)))}class ioe extends yl{mount(){const{current:e}=this.node;e&&(this.unmount=Rie(e,(n,r)=>(jF(this.node,r,"Start"),(i,{success:s})=>jF(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const WE=new WeakMap,qC=new WeakMap,soe=t=>{const e=WE.get(t.target);e&&e(t)},aoe=t=>{t.forEach(soe)};function ooe({root:t,...e}){const n=t||document;qC.has(n)||qC.set(n,{});const r=qC.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(aoe,{root:t,...e})),r[i]}function loe(t,e,n){const r=ooe(e);return WE.set(t,n),r.observe(t),()=>{WE.delete(t),r.unobserve(t)}}const coe={some:0,all:1};class uoe extends yl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:coe[i]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:f,onViewportLeave:h}=this.node.getProps(),p=c?f:h;p&&p(l)};return loe(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(foe(e,n))&&this.startObserver()}unmount(){}}function foe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const hoe={inView:{Feature:uoe},tap:{Feature:ioe},focus:{Feature:roe},hover:{Feature:noe}},doe={layout:{ProjectionNode:Aq,MeasureLayout:vq}},GE={current:null},Eq={current:!1};function poe(){if(Eq.current=!0,!!eN)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>GE.current=t.matches;t.addListener(e),e()}else GE.current=!1}const moe=new WeakMap;function goe(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Fr(i))t.addValue(r,i);else if(Fr(s))t.addValue(r,kf(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=t.getStaticValue(r);t.addValue(r,kf(a!==void 0?a:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const VF=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class yoe{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=yN,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=ci.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,dn.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=nx(n),this.isVariantNode=K6(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in h){const g=h[p];l[p]!==void 0&&Fr(g)&&g.set(l[p],!1)}}mount(e){this.current=e,moe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Eq.current||poe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:GE.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),cl(this.notifyUpdate),cl(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ch.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&dn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Af){const n=Af[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):$n()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<VF.length;r++){const i=VF[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=goe(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=kf(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(n6(r)||i6(r))?r=parseFloat(r):!Pie(r)&&ul.test(n)&&(r=B6(e,n)),this.setBaseTarget(e,Fr(r)?r.get():r)),Fr(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=NN(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Fr(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new sN),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class $q extends yoe{constructor(){super(...arguments),this.KeyframeResolver=Tie}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Fr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Iq(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}function voe(t){return window.getComputedStyle(t)}class boe extends $q{constructor(){super(...arguments),this.type="html",this.renderInstance=Iq}readValueFromInstance(e,n){var r;if(ch.has(n))return(r=this.projection)!=null&&r.isProjecting?_E(n):Ure(e,n);{const i=voe(e),s=(lN(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return pq(e,n)}build(e,n,r){EN(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return ON(e,n,r)}}const Nq=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function xoe(t,e,n,r){Iq(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(Nq.has(i)?i:AN(i),e.attrs[i])}class woe extends $q{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=$n}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ch.has(n)){const r=F6(n);return r&&r.default||0}return n=Nq.has(n)?n:AN(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return iq(e,n,r)}build(e,n,r){eq(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){xoe(e,n,r,i)}mount(e){this.isSVGTag=nq(e.tagName),super.mount(e)}}const Soe=(t,e)=>IN(t)?new woe(e):new boe(e,{allowProjection:t!==q.Fragment}),Coe=xse({...qse,...hoe,...toe,...doe},Soe),vr=Gie(Coe);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Toe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),koe=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),UF=t=>{const e=koe(t);return e.charAt(0).toUpperCase()+e.slice(1)},Oq=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),Aoe=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Eoe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $oe=q.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...o},l)=>q.createElement("svg",{ref:l,...Eoe,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Oq("lucide",i),...!s&&!Aoe(o)&&{"aria-hidden":"true"},...o},[...a.map(([c,f])=>q.createElement(c,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=(t,e)=>{const n=q.forwardRef(({className:r,...i},s)=>q.createElement($oe,{ref:s,iconNode:e,className:Oq(`lucide-${Toe(UF(t))}`,`lucide-${t}`,r),...i}));return n.displayName=UF(t),n};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ioe=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Noe=mi("activity",Ioe);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ooe=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],_oe=mi("brain",Ooe);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Roe=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],WF=mi("circle-check-big",Roe);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Doe=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],GF=mi("dollar-sign",Doe);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Moe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Poe=mi("globe",Moe);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Loe=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Foe=mi("heart",Loe);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Boe=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],zoe=mi("pause",Boe);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const joe=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Voe=mi("phone",joe);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uoe=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Woe=mi("play",Uoe);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Goe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],qF=mi("shield",Goe);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qoe=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],HF=mi("trending-up",qoe);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hoe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],HC=mi("triangle-alert",Hoe);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Koe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Xoe=mi("users",Koe);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yoe=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Zoe=mi("zap",Yoe);function _q(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=_q(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function St(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=_q(t))&&(r&&(r+=" "),r+=e);return r}const RN="-",Qoe=t=>{const e=ele(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const o=a.split(RN);return o[0]===""&&o.length!==1&&o.shift(),Rq(o,e)||Joe(a)},getConflictingClassGroupIds:(a,o)=>{const l=n[a]||[];return o&&r[a]?[...l,...r[a]]:l}}},Rq=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?Rq(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(RN);return(a=e.validators.find(({validator:o})=>o(s)))==null?void 0:a.classGroupId},KF=/^\[(.+)\]$/,Joe=t=>{if(KF.test(t)){const e=KF.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},ele=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const i in n)qE(n[i],r,i,e);return r},qE=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:XF(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(tle(i)){qE(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,a])=>{qE(a,XF(e,s),n,r)})})},XF=(t,e)=>{let n=t;return e.split(RN).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},tle=t=>t.isThemeGetter,nle=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,a)=>{n.set(s,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let a=n.get(s);if(a!==void 0)return a;if((a=r.get(s))!==void 0)return i(s,a),a},set(s,a){n.has(s)?n.set(s,a):i(s,a)}}},HE="!",KE=":",rle=KE.length,ile=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const s=[];let a=0,o=0,l=0,c;for(let y=0;y<i.length;y++){let b=i[y];if(a===0&&o===0){if(b===KE){s.push(i.slice(l,y)),l=y+rle;continue}if(b==="/"){c=y;continue}}b==="["?a++:b==="]"?a--:b==="("?o++:b===")"&&o--}const f=s.length===0?i:i.substring(l),h=sle(f),p=h!==f,g=c&&c>l?c-l:void 0;return{modifiers:s,hasImportantModifier:p,baseClassName:h,maybePostfixModifierPosition:g}};if(e){const i=e+KE,s=r;r=a=>a.startsWith(i)?s(a.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},sle=t=>t.endsWith(HE)?t.substring(0,t.length-1):t.startsWith(HE)?t.substring(1):t,ale=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let s=[];return r.forEach(a=>{a[0]==="["||e[a]?(i.push(...s.sort(),a),s=[]):s.push(a)}),i.push(...s.sort()),i}},ole=t=>({cache:nle(t.cacheSize),parseClassName:ile(t),sortModifiers:ale(t),...Qoe(t)}),lle=/\s+/,cle=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=e,a=[],o=t.trim().split(lle);let l="";for(let c=o.length-1;c>=0;c-=1){const f=o[c],{isExternal:h,modifiers:p,hasImportantModifier:g,baseClassName:y,maybePostfixModifierPosition:b}=n(f);if(h){l=f+(l.length>0?" "+l:l);continue}let v=!!b,w=r(v?y.substring(0,b):y);if(!w){if(!v){l=f+(l.length>0?" "+l:l);continue}if(w=r(y),!w){l=f+(l.length>0?" "+l:l);continue}v=!1}const S=s(p).join(":"),T=g?S+HE:S,A=T+w;if(a.includes(A))continue;a.push(A);const k=i(w,v);for(let E=0;E<k.length;++E){const I=k[E];a.push(T+I)}l=f+(l.length>0?" "+l:l)}return l};function ule(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=Dq(e))&&(r&&(r+=" "),r+=n);return r}const Dq=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=Dq(t[r]))&&(n&&(n+=" "),n+=e);return n};function fle(t,...e){let n,r,i,s=a;function a(l){const c=e.reduce((f,h)=>h(f),t());return n=ole(c),r=n.cache.get,i=n.cache.set,s=o,o(l)}function o(l){const c=r(l);if(c)return c;const f=cle(l,n);return i(l,f),f}return function(){return s(ule.apply(null,arguments))}}const Hn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},Mq=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Pq=/^\((?:(\w[\w-]*):)?(.+)\)$/i,hle=/^\d+\/\d+$/,dle=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ple=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,mle=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,gle=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,yle=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Yu=t=>hle.test(t),ut=t=>!!t&&!Number.isNaN(Number(t)),Wo=t=>!!t&&Number.isInteger(Number(t)),KC=t=>t.endsWith("%")&&ut(t.slice(0,-1)),Da=t=>dle.test(t),vle=()=>!0,ble=t=>ple.test(t)&&!mle.test(t),Lq=()=>!1,xle=t=>gle.test(t),wle=t=>yle.test(t),Sle=t=>!Le(t)&&!Fe(t),Cle=t=>uh(t,zq,Lq),Le=t=>Mq.test(t),Jl=t=>uh(t,jq,ble),XC=t=>uh(t,$le,ut),YF=t=>uh(t,Fq,Lq),Tle=t=>uh(t,Bq,wle),Tv=t=>uh(t,Vq,xle),Fe=t=>Pq.test(t),Bd=t=>fh(t,jq),kle=t=>fh(t,Ile),ZF=t=>fh(t,Fq),Ale=t=>fh(t,zq),Ele=t=>fh(t,Bq),kv=t=>fh(t,Vq,!0),uh=(t,e,n)=>{const r=Mq.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},fh=(t,e,n=!1)=>{const r=Pq.exec(t);return r?r[1]?e(r[1]):n:!1},Fq=t=>t==="position"||t==="percentage",Bq=t=>t==="image"||t==="url",zq=t=>t==="length"||t==="size"||t==="bg-size",jq=t=>t==="length",$le=t=>t==="number",Ile=t=>t==="family-name",Vq=t=>t==="shadow",Nle=()=>{const t=Hn("color"),e=Hn("font"),n=Hn("text"),r=Hn("font-weight"),i=Hn("tracking"),s=Hn("leading"),a=Hn("breakpoint"),o=Hn("container"),l=Hn("spacing"),c=Hn("radius"),f=Hn("shadow"),h=Hn("inset-shadow"),p=Hn("text-shadow"),g=Hn("drop-shadow"),y=Hn("blur"),b=Hn("perspective"),v=Hn("aspect"),w=Hn("ease"),S=Hn("animate"),T=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...A(),Fe,Le],E=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],N=()=>[Fe,Le,l],_=()=>[Yu,"full","auto",...N()],D=()=>[Wo,"none","subgrid",Fe,Le],O=()=>["auto",{span:["full",Wo,Fe,Le]},Wo,Fe,Le],P=()=>[Wo,"auto",Fe,Le],z=()=>["auto","min","max","fr",Fe,Le],W=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],U=()=>["start","end","center","stretch","center-safe","end-safe"],R=()=>["auto",...N()],F=()=>[Yu,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],B=()=>[t,Fe,Le],K=()=>[...A(),ZF,YF,{position:[Fe,Le]}],L=()=>["no-repeat",{repeat:["","x","y","space","round"]}],H=()=>["auto","cover","contain",Ale,Cle,{size:[Fe,Le]}],X=()=>[KC,Bd,Jl],Y=()=>["","none","full",c,Fe,Le],ie=()=>["",ut,Bd,Jl],pe=()=>["solid","dashed","dotted","double"],ve=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ke=()=>[ut,KC,ZF,YF],Ee=()=>["","none",y,Fe,Le],me=()=>["none",ut,Fe,Le],$e=()=>["none",ut,Fe,Le],Ie=()=>[ut,Fe,Le],ye=()=>[Yu,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Da],breakpoint:[Da],color:[vle],container:[Da],"drop-shadow":[Da],ease:["in","out","in-out"],font:[Sle],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Da],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Da],shadow:[Da],spacing:["px",ut],text:[Da],"text-shadow":[Da],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Yu,Le,Fe,v]}],container:["container"],columns:[{columns:[ut,Le,Fe,o]}],"break-after":[{"break-after":T()}],"break-before":[{"break-before":T()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:_()}],"inset-x":[{"inset-x":_()}],"inset-y":[{"inset-y":_()}],start:[{start:_()}],end:[{end:_()}],top:[{top:_()}],right:[{right:_()}],bottom:[{bottom:_()}],left:[{left:_()}],visibility:["visible","invisible","collapse"],z:[{z:[Wo,"auto",Fe,Le]}],basis:[{basis:[Yu,"full","auto",o,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ut,Yu,"auto","initial","none",Le]}],grow:[{grow:["",ut,Fe,Le]}],shrink:[{shrink:["",ut,Fe,Le]}],order:[{order:[Wo,"first","last","none",Fe,Le]}],"grid-cols":[{"grid-cols":D()}],"col-start-end":[{col:O()}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":D()}],"row-start-end":[{row:O()}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":z()}],"auto-rows":[{"auto-rows":z()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[...W(),"normal"]}],"justify-items":[{"justify-items":[...U(),"normal"]}],"justify-self":[{"justify-self":["auto",...U()]}],"align-content":[{content:["normal",...W()]}],"align-items":[{items:[...U(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...U(),{baseline:["","last"]}]}],"place-content":[{"place-content":W()}],"place-items":[{"place-items":[...U(),"baseline"]}],"place-self":[{"place-self":["auto",...U()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:R()}],mx:[{mx:R()}],my:[{my:R()}],ms:[{ms:R()}],me:[{me:R()}],mt:[{mt:R()}],mr:[{mr:R()}],mb:[{mb:R()}],ml:[{ml:R()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:F()}],w:[{w:[o,"screen",...F()]}],"min-w":[{"min-w":[o,"screen","none",...F()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[a]},...F()]}],h:[{h:["screen","lh",...F()]}],"min-h":[{"min-h":["screen","lh","none",...F()]}],"max-h":[{"max-h":["screen","lh",...F()]}],"font-size":[{text:["base",n,Bd,Jl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Fe,XC]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",KC,Le]}],"font-family":[{font:[kle,Le,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Fe,Le]}],"line-clamp":[{"line-clamp":[ut,"none",Fe,XC]}],leading:[{leading:[s,...N()]}],"list-image":[{"list-image":["none",Fe,Le]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Fe,Le]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:B()}],"text-color":[{text:B()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...pe(),"wavy"]}],"text-decoration-thickness":[{decoration:[ut,"from-font","auto",Fe,Jl]}],"text-decoration-color":[{decoration:B()}],"underline-offset":[{"underline-offset":[ut,"auto",Fe,Le]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Fe,Le]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Fe,Le]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:K()}],"bg-repeat":[{bg:L()}],"bg-size":[{bg:H()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Wo,Fe,Le],radial:["",Fe,Le],conic:[Wo,Fe,Le]},Ele,Tle]}],"bg-color":[{bg:B()}],"gradient-from-pos":[{from:X()}],"gradient-via-pos":[{via:X()}],"gradient-to-pos":[{to:X()}],"gradient-from":[{from:B()}],"gradient-via":[{via:B()}],"gradient-to":[{to:B()}],rounded:[{rounded:Y()}],"rounded-s":[{"rounded-s":Y()}],"rounded-e":[{"rounded-e":Y()}],"rounded-t":[{"rounded-t":Y()}],"rounded-r":[{"rounded-r":Y()}],"rounded-b":[{"rounded-b":Y()}],"rounded-l":[{"rounded-l":Y()}],"rounded-ss":[{"rounded-ss":Y()}],"rounded-se":[{"rounded-se":Y()}],"rounded-ee":[{"rounded-ee":Y()}],"rounded-es":[{"rounded-es":Y()}],"rounded-tl":[{"rounded-tl":Y()}],"rounded-tr":[{"rounded-tr":Y()}],"rounded-br":[{"rounded-br":Y()}],"rounded-bl":[{"rounded-bl":Y()}],"border-w":[{border:ie()}],"border-w-x":[{"border-x":ie()}],"border-w-y":[{"border-y":ie()}],"border-w-s":[{"border-s":ie()}],"border-w-e":[{"border-e":ie()}],"border-w-t":[{"border-t":ie()}],"border-w-r":[{"border-r":ie()}],"border-w-b":[{"border-b":ie()}],"border-w-l":[{"border-l":ie()}],"divide-x":[{"divide-x":ie()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ie()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...pe(),"hidden","none"]}],"divide-style":[{divide:[...pe(),"hidden","none"]}],"border-color":[{border:B()}],"border-color-x":[{"border-x":B()}],"border-color-y":[{"border-y":B()}],"border-color-s":[{"border-s":B()}],"border-color-e":[{"border-e":B()}],"border-color-t":[{"border-t":B()}],"border-color-r":[{"border-r":B()}],"border-color-b":[{"border-b":B()}],"border-color-l":[{"border-l":B()}],"divide-color":[{divide:B()}],"outline-style":[{outline:[...pe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ut,Fe,Le]}],"outline-w":[{outline:["",ut,Bd,Jl]}],"outline-color":[{outline:B()}],shadow:[{shadow:["","none",f,kv,Tv]}],"shadow-color":[{shadow:B()}],"inset-shadow":[{"inset-shadow":["none",h,kv,Tv]}],"inset-shadow-color":[{"inset-shadow":B()}],"ring-w":[{ring:ie()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:B()}],"ring-offset-w":[{"ring-offset":[ut,Jl]}],"ring-offset-color":[{"ring-offset":B()}],"inset-ring-w":[{"inset-ring":ie()}],"inset-ring-color":[{"inset-ring":B()}],"text-shadow":[{"text-shadow":["none",p,kv,Tv]}],"text-shadow-color":[{"text-shadow":B()}],opacity:[{opacity:[ut,Fe,Le]}],"mix-blend":[{"mix-blend":[...ve(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ve()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ut]}],"mask-image-linear-from-pos":[{"mask-linear-from":ke()}],"mask-image-linear-to-pos":[{"mask-linear-to":ke()}],"mask-image-linear-from-color":[{"mask-linear-from":B()}],"mask-image-linear-to-color":[{"mask-linear-to":B()}],"mask-image-t-from-pos":[{"mask-t-from":ke()}],"mask-image-t-to-pos":[{"mask-t-to":ke()}],"mask-image-t-from-color":[{"mask-t-from":B()}],"mask-image-t-to-color":[{"mask-t-to":B()}],"mask-image-r-from-pos":[{"mask-r-from":ke()}],"mask-image-r-to-pos":[{"mask-r-to":ke()}],"mask-image-r-from-color":[{"mask-r-from":B()}],"mask-image-r-to-color":[{"mask-r-to":B()}],"mask-image-b-from-pos":[{"mask-b-from":ke()}],"mask-image-b-to-pos":[{"mask-b-to":ke()}],"mask-image-b-from-color":[{"mask-b-from":B()}],"mask-image-b-to-color":[{"mask-b-to":B()}],"mask-image-l-from-pos":[{"mask-l-from":ke()}],"mask-image-l-to-pos":[{"mask-l-to":ke()}],"mask-image-l-from-color":[{"mask-l-from":B()}],"mask-image-l-to-color":[{"mask-l-to":B()}],"mask-image-x-from-pos":[{"mask-x-from":ke()}],"mask-image-x-to-pos":[{"mask-x-to":ke()}],"mask-image-x-from-color":[{"mask-x-from":B()}],"mask-image-x-to-color":[{"mask-x-to":B()}],"mask-image-y-from-pos":[{"mask-y-from":ke()}],"mask-image-y-to-pos":[{"mask-y-to":ke()}],"mask-image-y-from-color":[{"mask-y-from":B()}],"mask-image-y-to-color":[{"mask-y-to":B()}],"mask-image-radial":[{"mask-radial":[Fe,Le]}],"mask-image-radial-from-pos":[{"mask-radial-from":ke()}],"mask-image-radial-to-pos":[{"mask-radial-to":ke()}],"mask-image-radial-from-color":[{"mask-radial-from":B()}],"mask-image-radial-to-color":[{"mask-radial-to":B()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":A()}],"mask-image-conic-pos":[{"mask-conic":[ut]}],"mask-image-conic-from-pos":[{"mask-conic-from":ke()}],"mask-image-conic-to-pos":[{"mask-conic-to":ke()}],"mask-image-conic-from-color":[{"mask-conic-from":B()}],"mask-image-conic-to-color":[{"mask-conic-to":B()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:K()}],"mask-repeat":[{mask:L()}],"mask-size":[{mask:H()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Fe,Le]}],filter:[{filter:["","none",Fe,Le]}],blur:[{blur:Ee()}],brightness:[{brightness:[ut,Fe,Le]}],contrast:[{contrast:[ut,Fe,Le]}],"drop-shadow":[{"drop-shadow":["","none",g,kv,Tv]}],"drop-shadow-color":[{"drop-shadow":B()}],grayscale:[{grayscale:["",ut,Fe,Le]}],"hue-rotate":[{"hue-rotate":[ut,Fe,Le]}],invert:[{invert:["",ut,Fe,Le]}],saturate:[{saturate:[ut,Fe,Le]}],sepia:[{sepia:["",ut,Fe,Le]}],"backdrop-filter":[{"backdrop-filter":["","none",Fe,Le]}],"backdrop-blur":[{"backdrop-blur":Ee()}],"backdrop-brightness":[{"backdrop-brightness":[ut,Fe,Le]}],"backdrop-contrast":[{"backdrop-contrast":[ut,Fe,Le]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ut,Fe,Le]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ut,Fe,Le]}],"backdrop-invert":[{"backdrop-invert":["",ut,Fe,Le]}],"backdrop-opacity":[{"backdrop-opacity":[ut,Fe,Le]}],"backdrop-saturate":[{"backdrop-saturate":[ut,Fe,Le]}],"backdrop-sepia":[{"backdrop-sepia":["",ut,Fe,Le]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Fe,Le]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ut,"initial",Fe,Le]}],ease:[{ease:["linear","initial",w,Fe,Le]}],delay:[{delay:[ut,Fe,Le]}],animate:[{animate:["none",S,Fe,Le]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,Fe,Le]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:me()}],"rotate-x":[{"rotate-x":me()}],"rotate-y":[{"rotate-y":me()}],"rotate-z":[{"rotate-z":me()}],scale:[{scale:$e()}],"scale-x":[{"scale-x":$e()}],"scale-y":[{"scale-y":$e()}],"scale-z":[{"scale-z":$e()}],"scale-3d":["scale-3d"],skew:[{skew:Ie()}],"skew-x":[{"skew-x":Ie()}],"skew-y":[{"skew-y":Ie()}],transform:[{transform:[Fe,Le,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ye()}],"translate-x":[{"translate-x":ye()}],"translate-y":[{"translate-y":ye()}],"translate-z":[{"translate-z":ye()}],"translate-none":["translate-none"],accent:[{accent:B()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:B()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Fe,Le]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Fe,Le]}],fill:[{fill:["none",...B()]}],"stroke-w":[{stroke:[ut,Bd,Jl,XC]}],stroke:[{stroke:["none",...B()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Ole=fle(Nle);function Ds(...t){return Ole(St(t))}function Ma({className:t,...e}){return V.jsx("div",{"data-slot":"card",className:Ds("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...e})}function Pa({className:t,...e}){return V.jsx("div",{"data-slot":"card-header",className:Ds("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...e})}function La({className:t,...e}){return V.jsx("div",{"data-slot":"card-title",className:Ds("leading-none font-semibold",t),...e})}function Fa({className:t,...e}){return V.jsx("div",{"data-slot":"card-content",className:Ds("px-6",t),...e})}function QF(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function _le(...t){return e=>{let n=!1;const r=t.map(i=>{const s=QF(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():QF(t[i],null)}}}}function Dp(...t){return q.useCallback(_le(...t),t)}function T0(t){const e=Rle(t),n=q.forwardRef((r,i)=>{const{children:s,...a}=r,o=q.Children.toArray(s),l=o.find(Mle);if(l){const c=l.props.children,f=o.map(h=>h===l?q.Children.count(c)>1?q.Children.only(null):q.isValidElement(c)?c.props.children:null:h);return V.jsx(e,{...a,ref:i,children:q.isValidElement(c)?q.cloneElement(c,void 0,f):null})}return V.jsx(e,{...a,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var Uq=T0("Slot");function Rle(t){const e=q.forwardRef((n,r)=>{const{children:i,...s}=n,a=q.isValidElement(i)?Lle(i):void 0,o=Dp(a,r);if(q.isValidElement(i)){const l=Ple(s,i.props);return i.type!==q.Fragment&&(l.ref=o),q.cloneElement(i,l)}return q.Children.count(i)>1?q.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Dle=Symbol("radix.slottable");function Mle(t){return q.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Dle}function Ple(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...o)=>{const l=s(...o);return i(...o),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function Lle(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const JF=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,eB=St,Wq=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return eB(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,a=Object.keys(i).map(c=>{const f=n==null?void 0:n[c],h=s==null?void 0:s[c];if(f===null)return null;const p=JF(f)||JF(h);return i[c][p]}),o=n&&Object.entries(n).reduce((c,f)=>{let[h,p]=f;return p===void 0||(c[h]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,f)=>{let{class:h,className:p,...g}=f;return Object.entries(g).every(y=>{let[b,v]=y;return Array.isArray(v)?v.includes({...s,...o}[b]):{...s,...o}[b]===v})?[...c,h,p]:c},[]);return eB(t,a,l,n==null?void 0:n.class,n==null?void 0:n.className)},Fle=Wq("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function zd({className:t,variant:e,asChild:n=!1,...r}){const i=n?Uq:"span";return V.jsx(i,{"data-slot":"badge",className:Ds(Fle({variant:e}),t),...r})}const Ble=Wq("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function zle({className:t,variant:e,size:n,asChild:r=!1,...i}){const s=r?Uq:"button";return V.jsx(s,{"data-slot":"button",className:Ds(Ble({variant:e,size:n,className:t})),...i})}function rx(t,e=[]){let n=[];function r(s,a){const o=q.createContext(a),l=n.length;n=[...n,a];const c=h=>{var w;const{scope:p,children:g,...y}=h,b=((w=p==null?void 0:p[t])==null?void 0:w[l])||o,v=q.useMemo(()=>y,Object.values(y));return V.jsx(b.Provider,{value:v,children:g})};c.displayName=s+"Provider";function f(h,p){var b;const g=((b=p==null?void 0:p[t])==null?void 0:b[l])||o,y=q.useContext(g);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[c,f]}const i=()=>{const s=n.map(a=>q.createContext(a));return function(o){const l=(o==null?void 0:o[t])||s;return q.useMemo(()=>({[`__scope${t}`]:{...o,[t]:l}}),[o,l])}};return i.scopeName=t,[r,jle(i,...e)]}function jle(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((o,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...o,...h}},{});return q.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}ZI();var Vle=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],vl=Vle.reduce((t,e)=>{const n=T0(`Primitive.${e}`),r=q.forwardRef((i,s)=>{const{asChild:a,...o}=i,l=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),V.jsx(l,{...o,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),DN="Progress",MN=100,[Ule,K9e]=rx(DN),[Wle,Gle]=Ule(DN),Gq=q.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:s=qle,...a}=t;(i||i===0)&&!tB(i)&&console.error(Hle(`${i}`,"Progress"));const o=tB(i)?i:MN;r!==null&&!nB(r,o)&&console.error(Kle(`${r}`,"Progress"));const l=nB(r,o)?r:null,c=k0(l)?s(l,o):void 0;return V.jsx(Wle,{scope:n,value:l,max:o,children:V.jsx(vl.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":k0(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":Kq(l,o),"data-value":l??void 0,"data-max":o,...a,ref:e})})});Gq.displayName=DN;var qq="ProgressIndicator",Hq=q.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,i=Gle(qq,n);return V.jsx(vl.div,{"data-state":Kq(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});Hq.displayName=qq;function qle(t,e){return`${Math.round(t/e*100)}%`}function Kq(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function k0(t){return typeof t=="number"}function tB(t){return k0(t)&&!isNaN(t)&&t>0}function nB(t,e){return k0(t)&&!isNaN(t)&&t<=e&&t>=0}function Hle(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${MN}\`.`}function Kle(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${MN} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Xle=Gq,Yle=Hq;function Zle({className:t,value:e,...n}){return V.jsx(Xle,{"data-slot":"progress",className:Ds("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...n,children:V.jsx(Yle,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})})}function Ya(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Qle(t){const e=t+"CollectionProvider",[n,r]=rx(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=b=>{const{scope:v,children:w}=b,S=J.useRef(null),T=J.useRef(new Map).current;return V.jsx(i,{scope:v,itemMap:T,collectionRef:S,children:w})};a.displayName=e;const o=t+"CollectionSlot",l=T0(o),c=J.forwardRef((b,v)=>{const{scope:w,children:S}=b,T=s(o,w),A=Dp(v,T.collectionRef);return V.jsx(l,{ref:A,children:S})});c.displayName=o;const f=t+"CollectionItemSlot",h="data-radix-collection-item",p=T0(f),g=J.forwardRef((b,v)=>{const{scope:w,children:S,...T}=b,A=J.useRef(null),k=Dp(v,A),E=s(f,w);return J.useEffect(()=>(E.itemMap.set(A,{ref:A,...T}),()=>void E.itemMap.delete(A))),V.jsx(p,{[h]:"",ref:k,children:S})});g.displayName=f;function y(b){const v=s(t+"CollectionConsumer",b);return J.useCallback(()=>{const S=v.collectionRef.current;if(!S)return[];const T=Array.from(S.querySelectorAll(`[${h}]`));return Array.from(v.itemMap.values()).sort((E,I)=>T.indexOf(E.ref.current)-T.indexOf(I.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:a,Slot:c,ItemSlot:g},y,r]}var A0=globalThis!=null&&globalThis.document?q.useLayoutEffect:()=>{},Jle=e6[" useId ".trim().toString()]||(()=>{}),ece=0;function Xq(t){const[e,n]=q.useState(Jle());return A0(()=>{n(r=>r??String(ece++))},[t]),t||(e?`radix-${e}`:"")}function tce(t){const e=q.useRef(t);return q.useEffect(()=>{e.current=t}),q.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}var nce=e6[" useInsertionEffect ".trim().toString()]||A0;function Yq({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,a]=rce({defaultProp:e,onChange:n}),o=t!==void 0,l=o?t:i;{const f=q.useRef(t!==void 0);q.useEffect(()=>{const h=f.current;h!==o&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=o},[o,r])}const c=q.useCallback(f=>{var h;if(o){const p=ice(f)?f(t):f;p!==t&&((h=a.current)==null||h.call(a,p))}else s(f)},[o,t,s,a]);return[l,c]}function rce({defaultProp:t,onChange:e}){const[n,r]=q.useState(t),i=q.useRef(n),s=q.useRef(e);return nce(()=>{s.current=e},[e]),q.useEffect(()=>{var a;i.current!==n&&((a=s.current)==null||a.call(s,n),i.current=n)},[n,i]),[n,r,s]}function ice(t){return typeof t=="function"}var sce=q.createContext(void 0);function Zq(t){const e=q.useContext(sce);return t||e||"ltr"}var YC="rovingFocusGroup.onEntryFocus",ace={bubbles:!1,cancelable:!0},Dm="RovingFocusGroup",[XE,Qq,oce]=Qle(Dm),[lce,Jq]=rx(Dm,[oce]),[cce,uce]=lce(Dm),eH=q.forwardRef((t,e)=>V.jsx(XE.Provider,{scope:t.__scopeRovingFocusGroup,children:V.jsx(XE.Slot,{scope:t.__scopeRovingFocusGroup,children:V.jsx(fce,{...t,ref:e})})}));eH.displayName=Dm;var fce=q.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:f=!1,...h}=t,p=q.useRef(null),g=Dp(e,p),y=Zq(s),[b,v]=Yq({prop:a,defaultProp:o??null,onChange:l,caller:Dm}),[w,S]=q.useState(!1),T=tce(c),A=Qq(n),k=q.useRef(!1),[E,I]=q.useState(0);return q.useEffect(()=>{const N=p.current;if(N)return N.addEventListener(YC,T),()=>N.removeEventListener(YC,T)},[T]),V.jsx(cce,{scope:n,orientation:r,dir:y,loop:i,currentTabStopId:b,onItemFocus:q.useCallback(N=>v(N),[v]),onItemShiftTab:q.useCallback(()=>S(!0),[]),onFocusableItemAdd:q.useCallback(()=>I(N=>N+1),[]),onFocusableItemRemove:q.useCallback(()=>I(N=>N-1),[]),children:V.jsx(vl.div,{tabIndex:w||E===0?-1:0,"data-orientation":r,...h,ref:g,style:{outline:"none",...t.style},onMouseDown:Ya(t.onMouseDown,()=>{k.current=!0}),onFocus:Ya(t.onFocus,N=>{const _=!k.current;if(N.target===N.currentTarget&&_&&!w){const D=new CustomEvent(YC,ace);if(N.currentTarget.dispatchEvent(D),!D.defaultPrevented){const O=A().filter(R=>R.focusable),P=O.find(R=>R.active),z=O.find(R=>R.id===b),U=[P,z,...O].filter(Boolean).map(R=>R.ref.current);rH(U,f)}}k.current=!1}),onBlur:Ya(t.onBlur,()=>S(!1))})})}),tH="RovingFocusGroupItem",nH=q.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:a,...o}=t,l=Xq(),c=s||l,f=uce(tH,n),h=f.currentTabStopId===c,p=Qq(n),{onFocusableItemAdd:g,onFocusableItemRemove:y,currentTabStopId:b}=f;return q.useEffect(()=>{if(r)return g(),()=>y()},[r,g,y]),V.jsx(XE.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:V.jsx(vl.span,{tabIndex:h?0:-1,"data-orientation":f.orientation,...o,ref:e,onMouseDown:Ya(t.onMouseDown,v=>{r?f.onItemFocus(c):v.preventDefault()}),onFocus:Ya(t.onFocus,()=>f.onItemFocus(c)),onKeyDown:Ya(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){f.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const w=pce(v,f.orientation,f.dir);if(w!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let T=p().filter(A=>A.focusable).map(A=>A.ref.current);if(w==="last")T.reverse();else if(w==="prev"||w==="next"){w==="prev"&&T.reverse();const A=T.indexOf(v.currentTarget);T=f.loop?mce(T,A+1):T.slice(A+1)}setTimeout(()=>rH(T))}}),children:typeof a=="function"?a({isCurrentTabStop:h,hasTabStop:b!=null}):a})})});nH.displayName=tH;var hce={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function dce(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function pce(t,e,n){const r=dce(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return hce[r]}function rH(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function mce(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var gce=eH,yce=nH;function vce(t,e){return q.useReducer((n,r)=>e[n][r]??n,t)}var iH=t=>{const{present:e,children:n}=t,r=bce(e),i=typeof n=="function"?n({present:r.isPresent}):q.Children.only(n),s=Dp(r.ref,xce(i));return typeof n=="function"||r.isPresent?q.cloneElement(i,{ref:s}):null};iH.displayName="Presence";function bce(t){const[e,n]=q.useState(),r=q.useRef(null),i=q.useRef(t),s=q.useRef("none"),a=t?"mounted":"unmounted",[o,l]=vce(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return q.useEffect(()=>{const c=Av(r.current);s.current=o==="mounted"?c:"none"},[o]),A0(()=>{const c=r.current,f=i.current;if(f!==t){const p=s.current,g=Av(c);t?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(f&&p!==g?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),A0(()=>{if(e){let c;const f=e.ownerDocument.defaultView??window,h=g=>{const b=Av(r.current).includes(g.animationName);if(g.target===e&&b&&(l("ANIMATION_END"),!i.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",c=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},p=g=>{g.target===e&&(s.current=Av(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{f.clearTimeout(c),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:q.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function Av(t){return(t==null?void 0:t.animationName)||"none"}function xce(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var ix="Tabs",[wce,X9e]=rx(ix,[Jq]),sH=Jq(),[Sce,PN]=wce(ix),aH=q.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:a="horizontal",dir:o,activationMode:l="automatic",...c}=t,f=Zq(o),[h,p]=Yq({prop:r,onChange:i,defaultProp:s??"",caller:ix});return V.jsx(Sce,{scope:n,baseId:Xq(),value:h,onValueChange:p,orientation:a,dir:f,activationMode:l,children:V.jsx(vl.div,{dir:f,"data-orientation":a,...c,ref:e})})});aH.displayName=ix;var oH="TabsList",lH=q.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=PN(oH,n),a=sH(n);return V.jsx(gce,{asChild:!0,...a,orientation:s.orientation,dir:s.dir,loop:r,children:V.jsx(vl.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});lH.displayName=oH;var cH="TabsTrigger",uH=q.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,a=PN(cH,n),o=sH(n),l=dH(a.baseId,r),c=pH(a.baseId,r),f=r===a.value;return V.jsx(yce,{asChild:!0,...o,focusable:!i,active:f,children:V.jsx(vl.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":c,"data-state":f?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:e,onMouseDown:Ya(t.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?a.onValueChange(r):h.preventDefault()}),onKeyDown:Ya(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&a.onValueChange(r)}),onFocus:Ya(t.onFocus,()=>{const h=a.activationMode!=="manual";!f&&!i&&h&&a.onValueChange(r)})})})});uH.displayName=cH;var fH="TabsContent",hH=q.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...a}=t,o=PN(fH,n),l=dH(o.baseId,r),c=pH(o.baseId,r),f=r===o.value,h=q.useRef(f);return q.useEffect(()=>{const p=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(p)},[]),V.jsx(iH,{present:i||f,children:({present:p})=>V.jsx(vl.div,{"data-state":f?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!p,id:c,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:p&&s})})});hH.displayName=fH;function dH(t,e){return`${t}-trigger-${e}`}function pH(t,e){return`${t}-content-${e}`}var Cce=aH,Tce=lH,kce=uH,Ace=hH;function Ece({className:t,...e}){return V.jsx(Cce,{"data-slot":"tabs",className:Ds("flex flex-col gap-2",t),...e})}function $ce({className:t,...e}){return V.jsx(Tce,{"data-slot":"tabs-list",className:Ds("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...e})}function jd({className:t,...e}){return V.jsx(kce,{"data-slot":"tabs-trigger",className:Ds("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...e})}function Vd({className:t,...e}){return V.jsx(Ace,{"data-slot":"tabs-content",className:Ds("flex-1 outline-none",t),...e})}var ZC,rB;function gi(){if(rB)return ZC;rB=1;var t=Array.isArray;return ZC=t,ZC}var QC,iB;function mH(){if(iB)return QC;iB=1;var t=typeof bv=="object"&&bv&&bv.Object===Object&&bv;return QC=t,QC}var JC,sB;function pa(){if(sB)return JC;sB=1;var t=mH(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return JC=n,JC}var eT,aB;function Mm(){if(aB)return eT;aB=1;var t=pa(),e=t.Symbol;return eT=e,eT}var tT,oB;function Ice(){if(oB)return tT;oB=1;var t=Mm(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function s(a){var o=n.call(a,i),l=a[i];try{a[i]=void 0;var c=!0}catch{}var f=r.call(a);return c&&(o?a[i]=l:delete a[i]),f}return tT=s,tT}var nT,lB;function Nce(){if(lB)return nT;lB=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return nT=n,nT}var rT,cB;function po(){if(cB)return rT;cB=1;var t=Mm(),e=Ice(),n=Nce(),r="[object Null]",i="[object Undefined]",s=t?t.toStringTag:void 0;function a(o){return o==null?o===void 0?i:r:s&&s in Object(o)?e(o):n(o)}return rT=a,rT}var iT,uB;function mo(){if(uB)return iT;uB=1;function t(e){return e!=null&&typeof e=="object"}return iT=t,iT}var sT,fB;function hh(){if(fB)return sT;fB=1;var t=po(),e=mo(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return sT=r,sT}var aT,hB;function LN(){if(hB)return aT;hB=1;var t=gi(),e=hh(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,a){if(t(s))return!1;var o=typeof s;return o=="number"||o=="symbol"||o=="boolean"||s==null||e(s)?!0:r.test(s)||!n.test(s)||a!=null&&s in Object(a)}return aT=i,aT}var oT,dB;function bl(){if(dB)return oT;dB=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return oT=t,oT}var lT,pB;function FN(){if(pB)return lT;pB=1;var t=po(),e=bl(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function a(o){if(!e(o))return!1;var l=t(o);return l==r||l==i||l==n||l==s}return lT=a,lT}var cT,mB;function Oce(){if(mB)return cT;mB=1;var t=pa(),e=t["__core-js_shared__"];return cT=e,cT}var uT,gB;function _ce(){if(gB)return uT;gB=1;var t=Oce(),e=function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!e&&e in r}return uT=n,uT}var fT,yB;function gH(){if(yB)return fT;yB=1;var t=Function.prototype,e=t.toString;function n(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return fT=n,fT}var hT,vB;function Rce(){if(vB)return hT;vB=1;var t=FN(),e=_ce(),n=bl(),r=gH(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,a=Function.prototype,o=Object.prototype,l=a.toString,c=o.hasOwnProperty,f=RegExp("^"+l.call(c).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(p){if(!n(p)||e(p))return!1;var g=t(p)?f:s;return g.test(r(p))}return hT=h,hT}var dT,bB;function Dce(){if(bB)return dT;bB=1;function t(e,n){return e==null?void 0:e[n]}return dT=t,dT}var pT,xB;function Kc(){if(xB)return pT;xB=1;var t=Rce(),e=Dce();function n(r,i){var s=e(r,i);return t(s)?s:void 0}return pT=n,pT}var mT,wB;function sx(){if(wB)return mT;wB=1;var t=Kc(),e=t(Object,"create");return mT=e,mT}var gT,SB;function Mce(){if(SB)return gT;SB=1;var t=sx();function e(){this.__data__=t?t(null):{},this.size=0}return gT=e,gT}var yT,CB;function Pce(){if(CB)return yT;CB=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return yT=t,yT}var vT,TB;function Lce(){if(TB)return vT;TB=1;var t=sx(),e="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(s){var a=this.__data__;if(t){var o=a[s];return o===e?void 0:o}return r.call(a,s)?a[s]:void 0}return vT=i,vT}var bT,kB;function Fce(){if(kB)return bT;kB=1;var t=sx(),e=Object.prototype,n=e.hasOwnProperty;function r(i){var s=this.__data__;return t?s[i]!==void 0:n.call(s,i)}return bT=r,bT}var xT,AB;function Bce(){if(AB)return xT;AB=1;var t=sx(),e="__lodash_hash_undefined__";function n(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=t&&i===void 0?e:i,this}return xT=n,xT}var wT,EB;function zce(){if(EB)return wT;EB=1;var t=Mce(),e=Pce(),n=Lce(),r=Fce(),i=Bce();function s(a){var o=-1,l=a==null?0:a.length;for(this.clear();++o<l;){var c=a[o];this.set(c[0],c[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,wT=s,wT}var ST,$B;function jce(){if($B)return ST;$B=1;function t(){this.__data__=[],this.size=0}return ST=t,ST}var CT,IB;function BN(){if(IB)return CT;IB=1;function t(e,n){return e===n||e!==e&&n!==n}return CT=t,CT}var TT,NB;function ax(){if(NB)return TT;NB=1;var t=BN();function e(n,r){for(var i=n.length;i--;)if(t(n[i][0],r))return i;return-1}return TT=e,TT}var kT,OB;function Vce(){if(OB)return kT;OB=1;var t=ax(),e=Array.prototype,n=e.splice;function r(i){var s=this.__data__,a=t(s,i);if(a<0)return!1;var o=s.length-1;return a==o?s.pop():n.call(s,a,1),--this.size,!0}return kT=r,kT}var AT,_B;function Uce(){if(_B)return AT;_B=1;var t=ax();function e(n){var r=this.__data__,i=t(r,n);return i<0?void 0:r[i][1]}return AT=e,AT}var ET,RB;function Wce(){if(RB)return ET;RB=1;var t=ax();function e(n){return t(this.__data__,n)>-1}return ET=e,ET}var $T,DB;function Gce(){if(DB)return $T;DB=1;var t=ax();function e(n,r){var i=this.__data__,s=t(i,n);return s<0?(++this.size,i.push([n,r])):i[s][1]=r,this}return $T=e,$T}var IT,MB;function ox(){if(MB)return IT;MB=1;var t=jce(),e=Vce(),n=Uce(),r=Wce(),i=Gce();function s(a){var o=-1,l=a==null?0:a.length;for(this.clear();++o<l;){var c=a[o];this.set(c[0],c[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,IT=s,IT}var NT,PB;function zN(){if(PB)return NT;PB=1;var t=Kc(),e=pa(),n=t(e,"Map");return NT=n,NT}var OT,LB;function qce(){if(LB)return OT;LB=1;var t=zce(),e=ox(),n=zN();function r(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return OT=r,OT}var _T,FB;function Hce(){if(FB)return _T;FB=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return _T=t,_T}var RT,BB;function lx(){if(BB)return RT;BB=1;var t=Hce();function e(n,r){var i=n.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return RT=e,RT}var DT,zB;function Kce(){if(zB)return DT;zB=1;var t=lx();function e(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}return DT=e,DT}var MT,jB;function Xce(){if(jB)return MT;jB=1;var t=lx();function e(n){return t(this,n).get(n)}return MT=e,MT}var PT,VB;function Yce(){if(VB)return PT;VB=1;var t=lx();function e(n){return t(this,n).has(n)}return PT=e,PT}var LT,UB;function Zce(){if(UB)return LT;UB=1;var t=lx();function e(n,r){var i=t(this,n),s=i.size;return i.set(n,r),this.size+=i.size==s?0:1,this}return LT=e,LT}var FT,WB;function jN(){if(WB)return FT;WB=1;var t=qce(),e=Kce(),n=Xce(),r=Yce(),i=Zce();function s(a){var o=-1,l=a==null?0:a.length;for(this.clear();++o<l;){var c=a[o];this.set(c[0],c[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,FT=s,FT}var BT,GB;function yH(){if(GB)return BT;GB=1;var t=jN(),e="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var a=arguments,o=i?i.apply(this,a):a[0],l=s.cache;if(l.has(o))return l.get(o);var c=r.apply(this,a);return s.cache=l.set(o,c)||l,c};return s.cache=new(n.Cache||t),s}return n.Cache=t,BT=n,BT}var zT,qB;function Qce(){if(qB)return zT;qB=1;var t=yH(),e=500;function n(r){var i=t(r,function(a){return s.size===e&&s.clear(),a}),s=i.cache;return i}return zT=n,zT}var jT,HB;function Jce(){if(HB)return jT;HB=1;var t=Qce(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(a,o,l,c){s.push(l?c.replace(n,"$1"):o||a)}),s});return jT=r,jT}var VT,KB;function VN(){if(KB)return VT;KB=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,s=Array(i);++r<i;)s[r]=n(e[r],r,e);return s}return VT=t,VT}var UT,XB;function eue(){if(XB)return UT;XB=1;var t=Mm(),e=VN(),n=gi(),r=hh(),i=t?t.prototype:void 0,s=i?i.toString:void 0;function a(o){if(typeof o=="string")return o;if(n(o))return e(o,a)+"";if(r(o))return s?s.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}return UT=a,UT}var WT,YB;function vH(){if(YB)return WT;YB=1;var t=eue();function e(n){return n==null?"":t(n)}return WT=e,WT}var GT,ZB;function bH(){if(ZB)return GT;ZB=1;var t=gi(),e=LN(),n=Jce(),r=vH();function i(s,a){return t(s)?s:e(s,a)?[s]:n(r(s))}return GT=i,GT}var qT,QB;function cx(){if(QB)return qT;QB=1;var t=hh();function e(n){if(typeof n=="string"||t(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return qT=e,qT}var HT,JB;function UN(){if(JB)return HT;JB=1;var t=bH(),e=cx();function n(r,i){i=t(i,r);for(var s=0,a=i.length;r!=null&&s<a;)r=r[e(i[s++])];return s&&s==a?r:void 0}return HT=n,HT}var KT,ez;function xH(){if(ez)return KT;ez=1;var t=UN();function e(n,r,i){var s=n==null?void 0:t(n,r);return s===void 0?i:s}return KT=e,KT}var tue=xH();const ss=Nt(tue);var XT,tz;function nue(){if(tz)return XT;tz=1;function t(e){return e==null}return XT=t,XT}var rue=nue();const yt=Nt(rue);var YT,nz;function iue(){if(nz)return YT;nz=1;var t=po(),e=gi(),n=mo(),r="[object String]";function i(s){return typeof s=="string"||!e(s)&&n(s)&&t(s)==r}return YT=i,YT}var sue=iue();const Ic=Nt(sue);var aue=FN();const st=Nt(aue);var oue=bl();const dh=Nt(oue);var ZT={exports:{}},Ot={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rz;function lue(){if(rz)return Ot;rz=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen"),y;y=Symbol.for("react.module.reference");function b(v){if(typeof v=="object"&&v!==null){var w=v.$$typeof;switch(w){case t:switch(v=v.type,v){case n:case i:case r:case c:case f:return v;default:switch(v=v&&v.$$typeof,v){case o:case a:case l:case p:case h:case s:return v;default:return w}}case e:return w}}}return Ot.ContextConsumer=a,Ot.ContextProvider=s,Ot.Element=t,Ot.ForwardRef=l,Ot.Fragment=n,Ot.Lazy=p,Ot.Memo=h,Ot.Portal=e,Ot.Profiler=i,Ot.StrictMode=r,Ot.Suspense=c,Ot.SuspenseList=f,Ot.isAsyncMode=function(){return!1},Ot.isConcurrentMode=function(){return!1},Ot.isContextConsumer=function(v){return b(v)===a},Ot.isContextProvider=function(v){return b(v)===s},Ot.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===t},Ot.isForwardRef=function(v){return b(v)===l},Ot.isFragment=function(v){return b(v)===n},Ot.isLazy=function(v){return b(v)===p},Ot.isMemo=function(v){return b(v)===h},Ot.isPortal=function(v){return b(v)===e},Ot.isProfiler=function(v){return b(v)===i},Ot.isStrictMode=function(v){return b(v)===r},Ot.isSuspense=function(v){return b(v)===c},Ot.isSuspenseList=function(v){return b(v)===f},Ot.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===n||v===i||v===r||v===c||v===f||v===g||typeof v=="object"&&v!==null&&(v.$$typeof===p||v.$$typeof===h||v.$$typeof===s||v.$$typeof===a||v.$$typeof===l||v.$$typeof===y||v.getModuleId!==void 0)},Ot.typeOf=b,Ot}var iz;function cue(){return iz||(iz=1,ZT.exports=lue()),ZT.exports}var uue=cue(),QT,sz;function wH(){if(sz)return QT;sz=1;var t=po(),e=mo(),n="[object Number]";function r(i){return typeof i=="number"||e(i)&&t(i)==n}return QT=r,QT}var JT,az;function fue(){if(az)return JT;az=1;var t=wH();function e(n){return t(n)&&n!=+n}return JT=e,JT}var hue=fue();const ph=Nt(hue);var due=wH();const pue=Nt(due);var ks=function(e){return e===0?0:e>0?1:-1},mc=function(e){return Ic(e)&&e.indexOf("%")===e.length-1},Ne=function(e){return pue(e)&&!ph(e)},Zn=function(e){return Ne(e)||Ic(e)},mue=0,Pm=function(e){var n=++mue;return"".concat(e||"").concat(n)},Nc=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ne(e)&&!Ic(e))return r;var s;if(mc(e)){var a=e.indexOf("%");s=n*parseFloat(e.slice(0,a))/100}else s=+e;return ph(s)&&(s=r),i&&s>n&&(s=n),s},Yo=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},gue=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},Ji=function(e,n){return Ne(e)&&Ne(n)?function(r){return e+r*(n-e)}:function(){return n}};function E0(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):ss(r,e))===n})}var yue=function(e,n){return Ne(e)&&Ne(n)?e-n:Ic(e)&&Ic(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function gf(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function YE(t){"@babel/helpers - typeof";return YE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},YE(t)}var vue=["viewBox","children"],bue=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],oz=["points","pathLength"],e2={svg:vue,polygon:oz,polyline:oz},WN=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],$0=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(q.isValidElement(e)&&(r=e.props),!dh(r))return null;var i={};return Object.keys(r).forEach(function(s){WN.includes(s)&&(i[s]=n||function(a){return r[s](r,a)})}),i},xue=function(e,n,r){return function(i){return e(n,r,i),null}},I0=function(e,n,r){if(!dh(e)||YE(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(s){var a=e[s];WN.includes(s)&&typeof a=="function"&&(i||(i={}),i[s]=xue(a,n,r))}),i},wue=["children"],Sue=["children"];function lz(t,e){if(t==null)return{};var n=Cue(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Cue(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ZE(t){"@babel/helpers - typeof";return ZE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ZE(t)}var cz={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Za=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},uz=null,t2=null,GN=function t(e){if(e===uz&&Array.isArray(t2))return t2;var n=[];return q.Children.forEach(e,function(r){yt(r)||(uue.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),t2=n,uz=e,n};function Es(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return Za(i)}):r=[Za(e)],GN(t).forEach(function(i){var s=ss(i,"type.displayName")||ss(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}function Ei(t,e){var n=Es(t,e);return n&&n[0]}var fz=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!Ne(r)||r<=0||!Ne(i)||i<=0)},Tue=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],kue=function(e){return e&&e.type&&Ic(e.type)&&Tue.indexOf(e.type)>=0},Aue=function(e){return e&&ZE(e)==="object"&&"clipDot"in e},Eue=function(e,n,r,i){var s,a=(s=e2==null?void 0:e2[i])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!st(e)&&(i&&a.includes(n)||bue.includes(n))||r&&WN.includes(n)},mt=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(q.isValidElement(e)&&(i=e.props),!dh(i))return null;var s={};return Object.keys(i).forEach(function(a){var o;Eue((o=i)===null||o===void 0?void 0:o[a],a,n,r)&&(s[a]=i[a])}),s},QE=function t(e,n){if(e===n)return!0;var r=q.Children.count(e);if(r!==q.Children.count(n))return!1;if(r===0)return!0;if(r===1)return hz(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var s=e[i],a=n[i];if(Array.isArray(s)||Array.isArray(a)){if(!t(s,a))return!1}else if(!hz(s,a))return!1}return!0},hz=function(e,n){if(yt(e)&&yt(n))return!0;if(!yt(e)&&!yt(n)){var r=e.props||{},i=r.children,s=lz(r,wue),a=n.props||{},o=a.children,l=lz(a,Sue);return i&&o?gf(s,l)&&QE(i,o):!i&&!o?gf(s,l):!1}return!1},dz=function(e,n){var r=[],i={};return GN(e).forEach(function(s,a){if(kue(s))r.push(s);else if(s){var o=Za(s.type),l=n[o]||{},c=l.handler,f=l.once;if(c&&(!f||!i[o])){var h=c(s,o,a);r.push(h),i[o]=!0}}}),r},$ue=function(e){var n=e&&e.type;return n&&cz[n]?cz[n]:null},Iue=function(e,n){return GN(n).indexOf(e)},Nue=["children","width","height","viewBox","className","style","title","desc"];function JE(){return JE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JE.apply(this,arguments)}function Oue(t,e){if(t==null)return{};var n=_ue(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _ue(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function e$(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,s=t.className,a=t.style,o=t.title,l=t.desc,c=Oue(t,Nue),f=i||{width:n,height:r,x:0,y:0},h=St("recharts-surface",s);return J.createElement("svg",JE({},mt(c,!0,"svg"),{className:h,width:n,height:r,style:a,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),J.createElement("title",null,o),J.createElement("desc",null,l),e)}var Rue=["children","className"];function t$(){return t$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t$.apply(this,arguments)}function Due(t,e){if(t==null)return{};var n=Mue(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Mue(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var hn=J.forwardRef(function(t,e){var n=t.children,r=t.className,i=Due(t,Rue),s=St("recharts-layer",r);return J.createElement("g",t$({className:s},mt(i,!0),{ref:e}),n)}),Qa=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]},n2,pz;function Pue(){if(pz)return n2;pz=1;function t(e,n,r){var i=-1,s=e.length;n<0&&(n=-n>s?0:s+n),r=r>s?s:r,r<0&&(r+=s),s=n>r?0:r-n>>>0,n>>>=0;for(var a=Array(s);++i<s;)a[i]=e[i+n];return a}return n2=t,n2}var r2,mz;function Lue(){if(mz)return r2;mz=1;var t=Pue();function e(n,r,i){var s=n.length;return i=i===void 0?s:i,!r&&i>=s?n:t(n,r,i)}return r2=e,r2}var i2,gz;function SH(){if(gz)return i2;gz=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,s="\\ufe0e\\ufe0f",a="\\u200d",o=RegExp("["+a+t+i+s+"]");function l(c){return o.test(c)}return i2=l,i2}var s2,yz;function Fue(){if(yz)return s2;yz=1;function t(e){return e.split("")}return s2=t,s2}var a2,vz;function Bue(){if(vz)return a2;vz=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,s="\\ufe0e\\ufe0f",a="["+t+"]",o="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",c="(?:"+o+"|"+l+")",f="[^"+t+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",y=c+"?",b="["+s+"]?",v="(?:"+g+"(?:"+[f,h,p].join("|")+")"+b+y+")*",w=b+y+v,S="(?:"+[f+o+"?",o,h,p,a].join("|")+")",T=RegExp(l+"(?="+l+")|"+S+w,"g");function A(k){return k.match(T)||[]}return a2=A,a2}var o2,bz;function zue(){if(bz)return o2;bz=1;var t=Fue(),e=SH(),n=Bue();function r(i){return e(i)?n(i):t(i)}return o2=r,o2}var l2,xz;function jue(){if(xz)return l2;xz=1;var t=Lue(),e=SH(),n=zue(),r=vH();function i(s){return function(a){a=r(a);var o=e(a)?n(a):void 0,l=o?o[0]:a.charAt(0),c=o?t(o,1).join(""):a.slice(1);return l[s]()+c}}return l2=i,l2}var c2,wz;function Vue(){if(wz)return c2;wz=1;var t=jue(),e=t("toUpperCase");return c2=e,c2}var Uue=Vue();const ux=Nt(Uue);function Zt(t){return function(){return t}}const CH=Math.cos,N0=Math.sin,Ms=Math.sqrt,O0=Math.PI,fx=2*O0,n$=Math.PI,r$=2*n$,oc=1e-6,Wue=r$-oc;function TH(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Gue(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return TH;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class que{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?TH:Gue(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,l=r-e,c=i-n,f=a-e,h=o-n,p=f*f+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(p>oc)if(!(Math.abs(h*l-c*f)>oc)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-a,y=i-o,b=l*l+c*c,v=g*g+y*y,w=Math.sqrt(b),S=Math.sqrt(p),T=s*Math.tan((n$-Math.acos((b+p-v)/(2*w*S)))/2),A=T/S,k=T/w;Math.abs(A-1)>oc&&this._append`L${e+A*f},${n+A*h}`,this._append`A${s},${s},0,0,${+(h*g>f*y)},${this._x1=e+k*l},${this._y1=n+k*c}`}}arc(e,n,r,i,s,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),c=e+o,f=n+l,h=1^a,p=a?i-s:s-i;this._x1===null?this._append`M${c},${f}`:(Math.abs(this._x1-c)>oc||Math.abs(this._y1-f)>oc)&&this._append`L${c},${f}`,r&&(p<0&&(p=p%r$+r$),p>Wue?this._append`A${r},${r},0,1,${h},${e-o},${n-l}A${r},${r},0,1,${h},${this._x1=c},${this._y1=f}`:p>oc&&this._append`A${r},${r},0,${+(p>=n$)},${h},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function qN(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new que(e)}function HN(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function kH(t){this._context=t}kH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function hx(t){return new kH(t)}function AH(t){return t[0]}function EH(t){return t[1]}function $H(t,e){var n=Zt(!0),r=null,i=hx,s=null,a=qN(o);t=typeof t=="function"?t:t===void 0?AH:Zt(t),e=typeof e=="function"?e:e===void 0?EH:Zt(e);function o(l){var c,f=(l=HN(l)).length,h,p=!1,g;for(r==null&&(s=i(g=a())),c=0;c<=f;++c)!(c<f&&n(h=l[c],c,l))===p&&((p=!p)?s.lineStart():s.lineEnd()),p&&s.point(+t(h,c,l),+e(h,c,l));if(g)return s=null,g+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:Zt(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:Zt(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Zt(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),o):r},o}function Ev(t,e,n){var r=null,i=Zt(!0),s=null,a=hx,o=null,l=qN(c);t=typeof t=="function"?t:t===void 0?AH:Zt(+t),e=typeof e=="function"?e:Zt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?EH:Zt(+n);function c(h){var p,g,y,b=(h=HN(h)).length,v,w=!1,S,T=new Array(b),A=new Array(b);for(s==null&&(o=a(S=l())),p=0;p<=b;++p){if(!(p<b&&i(v=h[p],p,h))===w)if(w=!w)g=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),y=p-1;y>=g;--y)o.point(T[y],A[y]);o.lineEnd(),o.areaEnd()}w&&(T[p]=+t(v,p,h),A[p]=+e(v,p,h),o.point(r?+r(v,p,h):T[p],n?+n(v,p,h):A[p]))}if(S)return o=null,S+""||null}function f(){return $H().defined(i).curve(a).context(s)}return c.x=function(h){return arguments.length?(t=typeof h=="function"?h:Zt(+h),r=null,c):t},c.x0=function(h){return arguments.length?(t=typeof h=="function"?h:Zt(+h),c):t},c.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Zt(+h),c):r},c.y=function(h){return arguments.length?(e=typeof h=="function"?h:Zt(+h),n=null,c):e},c.y0=function(h){return arguments.length?(e=typeof h=="function"?h:Zt(+h),c):e},c.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Zt(+h),c):n},c.lineX0=c.lineY0=function(){return f().x(t).y(e)},c.lineY1=function(){return f().x(t).y(n)},c.lineX1=function(){return f().x(r).y(e)},c.defined=function(h){return arguments.length?(i=typeof h=="function"?h:Zt(!!h),c):i},c.curve=function(h){return arguments.length?(a=h,s!=null&&(o=a(s)),c):a},c.context=function(h){return arguments.length?(h==null?s=o=null:o=a(s=h),c):s},c}class IH{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Hue(t){return new IH(t,!0)}function Kue(t){return new IH(t,!1)}const KN={draw(t,e){const n=Ms(e/O0);t.moveTo(n,0),t.arc(0,0,n,0,fx)}},Xue={draw(t,e){const n=Ms(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},NH=Ms(1/3),Yue=NH*2,Zue={draw(t,e){const n=Ms(e/Yue),r=n*NH;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Que={draw(t,e){const n=Ms(e),r=-n/2;t.rect(r,r,n,n)}},Jue=.8908130915292852,OH=N0(O0/10)/N0(7*O0/10),efe=N0(fx/10)*OH,tfe=-CH(fx/10)*OH,nfe={draw(t,e){const n=Ms(e*Jue),r=efe*n,i=tfe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const a=fx*s/5,o=CH(a),l=N0(a);t.lineTo(l*n,-o*n),t.lineTo(o*r-l*i,l*r+o*i)}t.closePath()}},u2=Ms(3),rfe={draw(t,e){const n=-Ms(e/(u2*3));t.moveTo(0,n*2),t.lineTo(-u2*n,-n),t.lineTo(u2*n,-n),t.closePath()}},Hi=-.5,Ki=Ms(3)/2,i$=1/Ms(12),ife=(i$/2+1)*3,sfe={draw(t,e){const n=Ms(e/ife),r=n/2,i=n*i$,s=r,a=n*i$+n,o=-s,l=a;t.moveTo(r,i),t.lineTo(s,a),t.lineTo(o,l),t.lineTo(Hi*r-Ki*i,Ki*r+Hi*i),t.lineTo(Hi*s-Ki*a,Ki*s+Hi*a),t.lineTo(Hi*o-Ki*l,Ki*o+Hi*l),t.lineTo(Hi*r+Ki*i,Hi*i-Ki*r),t.lineTo(Hi*s+Ki*a,Hi*a-Ki*s),t.lineTo(Hi*o+Ki*l,Hi*l-Ki*o),t.closePath()}};function afe(t,e){let n=null,r=qN(i);t=typeof t=="function"?t:Zt(t||KN),e=typeof e=="function"?e:Zt(e===void 0?64:+e);function i(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:Zt(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:Zt(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function _0(){}function R0(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function _H(t){this._context=t}_H.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:R0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:R0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ofe(t){return new _H(t)}function RH(t){this._context=t}RH.prototype={areaStart:_0,areaEnd:_0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:R0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function lfe(t){return new RH(t)}function DH(t){this._context=t}DH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:R0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function cfe(t){return new DH(t)}function MH(t){this._context=t}MH.prototype={areaStart:_0,areaEnd:_0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function ufe(t){return new MH(t)}function Sz(t){return t<0?-1:1}function Cz(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),o=(s*i+a*r)/(r+i);return(Sz(s)+Sz(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function Tz(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function f2(t,e,n){var r=t._x0,i=t._y0,s=t._x1,a=t._y1,o=(s-r)/3;t._context.bezierCurveTo(r+o,i+o*e,s-o,a-o*n,s,a)}function D0(t){this._context=t}D0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:f2(this,this._t0,Tz(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,f2(this,Tz(this,n=Cz(this,t,e)),n);break;default:f2(this,this._t0,n=Cz(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function PH(t){this._context=new LH(t)}(PH.prototype=Object.create(D0.prototype)).point=function(t,e){D0.prototype.point.call(this,e,t)};function LH(t){this._context=t}LH.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function ffe(t){return new D0(t)}function hfe(t){return new PH(t)}function FH(t){this._context=t}FH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=kz(t),i=kz(e),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function kz(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function dfe(t){return new FH(t)}function dx(t,e){this._context=t,this._t=e}dx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function pfe(t){return new dx(t,.5)}function mfe(t){return new dx(t,0)}function gfe(t){return new dx(t,1)}function Ef(t,e){if((a=t.length)>1)for(var n=1,r,i,s=t[e[0]],a,o=s.length;n<a;++n)for(i=s,s=t[e[n]],r=0;r<o;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function s$(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function yfe(t,e){return t[e]}function vfe(t){const e=[];return e.key=t,e}function bfe(){var t=Zt([]),e=s$,n=Ef,r=yfe;function i(s){var a=Array.from(t.apply(this,arguments),vfe),o,l=a.length,c=-1,f;for(const h of s)for(o=0,++c;o<l;++o)(a[o][c]=[0,+r(h,a[o].key,c,s)]).data=h;for(o=0,f=HN(e(a));o<l;++o)a[f[o]].index=o;return n(a,f),a}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Zt(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:Zt(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?s$:typeof s=="function"?s:Zt(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??Ef,i):n},i}function xfe(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,a;i<s;++i){for(a=n=0;n<r;++n)a+=t[n][i][1]||0;if(a)for(n=0;n<r;++n)t[n][i][1]/=a}Ef(t,e)}}function wfe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var a=0,o=0;a<i;++a)o+=t[a][n][1]||0;r[n][1]+=r[n][0]=-o/2}Ef(t,e)}}function Sfe(t,e){if(!(!((a=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,a;r<s;++r){for(var o=0,l=0,c=0;o<a;++o){for(var f=t[e[o]],h=f[r][1]||0,p=f[r-1][1]||0,g=(h-p)/2,y=0;y<o;++y){var b=t[e[y]],v=b[r][1]||0,w=b[r-1][1]||0;g+=v-w}l+=h,c+=g*h}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,Ef(t,e)}}function Mp(t){"@babel/helpers - typeof";return Mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mp(t)}var Cfe=["type","size","sizeType"];function a$(){return a$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a$.apply(this,arguments)}function Az(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ez(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Az(Object(n),!0).forEach(function(r){Tfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Az(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tfe(t,e,n){return e=kfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kfe(t){var e=Afe(t,"string");return Mp(e)=="symbol"?e:e+""}function Afe(t,e){if(Mp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Mp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Efe(t,e){if(t==null)return{};var n=$fe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function $fe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var BH={symbolCircle:KN,symbolCross:Xue,symbolDiamond:Zue,symbolSquare:Que,symbolStar:nfe,symbolTriangle:rfe,symbolWye:sfe},Ife=Math.PI/180,Nfe=function(e){var n="symbol".concat(ux(e));return BH[n]||KN},Ofe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*Ife;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},_fe=function(e,n){BH["symbol".concat(ux(e))]=n},XN=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,s=i===void 0?64:i,a=e.sizeType,o=a===void 0?"area":a,l=Efe(e,Cfe),c=Ez(Ez({},l),{},{type:r,size:s,sizeType:o}),f=function(){var v=Nfe(r),w=afe().type(v).size(Ofe(s,o,r));return w()},h=c.className,p=c.cx,g=c.cy,y=mt(c,!0);return p===+p&&g===+g&&s===+s?J.createElement("path",a$({},y,{className:St("recharts-symbols",h),transform:"translate(".concat(p,", ").concat(g,")"),d:f()})):null};XN.registerSymbol=_fe;function $f(t){"@babel/helpers - typeof";return $f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$f(t)}function o$(){return o$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o$.apply(this,arguments)}function $z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rfe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$z(Object(n),!0).forEach(function(r){Pp(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$z(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mfe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jH(r.key),r)}}function Pfe(t,e,n){return e&&Mfe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lfe(t,e,n){return e=M0(e),Ffe(t,zH()?Reflect.construct(e,n||[],M0(t).constructor):e.apply(t,n))}function Ffe(t,e){if(e&&($f(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bfe(t)}function Bfe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zH=function(){return!!t})()}function M0(t){return M0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},M0(t)}function zfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l$(t,e)}function l$(t,e){return l$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},l$(t,e)}function Pp(t,e,n){return e=jH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jH(t){var e=jfe(t,"string");return $f(e)=="symbol"?e:e+""}function jfe(t,e){if($f(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($f(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var gs=32,YN=function(t){function e(){return Dfe(this,e),Lfe(this,e,arguments)}return zfe(e,t),Pfe(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,s=gs/2,a=gs/6,o=gs/3,l=r.inactive?i:r.color;if(r.type==="plainline")return J.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:s,x2:gs,y2:s,className:"recharts-legend-icon"});if(r.type==="line")return J.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(s,"h").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*o,",").concat(s,`
            H`).concat(gs,"M").concat(2*o,",").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(o,",").concat(s),className:"recharts-legend-icon"});if(r.type==="rect")return J.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(gs/8,"h").concat(gs,"v").concat(gs*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(J.isValidElement(r.legendIcon)){var c=Rfe({},r);return delete c.legendIcon,J.cloneElement(r.legendIcon,c)}return J.createElement(XN,{fill:l,cx:s,cy:s,size:gs,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,s=i.payload,a=i.iconSize,o=i.layout,l=i.formatter,c=i.inactiveColor,f={x:0,y:0,width:gs,height:gs},h={display:o==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(g,y){var b=g.formatter||l,v=St(Pp(Pp({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",g.inactive));if(g.type==="none")return null;var w=st(g.value)?null:g.value;Qa(!st(g.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var S=g.inactive?c:g.color;return J.createElement("li",o$({className:v,style:h,key:"legend-item-".concat(y)},I0(r.props,g,y)),J.createElement(e$,{width:a,height:a,viewBox:f,style:p},r.renderIcon(g)),J.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},b?b(w,g,y):w))})}},{key:"render",value:function(){var r=this.props,i=r.payload,s=r.layout,a=r.align;if(!i||!i.length)return null;var o={padding:0,margin:0,textAlign:s==="horizontal"?a:"left"};return J.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(q.PureComponent);Pp(YN,"displayName","Legend");Pp(YN,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var h2,Iz;function Vfe(){if(Iz)return h2;Iz=1;var t=ox();function e(){this.__data__=new t,this.size=0}return h2=e,h2}var d2,Nz;function Ufe(){if(Nz)return d2;Nz=1;function t(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}return d2=t,d2}var p2,Oz;function Wfe(){if(Oz)return p2;Oz=1;function t(e){return this.__data__.get(e)}return p2=t,p2}var m2,_z;function Gfe(){if(_z)return m2;_z=1;function t(e){return this.__data__.has(e)}return m2=t,m2}var g2,Rz;function qfe(){if(Rz)return g2;Rz=1;var t=ox(),e=zN(),n=jN(),r=200;function i(s,a){var o=this.__data__;if(o instanceof t){var l=o.__data__;if(!e||l.length<r-1)return l.push([s,a]),this.size=++o.size,this;o=this.__data__=new n(l)}return o.set(s,a),this.size=o.size,this}return g2=i,g2}var y2,Dz;function VH(){if(Dz)return y2;Dz=1;var t=ox(),e=Vfe(),n=Ufe(),r=Wfe(),i=Gfe(),s=qfe();function a(o){var l=this.__data__=new t(o);this.size=l.size}return a.prototype.clear=e,a.prototype.delete=n,a.prototype.get=r,a.prototype.has=i,a.prototype.set=s,y2=a,y2}var v2,Mz;function Hfe(){if(Mz)return v2;Mz=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return v2=e,v2}var b2,Pz;function Kfe(){if(Pz)return b2;Pz=1;function t(e){return this.__data__.has(e)}return b2=t,b2}var x2,Lz;function UH(){if(Lz)return x2;Lz=1;var t=jN(),e=Hfe(),n=Kfe();function r(i){var s=-1,a=i==null?0:i.length;for(this.__data__=new t;++s<a;)this.add(i[s])}return r.prototype.add=r.prototype.push=e,r.prototype.has=n,x2=r,x2}var w2,Fz;function WH(){if(Fz)return w2;Fz=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}return w2=t,w2}var S2,Bz;function GH(){if(Bz)return S2;Bz=1;function t(e,n){return e.has(n)}return S2=t,S2}var C2,zz;function qH(){if(zz)return C2;zz=1;var t=UH(),e=WH(),n=GH(),r=1,i=2;function s(a,o,l,c,f,h){var p=l&r,g=a.length,y=o.length;if(g!=y&&!(p&&y>g))return!1;var b=h.get(a),v=h.get(o);if(b&&v)return b==o&&v==a;var w=-1,S=!0,T=l&i?new t:void 0;for(h.set(a,o),h.set(o,a);++w<g;){var A=a[w],k=o[w];if(c)var E=p?c(k,A,w,o,a,h):c(A,k,w,a,o,h);if(E!==void 0){if(E)continue;S=!1;break}if(T){if(!e(o,function(I,N){if(!n(T,N)&&(A===I||f(A,I,l,c,h)))return T.push(N)})){S=!1;break}}else if(!(A===k||f(A,k,l,c,h))){S=!1;break}}return h.delete(a),h.delete(o),S}return C2=s,C2}var T2,jz;function Xfe(){if(jz)return T2;jz=1;var t=pa(),e=t.Uint8Array;return T2=e,T2}var k2,Vz;function Yfe(){if(Vz)return k2;Vz=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i,s){r[++n]=[s,i]}),r}return k2=t,k2}var A2,Uz;function ZN(){if(Uz)return A2;Uz=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i){r[++n]=i}),r}return A2=t,A2}var E2,Wz;function Zfe(){if(Wz)return E2;Wz=1;var t=Mm(),e=Xfe(),n=BN(),r=qH(),i=Yfe(),s=ZN(),a=1,o=2,l="[object Boolean]",c="[object Date]",f="[object Error]",h="[object Map]",p="[object Number]",g="[object RegExp]",y="[object Set]",b="[object String]",v="[object Symbol]",w="[object ArrayBuffer]",S="[object DataView]",T=t?t.prototype:void 0,A=T?T.valueOf:void 0;function k(E,I,N,_,D,O,P){switch(N){case S:if(E.byteLength!=I.byteLength||E.byteOffset!=I.byteOffset)return!1;E=E.buffer,I=I.buffer;case w:return!(E.byteLength!=I.byteLength||!O(new e(E),new e(I)));case l:case c:case p:return n(+E,+I);case f:return E.name==I.name&&E.message==I.message;case g:case b:return E==I+"";case h:var z=i;case y:var W=_&a;if(z||(z=s),E.size!=I.size&&!W)return!1;var U=P.get(E);if(U)return U==I;_|=o,P.set(E,I);var R=r(z(E),z(I),_,D,O,P);return P.delete(E),R;case v:if(A)return A.call(E)==A.call(I)}return!1}return E2=k,E2}var $2,Gz;function HH(){if(Gz)return $2;Gz=1;function t(e,n){for(var r=-1,i=n.length,s=e.length;++r<i;)e[s+r]=n[r];return e}return $2=t,$2}var I2,qz;function Qfe(){if(qz)return I2;qz=1;var t=HH(),e=gi();function n(r,i,s){var a=i(r);return e(r)?a:t(a,s(r))}return I2=n,I2}var N2,Hz;function Jfe(){if(Hz)return N2;Hz=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,s=0,a=[];++r<i;){var o=e[r];n(o,r,e)&&(a[s++]=o)}return a}return N2=t,N2}var O2,Kz;function ehe(){if(Kz)return O2;Kz=1;function t(){return[]}return O2=t,O2}var _2,Xz;function the(){if(Xz)return _2;Xz=1;var t=Jfe(),e=ehe(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(a){return a==null?[]:(a=Object(a),t(i(a),function(o){return r.call(a,o)}))}:e;return _2=s,_2}var R2,Yz;function nhe(){if(Yz)return R2;Yz=1;function t(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}return R2=t,R2}var D2,Zz;function rhe(){if(Zz)return D2;Zz=1;var t=po(),e=mo(),n="[object Arguments]";function r(i){return e(i)&&t(i)==n}return D2=r,D2}var M2,Qz;function QN(){if(Qz)return M2;Qz=1;var t=rhe(),e=mo(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,s=t(function(){return arguments}())?t:function(a){return e(a)&&r.call(a,"callee")&&!i.call(a,"callee")};return M2=s,M2}var sp={exports:{}},P2,Jz;function ihe(){if(Jz)return P2;Jz=1;function t(){return!1}return P2=t,P2}sp.exports;var e4;function KH(){return e4||(e4=1,function(t,e){var n=pa(),r=ihe(),i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===i,o=a?n.Buffer:void 0,l=o?o.isBuffer:void 0,c=l||r;t.exports=c}(sp,sp.exports)),sp.exports}var L2,t4;function JN(){if(t4)return L2;t4=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var s=typeof r;return i=i??t,!!i&&(s=="number"||s!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return L2=n,L2}var F2,n4;function eO(){if(n4)return F2;n4=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return F2=e,F2}var B2,r4;function she(){if(r4)return B2;r4=1;var t=po(),e=eO(),n=mo(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",a="[object Date]",o="[object Error]",l="[object Function]",c="[object Map]",f="[object Number]",h="[object Object]",p="[object RegExp]",g="[object Set]",y="[object String]",b="[object WeakMap]",v="[object ArrayBuffer]",w="[object DataView]",S="[object Float32Array]",T="[object Float64Array]",A="[object Int8Array]",k="[object Int16Array]",E="[object Int32Array]",I="[object Uint8Array]",N="[object Uint8ClampedArray]",_="[object Uint16Array]",D="[object Uint32Array]",O={};O[S]=O[T]=O[A]=O[k]=O[E]=O[I]=O[N]=O[_]=O[D]=!0,O[r]=O[i]=O[v]=O[s]=O[w]=O[a]=O[o]=O[l]=O[c]=O[f]=O[h]=O[p]=O[g]=O[y]=O[b]=!1;function P(z){return n(z)&&e(z.length)&&!!O[t(z)]}return B2=P,B2}var z2,i4;function XH(){if(i4)return z2;i4=1;function t(e){return function(n){return e(n)}}return z2=t,z2}var ap={exports:{}};ap.exports;var s4;function ahe(){return s4||(s4=1,function(t,e){var n=mH(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,a=s&&n.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();t.exports=o}(ap,ap.exports)),ap.exports}var j2,a4;function YH(){if(a4)return j2;a4=1;var t=she(),e=XH(),n=ahe(),r=n&&n.isTypedArray,i=r?e(r):t;return j2=i,j2}var V2,o4;function ohe(){if(o4)return V2;o4=1;var t=nhe(),e=QN(),n=gi(),r=KH(),i=JN(),s=YH(),a=Object.prototype,o=a.hasOwnProperty;function l(c,f){var h=n(c),p=!h&&e(c),g=!h&&!p&&r(c),y=!h&&!p&&!g&&s(c),b=h||p||g||y,v=b?t(c.length,String):[],w=v.length;for(var S in c)(f||o.call(c,S))&&!(b&&(S=="length"||g&&(S=="offset"||S=="parent")||y&&(S=="buffer"||S=="byteLength"||S=="byteOffset")||i(S,w)))&&v.push(S);return v}return V2=l,V2}var U2,l4;function lhe(){if(l4)return U2;l4=1;var t=Object.prototype;function e(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||t;return n===i}return U2=e,U2}var W2,c4;function ZH(){if(c4)return W2;c4=1;function t(e,n){return function(r){return e(n(r))}}return W2=t,W2}var G2,u4;function che(){if(u4)return G2;u4=1;var t=ZH(),e=t(Object.keys,Object);return G2=e,G2}var q2,f4;function uhe(){if(f4)return q2;f4=1;var t=lhe(),e=che(),n=Object.prototype,r=n.hasOwnProperty;function i(s){if(!t(s))return e(s);var a=[];for(var o in Object(s))r.call(s,o)&&o!="constructor"&&a.push(o);return a}return q2=i,q2}var H2,h4;function Lm(){if(h4)return H2;h4=1;var t=FN(),e=eO();function n(r){return r!=null&&e(r.length)&&!t(r)}return H2=n,H2}var K2,d4;function px(){if(d4)return K2;d4=1;var t=ohe(),e=uhe(),n=Lm();function r(i){return n(i)?t(i):e(i)}return K2=r,K2}var X2,p4;function fhe(){if(p4)return X2;p4=1;var t=Qfe(),e=the(),n=px();function r(i){return t(i,n,e)}return X2=r,X2}var Y2,m4;function hhe(){if(m4)return Y2;m4=1;var t=fhe(),e=1,n=Object.prototype,r=n.hasOwnProperty;function i(s,a,o,l,c,f){var h=o&e,p=t(s),g=p.length,y=t(a),b=y.length;if(g!=b&&!h)return!1;for(var v=g;v--;){var w=p[v];if(!(h?w in a:r.call(a,w)))return!1}var S=f.get(s),T=f.get(a);if(S&&T)return S==a&&T==s;var A=!0;f.set(s,a),f.set(a,s);for(var k=h;++v<g;){w=p[v];var E=s[w],I=a[w];if(l)var N=h?l(I,E,w,a,s,f):l(E,I,w,s,a,f);if(!(N===void 0?E===I||c(E,I,o,l,f):N)){A=!1;break}k||(k=w=="constructor")}if(A&&!k){var _=s.constructor,D=a.constructor;_!=D&&"constructor"in s&&"constructor"in a&&!(typeof _=="function"&&_ instanceof _&&typeof D=="function"&&D instanceof D)&&(A=!1)}return f.delete(s),f.delete(a),A}return Y2=i,Y2}var Z2,g4;function dhe(){if(g4)return Z2;g4=1;var t=Kc(),e=pa(),n=t(e,"DataView");return Z2=n,Z2}var Q2,y4;function phe(){if(y4)return Q2;y4=1;var t=Kc(),e=pa(),n=t(e,"Promise");return Q2=n,Q2}var J2,v4;function QH(){if(v4)return J2;v4=1;var t=Kc(),e=pa(),n=t(e,"Set");return J2=n,J2}var ek,b4;function mhe(){if(b4)return ek;b4=1;var t=Kc(),e=pa(),n=t(e,"WeakMap");return ek=n,ek}var tk,x4;function ghe(){if(x4)return tk;x4=1;var t=dhe(),e=zN(),n=phe(),r=QH(),i=mhe(),s=po(),a=gH(),o="[object Map]",l="[object Object]",c="[object Promise]",f="[object Set]",h="[object WeakMap]",p="[object DataView]",g=a(t),y=a(e),b=a(n),v=a(r),w=a(i),S=s;return(t&&S(new t(new ArrayBuffer(1)))!=p||e&&S(new e)!=o||n&&S(n.resolve())!=c||r&&S(new r)!=f||i&&S(new i)!=h)&&(S=function(T){var A=s(T),k=A==l?T.constructor:void 0,E=k?a(k):"";if(E)switch(E){case g:return p;case y:return o;case b:return c;case v:return f;case w:return h}return A}),tk=S,tk}var nk,w4;function yhe(){if(w4)return nk;w4=1;var t=VH(),e=qH(),n=Zfe(),r=hhe(),i=ghe(),s=gi(),a=KH(),o=YH(),l=1,c="[object Arguments]",f="[object Array]",h="[object Object]",p=Object.prototype,g=p.hasOwnProperty;function y(b,v,w,S,T,A){var k=s(b),E=s(v),I=k?f:i(b),N=E?f:i(v);I=I==c?h:I,N=N==c?h:N;var _=I==h,D=N==h,O=I==N;if(O&&a(b)){if(!a(v))return!1;k=!0,_=!1}if(O&&!_)return A||(A=new t),k||o(b)?e(b,v,w,S,T,A):n(b,v,I,w,S,T,A);if(!(w&l)){var P=_&&g.call(b,"__wrapped__"),z=D&&g.call(v,"__wrapped__");if(P||z){var W=P?b.value():b,U=z?v.value():v;return A||(A=new t),T(W,U,w,S,A)}}return O?(A||(A=new t),r(b,v,w,S,T,A)):!1}return nk=y,nk}var rk,S4;function tO(){if(S4)return rk;S4=1;var t=yhe(),e=mo();function n(r,i,s,a,o){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:t(r,i,s,a,n,o)}return rk=n,rk}var ik,C4;function vhe(){if(C4)return ik;C4=1;var t=VH(),e=tO(),n=1,r=2;function i(s,a,o,l){var c=o.length,f=c,h=!l;if(s==null)return!f;for(s=Object(s);c--;){var p=o[c];if(h&&p[2]?p[1]!==s[p[0]]:!(p[0]in s))return!1}for(;++c<f;){p=o[c];var g=p[0],y=s[g],b=p[1];if(h&&p[2]){if(y===void 0&&!(g in s))return!1}else{var v=new t;if(l)var w=l(y,b,g,s,a,v);if(!(w===void 0?e(b,y,n|r,l,v):w))return!1}}return!0}return ik=i,ik}var sk,T4;function JH(){if(T4)return sk;T4=1;var t=bl();function e(n){return n===n&&!t(n)}return sk=e,sk}var ak,k4;function bhe(){if(k4)return ak;k4=1;var t=JH(),e=px();function n(r){for(var i=e(r),s=i.length;s--;){var a=i[s],o=r[a];i[s]=[a,o,t(o)]}return i}return ak=n,ak}var ok,A4;function e8(){if(A4)return ok;A4=1;function t(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}return ok=t,ok}var lk,E4;function xhe(){if(E4)return lk;E4=1;var t=vhe(),e=bhe(),n=e8();function r(i){var s=e(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(a){return a===i||t(a,i,s)}}return lk=r,lk}var ck,$4;function whe(){if($4)return ck;$4=1;function t(e,n){return e!=null&&n in Object(e)}return ck=t,ck}var uk,I4;function She(){if(I4)return uk;I4=1;var t=bH(),e=QN(),n=gi(),r=JN(),i=eO(),s=cx();function a(o,l,c){l=t(l,o);for(var f=-1,h=l.length,p=!1;++f<h;){var g=s(l[f]);if(!(p=o!=null&&c(o,g)))break;o=o[g]}return p||++f!=h?p:(h=o==null?0:o.length,!!h&&i(h)&&r(g,h)&&(n(o)||e(o)))}return uk=a,uk}var fk,N4;function Che(){if(N4)return fk;N4=1;var t=whe(),e=She();function n(r,i){return r!=null&&e(r,i,t)}return fk=n,fk}var hk,O4;function The(){if(O4)return hk;O4=1;var t=tO(),e=xH(),n=Che(),r=LN(),i=JH(),s=e8(),a=cx(),o=1,l=2;function c(f,h){return r(f)&&i(h)?s(a(f),h):function(p){var g=e(p,f);return g===void 0&&g===h?n(p,f):t(h,g,o|l)}}return hk=c,hk}var dk,_4;function mh(){if(_4)return dk;_4=1;function t(e){return e}return dk=t,dk}var pk,R4;function khe(){if(R4)return pk;R4=1;function t(e){return function(n){return n==null?void 0:n[e]}}return pk=t,pk}var mk,D4;function Ahe(){if(D4)return mk;D4=1;var t=UN();function e(n){return function(r){return t(r,n)}}return mk=e,mk}var gk,M4;function Ehe(){if(M4)return gk;M4=1;var t=khe(),e=Ahe(),n=LN(),r=cx();function i(s){return n(s)?t(r(s)):e(s)}return gk=i,gk}var yk,P4;function xl(){if(P4)return yk;P4=1;var t=xhe(),e=The(),n=mh(),r=gi(),i=Ehe();function s(a){return typeof a=="function"?a:a==null?n:typeof a=="object"?r(a)?e(a[0],a[1]):t(a):i(a)}return yk=s,yk}var vk,L4;function t8(){if(L4)return vk;L4=1;function t(e,n,r,i){for(var s=e.length,a=r+(i?1:-1);i?a--:++a<s;)if(n(e[a],a,e))return a;return-1}return vk=t,vk}var bk,F4;function $he(){if(F4)return bk;F4=1;function t(e){return e!==e}return bk=t,bk}var xk,B4;function Ihe(){if(B4)return xk;B4=1;function t(e,n,r){for(var i=r-1,s=e.length;++i<s;)if(e[i]===n)return i;return-1}return xk=t,xk}var wk,z4;function Nhe(){if(z4)return wk;z4=1;var t=t8(),e=$he(),n=Ihe();function r(i,s,a){return s===s?n(i,s,a):t(i,e,a)}return wk=r,wk}var Sk,j4;function Ohe(){if(j4)return Sk;j4=1;var t=Nhe();function e(n,r){var i=n==null?0:n.length;return!!i&&t(n,r,0)>-1}return Sk=e,Sk}var Ck,V4;function _he(){if(V4)return Ck;V4=1;function t(e,n,r){for(var i=-1,s=e==null?0:e.length;++i<s;)if(r(n,e[i]))return!0;return!1}return Ck=t,Ck}var Tk,U4;function Rhe(){if(U4)return Tk;U4=1;function t(){}return Tk=t,Tk}var kk,W4;function Dhe(){if(W4)return kk;W4=1;var t=QH(),e=Rhe(),n=ZN(),r=1/0,i=t&&1/n(new t([,-0]))[1]==r?function(s){return new t(s)}:e;return kk=i,kk}var Ak,G4;function Mhe(){if(G4)return Ak;G4=1;var t=UH(),e=Ohe(),n=_he(),r=GH(),i=Dhe(),s=ZN(),a=200;function o(l,c,f){var h=-1,p=e,g=l.length,y=!0,b=[],v=b;if(f)y=!1,p=n;else if(g>=a){var w=c?null:i(l);if(w)return s(w);y=!1,p=r,v=new t}else v=c?[]:b;e:for(;++h<g;){var S=l[h],T=c?c(S):S;if(S=f||S!==0?S:0,y&&T===T){for(var A=v.length;A--;)if(v[A]===T)continue e;c&&v.push(T),b.push(S)}else p(v,T,f)||(v!==b&&v.push(T),b.push(S))}return b}return Ak=o,Ak}var Ek,q4;function Phe(){if(q4)return Ek;q4=1;var t=xl(),e=Mhe();function n(r,i){return r&&r.length?e(r,t(i,2)):[]}return Ek=n,Ek}var Lhe=Phe();const H4=Nt(Lhe);function n8(t,e,n){return e===!0?H4(t,n):st(e)?H4(t,e):t}function If(t){"@babel/helpers - typeof";return If=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},If(t)}var Fhe=["ref"];function K4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ba(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K4(Object(n),!0).forEach(function(r){mx(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i8(r.key),r)}}function zhe(t,e,n){return e&&X4(t.prototype,e),n&&X4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function jhe(t,e,n){return e=P0(e),Vhe(t,r8()?Reflect.construct(e,n||[],P0(t).constructor):e.apply(t,n))}function Vhe(t,e){if(e&&(If(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uhe(t)}function Uhe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r8=function(){return!!t})()}function P0(t){return P0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},P0(t)}function Whe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c$(t,e)}function c$(t,e){return c$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},c$(t,e)}function mx(t,e,n){return e=i8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i8(t){var e=Ghe(t,"string");return If(e)=="symbol"?e:e+""}function Ghe(t,e){if(If(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(If(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function qhe(t,e){if(t==null)return{};var n=Hhe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Hhe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Khe(t){return t.value}function Xhe(t,e){if(J.isValidElement(t))return J.cloneElement(t,e);if(typeof t=="function")return J.createElement(t,e);e.ref;var n=qhe(e,Fhe);return J.createElement(YN,n)}var Y4=1,yf=function(t){function e(){var n;Bhe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=jhe(this,e,[].concat(i)),mx(n,"lastBoundingBox",{width:-1,height:-1}),n}return Whe(e,t),zhe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>Y4||Math.abs(i.height-this.lastBoundingBox.height)>Y4)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ba({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,s=i.layout,a=i.align,o=i.verticalAlign,l=i.margin,c=i.chartWidth,f=i.chartHeight,h,p;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(a==="center"&&s==="vertical"){var g=this.getBBoxSnapshot();h={left:((c||0)-g.width)/2}}else h=a==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(o==="middle"){var y=this.getBBoxSnapshot();p={top:((f||0)-y.height)/2}}else p=o==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return Ba(Ba({},h),p)}},{key:"render",value:function(){var r=this,i=this.props,s=i.content,a=i.width,o=i.height,l=i.wrapperStyle,c=i.payloadUniqBy,f=i.payload,h=Ba(Ba({position:"absolute",width:a||"auto",height:o||"auto"},this.getDefaultPosition(l)),l);return J.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(g){r.wrapperNode=g}},Xhe(s,Ba(Ba({},this.props),{},{payload:n8(f,c,Khe)})))}}],[{key:"getWithHeight",value:function(r,i){var s=Ba(Ba({},this.defaultProps),r.props),a=s.layout;return a==="vertical"&&Ne(r.props.height)?{height:r.props.height}:a==="horizontal"?{width:r.props.width||i}:null}}])}(q.PureComponent);mx(yf,"displayName","Legend");mx(yf,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var $k,Z4;function Yhe(){if(Z4)return $k;Z4=1;var t=Mm(),e=QN(),n=gi(),r=t?t.isConcatSpreadable:void 0;function i(s){return n(s)||e(s)||!!(r&&s&&s[r])}return $k=i,$k}var Ik,Q4;function s8(){if(Q4)return Ik;Q4=1;var t=HH(),e=Yhe();function n(r,i,s,a,o){var l=-1,c=r.length;for(s||(s=e),o||(o=[]);++l<c;){var f=r[l];i>0&&s(f)?i>1?n(f,i-1,s,a,o):t(o,f):a||(o[o.length]=f)}return o}return Ik=n,Ik}var Nk,J4;function Zhe(){if(J4)return Nk;J4=1;function t(e){return function(n,r,i){for(var s=-1,a=Object(n),o=i(n),l=o.length;l--;){var c=o[e?l:++s];if(r(a[c],c,a)===!1)break}return n}}return Nk=t,Nk}var Ok,ej;function Qhe(){if(ej)return Ok;ej=1;var t=Zhe(),e=t();return Ok=e,Ok}var _k,tj;function a8(){if(tj)return _k;tj=1;var t=Qhe(),e=px();function n(r,i){return r&&t(r,i,e)}return _k=n,_k}var Rk,nj;function Jhe(){if(nj)return Rk;nj=1;var t=Lm();function e(n,r){return function(i,s){if(i==null)return i;if(!t(i))return n(i,s);for(var a=i.length,o=r?a:-1,l=Object(i);(r?o--:++o<a)&&s(l[o],o,l)!==!1;);return i}}return Rk=e,Rk}var Dk,rj;function nO(){if(rj)return Dk;rj=1;var t=a8(),e=Jhe(),n=e(t);return Dk=n,Dk}var Mk,ij;function o8(){if(ij)return Mk;ij=1;var t=nO(),e=Lm();function n(r,i){var s=-1,a=e(r)?Array(r.length):[];return t(r,function(o,l,c){a[++s]=i(o,l,c)}),a}return Mk=n,Mk}var Pk,sj;function ede(){if(sj)return Pk;sj=1;function t(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}return Pk=t,Pk}var Lk,aj;function tde(){if(aj)return Lk;aj=1;var t=hh();function e(n,r){if(n!==r){var i=n!==void 0,s=n===null,a=n===n,o=t(n),l=r!==void 0,c=r===null,f=r===r,h=t(r);if(!c&&!h&&!o&&n>r||o&&l&&f&&!c&&!h||s&&l&&f||!i&&f||!a)return 1;if(!s&&!o&&!h&&n<r||h&&i&&a&&!s&&!o||c&&i&&a||!l&&a||!f)return-1}return 0}return Lk=e,Lk}var Fk,oj;function nde(){if(oj)return Fk;oj=1;var t=tde();function e(n,r,i){for(var s=-1,a=n.criteria,o=r.criteria,l=a.length,c=i.length;++s<l;){var f=t(a[s],o[s]);if(f){if(s>=c)return f;var h=i[s];return f*(h=="desc"?-1:1)}}return n.index-r.index}return Fk=e,Fk}var Bk,lj;function rde(){if(lj)return Bk;lj=1;var t=VN(),e=UN(),n=xl(),r=o8(),i=ede(),s=XH(),a=nde(),o=mh(),l=gi();function c(f,h,p){h.length?h=t(h,function(b){return l(b)?function(v){return e(v,b.length===1?b[0]:b)}:b}):h=[o];var g=-1;h=t(h,s(n));var y=r(f,function(b,v,w){var S=t(h,function(T){return T(b)});return{criteria:S,index:++g,value:b}});return i(y,function(b,v){return a(b,v,p)})}return Bk=c,Bk}var zk,cj;function ide(){if(cj)return zk;cj=1;function t(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}return zk=t,zk}var jk,uj;function sde(){if(uj)return jk;uj=1;var t=ide(),e=Math.max;function n(r,i,s){return i=e(i===void 0?r.length-1:i,0),function(){for(var a=arguments,o=-1,l=e(a.length-i,0),c=Array(l);++o<l;)c[o]=a[i+o];o=-1;for(var f=Array(i+1);++o<i;)f[o]=a[o];return f[i]=s(c),t(r,this,f)}}return jk=n,jk}var Vk,fj;function ade(){if(fj)return Vk;fj=1;function t(e){return function(){return e}}return Vk=t,Vk}var Uk,hj;function l8(){if(hj)return Uk;hj=1;var t=Kc(),e=function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}}();return Uk=e,Uk}var Wk,dj;function ode(){if(dj)return Wk;dj=1;var t=ade(),e=l8(),n=mh(),r=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(s),writable:!0})}:n;return Wk=r,Wk}var Gk,pj;function lde(){if(pj)return Gk;pj=1;var t=800,e=16,n=Date.now;function r(i){var s=0,a=0;return function(){var o=n(),l=e-(o-a);if(a=o,l>0){if(++s>=t)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return Gk=r,Gk}var qk,mj;function cde(){if(mj)return qk;mj=1;var t=ode(),e=lde(),n=e(t);return qk=n,qk}var Hk,gj;function ude(){if(gj)return Hk;gj=1;var t=mh(),e=sde(),n=cde();function r(i,s){return n(e(i,s,t),i+"")}return Hk=r,Hk}var Kk,yj;function gx(){if(yj)return Kk;yj=1;var t=BN(),e=Lm(),n=JN(),r=bl();function i(s,a,o){if(!r(o))return!1;var l=typeof a;return(l=="number"?e(o)&&n(a,o.length):l=="string"&&a in o)?t(o[a],s):!1}return Kk=i,Kk}var Xk,vj;function fde(){if(vj)return Xk;vj=1;var t=s8(),e=rde(),n=ude(),r=gx(),i=n(function(s,a){if(s==null)return[];var o=a.length;return o>1&&r(s,a[0],a[1])?a=[]:o>2&&r(a[0],a[1],a[2])&&(a=[a[0]]),e(s,t(a,1),[])});return Xk=i,Xk}var hde=fde();const rO=Nt(hde);function Lp(t){"@babel/helpers - typeof";return Lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lp(t)}function u$(){return u$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u$.apply(this,arguments)}function dde(t,e){return yde(t)||gde(t,e)||mde(t,e)||pde()}function pde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mde(t,e){if(t){if(typeof t=="string")return bj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bj(t,e)}}function bj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gde(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function yde(t){if(Array.isArray(t))return t}function xj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xj(Object(n),!0).forEach(function(r){vde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vde(t,e,n){return e=bde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bde(t){var e=xde(t,"string");return Lp(e)=="symbol"?e:e+""}function xde(t,e){if(Lp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wde(t){return Array.isArray(t)&&Zn(t[0])&&Zn(t[1])?t.join(" ~ "):t}var Sde=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,s=i===void 0?{}:i,a=e.itemStyle,o=a===void 0?{}:a,l=e.labelStyle,c=l===void 0?{}:l,f=e.payload,h=e.formatter,p=e.itemSorter,g=e.wrapperClassName,y=e.labelClassName,b=e.label,v=e.labelFormatter,w=e.accessibilityLayer,S=w===void 0?!1:w,T=function(){if(f&&f.length){var P={padding:0,margin:0},z=(p?rO(f,p):f).map(function(W,U){if(W.type==="none")return null;var R=Yk({display:"block",paddingTop:4,paddingBottom:4,color:W.color||"#000"},o),F=W.formatter||h||wde,B=W.value,K=W.name,L=B,H=K;if(F&&L!=null&&H!=null){var X=F(B,K,W,U,f);if(Array.isArray(X)){var Y=dde(X,2);L=Y[0],H=Y[1]}else L=X}return J.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(U),style:R},Zn(H)?J.createElement("span",{className:"recharts-tooltip-item-name"},H):null,Zn(H)?J.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,J.createElement("span",{className:"recharts-tooltip-item-value"},L),J.createElement("span",{className:"recharts-tooltip-item-unit"},W.unit||""))});return J.createElement("ul",{className:"recharts-tooltip-item-list",style:P},z)}return null},A=Yk({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),k=Yk({margin:0},c),E=!yt(b),I=E?b:"",N=St("recharts-default-tooltip",g),_=St("recharts-tooltip-label",y);E&&v&&f!==void 0&&f!==null&&(I=v(b,f));var D=S?{role:"status","aria-live":"assertive"}:{};return J.createElement("div",u$({className:N,style:A},D),J.createElement("p",{className:_,style:k},J.isValidElement(I)?I:"".concat(I)),T())};function Fp(t){"@babel/helpers - typeof";return Fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fp(t)}function $v(t,e,n){return e=Cde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cde(t){var e=Tde(t,"string");return Fp(e)=="symbol"?e:e+""}function Tde(t,e){if(Fp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Fp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ud="recharts-tooltip-wrapper",kde={visibility:"hidden"};function Ade(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return St(Ud,$v($v($v($v({},"".concat(Ud,"-right"),Ne(n)&&e&&Ne(e.x)&&n>=e.x),"".concat(Ud,"-left"),Ne(n)&&e&&Ne(e.x)&&n<e.x),"".concat(Ud,"-bottom"),Ne(r)&&e&&Ne(e.y)&&r>=e.y),"".concat(Ud,"-top"),Ne(r)&&e&&Ne(e.y)&&r<e.y))}function wj(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,s=t.position,a=t.reverseDirection,o=t.tooltipDimension,l=t.viewBox,c=t.viewBoxDimension;if(s&&Ne(s[r]))return s[r];var f=n[r]-o-i,h=n[r]+i;if(e[r])return a[r]?f:h;if(a[r]){var p=f,g=l[r];return p<g?Math.max(h,l[r]):Math.max(f,l[r])}var y=h+o,b=l[r]+c;return y>b?Math.max(f,l[r]):Math.max(h,l[r])}function Ede(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function $de(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,s=t.reverseDirection,a=t.tooltipBox,o=t.useTranslate3d,l=t.viewBox,c,f,h;return a.height>0&&a.width>0&&n?(f=wj({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.width,viewBox:l,viewBoxDimension:l.width}),h=wj({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.height,viewBox:l,viewBoxDimension:l.height}),c=Ede({translateX:f,translateY:h,useTranslate3d:o})):c=kde,{cssProperties:c,cssClasses:Ade({translateX:f,translateY:h,coordinate:n})}}function Nf(t){"@babel/helpers - typeof";return Nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nf(t)}function Sj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Sj(Object(n),!0).forEach(function(r){h$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ide(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nde(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u8(r.key),r)}}function Ode(t,e,n){return e&&Nde(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _de(t,e,n){return e=L0(e),Rde(t,c8()?Reflect.construct(e,n||[],L0(t).constructor):e.apply(t,n))}function Rde(t,e){if(e&&(Nf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dde(t)}function Dde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(c8=function(){return!!t})()}function L0(t){return L0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},L0(t)}function Mde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f$(t,e)}function f$(t,e){return f$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},f$(t,e)}function h$(t,e,n){return e=u8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u8(t){var e=Pde(t,"string");return Nf(e)=="symbol"?e:e+""}function Pde(t,e){if(Nf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Nf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Tj=1,Lde=function(t){function e(){var n;Ide(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=_de(this,e,[].concat(i)),h$(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),h$(n,"handleKeyDown",function(a){if(a.key==="Escape"){var o,l,c,f;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&o!==void 0?o:0,y:(c=(f=n.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&c!==void 0?c:0}})}}),n}return Mde(e,t),Ode(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>Tj||Math.abs(r.height-this.state.lastBoundingBox.height)>Tj)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,s=i.active,a=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,c=i.children,f=i.coordinate,h=i.hasPayload,p=i.isAnimationActive,g=i.offset,y=i.position,b=i.reverseDirection,v=i.useTranslate3d,w=i.viewBox,S=i.wrapperStyle,T=$de({allowEscapeViewBox:a,coordinate:f,offsetTopLeft:g,position:y,reverseDirection:b,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:w}),A=T.cssClasses,k=T.cssProperties,E=Cj(Cj({transition:p&&s?"transform ".concat(o,"ms ").concat(l):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&h?"visible":"hidden",position:"absolute",top:0,left:0},S);return J.createElement("div",{tabIndex:-1,className:A,style:E,ref:function(N){r.wrapperNode=N}},c)}}])}(q.PureComponent),Fde=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},gh={isSsr:Fde()};function Of(t){"@babel/helpers - typeof";return Of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Of(t)}function kj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Aj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kj(Object(n),!0).forEach(function(r){iO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zde(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h8(r.key),r)}}function jde(t,e,n){return e&&zde(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Vde(t,e,n){return e=F0(e),Ude(t,f8()?Reflect.construct(e,n||[],F0(t).constructor):e.apply(t,n))}function Ude(t,e){if(e&&(Of(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wde(t)}function Wde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f8=function(){return!!t})()}function F0(t){return F0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},F0(t)}function Gde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d$(t,e)}function d$(t,e){return d$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},d$(t,e)}function iO(t,e,n){return e=h8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h8(t){var e=qde(t,"string");return Of(e)=="symbol"?e:e+""}function qde(t,e){if(Of(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Of(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Hde(t){return t.dataKey}function Kde(t,e){return J.isValidElement(t)?J.cloneElement(t,e):typeof t=="function"?J.createElement(t,e):J.createElement(Sde,e)}var Us=function(t){function e(){return Bde(this,e),Vde(this,e,arguments)}return Gde(e,t),jde(e,[{key:"render",value:function(){var r=this,i=this.props,s=i.active,a=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,c=i.content,f=i.coordinate,h=i.filterNull,p=i.isAnimationActive,g=i.offset,y=i.payload,b=i.payloadUniqBy,v=i.position,w=i.reverseDirection,S=i.useTranslate3d,T=i.viewBox,A=i.wrapperStyle,k=y??[];h&&k.length&&(k=n8(y.filter(function(I){return I.value!=null&&(I.hide!==!0||r.props.includeHidden)}),b,Hde));var E=k.length>0;return J.createElement(Lde,{allowEscapeViewBox:a,animationDuration:o,animationEasing:l,isAnimationActive:p,active:s,coordinate:f,hasPayload:E,offset:g,position:v,reverseDirection:w,useTranslate3d:S,viewBox:T,wrapperStyle:A},Kde(c,Aj(Aj({},this.props),{},{payload:k})))}}])}(q.PureComponent);iO(Us,"displayName","Tooltip");iO(Us,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!gh.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Zk,Ej;function Xde(){if(Ej)return Zk;Ej=1;var t=pa(),e=function(){return t.Date.now()};return Zk=e,Zk}var Qk,$j;function Yde(){if($j)return Qk;$j=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return Qk=e,Qk}var Jk,Ij;function Zde(){if(Ij)return Jk;Ij=1;var t=Yde(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return Jk=n,Jk}var eA,Nj;function d8(){if(Nj)return eA;Nj=1;var t=Zde(),e=bl(),n=hh(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt;function l(c){if(typeof c=="number")return c;if(n(c))return r;if(e(c)){var f=typeof c.valueOf=="function"?c.valueOf():c;c=e(f)?f+"":f}if(typeof c!="string")return c===0?c:+c;c=t(c);var h=s.test(c);return h||a.test(c)?o(c.slice(2),h?2:8):i.test(c)?r:+c}return eA=l,eA}var tA,Oj;function Qde(){if(Oj)return tA;Oj=1;var t=bl(),e=Xde(),n=d8(),r="Expected a function",i=Math.max,s=Math.min;function a(o,l,c){var f,h,p,g,y,b,v=0,w=!1,S=!1,T=!0;if(typeof o!="function")throw new TypeError(r);l=n(l)||0,t(c)&&(w=!!c.leading,S="maxWait"in c,p=S?i(n(c.maxWait)||0,l):p,T="trailing"in c?!!c.trailing:T);function A(z){var W=f,U=h;return f=h=void 0,v=z,g=o.apply(U,W),g}function k(z){return v=z,y=setTimeout(N,l),w?A(z):g}function E(z){var W=z-b,U=z-v,R=l-W;return S?s(R,p-U):R}function I(z){var W=z-b,U=z-v;return b===void 0||W>=l||W<0||S&&U>=p}function N(){var z=e();if(I(z))return _(z);y=setTimeout(N,E(z))}function _(z){return y=void 0,T&&f?A(z):(f=h=void 0,g)}function D(){y!==void 0&&clearTimeout(y),v=0,f=b=h=y=void 0}function O(){return y===void 0?g:_(e())}function P(){var z=e(),W=I(z);if(f=arguments,h=this,b=z,W){if(y===void 0)return k(b);if(S)return clearTimeout(y),y=setTimeout(N,l),A(b)}return y===void 0&&(y=setTimeout(N,l)),g}return P.cancel=D,P.flush=O,P}return tA=a,tA}var nA,_j;function Jde(){if(_j)return nA;_j=1;var t=Qde(),e=bl(),n="Expected a function";function r(i,s,a){var o=!0,l=!0;if(typeof i!="function")throw new TypeError(n);return e(a)&&(o="leading"in a?!!a.leading:o,l="trailing"in a?!!a.trailing:l),t(i,s,{leading:o,maxWait:s,trailing:l})}return nA=r,nA}var epe=Jde();const p8=Nt(epe);function Bp(t){"@babel/helpers - typeof";return Bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bp(t)}function Rj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Iv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rj(Object(n),!0).forEach(function(r){tpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tpe(t,e,n){return e=npe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function npe(t){var e=rpe(t,"string");return Bp(e)=="symbol"?e:e+""}function rpe(t,e){if(Bp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ipe(t,e){return lpe(t)||ope(t,e)||ape(t,e)||spe()}function spe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ape(t,e){if(t){if(typeof t=="string")return Dj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dj(t,e)}}function Dj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ope(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function lpe(t){if(Array.isArray(t))return t}var cpe=q.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,s=t.width,a=s===void 0?"100%":s,o=t.height,l=o===void 0?"100%":o,c=t.minWidth,f=c===void 0?0:c,h=t.minHeight,p=t.maxHeight,g=t.children,y=t.debounce,b=y===void 0?0:y,v=t.id,w=t.className,S=t.onResize,T=t.style,A=T===void 0?{}:T,k=q.useRef(null),E=q.useRef();E.current=S,q.useImperativeHandle(e,function(){return Object.defineProperty(k.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),k.current},configurable:!0})});var I=q.useState({containerWidth:i.width,containerHeight:i.height}),N=ipe(I,2),_=N[0],D=N[1],O=q.useCallback(function(z,W){D(function(U){var R=Math.round(z),F=Math.round(W);return U.containerWidth===R&&U.containerHeight===F?U:{containerWidth:R,containerHeight:F}})},[]);q.useEffect(function(){var z=function(K){var L,H=K[0].contentRect,X=H.width,Y=H.height;O(X,Y),(L=E.current)===null||L===void 0||L.call(E,X,Y)};b>0&&(z=p8(z,b,{trailing:!0,leading:!1}));var W=new ResizeObserver(z),U=k.current.getBoundingClientRect(),R=U.width,F=U.height;return O(R,F),W.observe(k.current),function(){W.disconnect()}},[O,b]);var P=q.useMemo(function(){var z=_.containerWidth,W=_.containerHeight;if(z<0||W<0)return null;Qa(mc(a)||mc(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,l),Qa(!n||n>0,"The aspect(%s) must be greater than zero.",n);var U=mc(a)?z:a,R=mc(l)?W:l;n&&n>0&&(U?R=U/n:R&&(U=R*n),p&&R>p&&(R=p)),Qa(U>0||R>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,U,R,a,l,f,h,n);var F=!Array.isArray(g)&&Za(g.type).endsWith("Chart");return J.Children.map(g,function(B){return J.isValidElement(B)?q.cloneElement(B,Iv({width:U,height:R},F?{style:Iv({height:"100%",width:"100%",maxHeight:R,maxWidth:U},B.props.style)}:{})):B})},[n,g,l,p,h,f,_,a]);return J.createElement("div",{id:v?"".concat(v):void 0,className:St("recharts-responsive-container",w),style:Iv(Iv({},A),{},{width:a,height:l,minWidth:f,minHeight:h,maxHeight:p}),ref:k},P)}),m8=function(e){return null};m8.displayName="Cell";function zp(t){"@babel/helpers - typeof";return zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zp(t)}function Mj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function p$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Mj(Object(n),!0).forEach(function(r){upe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function upe(t,e,n){return e=fpe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fpe(t){var e=hpe(t,"string");return zp(e)=="symbol"?e:e+""}function hpe(t,e){if(zp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Zu={widthCache:{},cacheCount:0},dpe=2e3,ppe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Pj="recharts_measurement_span";function mpe(t){var e=p$({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var bp=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||gh.isSsr)return{width:0,height:0};var r=mpe(n),i=JSON.stringify({text:e,copyStyle:r});if(Zu.widthCache[i])return Zu.widthCache[i];try{var s=document.getElementById(Pj);s||(s=document.createElement("span"),s.setAttribute("id",Pj),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var a=p$(p$({},ppe),r);Object.assign(s.style,a),s.textContent="".concat(e);var o=s.getBoundingClientRect(),l={width:o.width,height:o.height};return Zu.widthCache[i]=l,++Zu.cacheCount>dpe&&(Zu.cacheCount=0,Zu.widthCache={}),l}catch{return{width:0,height:0}}},gpe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function jp(t){"@babel/helpers - typeof";return jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jp(t)}function B0(t,e){return xpe(t)||bpe(t,e)||vpe(t,e)||ype()}function ype(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vpe(t,e){if(t){if(typeof t=="string")return Lj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lj(t,e)}}function Lj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bpe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function xpe(t){if(Array.isArray(t))return t}function wpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Cpe(r.key),r)}}function Spe(t,e,n){return e&&Fj(t.prototype,e),n&&Fj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cpe(t){var e=Tpe(t,"string");return jp(e)=="symbol"?e:e+""}function Tpe(t,e){if(jp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Bj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,zj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,kpe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Ape=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,g8={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Epe=Object.keys(g8),hf="NaN";function $pe(t,e){return t*g8[e]}var Nv=function(){function t(e,n){wpe(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!kpe.test(n)&&(this.num=NaN,this.unit=""),Epe.includes(n)&&(this.num=$pe(e,n),this.unit="px")}return Spe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=Ape.exec(n))!==null&&r!==void 0?r:[],s=B0(i,3),a=s[1],o=s[2];return new t(parseFloat(a),o??"")}}])}();function y8(t){if(t.includes(hf))return hf;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=Bj.exec(e))!==null&&n!==void 0?n:[],i=B0(r,4),s=i[1],a=i[2],o=i[3],l=Nv.parse(s??""),c=Nv.parse(o??""),f=a==="*"?l.multiply(c):l.divide(c);if(f.isNaN())return hf;e=e.replace(Bj,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,p=(h=zj.exec(e))!==null&&h!==void 0?h:[],g=B0(p,4),y=g[1],b=g[2],v=g[3],w=Nv.parse(y??""),S=Nv.parse(v??""),T=b==="+"?w.add(S):w.subtract(S);if(T.isNaN())return hf;e=e.replace(zj,T.toString())}return e}var jj=/\(([^()]*)\)/;function Ipe(t){for(var e=t;e.includes("(");){var n=jj.exec(e),r=B0(n,2),i=r[1];e=e.replace(jj,y8(i))}return e}function Npe(t){var e=t.replace(/\s+/g,"");return e=Ipe(e),e=y8(e),e}function Ope(t){try{return Npe(t)}catch{return hf}}function rA(t){var e=Ope(t.slice(5,-1));return e===hf?"":e}var _pe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Rpe=["dx","dy","angle","className","breakAll"];function m$(){return m$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m$.apply(this,arguments)}function Vj(t,e){if(t==null)return{};var n=Dpe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Dpe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Uj(t,e){return Fpe(t)||Lpe(t,e)||Ppe(t,e)||Mpe()}function Mpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ppe(t,e){if(t){if(typeof t=="string")return Wj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wj(t,e)}}function Wj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Lpe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function Fpe(t){if(Array.isArray(t))return t}var v8=/[ \f\n\r\t\v\u2028\u2029]+/,b8=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var s=[];yt(n)||(r?s=n.toString().split(""):s=n.toString().split(v8));var a=s.map(function(l){return{word:l,width:bp(l,i).width}}),o=r?0:bp(" ",i).width;return{wordsWithComputedWidth:a,spaceWidth:o}}catch{return null}},Bpe=function(e,n,r,i,s){var a=e.maxLines,o=e.children,l=e.style,c=e.breakAll,f=Ne(a),h=o,p=function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return U.reduce(function(R,F){var B=F.word,K=F.width,L=R[R.length-1];if(L&&(i==null||s||L.width+K+r<Number(i)))L.words.push(B),L.width+=K+r;else{var H={words:[B],width:K};R.push(H)}return R},[])},g=p(n),y=function(U){return U.reduce(function(R,F){return R.width>F.width?R:F})};if(!f)return g;for(var b="…",v=function(U){var R=h.slice(0,U),F=b8({breakAll:c,style:l,children:R+b}).wordsWithComputedWidth,B=p(F),K=B.length>a||y(B).width>Number(i);return[K,B]},w=0,S=h.length-1,T=0,A;w<=S&&T<=h.length-1;){var k=Math.floor((w+S)/2),E=k-1,I=v(E),N=Uj(I,2),_=N[0],D=N[1],O=v(k),P=Uj(O,1),z=P[0];if(!_&&!z&&(w=k+1),_&&z&&(S=k-1),!_&&z){A=D;break}T++}return A||g},Gj=function(e){var n=yt(e)?[]:e.toString().split(v8);return[{words:n}]},zpe=function(e){var n=e.width,r=e.scaleToFit,i=e.children,s=e.style,a=e.breakAll,o=e.maxLines;if((n||r)&&!gh.isSsr){var l,c,f=b8({breakAll:a,children:i,style:s});if(f){var h=f.wordsWithComputedWidth,p=f.spaceWidth;l=h,c=p}else return Gj(i);return Bpe({breakAll:a,children:i,maxLines:o,style:s},l,c,n,r)}return Gj(i)},qj="#808080",z0=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,s=i===void 0?0:i,a=e.lineHeight,o=a===void 0?"1em":a,l=e.capHeight,c=l===void 0?"0.71em":l,f=e.scaleToFit,h=f===void 0?!1:f,p=e.textAnchor,g=p===void 0?"start":p,y=e.verticalAnchor,b=y===void 0?"end":y,v=e.fill,w=v===void 0?qj:v,S=Vj(e,_pe),T=q.useMemo(function(){return zpe({breakAll:S.breakAll,children:S.children,maxLines:S.maxLines,scaleToFit:h,style:S.style,width:S.width})},[S.breakAll,S.children,S.maxLines,h,S.style,S.width]),A=S.dx,k=S.dy,E=S.angle,I=S.className,N=S.breakAll,_=Vj(S,Rpe);if(!Zn(r)||!Zn(s))return null;var D=r+(Ne(A)?A:0),O=s+(Ne(k)?k:0),P;switch(b){case"start":P=rA("calc(".concat(c,")"));break;case"middle":P=rA("calc(".concat((T.length-1)/2," * -").concat(o," + (").concat(c," / 2))"));break;default:P=rA("calc(".concat(T.length-1," * -").concat(o,")"));break}var z=[];if(h){var W=T[0].width,U=S.width;z.push("scale(".concat((Ne(U)?U/W:1)/W,")"))}return E&&z.push("rotate(".concat(E,", ").concat(D,", ").concat(O,")")),z.length&&(_.transform=z.join(" ")),J.createElement("text",m$({},mt(_,!0),{x:D,y:O,className:St("recharts-text",I),textAnchor:g,fill:w.includes("url")?qj:w}),T.map(function(R,F){var B=R.words.join(N?"":" ");return J.createElement("tspan",{x:D,dy:F===0?P:o,key:"".concat(B,"-").concat(F)},B)}))};function rl(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function jpe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function sO(t){let e,n,r;t.length!==2?(e=rl,n=(o,l)=>rl(t(o),l),r=(o,l)=>t(o)-l):(e=t===rl||t===jpe?t:Vpe,n=t,r=t);function i(o,l,c=0,f=o.length){if(c<f){if(e(l,l)!==0)return f;do{const h=c+f>>>1;n(o[h],l)<0?c=h+1:f=h}while(c<f)}return c}function s(o,l,c=0,f=o.length){if(c<f){if(e(l,l)!==0)return f;do{const h=c+f>>>1;n(o[h],l)<=0?c=h+1:f=h}while(c<f)}return c}function a(o,l,c=0,f=o.length){const h=i(o,l,c,f-1);return h>c&&r(o[h-1],l)>-r(o[h],l)?h-1:h}return{left:i,center:a,right:s}}function Vpe(){return 0}function x8(t){return t===null?NaN:+t}function*Upe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Wpe=sO(rl),Fm=Wpe.right;sO(x8).center;class Hj extends Map{constructor(e,n=Hpe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Kj(this,e))}has(e){return super.has(Kj(this,e))}set(e,n){return super.set(Gpe(this,e),n)}delete(e){return super.delete(qpe(this,e))}}function Kj({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Gpe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function qpe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Hpe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Kpe(t=rl){if(t===rl)return w8;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function w8(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Xpe=Math.sqrt(50),Ype=Math.sqrt(10),Zpe=Math.sqrt(2);function j0(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=Xpe?10:s>=Ype?5:s>=Zpe?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/a,o=Math.round(t*c),l=Math.round(e*c),o/c<t&&++o,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*a,o=Math.round(t/c),l=Math.round(e/c),o*c<t&&++o,l*c>e&&--l),l<o&&.5<=n&&n<2?j0(t,e,n*2):[o,l,c]}function g$(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,a]=r?j0(e,t,n):j0(t,e,n);if(!(s>=i))return[];const o=s-i+1,l=new Array(o);if(r)if(a<0)for(let c=0;c<o;++c)l[c]=(s-c)/-a;else for(let c=0;c<o;++c)l[c]=(s-c)*a;else if(a<0)for(let c=0;c<o;++c)l[c]=(i+c)/-a;else for(let c=0;c<o;++c)l[c]=(i+c)*a;return l}function y$(t,e,n){return e=+e,t=+t,n=+n,j0(t,e,n)[2]}function v$(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?y$(e,t,n):y$(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Xj(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function Yj(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function S8(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?w8:Kpe(i);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,f=Math.log(l),h=.5*Math.exp(2*f/3),p=.5*Math.sqrt(f*h*(l-h)/l)*(c-l/2<0?-1:1),g=Math.max(n,Math.floor(e-c*h/l+p)),y=Math.min(r,Math.floor(e+(l-c)*h/l+p));S8(t,e,g,y,i)}const s=t[e];let a=n,o=r;for(Wd(t,n,e),i(t[r],s)>0&&Wd(t,n,r);a<o;){for(Wd(t,a,o),++a,--o;i(t[a],s)<0;)++a;for(;i(t[o],s)>0;)--o}i(t[n],s)===0?Wd(t,n,o):(++o,Wd(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function Wd(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Qpe(t,e,n){if(t=Float64Array.from(Upe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Yj(t);if(e>=1)return Xj(t);var r,i=(r-1)*e,s=Math.floor(i),a=Xj(S8(t,s).subarray(0,s+1)),o=Yj(t.subarray(s+1));return a+(o-a)*(i-s)}}function Jpe(t,e,n=x8){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),a=+n(t[s],s,t),o=+n(t[s+1],s+1,t);return a+(o-a)*(i-s)}}function eme(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function cs(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function go(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const b$=Symbol("implicit");function aO(){var t=new Hj,e=[],n=[],r=b$;function i(s){let a=t.get(s);if(a===void 0){if(r!==b$)return r;t.set(s,a=e.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new Hj;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return aO(e,n).unknown(r)},cs.apply(i,arguments),i}function Vp(){var t=aO().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,a,o=!1,l=0,c=0,f=.5;delete t.unknown;function h(){var p=e().length,g=i<r,y=g?i:r,b=g?r:i;s=(b-y)/Math.max(1,p-l+c*2),o&&(s=Math.floor(s)),y+=(b-y-s*(p-l))*f,a=s*(1-l),o&&(y=Math.round(y),a=Math.round(a));var v=eme(p).map(function(w){return y+s*w});return n(g?v.reverse():v)}return t.domain=function(p){return arguments.length?(e(p),h()):e()},t.range=function(p){return arguments.length?([r,i]=p,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(p){return[r,i]=p,r=+r,i=+i,o=!0,h()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(p){return arguments.length?(o=!!p,h()):o},t.padding=function(p){return arguments.length?(l=Math.min(1,c=+p),h()):l},t.paddingInner=function(p){return arguments.length?(l=Math.min(1,p),h()):l},t.paddingOuter=function(p){return arguments.length?(c=+p,h()):c},t.align=function(p){return arguments.length?(f=Math.max(0,Math.min(1,p)),h()):f},t.copy=function(){return Vp(e(),[r,i]).round(o).paddingInner(l).paddingOuter(c).align(f)},cs.apply(h(),arguments)}function C8(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return C8(e())},t}function xp(){return C8(Vp.apply(null,arguments).paddingInner(1))}function oO(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function T8(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Bm(){}var Up=.7,V0=1/Up,vf="\\s*([+-]?\\d+)\\s*",Wp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ta="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tme=/^#([0-9a-f]{3,8})$/,nme=new RegExp(`^rgb\\(${vf},${vf},${vf}\\)$`),rme=new RegExp(`^rgb\\(${ta},${ta},${ta}\\)$`),ime=new RegExp(`^rgba\\(${vf},${vf},${vf},${Wp}\\)$`),sme=new RegExp(`^rgba\\(${ta},${ta},${ta},${Wp}\\)$`),ame=new RegExp(`^hsl\\(${Wp},${ta},${ta}\\)$`),ome=new RegExp(`^hsla\\(${Wp},${ta},${ta},${Wp}\\)$`),Zj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};oO(Bm,Gp,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Qj,formatHex:Qj,formatHex8:lme,formatHsl:cme,formatRgb:Jj,toString:Jj});function Qj(){return this.rgb().formatHex()}function lme(){return this.rgb().formatHex8()}function cme(){return k8(this).formatHsl()}function Jj(){return this.rgb().formatRgb()}function Gp(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=tme.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?eV(e):n===3?new ui(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ov(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ov(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=nme.exec(t))?new ui(e[1],e[2],e[3],1):(e=rme.exec(t))?new ui(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ime.exec(t))?Ov(e[1],e[2],e[3],e[4]):(e=sme.exec(t))?Ov(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ame.exec(t))?rV(e[1],e[2]/100,e[3]/100,1):(e=ome.exec(t))?rV(e[1],e[2]/100,e[3]/100,e[4]):Zj.hasOwnProperty(t)?eV(Zj[t]):t==="transparent"?new ui(NaN,NaN,NaN,0):null}function eV(t){return new ui(t>>16&255,t>>8&255,t&255,1)}function Ov(t,e,n,r){return r<=0&&(t=e=n=NaN),new ui(t,e,n,r)}function ume(t){return t instanceof Bm||(t=Gp(t)),t?(t=t.rgb(),new ui(t.r,t.g,t.b,t.opacity)):new ui}function x$(t,e,n,r){return arguments.length===1?ume(t):new ui(t,e,n,r??1)}function ui(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}oO(ui,x$,T8(Bm,{brighter(t){return t=t==null?V0:Math.pow(V0,t),new ui(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Up:Math.pow(Up,t),new ui(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ui(Tc(this.r),Tc(this.g),Tc(this.b),U0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tV,formatHex:tV,formatHex8:fme,formatRgb:nV,toString:nV}));function tV(){return`#${gc(this.r)}${gc(this.g)}${gc(this.b)}`}function fme(){return`#${gc(this.r)}${gc(this.g)}${gc(this.b)}${gc((isNaN(this.opacity)?1:this.opacity)*255)}`}function nV(){const t=U0(this.opacity);return`${t===1?"rgb(":"rgba("}${Tc(this.r)}, ${Tc(this.g)}, ${Tc(this.b)}${t===1?")":`, ${t})`}`}function U0(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Tc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function gc(t){return t=Tc(t),(t<16?"0":"")+t.toString(16)}function rV(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ts(t,e,n,r)}function k8(t){if(t instanceof Ts)return new Ts(t.h,t.s,t.l,t.opacity);if(t instanceof Bm||(t=Gp(t)),!t)return new Ts;if(t instanceof Ts)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(e===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-e)/o+2:a=(e-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new Ts(a,o,l,t.opacity)}function hme(t,e,n,r){return arguments.length===1?k8(t):new Ts(t,e,n,r??1)}function Ts(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}oO(Ts,hme,T8(Bm,{brighter(t){return t=t==null?V0:Math.pow(V0,t),new Ts(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Up:Math.pow(Up,t),new Ts(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ui(iA(t>=240?t-240:t+120,i,r),iA(t,i,r),iA(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ts(iV(this.h),_v(this.s),_v(this.l),U0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=U0(this.opacity);return`${t===1?"hsl(":"hsla("}${iV(this.h)}, ${_v(this.s)*100}%, ${_v(this.l)*100}%${t===1?")":`, ${t})`}`}}));function iV(t){return t=(t||0)%360,t<0?t+360:t}function _v(t){return Math.max(0,Math.min(1,t||0))}function iA(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const lO=t=>()=>t;function dme(t,e){return function(n){return t+n*e}}function pme(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function mme(t){return(t=+t)==1?A8:function(e,n){return n-e?pme(e,n,t):lO(isNaN(e)?n:e)}}function A8(t,e){var n=e-t;return n?dme(t,n):lO(isNaN(t)?e:t)}const sV=function t(e){var n=mme(e);function r(i,s){var a=n((i=x$(i)).r,(s=x$(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),c=A8(i.opacity,s.opacity);return function(f){return i.r=a(f),i.g=o(f),i.b=l(f),i.opacity=c(f),i+""}}return r.gamma=t,r}(1);function gme(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function yme(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function vme(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=yh(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function bme(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function W0(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function xme(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=yh(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var w$=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sA=new RegExp(w$.source,"g");function wme(t){return function(){return t}}function Sme(t){return function(e){return t(e)+""}}function Cme(t,e){var n=w$.lastIndex=sA.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(t=t+"",e=e+"";(r=w$.exec(t))&&(i=sA.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:W0(r,i)})),n=sA.lastIndex;return n<e.length&&(s=e.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?Sme(l[0].x):wme(e):(e=l.length,function(c){for(var f=0,h;f<e;++f)o[(h=l[f]).i]=h.x(c);return o.join("")})}function yh(t,e){var n=typeof e,r;return e==null||n==="boolean"?lO(e):(n==="number"?W0:n==="string"?(r=Gp(e))?(e=r,sV):Cme:e instanceof Gp?sV:e instanceof Date?bme:yme(e)?gme:Array.isArray(e)?vme:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?xme:W0)(t,e)}function cO(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Tme(t,e){e===void 0&&(e=t,t=yh);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(a){var o=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return s[o](a-o)}}function kme(t){return function(){return t}}function G0(t){return+t}var aV=[0,1];function Kr(t){return t}function S$(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:kme(isNaN(e)?NaN:.5)}function Ame(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Eme(t,e,n){var r=t[0],i=t[1],s=e[0],a=e[1];return i<r?(r=S$(i,r),s=n(a,s)):(r=S$(r,i),s=n(s,a)),function(o){return s(r(o))}}function $me(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=S$(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(o){var l=Fm(t,o,1,r)-1;return s[l](i[l](o))}}function zm(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function yx(){var t=aV,e=aV,n=yh,r,i,s,a=Kr,o,l,c;function f(){var p=Math.min(t.length,e.length);return a!==Kr&&(a=Ame(t[0],t[p-1])),o=p>2?$me:Eme,l=c=null,h}function h(p){return p==null||isNaN(p=+p)?s:(l||(l=o(t.map(r),e,n)))(r(a(p)))}return h.invert=function(p){return a(i((c||(c=o(e,t.map(r),W0)))(p)))},h.domain=function(p){return arguments.length?(t=Array.from(p,G0),f()):t.slice()},h.range=function(p){return arguments.length?(e=Array.from(p),f()):e.slice()},h.rangeRound=function(p){return e=Array.from(p),n=cO,f()},h.clamp=function(p){return arguments.length?(a=p?!0:Kr,f()):a!==Kr},h.interpolate=function(p){return arguments.length?(n=p,f()):n},h.unknown=function(p){return arguments.length?(s=p,h):s},function(p,g){return r=p,i=g,f()}}function uO(){return yx()(Kr,Kr)}function Ime(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function q0(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function _f(t){return t=q0(Math.abs(t)),t?t[1]:NaN}function Nme(t,e){return function(n,r){for(var i=n.length,s=[],a=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[a=(a+1)%t.length];return s.reverse().join(e)}}function Ome(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var _me=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function qp(t){if(!(e=_me.exec(t)))throw new Error("invalid format: "+t);var e;return new fO({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}qp.prototype=fO.prototype;function fO(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}fO.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Rme(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var E8;function Dme(t,e){var n=q0(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(E8=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+q0(t,Math.max(0,e+s-1))[0]}function oV(t,e){var n=q0(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const lV={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Ime,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>oV(t*100,e),r:oV,s:Dme,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function cV(t){return t}var uV=Array.prototype.map,fV=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Mme(t){var e=t.grouping===void 0||t.thousands===void 0?cV:Nme(uV.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?cV:Ome(uV.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(h){h=qp(h);var p=h.fill,g=h.align,y=h.sign,b=h.symbol,v=h.zero,w=h.width,S=h.comma,T=h.precision,A=h.trim,k=h.type;k==="n"?(S=!0,k="g"):lV[k]||(T===void 0&&(T=12),A=!0,k="g"),(v||p==="0"&&g==="=")&&(v=!0,p="0",g="=");var E=b==="$"?n:b==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",I=b==="$"?r:/[%p]/.test(k)?a:"",N=lV[k],_=/[defgprs%]/.test(k);T=T===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function D(O){var P=E,z=I,W,U,R;if(k==="c")z=N(O)+z,O="";else{O=+O;var F=O<0||1/O<0;if(O=isNaN(O)?l:N(Math.abs(O),T),A&&(O=Rme(O)),F&&+O==0&&y!=="+"&&(F=!1),P=(F?y==="("?y:o:y==="-"||y==="("?"":y)+P,z=(k==="s"?fV[8+E8/3]:"")+z+(F&&y==="("?")":""),_){for(W=-1,U=O.length;++W<U;)if(R=O.charCodeAt(W),48>R||R>57){z=(R===46?i+O.slice(W+1):O.slice(W))+z,O=O.slice(0,W);break}}}S&&!v&&(O=e(O,1/0));var B=P.length+O.length+z.length,K=B<w?new Array(w-B+1).join(p):"";switch(S&&v&&(O=e(K+O,K.length?w-z.length:1/0),K=""),g){case"<":O=P+O+z+K;break;case"=":O=P+K+O+z;break;case"^":O=K.slice(0,B=K.length>>1)+P+O+z+K.slice(B);break;default:O=K+P+O+z;break}return s(O)}return D.toString=function(){return h+""},D}function f(h,p){var g=c((h=qp(h),h.type="f",h)),y=Math.max(-8,Math.min(8,Math.floor(_f(p)/3)))*3,b=Math.pow(10,-y),v=fV[8+y/3];return function(w){return g(b*w)+v}}return{format:c,formatPrefix:f}}var Rv,hO,$8;Pme({thousands:",",grouping:[3],currency:["$",""]});function Pme(t){return Rv=Mme(t),hO=Rv.format,$8=Rv.formatPrefix,Rv}function Lme(t){return Math.max(0,-_f(Math.abs(t)))}function Fme(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(_f(e)/3)))*3-_f(Math.abs(t)))}function Bme(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,_f(e)-_f(t))+1}function I8(t,e,n,r){var i=v$(t,e,n),s;switch(r=qp(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=Fme(i,a))&&(r.precision=s),$8(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Bme(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Lme(i))&&(r.precision=s-(r.type==="%")*2);break}}return hO(r)}function wl(t){var e=t.domain;return t.ticks=function(n){var r=e();return g$(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return I8(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,a=r[i],o=r[s],l,c,f=10;for(o<a&&(c=a,a=o,o=c,c=i,i=s,s=c);f-- >0;){if(c=y$(a,o,n),c===l)return r[i]=a,r[s]=o,e(r);if(c>0)a=Math.floor(a/c)*c,o=Math.ceil(o/c)*c;else if(c<0)a=Math.ceil(a*c)/c,o=Math.floor(o*c)/c;else break;l=c}return t},t}function H0(){var t=uO();return t.copy=function(){return zm(t,H0())},cs.apply(t,arguments),wl(t)}function N8(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,G0),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return N8(t).unknown(e)},t=arguments.length?Array.from(t,G0):[0,1],wl(n)}function O8(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),t[n]=e.floor(i),t[r]=e.ceil(s),t}function hV(t){return Math.log(t)}function dV(t){return Math.exp(t)}function zme(t){return-Math.log(-t)}function jme(t){return-Math.exp(-t)}function Vme(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Ume(t){return t===10?Vme:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Wme(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function pV(t){return(e,n)=>-t(-e,n)}function dO(t){const e=t(hV,dV),n=e.domain;let r=10,i,s;function a(){return i=Wme(r),s=Ume(r),n()[0]<0?(i=pV(i),s=pV(s),t(zme,jme)):t(hV,dV),e}return e.base=function(o){return arguments.length?(r=+o,a()):r},e.domain=function(o){return arguments.length?(n(o),a()):n()},e.ticks=o=>{const l=n();let c=l[0],f=l[l.length-1];const h=f<c;h&&([c,f]=[f,c]);let p=i(c),g=i(f),y,b;const v=o==null?10:+o;let w=[];if(!(r%1)&&g-p<v){if(p=Math.floor(p),g=Math.ceil(g),c>0){for(;p<=g;++p)for(y=1;y<r;++y)if(b=p<0?y/s(-p):y*s(p),!(b<c)){if(b>f)break;w.push(b)}}else for(;p<=g;++p)for(y=r-1;y>=1;--y)if(b=p>0?y/s(-p):y*s(p),!(b<c)){if(b>f)break;w.push(b)}w.length*2<v&&(w=g$(c,f,v))}else w=g$(p,g,Math.min(g-p,v)).map(s);return h?w.reverse():w},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=qp(l)).precision==null&&(l.trim=!0),l=hO(l)),o===1/0)return l;const c=Math.max(1,r*o/e.ticks().length);return f=>{let h=f/s(Math.round(i(f)));return h*r<r-.5&&(h*=r),h<=c?l(f):""}},e.nice=()=>n(O8(n(),{floor:o=>s(Math.floor(i(o))),ceil:o=>s(Math.ceil(i(o)))})),e}function _8(){const t=dO(yx()).domain([1,10]);return t.copy=()=>zm(t,_8()).base(t.base()),cs.apply(t,arguments),t}function mV(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function gV(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function pO(t){var e=1,n=t(mV(e),gV(e));return n.constant=function(r){return arguments.length?t(mV(e=+r),gV(e)):e},wl(n)}function R8(){var t=pO(yx());return t.copy=function(){return zm(t,R8()).constant(t.constant())},cs.apply(t,arguments)}function yV(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Gme(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function qme(t){return t<0?-t*t:t*t}function mO(t){var e=t(Kr,Kr),n=1;function r(){return n===1?t(Kr,Kr):n===.5?t(Gme,qme):t(yV(n),yV(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},wl(e)}function gO(){var t=mO(yx());return t.copy=function(){return zm(t,gO()).exponent(t.exponent())},cs.apply(t,arguments),t}function Hme(){return gO.apply(null,arguments).exponent(.5)}function vV(t){return Math.sign(t)*t*t}function Kme(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function D8(){var t=uO(),e=[0,1],n=!1,r;function i(s){var a=Kme(t(s));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(s){return t.invert(vV(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,G0)).map(vV)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return D8(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},cs.apply(i,arguments),wl(i)}function M8(){var t=[],e=[],n=[],r;function i(){var a=0,o=Math.max(1,e.length);for(n=new Array(o-1);++a<o;)n[a-1]=Jpe(t,a/o);return s}function s(a){return a==null||isNaN(a=+a)?r:e[Fm(n,a)]}return s.invertExtent=function(a){var o=e.indexOf(a);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let o of a)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(rl),i()},s.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return M8().domain(t).range(e).unknown(r)},cs.apply(s,arguments)}function P8(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function a(l){return l!=null&&l<=l?i[Fm(r,l,0,n)]:s}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return a}return a.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},a.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,o()):i.slice()},a.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},a.unknown=function(l){return arguments.length&&(s=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return P8().domain([t,e]).range(i).unknown(s)},cs.apply(wl(a),arguments)}function L8(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[Fm(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var a=e.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return L8().domain(t).range(e).unknown(n)},cs.apply(i,arguments)}const aA=new Date,oA=new Date;function Jn(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const l=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return l;let c;do l.push(c=new Date(+s)),e(s,o),t(s);while(c<s&&s<a);return l},i.filter=s=>Jn(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!s(a););else for(;--o>=0;)for(;e(a,1),!s(a););}),n&&(i.count=(s,a)=>(aA.setTime(+s),oA.setTime(+a),t(aA),t(oA),Math.floor(n(aA,oA))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?a=>r(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const K0=Jn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);K0.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Jn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):K0);K0.range;const qa=1e3,ts=qa*60,Ha=ts*60,ro=Ha*24,yO=ro*7,bV=ro*30,lA=ro*365,yc=Jn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*qa)},(t,e)=>(e-t)/qa,t=>t.getUTCSeconds());yc.range;const vO=Jn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*qa)},(t,e)=>{t.setTime(+t+e*ts)},(t,e)=>(e-t)/ts,t=>t.getMinutes());vO.range;const bO=Jn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ts)},(t,e)=>(e-t)/ts,t=>t.getUTCMinutes());bO.range;const xO=Jn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*qa-t.getMinutes()*ts)},(t,e)=>{t.setTime(+t+e*Ha)},(t,e)=>(e-t)/Ha,t=>t.getHours());xO.range;const wO=Jn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Ha)},(t,e)=>(e-t)/Ha,t=>t.getUTCHours());wO.range;const jm=Jn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ts)/ro,t=>t.getDate()-1);jm.range;const vx=Jn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ro,t=>t.getUTCDate()-1);vx.range;const F8=Jn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ro,t=>Math.floor(t/ro));F8.range;function Xc(t){return Jn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ts)/yO)}const bx=Xc(0),X0=Xc(1),Xme=Xc(2),Yme=Xc(3),Rf=Xc(4),Zme=Xc(5),Qme=Xc(6);bx.range;X0.range;Xme.range;Yme.range;Rf.range;Zme.range;Qme.range;function Yc(t){return Jn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/yO)}const xx=Yc(0),Y0=Yc(1),Jme=Yc(2),ege=Yc(3),Df=Yc(4),tge=Yc(5),nge=Yc(6);xx.range;Y0.range;Jme.range;ege.range;Df.range;tge.range;nge.range;const SO=Jn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());SO.range;const CO=Jn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());CO.range;const io=Jn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());io.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Jn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});io.range;const so=Jn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());so.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Jn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});so.range;function B8(t,e,n,r,i,s){const a=[[yc,1,qa],[yc,5,5*qa],[yc,15,15*qa],[yc,30,30*qa],[s,1,ts],[s,5,5*ts],[s,15,15*ts],[s,30,30*ts],[i,1,Ha],[i,3,3*Ha],[i,6,6*Ha],[i,12,12*Ha],[r,1,ro],[r,2,2*ro],[n,1,yO],[e,1,bV],[e,3,3*bV],[t,1,lA]];function o(c,f,h){const p=f<c;p&&([c,f]=[f,c]);const g=h&&typeof h.range=="function"?h:l(c,f,h),y=g?g.range(c,+f+1):[];return p?y.reverse():y}function l(c,f,h){const p=Math.abs(f-c)/h,g=sO(([,,v])=>v).right(a,p);if(g===a.length)return t.every(v$(c/lA,f/lA,h));if(g===0)return K0.every(Math.max(v$(c,f,h),1));const[y,b]=a[p/a[g-1][2]<a[g][2]/p?g-1:g];return y.every(b)}return[o,l]}const[rge,ige]=B8(so,CO,xx,F8,wO,bO),[sge,age]=B8(io,SO,bx,jm,xO,vO);function cA(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function uA(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Gd(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function oge(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,a=t.shortDays,o=t.months,l=t.shortMonths,c=qd(i),f=Hd(i),h=qd(s),p=Hd(s),g=qd(a),y=Hd(a),b=qd(o),v=Hd(o),w=qd(l),S=Hd(l),T={a:F,A:B,b:K,B:L,c:null,d:kV,e:kV,f:Nge,g:zge,G:Vge,H:Ege,I:$ge,j:Ige,L:z8,m:Oge,M:_ge,p:H,q:X,Q:$V,s:IV,S:Rge,u:Dge,U:Mge,V:Pge,w:Lge,W:Fge,x:null,X:null,y:Bge,Y:jge,Z:Uge,"%":EV},A={a:Y,A:ie,b:pe,B:ve,c:null,d:AV,e:AV,f:Hge,g:rye,G:sye,H:Wge,I:Gge,j:qge,L:V8,m:Kge,M:Xge,p:ke,q:Ee,Q:$V,s:IV,S:Yge,u:Zge,U:Qge,V:Jge,w:eye,W:tye,x:null,X:null,y:nye,Y:iye,Z:aye,"%":EV},k={a:D,A:O,b:P,B:z,c:W,d:CV,e:CV,f:Cge,g:SV,G:wV,H:TV,I:TV,j:bge,L:Sge,m:vge,M:xge,p:_,q:yge,Q:kge,s:Age,S:wge,u:hge,U:dge,V:pge,w:fge,W:mge,x:U,X:R,y:SV,Y:wV,Z:gge,"%":Tge};T.x=E(n,T),T.X=E(r,T),T.c=E(e,T),A.x=E(n,A),A.X=E(r,A),A.c=E(e,A);function E(me,$e){return function(Ie){var ye=[],Ge=-1,ze=0,Je=me.length,qe,Xe,gt;for(Ie instanceof Date||(Ie=new Date(+Ie));++Ge<Je;)me.charCodeAt(Ge)===37&&(ye.push(me.slice(ze,Ge)),(Xe=xV[qe=me.charAt(++Ge)])!=null?qe=me.charAt(++Ge):Xe=qe==="e"?" ":"0",(gt=$e[qe])&&(qe=gt(Ie,Xe)),ye.push(qe),ze=Ge+1);return ye.push(me.slice(ze,Ge)),ye.join("")}}function I(me,$e){return function(Ie){var ye=Gd(1900,void 0,1),Ge=N(ye,me,Ie+="",0),ze,Je;if(Ge!=Ie.length)return null;if("Q"in ye)return new Date(ye.Q);if("s"in ye)return new Date(ye.s*1e3+("L"in ye?ye.L:0));if($e&&!("Z"in ye)&&(ye.Z=0),"p"in ye&&(ye.H=ye.H%12+ye.p*12),ye.m===void 0&&(ye.m="q"in ye?ye.q:0),"V"in ye){if(ye.V<1||ye.V>53)return null;"w"in ye||(ye.w=1),"Z"in ye?(ze=uA(Gd(ye.y,0,1)),Je=ze.getUTCDay(),ze=Je>4||Je===0?Y0.ceil(ze):Y0(ze),ze=vx.offset(ze,(ye.V-1)*7),ye.y=ze.getUTCFullYear(),ye.m=ze.getUTCMonth(),ye.d=ze.getUTCDate()+(ye.w+6)%7):(ze=cA(Gd(ye.y,0,1)),Je=ze.getDay(),ze=Je>4||Je===0?X0.ceil(ze):X0(ze),ze=jm.offset(ze,(ye.V-1)*7),ye.y=ze.getFullYear(),ye.m=ze.getMonth(),ye.d=ze.getDate()+(ye.w+6)%7)}else("W"in ye||"U"in ye)&&("w"in ye||(ye.w="u"in ye?ye.u%7:"W"in ye?1:0),Je="Z"in ye?uA(Gd(ye.y,0,1)).getUTCDay():cA(Gd(ye.y,0,1)).getDay(),ye.m=0,ye.d="W"in ye?(ye.w+6)%7+ye.W*7-(Je+5)%7:ye.w+ye.U*7-(Je+6)%7);return"Z"in ye?(ye.H+=ye.Z/100|0,ye.M+=ye.Z%100,uA(ye)):cA(ye)}}function N(me,$e,Ie,ye){for(var Ge=0,ze=$e.length,Je=Ie.length,qe,Xe;Ge<ze;){if(ye>=Je)return-1;if(qe=$e.charCodeAt(Ge++),qe===37){if(qe=$e.charAt(Ge++),Xe=k[qe in xV?$e.charAt(Ge++):qe],!Xe||(ye=Xe(me,Ie,ye))<0)return-1}else if(qe!=Ie.charCodeAt(ye++))return-1}return ye}function _(me,$e,Ie){var ye=c.exec($e.slice(Ie));return ye?(me.p=f.get(ye[0].toLowerCase()),Ie+ye[0].length):-1}function D(me,$e,Ie){var ye=g.exec($e.slice(Ie));return ye?(me.w=y.get(ye[0].toLowerCase()),Ie+ye[0].length):-1}function O(me,$e,Ie){var ye=h.exec($e.slice(Ie));return ye?(me.w=p.get(ye[0].toLowerCase()),Ie+ye[0].length):-1}function P(me,$e,Ie){var ye=w.exec($e.slice(Ie));return ye?(me.m=S.get(ye[0].toLowerCase()),Ie+ye[0].length):-1}function z(me,$e,Ie){var ye=b.exec($e.slice(Ie));return ye?(me.m=v.get(ye[0].toLowerCase()),Ie+ye[0].length):-1}function W(me,$e,Ie){return N(me,e,$e,Ie)}function U(me,$e,Ie){return N(me,n,$e,Ie)}function R(me,$e,Ie){return N(me,r,$e,Ie)}function F(me){return a[me.getDay()]}function B(me){return s[me.getDay()]}function K(me){return l[me.getMonth()]}function L(me){return o[me.getMonth()]}function H(me){return i[+(me.getHours()>=12)]}function X(me){return 1+~~(me.getMonth()/3)}function Y(me){return a[me.getUTCDay()]}function ie(me){return s[me.getUTCDay()]}function pe(me){return l[me.getUTCMonth()]}function ve(me){return o[me.getUTCMonth()]}function ke(me){return i[+(me.getUTCHours()>=12)]}function Ee(me){return 1+~~(me.getUTCMonth()/3)}return{format:function(me){var $e=E(me+="",T);return $e.toString=function(){return me},$e},parse:function(me){var $e=I(me+="",!1);return $e.toString=function(){return me},$e},utcFormat:function(me){var $e=E(me+="",A);return $e.toString=function(){return me},$e},utcParse:function(me){var $e=I(me+="",!0);return $e.toString=function(){return me},$e}}}var xV={"-":"",_:" ",0:"0"},lr=/^\s*\d+/,lge=/^%/,cge=/[\\^$*+?|[\]().{}]/g;function Et(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function uge(t){return t.replace(cge,"\\$&")}function qd(t){return new RegExp("^(?:"+t.map(uge).join("|")+")","i")}function Hd(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function fge(t,e,n){var r=lr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function hge(t,e,n){var r=lr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function dge(t,e,n){var r=lr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function pge(t,e,n){var r=lr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function mge(t,e,n){var r=lr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function wV(t,e,n){var r=lr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function SV(t,e,n){var r=lr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function gge(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function yge(t,e,n){var r=lr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function vge(t,e,n){var r=lr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function CV(t,e,n){var r=lr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function bge(t,e,n){var r=lr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function TV(t,e,n){var r=lr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function xge(t,e,n){var r=lr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function wge(t,e,n){var r=lr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Sge(t,e,n){var r=lr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Cge(t,e,n){var r=lr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Tge(t,e,n){var r=lge.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function kge(t,e,n){var r=lr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Age(t,e,n){var r=lr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function kV(t,e){return Et(t.getDate(),e,2)}function Ege(t,e){return Et(t.getHours(),e,2)}function $ge(t,e){return Et(t.getHours()%12||12,e,2)}function Ige(t,e){return Et(1+jm.count(io(t),t),e,3)}function z8(t,e){return Et(t.getMilliseconds(),e,3)}function Nge(t,e){return z8(t,e)+"000"}function Oge(t,e){return Et(t.getMonth()+1,e,2)}function _ge(t,e){return Et(t.getMinutes(),e,2)}function Rge(t,e){return Et(t.getSeconds(),e,2)}function Dge(t){var e=t.getDay();return e===0?7:e}function Mge(t,e){return Et(bx.count(io(t)-1,t),e,2)}function j8(t){var e=t.getDay();return e>=4||e===0?Rf(t):Rf.ceil(t)}function Pge(t,e){return t=j8(t),Et(Rf.count(io(t),t)+(io(t).getDay()===4),e,2)}function Lge(t){return t.getDay()}function Fge(t,e){return Et(X0.count(io(t)-1,t),e,2)}function Bge(t,e){return Et(t.getFullYear()%100,e,2)}function zge(t,e){return t=j8(t),Et(t.getFullYear()%100,e,2)}function jge(t,e){return Et(t.getFullYear()%1e4,e,4)}function Vge(t,e){var n=t.getDay();return t=n>=4||n===0?Rf(t):Rf.ceil(t),Et(t.getFullYear()%1e4,e,4)}function Uge(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Et(e/60|0,"0",2)+Et(e%60,"0",2)}function AV(t,e){return Et(t.getUTCDate(),e,2)}function Wge(t,e){return Et(t.getUTCHours(),e,2)}function Gge(t,e){return Et(t.getUTCHours()%12||12,e,2)}function qge(t,e){return Et(1+vx.count(so(t),t),e,3)}function V8(t,e){return Et(t.getUTCMilliseconds(),e,3)}function Hge(t,e){return V8(t,e)+"000"}function Kge(t,e){return Et(t.getUTCMonth()+1,e,2)}function Xge(t,e){return Et(t.getUTCMinutes(),e,2)}function Yge(t,e){return Et(t.getUTCSeconds(),e,2)}function Zge(t){var e=t.getUTCDay();return e===0?7:e}function Qge(t,e){return Et(xx.count(so(t)-1,t),e,2)}function U8(t){var e=t.getUTCDay();return e>=4||e===0?Df(t):Df.ceil(t)}function Jge(t,e){return t=U8(t),Et(Df.count(so(t),t)+(so(t).getUTCDay()===4),e,2)}function eye(t){return t.getUTCDay()}function tye(t,e){return Et(Y0.count(so(t)-1,t),e,2)}function nye(t,e){return Et(t.getUTCFullYear()%100,e,2)}function rye(t,e){return t=U8(t),Et(t.getUTCFullYear()%100,e,2)}function iye(t,e){return Et(t.getUTCFullYear()%1e4,e,4)}function sye(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Df(t):Df.ceil(t),Et(t.getUTCFullYear()%1e4,e,4)}function aye(){return"+0000"}function EV(){return"%"}function $V(t){return+t}function IV(t){return Math.floor(+t/1e3)}var Qu,W8,G8;oye({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function oye(t){return Qu=oge(t),W8=Qu.format,Qu.parse,G8=Qu.utcFormat,Qu.utcParse,Qu}function lye(t){return new Date(t)}function cye(t){return t instanceof Date?+t:+new Date(+t)}function TO(t,e,n,r,i,s,a,o,l,c){var f=uO(),h=f.invert,p=f.domain,g=c(".%L"),y=c(":%S"),b=c("%I:%M"),v=c("%I %p"),w=c("%a %d"),S=c("%b %d"),T=c("%B"),A=c("%Y");function k(E){return(l(E)<E?g:o(E)<E?y:a(E)<E?b:s(E)<E?v:r(E)<E?i(E)<E?w:S:n(E)<E?T:A)(E)}return f.invert=function(E){return new Date(h(E))},f.domain=function(E){return arguments.length?p(Array.from(E,cye)):p().map(lye)},f.ticks=function(E){var I=p();return t(I[0],I[I.length-1],E??10)},f.tickFormat=function(E,I){return I==null?k:c(I)},f.nice=function(E){var I=p();return(!E||typeof E.range!="function")&&(E=e(I[0],I[I.length-1],E??10)),E?p(O8(I,E)):f},f.copy=function(){return zm(f,TO(t,e,n,r,i,s,a,o,l,c))},f}function uye(){return cs.apply(TO(sge,age,io,SO,bx,jm,xO,vO,yc,W8).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function fye(){return cs.apply(TO(rge,ige,so,CO,xx,vx,wO,bO,yc,G8).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function wx(){var t=0,e=1,n,r,i,s,a=Kr,o=!1,l;function c(h){return h==null||isNaN(h=+h)?l:a(i===0?.5:(h=(s(h)-n)*i,o?Math.max(0,Math.min(1,h)):h))}c.domain=function(h){return arguments.length?([t,e]=h,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(h){return arguments.length?(o=!!h,c):o},c.interpolator=function(h){return arguments.length?(a=h,c):a};function f(h){return function(p){var g,y;return arguments.length?([g,y]=p,a=h(g,y),c):[a(0),a(1)]}}return c.range=f(yh),c.rangeRound=f(cO),c.unknown=function(h){return arguments.length?(l=h,c):l},function(h){return s=h,n=h(t),r=h(e),i=n===r?0:1/(r-n),c}}function Sl(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function q8(){var t=wl(wx()(Kr));return t.copy=function(){return Sl(t,q8())},go.apply(t,arguments)}function H8(){var t=dO(wx()).domain([1,10]);return t.copy=function(){return Sl(t,H8()).base(t.base())},go.apply(t,arguments)}function K8(){var t=pO(wx());return t.copy=function(){return Sl(t,K8()).constant(t.constant())},go.apply(t,arguments)}function kO(){var t=mO(wx());return t.copy=function(){return Sl(t,kO()).exponent(t.exponent())},go.apply(t,arguments)}function hye(){return kO.apply(null,arguments).exponent(.5)}function X8(){var t=[],e=Kr;function n(r){if(r!=null&&!isNaN(r=+r))return e((Fm(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(rl),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>Qpe(t,s/r))},n.copy=function(){return X8(e).domain(t)},go.apply(n,arguments)}function Sx(){var t=0,e=.5,n=1,r=1,i,s,a,o,l,c=Kr,f,h=!1,p;function g(b){return isNaN(b=+b)?p:(b=.5+((b=+f(b))-s)*(r*b<r*s?o:l),c(h?Math.max(0,Math.min(1,b)):b))}g.domain=function(b){return arguments.length?([t,e,n]=b,i=f(t=+t),s=f(e=+e),a=f(n=+n),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),r=s<i?-1:1,g):[t,e,n]},g.clamp=function(b){return arguments.length?(h=!!b,g):h},g.interpolator=function(b){return arguments.length?(c=b,g):c};function y(b){return function(v){var w,S,T;return arguments.length?([w,S,T]=v,c=Tme(b,[w,S,T]),g):[c(0),c(.5),c(1)]}}return g.range=y(yh),g.rangeRound=y(cO),g.unknown=function(b){return arguments.length?(p=b,g):p},function(b){return f=b,i=b(t),s=b(e),a=b(n),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),r=s<i?-1:1,g}}function Y8(){var t=wl(Sx()(Kr));return t.copy=function(){return Sl(t,Y8())},go.apply(t,arguments)}function Z8(){var t=dO(Sx()).domain([.1,1,10]);return t.copy=function(){return Sl(t,Z8()).base(t.base())},go.apply(t,arguments)}function Q8(){var t=pO(Sx());return t.copy=function(){return Sl(t,Q8()).constant(t.constant())},go.apply(t,arguments)}function AO(){var t=mO(Sx());return t.copy=function(){return Sl(t,AO()).exponent(t.exponent())},go.apply(t,arguments)}function dye(){return AO.apply(null,arguments).exponent(.5)}const NV=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Vp,scaleDiverging:Y8,scaleDivergingLog:Z8,scaleDivergingPow:AO,scaleDivergingSqrt:dye,scaleDivergingSymlog:Q8,scaleIdentity:N8,scaleImplicit:b$,scaleLinear:H0,scaleLog:_8,scaleOrdinal:aO,scalePoint:xp,scalePow:gO,scaleQuantile:M8,scaleQuantize:P8,scaleRadial:D8,scaleSequential:q8,scaleSequentialLog:H8,scaleSequentialPow:kO,scaleSequentialQuantile:X8,scaleSequentialSqrt:hye,scaleSequentialSymlog:K8,scaleSqrt:Hme,scaleSymlog:R8,scaleThreshold:L8,scaleTime:uye,scaleUtc:fye,tickFormat:I8},Symbol.toStringTag,{value:"Module"}));var fA,OV;function J8(){if(OV)return fA;OV=1;var t=hh();function e(n,r,i){for(var s=-1,a=n.length;++s<a;){var o=n[s],l=r(o);if(l!=null&&(c===void 0?l===l&&!t(l):i(l,c)))var c=l,f=o}return f}return fA=e,fA}var hA,_V;function pye(){if(_V)return hA;_V=1;function t(e,n){return e>n}return hA=t,hA}var dA,RV;function mye(){if(RV)return dA;RV=1;var t=J8(),e=pye(),n=mh();function r(i){return i&&i.length?t(i,n,e):void 0}return dA=r,dA}var gye=mye();const Qo=Nt(gye);var pA,DV;function yye(){if(DV)return pA;DV=1;function t(e,n){return e<n}return pA=t,pA}var mA,MV;function vye(){if(MV)return mA;MV=1;var t=J8(),e=yye(),n=mh();function r(i){return i&&i.length?t(i,n,e):void 0}return mA=r,mA}var bye=vye();const Cx=Nt(bye);var gA,PV;function xye(){if(PV)return gA;PV=1;var t=VN(),e=xl(),n=o8(),r=gi();function i(s,a){var o=r(s)?t:n;return o(s,e(a,3))}return gA=i,gA}var yA,LV;function wye(){if(LV)return yA;LV=1;var t=s8(),e=xye();function n(r,i){return t(e(r,i),1)}return yA=n,yA}var Sye=wye();const Cye=Nt(Sye);var vA,FV;function Tye(){if(FV)return vA;FV=1;var t=tO();function e(n,r){return t(n,r)}return vA=e,vA}var kye=Tye();const Hp=Nt(kye);var vh=1e9,Aye={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},$O,sn=!0,as="[DecimalError] ",kc=as+"Invalid argument: ",EO=as+"Exponent out of range: ",bh=Math.floor,lc=Math.pow,Eye=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ii,sr=1e7,Jt=7,e7=9007199254740991,Z0=bh(e7/Jt),De={};De.absoluteValue=De.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};De.comparedTo=De.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};De.decimalPlaces=De.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Jt;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};De.dividedBy=De.div=function(t){return Ja(this,new this.constructor(t))};De.dividedToIntegerBy=De.idiv=function(t){var e=this,n=e.constructor;return Ht(Ja(e,new n(t),0,1),n.precision)};De.equals=De.eq=function(t){return!this.cmp(t)};De.exponent=function(){return Fn(this)};De.greaterThan=De.gt=function(t){return this.cmp(t)>0};De.greaterThanOrEqualTo=De.gte=function(t){return this.cmp(t)>=0};De.isInteger=De.isint=function(){return this.e>this.d.length-2};De.isNegative=De.isneg=function(){return this.s<0};De.isPositive=De.ispos=function(){return this.s>0};De.isZero=function(){return this.s===0};De.lessThan=De.lt=function(t){return this.cmp(t)<0};De.lessThanOrEqualTo=De.lte=function(t){return this.cmp(t)<1};De.logarithm=De.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Ii))throw Error(as+"NaN");if(n.s<1)throw Error(as+(n.s?"NaN":"-Infinity"));return n.eq(Ii)?new r(0):(sn=!1,e=Ja(Kp(n,s),Kp(t,s),s),sn=!0,Ht(e,i))};De.minus=De.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?r7(e,t):t7(e,(t.s=-t.s,t))};De.modulo=De.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(as+"NaN");return n.s?(sn=!1,e=Ja(n,t,0,1).times(t),sn=!0,n.minus(e)):Ht(new r(n),i)};De.naturalExponential=De.exp=function(){return n7(this)};De.naturalLogarithm=De.ln=function(){return Kp(this)};De.negated=De.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};De.plus=De.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?t7(e,t):r7(e,(t.s=-t.s,t))};De.precision=De.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(kc+t);if(e=Fn(i)+1,r=i.d.length-1,n=r*Jt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};De.squareRoot=De.sqrt=function(){var t,e,n,r,i,s,a,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(as+"NaN")}for(t=Fn(o),sn=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=Ks(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=bh((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=a=n+3;;)if(s=r,r=s.plus(Ja(o,s,a+2)).times(.5),Ks(s.d).slice(0,a)===(e=Ks(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(Ht(s,n+1,0),s.times(s).eq(o)){r=s;break}}else if(e!="9999")break;a+=4}return sn=!0,Ht(r,n)};De.times=De.mul=function(t){var e,n,r,i,s,a,o,l,c,f=this,h=f.constructor,p=f.d,g=(t=new h(t)).d;if(!f.s||!t.s)return new h(0);for(t.s*=f.s,n=f.e+t.e,l=p.length,c=g.length,l<c&&(s=p,p=g,g=s,a=l,l=c,c=a),s=[],a=l+c,r=a;r--;)s.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)o=s[i]+g[r]*p[i-r-1]+e,s[i--]=o%sr|0,e=o/sr|0;s[i]=(s[i]+e)%sr|0}for(;!s[--a];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,sn?Ht(t,h.precision):t};De.toDecimalPlaces=De.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(la(t,0,vh),e===void 0?e=r.rounding:la(e,0,8),Ht(n,t+Fn(n)+1,e))};De.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Oc(r,!0):(la(t,0,vh),e===void 0?e=i.rounding:la(e,0,8),r=Ht(new i(r),t+1,e),n=Oc(r,!0,t+1)),n};De.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?Oc(i):(la(t,0,vh),e===void 0?e=s.rounding:la(e,0,8),r=Ht(new s(i),t+Fn(i)+1,e),n=Oc(r.abs(),!1,t+Fn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};De.toInteger=De.toint=function(){var t=this,e=t.constructor;return Ht(new e(t),Fn(t)+1,e.rounding)};De.toNumber=function(){return+this};De.toPower=De.pow=function(t){var e,n,r,i,s,a,o=this,l=o.constructor,c=12,f=+(t=new l(t));if(!t.s)return new l(Ii);if(o=new l(o),!o.s){if(t.s<1)throw Error(as+"Infinity");return o}if(o.eq(Ii))return o;if(r=l.precision,t.eq(Ii))return Ht(o,r);if(e=t.e,n=t.d.length-1,a=e>=n,s=o.s,a){if((n=f<0?-f:f)<=e7){for(i=new l(Ii),e=Math.ceil(r/Jt+4),sn=!1;n%2&&(i=i.times(o),zV(i.d,e)),n=bh(n/2),n!==0;)o=o.times(o),zV(o.d,e);return sn=!0,t.s<0?new l(Ii).div(i):Ht(i,r)}}else if(s<0)throw Error(as+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,sn=!1,i=t.times(Kp(o,r+c)),sn=!0,i=n7(i),i.s=s,i};De.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=Fn(i),r=Oc(i,n<=s.toExpNeg||n>=s.toExpPos)):(la(t,1,vh),e===void 0?e=s.rounding:la(e,0,8),i=Ht(new s(i),t,e),n=Fn(i),r=Oc(i,t<=n||n<=s.toExpNeg,t)),r};De.toSignificantDigits=De.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(la(t,1,vh),e===void 0?e=r.rounding:la(e,0,8)),Ht(new r(n),t,e)};De.toString=De.valueOf=De.val=De.toJSON=De[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Fn(t),n=t.constructor;return Oc(t,e<=n.toExpNeg||e>=n.toExpPos)};function t7(t,e){var n,r,i,s,a,o,l,c,f=t.constructor,h=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),sn?Ht(e,h):e;if(l=t.d,c=e.d,a=t.e,i=e.e,l=l.slice(),s=a-i,s){for(s<0?(r=l,s=-s,o=c.length):(r=c,i=a,o=l.length),a=Math.ceil(h/Jt),o=a>o?a+1:o+1,s>o&&(s=o,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(o=l.length,s=c.length,o-s<0&&(s=o,r=c,c=l,l=r),n=0;s;)n=(l[--s]=l[s]+c[s]+n)/sr|0,l[s]%=sr;for(n&&(l.unshift(n),++i),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=i,sn?Ht(e,h):e}function la(t,e,n){if(t!==~~t||t<e||t>n)throw Error(kc+t)}function Ks(t){var e,n,r,i=t.length-1,s="",a=t[0];if(i>0){for(s+=a,e=1;e<i;e++)r=t[e]+"",n=Jt-r.length,n&&(s+=Ho(n)),s+=r;a=t[e],r=a+"",n=Jt-r.length,n&&(s+=Ho(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var Ja=function(){function t(r,i){var s,a=0,o=r.length;for(r=r.slice();o--;)s=r[o]*i+a,r[o]=s%sr|0,a=s/sr|0;return a&&r.unshift(a),r}function e(r,i,s,a){var o,l;if(s!=a)l=s>a?1:-1;else for(o=l=0;o<s;o++)if(r[o]!=i[o]){l=r[o]>i[o]?1:-1;break}return l}function n(r,i,s){for(var a=0;s--;)r[s]-=a,a=r[s]<i[s]?1:0,r[s]=a*sr+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,a){var o,l,c,f,h,p,g,y,b,v,w,S,T,A,k,E,I,N,_=r.constructor,D=r.s==i.s?1:-1,O=r.d,P=i.d;if(!r.s)return new _(r);if(!i.s)throw Error(as+"Division by zero");for(l=r.e-i.e,I=P.length,k=O.length,g=new _(D),y=g.d=[],c=0;P[c]==(O[c]||0);)++c;if(P[c]>(O[c]||0)&&--l,s==null?S=s=_.precision:a?S=s+(Fn(r)-Fn(i))+1:S=s,S<0)return new _(0);if(S=S/Jt+2|0,c=0,I==1)for(f=0,P=P[0],S++;(c<k||f)&&S--;c++)T=f*sr+(O[c]||0),y[c]=T/P|0,f=T%P|0;else{for(f=sr/(P[0]+1)|0,f>1&&(P=t(P,f),O=t(O,f),I=P.length,k=O.length),A=I,b=O.slice(0,I),v=b.length;v<I;)b[v++]=0;N=P.slice(),N.unshift(0),E=P[0],P[1]>=sr/2&&++E;do f=0,o=e(P,b,I,v),o<0?(w=b[0],I!=v&&(w=w*sr+(b[1]||0)),f=w/E|0,f>1?(f>=sr&&(f=sr-1),h=t(P,f),p=h.length,v=b.length,o=e(h,b,p,v),o==1&&(f--,n(h,I<p?N:P,p))):(f==0&&(o=f=1),h=P.slice()),p=h.length,p<v&&h.unshift(0),n(b,h,v),o==-1&&(v=b.length,o=e(P,b,I,v),o<1&&(f++,n(b,I<v?N:P,v))),v=b.length):o===0&&(f++,b=[0]),y[c++]=f,o&&b[0]?b[v++]=O[A]||0:(b=[O[A]],v=1);while((A++<k||b[0]!==void 0)&&S--)}return y[0]||y.shift(),g.e=l,Ht(g,a?s+Fn(g)+1:s)}}();function n7(t,e){var n,r,i,s,a,o,l=0,c=0,f=t.constructor,h=f.precision;if(Fn(t)>16)throw Error(EO+Fn(t));if(!t.s)return new f(Ii);for(sn=!1,o=h,a=new f(.03125);t.abs().gte(.1);)t=t.times(a),c+=5;for(r=Math.log(lc(2,c))/Math.LN10*2+5|0,o+=r,n=i=s=new f(Ii),f.precision=o;;){if(i=Ht(i.times(t),o),n=n.times(++l),a=s.plus(Ja(i,n,o)),Ks(a.d).slice(0,o)===Ks(s.d).slice(0,o)){for(;c--;)s=Ht(s.times(s),o);return f.precision=h,e==null?(sn=!0,Ht(s,h)):s}s=a}}function Fn(t){for(var e=t.e*Jt,n=t.d[0];n>=10;n/=10)e++;return e}function bA(t,e,n){if(e>t.LN10.sd())throw sn=!0,n&&(t.precision=n),Error(as+"LN10 precision limit exceeded");return Ht(new t(t.LN10),e)}function Ho(t){for(var e="";t--;)e+="0";return e}function Kp(t,e){var n,r,i,s,a,o,l,c,f,h=1,p=10,g=t,y=g.d,b=g.constructor,v=b.precision;if(g.s<1)throw Error(as+(g.s?"NaN":"-Infinity"));if(g.eq(Ii))return new b(0);if(e==null?(sn=!1,c=v):c=e,g.eq(10))return e==null&&(sn=!0),bA(b,c);if(c+=p,b.precision=c,n=Ks(y),r=n.charAt(0),s=Fn(g),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)g=g.times(t),n=Ks(g.d),r=n.charAt(0),h++;s=Fn(g),r>1?(g=new b("0."+n),s++):g=new b(r+"."+n.slice(1))}else return l=bA(b,c+2,v).times(s+""),g=Kp(new b(r+"."+n.slice(1)),c-p).plus(l),b.precision=v,e==null?(sn=!0,Ht(g,v)):g;for(o=a=g=Ja(g.minus(Ii),g.plus(Ii),c),f=Ht(g.times(g),c),i=3;;){if(a=Ht(a.times(f),c),l=o.plus(Ja(a,new b(i),c)),Ks(l.d).slice(0,c)===Ks(o.d).slice(0,c))return o=o.times(2),s!==0&&(o=o.plus(bA(b,c+2,v).times(s+""))),o=Ja(o,new b(h),c),b.precision=v,e==null?(sn=!0,Ht(o,v)):o;o=l,i+=2}}function BV(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=bh(n/Jt),t.d=[],r=(n+1)%Jt,n<0&&(r+=Jt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Jt;r<i;)t.d.push(+e.slice(r,r+=Jt));e=e.slice(r),r=Jt-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),sn&&(t.e>Z0||t.e<-Z0))throw Error(EO+n)}else t.s=0,t.e=0,t.d=[0];return t}function Ht(t,e,n){var r,i,s,a,o,l,c,f,h=t.d;for(a=1,s=h[0];s>=10;s/=10)a++;if(r=e-a,r<0)r+=Jt,i=e,c=h[f=0];else{if(f=Math.ceil((r+1)/Jt),s=h.length,f>=s)return t;for(c=s=h[f],a=1;s>=10;s/=10)a++;r%=Jt,i=r-Jt+a}if(n!==void 0&&(s=lc(10,a-i-1),o=c/s%10|0,l=e<0||h[f+1]!==void 0||c%s,l=n<4?(o||l)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||l||n==6&&(r>0?i>0?c/lc(10,a-i):0:h[f-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return l?(s=Fn(t),h.length=1,e=e-s-1,h[0]=lc(10,(Jt-e%Jt)%Jt),t.e=bh(-e/Jt)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=f,s=1,f--):(h.length=f+1,s=lc(10,Jt-r),h[f]=i>0?(c/lc(10,a-i)%lc(10,i)|0)*s:0),l)for(;;)if(f==0){(h[0]+=s)==sr&&(h[0]=1,++t.e);break}else{if(h[f]+=s,h[f]!=sr)break;h[f--]=0,s=1}for(r=h.length;h[--r]===0;)h.pop();if(sn&&(t.e>Z0||t.e<-Z0))throw Error(EO+Fn(t));return t}function r7(t,e){var n,r,i,s,a,o,l,c,f,h,p=t.constructor,g=p.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new p(t),sn?Ht(e,g):e;if(l=t.d,h=e.d,r=e.e,c=t.e,l=l.slice(),a=c-r,a){for(f=a<0,f?(n=l,a=-a,o=h.length):(n=h,r=c,o=l.length),i=Math.max(Math.ceil(g/Jt),o)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=l.length,o=h.length,f=i<o,f&&(o=i),i=0;i<o;i++)if(l[i]!=h[i]){f=l[i]<h[i];break}a=0}for(f&&(n=l,l=h,h=n,e.s=-e.s),o=l.length,i=h.length-o;i>0;--i)l[o++]=0;for(i=h.length;i>a;){if(l[--i]<h[i]){for(s=i;s&&l[--s]===0;)l[s]=sr-1;--l[s],l[i]+=sr}l[i]-=h[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,sn?Ht(e,g):e):new p(0)}function Oc(t,e,n){var r,i=Fn(t),s=Ks(t.d),a=s.length;return e?(n&&(r=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+Ho(r):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Ho(-i-1)+s,n&&(r=n-a)>0&&(s+=Ho(r))):i>=a?(s+=Ho(i+1-a),n&&(r=n-i-1)>0&&(s=s+"."+Ho(r))):((r=i+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(s+="."),s+=Ho(r))),t.s<0?"-"+s:s}function zV(t,e){if(t.length>e)return t.length=e,!0}function i7(t){var e,n,r;function i(s){var a=this;if(!(a instanceof i))return new i(s);if(a.constructor=i,s instanceof i){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(kc+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return BV(a,s.toString())}else if(typeof s!="string")throw Error(kc+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,Eye.test(s))BV(a,s);else throw Error(kc+s)}if(i.prototype=De,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=i7,i.config=i.set=$ye,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function $ye(t){if(!t||typeof t!="object")throw Error(as+"Object expected");var e,n,r,i=["precision",1,vh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(bh(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(kc+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(kc+n+": "+r);return this}var $O=i7(Aye);Ii=new $O(1);const jt=$O;function Iye(t){return Rye(t)||_ye(t)||Oye(t)||Nye()}function Nye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oye(t,e){if(t){if(typeof t=="string")return C$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C$(t,e)}}function _ye(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Rye(t){if(Array.isArray(t))return C$(t)}function C$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Dye=function(e){return e},s7={},a7=function(e){return e===s7},jV=function(e){return function n(){return arguments.length===0||arguments.length===1&&a7(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},Mye=function t(e,n){return e===1?n:jV(function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var a=i.filter(function(o){return o!==s7}).length;return a>=e?n.apply(void 0,i):t(e-a,jV(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var f=i.map(function(h){return a7(h)?l.shift():h});return n.apply(void 0,Iye(f).concat(l))}))})},Tx=function(e){return Mye(e.length,e)},T$=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},Pye=Tx(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),Lye=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Dye;var i=n.reverse(),s=i[0],a=i.slice(1);return function(){return a.reduce(function(o,l){return l(o)},s.apply(void 0,arguments))}},k$=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},o7=function(e){var n=null,r=null;return function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n&&s.every(function(o,l){return o===n[l]})||(n=s,r=e.apply(void 0,s)),r}};function Fye(t){var e;return t===0?e=1:e=Math.floor(new jt(t).abs().log(10).toNumber())+1,e}function Bye(t,e,n){for(var r=new jt(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var zye=Tx(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),jye=Tx(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),Vye=Tx(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const kx={rangeStep:Bye,getDigitCount:Fye,interpolateNumber:zye,uninterpolateNumber:jye,uninterpolateTruncation:Vye};function A$(t){return Gye(t)||Wye(t)||l7(t)||Uye()}function Uye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wye(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Gye(t){if(Array.isArray(t))return E$(t)}function Xp(t,e){return Kye(t)||Hye(t,e)||l7(t,e)||qye()}function qye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l7(t,e){if(t){if(typeof t=="string")return E$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E$(t,e)}}function E$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Hye(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,s=void 0;try{for(var a=t[Symbol.iterator](),o;!(r=(o=a.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,s=l}finally{try{!r&&a.return!=null&&a.return()}finally{if(i)throw s}}return n}}function Kye(t){if(Array.isArray(t))return t}function c7(t){var e=Xp(t,2),n=e[0],r=e[1],i=n,s=r;return n>r&&(i=r,s=n),[i,s]}function u7(t,e,n){if(t.lte(0))return new jt(0);var r=kx.getDigitCount(t.toNumber()),i=new jt(10).pow(r),s=t.div(i),a=r!==1?.05:.1,o=new jt(Math.ceil(s.div(a).toNumber())).add(n).mul(a),l=o.mul(i);return e?l:new jt(Math.ceil(l))}function Xye(t,e,n){var r=1,i=new jt(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new jt(10).pow(kx.getDigitCount(t)-1),i=new jt(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new jt(Math.floor(t)))}else t===0?i=new jt(Math.floor((e-1)/2)):n||(i=new jt(Math.floor(t)));var a=Math.floor((e-1)/2),o=Lye(Pye(function(l){return i.add(new jt(l-a).mul(r)).toNumber()}),T$);return o(0,e)}function f7(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new jt(0),tickMin:new jt(0),tickMax:new jt(0)};var s=u7(new jt(e).sub(t).div(n-1),r,i),a;t<=0&&e>=0?a=new jt(0):(a=new jt(t).add(e).div(2),a=a.sub(new jt(a).mod(s)));var o=Math.ceil(a.sub(t).div(s).toNumber()),l=Math.ceil(new jt(e).sub(a).div(s).toNumber()),c=o+l+1;return c>n?f7(t,e,n,r,i+1):(c<n&&(l=e>0?l+(n-c):l,o=e>0?o:o+(n-c)),{step:s,tickMin:a.sub(new jt(o).mul(s)),tickMax:a.add(new jt(l).mul(s))})}function Yye(t){var e=Xp(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),o=c7([n,r]),l=Xp(o,2),c=l[0],f=l[1];if(c===-1/0||f===1/0){var h=f===1/0?[c].concat(A$(T$(0,i-1).map(function(){return 1/0}))):[].concat(A$(T$(0,i-1).map(function(){return-1/0})),[f]);return n>r?k$(h):h}if(c===f)return Xye(c,i,s);var p=f7(c,f,a,s),g=p.step,y=p.tickMin,b=p.tickMax,v=kx.rangeStep(y,b.add(new jt(.1).mul(g)),g);return n>r?k$(v):v}function Zye(t,e){var n=Xp(t,2),r=n[0],i=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=c7([r,i]),o=Xp(a,2),l=o[0],c=o[1];if(l===-1/0||c===1/0)return[r,i];if(l===c)return[l];var f=Math.max(e,2),h=u7(new jt(c).sub(l).div(f-1),s,0),p=[].concat(A$(kx.rangeStep(new jt(l),new jt(c).sub(new jt(.99).mul(h)),h)),[c]);return r>i?k$(p):p}var Qye=o7(Yye),Jye=o7(Zye),eve="Invariant failed";function _c(t,e){throw new Error(eve)}var tve=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Mf(t){"@babel/helpers - typeof";return Mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mf(t)}function Q0(){return Q0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Q0.apply(this,arguments)}function nve(t,e){return ave(t)||sve(t,e)||ive(t,e)||rve()}function rve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ive(t,e){if(t){if(typeof t=="string")return VV(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VV(t,e)}}function VV(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function sve(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function ave(t){if(Array.isArray(t))return t}function ove(t,e){if(t==null)return{};var n=lve(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function lve(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function cve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,p7(r.key),r)}}function fve(t,e,n){return e&&uve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function hve(t,e,n){return e=J0(e),dve(t,h7()?Reflect.construct(e,n||[],J0(t).constructor):e.apply(t,n))}function dve(t,e){if(e&&(Mf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pve(t)}function pve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h7=function(){return!!t})()}function J0(t){return J0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},J0(t)}function mve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$$(t,e)}function $$(t,e){return $$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},$$(t,e)}function d7(t,e,n){return e=p7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p7(t){var e=gve(t,"string");return Mf(e)=="symbol"?e:e+""}function gve(t,e){if(Mf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Mf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ax=function(t){function e(){return cve(this,e),hve(this,e,arguments)}return mve(e,t),fve(e,[{key:"render",value:function(){var r=this.props,i=r.offset,s=r.layout,a=r.width,o=r.dataKey,l=r.data,c=r.dataPointFormatter,f=r.xAxis,h=r.yAxis,p=ove(r,tve),g=mt(p,!1);this.props.direction==="x"&&f.type!=="number"&&_c();var y=l.map(function(b){var v=c(b,o),w=v.x,S=v.y,T=v.value,A=v.errorVal;if(!A)return null;var k=[],E,I;if(Array.isArray(A)){var N=nve(A,2);E=N[0],I=N[1]}else E=I=A;if(s==="vertical"){var _=f.scale,D=S+i,O=D+a,P=D-a,z=_(T-E),W=_(T+I);k.push({x1:W,y1:O,x2:W,y2:P}),k.push({x1:z,y1:D,x2:W,y2:D}),k.push({x1:z,y1:O,x2:z,y2:P})}else if(s==="horizontal"){var U=h.scale,R=w+i,F=R-a,B=R+a,K=U(T-E),L=U(T+I);k.push({x1:F,y1:L,x2:B,y2:L}),k.push({x1:R,y1:K,x2:R,y2:L}),k.push({x1:F,y1:K,x2:B,y2:K})}return J.createElement(hn,Q0({className:"recharts-errorBar",key:"bar-".concat(k.map(function(H){return"".concat(H.x1,"-").concat(H.x2,"-").concat(H.y1,"-").concat(H.y2)}))},g),k.map(function(H){return J.createElement("line",Q0({},H,{key:"line-".concat(H.x1,"-").concat(H.x2,"-").concat(H.y1,"-").concat(H.y2)}))}))});return J.createElement(hn,{className:"recharts-errorBars"},y)}}])}(J.Component);d7(Ax,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});d7(Ax,"displayName","ErrorBar");function Yp(t){"@babel/helpers - typeof";return Yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yp(t)}function UV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ec(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UV(Object(n),!0).forEach(function(r){yve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yve(t,e,n){return e=vve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vve(t){var e=bve(t,"string");return Yp(e)=="symbol"?e:e+""}function bve(t,e){if(Yp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Yp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var m7=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,s=e.legendContent,a=Ei(n,yf);if(!a)return null;var o=yf.defaultProps,l=o!==void 0?ec(ec({},o),a.props):{},c;return a.props&&a.props.payload?c=a.props&&a.props.payload:s==="children"?c=(r||[]).reduce(function(f,h){var p=h.item,g=h.props,y=g.sectors||g.data||[];return f.concat(y.map(function(b){return{type:a.props.iconType||p.props.legendType,value:b.name,color:b.fill,payload:b}}))},[]):c=(r||[]).map(function(f){var h=f.item,p=h.type.defaultProps,g=p!==void 0?ec(ec({},p),h.props):{},y=g.dataKey,b=g.name,v=g.legendType,w=g.hide;return{inactive:w,dataKey:y,type:l.iconType||v||"square",color:IO(h),value:b||y,payload:g}}),ec(ec(ec({},l),yf.getWithHeight(a,i)),{},{payload:c,item:a})};function Zp(t){"@babel/helpers - typeof";return Zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zp(t)}function WV(t){return Cve(t)||Sve(t)||wve(t)||xve()}function xve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wve(t,e){if(t){if(typeof t=="string")return I$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I$(t,e)}}function Sve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Cve(t){if(Array.isArray(t))return I$(t)}function I$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function GV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GV(Object(n),!0).forEach(function(r){bf(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bf(t,e,n){return e=Tve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tve(t){var e=kve(t,"string");return Zp(e)=="symbol"?e:e+""}function kve(t,e){if(Zp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ri(t,e,n){return yt(t)||yt(e)?n:Zn(e)?ss(t,e,n):st(e)?e(t):n}function wp(t,e,n,r){var i=Cye(t,function(o){return Ri(o,e)});if(n==="number"){var s=i.filter(function(o){return Ne(o)||parseFloat(o)});return s.length?[Cx(s),Qo(s)]:[1/0,-1/0]}var a=r?i.filter(function(o){return!yt(o)}):i;return a.map(function(o){return Zn(o)||o instanceof Date?o:""})}var Ave=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,a=-1,o=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(o<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var l=s.range,c=0;c<o;c++){var f=c>0?i[c-1].coordinate:i[o-1].coordinate,h=i[c].coordinate,p=c>=o-1?i[0].coordinate:i[c+1].coordinate,g=void 0;if(ks(h-f)!==ks(p-h)){var y=[];if(ks(p-h)===ks(l[1]-l[0])){g=p;var b=h+l[1]-l[0];y[0]=Math.min(b,(b+f)/2),y[1]=Math.max(b,(b+f)/2)}else{g=f;var v=p+l[1]-l[0];y[0]=Math.min(h,(v+h)/2),y[1]=Math.max(h,(v+h)/2)}var w=[Math.min(h,(g+h)/2),Math.max(h,(g+h)/2)];if(e>w[0]&&e<=w[1]||e>=y[0]&&e<=y[1]){a=i[c].index;break}}else{var S=Math.min(f,p),T=Math.max(f,p);if(e>(S+h)/2&&e<=(T+h)/2){a=i[c].index;break}}}else for(var A=0;A<o;A++)if(A===0&&e<=(r[A].coordinate+r[A+1].coordinate)/2||A>0&&A<o-1&&e>(r[A].coordinate+r[A-1].coordinate)/2&&e<=(r[A].coordinate+r[A+1].coordinate)/2||A===o-1&&e>(r[A].coordinate+r[A-1].coordinate)/2){a=r[A].index;break}return a},IO=function(e){var n,r=e,i=r.type.displayName,s=(n=e.type)!==null&&n!==void 0&&n.defaultProps?vn(vn({},e.type.defaultProps),e.props):e.props,a=s.stroke,o=s.fill,l;switch(i){case"Line":l=a;break;case"Area":case"Radar":l=a&&a!=="none"?a:o;break;default:l=o;break}return l},Eve=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var a={},o=Object.keys(s),l=0,c=o.length;l<c;l++)for(var f=s[o[l]].stackGroups,h=Object.keys(f),p=0,g=h.length;p<g;p++){var y=f[h[p]],b=y.items,v=y.cateAxisId,w=b.filter(function(I){return Za(I.type).indexOf("Bar")>=0});if(w&&w.length){var S=w[0].type.defaultProps,T=S!==void 0?vn(vn({},S),w[0].props):w[0].props,A=T.barSize,k=T[v];a[k]||(a[k]=[]);var E=yt(A)?n:A;a[k].push({item:w[0],stackList:w.slice(1),barSize:yt(E)?void 0:Nc(E,r,0)})}}return a},$ve=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,s=e.sizeList,a=s===void 0?[]:s,o=e.maxBarSize,l=a.length;if(l<1)return null;var c=Nc(n,i,0,!0),f,h=[];if(a[0].barSize===+a[0].barSize){var p=!1,g=i/l,y=a.reduce(function(A,k){return A+k.barSize||0},0);y+=(l-1)*c,y>=i&&(y-=(l-1)*c,c=0),y>=i&&g>0&&(p=!0,g*=.9,y=l*g);var b=(i-y)/2>>0,v={offset:b-c,size:0};f=a.reduce(function(A,k){var E={item:k.item,position:{offset:v.offset+v.size+c,size:p?g:k.barSize}},I=[].concat(WV(A),[E]);return v=I[I.length-1].position,k.stackList&&k.stackList.length&&k.stackList.forEach(function(N){I.push({item:N,position:v})}),I},h)}else{var w=Nc(r,i,0,!0);i-2*w-(l-1)*c<=0&&(c=0);var S=(i-2*w-(l-1)*c)/l;S>1&&(S>>=0);var T=o===+o?Math.min(S,o):S;f=a.reduce(function(A,k,E){var I=[].concat(WV(A),[{item:k.item,position:{offset:w+(S+c)*E+(S-T)/2,size:T}}]);return k.stackList&&k.stackList.length&&k.stackList.forEach(function(N){I.push({item:N,position:I[I.length-1].position})}),I},h)}return f},Ive=function(e,n,r,i){var s=r.children,a=r.width,o=r.margin,l=a-(o.left||0)-(o.right||0),c=m7({children:s,legendWidth:l});if(c){var f=i||{},h=f.width,p=f.height,g=c.align,y=c.verticalAlign,b=c.layout;if((b==="vertical"||b==="horizontal"&&y==="middle")&&g!=="center"&&Ne(e[g]))return vn(vn({},e),{},bf({},g,e[g]+(h||0)));if((b==="horizontal"||b==="vertical"&&g==="center")&&y!=="middle"&&Ne(e[y]))return vn(vn({},e),{},bf({},y,e[y]+(p||0)))}return e},Nve=function(e,n,r){return yt(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},g7=function(e,n,r,i,s){var a=n.props.children,o=Es(a,Ax).filter(function(c){return Nve(i,s,c.props.direction)});if(o&&o.length){var l=o.map(function(c){return c.props.dataKey});return e.reduce(function(c,f){var h=Ri(f,r);if(yt(h))return c;var p=Array.isArray(h)?[Cx(h),Qo(h)]:[h,h],g=l.reduce(function(y,b){var v=Ri(f,b,0),w=p[0]-Math.abs(Array.isArray(v)?v[0]:v),S=p[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(w,y[0]),Math.max(S,y[1])]},[1/0,-1/0]);return[Math.min(g[0],c[0]),Math.max(g[1],c[1])]},[1/0,-1/0])}return null},Ove=function(e,n,r,i,s){var a=n.map(function(o){return g7(e,o,r,s,i)}).filter(function(o){return!yt(o)});return a&&a.length?a.reduce(function(o,l){return[Math.min(o[0],l[0]),Math.max(o[1],l[1])]},[1/0,-1/0]):null},y7=function(e,n,r,i,s){var a=n.map(function(l){var c=l.props.dataKey;return r==="number"&&c&&g7(e,l,c,i)||wp(e,c,r,s)});if(r==="number")return a.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var o={};return a.reduce(function(l,c){for(var f=0,h=c.length;f<h;f++)o[c[f]]||(o[c[f]]=!0,l.push(c[f]));return l},[])},v7=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},b7=function(e,n,r,i){if(i)return e.map(function(l){return l.coordinate});var s,a,o=e.map(function(l){return l.coordinate===n&&(s=!0),l.coordinate===r&&(a=!0),l.coordinate});return s||o.push(n),a||o.push(r),o},Ka=function(e,n,r){if(!e)return null;var i=e.scale,s=e.duplicateDomain,a=e.type,o=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(n||r)&&a==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?ks(o[0]-o[1])*2*c:c,n&&(e.ticks||e.niceTicks)){var f=(e.ticks||e.niceTicks).map(function(h){var p=s?s.indexOf(h):h;return{coordinate:i(p)+c,value:h,offset:c}});return f.filter(function(h){return!ph(h.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(h,p){return{coordinate:i(h)+c,value:h,index:p,offset:c}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(h){return{coordinate:i(h)+c,value:h,offset:c}}):i.domain().map(function(h,p){return{coordinate:i(h)+c,value:s?s[h]:h,index:p,offset:c}})},xA=new WeakMap,Dv=function(e,n){if(typeof n!="function")return e;xA.has(e)||xA.set(e,new WeakMap);var r=xA.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},_ve=function(e,n,r){var i=e.scale,s=e.type,a=e.layout,o=e.axisType;if(i==="auto")return a==="radial"&&o==="radiusAxis"?{scale:Vp(),realScaleType:"band"}:a==="radial"&&o==="angleAxis"?{scale:H0(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:xp(),realScaleType:"point"}:s==="category"?{scale:Vp(),realScaleType:"band"}:{scale:H0(),realScaleType:"linear"};if(Ic(i)){var l="scale".concat(ux(i));return{scale:(NV[l]||xp)(),realScaleType:NV[l]?l:"point"}}return st(i)?{scale:i}:{scale:xp(),realScaleType:"point"}},qV=1e-4,Rve=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),s=Math.min(i[0],i[1])-qV,a=Math.max(i[0],i[1])+qV,o=e(n[0]),l=e(n[r-1]);(o<s||o>a||l<s||l>a)&&e.domain([n[0],n[r-1]])}},Dve=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},Mve=function(e,n){if(!n||n.length!==2||!Ne(n[0])||!Ne(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),s=[e[0],e[1]];return(!Ne(e[0])||e[0]<r)&&(s[0]=r),(!Ne(e[1])||e[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<r&&(s[1]=r),s},Pve=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,a=0,o=0;o<n;++o){var l=ph(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1]):(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1])}},Lve=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,a=0;a<n;++a){var o=ph(e[a][r][1])?e[a][r][0]:e[a][r][1];o>=0?(e[a][r][0]=s,e[a][r][1]=s+o,s=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},Fve={sign:Pve,expand:xfe,none:Ef,silhouette:wfe,wiggle:Sfe,positive:Lve},Bve=function(e,n,r){var i=n.map(function(o){return o.props.dataKey}),s=Fve[r],a=bfe().keys(i).value(function(o,l){return+Ri(o,l,0)}).order(s$).offset(s);return a(e)},zve=function(e,n,r,i,s,a){if(!e)return null;var o=a?n.reverse():n,l={},c=o.reduce(function(h,p){var g,y=(g=p.type)!==null&&g!==void 0&&g.defaultProps?vn(vn({},p.type.defaultProps),p.props):p.props,b=y.stackId,v=y.hide;if(v)return h;var w=y[r],S=h[w]||{hasStack:!1,stackGroups:{}};if(Zn(b)){var T=S.stackGroups[b]||{numericAxisId:r,cateAxisId:i,items:[]};T.items.push(p),S.hasStack=!0,S.stackGroups[b]=T}else S.stackGroups[Pm("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[p]};return vn(vn({},h),{},bf({},w,S))},l),f={};return Object.keys(c).reduce(function(h,p){var g=c[p];if(g.hasStack){var y={};g.stackGroups=Object.keys(g.stackGroups).reduce(function(b,v){var w=g.stackGroups[v];return vn(vn({},b),{},bf({},v,{numericAxisId:r,cateAxisId:i,items:w.items,stackedData:Bve(e,w.items,s)}))},y)}return vn(vn({},h),{},bf({},p,g))},f)},jve=function(e,n){var r=n.realScaleType,i=n.type,s=n.tickCount,a=n.originalDomain,o=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(s&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var c=e.domain();if(!c.length)return null;var f=Qye(c,s,o);return e.domain([Cx(f),Qo(f)]),{niceTicks:f}}if(s&&i==="number"){var h=e.domain(),p=Jye(h,s,o);return{niceTicks:p}}return null};function HV(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,s=t.index,a=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!yt(i[e.dataKey])){var o=E0(n,"value",i[e.dataKey]);if(o)return o.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var l=Ri(i,yt(a)?e.dataKey:a);return yt(l)?null:e.scale(l)}var KV=function(e){var n=e.axis,r=e.ticks,i=e.offset,s=e.bandSize,a=e.entry,o=e.index;if(n.type==="category")return r[o]?r[o].coordinate+i:null;var l=Ri(a,n.dataKey,n.domain[o]);return yt(l)?null:n.scale(l)-s/2+i},Vve=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return i<=0&&s>=0?0:s<0?s:i}return r[0]},Uve=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?vn(vn({},e.type.defaultProps),e.props):e.props,s=i.stackId;if(Zn(s)){var a=n[s];if(a){var o=a.items.indexOf(e);return o>=0?a.stackedData[o]:null}}return null},Wve=function(e){return e.reduce(function(n,r){return[Cx(r.concat([n[0]]).filter(Ne)),Qo(r.concat([n[1]]).filter(Ne))]},[1/0,-1/0])},x7=function(e,n,r){return Object.keys(e).reduce(function(i,s){var a=e[s],o=a.stackedData,l=o.reduce(function(c,f){var h=Wve(f.slice(n,r+1));return[Math.min(c[0],h[0]),Math.max(c[1],h[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},XV=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,YV=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,N$=function(e,n,r){if(st(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(Ne(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(XV.test(e[0])){var s=+XV.exec(e[0])[1];i[0]=n[0]-s}else st(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(Ne(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(YV.test(e[1])){var a=+YV.exec(e[1])[1];i[1]=n[1]+a}else st(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},eb=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var s=rO(n,function(h){return h.coordinate}),a=1/0,o=1,l=s.length;o<l;o++){var c=s[o],f=s[o-1];a=Math.min((c.coordinate||0)-(f.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0},ZV=function(e,n,r){return!e||!e.length||Hp(e,ss(r,"type.defaultProps.domain"))?n:e},w7=function(e,n){var r=e.type.defaultProps?vn(vn({},e.type.defaultProps),e.props):e.props,i=r.dataKey,s=r.name,a=r.unit,o=r.formatter,l=r.tooltipType,c=r.chartType,f=r.hide;return vn(vn({},mt(e,!1)),{},{dataKey:i,unit:a,formatter:o,name:s||i,color:IO(e),value:Ri(n,i),type:l,payload:n,chartType:c,hide:f})};function Qp(t){"@babel/helpers - typeof";return Qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qp(t)}function QV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function JV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QV(Object(n),!0).forEach(function(r){Gve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gve(t,e,n){return e=qve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qve(t){var e=Hve(t,"string");return Qp(e)=="symbol"?e:e+""}function Hve(t,e){if(Qp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tb=Math.PI/180,Kve=function(e){return e*180/Math.PI},br=function(e,n,r,i){return{x:e+Math.cos(-tb*i)*r,y:n+Math.sin(-tb*i)*r}},Xve=function(e,n){var r=e.x,i=e.y,s=n.x,a=n.y;return Math.sqrt(Math.pow(r-s,2)+Math.pow(i-a,2))},Yve=function(e,n){var r=e.x,i=e.y,s=n.cx,a=n.cy,o=Xve({x:r,y:i},{x:s,y:a});if(o<=0)return{radius:o};var l=(r-s)/o,c=Math.acos(l);return i>a&&(c=2*Math.PI-c),{radius:o,angle:Kve(c),angleInRadian:c}},Zve=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),s=Math.floor(r/360),a=Math.min(i,s);return{startAngle:n-a*360,endAngle:r-a*360}},Qve=function(e,n){var r=n.startAngle,i=n.endAngle,s=Math.floor(r/360),a=Math.floor(i/360),o=Math.min(s,a);return e+o*360},eU=function(e,n){var r=e.x,i=e.y,s=Yve({x:r,y:i},n),a=s.radius,o=s.angle,l=n.innerRadius,c=n.outerRadius;if(a<l||a>c)return!1;if(a===0)return!0;var f=Zve(n),h=f.startAngle,p=f.endAngle,g=o,y;if(h<=p){for(;g>p;)g-=360;for(;g<h;)g+=360;y=g>=h&&g<=p}else{for(;g>h;)g-=360;for(;g<p;)g+=360;y=g>=p&&g<=h}return y?JV(JV({},n),{},{radius:a,angle:Qve(g,n)}):null};function Jp(t){"@babel/helpers - typeof";return Jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jp(t)}var Jve=["offset"];function e0e(t){return i0e(t)||r0e(t)||n0e(t)||t0e()}function t0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n0e(t,e){if(t){if(typeof t=="string")return O$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O$(t,e)}}function r0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function i0e(t){if(Array.isArray(t))return O$(t)}function O$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s0e(t,e){if(t==null)return{};var n=a0e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function a0e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function tU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tU(Object(n),!0).forEach(function(r){o0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function o0e(t,e,n){return e=l0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l0e(t){var e=c0e(t,"string");return Jp(e)=="symbol"?e:e+""}function c0e(t,e){if(Jp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function em(){return em=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},em.apply(this,arguments)}var u0e=function(e){var n=e.value,r=e.formatter,i=yt(e.children)?n:e.children;return st(r)?r(i):i},f0e=function(e,n){var r=ks(n-e),i=Math.min(Math.abs(n-e),360);return r*i},h0e=function(e,n,r){var i=e.position,s=e.viewBox,a=e.offset,o=e.className,l=s,c=l.cx,f=l.cy,h=l.innerRadius,p=l.outerRadius,g=l.startAngle,y=l.endAngle,b=l.clockWise,v=(h+p)/2,w=f0e(g,y),S=w>=0?1:-1,T,A;i==="insideStart"?(T=g+S*a,A=b):i==="insideEnd"?(T=y-S*a,A=!b):i==="end"&&(T=y+S*a,A=b),A=w<=0?A:!A;var k=br(c,f,v,T),E=br(c,f,v,T+(A?1:-1)*359),I="M".concat(k.x,",").concat(k.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(A?0:1,`,
    `).concat(E.x,",").concat(E.y),N=yt(e.id)?Pm("recharts-radial-line-"):e.id;return J.createElement("text",em({},r,{dominantBaseline:"central",className:St("recharts-radial-bar-label",o)}),J.createElement("defs",null,J.createElement("path",{id:N,d:I})),J.createElement("textPath",{xlinkHref:"#".concat(N)},n))},d0e=function(e){var n=e.viewBox,r=e.offset,i=e.position,s=n,a=s.cx,o=s.cy,l=s.innerRadius,c=s.outerRadius,f=s.startAngle,h=s.endAngle,p=(f+h)/2;if(i==="outside"){var g=br(a,o,c+r,p),y=g.x,b=g.y;return{x:y,y:b,textAnchor:y>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"end"};var v=(l+c)/2,w=br(a,o,v,p),S=w.x,T=w.y;return{x:S,y:T,textAnchor:"middle",verticalAnchor:"middle"}},p0e=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,s=e.position,a=n,o=a.x,l=a.y,c=a.width,f=a.height,h=f>=0?1:-1,p=h*i,g=h>0?"end":"start",y=h>0?"start":"end",b=c>=0?1:-1,v=b*i,w=b>0?"end":"start",S=b>0?"start":"end";if(s==="top"){var T={x:o+c/2,y:l-h*i,textAnchor:"middle",verticalAnchor:g};return Kn(Kn({},T),r?{height:Math.max(l-r.y,0),width:c}:{})}if(s==="bottom"){var A={x:o+c/2,y:l+f+p,textAnchor:"middle",verticalAnchor:y};return Kn(Kn({},A),r?{height:Math.max(r.y+r.height-(l+f),0),width:c}:{})}if(s==="left"){var k={x:o-v,y:l+f/2,textAnchor:w,verticalAnchor:"middle"};return Kn(Kn({},k),r?{width:Math.max(k.x-r.x,0),height:f}:{})}if(s==="right"){var E={x:o+c+v,y:l+f/2,textAnchor:S,verticalAnchor:"middle"};return Kn(Kn({},E),r?{width:Math.max(r.x+r.width-E.x,0),height:f}:{})}var I=r?{width:c,height:f}:{};return s==="insideLeft"?Kn({x:o+v,y:l+f/2,textAnchor:S,verticalAnchor:"middle"},I):s==="insideRight"?Kn({x:o+c-v,y:l+f/2,textAnchor:w,verticalAnchor:"middle"},I):s==="insideTop"?Kn({x:o+c/2,y:l+p,textAnchor:"middle",verticalAnchor:y},I):s==="insideBottom"?Kn({x:o+c/2,y:l+f-p,textAnchor:"middle",verticalAnchor:g},I):s==="insideTopLeft"?Kn({x:o+v,y:l+p,textAnchor:S,verticalAnchor:y},I):s==="insideTopRight"?Kn({x:o+c-v,y:l+p,textAnchor:w,verticalAnchor:y},I):s==="insideBottomLeft"?Kn({x:o+v,y:l+f-p,textAnchor:S,verticalAnchor:g},I):s==="insideBottomRight"?Kn({x:o+c-v,y:l+f-p,textAnchor:w,verticalAnchor:g},I):dh(s)&&(Ne(s.x)||mc(s.x))&&(Ne(s.y)||mc(s.y))?Kn({x:o+Nc(s.x,c),y:l+Nc(s.y,f),textAnchor:"end",verticalAnchor:"end"},I):Kn({x:o+c/2,y:l+f/2,textAnchor:"middle",verticalAnchor:"middle"},I)},m0e=function(e){return"cx"in e&&Ne(e.cx)};function Dr(t){var e=t.offset,n=e===void 0?5:e,r=s0e(t,Jve),i=Kn({offset:n},r),s=i.viewBox,a=i.position,o=i.value,l=i.children,c=i.content,f=i.className,h=f===void 0?"":f,p=i.textBreakAll;if(!s||yt(o)&&yt(l)&&!q.isValidElement(c)&&!st(c))return null;if(q.isValidElement(c))return q.cloneElement(c,i);var g;if(st(c)){if(g=q.createElement(c,i),q.isValidElement(g))return g}else g=u0e(i);var y=m0e(s),b=mt(i,!0);if(y&&(a==="insideStart"||a==="insideEnd"||a==="end"))return h0e(i,g,b);var v=y?d0e(i):p0e(i);return J.createElement(z0,em({className:St("recharts-label",h)},b,v,{breakAll:p}),g)}Dr.displayName="Label";var S7=function(e){var n=e.cx,r=e.cy,i=e.angle,s=e.startAngle,a=e.endAngle,o=e.r,l=e.radius,c=e.innerRadius,f=e.outerRadius,h=e.x,p=e.y,g=e.top,y=e.left,b=e.width,v=e.height,w=e.clockWise,S=e.labelViewBox;if(S)return S;if(Ne(b)&&Ne(v)){if(Ne(h)&&Ne(p))return{x:h,y:p,width:b,height:v};if(Ne(g)&&Ne(y))return{x:g,y,width:b,height:v}}return Ne(h)&&Ne(p)?{x:h,y:p,width:0,height:0}:Ne(n)&&Ne(r)?{cx:n,cy:r,startAngle:s||i||0,endAngle:a||i||0,innerRadius:c||0,outerRadius:f||l||o||0,clockWise:w}:e.viewBox?e.viewBox:{}},g0e=function(e,n){return e?e===!0?J.createElement(Dr,{key:"label-implicit",viewBox:n}):Zn(e)?J.createElement(Dr,{key:"label-implicit",viewBox:n,value:e}):q.isValidElement(e)?e.type===Dr?q.cloneElement(e,{key:"label-implicit",viewBox:n}):J.createElement(Dr,{key:"label-implicit",content:e,viewBox:n}):st(e)?J.createElement(Dr,{key:"label-implicit",content:e,viewBox:n}):dh(e)?J.createElement(Dr,em({viewBox:n},e,{key:"label-implicit"})):null:null},y0e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,s=S7(e),a=Es(i,Dr).map(function(l,c){return q.cloneElement(l,{viewBox:n||s,key:"label-".concat(c)})});if(!r)return a;var o=g0e(e.label,n||s);return[o].concat(e0e(a))};Dr.parseViewBox=S7;Dr.renderCallByParent=y0e;var wA,nU;function v0e(){if(nU)return wA;nU=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return wA=t,wA}var b0e=v0e();const x0e=Nt(b0e);function tm(t){"@babel/helpers - typeof";return tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tm(t)}var w0e=["valueAccessor"],S0e=["data","dataKey","clockWise","id","textBreakAll"];function C0e(t){return E0e(t)||A0e(t)||k0e(t)||T0e()}function T0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k0e(t,e){if(t){if(typeof t=="string")return _$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _$(t,e)}}function A0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function E0e(t){if(Array.isArray(t))return _$(t)}function _$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function nb(){return nb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nb.apply(this,arguments)}function rU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function iU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rU(Object(n),!0).forEach(function(r){$0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $0e(t,e,n){return e=I0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I0e(t){var e=N0e(t,"string");return tm(e)=="symbol"?e:e+""}function N0e(t,e){if(tm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sU(t,e){if(t==null)return{};var n=O0e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function O0e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var _0e=function(e){return Array.isArray(e.value)?x0e(e.value):e.value};function il(t){var e=t.valueAccessor,n=e===void 0?_0e:e,r=sU(t,w0e),i=r.data,s=r.dataKey,a=r.clockWise,o=r.id,l=r.textBreakAll,c=sU(r,S0e);return!i||!i.length?null:J.createElement(hn,{className:"recharts-label-list"},i.map(function(f,h){var p=yt(s)?n(f,h):Ri(f&&f.payload,s),g=yt(o)?{}:{id:"".concat(o,"-").concat(h)};return J.createElement(Dr,nb({},mt(f,!0),c,g,{parentViewBox:f.parentViewBox,value:p,textBreakAll:l,viewBox:Dr.parseViewBox(yt(a)?f:iU(iU({},f),{},{clockWise:a})),key:"label-".concat(h),index:h}))}))}il.displayName="LabelList";function R0e(t,e){return t?t===!0?J.createElement(il,{key:"labelList-implicit",data:e}):J.isValidElement(t)||st(t)?J.createElement(il,{key:"labelList-implicit",data:e,content:t}):dh(t)?J.createElement(il,nb({data:e},t,{key:"labelList-implicit"})):null:null}function D0e(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=Es(r,il).map(function(a,o){return q.cloneElement(a,{data:e,key:"labelList-".concat(o)})});if(!n)return i;var s=R0e(t.label,e);return[s].concat(C0e(i))}il.renderCallByParent=D0e;function nm(t){"@babel/helpers - typeof";return nm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nm(t)}function R$(){return R$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},R$.apply(this,arguments)}function aU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aU(Object(n),!0).forEach(function(r){M0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function M0e(t,e,n){return e=P0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P0e(t){var e=L0e(t,"string");return nm(e)=="symbol"?e:e+""}function L0e(t,e){if(nm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(nm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var F0e=function(e,n){var r=ks(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},Mv=function(e){var n=e.cx,r=e.cy,i=e.radius,s=e.angle,a=e.sign,o=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,f=l*(o?1:-1)+i,h=Math.asin(l/f)/tb,p=c?s:s+a*h,g=br(n,r,f,p),y=br(n,r,i,p),b=c?s-a*h:s,v=br(n,r,f*Math.cos(h*tb),b);return{center:g,circleTangency:y,lineTangency:v,theta:h}},C7=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,a=e.startAngle,o=e.endAngle,l=F0e(a,o),c=a+l,f=br(n,r,s,a),h=br(n,r,s,c),p="M ".concat(f.x,",").concat(f.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(a>c),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(i>0){var g=br(n,r,i,a),y=br(n,r,i,c);p+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(a<=c),`,
            `).concat(g.x,",").concat(g.y," Z")}else p+="L ".concat(n,",").concat(r," Z");return p},B0e=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,a=e.cornerRadius,o=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,f=e.endAngle,h=ks(f-c),p=Mv({cx:n,cy:r,radius:s,angle:c,sign:h,cornerRadius:a,cornerIsExternal:l}),g=p.circleTangency,y=p.lineTangency,b=p.theta,v=Mv({cx:n,cy:r,radius:s,angle:f,sign:-h,cornerRadius:a,cornerIsExternal:l}),w=v.circleTangency,S=v.lineTangency,T=v.theta,A=l?Math.abs(c-f):Math.abs(c-f)-b-T;if(A<0)return o?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):C7({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:c,endAngle:f});var k="M ".concat(y.x,",").concat(y.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(A>180),",").concat(+(h<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(S.x,",").concat(S.y,`
  `);if(i>0){var E=Mv({cx:n,cy:r,radius:i,angle:c,sign:h,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),I=E.circleTangency,N=E.lineTangency,_=E.theta,D=Mv({cx:n,cy:r,radius:i,angle:f,sign:-h,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),O=D.circleTangency,P=D.lineTangency,z=D.theta,W=l?Math.abs(c-f):Math.abs(c-f)-_-z;if(W<0&&a===0)return"".concat(k,"L").concat(n,",").concat(r,"Z");k+="L".concat(P.x,",").concat(P.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(W>180),",").concat(+(h>0),",").concat(I.x,",").concat(I.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(N.x,",").concat(N.y,"Z")}else k+="L".concat(n,",").concat(r,"Z");return k},z0e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},T7=function(e){var n=oU(oU({},z0e),e),r=n.cx,i=n.cy,s=n.innerRadius,a=n.outerRadius,o=n.cornerRadius,l=n.forceCornerRadius,c=n.cornerIsExternal,f=n.startAngle,h=n.endAngle,p=n.className;if(a<s||f===h)return null;var g=St("recharts-sector",p),y=a-s,b=Nc(o,y,0,!0),v;return b>0&&Math.abs(f-h)<360?v=B0e({cx:r,cy:i,innerRadius:s,outerRadius:a,cornerRadius:Math.min(b,y/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:f,endAngle:h}):v=C7({cx:r,cy:i,innerRadius:s,outerRadius:a,startAngle:f,endAngle:h}),J.createElement("path",R$({},mt(n,!0),{className:g,d:v,role:"img"}))};function rm(t){"@babel/helpers - typeof";return rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rm(t)}function D$(){return D$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},D$.apply(this,arguments)}function lU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lU(Object(n),!0).forEach(function(r){j0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function j0e(t,e,n){return e=V0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V0e(t){var e=U0e(t,"string");return rm(e)=="symbol"?e:e+""}function U0e(t,e){if(rm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(rm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uU={curveBasisClosed:lfe,curveBasisOpen:cfe,curveBasis:ofe,curveBumpX:Hue,curveBumpY:Kue,curveLinearClosed:ufe,curveLinear:hx,curveMonotoneX:ffe,curveMonotoneY:hfe,curveNatural:dfe,curveStep:pfe,curveStepAfter:gfe,curveStepBefore:mfe},Pv=function(e){return e.x===+e.x&&e.y===+e.y},Kd=function(e){return e.x},Xd=function(e){return e.y},W0e=function(e,n){if(st(e))return e;var r="curve".concat(ux(e));return(r==="curveMonotone"||r==="curveBump")&&n?uU["".concat(r).concat(n==="vertical"?"Y":"X")]:uU[r]||hx},G0e=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,s=i===void 0?[]:i,a=e.baseLine,o=e.layout,l=e.connectNulls,c=l===void 0?!1:l,f=W0e(r,o),h=c?s.filter(function(b){return Pv(b)}):s,p;if(Array.isArray(a)){var g=c?a.filter(function(b){return Pv(b)}):a,y=h.map(function(b,v){return cU(cU({},b),{},{base:g[v]})});return o==="vertical"?p=Ev().y(Xd).x1(Kd).x0(function(b){return b.base.x}):p=Ev().x(Kd).y1(Xd).y0(function(b){return b.base.y}),p.defined(Pv).curve(f),p(y)}return o==="vertical"&&Ne(a)?p=Ev().y(Xd).x1(Kd).x0(a):Ne(a)?p=Ev().x(Kd).y1(Xd).y0(a):p=$H().x(Kd).y(Xd),p.defined(Pv).curve(f),p(h)},Sp=function(e){var n=e.className,r=e.points,i=e.path,s=e.pathRef;if((!r||!r.length)&&!i)return null;var a=r&&r.length?G0e(e):i;return J.createElement("path",D$({},mt(e,!1),$0(e),{className:St("recharts-curve",n),d:a,ref:s}))},SA={exports:{}},CA,fU;function q0e(){if(fU)return CA;fU=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return CA=t,CA}var TA,hU;function H0e(){if(hU)return TA;hU=1;var t=q0e();function e(){}function n(){}return n.resetWarningCache=e,TA=function(){function r(a,o,l,c,f,h){if(h!==t){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},TA}var dU;function K0e(){return dU||(dU=1,SA.exports=H0e()()),SA.exports}var X0e=K0e();const _t=Nt(X0e);var Y0e=Object.getOwnPropertyNames,Z0e=Object.getOwnPropertySymbols,Q0e=Object.prototype.hasOwnProperty;function pU(t,e){return function(r,i,s){return t(r,i,s)&&e(r,i,s)}}function Lv(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var s=i.cache,a=s.get(n),o=s.get(r);if(a&&o)return a===r&&o===n;s.set(n,r),s.set(r,n);var l=t(n,r,i);return s.delete(n),s.delete(r),l}}function mU(t){return Y0e(t).concat(Z0e(t))}var J0e=Object.hasOwn||function(t,e){return Q0e.call(t,e)};function Zc(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var ebe="__v",tbe="__o",nbe="_owner",gU=Object.getOwnPropertyDescriptor,yU=Object.keys;function rbe(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function ibe(t,e){return Zc(t.getTime(),e.getTime())}function sbe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function abe(t,e){return t===e}function vU(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),s=t.entries(),a,o,l=0;(a=s.next())&&!a.done;){for(var c=e.entries(),f=!1,h=0;(o=c.next())&&!o.done;){if(i[h]){h++;continue}var p=a.value,g=o.value;if(n.equals(p[0],g[0],l,h,t,e,n)&&n.equals(p[1],g[1],p[0],g[0],t,e,n)){f=i[h]=!0;break}h++}if(!f)return!1;l++}return!0}var obe=Zc;function lbe(t,e,n){var r=yU(t),i=r.length;if(yU(e).length!==i)return!1;for(;i-- >0;)if(!k7(t,e,n,r[i]))return!1;return!0}function Yd(t,e,n){var r=mU(t),i=r.length;if(mU(e).length!==i)return!1;for(var s,a,o;i-- >0;)if(s=r[i],!k7(t,e,n,s)||(a=gU(t,s),o=gU(e,s),(a||o)&&(!a||!o||a.configurable!==o.configurable||a.enumerable!==o.enumerable||a.writable!==o.writable)))return!1;return!0}function cbe(t,e){return Zc(t.valueOf(),e.valueOf())}function ube(t,e){return t.source===e.source&&t.flags===e.flags}function bU(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),s=t.values(),a,o;(a=s.next())&&!a.done;){for(var l=e.values(),c=!1,f=0;(o=l.next())&&!o.done;){if(!i[f]&&n.equals(a.value,o.value,a.value,o.value,t,e,n)){c=i[f]=!0;break}f++}if(!c)return!1}return!0}function fbe(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function hbe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function k7(t,e,n,r){return(r===nbe||r===tbe||r===ebe)&&(t.$$typeof||e.$$typeof)?!0:J0e(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var dbe="[object Arguments]",pbe="[object Boolean]",mbe="[object Date]",gbe="[object Error]",ybe="[object Map]",vbe="[object Number]",bbe="[object Object]",xbe="[object RegExp]",wbe="[object Set]",Sbe="[object String]",Cbe="[object URL]",Tbe=Array.isArray,xU=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,wU=Object.assign,kbe=Object.prototype.toString.call.bind(Object.prototype.toString);function Abe(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,s=t.areMapsEqual,a=t.areNumbersEqual,o=t.areObjectsEqual,l=t.arePrimitiveWrappersEqual,c=t.areRegExpsEqual,f=t.areSetsEqual,h=t.areTypedArraysEqual,p=t.areUrlsEqual;return function(y,b,v){if(y===b)return!0;if(y==null||b==null)return!1;var w=typeof y;if(w!==typeof b)return!1;if(w!=="object")return w==="number"?a(y,b,v):w==="function"?i(y,b,v):!1;var S=y.constructor;if(S!==b.constructor)return!1;if(S===Object)return o(y,b,v);if(Tbe(y))return e(y,b,v);if(xU!=null&&xU(y))return h(y,b,v);if(S===Date)return n(y,b,v);if(S===RegExp)return c(y,b,v);if(S===Map)return s(y,b,v);if(S===Set)return f(y,b,v);var T=kbe(y);return T===mbe?n(y,b,v):T===xbe?c(y,b,v):T===ybe?s(y,b,v):T===wbe?f(y,b,v):T===bbe?typeof y.then!="function"&&typeof b.then!="function"&&o(y,b,v):T===Cbe?p(y,b,v):T===gbe?r(y,b,v):T===dbe?o(y,b,v):T===pbe||T===vbe||T===Sbe?l(y,b,v):!1}}function Ebe(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?Yd:rbe,areDatesEqual:ibe,areErrorsEqual:sbe,areFunctionsEqual:abe,areMapsEqual:r?pU(vU,Yd):vU,areNumbersEqual:obe,areObjectsEqual:r?Yd:lbe,arePrimitiveWrappersEqual:cbe,areRegExpsEqual:ube,areSetsEqual:r?pU(bU,Yd):bU,areTypedArraysEqual:r?Yd:fbe,areUrlsEqual:hbe};if(n&&(i=wU({},i,n(i))),e){var s=Lv(i.areArraysEqual),a=Lv(i.areMapsEqual),o=Lv(i.areObjectsEqual),l=Lv(i.areSetsEqual);i=wU({},i,{areArraysEqual:s,areMapsEqual:a,areObjectsEqual:o,areSetsEqual:l})}return i}function $be(t){return function(e,n,r,i,s,a,o){return t(e,n,o)}}function Ibe(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,s=t.strict;if(r)return function(l,c){var f=r(),h=f.cache,p=h===void 0?e?new WeakMap:void 0:h,g=f.meta;return n(l,c,{cache:p,equals:i,meta:g,strict:s})};if(e)return function(l,c){return n(l,c,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var a={cache:void 0,equals:i,meta:void 0,strict:s};return function(l,c){return n(l,c,a)}}var Nbe=Cl();Cl({strict:!0});Cl({circular:!0});Cl({circular:!0,strict:!0});Cl({createInternalComparator:function(){return Zc}});Cl({strict:!0,createInternalComparator:function(){return Zc}});Cl({circular:!0,createInternalComparator:function(){return Zc}});Cl({circular:!0,createInternalComparator:function(){return Zc},strict:!0});function Cl(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,s=t.strict,a=s===void 0?!1:s,o=Ebe(t),l=Abe(o),c=r?r(l):$be(l);return Ibe({circular:n,comparator:l,createState:i,equals:c,strict:a})}function Obe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function SU(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(s){n<0&&(n=s),s-n>e?(t(s),n=-1):Obe(i)};requestAnimationFrame(r)}function M$(t){"@babel/helpers - typeof";return M$=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M$(t)}function _be(t){return Pbe(t)||Mbe(t)||Dbe(t)||Rbe()}function Rbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dbe(t,e){if(t){if(typeof t=="string")return CU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CU(t,e)}}function CU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Mbe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Pbe(t){if(Array.isArray(t))return t}function Lbe(){var t={},e=function(){return null},n=!1,r=function i(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var a=s,o=_be(a),l=o[0],c=o.slice(1);if(typeof l=="number"){SU(i.bind(null,c),l);return}i(l),SU(i.bind(null,c));return}M$(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,r(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function im(t){"@babel/helpers - typeof";return im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},im(t)}function TU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TU(Object(n),!0).forEach(function(r){A7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function A7(t,e,n){return e=Fbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fbe(t){var e=Bbe(t,"string");return im(e)==="symbol"?e:String(e)}function Bbe(t,e){if(im(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(im(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zbe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(s){return i.includes(s)})})},jbe=function(e){return e},Vbe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Cp=function(e,n){return Object.keys(n).reduce(function(r,i){return kU(kU({},r),{},A7({},i,e(i,n[i])))},{})},AU=function(e,n,r){return e.map(function(i){return"".concat(Vbe(i)," ").concat(n,"ms ").concat(r)}).join(",")};function Ube(t,e){return qbe(t)||Gbe(t,e)||E7(t,e)||Wbe()}function Wbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gbe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function qbe(t){if(Array.isArray(t))return t}function Hbe(t){return Ybe(t)||Xbe(t)||E7(t)||Kbe()}function Kbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E7(t,e){if(t){if(typeof t=="string")return P$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P$(t,e)}}function Xbe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ybe(t){if(Array.isArray(t))return P$(t)}function P$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var rb=1e-4,$7=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},I7=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},EU=function(e,n){return function(r){var i=$7(e,n);return I7(i,r)}},Zbe=function(e,n){return function(r){var i=$7(e,n),s=[].concat(Hbe(i.map(function(a,o){return a*o}).slice(1)),[0]);return I7(s,r)}},$U=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],s=n[1],a=n[2],o=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,s=0,a=1,o=1;break;case"ease":i=.25,s=.1,a=.25,o=1;break;case"ease-in":i=.42,s=0,a=1,o=1;break;case"ease-out":i=.42,s=0,a=.58,o=1;break;case"ease-in-out":i=0,s=0,a=.58,o=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),f=Ube(c,4);i=f[0],s=f[1],a=f[2],o=f[3]}}}var h=EU(i,a),p=EU(s,o),g=Zbe(i,a),y=function(w){return w>1?1:w<0?0:w},b=function(w){for(var S=w>1?1:w,T=S,A=0;A<8;++A){var k=h(T)-S,E=g(T);if(Math.abs(k-S)<rb||E<rb)return p(T);T=y(T-k/E)}return p(T)};return b.isStepper=!1,b},Qbe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,s=i===void 0?8:i,a=e.dt,o=a===void 0?17:a,l=function(f,h,p){var g=-(f-h)*r,y=p*s,b=p+(g-y)*o/1e3,v=p*o/1e3+f;return Math.abs(v-h)<rb&&Math.abs(b)<rb?[h,0]:[v,b]};return l.isStepper=!0,l.dt=o,l},Jbe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return $U(i);case"spring":return Qbe();default:if(i.split("(")[0]==="cubic-bezier")return $U(i)}return typeof i=="function"?i:null};function sm(t){"@babel/helpers - typeof";return sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sm(t)}function IU(t){return nxe(t)||txe(t)||N7(t)||exe()}function exe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function txe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function nxe(t){if(Array.isArray(t))return F$(t)}function NU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NU(Object(n),!0).forEach(function(r){L$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function L$(t,e,n){return e=rxe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rxe(t){var e=ixe(t,"string");return sm(e)==="symbol"?e:String(e)}function ixe(t,e){if(sm(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(sm(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sxe(t,e){return lxe(t)||oxe(t,e)||N7(t,e)||axe()}function axe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N7(t,e){if(t){if(typeof t=="string")return F$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F$(t,e)}}function F$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function oxe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function lxe(t){if(Array.isArray(t))return t}var ib=function(e,n,r){return e+(n-e)*r},B$=function(e){var n=e.from,r=e.to;return n!==r},cxe=function t(e,n,r){var i=Cp(function(s,a){if(B$(a)){var o=e(a.from,a.to,a.velocity),l=sxe(o,2),c=l[0],f=l[1];return gr(gr({},a),{},{from:c,velocity:f})}return a},n);return r<1?Cp(function(s,a){return B$(a)?gr(gr({},a),{},{velocity:ib(a.velocity,i[s].velocity,r),from:ib(a.from,i[s].from,r)}):a},n):t(e,i,r-1)};const uxe=function(t,e,n,r,i){var s=zbe(t,e),a=s.reduce(function(v,w){return gr(gr({},v),{},L$({},w,[t[w],e[w]]))},{}),o=s.reduce(function(v,w){return gr(gr({},v),{},L$({},w,{from:t[w],velocity:0,to:e[w]}))},{}),l=-1,c,f,h=function(){return null},p=function(){return Cp(function(w,S){return S.from},o)},g=function(){return!Object.values(o).filter(B$).length},y=function(w){c||(c=w);var S=w-c,T=S/n.dt;o=cxe(n,o,T),i(gr(gr(gr({},t),e),p())),c=w,g()||(l=requestAnimationFrame(h))},b=function(w){f||(f=w);var S=(w-f)/r,T=Cp(function(k,E){return ib.apply(void 0,IU(E).concat([n(S)]))},a);if(i(gr(gr(gr({},t),e),T)),S<1)l=requestAnimationFrame(h);else{var A=Cp(function(k,E){return ib.apply(void 0,IU(E).concat([n(1)]))},a);i(gr(gr(gr({},t),e),A))}};return h=n.isStepper?y:b,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(l)}}};function Pf(t){"@babel/helpers - typeof";return Pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pf(t)}var fxe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function hxe(t,e){if(t==null)return{};var n=dxe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function dxe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function kA(t){return yxe(t)||gxe(t)||mxe(t)||pxe()}function pxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mxe(t,e){if(t){if(typeof t=="string")return z$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z$(t,e)}}function gxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function yxe(t){if(Array.isArray(t))return z$(t)}function z$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function OU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ys(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OU(Object(n),!0).forEach(function(r){op(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function op(t,e,n){return e=O7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bxe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,O7(r.key),r)}}function xxe(t,e,n){return e&&bxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function O7(t){var e=wxe(t,"string");return Pf(e)==="symbol"?e:String(e)}function wxe(t,e){if(Pf(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pf(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j$(t,e)}function j$(t,e){return j$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},j$(t,e)}function Cxe(t){var e=Txe();return function(){var r=sb(t),i;if(e){var s=sb(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return V$(this,i)}}function V$(t,e){if(e&&(Pf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U$(t)}function U$(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Txe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function sb(t){return sb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sb(t)}var ao=function(t){Sxe(n,t);var e=Cxe(n);function n(r,i){var s;vxe(this,n),s=e.call(this,r,i);var a=s.props,o=a.isActive,l=a.attributeName,c=a.from,f=a.to,h=a.steps,p=a.children,g=a.duration;if(s.handleStyleChange=s.handleStyleChange.bind(U$(s)),s.changeStyle=s.changeStyle.bind(U$(s)),!o||g<=0)return s.state={style:{}},typeof p=="function"&&(s.state={style:f}),V$(s);if(h&&h.length)s.state={style:h[0].style};else if(c){if(typeof p=="function")return s.state={style:c},V$(s);s.state={style:l?op({},l,c):c}}else s.state={style:{}};return s}return xxe(n,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,a=i.canBegin;this.mounted=!0,!(!s||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,a=s.isActive,o=s.canBegin,l=s.attributeName,c=s.shouldReAnimate,f=s.to,h=s.from,p=this.state.style;if(o){if(!a){var g={style:l?op({},l,f):f};this.state&&p&&(l&&p[l]!==f||!l&&p!==f)&&this.setState(g);return}if(!(Nbe(i.to,f)&&i.canBegin&&i.isActive)){var y=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var b=y||c?h:i.to;if(this.state&&p){var v={style:l?op({},l,b):b};(l&&p[l]!==b||!l&&p!==b)&&this.setState(v)}this.runAnimation(ys(ys({},this.props),{},{from:b,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,a=i.from,o=i.to,l=i.duration,c=i.easing,f=i.begin,h=i.onAnimationEnd,p=i.onAnimationStart,g=uxe(a,o,Jbe(c),l,this.changeStyle),y=function(){s.stopJSAnimation=g()};this.manager.start([p,f,y,l,h])}},{key:"runStepAnimation",value:function(i){var s=this,a=i.steps,o=i.begin,l=i.onAnimationStart,c=a[0],f=c.style,h=c.duration,p=h===void 0?0:h,g=function(b,v,w){if(w===0)return b;var S=v.duration,T=v.easing,A=T===void 0?"ease":T,k=v.style,E=v.properties,I=v.onAnimationEnd,N=w>0?a[w-1]:v,_=E||Object.keys(k);if(typeof A=="function"||A==="spring")return[].concat(kA(b),[s.runJSAnimation.bind(s,{from:N.style,to:k,duration:S,easing:A}),S]);var D=AU(_,S,A),O=ys(ys(ys({},N.style),k),{},{transition:D});return[].concat(kA(b),[O,S,I]).filter(jbe)};return this.manager.start([l].concat(kA(a.reduce(g,[f,Math.max(p,o)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=Lbe());var s=i.begin,a=i.duration,o=i.attributeName,l=i.to,c=i.easing,f=i.onAnimationStart,h=i.onAnimationEnd,p=i.steps,g=i.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof c=="function"||typeof g=="function"||c==="spring"){this.runJSAnimation(i);return}if(p.length>1){this.runStepAnimation(i);return}var b=o?op({},o,l):l,v=AU(Object.keys(b),a,c);y.start([f,s,ys(ys({},b),{},{transition:v}),a,h])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var o=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=hxe(i,fxe),c=q.Children.count(s),f=this.state.style;if(typeof s=="function")return s(f);if(!o||c===0||a<=0)return s;var h=function(g){var y=g.props,b=y.style,v=b===void 0?{}:b,w=y.className,S=q.cloneElement(g,ys(ys({},l),{},{style:ys(ys({},v),f),className:w}));return S};return c===1?h(q.Children.only(s)):J.createElement("div",null,q.Children.map(s,function(p){return h(p)}))}}]),n}(q.PureComponent);ao.displayName="Animate";ao.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ao.propTypes={from:_t.oneOfType([_t.object,_t.string]),to:_t.oneOfType([_t.object,_t.string]),attributeName:_t.string,duration:_t.number,begin:_t.number,easing:_t.oneOfType([_t.string,_t.func]),steps:_t.arrayOf(_t.shape({duration:_t.number.isRequired,style:_t.object.isRequired,easing:_t.oneOfType([_t.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),_t.func]),properties:_t.arrayOf("string"),onAnimationEnd:_t.func})),children:_t.oneOfType([_t.node,_t.func]),isActive:_t.bool,canBegin:_t.bool,onAnimationEnd:_t.func,shouldReAnimate:_t.bool,onAnimationStart:_t.func,onAnimationReStart:_t.func};function am(t){"@babel/helpers - typeof";return am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},am(t)}function ab(){return ab=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ab.apply(this,arguments)}function kxe(t,e){return Ixe(t)||$xe(t,e)||Exe(t,e)||Axe()}function Axe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Exe(t,e){if(t){if(typeof t=="string")return _U(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _U(t,e)}}function _U(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $xe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function Ixe(t){if(Array.isArray(t))return t}function RU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function DU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RU(Object(n),!0).forEach(function(r){Nxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nxe(t,e,n){return e=Oxe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oxe(t){var e=_xe(t,"string");return am(e)=="symbol"?e:e+""}function _xe(t,e){if(am(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(am(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MU=function(e,n,r,i,s){var a=Math.min(Math.abs(r)/2,Math.abs(i)/2),o=i>=0?1:-1,l=r>=0?1:-1,c=i>=0&&r>=0||i<0&&r<0?1:0,f;if(a>0&&s instanceof Array){for(var h=[0,0,0,0],p=0,g=4;p<g;p++)h[p]=s[p]>a?a:s[p];f="M".concat(e,",").concat(n+o*h[0]),h[0]>0&&(f+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(c,",").concat(e+l*h[0],",").concat(n)),f+="L ".concat(e+r-l*h[1],",").concat(n),h[1]>0&&(f+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(n+o*h[1])),f+="L ".concat(e+r,",").concat(n+i-o*h[2]),h[2]>0&&(f+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(c,`,
        `).concat(e+r-l*h[2],",").concat(n+i)),f+="L ".concat(e+l*h[3],",").concat(n+i),h[3]>0&&(f+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(n+i-o*h[3])),f+="Z"}else if(a>0&&s===+s&&s>0){var y=Math.min(a,s);f="M ".concat(e,",").concat(n+o*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(e+l*y,",").concat(n,`
            L `).concat(e+r-l*y,",").concat(n,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(e+r,",").concat(n+o*y,`
            L `).concat(e+r,",").concat(n+i-o*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(e+r-l*y,",").concat(n+i,`
            L `).concat(e+l*y,",").concat(n+i,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(e,",").concat(n+i-o*y," Z")}else f="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return f},Rxe=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,s=n.x,a=n.y,o=n.width,l=n.height;if(Math.abs(o)>0&&Math.abs(l)>0){var c=Math.min(s,s+o),f=Math.max(s,s+o),h=Math.min(a,a+l),p=Math.max(a,a+l);return r>=c&&r<=f&&i>=h&&i<=p}return!1},Dxe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},NO=function(e){var n=DU(DU({},Dxe),e),r=q.useRef(),i=q.useState(-1),s=kxe(i,2),a=s[0],o=s[1];q.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var A=r.current.getTotalLength();A&&o(A)}catch{}},[]);var l=n.x,c=n.y,f=n.width,h=n.height,p=n.radius,g=n.className,y=n.animationEasing,b=n.animationDuration,v=n.animationBegin,w=n.isAnimationActive,S=n.isUpdateAnimationActive;if(l!==+l||c!==+c||f!==+f||h!==+h||f===0||h===0)return null;var T=St("recharts-rectangle",g);return S?J.createElement(ao,{canBegin:a>0,from:{width:f,height:h,x:l,y:c},to:{width:f,height:h,x:l,y:c},duration:b,animationEasing:y,isActive:S},function(A){var k=A.width,E=A.height,I=A.x,N=A.y;return J.createElement(ao,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:b,isActive:w,easing:y},J.createElement("path",ab({},mt(n,!0),{className:T,d:MU(I,N,k,E,p),ref:r})))}):J.createElement("path",ab({},mt(n,!0),{className:T,d:MU(l,c,f,h,p)}))};function W$(){return W$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},W$.apply(this,arguments)}var OO=function(e){var n=e.cx,r=e.cy,i=e.r,s=e.className,a=St("recharts-dot",s);return n===+n&&r===+r&&i===+i?J.createElement("circle",W$({},mt(e,!1),$0(e),{className:a,cx:n,cy:r,r:i})):null};function om(t){"@babel/helpers - typeof";return om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},om(t)}var Mxe=["x","y","top","left","width","height","className"];function G$(){return G$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},G$.apply(this,arguments)}function PU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pxe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PU(Object(n),!0).forEach(function(r){Lxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lxe(t,e,n){return e=Fxe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fxe(t){var e=Bxe(t,"string");return om(e)=="symbol"?e:e+""}function Bxe(t,e){if(om(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(om(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zxe(t,e){if(t==null)return{};var n=jxe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function jxe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Vxe=function(e,n,r,i,s,a){return"M".concat(e,",").concat(s,"v").concat(i,"M").concat(a,",").concat(n,"h").concat(r)},Uxe=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,s=i===void 0?0:i,a=e.top,o=a===void 0?0:a,l=e.left,c=l===void 0?0:l,f=e.width,h=f===void 0?0:f,p=e.height,g=p===void 0?0:p,y=e.className,b=zxe(e,Mxe),v=Pxe({x:r,y:s,top:o,left:c,width:h,height:g},b);return!Ne(r)||!Ne(s)||!Ne(h)||!Ne(g)||!Ne(o)||!Ne(c)?null:J.createElement("path",G$({},mt(v,!0),{className:St("recharts-cross",y),d:Vxe(r,s,h,g,o,c)}))},AA,LU;function Wxe(){if(LU)return AA;LU=1;var t=ZH(),e=t(Object.getPrototypeOf,Object);return AA=e,AA}var EA,FU;function Gxe(){if(FU)return EA;FU=1;var t=po(),e=Wxe(),n=mo(),r="[object Object]",i=Function.prototype,s=Object.prototype,a=i.toString,o=s.hasOwnProperty,l=a.call(Object);function c(f){if(!n(f)||t(f)!=r)return!1;var h=e(f);if(h===null)return!0;var p=o.call(h,"constructor")&&h.constructor;return typeof p=="function"&&p instanceof p&&a.call(p)==l}return EA=c,EA}var qxe=Gxe();const Hxe=Nt(qxe);var $A,BU;function Kxe(){if(BU)return $A;BU=1;var t=po(),e=mo(),n="[object Boolean]";function r(i){return i===!0||i===!1||e(i)&&t(i)==n}return $A=r,$A}var Xxe=Kxe();const Yxe=Nt(Xxe);function lm(t){"@babel/helpers - typeof";return lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lm(t)}function ob(){return ob=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ob.apply(this,arguments)}function Zxe(t,e){return t1e(t)||e1e(t,e)||Jxe(t,e)||Qxe()}function Qxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jxe(t,e){if(t){if(typeof t=="string")return zU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zU(t,e)}}function zU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function e1e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function t1e(t){if(Array.isArray(t))return t}function jU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function VU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jU(Object(n),!0).forEach(function(r){n1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function n1e(t,e,n){return e=r1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r1e(t){var e=i1e(t,"string");return lm(e)=="symbol"?e:e+""}function i1e(t,e){if(lm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(lm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var UU=function(e,n,r,i,s){var a=r-i,o;return o="M ".concat(e,",").concat(n),o+="L ".concat(e+r,",").concat(n),o+="L ".concat(e+r-a/2,",").concat(n+s),o+="L ".concat(e+r-a/2-i,",").concat(n+s),o+="L ".concat(e,",").concat(n," Z"),o},s1e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},a1e=function(e){var n=VU(VU({},s1e),e),r=q.useRef(),i=q.useState(-1),s=Zxe(i,2),a=s[0],o=s[1];q.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var T=r.current.getTotalLength();T&&o(T)}catch{}},[]);var l=n.x,c=n.y,f=n.upperWidth,h=n.lowerWidth,p=n.height,g=n.className,y=n.animationEasing,b=n.animationDuration,v=n.animationBegin,w=n.isUpdateAnimationActive;if(l!==+l||c!==+c||f!==+f||h!==+h||p!==+p||f===0&&h===0||p===0)return null;var S=St("recharts-trapezoid",g);return w?J.createElement(ao,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:p,x:l,y:c},to:{upperWidth:f,lowerWidth:h,height:p,x:l,y:c},duration:b,animationEasing:y,isActive:w},function(T){var A=T.upperWidth,k=T.lowerWidth,E=T.height,I=T.x,N=T.y;return J.createElement(ao,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:b,easing:y},J.createElement("path",ob({},mt(n,!0),{className:S,d:UU(I,N,A,k,E),ref:r})))}):J.createElement("g",null,J.createElement("path",ob({},mt(n,!0),{className:S,d:UU(l,c,f,h,p)})))},o1e=["option","shapeType","propTransformer","activeClassName","isActive"];function cm(t){"@babel/helpers - typeof";return cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cm(t)}function l1e(t,e){if(t==null)return{};var n=c1e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function c1e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function WU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WU(Object(n),!0).forEach(function(r){u1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function u1e(t,e,n){return e=f1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f1e(t){var e=h1e(t,"string");return cm(e)=="symbol"?e:e+""}function h1e(t,e){if(cm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(cm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function d1e(t,e){return lb(lb({},e),t)}function p1e(t,e){return t==="symbols"}function GU(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return J.createElement(NO,n);case"trapezoid":return J.createElement(a1e,n);case"sector":return J.createElement(T7,n);case"symbols":if(p1e(e))return J.createElement(XN,n);break;default:return null}}function m1e(t){return q.isValidElement(t)?t.props:t}function g1e(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?d1e:r,s=t.activeClassName,a=s===void 0?"recharts-active-shape":s,o=t.isActive,l=l1e(t,o1e),c;if(q.isValidElement(e))c=q.cloneElement(e,lb(lb({},l),m1e(e)));else if(st(e))c=e(l);else if(Hxe(e)&&!Yxe(e)){var f=i(e,l);c=J.createElement(GU,{shapeType:n,elementProps:f})}else{var h=l;c=J.createElement(GU,{shapeType:n,elementProps:h})}return o?J.createElement(hn,{className:a},c):c}function Ex(t,e){return e!=null&&"trapezoids"in t.props}function $x(t,e){return e!=null&&"sectors"in t.props}function um(t,e){return e!=null&&"points"in t.props}function y1e(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,s=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&s}function v1e(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function b1e(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function x1e(t,e){var n;return Ex(t,e)?n=y1e:$x(t,e)?n=v1e:um(t,e)&&(n=b1e),n}function w1e(t,e){var n;return Ex(t,e)?n="trapezoids":$x(t,e)?n="sectors":um(t,e)&&(n="points"),n}function S1e(t,e){if(Ex(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if($x(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return um(t,e)?e.payload:{}}function C1e(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=w1e(n,e),s=S1e(n,e),a=r.filter(function(l,c){var f=Hp(s,l),h=n.props[i].filter(function(y){var b=x1e(n,e);return b(y,e)}),p=n.props[i].indexOf(h[h.length-1]),g=c===p;return f&&g}),o=r.indexOf(a[a.length-1]);return o}var IA,qU;function T1e(){if(qU)return IA;qU=1;var t=Math.ceil,e=Math.max;function n(r,i,s,a){for(var o=-1,l=e(t((i-r)/(s||1)),0),c=Array(l);l--;)c[a?l:++o]=r,r+=s;return c}return IA=n,IA}var NA,HU;function _7(){if(HU)return NA;HU=1;var t=d8(),e=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-1/0){var s=i<0?-1:1;return s*n}return i===i?i:0}return NA=r,NA}var OA,KU;function k1e(){if(KU)return OA;KU=1;var t=T1e(),e=gx(),n=_7();function r(i){return function(s,a,o){return o&&typeof o!="number"&&e(s,a,o)&&(a=o=void 0),s=n(s),a===void 0?(a=s,s=0):a=n(a),o=o===void 0?s<a?1:-1:n(o),t(s,a,o,i)}}return OA=r,OA}var _A,XU;function A1e(){if(XU)return _A;XU=1;var t=k1e(),e=t();return _A=e,_A}var E1e=A1e();const cb=Nt(E1e);function fm(t){"@babel/helpers - typeof";return fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fm(t)}function YU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ZU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YU(Object(n),!0).forEach(function(r){R7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function R7(t,e,n){return e=$1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $1e(t){var e=I1e(t,"string");return fm(e)=="symbol"?e:e+""}function I1e(t,e){if(fm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(fm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var N1e=["Webkit","Moz","O","ms"],O1e=function(e,n){var r=e.replace(/(\w)/,function(s){return s.toUpperCase()}),i=N1e.reduce(function(s,a){return ZU(ZU({},s),{},R7({},a+r,n))},{});return i[e]=n,i};function Lf(t){"@babel/helpers - typeof";return Lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lf(t)}function ub(){return ub=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ub.apply(this,arguments)}function QU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function RA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QU(Object(n),!0).forEach(function(r){Ai(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function JU(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,M7(r.key),r)}}function R1e(t,e,n){return e&&JU(t.prototype,e),n&&JU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function D1e(t,e,n){return e=fb(e),M1e(t,D7()?Reflect.construct(e,n||[],fb(t).constructor):e.apply(t,n))}function M1e(t,e){if(e&&(Lf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P1e(t)}function P1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function D7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(D7=function(){return!!t})()}function fb(t){return fb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fb(t)}function L1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&q$(t,e)}function q$(t,e){return q$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},q$(t,e)}function Ai(t,e,n){return e=M7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M7(t){var e=F1e(t,"string");return Lf(e)=="symbol"?e:e+""}function F1e(t,e){if(Lf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var B1e=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,s=e.x,a=e.width,o=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,c=xp().domain(cb(0,l)).range([s,s+a-o]),f=c.domain().map(function(h){return c(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(r),endX:c(i),scale:c,scaleValues:f}},eW=function(e){return e.changedTouches&&!!e.changedTouches.length},Ff=function(t){function e(n){var r;return _1e(this,e),r=D1e(this,e,[n]),Ai(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),Ai(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),Ai(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,s=i.endIndex,a=i.onDragEnd,o=i.startIndex;a==null||a({endIndex:s,startIndex:o})}),r.detachDragEndListener()}),Ai(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Ai(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Ai(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Ai(r,"handleSlideDragStart",function(i){var s=eW(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return L1e(e,t),R1e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,s=r.endX,a=this.state.scaleValues,o=this.props,l=o.gap,c=o.data,f=c.length-1,h=Math.min(i,s),p=Math.max(i,s),g=e.getIndexInRange(a,h),y=e.getIndexInRange(a,p);return{startIndex:g-g%l,endIndex:y===f?f:y-y%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,s=i.data,a=i.tickFormatter,o=i.dataKey,l=Ri(s[r],o,r);return st(a)?a(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,s=i.slideMoveStartX,a=i.startX,o=i.endX,l=this.props,c=l.x,f=l.width,h=l.travellerWidth,p=l.startIndex,g=l.endIndex,y=l.onChange,b=r.pageX-s;b>0?b=Math.min(b,c+f-h-o,c+f-h-a):b<0&&(b=Math.max(b,c-a,c-o));var v=this.getIndex({startX:a+b,endX:o+b});(v.startIndex!==p||v.endIndex!==g)&&y&&y(v),this.setState({startX:a+b,endX:o+b,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var s=eW(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,s=i.brushMoveStartX,a=i.movingTravellerId,o=i.endX,l=i.startX,c=this.state[a],f=this.props,h=f.x,p=f.width,g=f.travellerWidth,y=f.onChange,b=f.gap,v=f.data,w={startX:this.state.startX,endX:this.state.endX},S=r.pageX-s;S>0?S=Math.min(S,h+p-g-c):S<0&&(S=Math.max(S,h-c)),w[a]=c+S;var T=this.getIndex(w),A=T.startIndex,k=T.endIndex,E=function(){var N=v.length-1;return a==="startX"&&(o>l?A%b===0:k%b===0)||o<l&&k===N||a==="endX"&&(o>l?k%b===0:A%b===0)||o>l&&k===N};this.setState(Ai(Ai({},a,c+S),"brushMoveStartX",r.pageX),function(){y&&E()&&y(T)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var s=this,a=this.state,o=a.scaleValues,l=a.startX,c=a.endX,f=this.state[i],h=o.indexOf(f);if(h!==-1){var p=h+r;if(!(p===-1||p>=o.length)){var g=o[p];i==="startX"&&g>=c||i==="endX"&&g<=l||this.setState(Ai({},i,g),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,o=r.height,l=r.fill,c=r.stroke;return J.createElement("rect",{stroke:c,fill:l,x:i,y:s,width:a,height:o})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,o=r.height,l=r.data,c=r.children,f=r.padding,h=q.Children.only(c);return h?J.cloneElement(h,{x:i,y:s,width:a,height:o,margin:f,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var s,a,o=this,l=this.props,c=l.y,f=l.travellerWidth,h=l.height,p=l.traveller,g=l.ariaLabel,y=l.data,b=l.startIndex,v=l.endIndex,w=Math.max(r,this.props.x),S=RA(RA({},mt(this.props,!1)),{},{x:w,y:c,width:f,height:h}),T=g||"Min value: ".concat((s=y[b])===null||s===void 0?void 0:s.name,", Max value: ").concat((a=y[v])===null||a===void 0?void 0:a.name);return J.createElement(hn,{tabIndex:0,role:"slider","aria-label":T,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(k){["ArrowLeft","ArrowRight"].includes(k.key)&&(k.preventDefault(),k.stopPropagation(),o.handleTravellerMoveKeyboard(k.key==="ArrowRight"?1:-1,i))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(p,S))}},{key:"renderSlide",value:function(r,i){var s=this.props,a=s.y,o=s.height,l=s.stroke,c=s.travellerWidth,f=Math.min(r,i)+c,h=Math.max(Math.abs(i-r)-c,0);return J.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:f,y:a,width:h,height:o})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,s=r.endIndex,a=r.y,o=r.height,l=r.travellerWidth,c=r.stroke,f=this.state,h=f.startX,p=f.endX,g=5,y={pointerEvents:"none",fill:c};return J.createElement(hn,{className:"recharts-brush-texts"},J.createElement(z0,ub({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,p)-g,y:a+o/2},y),this.getTextOfTick(i)),J.createElement(z0,ub({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,p)+l+g,y:a+o/2},y),this.getTextOfTick(s)))}},{key:"render",value:function(){var r=this.props,i=r.data,s=r.className,a=r.children,o=r.x,l=r.y,c=r.width,f=r.height,h=r.alwaysShowText,p=this.state,g=p.startX,y=p.endX,b=p.isTextActive,v=p.isSlideMoving,w=p.isTravellerMoving,S=p.isTravellerFocused;if(!i||!i.length||!Ne(o)||!Ne(l)||!Ne(c)||!Ne(f)||c<=0||f<=0)return null;var T=St("recharts-brush",s),A=J.Children.count(a)===1,k=O1e("userSelect","none");return J.createElement(hn,{className:T,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:k},this.renderBackground(),A&&this.renderPanorama(),this.renderSlide(g,y),this.renderTravellerLayer(g,"startX"),this.renderTravellerLayer(y,"endX"),(b||v||w||S||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,s=r.y,a=r.width,o=r.height,l=r.stroke,c=Math.floor(s+o/2)-1;return J.createElement(J.Fragment,null,J.createElement("rect",{x:i,y:s,width:a,height:o,fill:l,stroke:"none"}),J.createElement("line",{x1:i+1,y1:c,x2:i+a-1,y2:c,fill:"none",stroke:"#fff"}),J.createElement("line",{x1:i+1,y1:c+2,x2:i+a-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var s;return J.isValidElement(r)?s=J.cloneElement(r,i):st(r)?s=r(i):s=e.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(r,i){var s=r.data,a=r.width,o=r.x,l=r.travellerWidth,c=r.updateId,f=r.startIndex,h=r.endIndex;if(s!==i.prevData||c!==i.prevUpdateId)return RA({prevData:s,prevTravellerWidth:l,prevUpdateId:c,prevX:o,prevWidth:a},s&&s.length?B1e({data:s,width:a,x:o,travellerWidth:l,startIndex:f,endIndex:h}):{scale:null,scaleValues:null});if(i.scale&&(a!==i.prevWidth||o!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([o,o+a-l]);var p=i.scale.domain().map(function(g){return i.scale(g)});return{prevData:s,prevTravellerWidth:l,prevUpdateId:c,prevX:o,prevWidth:a,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(r,i){for(var s=r.length,a=0,o=s-1;o-a>1;){var l=Math.floor((a+o)/2);r[l]>i?o=l:a=l}return i>=r[o]?o:a}}])}(q.PureComponent);Ai(Ff,"displayName","Brush");Ai(Ff,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var DA,tW;function z1e(){if(tW)return DA;tW=1;var t=nO();function e(n,r){var i;return t(n,function(s,a,o){return i=r(s,a,o),!i}),!!i}return DA=e,DA}var MA,nW;function j1e(){if(nW)return MA;nW=1;var t=WH(),e=xl(),n=z1e(),r=gi(),i=gx();function s(a,o,l){var c=r(a)?t:n;return l&&i(a,o,l)&&(o=void 0),c(a,e(o,3))}return MA=s,MA}var V1e=j1e();const U1e=Nt(V1e);var na=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},PA,rW;function W1e(){if(rW)return PA;rW=1;var t=l8();function e(n,r,i){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return PA=e,PA}var LA,iW;function G1e(){if(iW)return LA;iW=1;var t=W1e(),e=a8(),n=xl();function r(i,s){var a={};return s=n(s,3),e(i,function(o,l,c){t(a,l,s(o,l,c))}),a}return LA=r,LA}var q1e=G1e();const H1e=Nt(q1e);var FA,sW;function K1e(){if(sW)return FA;sW=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(!n(e[r],r,e))return!1;return!0}return FA=t,FA}var BA,aW;function X1e(){if(aW)return BA;aW=1;var t=nO();function e(n,r){var i=!0;return t(n,function(s,a,o){return i=!!r(s,a,o),i}),i}return BA=e,BA}var zA,oW;function Y1e(){if(oW)return zA;oW=1;var t=K1e(),e=X1e(),n=xl(),r=gi(),i=gx();function s(a,o,l){var c=r(a)?t:e;return l&&i(a,o,l)&&(o=void 0),c(a,n(o,3))}return zA=s,zA}var Z1e=Y1e();const P7=Nt(Z1e);var Q1e=["x","y"];function hm(t){"@babel/helpers - typeof";return hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hm(t)}function H$(){return H$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},H$.apply(this,arguments)}function lW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lW(Object(n),!0).forEach(function(r){J1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function J1e(t,e,n){return e=ewe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ewe(t){var e=twe(t,"string");return hm(e)=="symbol"?e:e+""}function twe(t,e){if(hm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nwe(t,e){if(t==null)return{};var n=rwe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rwe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function iwe(t,e){var n=t.x,r=t.y,i=nwe(t,Q1e),s="".concat(n),a=parseInt(s,10),o="".concat(r),l=parseInt(o,10),c="".concat(e.height||i.height),f=parseInt(c,10),h="".concat(e.width||i.width),p=parseInt(h,10);return Zd(Zd(Zd(Zd(Zd({},e),i),a?{x:a}:{}),l?{y:l}:{}),{},{height:f,width:p,name:e.name,radius:e.radius})}function cW(t){return J.createElement(g1e,H$({shapeType:"rectangle",propTransformer:iwe,activeClassName:"recharts-active-bar"},t))}var swe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var s=typeof r=="number";return s?e(r,i):(s||_c(),n)}},awe=["value","background"],L7;function Bf(t){"@babel/helpers - typeof";return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bf(t)}function owe(t,e){if(t==null)return{};var n=lwe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function lwe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function hb(){return hb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hb.apply(this,arguments)}function uW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uW(Object(n),!0).forEach(function(r){Jo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fW(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,B7(r.key),r)}}function uwe(t,e,n){return e&&fW(t.prototype,e),n&&fW(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function fwe(t,e,n){return e=db(e),hwe(t,F7()?Reflect.construct(e,n||[],db(t).constructor):e.apply(t,n))}function hwe(t,e){if(e&&(Bf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dwe(t)}function dwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function F7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(F7=function(){return!!t})()}function db(t){return db=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},db(t)}function pwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K$(t,e)}function K$(t,e){return K$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},K$(t,e)}function Jo(t,e,n){return e=B7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B7(t){var e=mwe(t,"string");return Bf(e)=="symbol"?e:e+""}function mwe(t,e){if(Bf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Vm=function(t){function e(){var n;cwe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=fwe(this,e,[].concat(i)),Jo(n,"state",{isAnimationFinished:!1}),Jo(n,"id",Pm("recharts-bar-")),Jo(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),a&&a()}),Jo(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),a&&a()}),n}return pwe(e,t),uwe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,s=this.props,a=s.shape,o=s.dataKey,l=s.activeIndex,c=s.activeBar,f=mt(this.props,!1);return r&&r.map(function(h,p){var g=p===l,y=g?c:a,b=Dn(Dn(Dn({},f),h),{},{isActive:g,option:y,index:p,dataKey:o,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return J.createElement(hn,hb({className:"recharts-bar-rectangle"},I0(i.props,h,p),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(p)}),J.createElement(cW,b))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,s=i.data,a=i.layout,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,f=i.animationEasing,h=i.animationId,p=this.state.prevData;return J.createElement(ao,{begin:l,duration:c,isActive:o,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var y=g.t,b=s.map(function(v,w){var S=p&&p[w];if(S){var T=Ji(S.x,v.x),A=Ji(S.y,v.y),k=Ji(S.width,v.width),E=Ji(S.height,v.height);return Dn(Dn({},v),{},{x:T(y),y:A(y),width:k(y),height:E(y)})}if(a==="horizontal"){var I=Ji(0,v.height),N=I(y);return Dn(Dn({},v),{},{y:v.y+v.height-N,height:N})}var _=Ji(0,v.width),D=_(y);return Dn(Dn({},v),{},{width:D})});return J.createElement(hn,null,r.renderRectanglesStatically(b))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,s=r.isAnimationActive,a=this.state.prevData;return s&&i&&i.length&&(!a||!Hp(a,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,s=i.data,a=i.dataKey,o=i.activeIndex,l=mt(this.props.background,!1);return s.map(function(c,f){c.value;var h=c.background,p=owe(c,awe);if(!h)return null;var g=Dn(Dn(Dn(Dn(Dn({},p),{},{fill:"#eee"},h),l),I0(r.props,c,f)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:a,index:f,className:"recharts-bar-background-rectangle"});return J.createElement(cW,hb({key:"background-bar-".concat(f),option:r.props.background,isActive:f===o},g))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.data,o=s.xAxis,l=s.yAxis,c=s.layout,f=s.children,h=Es(f,Ax);if(!h)return null;var p=c==="vertical"?a[0].height/2:a[0].width/2,g=function(v,w){var S=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:S,errorVal:Ri(v,w)}},y={clipPath:r?"url(#clipPath-".concat(i,")"):null};return J.createElement(hn,y,h.map(function(b){return J.cloneElement(b,{key:"error-bar-".concat(i,"-").concat(b.props.dataKey),data:a,xAxis:o,yAxis:l,layout:c,offset:p,dataPointFormatter:g})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,s=r.data,a=r.className,o=r.xAxis,l=r.yAxis,c=r.left,f=r.top,h=r.width,p=r.height,g=r.isAnimationActive,y=r.background,b=r.id;if(i||!s||!s.length)return null;var v=this.state.isAnimationFinished,w=St("recharts-bar",a),S=o&&o.allowDataOverflow,T=l&&l.allowDataOverflow,A=S||T,k=yt(b)?this.id:b;return J.createElement(hn,{className:w},S||T?J.createElement("defs",null,J.createElement("clipPath",{id:"clipPath-".concat(k)},J.createElement("rect",{x:S?c:c-h/2,y:T?f:f-p/2,width:S?h:h*2,height:T?p:p*2}))):null,J.createElement(hn,{className:"recharts-bar-rectangles",clipPath:A?"url(#clipPath-".concat(k,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(A,k),(!g||v)&&il.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(q.PureComponent);L7=Vm;Jo(Vm,"displayName","Bar");Jo(Vm,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!gh.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Jo(Vm,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,s=t.xAxis,a=t.yAxis,o=t.xAxisTicks,l=t.yAxisTicks,c=t.stackedData,f=t.dataStartIndex,h=t.displayedData,p=t.offset,g=Dve(r,n);if(!g)return null;var y=e.layout,b=n.type.defaultProps,v=b!==void 0?Dn(Dn({},b),n.props):n.props,w=v.dataKey,S=v.children,T=v.minPointSize,A=y==="horizontal"?a:s,k=c?A.scale.domain():null,E=Vve({numericAxis:A}),I=Es(S,m8),N=h.map(function(_,D){var O,P,z,W,U,R;c?O=Mve(c[f+D],k):(O=Ri(_,w),Array.isArray(O)||(O=[E,O]));var F=swe(T,L7.defaultProps.minPointSize)(O[1],D);if(y==="horizontal"){var B,K=[a.scale(O[0]),a.scale(O[1])],L=K[0],H=K[1];P=KV({axis:s,ticks:o,bandSize:i,offset:g.offset,entry:_,index:D}),z=(B=H??L)!==null&&B!==void 0?B:void 0,W=g.size;var X=L-H;if(U=Number.isNaN(X)?0:X,R={x:P,y:a.y,width:W,height:a.height},Math.abs(F)>0&&Math.abs(U)<Math.abs(F)){var Y=ks(U||F)*(Math.abs(F)-Math.abs(U));z-=Y,U+=Y}}else{var ie=[s.scale(O[0]),s.scale(O[1])],pe=ie[0],ve=ie[1];if(P=pe,z=KV({axis:a,ticks:l,bandSize:i,offset:g.offset,entry:_,index:D}),W=ve-pe,U=g.size,R={x:s.x,y:z,width:s.width,height:U},Math.abs(F)>0&&Math.abs(W)<Math.abs(F)){var ke=ks(W||F)*(Math.abs(F)-Math.abs(W));W+=ke}}return Dn(Dn(Dn({},_),{},{x:P,y:z,width:W,height:U,value:c?O:O[1],payload:_,background:R},I&&I[D]&&I[D].props),{},{tooltipPayload:[w7(n,_)],tooltipPosition:{x:P+W/2,y:z+U/2}})});return Dn({data:N,layout:y},p)});function dm(t){"@babel/helpers - typeof";return dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dm(t)}function gwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hW(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,z7(r.key),r)}}function ywe(t,e,n){return e&&hW(t.prototype,e),n&&hW(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function dW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ws(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dW(Object(n),!0).forEach(function(r){Ix(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ix(t,e,n){return e=z7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z7(t){var e=vwe(t,"string");return dm(e)=="symbol"?e:e+""}function vwe(t,e){if(dm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(dm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bwe=function(e,n,r,i,s){var a=e.width,o=e.height,l=e.layout,c=e.children,f=Object.keys(n),h={left:r.left,leftMirror:r.left,right:a-r.right,rightMirror:a-r.right,top:r.top,topMirror:r.top,bottom:o-r.bottom,bottomMirror:o-r.bottom},p=!!Ei(c,Vm);return f.reduce(function(g,y){var b=n[y],v=b.orientation,w=b.domain,S=b.padding,T=S===void 0?{}:S,A=b.mirror,k=b.reversed,E="".concat(v).concat(A?"Mirror":""),I,N,_,D,O;if(b.type==="number"&&(b.padding==="gap"||b.padding==="no-gap")){var P=w[1]-w[0],z=1/0,W=b.categoricalDomain.sort(yue);if(W.forEach(function(ie,pe){pe>0&&(z=Math.min((ie||0)-(W[pe-1]||0),z))}),Number.isFinite(z)){var U=z/P,R=b.layout==="vertical"?r.height:r.width;if(b.padding==="gap"&&(I=U*R/2),b.padding==="no-gap"){var F=Nc(e.barCategoryGap,U*R),B=U*R/2;I=B-F-(B-F)/R*F}}}i==="xAxis"?N=[r.left+(T.left||0)+(I||0),r.left+r.width-(T.right||0)-(I||0)]:i==="yAxis"?N=l==="horizontal"?[r.top+r.height-(T.bottom||0),r.top+(T.top||0)]:[r.top+(T.top||0)+(I||0),r.top+r.height-(T.bottom||0)-(I||0)]:N=b.range,k&&(N=[N[1],N[0]]);var K=_ve(b,s,p),L=K.scale,H=K.realScaleType;L.domain(w).range(N),Rve(L);var X=jve(L,ws(ws({},b),{},{realScaleType:H}));i==="xAxis"?(O=v==="top"&&!A||v==="bottom"&&A,_=r.left,D=h[E]-O*b.height):i==="yAxis"&&(O=v==="left"&&!A||v==="right"&&A,_=h[E]-O*b.width,D=r.top);var Y=ws(ws(ws({},b),X),{},{realScaleType:H,x:_,y:D,scale:L,width:i==="xAxis"?r.width:b.width,height:i==="yAxis"?r.height:b.height});return Y.bandSize=eb(Y,X),!b.hide&&i==="xAxis"?h[E]+=(O?-1:1)*Y.height:b.hide||(h[E]+=(O?-1:1)*Y.width),ws(ws({},g),{},Ix({},y,Y))},{})},j7=function(e,n){var r=e.x,i=e.y,s=n.x,a=n.y;return{x:Math.min(r,s),y:Math.min(i,a),width:Math.abs(s-r),height:Math.abs(a-i)}},xwe=function(e){var n=e.x1,r=e.y1,i=e.x2,s=e.y2;return j7({x:n,y:r},{x:i,y:s})},V7=function(){function t(e){gwe(this,t),this.scale=e}return ywe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,s=r.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+a}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(n)+o}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],s=r[r.length-1];return i<=s?n>=i&&n<=s:n>=s&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();Ix(V7,"EPS",1e-4);var _O=function(e){var n=Object.keys(e).reduce(function(r,i){return ws(ws({},r),{},Ix({},i,V7.create(e[i])))},{});return ws(ws({},n),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.bandAware,o=s.position;return H1e(i,function(l,c){return n[c].apply(l,{bandAware:a,position:o})})},isInRange:function(i){return P7(i,function(s,a){return n[a].isInRange(s)})}})};function wwe(t){return(t%180+180)%180}var Swe=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=wwe(i),a=s*Math.PI/180,o=Math.atan(r/n),l=a>o&&a<Math.PI-o?r/Math.sin(a):n/Math.cos(a);return Math.abs(l)},jA,pW;function Cwe(){if(pW)return jA;pW=1;var t=xl(),e=Lm(),n=px();function r(i){return function(s,a,o){var l=Object(s);if(!e(s)){var c=t(a,3);s=n(s),a=function(h){return c(l[h],h,l)}}var f=i(s,a,o);return f>-1?l[c?s[f]:f]:void 0}}return jA=r,jA}var VA,mW;function Twe(){if(mW)return VA;mW=1;var t=_7();function e(n){var r=t(n),i=r%1;return r===r?i?r-i:r:0}return VA=e,VA}var UA,gW;function kwe(){if(gW)return UA;gW=1;var t=t8(),e=xl(),n=Twe(),r=Math.max;function i(s,a,o){var l=s==null?0:s.length;if(!l)return-1;var c=o==null?0:n(o);return c<0&&(c=r(l+c,0)),t(s,e(a,3),c)}return UA=i,UA}var WA,yW;function Awe(){if(yW)return WA;yW=1;var t=Cwe(),e=kwe(),n=t(e);return WA=n,WA}var Ewe=Awe();const $we=Nt(Ewe);var Iwe=yH();const Nwe=Nt(Iwe);var Owe=Nwe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),RO=q.createContext(void 0),DO=q.createContext(void 0),U7=q.createContext(void 0),W7=q.createContext({}),G7=q.createContext(void 0),q7=q.createContext(0),H7=q.createContext(0),vW=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,s=n.offset,a=e.clipPathId,o=e.children,l=e.width,c=e.height,f=Owe(s);return J.createElement(RO.Provider,{value:r},J.createElement(DO.Provider,{value:i},J.createElement(W7.Provider,{value:s},J.createElement(U7.Provider,{value:f},J.createElement(G7.Provider,{value:a},J.createElement(q7.Provider,{value:c},J.createElement(H7.Provider,{value:l},o)))))))},_we=function(){return q.useContext(G7)},K7=function(e){var n=q.useContext(RO);n==null&&_c();var r=n[e];return r==null&&_c(),r},Rwe=function(){var e=q.useContext(RO);return Yo(e)},Dwe=function(){var e=q.useContext(DO),n=$we(e,function(r){return P7(r.domain,Number.isFinite)});return n||Yo(e)},X7=function(e){var n=q.useContext(DO);n==null&&_c();var r=n[e];return r==null&&_c(),r},Mwe=function(){var e=q.useContext(U7);return e},Pwe=function(){return q.useContext(W7)},MO=function(){return q.useContext(H7)},PO=function(){return q.useContext(q7)};function zf(t){"@babel/helpers - typeof";return zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zf(t)}function Lwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fwe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Z7(r.key),r)}}function Bwe(t,e,n){return e&&Fwe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function zwe(t,e,n){return e=pb(e),jwe(t,Y7()?Reflect.construct(e,n||[],pb(t).constructor):e.apply(t,n))}function jwe(t,e){if(e&&(zf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vwe(t)}function Vwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Y7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y7=function(){return!!t})()}function pb(t){return pb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pb(t)}function Uwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&X$(t,e)}function X$(t,e){return X$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},X$(t,e)}function bW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bW(Object(n),!0).forEach(function(r){LO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LO(t,e,n){return e=Z7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z7(t){var e=Wwe(t,"string");return zf(e)=="symbol"?e:e+""}function Wwe(t,e){if(zf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Gwe(t,e){return Xwe(t)||Kwe(t,e)||Hwe(t,e)||qwe()}function qwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hwe(t,e){if(t){if(typeof t=="string")return wW(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wW(t,e)}}function wW(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Kwe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function Xwe(t){if(Array.isArray(t))return t}function Y$(){return Y$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Y$.apply(this,arguments)}var Ywe=function(e,n){var r;return J.isValidElement(e)?r=J.cloneElement(e,n):st(e)?r=e(n):r=J.createElement("line",Y$({},n,{className:"recharts-reference-line-line"})),r},Zwe=function(e,n,r,i,s,a,o,l,c){var f=s.x,h=s.y,p=s.width,g=s.height;if(r){var y=c.y,b=e.y.apply(y,{position:a});if(na(c,"discard")&&!e.y.isInRange(b))return null;var v=[{x:f+p,y:b},{x:f,y:b}];return l==="left"?v.reverse():v}if(n){var w=c.x,S=e.x.apply(w,{position:a});if(na(c,"discard")&&!e.x.isInRange(S))return null;var T=[{x:S,y:h+g},{x:S,y:h}];return o==="top"?T.reverse():T}if(i){var A=c.segment,k=A.map(function(E){return e.apply(E,{position:a})});return na(c,"discard")&&U1e(k,function(E){return!e.isInRange(E)})?null:k}return null};function Qwe(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,s=t.yAxisId,a=t.shape,o=t.className,l=t.alwaysShow,c=_we(),f=K7(i),h=X7(s),p=Mwe();if(!c||!p)return null;Qa(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=_O({x:f.scale,y:h.scale}),y=Zn(e),b=Zn(n),v=r&&r.length===2,w=Zwe(g,y,b,v,p,t.position,f.orientation,h.orientation,t);if(!w)return null;var S=Gwe(w,2),T=S[0],A=T.x,k=T.y,E=S[1],I=E.x,N=E.y,_=na(t,"hidden")?"url(#".concat(c,")"):void 0,D=xW(xW({clipPath:_},mt(t,!0)),{},{x1:A,y1:k,x2:I,y2:N});return J.createElement(hn,{className:St("recharts-reference-line",o)},Ywe(a,D),Dr.renderCallByParent(t,xwe({x1:A,y1:k,x2:I,y2:N})))}var FO=function(t){function e(){return Lwe(this,e),zwe(this,e,arguments)}return Uwe(e,t),Bwe(e,[{key:"render",value:function(){return J.createElement(Qwe,this.props)}}])}(J.Component);LO(FO,"displayName","ReferenceLine");LO(FO,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Z$(){return Z$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Z$.apply(this,arguments)}function jf(t){"@babel/helpers - typeof";return jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jf(t)}function SW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function CW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SW(Object(n),!0).forEach(function(r){Nx(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eSe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,J7(r.key),r)}}function tSe(t,e,n){return e&&eSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function nSe(t,e,n){return e=mb(e),rSe(t,Q7()?Reflect.construct(e,n||[],mb(t).constructor):e.apply(t,n))}function rSe(t,e){if(e&&(jf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iSe(t)}function iSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Q7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Q7=function(){return!!t})()}function mb(t){return mb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mb(t)}function sSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Q$(t,e)}function Q$(t,e){return Q$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Q$(t,e)}function Nx(t,e,n){return e=J7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function J7(t){var e=aSe(t,"string");return jf(e)=="symbol"?e:e+""}function aSe(t,e){if(jf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var oSe=function(e){var n=e.x,r=e.y,i=e.xAxis,s=e.yAxis,a=_O({x:i.scale,y:s.scale}),o=a.apply({x:n,y:r},{bandAware:!0});return na(e,"discard")&&!a.isInRange(o)?null:o},Ox=function(t){function e(){return Jwe(this,e),nSe(this,e,arguments)}return sSe(e,t),tSe(e,[{key:"render",value:function(){var r=this.props,i=r.x,s=r.y,a=r.r,o=r.alwaysShow,l=r.clipPathId,c=Zn(i),f=Zn(s);if(Qa(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!f)return null;var h=oSe(this.props);if(!h)return null;var p=h.x,g=h.y,y=this.props,b=y.shape,v=y.className,w=na(this.props,"hidden")?"url(#".concat(l,")"):void 0,S=CW(CW({clipPath:w},mt(this.props,!0)),{},{cx:p,cy:g});return J.createElement(hn,{className:St("recharts-reference-dot",v)},e.renderDot(b,S),Dr.renderCallByParent(this.props,{x:p-a,y:g-a,width:2*a,height:2*a}))}}])}(J.Component);Nx(Ox,"displayName","ReferenceDot");Nx(Ox,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Nx(Ox,"renderDot",function(t,e){var n;return J.isValidElement(t)?n=J.cloneElement(t,e):st(t)?n=t(e):n=J.createElement(OO,Z$({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function J$(){return J$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},J$.apply(this,arguments)}function Vf(t){"@babel/helpers - typeof";return Vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vf(t)}function TW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TW(Object(n),!0).forEach(function(r){_x(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cSe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,t9(r.key),r)}}function uSe(t,e,n){return e&&cSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function fSe(t,e,n){return e=gb(e),hSe(t,e9()?Reflect.construct(e,n||[],gb(t).constructor):e.apply(t,n))}function hSe(t,e){if(e&&(Vf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dSe(t)}function dSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e9=function(){return!!t})()}function gb(t){return gb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gb(t)}function pSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eI(t,e)}function eI(t,e){return eI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},eI(t,e)}function _x(t,e,n){return e=t9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t9(t){var e=mSe(t,"string");return Vf(e)=="symbol"?e:e+""}function mSe(t,e){if(Vf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var gSe=function(e,n,r,i,s){var a=s.x1,o=s.x2,l=s.y1,c=s.y2,f=s.xAxis,h=s.yAxis;if(!f||!h)return null;var p=_O({x:f.scale,y:h.scale}),g={x:e?p.x.apply(a,{position:"start"}):p.x.rangeMin,y:r?p.y.apply(l,{position:"start"}):p.y.rangeMin},y={x:n?p.x.apply(o,{position:"end"}):p.x.rangeMax,y:i?p.y.apply(c,{position:"end"}):p.y.rangeMax};return na(s,"discard")&&(!p.isInRange(g)||!p.isInRange(y))?null:j7(g,y)},Rx=function(t){function e(){return lSe(this,e),fSe(this,e,arguments)}return pSe(e,t),uSe(e,[{key:"render",value:function(){var r=this.props,i=r.x1,s=r.x2,a=r.y1,o=r.y2,l=r.className,c=r.alwaysShow,f=r.clipPathId;Qa(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=Zn(i),p=Zn(s),g=Zn(a),y=Zn(o),b=this.props.shape;if(!h&&!p&&!g&&!y&&!b)return null;var v=gSe(h,p,g,y,this.props);if(!v&&!b)return null;var w=na(this.props,"hidden")?"url(#".concat(f,")"):void 0;return J.createElement(hn,{className:St("recharts-reference-area",l)},e.renderRect(b,kW(kW({clipPath:w},mt(this.props,!0)),v)),Dr.renderCallByParent(this.props,v))}}])}(J.Component);_x(Rx,"displayName","ReferenceArea");_x(Rx,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});_x(Rx,"renderRect",function(t,e){var n;return J.isValidElement(t)?n=J.cloneElement(t,e):st(t)?n=t(e):n=J.createElement(NO,J$({},e,{className:"recharts-reference-area-rect"})),n});function n9(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function ySe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Swe(r,n)}function vSe(t,e,n){var r=n==="width",i=t.x,s=t.y,a=t.width,o=t.height;return e===1?{start:r?i:s,end:r?i+a:s+o}:{start:r?i+a:s+o,end:r?i:s}}function yb(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function bSe(t,e){return n9(t,e+1)}function xSe(t,e,n,r,i){for(var s=(r||[]).slice(),a=e.start,o=e.end,l=0,c=1,f=a,h=function(){var y=r==null?void 0:r[l];if(y===void 0)return{v:n9(r,c)};var b=l,v,w=function(){return v===void 0&&(v=n(y,b)),v},S=y.coordinate,T=l===0||yb(t,S,w,f,o);T||(l=0,f=a,c+=1),T&&(f=S+t*(w()/2+i),l+=c)},p;c<=s.length;)if(p=h(),p)return p.v;return[]}function pm(t){"@babel/helpers - typeof";return pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pm(t)}function AW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Or(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AW(Object(n),!0).forEach(function(r){wSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wSe(t,e,n){return e=SSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SSe(t){var e=CSe(t,"string");return pm(e)=="symbol"?e:e+""}function CSe(t,e){if(pm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TSe(t,e,n,r,i){for(var s=(r||[]).slice(),a=s.length,o=e.start,l=e.end,c=function(p){var g=s[p],y,b=function(){return y===void 0&&(y=n(g,p)),y};if(p===a-1){var v=t*(g.coordinate+t*b()/2-l);s[p]=g=Or(Or({},g),{},{tickCoord:v>0?g.coordinate-v*t:g.coordinate})}else s[p]=g=Or(Or({},g),{},{tickCoord:g.coordinate});var w=yb(t,g.tickCoord,b,o,l);w&&(l=g.tickCoord-t*(b()/2+i),s[p]=Or(Or({},g),{},{isShow:!0}))},f=a-1;f>=0;f--)c(f);return s}function kSe(t,e,n,r,i,s){var a=(r||[]).slice(),o=a.length,l=e.start,c=e.end;if(s){var f=r[o-1],h=n(f,o-1),p=t*(f.coordinate+t*h/2-c);a[o-1]=f=Or(Or({},f),{},{tickCoord:p>0?f.coordinate-p*t:f.coordinate});var g=yb(t,f.tickCoord,function(){return h},l,c);g&&(c=f.tickCoord-t*(h/2+i),a[o-1]=Or(Or({},f),{},{isShow:!0}))}for(var y=s?o-1:o,b=function(S){var T=a[S],A,k=function(){return A===void 0&&(A=n(T,S)),A};if(S===0){var E=t*(T.coordinate-t*k()/2-l);a[S]=T=Or(Or({},T),{},{tickCoord:E<0?T.coordinate-E*t:T.coordinate})}else a[S]=T=Or(Or({},T),{},{tickCoord:T.coordinate});var I=yb(t,T.tickCoord,k,l,c);I&&(l=T.tickCoord+t*(k()/2+i),a[S]=Or(Or({},T),{},{isShow:!0}))},v=0;v<y;v++)b(v);return a}function BO(t,e,n){var r=t.tick,i=t.ticks,s=t.viewBox,a=t.minTickGap,o=t.orientation,l=t.interval,c=t.tickFormatter,f=t.unit,h=t.angle;if(!i||!i.length||!r)return[];if(Ne(l)||gh.isSsr)return bSe(i,typeof l=="number"&&Ne(l)?l:0);var p=[],g=o==="top"||o==="bottom"?"width":"height",y=f&&g==="width"?bp(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},b=function(T,A){var k=st(c)?c(T.value,A):T.value;return g==="width"?ySe(bp(k,{fontSize:e,letterSpacing:n}),y,h):bp(k,{fontSize:e,letterSpacing:n})[g]},v=i.length>=2?ks(i[1].coordinate-i[0].coordinate):1,w=vSe(s,v,g);return l==="equidistantPreserveStart"?xSe(v,w,b,i,a):(l==="preserveStart"||l==="preserveStartEnd"?p=kSe(v,w,b,i,a,l==="preserveStartEnd"):p=TSe(v,w,b,i,a),p.filter(function(S){return S.isShow}))}var ASe=["viewBox"],ESe=["viewBox"],$Se=["ticks"];function Uf(t){"@babel/helpers - typeof";return Uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uf(t)}function df(){return df=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},df.apply(this,arguments)}function EW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ur(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EW(Object(n),!0).forEach(function(r){zO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GA(t,e){if(t==null)return{};var n=ISe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ISe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function NSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i9(r.key),r)}}function OSe(t,e,n){return e&&$W(t.prototype,e),n&&$W(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _Se(t,e,n){return e=vb(e),RSe(t,r9()?Reflect.construct(e,n||[],vb(t).constructor):e.apply(t,n))}function RSe(t,e){if(e&&(Uf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DSe(t)}function DSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r9=function(){return!!t})()}function vb(t){return vb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vb(t)}function MSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tI(t,e)}function tI(t,e){return tI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},tI(t,e)}function zO(t,e,n){return e=i9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i9(t){var e=PSe(t,"string");return Uf(e)=="symbol"?e:e+""}function PSe(t,e){if(Uf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Uf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var xh=function(t){function e(n){var r;return NSe(this,e),r=_Se(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return MSe(e,t),OSe(e,[{key:"shouldComponentUpdate",value:function(r,i){var s=r.viewBox,a=GA(r,ASe),o=this.props,l=o.viewBox,c=GA(o,ESe);return!gf(s,l)||!gf(a,c)||!gf(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,s=i.x,a=i.y,o=i.width,l=i.height,c=i.orientation,f=i.tickSize,h=i.mirror,p=i.tickMargin,g,y,b,v,w,S,T=h?-1:1,A=r.tickSize||f,k=Ne(r.tickCoord)?r.tickCoord:r.coordinate;switch(c){case"top":g=y=r.coordinate,v=a+ +!h*l,b=v-T*A,S=b-T*p,w=k;break;case"left":b=v=r.coordinate,y=s+ +!h*o,g=y-T*A,w=g-T*p,S=k;break;case"right":b=v=r.coordinate,y=s+ +h*o,g=y+T*A,w=g+T*p,S=k;break;default:g=y=r.coordinate,v=a+ +h*l,b=v+T*A,S=b+T*p,w=k;break}return{line:{x1:g,y1:b,x2:y,y2:v},tick:{x:w,y:S}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,a;switch(i){case"left":a=s?"start":"end";break;case"right":a=s?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,a="end";switch(i){case"left":case"right":a="middle";break;case"top":a=s?"start":"end";break;default:a=s?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,o=r.height,l=r.orientation,c=r.mirror,f=r.axisLine,h=Ur(Ur(Ur({},mt(this.props,!1)),mt(f,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var p=+(l==="top"&&!c||l==="bottom"&&c);h=Ur(Ur({},h),{},{x1:i,y1:s+p*o,x2:i+a,y2:s+p*o})}else{var g=+(l==="left"&&!c||l==="right"&&c);h=Ur(Ur({},h),{},{x1:i+g*a,y1:s,x2:i+g*a,y2:s+o})}return J.createElement("line",df({},h,{className:St("recharts-cartesian-axis-line",ss(f,"className"))}))}},{key:"renderTicks",value:function(r,i,s){var a=this,o=this.props,l=o.tickLine,c=o.stroke,f=o.tick,h=o.tickFormatter,p=o.unit,g=BO(Ur(Ur({},this.props),{},{ticks:r}),i,s),y=this.getTickTextAnchor(),b=this.getTickVerticalAnchor(),v=mt(this.props,!1),w=mt(f,!1),S=Ur(Ur({},v),{},{fill:"none"},mt(l,!1)),T=g.map(function(A,k){var E=a.getTickLineCoord(A),I=E.line,N=E.tick,_=Ur(Ur(Ur(Ur({textAnchor:y,verticalAnchor:b},v),{},{stroke:"none",fill:c},w),N),{},{index:k,payload:A,visibleTicksCount:g.length,tickFormatter:h});return J.createElement(hn,df({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},I0(a.props,A,k)),l&&J.createElement("line",df({},S,I,{className:St("recharts-cartesian-axis-tick-line",ss(l,"className"))})),f&&e.renderTickItem(f,_,"".concat(st(h)?h(A.value,k):A.value).concat(p||"")))});return J.createElement("g",{className:"recharts-cartesian-axis-ticks"},T)}},{key:"render",value:function(){var r=this,i=this.props,s=i.axisLine,a=i.width,o=i.height,l=i.ticksGenerator,c=i.className,f=i.hide;if(f)return null;var h=this.props,p=h.ticks,g=GA(h,$Se),y=p;return st(l)&&(y=p&&p.length>0?l(this.props):l(g)),a<=0||o<=0||!y||!y.length?null:J.createElement(hn,{className:St("recharts-cartesian-axis",c),ref:function(v){r.layerReference=v}},s&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),Dr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,s){var a;return J.isValidElement(r)?a=J.cloneElement(r,i):st(r)?a=r(i):a=J.createElement(z0,df({},i,{className:"recharts-cartesian-axis-tick-value"}),s),a}}])}(q.Component);zO(xh,"displayName","CartesianAxis");zO(xh,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var LSe=["x1","y1","x2","y2","key"],FSe=["offset"];function Rc(t){"@babel/helpers - typeof";return Rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rc(t)}function IW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IW(Object(n),!0).forEach(function(r){BSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BSe(t,e,n){return e=zSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zSe(t){var e=jSe(t,"string");return Rc(e)=="symbol"?e:e+""}function jSe(t,e){if(Rc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vc(){return vc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vc.apply(this,arguments)}function NW(t,e){if(t==null)return{};var n=VSe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function VSe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var USe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,s=e.y,a=e.width,o=e.height,l=e.ry;return J.createElement("rect",{x:i,y:s,ry:l,width:a,height:o,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function s9(t,e){var n;if(J.isValidElement(t))n=J.cloneElement(t,e);else if(st(t))n=t(e);else{var r=e.x1,i=e.y1,s=e.x2,a=e.y2,o=e.key,l=NW(e,LSe),c=mt(l,!1);c.offset;var f=NW(c,FSe);n=J.createElement("line",vc({},f,{x1:r,y1:i,x2:s,y2:a,fill:"none",key:o}))}return n}function WSe(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,s=t.horizontalPoints;if(!i||!s||!s.length)return null;var a=s.map(function(o,l){var c=Mr(Mr({},t),{},{x1:e,y1:o,x2:e+n,y2:o,key:"line-".concat(l),index:l});return s9(i,c)});return J.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function GSe(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,s=t.verticalPoints;if(!i||!s||!s.length)return null;var a=s.map(function(o,l){var c=Mr(Mr({},t),{},{x1:o,y1:e,x2:o,y2:e+n,key:"line-".concat(l),index:l});return s9(i,c)});return J.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function qSe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,s=t.width,a=t.height,o=t.horizontalPoints,l=t.horizontal,c=l===void 0?!0:l;if(!c||!e||!e.length)return null;var f=o.map(function(p){return Math.round(p+i-i)}).sort(function(p,g){return p-g});i!==f[0]&&f.unshift(0);var h=f.map(function(p,g){var y=!f[g+1],b=y?i+a-p:f[g+1]-p;if(b<=0)return null;var v=g%e.length;return J.createElement("rect",{key:"react-".concat(g),y:p,x:r,height:b,width:s,stroke:"none",fill:e[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return J.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function HSe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,s=t.x,a=t.y,o=t.width,l=t.height,c=t.verticalPoints;if(!n||!r||!r.length)return null;var f=c.map(function(p){return Math.round(p+s-s)}).sort(function(p,g){return p-g});s!==f[0]&&f.unshift(0);var h=f.map(function(p,g){var y=!f[g+1],b=y?s+o-p:f[g+1]-p;if(b<=0)return null;var v=g%r.length;return J.createElement("rect",{key:"react-".concat(g),x:p,y:a,width:b,height:l,stroke:"none",fill:r[v],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return J.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var KSe=function(e,n){var r=e.xAxis,i=e.width,s=e.height,a=e.offset;return b7(BO(Mr(Mr(Mr({},xh.defaultProps),r),{},{ticks:Ka(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),a.left,a.left+a.width,n)},XSe=function(e,n){var r=e.yAxis,i=e.width,s=e.height,a=e.offset;return b7(BO(Mr(Mr(Mr({},xh.defaultProps),r),{},{ticks:Ka(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),a.top,a.top+a.height,n)},Ju={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function a9(t){var e,n,r,i,s,a,o=MO(),l=PO(),c=Pwe(),f=Mr(Mr({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Ju.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Ju.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Ju.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Ju.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:Ju.vertical,verticalFill:(a=t.verticalFill)!==null&&a!==void 0?a:Ju.verticalFill,x:Ne(t.x)?t.x:c.left,y:Ne(t.y)?t.y:c.top,width:Ne(t.width)?t.width:c.width,height:Ne(t.height)?t.height:c.height}),h=f.x,p=f.y,g=f.width,y=f.height,b=f.syncWithTicks,v=f.horizontalValues,w=f.verticalValues,S=Rwe(),T=Dwe();if(!Ne(g)||g<=0||!Ne(y)||y<=0||!Ne(h)||h!==+h||!Ne(p)||p!==+p)return null;var A=f.verticalCoordinatesGenerator||KSe,k=f.horizontalCoordinatesGenerator||XSe,E=f.horizontalPoints,I=f.verticalPoints;if((!E||!E.length)&&st(k)){var N=v&&v.length,_=k({yAxis:T?Mr(Mr({},T),{},{ticks:N?v:T.ticks}):void 0,width:o,height:l,offset:c},N?!0:b);Qa(Array.isArray(_),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Rc(_),"]")),Array.isArray(_)&&(E=_)}if((!I||!I.length)&&st(A)){var D=w&&w.length,O=A({xAxis:S?Mr(Mr({},S),{},{ticks:D?w:S.ticks}):void 0,width:o,height:l,offset:c},D?!0:b);Qa(Array.isArray(O),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Rc(O),"]")),Array.isArray(O)&&(I=O)}return J.createElement("g",{className:"recharts-cartesian-grid"},J.createElement(USe,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),J.createElement(WSe,vc({},f,{offset:c,horizontalPoints:E,xAxis:S,yAxis:T})),J.createElement(GSe,vc({},f,{offset:c,verticalPoints:I,xAxis:S,yAxis:T})),J.createElement(qSe,vc({},f,{horizontalPoints:E})),J.createElement(HSe,vc({},f,{verticalPoints:I})))}a9.displayName="CartesianGrid";var YSe=["layout","type","stroke","connectNulls","isRange","ref"],ZSe=["key"],o9;function Wf(t){"@babel/helpers - typeof";return Wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wf(t)}function l9(t,e){if(t==null)return{};var n=QSe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function QSe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function bc(){return bc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bc.apply(this,arguments)}function OW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OW(Object(n),!0).forEach(function(r){Xs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function JSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u9(r.key),r)}}function eCe(t,e,n){return e&&_W(t.prototype,e),n&&_W(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function tCe(t,e,n){return e=bb(e),nCe(t,c9()?Reflect.construct(e,n||[],bb(t).constructor):e.apply(t,n))}function nCe(t,e){if(e&&(Wf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rCe(t)}function rCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(c9=function(){return!!t})()}function bb(t){return bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bb(t)}function iCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nI(t,e)}function nI(t,e){return nI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},nI(t,e)}function Xs(t,e,n){return e=u9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u9(t){var e=sCe(t,"string");return Wf(e)=="symbol"?e:e+""}function sCe(t,e){if(Wf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var oo=function(t){function e(){var n;JSe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=tCe(this,e,[].concat(i)),Xs(n,"state",{isAnimationFinished:!0}),Xs(n,"id",Pm("recharts-area-")),Xs(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),st(a)&&a()}),Xs(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),st(a)&&a()}),n}return iCe(e,t),eCe(e,[{key:"renderDots",value:function(r,i,s){var a=this.props.isAnimationActive,o=this.state.isAnimationFinished;if(a&&!o)return null;var l=this.props,c=l.dot,f=l.points,h=l.dataKey,p=mt(this.props,!1),g=mt(c,!0),y=f.map(function(v,w){var S=qo(qo(qo({key:"dot-".concat(w),r:3},p),g),{},{index:w,cx:v.x,cy:v.y,dataKey:h,value:v.value,payload:v.payload,points:f});return e.renderDotItem(c,S)}),b={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return J.createElement(hn,bc({className:"recharts-area-dots"},b),y)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,s=i.baseLine,a=i.points,o=i.strokeWidth,l=a[0].x,c=a[a.length-1].x,f=r*Math.abs(l-c),h=Qo(a.map(function(p){return p.y||0}));return Ne(s)&&typeof s=="number"?h=Math.max(s,h):s&&Array.isArray(s)&&s.length&&(h=Math.max(Qo(s.map(function(p){return p.y||0})),h)),Ne(h)?J.createElement("rect",{x:l<c?l:l-f,y:0,width:f,height:Math.floor(h+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,s=i.baseLine,a=i.points,o=i.strokeWidth,l=a[0].y,c=a[a.length-1].y,f=r*Math.abs(l-c),h=Qo(a.map(function(p){return p.x||0}));return Ne(s)&&typeof s=="number"?h=Math.max(s,h):s&&Array.isArray(s)&&s.length&&(h=Math.max(Qo(s.map(function(p){return p.x||0})),h)),Ne(h)?J.createElement("rect",{x:0,y:l<c?l:l-f,width:h+(o?parseInt("".concat(o),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,s,a){var o=this.props,l=o.layout,c=o.type,f=o.stroke,h=o.connectNulls,p=o.isRange;o.ref;var g=l9(o,YSe);return J.createElement(hn,{clipPath:s?"url(#clipPath-".concat(a,")"):null},J.createElement(Sp,bc({},mt(g,!0),{points:r,connectNulls:h,type:c,baseLine:i,layout:l,stroke:"none",className:"recharts-area-area"})),f!=="none"&&J.createElement(Sp,bc({},mt(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:h,fill:"none",points:r})),f!=="none"&&p&&J.createElement(Sp,bc({},mt(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:h,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var s=this,a=this.props,o=a.points,l=a.baseLine,c=a.isAnimationActive,f=a.animationBegin,h=a.animationDuration,p=a.animationEasing,g=a.animationId,y=this.state,b=y.prevPoints,v=y.prevBaseLine;return J.createElement(ao,{begin:f,duration:h,isActive:c,easing:p,from:{t:0},to:{t:1},key:"area-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(w){var S=w.t;if(b){var T=b.length/o.length,A=o.map(function(N,_){var D=Math.floor(_*T);if(b[D]){var O=b[D],P=Ji(O.x,N.x),z=Ji(O.y,N.y);return qo(qo({},N),{},{x:P(S),y:z(S)})}return N}),k;if(Ne(l)&&typeof l=="number"){var E=Ji(v,l);k=E(S)}else if(yt(l)||ph(l)){var I=Ji(v,0);k=I(S)}else k=l.map(function(N,_){var D=Math.floor(_*T);if(v[D]){var O=v[D],P=Ji(O.x,N.x),z=Ji(O.y,N.y);return qo(qo({},N),{},{x:P(S),y:z(S)})}return N});return s.renderAreaStatically(A,k,r,i)}return J.createElement(hn,null,J.createElement("defs",null,J.createElement("clipPath",{id:"animationClipPath-".concat(i)},s.renderClipRect(S))),J.createElement(hn,{clipPath:"url(#animationClipPath-".concat(i,")")},s.renderAreaStatically(o,l,r,i)))})}},{key:"renderArea",value:function(r,i){var s=this.props,a=s.points,o=s.baseLine,l=s.isAnimationActive,c=this.state,f=c.prevPoints,h=c.prevBaseLine,p=c.totalLength;return l&&a&&a.length&&(!f&&p>0||!Hp(f,a)||!Hp(h,o))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(a,o,r,i)}},{key:"render",value:function(){var r,i=this.props,s=i.hide,a=i.dot,o=i.points,l=i.className,c=i.top,f=i.left,h=i.xAxis,p=i.yAxis,g=i.width,y=i.height,b=i.isAnimationActive,v=i.id;if(s||!o||!o.length)return null;var w=this.state.isAnimationFinished,S=o.length===1,T=St("recharts-area",l),A=h&&h.allowDataOverflow,k=p&&p.allowDataOverflow,E=A||k,I=yt(v)?this.id:v,N=(r=mt(a,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},_=N.r,D=_===void 0?3:_,O=N.strokeWidth,P=O===void 0?2:O,z=Aue(a)?a:{},W=z.clipDot,U=W===void 0?!0:W,R=D*2+P;return J.createElement(hn,{className:T},A||k?J.createElement("defs",null,J.createElement("clipPath",{id:"clipPath-".concat(I)},J.createElement("rect",{x:A?f:f-g/2,y:k?c:c-y/2,width:A?g:g*2,height:k?y:y*2})),!U&&J.createElement("clipPath",{id:"clipPath-dots-".concat(I)},J.createElement("rect",{x:f-R/2,y:c-R/2,width:g+R,height:y+R}))):null,S?null:this.renderArea(E,I),(a||S)&&this.renderDots(E,U,I),(!b||w)&&il.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(q.PureComponent);o9=oo;Xs(oo,"displayName","Area");Xs(oo,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!gh.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Xs(oo,"getBaseValue",function(t,e,n,r){var i=t.layout,s=t.baseValue,a=e.props.baseValue,o=a??s;if(Ne(o)&&typeof o=="number")return o;var l=i==="horizontal"?r:n,c=l.scale.domain();if(l.type==="number"){var f=Math.max(c[0],c[1]),h=Math.min(c[0],c[1]);return o==="dataMin"?h:o==="dataMax"||f<0?f:Math.max(Math.min(c[0],c[1]),0)}return o==="dataMin"?c[0]:o==="dataMax"?c[1]:c[0]});Xs(oo,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,s=t.xAxisTicks,a=t.yAxisTicks,o=t.bandSize,l=t.dataKey,c=t.stackedData,f=t.dataStartIndex,h=t.displayedData,p=t.offset,g=e.layout,y=c&&c.length,b=o9.getBaseValue(e,n,r,i),v=g==="horizontal",w=!1,S=h.map(function(A,k){var E;y?E=c[f+k]:(E=Ri(A,l),Array.isArray(E)?w=!0:E=[b,E]);var I=E[1]==null||y&&Ri(A,l)==null;return v?{x:HV({axis:r,ticks:s,bandSize:o,entry:A,index:k}),y:I?null:i.scale(E[1]),value:E,payload:A}:{x:I?null:r.scale(E[1]),y:HV({axis:i,ticks:a,bandSize:o,entry:A,index:k}),value:E,payload:A}}),T;return y||w?T=S.map(function(A){var k=Array.isArray(A.value)?A.value[0]:null;return v?{x:A.x,y:k!=null&&A.y!=null?i.scale(k):null}:{x:k!=null?r.scale(k):null,y:A.y}}):T=v?i.scale(b):r.scale(b),qo({points:S,baseLine:T,layout:g,isRange:w},p)});Xs(oo,"renderDotItem",function(t,e){var n;if(J.isValidElement(t))n=J.cloneElement(t,e);else if(st(t))n=t(e);else{var r=St("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,s=l9(e,ZSe);n=J.createElement(OO,bc({},s,{key:i,className:r}))}return n});function Gf(t){"@babel/helpers - typeof";return Gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gf(t)}function aCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oCe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d9(r.key),r)}}function lCe(t,e,n){return e&&oCe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function cCe(t,e,n){return e=xb(e),uCe(t,f9()?Reflect.construct(e,n||[],xb(t).constructor):e.apply(t,n))}function uCe(t,e){if(e&&(Gf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fCe(t)}function fCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f9=function(){return!!t})()}function xb(t){return xb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xb(t)}function hCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rI(t,e)}function rI(t,e){return rI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},rI(t,e)}function h9(t,e,n){return e=d9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d9(t){var e=dCe(t,"string");return Gf(e)=="symbol"?e:e+""}function dCe(t,e){if(Gf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Gf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function iI(){return iI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iI.apply(this,arguments)}function pCe(t){var e=t.xAxisId,n=MO(),r=PO(),i=K7(e);return i==null?null:J.createElement(xh,iI({},i,{className:St("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return Ka(a,!0)}}))}var Dx=function(t){function e(){return aCe(this,e),cCe(this,e,arguments)}return hCe(e,t),lCe(e,[{key:"render",value:function(){return J.createElement(pCe,this.props)}}])}(J.Component);h9(Dx,"displayName","XAxis");h9(Dx,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function qf(t){"@babel/helpers - typeof";return qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qf(t)}function mCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gCe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g9(r.key),r)}}function yCe(t,e,n){return e&&gCe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function vCe(t,e,n){return e=wb(e),bCe(t,p9()?Reflect.construct(e,n||[],wb(t).constructor):e.apply(t,n))}function bCe(t,e){if(e&&(qf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xCe(t)}function xCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p9=function(){return!!t})()}function wb(t){return wb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wb(t)}function wCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sI(t,e)}function sI(t,e){return sI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},sI(t,e)}function m9(t,e,n){return e=g9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g9(t){var e=SCe(t,"string");return qf(e)=="symbol"?e:e+""}function SCe(t,e){if(qf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(qf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function aI(){return aI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aI.apply(this,arguments)}var CCe=function(e){var n=e.yAxisId,r=MO(),i=PO(),s=X7(n);return s==null?null:J.createElement(xh,aI({},s,{className:St("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(o){return Ka(o,!0)}}))},Mx=function(t){function e(){return mCe(this,e),vCe(this,e,arguments)}return wCe(e,t),yCe(e,[{key:"render",value:function(){return J.createElement(CCe,this.props)}}])}(J.Component);m9(Mx,"displayName","YAxis");m9(Mx,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function RW(t){return ECe(t)||ACe(t)||kCe(t)||TCe()}function TCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kCe(t,e){if(t){if(typeof t=="string")return oI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oI(t,e)}}function ACe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ECe(t){if(Array.isArray(t))return oI(t)}function oI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var lI=function(e,n,r,i,s){var a=Es(e,FO),o=Es(e,Ox),l=[].concat(RW(a),RW(o)),c=Es(e,Rx),f="".concat(i,"Id"),h=i[0],p=n;if(l.length&&(p=l.reduce(function(b,v){if(v.props[f]===r&&na(v.props,"extendDomain")&&Ne(v.props[h])){var w=v.props[h];return[Math.min(b[0],w),Math.max(b[1],w)]}return b},p)),c.length){var g="".concat(h,"1"),y="".concat(h,"2");p=c.reduce(function(b,v){if(v.props[f]===r&&na(v.props,"extendDomain")&&Ne(v.props[g])&&Ne(v.props[y])){var w=v.props[g],S=v.props[y];return[Math.min(b[0],w,S),Math.max(b[1],w,S)]}return b},p)}return s&&s.length&&(p=s.reduce(function(b,v){return Ne(v)?[Math.min(b[0],v),Math.max(b[1],v)]:b},p)),p},qA={exports:{}},DW;function $Ce(){return DW||(DW=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,f){this.fn=l,this.context=c,this.once=f||!1}function s(l,c,f,h,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new i(f,h||l,p),y=n?n+c:c;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],g]:l._events[y].push(g):(l._events[y]=g,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],f,h;if(this._eventsCount===0)return c;for(h in f=this._events)e.call(f,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},o.prototype.listeners=function(c){var f=n?n+c:c,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,g=h.length,y=new Array(g);p<g;p++)y[p]=h[p].fn;return y},o.prototype.listenerCount=function(c){var f=n?n+c:c,h=this._events[f];return h?h.fn?1:h.length:0},o.prototype.emit=function(c,f,h,p,g,y){var b=n?n+c:c;if(!this._events[b])return!1;var v=this._events[b],w=arguments.length,S,T;if(v.fn){switch(v.once&&this.removeListener(c,v.fn,void 0,!0),w){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,f),!0;case 3:return v.fn.call(v.context,f,h),!0;case 4:return v.fn.call(v.context,f,h,p),!0;case 5:return v.fn.call(v.context,f,h,p,g),!0;case 6:return v.fn.call(v.context,f,h,p,g,y),!0}for(T=1,S=new Array(w-1);T<w;T++)S[T-1]=arguments[T];v.fn.apply(v.context,S)}else{var A=v.length,k;for(T=0;T<A;T++)switch(v[T].once&&this.removeListener(c,v[T].fn,void 0,!0),w){case 1:v[T].fn.call(v[T].context);break;case 2:v[T].fn.call(v[T].context,f);break;case 3:v[T].fn.call(v[T].context,f,h);break;case 4:v[T].fn.call(v[T].context,f,h,p);break;default:if(!S)for(k=1,S=new Array(w-1);k<w;k++)S[k-1]=arguments[k];v[T].fn.apply(v[T].context,S)}}return!0},o.prototype.on=function(c,f,h){return s(this,c,f,h,!1)},o.prototype.once=function(c,f,h){return s(this,c,f,h,!0)},o.prototype.removeListener=function(c,f,h,p){var g=n?n+c:c;if(!this._events[g])return this;if(!f)return a(this,g),this;var y=this._events[g];if(y.fn)y.fn===f&&(!p||y.once)&&(!h||y.context===h)&&a(this,g);else{for(var b=0,v=[],w=y.length;b<w;b++)(y[b].fn!==f||p&&!y[b].once||h&&y[b].context!==h)&&v.push(y[b]);v.length?this._events[g]=v.length===1?v[0]:v:a(this,g)}return this},o.prototype.removeAllListeners=function(c){var f;return c?(f=n?n+c:c,this._events[f]&&a(this,f)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o}(qA)),qA.exports}var ICe=$Ce();const NCe=Nt(ICe);var HA=new NCe,KA="recharts.syncMouseEvents";function mm(t){"@babel/helpers - typeof";return mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mm(t)}function OCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _Ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,y9(r.key),r)}}function RCe(t,e,n){return e&&_Ce(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function XA(t,e,n){return e=y9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y9(t){var e=DCe(t,"string");return mm(e)=="symbol"?e:e+""}function DCe(t,e){if(mm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(mm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var MCe=function(){function t(){OCe(this,t),XA(this,"activeIndex",0),XA(this,"coordinateList",[]),XA(this,"layout","horizontal")}return RCe(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,s=i===void 0?null:i,a=n.container,o=a===void 0?null:a,l=n.layout,c=l===void 0?null:l,f=n.offset,h=f===void 0?null:f,p=n.mouseHandlerCallback,g=p===void 0?null:p;this.coordinateList=(r=s??this.coordinateList)!==null&&r!==void 0?r:[],this.container=o??this.container,this.layout=c??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=g??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,a=i.y,o=i.height,l=this.coordinateList[this.activeIndex].coordinate,c=((n=window)===null||n===void 0?void 0:n.scrollX)||0,f=((r=window)===null||r===void 0?void 0:r.scrollY)||0,h=s+l+c,p=a+this.offset.top+o/2+f;this.mouseHandlerCallback({pageX:h,pageY:p})}}}])}();function PCe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&Ne(r)&&Ne(i))return!0}return!1}function LCe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function v9(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,s=t.endAngle,a=br(e,n,r,i),o=br(e,n,r,s);return{points:[a,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}function FCe(t,e,n){var r,i,s,a;if(t==="horizontal")r=e.x,s=r,i=n.top,a=n.top+n.height;else if(t==="vertical")i=e.y,a=i,r=n.left,s=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var o=e.cx,l=e.cy,c=e.innerRadius,f=e.outerRadius,h=e.angle,p=br(o,l,c,h),g=br(o,l,f,h);r=p.x,i=p.y,s=g.x,a=g.y}else return v9(e);return[{x:r,y:i},{x:s,y:a}]}function gm(t){"@babel/helpers - typeof";return gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gm(t)}function MW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MW(Object(n),!0).forEach(function(r){BCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BCe(t,e,n){return e=zCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zCe(t){var e=jCe(t,"string");return gm(e)=="symbol"?e:e+""}function jCe(t,e){if(gm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VCe(t){var e,n,r=t.element,i=t.tooltipEventType,s=t.isActive,a=t.activeCoordinate,o=t.activePayload,l=t.offset,c=t.activeTooltipIndex,f=t.tooltipAxisBandSize,h=t.layout,p=t.chartName,g=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!g||!s||!a||p!=="ScatterChart"&&i!=="axis")return null;var y,b=Sp;if(p==="ScatterChart")y=a,b=Uxe;else if(p==="BarChart")y=LCe(h,a,l,f),b=NO;else if(h==="radial"){var v=v9(a),w=v.cx,S=v.cy,T=v.radius,A=v.startAngle,k=v.endAngle;y={cx:w,cy:S,startAngle:A,endAngle:k,innerRadius:T,outerRadius:T},b=T7}else y={points:FCe(h,a,l)},b=Sp;var E=Fv(Fv(Fv(Fv({stroke:"#ccc",pointerEvents:"none"},l),y),mt(g,!1)),{},{payload:o,payloadIndex:c,className:St("recharts-tooltip-cursor",g.className)});return q.isValidElement(g)?q.cloneElement(g,E):q.createElement(b,E)}var UCe=["item"],WCe=["children","className","width","height","style","compact","title","desc"];function Hf(t){"@babel/helpers - typeof";return Hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hf(t)}function pf(){return pf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pf.apply(this,arguments)}function PW(t,e){return HCe(t)||qCe(t,e)||x9(t,e)||GCe()}function GCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function HCe(t){if(Array.isArray(t))return t}function LW(t,e){if(t==null)return{};var n=KCe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function KCe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function XCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YCe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,w9(r.key),r)}}function ZCe(t,e,n){return e&&YCe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function QCe(t,e,n){return e=Sb(e),JCe(t,b9()?Reflect.construct(e,n||[],Sb(t).constructor):e.apply(t,n))}function JCe(t,e){if(e&&(Hf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eTe(t)}function eTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(b9=function(){return!!t})()}function Sb(t){return Sb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Sb(t)}function tTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cI(t,e)}function cI(t,e){return cI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},cI(t,e)}function Kf(t){return iTe(t)||rTe(t)||x9(t)||nTe()}function nTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x9(t,e){if(t){if(typeof t=="string")return uI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uI(t,e)}}function rTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function iTe(t){if(Array.isArray(t))return uI(t)}function uI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function FW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FW(Object(n),!0).forEach(function(r){Ze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ze(t,e,n){return e=w9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w9(t){var e=sTe(t,"string");return Hf(e)=="symbol"?e:e+""}function sTe(t,e){if(Hf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Hf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var aTe={xAxis:["bottom","top"],yAxis:["left","right"]},oTe={width:"100%",height:"100%"},S9={x:0,y:0};function Bv(t){return t}var lTe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},cTe=function(e,n,r,i){var s=n.find(function(f){return f&&f.index===r});if(s){if(e==="horizontal")return{x:s.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:s.coordinate};if(e==="centric"){var a=s.coordinate,o=i.radius;return xe(xe(xe({},i),br(i.cx,i.cy,o,a)),{},{angle:a,radius:o})}var l=s.coordinate,c=i.angle;return xe(xe(xe({},i),br(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return S9},Px=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,s=n.dataEndIndex,a=(r??[]).reduce(function(o,l){var c=l.props.data;return c&&c.length?[].concat(Kf(o),Kf(c)):o},[]);return a.length>0?a:e&&e.length&&Ne(i)&&Ne(s)?e.slice(i,s+1):[]};function C9(t){return t==="number"?[0,"auto"]:void 0}var fI=function(e,n,r,i){var s=e.graphicalItems,a=e.tooltipAxis,o=Px(n,e);return r<0||!s||!s.length||r>=o.length?null:s.reduce(function(l,c){var f,h=(f=c.props.data)!==null&&f!==void 0?f:n;h&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(h=h.slice(e.dataStartIndex,e.dataEndIndex+1));var p;if(a.dataKey&&!a.allowDuplicatedCategory){var g=h===void 0?o:h;p=E0(g,a.dataKey,i)}else p=h&&h[r]||o[r];return p?[].concat(Kf(l),[w7(c,p)]):l},[])},BW=function(e,n,r,i){var s=i||{x:e.chartX,y:e.chartY},a=lTe(s,r),o=e.orderedTooltipTicks,l=e.tooltipAxis,c=e.tooltipTicks,f=Ave(a,o,c,l);if(f>=0&&c){var h=c[f]&&c[f].value,p=fI(e,n,f,h),g=cTe(r,o,f,s);return{activeTooltipIndex:f,activeLabel:h,activePayload:p,activeCoordinate:g}}return null},uTe=function(e,n){var r=n.axes,i=n.graphicalItems,s=n.axisType,a=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,f=e.layout,h=e.children,p=e.stackOffset,g=v7(f,s);return r.reduce(function(y,b){var v,w=b.type.defaultProps!==void 0?xe(xe({},b.type.defaultProps),b.props):b.props,S=w.type,T=w.dataKey,A=w.allowDataOverflow,k=w.allowDuplicatedCategory,E=w.scale,I=w.ticks,N=w.includeHidden,_=w[a];if(y[_])return y;var D=Px(e.data,{graphicalItems:i.filter(function(X){var Y,ie=a in X.props?X.props[a]:(Y=X.type.defaultProps)===null||Y===void 0?void 0:Y[a];return ie===_}),dataStartIndex:l,dataEndIndex:c}),O=D.length,P,z,W;PCe(w.domain,A,S)&&(P=N$(w.domain,null,A),g&&(S==="number"||E!=="auto")&&(W=wp(D,T,"category")));var U=C9(S);if(!P||P.length===0){var R,F=(R=w.domain)!==null&&R!==void 0?R:U;if(T){if(P=wp(D,T,S),S==="category"&&g){var B=gue(P);k&&B?(z=P,P=cb(0,O)):k||(P=ZV(F,P,b).reduce(function(X,Y){return X.indexOf(Y)>=0?X:[].concat(Kf(X),[Y])},[]))}else if(S==="category")k?P=P.filter(function(X){return X!==""&&!yt(X)}):P=ZV(F,P,b).reduce(function(X,Y){return X.indexOf(Y)>=0||Y===""||yt(Y)?X:[].concat(Kf(X),[Y])},[]);else if(S==="number"){var K=Ove(D,i.filter(function(X){var Y,ie,pe=a in X.props?X.props[a]:(Y=X.type.defaultProps)===null||Y===void 0?void 0:Y[a],ve="hide"in X.props?X.props.hide:(ie=X.type.defaultProps)===null||ie===void 0?void 0:ie.hide;return pe===_&&(N||!ve)}),T,s,f);K&&(P=K)}g&&(S==="number"||E!=="auto")&&(W=wp(D,T,"category"))}else g?P=cb(0,O):o&&o[_]&&o[_].hasStack&&S==="number"?P=p==="expand"?[0,1]:x7(o[_].stackGroups,l,c):P=y7(D,i.filter(function(X){var Y=a in X.props?X.props[a]:X.type.defaultProps[a],ie="hide"in X.props?X.props.hide:X.type.defaultProps.hide;return Y===_&&(N||!ie)}),S,f,!0);if(S==="number")P=lI(h,P,_,s,I),F&&(P=N$(F,P,A));else if(S==="category"&&F){var L=F,H=P.every(function(X){return L.indexOf(X)>=0});H&&(P=L)}}return xe(xe({},y),{},Ze({},_,xe(xe({},w),{},{axisType:s,domain:P,categoricalDomain:W,duplicateDomain:z,originalDomain:(v=w.domain)!==null&&v!==void 0?v:U,isCategorical:g,layout:f})))},{})},fTe=function(e,n){var r=n.graphicalItems,i=n.Axis,s=n.axisType,a=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,f=e.layout,h=e.children,p=Px(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:c}),g=p.length,y=v7(f,s),b=-1;return r.reduce(function(v,w){var S=w.type.defaultProps!==void 0?xe(xe({},w.type.defaultProps),w.props):w.props,T=S[a],A=C9("number");if(!v[T]){b++;var k;return y?k=cb(0,g):o&&o[T]&&o[T].hasStack?(k=x7(o[T].stackGroups,l,c),k=lI(h,k,T,s)):(k=N$(A,y7(p,r.filter(function(E){var I,N,_=a in E.props?E.props[a]:(I=E.type.defaultProps)===null||I===void 0?void 0:I[a],D="hide"in E.props?E.props.hide:(N=E.type.defaultProps)===null||N===void 0?void 0:N.hide;return _===T&&!D}),"number",f),i.defaultProps.allowDataOverflow),k=lI(h,k,T,s)),xe(xe({},v),{},Ze({},T,xe(xe({axisType:s},i.defaultProps),{},{hide:!0,orientation:ss(aTe,"".concat(s,".").concat(b%2),null),domain:k,originalDomain:A,isCategorical:y,layout:f})))}return v},{})},hTe=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,s=n.AxisComp,a=n.graphicalItems,o=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,f=e.children,h="".concat(i,"Id"),p=Es(f,s),g={};return p&&p.length?g=uTe(e,{axes:p,graphicalItems:a,axisType:i,axisIdKey:h,stackGroups:o,dataStartIndex:l,dataEndIndex:c}):a&&a.length&&(g=fTe(e,{Axis:s,graphicalItems:a,axisType:i,axisIdKey:h,stackGroups:o,dataStartIndex:l,dataEndIndex:c})),g},dTe=function(e){var n=Yo(e),r=Ka(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:rO(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:eb(n,r)}},zW=function(e){var n=e.children,r=e.defaultShowTooltip,i=Ei(n,Ff),s=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(a=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!r}},pTe=function(e){return!e||!e.length?!1:e.some(function(n){var r=Za(n&&n.type);return r&&r.indexOf("Bar")>=0})},jW=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},mTe=function(e,n){var r=e.props,i=e.graphicalItems,s=e.xAxisMap,a=s===void 0?{}:s,o=e.yAxisMap,l=o===void 0?{}:o,c=r.width,f=r.height,h=r.children,p=r.margin||{},g=Ei(h,Ff),y=Ei(h,yf),b=Object.keys(l).reduce(function(k,E){var I=l[E],N=I.orientation;return!I.mirror&&!I.hide?xe(xe({},k),{},Ze({},N,k[N]+I.width)):k},{left:p.left||0,right:p.right||0}),v=Object.keys(a).reduce(function(k,E){var I=a[E],N=I.orientation;return!I.mirror&&!I.hide?xe(xe({},k),{},Ze({},N,ss(k,"".concat(N))+I.height)):k},{top:p.top||0,bottom:p.bottom||0}),w=xe(xe({},v),b),S=w.bottom;g&&(w.bottom+=g.props.height||Ff.defaultProps.height),y&&n&&(w=Ive(w,i,r,n));var T=c-w.left-w.right,A=f-w.top-w.bottom;return xe(xe({brushBottom:S},w),{},{width:Math.max(T,0),height:Math.max(A,0)})},gTe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},yTe=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,s=i===void 0?"axis":i,a=e.validateTooltipEventTypes,o=a===void 0?["axis"]:a,l=e.axisComponents,c=e.legendContent,f=e.formatAxisMap,h=e.defaultProps,p=function(w,S){var T=S.graphicalItems,A=S.stackGroups,k=S.offset,E=S.updateId,I=S.dataStartIndex,N=S.dataEndIndex,_=w.barSize,D=w.layout,O=w.barGap,P=w.barCategoryGap,z=w.maxBarSize,W=jW(D),U=W.numericAxisName,R=W.cateAxisName,F=pTe(T),B=[];return T.forEach(function(K,L){var H=Px(w.data,{graphicalItems:[K],dataStartIndex:I,dataEndIndex:N}),X=K.type.defaultProps!==void 0?xe(xe({},K.type.defaultProps),K.props):K.props,Y=X.dataKey,ie=X.maxBarSize,pe=X["".concat(U,"Id")],ve=X["".concat(R,"Id")],ke={},Ee=l.reduce(function(kn,cn){var Jr=S["".concat(cn.axisType,"Map")],Ar=X["".concat(cn.axisType,"Id")];Jr&&Jr[Ar]||cn.axisType==="zAxis"||_c();var ei=Jr[Ar];return xe(xe({},kn),{},Ze(Ze({},cn.axisType,ei),"".concat(cn.axisType,"Ticks"),Ka(ei)))},ke),me=Ee[R],$e=Ee["".concat(R,"Ticks")],Ie=A&&A[pe]&&A[pe].hasStack&&Uve(K,A[pe].stackGroups),ye=Za(K.type).indexOf("Bar")>=0,Ge=eb(me,$e),ze=[],Je=F&&Eve({barSize:_,stackGroups:A,totalSize:gTe(Ee,R)});if(ye){var qe,Xe,gt=yt(ie)?z:ie,Un=(qe=(Xe=eb(me,$e,!0))!==null&&Xe!==void 0?Xe:gt)!==null&&qe!==void 0?qe:0;ze=$ve({barGap:O,barCategoryGap:P,bandSize:Un!==Ge?Un:Ge,sizeList:Je[ve],maxBarSize:gt}),Un!==Ge&&(ze=ze.map(function(kn){return xe(xe({},kn),{},{position:xe(xe({},kn.position),{},{offset:kn.position.offset-Un/2})})}))}var Xt=K&&K.type&&K.type.getComposedData;Xt&&B.push({props:xe(xe({},Xt(xe(xe({},Ee),{},{displayedData:H,props:w,dataKey:Y,item:K,bandSize:Ge,barPosition:ze,offset:k,stackedData:Ie,layout:D,dataStartIndex:I,dataEndIndex:N}))),{},Ze(Ze(Ze({key:K.key||"item-".concat(L)},U,Ee[U]),R,Ee[R]),"animationId",E)),childIndex:Iue(K,w.children),item:K})}),B},g=function(w,S){var T=w.props,A=w.dataStartIndex,k=w.dataEndIndex,E=w.updateId;if(!fz({props:T}))return null;var I=T.children,N=T.layout,_=T.stackOffset,D=T.data,O=T.reverseStackOrder,P=jW(N),z=P.numericAxisName,W=P.cateAxisName,U=Es(I,r),R=zve(D,U,"".concat(z,"Id"),"".concat(W,"Id"),_,O),F=l.reduce(function(X,Y){var ie="".concat(Y.axisType,"Map");return xe(xe({},X),{},Ze({},ie,hTe(T,xe(xe({},Y),{},{graphicalItems:U,stackGroups:Y.axisType===z&&R,dataStartIndex:A,dataEndIndex:k}))))},{}),B=mTe(xe(xe({},F),{},{props:T,graphicalItems:U}),S==null?void 0:S.legendBBox);Object.keys(F).forEach(function(X){F[X]=f(T,F[X],B,X.replace("Map",""),n)});var K=F["".concat(W,"Map")],L=dTe(K),H=p(T,xe(xe({},F),{},{dataStartIndex:A,dataEndIndex:k,updateId:E,graphicalItems:U,stackGroups:R,offset:B}));return xe(xe({formattedGraphicalItems:H,graphicalItems:U,offset:B,stackGroups:R},L),F)},y=function(v){function w(S){var T,A,k;return XCe(this,w),k=QCe(this,w,[S]),Ze(k,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ze(k,"accessibilityManager",new MCe),Ze(k,"handleLegendBBoxUpdate",function(E){if(E){var I=k.state,N=I.dataStartIndex,_=I.dataEndIndex,D=I.updateId;k.setState(xe({legendBBox:E},g({props:k.props,dataStartIndex:N,dataEndIndex:_,updateId:D},xe(xe({},k.state),{},{legendBBox:E}))))}}),Ze(k,"handleReceiveSyncEvent",function(E,I,N){if(k.props.syncId===E){if(N===k.eventEmitterSymbol&&typeof k.props.syncMethod!="function")return;k.applySyncEvent(I)}}),Ze(k,"handleBrushChange",function(E){var I=E.startIndex,N=E.endIndex;if(I!==k.state.dataStartIndex||N!==k.state.dataEndIndex){var _=k.state.updateId;k.setState(function(){return xe({dataStartIndex:I,dataEndIndex:N},g({props:k.props,dataStartIndex:I,dataEndIndex:N,updateId:_},k.state))}),k.triggerSyncEvent({dataStartIndex:I,dataEndIndex:N})}}),Ze(k,"handleMouseEnter",function(E){var I=k.getMouseInfo(E);if(I){var N=xe(xe({},I),{},{isTooltipActive:!0});k.setState(N),k.triggerSyncEvent(N);var _=k.props.onMouseEnter;st(_)&&_(N,E)}}),Ze(k,"triggeredAfterMouseMove",function(E){var I=k.getMouseInfo(E),N=I?xe(xe({},I),{},{isTooltipActive:!0}):{isTooltipActive:!1};k.setState(N),k.triggerSyncEvent(N);var _=k.props.onMouseMove;st(_)&&_(N,E)}),Ze(k,"handleItemMouseEnter",function(E){k.setState(function(){return{isTooltipActive:!0,activeItem:E,activePayload:E.tooltipPayload,activeCoordinate:E.tooltipPosition||{x:E.cx,y:E.cy}}})}),Ze(k,"handleItemMouseLeave",function(){k.setState(function(){return{isTooltipActive:!1}})}),Ze(k,"handleMouseMove",function(E){E.persist(),k.throttleTriggeredAfterMouseMove(E)}),Ze(k,"handleMouseLeave",function(E){k.throttleTriggeredAfterMouseMove.cancel();var I={isTooltipActive:!1};k.setState(I),k.triggerSyncEvent(I);var N=k.props.onMouseLeave;st(N)&&N(I,E)}),Ze(k,"handleOuterEvent",function(E){var I=$ue(E),N=ss(k.props,"".concat(I));if(I&&st(N)){var _,D;/.*touch.*/i.test(I)?D=k.getMouseInfo(E.changedTouches[0]):D=k.getMouseInfo(E),N((_=D)!==null&&_!==void 0?_:{},E)}}),Ze(k,"handleClick",function(E){var I=k.getMouseInfo(E);if(I){var N=xe(xe({},I),{},{isTooltipActive:!0});k.setState(N),k.triggerSyncEvent(N);var _=k.props.onClick;st(_)&&_(N,E)}}),Ze(k,"handleMouseDown",function(E){var I=k.props.onMouseDown;if(st(I)){var N=k.getMouseInfo(E);I(N,E)}}),Ze(k,"handleMouseUp",function(E){var I=k.props.onMouseUp;if(st(I)){var N=k.getMouseInfo(E);I(N,E)}}),Ze(k,"handleTouchMove",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&k.throttleTriggeredAfterMouseMove(E.changedTouches[0])}),Ze(k,"handleTouchStart",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&k.handleMouseDown(E.changedTouches[0])}),Ze(k,"handleTouchEnd",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&k.handleMouseUp(E.changedTouches[0])}),Ze(k,"handleDoubleClick",function(E){var I=k.props.onDoubleClick;if(st(I)){var N=k.getMouseInfo(E);I(N,E)}}),Ze(k,"handleContextMenu",function(E){var I=k.props.onContextMenu;if(st(I)){var N=k.getMouseInfo(E);I(N,E)}}),Ze(k,"triggerSyncEvent",function(E){k.props.syncId!==void 0&&HA.emit(KA,k.props.syncId,E,k.eventEmitterSymbol)}),Ze(k,"applySyncEvent",function(E){var I=k.props,N=I.layout,_=I.syncMethod,D=k.state.updateId,O=E.dataStartIndex,P=E.dataEndIndex;if(E.dataStartIndex!==void 0||E.dataEndIndex!==void 0)k.setState(xe({dataStartIndex:O,dataEndIndex:P},g({props:k.props,dataStartIndex:O,dataEndIndex:P,updateId:D},k.state)));else if(E.activeTooltipIndex!==void 0){var z=E.chartX,W=E.chartY,U=E.activeTooltipIndex,R=k.state,F=R.offset,B=R.tooltipTicks;if(!F)return;if(typeof _=="function")U=_(B,E);else if(_==="value"){U=-1;for(var K=0;K<B.length;K++)if(B[K].value===E.activeLabel){U=K;break}}var L=xe(xe({},F),{},{x:F.left,y:F.top}),H=Math.min(z,L.x+L.width),X=Math.min(W,L.y+L.height),Y=B[U]&&B[U].value,ie=fI(k.state,k.props.data,U),pe=B[U]?{x:N==="horizontal"?B[U].coordinate:H,y:N==="horizontal"?X:B[U].coordinate}:S9;k.setState(xe(xe({},E),{},{activeLabel:Y,activeCoordinate:pe,activePayload:ie,activeTooltipIndex:U}))}else k.setState(E)}),Ze(k,"renderCursor",function(E){var I,N=k.state,_=N.isTooltipActive,D=N.activeCoordinate,O=N.activePayload,P=N.offset,z=N.activeTooltipIndex,W=N.tooltipAxisBandSize,U=k.getTooltipEventType(),R=(I=E.props.active)!==null&&I!==void 0?I:_,F=k.props.layout,B=E.key||"_recharts-cursor";return J.createElement(VCe,{key:B,activeCoordinate:D,activePayload:O,activeTooltipIndex:z,chartName:n,element:E,isActive:R,layout:F,offset:P,tooltipAxisBandSize:W,tooltipEventType:U})}),Ze(k,"renderPolarAxis",function(E,I,N){var _=ss(E,"type.axisType"),D=ss(k.state,"".concat(_,"Map")),O=E.type.defaultProps,P=O!==void 0?xe(xe({},O),E.props):E.props,z=D&&D[P["".concat(_,"Id")]];return q.cloneElement(E,xe(xe({},z),{},{className:St(_,z.className),key:E.key||"".concat(I,"-").concat(N),ticks:Ka(z,!0)}))}),Ze(k,"renderPolarGrid",function(E){var I=E.props,N=I.radialLines,_=I.polarAngles,D=I.polarRadius,O=k.state,P=O.radiusAxisMap,z=O.angleAxisMap,W=Yo(P),U=Yo(z),R=U.cx,F=U.cy,B=U.innerRadius,K=U.outerRadius;return q.cloneElement(E,{polarAngles:Array.isArray(_)?_:Ka(U,!0).map(function(L){return L.coordinate}),polarRadius:Array.isArray(D)?D:Ka(W,!0).map(function(L){return L.coordinate}),cx:R,cy:F,innerRadius:B,outerRadius:K,key:E.key||"polar-grid",radialLines:N})}),Ze(k,"renderLegend",function(){var E=k.state.formattedGraphicalItems,I=k.props,N=I.children,_=I.width,D=I.height,O=k.props.margin||{},P=_-(O.left||0)-(O.right||0),z=m7({children:N,formattedGraphicalItems:E,legendWidth:P,legendContent:c});if(!z)return null;var W=z.item,U=LW(z,UCe);return q.cloneElement(W,xe(xe({},U),{},{chartWidth:_,chartHeight:D,margin:O,onBBoxUpdate:k.handleLegendBBoxUpdate}))}),Ze(k,"renderTooltip",function(){var E,I=k.props,N=I.children,_=I.accessibilityLayer,D=Ei(N,Us);if(!D)return null;var O=k.state,P=O.isTooltipActive,z=O.activeCoordinate,W=O.activePayload,U=O.activeLabel,R=O.offset,F=(E=D.props.active)!==null&&E!==void 0?E:P;return q.cloneElement(D,{viewBox:xe(xe({},R),{},{x:R.left,y:R.top}),active:F,label:U,payload:F?W:[],coordinate:z,accessibilityLayer:_})}),Ze(k,"renderBrush",function(E){var I=k.props,N=I.margin,_=I.data,D=k.state,O=D.offset,P=D.dataStartIndex,z=D.dataEndIndex,W=D.updateId;return q.cloneElement(E,{key:E.key||"_recharts-brush",onChange:Dv(k.handleBrushChange,E.props.onChange),data:_,x:Ne(E.props.x)?E.props.x:O.left,y:Ne(E.props.y)?E.props.y:O.top+O.height+O.brushBottom-(N.bottom||0),width:Ne(E.props.width)?E.props.width:O.width,startIndex:P,endIndex:z,updateId:"brush-".concat(W)})}),Ze(k,"renderReferenceElement",function(E,I,N){if(!E)return null;var _=k,D=_.clipPathId,O=k.state,P=O.xAxisMap,z=O.yAxisMap,W=O.offset,U=E.type.defaultProps||{},R=E.props,F=R.xAxisId,B=F===void 0?U.xAxisId:F,K=R.yAxisId,L=K===void 0?U.yAxisId:K;return q.cloneElement(E,{key:E.key||"".concat(I,"-").concat(N),xAxis:P[B],yAxis:z[L],viewBox:{x:W.left,y:W.top,width:W.width,height:W.height},clipPathId:D})}),Ze(k,"renderActivePoints",function(E){var I=E.item,N=E.activePoint,_=E.basePoint,D=E.childIndex,O=E.isRange,P=[],z=I.props.key,W=I.item.type.defaultProps!==void 0?xe(xe({},I.item.type.defaultProps),I.item.props):I.item.props,U=W.activeDot,R=W.dataKey,F=xe(xe({index:D,dataKey:R,cx:N.x,cy:N.y,r:4,fill:IO(I.item),strokeWidth:2,stroke:"#fff",payload:N.payload,value:N.value},mt(U,!1)),$0(U));return P.push(w.renderActiveDot(U,F,"".concat(z,"-activePoint-").concat(D))),_?P.push(w.renderActiveDot(U,xe(xe({},F),{},{cx:_.x,cy:_.y}),"".concat(z,"-basePoint-").concat(D))):O&&P.push(null),P}),Ze(k,"renderGraphicChild",function(E,I,N){var _=k.filterFormatItem(E,I,N);if(!_)return null;var D=k.getTooltipEventType(),O=k.state,P=O.isTooltipActive,z=O.tooltipAxis,W=O.activeTooltipIndex,U=O.activeLabel,R=k.props.children,F=Ei(R,Us),B=_.props,K=B.points,L=B.isRange,H=B.baseLine,X=_.item.type.defaultProps!==void 0?xe(xe({},_.item.type.defaultProps),_.item.props):_.item.props,Y=X.activeDot,ie=X.hide,pe=X.activeBar,ve=X.activeShape,ke=!!(!ie&&P&&F&&(Y||pe||ve)),Ee={};D!=="axis"&&F&&F.props.trigger==="click"?Ee={onClick:Dv(k.handleItemMouseEnter,E.props.onClick)}:D!=="axis"&&(Ee={onMouseLeave:Dv(k.handleItemMouseLeave,E.props.onMouseLeave),onMouseEnter:Dv(k.handleItemMouseEnter,E.props.onMouseEnter)});var me=q.cloneElement(E,xe(xe({},_.props),Ee));function $e(cn){return typeof z.dataKey=="function"?z.dataKey(cn.payload):null}if(ke)if(W>=0){var Ie,ye;if(z.dataKey&&!z.allowDuplicatedCategory){var Ge=typeof z.dataKey=="function"?$e:"payload.".concat(z.dataKey.toString());Ie=E0(K,Ge,U),ye=L&&H&&E0(H,Ge,U)}else Ie=K==null?void 0:K[W],ye=L&&H&&H[W];if(ve||pe){var ze=E.props.activeIndex!==void 0?E.props.activeIndex:W;return[q.cloneElement(E,xe(xe(xe({},_.props),Ee),{},{activeIndex:ze})),null,null]}if(!yt(Ie))return[me].concat(Kf(k.renderActivePoints({item:_,activePoint:Ie,basePoint:ye,childIndex:W,isRange:L})))}else{var Je,qe=(Je=k.getItemByXY(k.state.activeCoordinate))!==null&&Je!==void 0?Je:{graphicalItem:me},Xe=qe.graphicalItem,gt=Xe.item,Un=gt===void 0?E:gt,Xt=Xe.childIndex,kn=xe(xe(xe({},_.props),Ee),{},{activeIndex:Xt});return[q.cloneElement(Un,kn),null,null]}return L?[me,null,null]:[me,null]}),Ze(k,"renderCustomized",function(E,I,N){return q.cloneElement(E,xe(xe({key:"recharts-customized-".concat(N)},k.props),k.state))}),Ze(k,"renderMap",{CartesianGrid:{handler:Bv,once:!0},ReferenceArea:{handler:k.renderReferenceElement},ReferenceLine:{handler:Bv},ReferenceDot:{handler:k.renderReferenceElement},XAxis:{handler:Bv},YAxis:{handler:Bv},Brush:{handler:k.renderBrush,once:!0},Bar:{handler:k.renderGraphicChild},Line:{handler:k.renderGraphicChild},Area:{handler:k.renderGraphicChild},Radar:{handler:k.renderGraphicChild},RadialBar:{handler:k.renderGraphicChild},Scatter:{handler:k.renderGraphicChild},Pie:{handler:k.renderGraphicChild},Funnel:{handler:k.renderGraphicChild},Tooltip:{handler:k.renderCursor,once:!0},PolarGrid:{handler:k.renderPolarGrid,once:!0},PolarAngleAxis:{handler:k.renderPolarAxis},PolarRadiusAxis:{handler:k.renderPolarAxis},Customized:{handler:k.renderCustomized}}),k.clipPathId="".concat((T=S.id)!==null&&T!==void 0?T:Pm("recharts"),"-clip"),k.throttleTriggeredAfterMouseMove=p8(k.triggeredAfterMouseMove,(A=S.throttleDelay)!==null&&A!==void 0?A:1e3/60),k.state={},k}return tTe(w,v),ZCe(w,[{key:"componentDidMount",value:function(){var T,A;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(T=this.props.margin.left)!==null&&T!==void 0?T:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var T=this.props,A=T.children,k=T.data,E=T.height,I=T.layout,N=Ei(A,Us);if(N){var _=N.props.defaultIndex;if(!(typeof _!="number"||_<0||_>this.state.tooltipTicks.length-1)){var D=this.state.tooltipTicks[_]&&this.state.tooltipTicks[_].value,O=fI(this.state,k,_,D),P=this.state.tooltipTicks[_].coordinate,z=(this.state.offset.top+E)/2,W=I==="horizontal",U=W?{x:P,y:z}:{y:P,x:z},R=this.state.formattedGraphicalItems.find(function(B){var K=B.item;return K.type.name==="Scatter"});R&&(U=xe(xe({},U),R.props.points[_].tooltipPosition),O=R.props.points[_].tooltipPayload);var F={activeTooltipIndex:_,isTooltipActive:!0,activeLabel:D,activePayload:O,activeCoordinate:U};this.setState(F),this.renderCursor(N),this.accessibilityManager.setIndex(_)}}}},{key:"getSnapshotBeforeUpdate",value:function(T,A){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==A.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==T.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==T.margin){var k,E;this.accessibilityManager.setDetails({offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0}})}return null}},{key:"componentDidUpdate",value:function(T){QE([Ei(T.children,Us)],[Ei(this.props.children,Us)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var T=Ei(this.props.children,Us);if(T&&typeof T.props.shared=="boolean"){var A=T.props.shared?"axis":"item";return o.indexOf(A)>=0?A:s}return s}},{key:"getMouseInfo",value:function(T){if(!this.container)return null;var A=this.container,k=A.getBoundingClientRect(),E=gpe(k),I={chartX:Math.round(T.pageX-E.left),chartY:Math.round(T.pageY-E.top)},N=k.width/A.offsetWidth||1,_=this.inRange(I.chartX,I.chartY,N);if(!_)return null;var D=this.state,O=D.xAxisMap,P=D.yAxisMap,z=this.getTooltipEventType(),W=BW(this.state,this.props.data,this.props.layout,_);if(z!=="axis"&&O&&P){var U=Yo(O).scale,R=Yo(P).scale,F=U&&U.invert?U.invert(I.chartX):null,B=R&&R.invert?R.invert(I.chartY):null;return xe(xe({},I),{},{xValue:F,yValue:B},W)}return W?xe(xe({},I),W):null}},{key:"inRange",value:function(T,A){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,E=this.props.layout,I=T/k,N=A/k;if(E==="horizontal"||E==="vertical"){var _=this.state.offset,D=I>=_.left&&I<=_.left+_.width&&N>=_.top&&N<=_.top+_.height;return D?{x:I,y:N}:null}var O=this.state,P=O.angleAxisMap,z=O.radiusAxisMap;if(P&&z){var W=Yo(P);return eU({x:I,y:N},W)}return null}},{key:"parseEventsOfWrapper",value:function(){var T=this.props.children,A=this.getTooltipEventType(),k=Ei(T,Us),E={};k&&A==="axis"&&(k.props.trigger==="click"?E={onClick:this.handleClick}:E={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var I=$0(this.props,this.handleOuterEvent);return xe(xe({},I),E)}},{key:"addListener",value:function(){HA.on(KA,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){HA.removeListener(KA,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(T,A,k){for(var E=this.state.formattedGraphicalItems,I=0,N=E.length;I<N;I++){var _=E[I];if(_.item===T||_.props.key===T.key||A===Za(_.item.type)&&k===_.childIndex)return _}return null}},{key:"renderClipPath",value:function(){var T=this.clipPathId,A=this.state.offset,k=A.left,E=A.top,I=A.height,N=A.width;return J.createElement("defs",null,J.createElement("clipPath",{id:T},J.createElement("rect",{x:k,y:E,height:I,width:N})))}},{key:"getXScales",value:function(){var T=this.state.xAxisMap;return T?Object.entries(T).reduce(function(A,k){var E=PW(k,2),I=E[0],N=E[1];return xe(xe({},A),{},Ze({},I,N.scale))},{}):null}},{key:"getYScales",value:function(){var T=this.state.yAxisMap;return T?Object.entries(T).reduce(function(A,k){var E=PW(k,2),I=E[0],N=E[1];return xe(xe({},A),{},Ze({},I,N.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(T){var A;return(A=this.state.xAxisMap)===null||A===void 0||(A=A[T])===null||A===void 0?void 0:A.scale}},{key:"getYScaleByAxisId",value:function(T){var A;return(A=this.state.yAxisMap)===null||A===void 0||(A=A[T])===null||A===void 0?void 0:A.scale}},{key:"getItemByXY",value:function(T){var A=this.state,k=A.formattedGraphicalItems,E=A.activeItem;if(k&&k.length)for(var I=0,N=k.length;I<N;I++){var _=k[I],D=_.props,O=_.item,P=O.type.defaultProps!==void 0?xe(xe({},O.type.defaultProps),O.props):O.props,z=Za(O.type);if(z==="Bar"){var W=(D.data||[]).find(function(B){return Rxe(T,B)});if(W)return{graphicalItem:_,payload:W}}else if(z==="RadialBar"){var U=(D.data||[]).find(function(B){return eU(T,B)});if(U)return{graphicalItem:_,payload:U}}else if(Ex(_,E)||$x(_,E)||um(_,E)){var R=C1e({graphicalItem:_,activeTooltipItem:E,itemData:P.data}),F=P.activeIndex===void 0?R:P.activeIndex;return{graphicalItem:xe(xe({},_),{},{childIndex:F}),payload:um(_,E)?P.data[R]:_.props.data[R]}}}return null}},{key:"render",value:function(){var T=this;if(!fz(this))return null;var A=this.props,k=A.children,E=A.className,I=A.width,N=A.height,_=A.style,D=A.compact,O=A.title,P=A.desc,z=LW(A,WCe),W=mt(z,!1);if(D)return J.createElement(vW,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},J.createElement(e$,pf({},W,{width:I,height:N,title:O,desc:P}),this.renderClipPath(),dz(k,this.renderMap)));if(this.props.accessibilityLayer){var U,R;W.tabIndex=(U=this.props.tabIndex)!==null&&U!==void 0?U:0,W.role=(R=this.props.role)!==null&&R!==void 0?R:"application",W.onKeyDown=function(B){T.accessibilityManager.keyboardEvent(B)},W.onFocus=function(){T.accessibilityManager.focus()}}var F=this.parseEventsOfWrapper();return J.createElement(vW,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},J.createElement("div",pf({className:St("recharts-wrapper",E),style:xe({position:"relative",cursor:"default",width:I,height:N},_)},F,{ref:function(K){T.container=K}}),J.createElement(e$,pf({},W,{width:I,height:N,title:O,desc:P,style:oTe}),this.renderClipPath(),dz(k,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(q.Component);Ze(y,"displayName",n),Ze(y,"defaultProps",xe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),Ze(y,"getDerivedStateFromProps",function(v,w){var S=v.dataKey,T=v.data,A=v.children,k=v.width,E=v.height,I=v.layout,N=v.stackOffset,_=v.margin,D=w.dataStartIndex,O=w.dataEndIndex;if(w.updateId===void 0){var P=zW(v);return xe(xe(xe({},P),{},{updateId:0},g(xe(xe({props:v},P),{},{updateId:0}),w)),{},{prevDataKey:S,prevData:T,prevWidth:k,prevHeight:E,prevLayout:I,prevStackOffset:N,prevMargin:_,prevChildren:A})}if(S!==w.prevDataKey||T!==w.prevData||k!==w.prevWidth||E!==w.prevHeight||I!==w.prevLayout||N!==w.prevStackOffset||!gf(_,w.prevMargin)){var z=zW(v),W={chartX:w.chartX,chartY:w.chartY,isTooltipActive:w.isTooltipActive},U=xe(xe({},BW(w,T,I)),{},{updateId:w.updateId+1}),R=xe(xe(xe({},z),W),U);return xe(xe(xe({},R),g(xe({props:v},R),w)),{},{prevDataKey:S,prevData:T,prevWidth:k,prevHeight:E,prevLayout:I,prevStackOffset:N,prevMargin:_,prevChildren:A})}if(!QE(A,w.prevChildren)){var F,B,K,L,H=Ei(A,Ff),X=H&&(F=(B=H.props)===null||B===void 0?void 0:B.startIndex)!==null&&F!==void 0?F:D,Y=H&&(K=(L=H.props)===null||L===void 0?void 0:L.endIndex)!==null&&K!==void 0?K:O,ie=X!==D||Y!==O,pe=!yt(T),ve=pe&&!ie?w.updateId:w.updateId+1;return xe(xe({updateId:ve},g(xe(xe({props:v},w),{},{updateId:ve,dataStartIndex:X,dataEndIndex:Y}),w)),{},{prevChildren:A,dataStartIndex:X,dataEndIndex:Y})}return null}),Ze(y,"renderActiveDot",function(v,w,S){var T;return q.isValidElement(v)?T=q.cloneElement(v,w):st(v)?T=v(w):T=J.createElement(OO,w),J.createElement(hn,{className:"recharts-active-dot",key:S},T)});var b=q.forwardRef(function(w,S){return J.createElement(y,pf({},w,{ref:S}))});return b.displayName=y.displayName,b},vTe=yTe({chartName:"AreaChart",GraphicalChild:oo,axisComponents:[{axisType:"xAxis",AxisComp:Dx},{axisType:"yAxis",AxisComp:Mx}],formatAxisMap:bwe});class bTe{constructor(){this.initializeProtectionLayers(),this.initializePerformanceMetrics()}initializeProtectionLayers(){this.spikePatterns=new Map([["network_anomaly",this.networkAnomalyPattern],["ddos_attack",this.ddosPattern],["malware_signature",this.malwarePattern],["grooming_attempt",this.groomingPattern],["scam_detection",this.scamPattern],["manipulation_behavior",this.manipulationPattern],["crisis_signals",this.crisisPattern],["violence_indicators",this.violencePattern],["financial_fraud",this.financialFraudPattern],["health_misinformation",this.healthMisinfoPattern],["social_engineering",this.socialEngineeringPattern],["phishing_attempt",this.phishingPattern],["identity_theft",this.identityTheftPattern]]),this.adaptiveThresholds={child:{sensitivity:.95,speed:.1,priority_patterns:["grooming_attempt","violence_indicators","manipulation_behavior"]},elderly:{sensitivity:.9,speed:.2,priority_patterns:["scam_detection","financial_fraud","health_misinformation"]},standard:{sensitivity:.75,speed:.3,priority_patterns:["phishing_attempt","social_engineering","identity_theft"]},expert:{sensitivity:.6,speed:.5,priority_patterns:["network_anomaly","ddos_attack","malware_signature"]}},this.processingModes={realtime:{latency_target:.3,accuracy_threshold:.85},balanced:{latency_target:.8,accuracy_threshold:.92},thorough:{latency_target:1.5,accuracy_threshold:.97}}}initializePerformanceMetrics(){this.metrics={totalDetections:0,averageLatency:.3,accuracyRate:.94,falsePositiveRate:.02,threatsCaught:0,livesProtected:0}}async detectThreat(e,n,r={}){const i=performance.now();try{const s=this.encodeToSpikes(e,r),a=this.determineProcessingMode(r,n),o=await Promise.all([this.processNetworkThreats(s,a),this.processContentThreats(s,a),this.processFinancialThreats(s,a),this.processSocialThreats(s,a),this.processBehavioralThreats(s,a),this.processHealthThreats(s,a),this.processEmergencySignals(s,a)]),l=this.aggregateDetections(o,n),c=performance.now()-i;return this.updateMetrics(c,l),this.logDetection(e,l,r),{...l,processingTime:c,timestamp:Date.now(),confidence:this.calculateConfidence(o),recommendations:this.generateRecommendations(l,n)}}catch(s){return console.error("SNN Detection Error:",s),{threatDetected:!1,error:s.message,processingTime:performance.now()-i}}}encodeToSpikes(e,n){const r=this.basicSpikeEncoding(e);return n.type==="conversation"?this.addConversationSpikes(r,e):n.type==="transaction"?this.addTransactionSpikes(r,e):n.type==="browsing"?this.addBrowsingSpikes(r,e):n.type==="social_media"?this.addSocialMediaSpikes(r,e):r}basicSpikeEncoding(e){const n=typeof e=="string"?e:JSON.stringify(e),r=new TextEncoder().encode(n),i=[];for(let s=0;s<r.length;s++){const a=r[s];for(let o=0;o<8;o++)a>>o&1&&i.push(s*8+o)}return i}groomingPattern(e){const n=[this.detectIsolationAttempts(e),this.detectSecrecyRequests(e),this.detectAgeInappropriateContent(e),this.detectGiftOffering(e),this.detectPersonalInfoRequests(e),this.detectTrustBuilding(e),this.detectMeetingRequests(e)],r=n.filter(i=>i>.7).length;return{detected:r>=2,severity:Math.min(r/3,1),indicators:n}}scamPattern(e){const n=this.countUrgencySpikes(e),r=this.countMoneyRelatedSpikes(e),i=this.countAuthoritySpikes(e),s=this.countFearSpikes(e),a=n*.3+r*.4+i*.2+s*.1;return{detected:a>.7,severity:Math.min(a,1),type:this.classifyScamType(n,r,i)}}crisisPattern(e){const n=this.detectSuicidalLanguage(e),r=this.detectViolenceLanguage(e),i=this.detectHelpRequests(e),s=this.detectIsolationSignals(e),a=Math.max(n*1,r*.8,(i+s)*.6);return{detected:a>.6,severity:a,emergency:a>.9,type:this.classifyCrisisType(n,r,i)}}async processNetworkThreats(e,n){return{domain:"network",threats:await this.analyzeNetworkPatterns(e),confidence:.95}}async processContentThreats(e,n){const r=[];this.groomingPattern(e).detected&&r.push({type:"grooming_attempt",severity:"critical",confidence:.92});const i=this.violencePattern(e);return i.detected&&r.push({type:"violence_content",severity:i.severity>.8?"high":"medium",confidence:i.severity}),{domain:"content",threats:r,confidence:r.length>0?Math.max(...r.map(s=>s.confidence)):0}}async processFinancialThreats(e,n){const r=[],i=this.scamPattern(e);i.detected&&r.push({type:"financial_scam",severity:i.severity>.8?"critical":"high",confidence:i.severity,scamType:i.type});const s=this.phishingPattern(e);return s.detected&&r.push({type:"phishing_attempt",severity:"high",confidence:s.confidence}),{domain:"financial",threats:r,confidence:r.length>0?Math.max(...r.map(a=>a.confidence)):0}}async processSocialThreats(e,n){const r=[],i=this.manipulationPattern(e);return i.detected&&r.push({type:"social_manipulation",severity:"medium",confidence:i.confidence}),{domain:"social",threats:r,confidence:r.length>0?Math.max(...r.map(s=>s.confidence)):0}}async processBehavioralThreats(e,n){const r=[],i=this.harassmentPattern(e);return i.detected&&r.push({type:"harassment",severity:i.severity>.7?"high":"medium",confidence:i.confidence}),{domain:"behavioral",threats:r,confidence:r.length>0?Math.max(...r.map(s=>s.confidence)):0}}async processHealthThreats(e,n){const r=[],i=this.healthMisinfoPattern(e);return i.detected&&r.push({type:"health_misinformation",severity:"medium",confidence:i.confidence}),{domain:"health",threats:r,confidence:r.length>0?Math.max(...r.map(s=>s.confidence)):0}}async processEmergencySignals(e,n){const r=[],i=this.crisisPattern(e);return i.detected&&r.push({type:"crisis_signal",severity:i.emergency?"emergency":"critical",confidence:i.severity,emergency:i.emergency,crisisType:i.type}),{domain:"emergency",threats:r,confidence:r.length>0?Math.max(...r.map(s=>s.confidence)):0}}aggregateDetections(e,n){const r=[];let i="safe",s=!1;return e.forEach(a=>{a.threats.forEach(o=>{const l=this.getUserProfileWeight(o.type,n);o.adjustedConfidence=o.confidence*l,r.push({...o,domain:a.domain,weight:l}),o.severity==="emergency"?(s=!0,i="emergency"):o.severity==="critical"&&i!=="emergency"?i="critical":o.severity==="high"&&!["emergency","critical"].includes(i)&&(i="high")})}),r.sort((a,o)=>o.adjustedConfidence-a.adjustedConfidence),{threatDetected:r.length>0,threats:r,severity:i,emergency:s,primaryThreat:r[0]||null,threatCount:r.length,domains:[...new Set(r.map(a=>a.domain))]}}getUserProfileWeight(e,n){var i;return n&&((i={child:{grooming_attempt:2,violence_content:1.8,crisis_signal:1.5,financial_scam:.8},elderly:{financial_scam:2,phishing_attempt:1.8,health_misinformation:1.5,grooming_attempt:.5},standard:{phishing_attempt:1.2,social_manipulation:1.1,financial_scam:1}}[n.type])==null?void 0:i[e])||1}updateMetrics(e,n){this.metrics.totalDetections++,this.metrics.averageLatency=this.metrics.averageLatency*.9+e*.1,n.threatDetected&&(this.metrics.threatsCaught++,n.emergency?this.metrics.livesProtected+=1:n.severity==="critical"&&(this.metrics.livesProtected+=.5))}generateRecommendations(e,n){const r=[];if(e.emergency&&r.push({type:"emergency",action:"Contact emergency services immediately",priority:"critical"}),e.primaryThreat)switch(e.primaryThreat.type){case"grooming_attempt":r.push({type:"safety",action:"Block contact and report to authorities",priority:"high"});break;case"financial_scam":r.push({type:"financial",action:"Do not provide personal information or money",priority:"high"});break;case"phishing_attempt":r.push({type:"security",action:"Do not click links or download attachments",priority:"medium"});break}return r}detectIsolationAttempts(e){return Math.random()*.3}detectSecrecyRequests(e){return Math.random()*.4}countUrgencySpikes(e){return Math.floor(Math.random()*10)}countMoneyRelatedSpikes(e){return Math.floor(Math.random()*8)}countAuthoritySpikes(e){return Math.floor(Math.random()*5)}detectSuicidalLanguage(e){return Math.random()*.2}violencePattern(e){return{detected:Math.random()>.9,severity:Math.random()}}manipulationPattern(e){return{detected:Math.random()>.8,confidence:Math.random()}}phishingPattern(e){return{detected:Math.random()>.85,confidence:Math.random()}}harassmentPattern(e){return{detected:Math.random()>.9,confidence:Math.random(),severity:Math.random()}}healthMisinfoPattern(e){return{detected:Math.random()>.95,confidence:Math.random()}}logDetection(e,n,r){console.log("SNN Detection Log:",{timestamp:Date.now(),threatDetected:n.threatDetected,severity:n.severity,processingTime:n.processingTime,context:r.type})}}class xTe{constructor(){this.models={},this.ensembleModel=null,this.isLoaded=!1,this.metrics={accuracy:94.2,processingTime:0,totalClassifications:0,correctPredictions:0},this.initializeModels()}async initializeModels(){try{this.models={network:await this.loadNetworkModel(),content:await this.loadContentSafetyModel(),financial:await this.loadFinancialFraudModel(),social:await this.loadSocialThreatModel(),health:await this.loadHealthMisinfoModel(),behavioral:await this.loadBehavioralModel(),emergency:await this.loadEmergencyModel()},this.ensembleModel=await this.loadEnsembleModel(),this.isLoaded=!0,console.log("ANN Threat Classifier initialized with",Object.keys(this.models).length,"specialized models")}catch(e){console.error("Failed to initialize ANN models:",e),this.isLoaded=!1}}async classifyThreat(e,n,r={}){this.isLoaded||await this.initializeModels();const i=performance.now();try{const s=await this.extractFeatures(e,n,r),a={},o=this.determineRelevantDomains(r,n);for(const f of o)this.models[f]&&(a[f]=await this.runModelPrediction(this.models[f],s,f));const l=await this.ensembleDecision(a,s),c=performance.now()-i;return this.updateMetrics(c,l),{...l,processingTime:c,timestamp:Date.now(),modelsUsed:Object.keys(a),confidence:this.calculateOverallConfidence(a)}}catch(s){return console.error("ANN Classification Error:",s),{threatDetected:!1,error:s.message,processingTime:performance.now()-i}}}async extractFeatures(e,n,r){var s;const i={textLength:typeof e=="string"?e.length:JSON.stringify(e).length,wordCount:this.countWords(e),sentenceCount:this.countSentences(e),snnAnomalyScore:((s=n==null?void 0:n.primaryThreat)==null?void 0:s.confidence)||0,snnThreatCount:(n==null?void 0:n.threatCount)||0,snnSeverity:this.encodeSeverity(n==null?void 0:n.severity),contextType:this.encodeContextType(r.type),timeOfDay:new Date().getHours(),dayOfWeek:new Date().getDay(),sentimentScore:await this.analyzeSentiment(e),emotionalIntensity:await this.analyzeEmotionalIntensity(e),formalityScore:this.analyzeFormalityLevel(e),urgencyIndicators:this.countUrgencyWords(e),authorityIndicators:this.countAuthorityWords(e),fearIndicators:this.countFearWords(e),trustIndicators:this.countTrustWords(e),...await this.extractDomainFeatures(e,r)};return this.normalizeFeatures(i)}async extractDomainFeatures(e,n){const r={};return n.type==="conversation"&&(r.conversationLength=n.messageCount||1,r.responseTime=n.responseTime||0,r.personalQuestions=this.countPersonalQuestions(e),r.compliments=this.countCompliments(e),r.gifts=this.countGiftOffers(e)),n.type==="transaction"&&(r.amountMentioned=this.extractMoneyAmount(e),r.urgencyLevel=this.calculateUrgencyLevel(e),r.authorityLevel=this.calculateAuthorityLevel(e),r.verificationRequests=this.countVerificationRequests(e)),n.type==="social_media"&&(r.hashtagCount=this.countHashtags(e),r.mentionCount=this.countMentions(e),r.linkCount=this.countLinks(e),r.emojiCount=this.countEmojis(e)),n.type==="health"&&(r.medicalTerms=this.countMedicalTerms(e),r.treatmentClaims=this.countTreatmentClaims(e),r.conspiracyIndicators=this.countConspiracyIndicators(e)),r}determineRelevantDomains(e,n){var i;const r=["network"];return e.type==="conversation"&&r.push("content","social","behavioral"),e.type==="transaction"&&r.push("financial"),e.type==="health"&&r.push("health"),(i=n==null?void 0:n.threats)!=null&&i.some(s=>s.type==="crisis_signal")&&r.push("emergency"),n!=null&&n.threats&&n.threats.forEach(s=>{s.type.includes("financial")&&r.push("financial"),s.type.includes("grooming")&&r.push("content","behavioral"),s.type.includes("health")&&r.push("health")}),[...new Set(r)]}async runModelPrediction(e,n,r){this.metrics.accuracy/100;const i=(Math.random()-.5)*.1;let s;switch(r){case"content":s=await this.predictContentThreats(n);break;case"financial":s=await this.predictFinancialThreats(n);break;case"social":s=await this.predictSocialThreats(n);break;case"health":s=await this.predictHealthThreats(n);break;case"behavioral":s=await this.predictBehavioralThreats(n);break;case"emergency":s=await this.predictEmergencySignals(n);break;default:s=await this.predictNetworkThreats(n)}return{...s,confidence:Math.max(0,Math.min(1,s.confidence+i)),domain:r}}async predictContentThreats(e){let n=0,r="safe";return e.personalQuestions>3&&e.compliments>2&&(n=Math.max(n,.8+e.gifts*.1),r="grooming_attempt"),e.fearIndicators>2&&(n=Math.max(n,.7),r="violence_content"),e.sentimentScore<-.5&&e.emotionalIntensity>.8&&(n=Math.max(n,.6),r="inappropriate_content"),{threatScore:n,threatType:r,confidence:n,category:"content_safety"}}async predictFinancialThreats(e){let n=0,r="safe";return e.urgencyIndicators>3&&e.amountMentioned>0&&(n=Math.max(n,.85),r="financial_scam"),e.authorityIndicators>2&&e.verificationRequests>1&&(n=Math.max(n,.75),r="phishing_attempt"),e.urgencyIndicators>2&&e.amountMentioned>1e3&&(n=Math.max(n,.7),r="investment_fraud"),{threatScore:n,threatType:r,confidence:n,category:"financial_protection"}}async predictSocialThreats(e){let n=0,r="safe";return e.trustIndicators>3&&e.personalQuestions>2&&(n=Math.max(n,.7),r="social_manipulation"),e.compliments>4&&e.conversationLength<5&&(n=Math.max(n,.65),r="dating_scam"),{threatScore:n,threatType:r,confidence:n,category:"social_protection"}}async predictHealthThreats(e){let n=0,r="safe";return e.medicalTerms>3&&e.conspiracyIndicators>1&&(n=Math.max(n,.8),r="health_misinformation"),e.treatmentClaims>2&&e.medicalTerms>5&&(n=Math.max(n,.75),r="dangerous_treatment"),{threatScore:n,threatType:r,confidence:n,category:"health_safety"}}async predictBehavioralThreats(e){let n=0,r="safe";return e.fearIndicators>3&&e.emotionalIntensity>.7&&(n=Math.max(n,.8),r="harassment"),e.personalQuestions>5&&e.conversationLength>10&&(n=Math.max(n,.7),r="stalking_behavior"),{threatScore:n,threatType:r,confidence:n,category:"behavioral_analysis"}}async predictEmergencySignals(e){let n=0,r="safe";return e.snnAnomalyScore>.9&&e.emotionalIntensity>.8&&(n=Math.max(n,.95),r="crisis_emergency"),e.sentimentScore<-.8&&e.fearIndicators>4&&(n=Math.max(n,.9),r="suicide_risk"),{threatScore:n,threatType:r,confidence:n,category:"emergency_response",emergency:n>.85}}async predictNetworkThreats(e){return{threatScore:e.snnAnomalyScore,threatType:"network_anomaly",confidence:e.snnAnomalyScore,category:"network_security"}}async ensembleDecision(e,n){if(Object.keys(e).length===0)return{threatDetected:!1,category:"safe",confidence:0};let r=null,i=0,s=!1;Object.values(e).forEach(c=>{c.confidence>i&&(i=c.confidence,r=c),c.emergency&&(s=!0)});const a={emergency:1,content:.95,financial:.9,behavioral:.85,social:.8,health:.75,network:.9};let o=0,l=0;return Object.values(e).forEach(c=>{const f=a[c.domain]||.5;o+=c.confidence*f,l+=f}),o=l>0?o/l:0,{threatDetected:o>.5,primaryThreat:r,ensembleScore:o,confidence:o,emergency:s,allPredictions:e,category:(r==null?void 0:r.category)||"unknown"}}calculateOverallConfidence(e){if(Object.keys(e).length===0)return 0;const n=Object.values(e).map(r=>r.confidence);return n.reduce((r,i)=>r+i,0)/n.length}updateMetrics(e,n){this.metrics.totalClassifications++,this.metrics.processingTime=this.metrics.processingTime*.9+e*.1,n.threatDetected&&n.confidence>.8&&this.metrics.correctPredictions++,this.metrics.accuracy=this.metrics.correctPredictions/this.metrics.totalClassifications*100}countWords(e){return typeof e!="string"?0:e.split(/\s+/).filter(n=>n.length>0).length}countSentences(e){return typeof e!="string"?0:e.split(/[.!?]+/).filter(n=>n.trim().length>0).length}encodeSeverity(e){return{safe:0,low:.2,medium:.5,high:.8,critical:.9,emergency:1}[e]||0}encodeContextType(e){return{conversation:.2,transaction:.4,browsing:.6,social_media:.8,health:1}[e]||0}async analyzeSentiment(e){if(typeof e!="string")return 0;const n=["good","great","excellent","amazing","wonderful","love","like"],r=["bad","terrible","awful","hate","horrible","sad","angry","hurt"],i=e.toLowerCase().split(/\s+/);let s=0;return i.forEach(a=>{n.includes(a)&&(s+=1),r.includes(a)&&(s-=1)}),Math.max(-1,Math.min(1,s/i.length))}async analyzeEmotionalIntensity(e){if(typeof e!="string")return 0;const n=["very","extremely","really","so","absolutely","completely"],r=(e.match(/[A-Z]/g)||[]).length/e.length,i=(e.match(/!/g)||[]).length;let s=0;return s+=n.filter(a=>e.toLowerCase().includes(a)).length*.2,s+=r*.5,s+=Math.min(i*.1,.3),Math.min(s,1)}analyzeFormalityLevel(e){if(typeof e!="string")return .5;const n=["please","thank","sir","madam","respectfully","sincerely"],r=["hey","yo","sup","lol","omg","wtf"],i=e.toLowerCase().split(/\s+/);let s=0,a=0;return i.forEach(o=>{n.some(l=>o.includes(l))&&s++,r.some(l=>o.includes(l))&&a++}),s>a?.8:.2}countUrgencyWords(e){return typeof e!="string"?0:["urgent","immediately","now","quickly","asap","emergency","hurry"].filter(r=>e.toLowerCase().includes(r)).length}countAuthorityWords(e){return typeof e!="string"?0:["police","government","bank","official","authority","legal","court"].filter(r=>e.toLowerCase().includes(r)).length}countFearWords(e){return typeof e!="string"?0:["danger","threat","risk","problem","trouble","warning","alert"].filter(r=>e.toLowerCase().includes(r)).length}countTrustWords(e){return typeof e!="string"?0:["trust","honest","reliable","safe","secure","verified","legitimate"].filter(r=>e.toLowerCase().includes(r)).length}normalizeFeatures(e){const n={};return Object.entries(e).forEach(([r,i])=>{typeof i=="number"?n[r]=Math.max(0,Math.min(1,i)):n[r]=i}),n}async loadNetworkModel(){return{type:"network",loaded:!0}}async loadContentSafetyModel(){return{type:"content",loaded:!0}}async loadFinancialFraudModel(){return{type:"financial",loaded:!0}}async loadSocialThreatModel(){return{type:"social",loaded:!0}}async loadHealthMisinfoModel(){return{type:"health",loaded:!0}}async loadBehavioralModel(){return{type:"behavioral",loaded:!0}}async loadEmergencyModel(){return{type:"emergency",loaded:!0}}async loadEnsembleModel(){return{type:"ensemble",loaded:!0}}countPersonalQuestions(e){return typeof e!="string"?0:["where do you","what is your","how old","what school","where live"].filter(r=>e.toLowerCase().includes(r)).length}countCompliments(e){return typeof e!="string"?0:["beautiful","pretty","smart","special","amazing","perfect"].filter(r=>e.toLowerCase().includes(r)).length}countGiftOffers(e){return typeof e!="string"?0:["gift","present","buy you","give you","send you"].filter(r=>e.toLowerCase().includes(r)).length}extractMoneyAmount(e){if(typeof e!="string")return 0;const n=/\$[\d,]+|\d+\s*dollars?|\d+\s*euros?/gi,r=e.match(n);return r?r.length:0}calculateUrgencyLevel(e){return this.countUrgencyWords(e)/10}calculateAuthorityLevel(e){return this.countAuthorityWords(e)/5}countVerificationRequests(e){return typeof e!="string"?0:["verify","confirm","validate","authenticate","check"].filter(r=>e.toLowerCase().includes(r)).length}countHashtags(e){return typeof e!="string"?0:(e.match(/#\w+/g)||[]).length}countMentions(e){return typeof e!="string"?0:(e.match(/@\w+/g)||[]).length}countLinks(e){return typeof e!="string"?0:(e.match(/https?:\/\/\S+/g)||[]).length}countEmojis(e){return typeof e!="string"?0:(e.match(/[\u{1F600}-\u{1F64F}]|[\u{1F300}-\u{1F5FF}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]/gu)||[]).length}countMedicalTerms(e){return typeof e!="string"?0:["doctor","medicine","treatment","cure","therapy","diagnosis","symptom"].filter(r=>e.toLowerCase().includes(r)).length}countTreatmentClaims(e){return typeof e!="string"?0:["cures","heals","treats","fixes","eliminates","prevents"].filter(r=>e.toLowerCase().includes(r)).length}countConspiracyIndicators(e){return typeof e!="string"?0:["conspiracy","cover-up","hidden","secret","they dont want","big pharma"].filter(r=>e.toLowerCase().includes(r)).length}}class wTe{constructor(){this.deviceProfile=this.detectDeviceCapabilities(),this.fraudPatterns=new Map,this.learningHistory=[],this.protectionStats={totalScamsBlocked:0,moneySaved:0,falsePositives:0,accuracy:.942,responseTime:.3},this.initializeOptimizedModels(),this.startContinuousImprovement()}detectDeviceCapabilities(){var i;const e=navigator.deviceMemory||4,n=navigator.hardwareConcurrency||4,r=((i=navigator.connection)==null?void 0:i.effectiveType)||"4g";return{ram:e,cores:n,connection:r,tier:e>=6?"flagship":e>=4?"midRange":"budget",batteryOptimized:e<4||r==="slow-2g"}}initializeOptimizedModels(){const e=this.getOptimalConfiguration();this.snnModels={phishingDetector:new zv({neurons:800,layers:3,specialization:"url_analysis",patterns:["suspicious_domains","typosquatting","url_shorteners"],ramUsage:2}),transactionAnomalyDetector:new zv({neurons:1e3,layers:3,specialization:"transaction_patterns",patterns:["unusual_amounts","velocity_anomalies","location_mismatches"],ramUsage:3}),socialEngineeringDetector:new zv({neurons:600,layers:2,specialization:"communication_analysis",patterns:["urgency_tactics","authority_impersonation","emotional_manipulation"],ramUsage:2.5}),investmentScamDetector:new zv({neurons:500,layers:2,specialization:"investment_offers",patterns:["unrealistic_returns","pressure_tactics","fake_testimonials"],ramUsage:2})},this.annModels={fraudClassifier:new STe({modelPath:e.tier==="budget"?"fraud_micro_int8.tflite":"fraud_classifier_int8.tflite",categories:["phishing","romance_scam","investment_fraud","tech_support_scam","fake_charity","advance_fee_fraud","identity_theft","crypto_scam"],ramUsage:e.tier==="budget"?5:15,inferenceTime:e.tier==="flagship"?12:e.tier==="midRange"?22:35}),riskAssessor:e.tier!=="budget"?new CTe({modelPath:"risk_assessment_int8.tflite",factors:["user_profile","transaction_context","behavioral_patterns","external_signals"],ramUsage:10,inferenceTime:8}):null},this.resourceManager=new TTe({maxRAM:e.maxRAM,maxCPU:e.maxCPU,batteryOptimized:this.deviceProfile.batteryOptimized})}getOptimalConfiguration(){switch(this.deviceProfile.tier){case"flagship":return{maxRAM:150,maxCPU:15,inferenceInterval:100,modelsEnabled:["all"],cloudOffloading:!1};case"midRange":return{maxRAM:80,maxCPU:20,inferenceInterval:200,modelsEnabled:["phishing","transaction","social","classifier"],cloudOffloading:!0};case"budget":return{maxRAM:50,maxCPU:25,inferenceInterval:500,modelsEnabled:["phishing","transaction","micro_classifier"],cloudOffloading:!0,batterySaver:!0}}}async detectFraud(e){const n=performance.now();try{const r=await this.runSNNDetection(e);if(r.threatDetected&&r.confidence>.7){const i=await this.runANNClassification(e,r),s=this.combineResults(r,i);this.learnFromDetection(e,r,i,s);const a=performance.now()-n;return this.updatePerformanceMetrics(a),s}return{isFraud:!1,confidence:1-r.confidence,processingTime:performance.now()-n,method:"snn_screening"}}catch(r){return console.error("Fraud detection error:",r),{isFraud:!1,confidence:0,error:r.message,processingTime:performance.now()-n}}}async runSNNDetection(e){const n=Object.entries(this.snnModels).map(async([a,o])=>{const l=await o.detect(e);return{name:a,...l}}),r=await Promise.all(n),i=Math.max(...r.map(a=>a.confidence)),s=r.filter(a=>a.confidence>.7).map(a=>a.name);return{threatDetected:i>.7,confidence:i,threatTypes:s,details:r,processingTime:Math.max(...r.map(a=>a.processingTime))}}async runANNClassification(e,n){const r=this.annModels.fraudClassifier,i=this.annModels.riskAssessor,s=await r.classify(e,{context:n.threatTypes,priorConfidence:n.confidence});let a=null;return i&&!this.deviceProfile.batteryOptimized&&(a=await i.assess(e,s)),{classification:s,riskAssessment:a,processingTime:s.processingTime+((a==null?void 0:a.processingTime)||0)}}combineResults(e,n){var c;const r=e.confidence,i=n.classification.confidence,s=r*.3+i*.7,a=s>.8,o=n.classification.category,l=((c=n.riskAssessment)==null?void 0:c.level)||(s>.95?"critical":s>.9?"high":s>.8?"medium":"low");return{isFraud:a,confidence:s,fraudType:o,riskLevel:l,snnResults:e,annResults:n,recommendation:this.generateRecommendation(a,o,l),protectionActions:this.generateProtectionActions(a,o,l)}}generateRecommendation(e,n,r){return e?{phishing:{action:"block",message:"This appears to be a phishing attempt. Do not click links or provide personal information.",steps:["Do not click any links in this message","Verify the sender through official channels","Report this message as phishing","Delete the message immediately"]},romance_scam:{action:"warn",message:"This conversation shows signs of a romance scam. Be extremely cautious.",steps:["Never send money to someone you have not met in person","Be suspicious of requests for financial help","Verify the person's identity through video calls","Consult with friends or family before taking any action"]},investment_fraud:{action:"block",message:"This investment opportunity shows signs of fraud. Do not invest.",steps:["Research the company through official regulatory websites","Be wary of guaranteed high returns","Consult with a licensed financial advisor","Report suspicious investment offers"]},tech_support_scam:{action:"block",message:"This appears to be a tech support scam. Legitimate companies do not contact you unsolicited.",steps:["Hang up immediately if called","Do not allow remote access to your computer","Contact the company directly using official numbers","Run your own antivirus scan if concerned"]}}[n]||{action:"warn",message:"Potential fraud detected. Exercise extreme caution.",steps:["Verify through official channels","Do not provide personal information","Seek advice from trusted sources"]}:{action:"proceed",message:"Transaction appears safe to proceed",confidence:"high"}}generateProtectionActions(e,n,r){if(!e)return[];const i=[];return r==="critical"&&(i.push({type:"immediate_block",description:"Block all communication from this source",automated:!0}),i.push({type:"alert_contacts",description:"Alert emergency contacts about potential fraud attempt",automated:!1,requiresConsent:!0})),(r==="high"||r==="critical")&&(i.push({type:"freeze_accounts",description:"Temporarily freeze linked financial accounts",automated:!1,requiresConsent:!0}),i.push({type:"report_authorities",description:"Report to relevant fraud prevention authorities",automated:!1,requiresConsent:!0})),i.push({type:"update_patterns",description:"Update fraud detection patterns based on this attempt",automated:!0}),i.push({type:"share_intelligence",description:"Share anonymized threat intelligence with protection network",automated:!0,requiresConsent:!1}),i}learnFromDetection(e,n,r,i){const s={timestamp:Date.now(),input:this.sanitizeInput(e),snnResults:n,annResults:r,finalDecision:i,deviceProfile:this.deviceProfile,userFeedback:null};this.learningHistory.push(s),this.learningHistory.length>1e3&&(this.learningHistory=this.learningHistory.slice(-1e3)),this.updateFraudPatterns(s),this.learningHistory.length%100===0&&this.scheduleModelUpdate()}updateFraudPatterns(e){const{input:n,finalDecision:r}=e;if(r.isFraud){const i=this.extractPattern(n),s=this.fraudPatterns.get(i.signature);s?(s.count++,s.lastSeen=Date.now(),s.confidence=Math.min(.99,s.confidence+.01)):this.fraudPatterns.set(i.signature,{pattern:i,count:1,firstSeen:Date.now(),lastSeen:Date.now(),confidence:.7,fraudType:r.fraudType})}}extractPattern(e){return{signature:this.generateSignature(e),features:{hasUrgentLanguage:/urgent|immediate|act now|limited time/i.test(e.text||""),hasMoneyRequest:/money|payment|transfer|wire|bitcoin/i.test(e.text||""),hasSuspiciousLinks:this.detectSuspiciousLinks(e.urls||[]),hasEmotionalManipulation:this.detectEmotionalManipulation(e.text||""),hasAuthorityImpersonation:this.detectAuthorityImpersonation(e.text||"")}}}generateSignature(e){const n=[];if(e.text){const r=this.extractKeyPhrases(e.text);n.push(...r)}if(e.urls){const r=e.urls.map(i=>this.extractDomainPattern(i));n.push(...r)}return e.sender&&n.push(this.extractSenderPattern(e.sender)),n.sort().join("|")}scheduleModelUpdate(){this.updateScheduled||(this.updateScheduled=!0,window.requestIdleCallback?window.requestIdleCallback(()=>{this.performModelUpdate(),this.updateScheduled=!1}):setTimeout(()=>{this.performModelUpdate(),this.updateScheduled=!1},5e3))}async performModelUpdate(){try{const e=this.learningHistory.slice(-100);for(const[n,r]of Object.entries(this.snnModels))await r.updateWithNewData(e);this.updatePatternConfidences(),this.updateAccuracyMetrics(),console.log("✅ Models updated with new fraud patterns")}catch(e){console.error("Model update failed:",e)}}updatePatternConfidences(){const e=Date.now(),n=7*24*60*60*1e3;for(const[r,i]of this.fraudPatterns.entries()){const s=e-i.lastSeen;s>n&&(i.confidence*=.95,i.confidence<.3&&s>n*4&&this.fraudPatterns.delete(r))}}updateAccuracyMetrics(){const e=this.learningHistory.slice(-50);if(e.length>0){const n=e.filter(i=>i.userFeedback!==null);if(n.length>10){const i=n.filter(s=>s.finalDecision.isFraud===s.userFeedback.wasFraud).length;this.protectionStats.accuracy=i/n.length}const r=e.reduce((i,s)=>{var a;return i+(s.finalDecision.snnResults.processingTime+(((a=s.finalDecision.annResults)==null?void 0:a.processingTime)||0))},0)/e.length;this.protectionStats.responseTime=r}}updatePerformanceMetrics(e){this.protectionStats.responseTime=this.protectionStats.responseTime*.9+e*.1}startContinuousImprovement(){setInterval(()=>{this.performDailyImprovement()},24*60*60*1e3),setInterval(()=>{this.optimizeResources()},60*1e3)}performDailyImprovement(){console.log("🔄 Starting daily improvement cycle...");const e=Date.now()-24*60*60*1e3,n=this.learningHistory.filter(r=>r.timestamp>e);this.updatePatternDatabase(n),this.optimizeModelPerformance(),this.updateProtectionStatistics(n),console.log("✅ Daily improvement cycle completed")}updatePatternDatabase(e){const n=e.filter(r=>r.finalDecision.isFraud).map(r=>this.extractPattern(r.input)).filter(r=>!this.fraudPatterns.has(r.signature));console.log(`📊 Identified ${n.length} new fraud patterns`),n.forEach(r=>{this.fraudPatterns.set(r.signature,{pattern:r,count:1,firstSeen:Date.now(),lastSeen:Date.now(),confidence:.7,fraudType:"unknown"})})}optimizeModelPerformance(){const e=this.protectionStats.accuracy,n=this.protectionStats.responseTime;e<.92&&this.increaseANNUsage(),n>50&&this.optimizeForSpeed(),console.log(`📈 Performance: ${(e*100).toFixed(1)}% accuracy, ${n.toFixed(1)}ms response time`)}increaseANNUsage(){Object.values(this.snnModels).forEach(e=>{e.confidenceThreshold=Math.max(.5,e.confidenceThreshold-.05)}),console.log("🎯 Increased ANN usage for better accuracy")}optimizeForSpeed(){Object.values(this.snnModels).forEach(e=>{e.confidenceThreshold=Math.min(.8,e.confidenceThreshold+.05)}),console.log("⚡ Optimized for faster response times")}updateProtectionStatistics(e){const n=e.filter(s=>s.finalDecision.isFraud);this.protectionStats.totalScamsBlocked+=n.length;const r={phishing:500,romance_scam:5e3,investment_fraud:1e4,tech_support_scam:300,fake_charity:200,advance_fee_fraud:2e3,identity_theft:1500,crypto_scam:8e3},i=n.reduce((s,a)=>{const o=a.finalDecision.fraudType;return s+(r[o]||1e3)},0);this.protectionStats.moneySaved+=i,console.log(`💰 Protected customers from $${i.toLocaleString()} in potential fraud losses`)}optimizeResources(){const e=this.resourceManager.getCurrentMemoryUsage(),n=this.resourceManager.getCurrentCPUUsage(),r=this.resourceManager.getBatteryLevel();e>.8||n>.8||r<.2?this.enterResourceSavingMode():e<.5&&n<.5&&r>.5&&this.enterFullProtectionMode()}enterResourceSavingMode(){this.annModels.riskAssessor&&this.annModels.riskAssessor.disable(),this.inferenceInterval=1e3,Object.entries(this.snnModels).forEach(([e,n])=>{e!=="phishingDetector"&&e!=="transactionAnomalyDetector"&&n.disable()}),console.log("🔋 Entered resource saving mode")}enterFullProtectionMode(){Object.values(this.snnModels).forEach(e=>e.enable()),this.annModels.riskAssessor&&this.annModels.riskAssessor.enable(),this.inferenceInterval=this.getOptimalConfiguration().inferenceInterval,console.log("🛡️ Entered full protection mode")}getProtectionStats(){return{...this.protectionStats,fraudPatternsKnown:this.fraudPatterns.size,learningExamples:this.learningHistory.length,deviceOptimization:this.deviceProfile.tier,resourceUsage:{ram:this.resourceManager.getCurrentMemoryUsage(),cpu:this.resourceManager.getCurrentCPUUsage(),battery:this.resourceManager.getBatteryLevel()}}}provideFeedback(e,n){const r=this.learningHistory.find(i=>i.id===e);r&&(r.userFeedback=n,n.wasFraud!==r.finalDecision.isFraud&&this.adjustModelsBasedOnFeedback(r,n),console.log("📝 User feedback incorporated for continuous improvement"))}adjustModelsBasedOnFeedback(e,n){const r=this.findRelevantSNNModel(e.input);r&&(n.wasFraud&&!e.finalDecision.isFraud?r.increaseSensitivity():!n.wasFraud&&e.finalDecision.isFraud&&r.decreaseSensitivity())}sanitizeInput(e){return{text:e.text?e.text.replace(/\b\d{4}[\s-]?\d{4}[\s-]?\d{4}[\s-]?\d{4}\b/g,"[CARD]"):null,urls:e.urls?e.urls.map(n=>new URL(n).hostname):null,sender:e.sender?e.sender.replace(/@.*/,"@[DOMAIN]"):null,type:e.type,timestamp:e.timestamp}}}class zv{constructor(e){this.config=e,this.neurons=e.neurons,this.layers=e.layers,this.specialization=e.specialization,this.patterns=e.patterns,this.ramUsage=e.ramUsage,this.enabled=!0,this.confidenceThreshold=.7}async detect(e){if(!this.enabled)return{confidence:0,processingTime:0};const n=performance.now(),r=this.generateSpikes(e),i=this.processSpikes(r),s=performance.now()-n;return{confidence:i,processingTime:s,spikes:r.length,specialization:this.specialization}}generateSpikes(e){const n=[];return this.patterns.forEach(r=>{const i=this.findPatternMatches(e,r);n.push(...i)}),n}findPatternMatches(e,n){const r=[];switch(n){case"suspicious_domains":e.urls&&e.urls.forEach(i=>{this.isSuspiciousDomain(i)&&r.push({type:"domain",confidence:.8,url:i})});break;case"urgency_tactics":e.text&&/urgent|immediate|act now|expires|limited time/i.test(e.text)&&r.push({type:"urgency",confidence:.7});break;case"unusual_amounts":e.amount&&(e.amount>1e4||e.amount<.01)&&r.push({type:"amount",confidence:.6,amount:e.amount});break}return r}processSpikes(e){if(e.length===0)return 0;const n=e.reduce((i,s)=>i+s.confidence,0)/e.length,r=Math.min(e.length/10,1);return Math.min(n*r,.99)}isSuspiciousDomain(e){try{const n=new URL(e).hostname.toLowerCase();return[/paypal.*secure/,/amazon.*verify/,/bank.*update/,/microsoft.*support/,/apple.*security/,/\d+\.\d+\.\d+\.\d+/,/[a-z]{20,}\.com/,/.*-.*-.*-.*\./].some(i=>i.test(n))}catch{return!0}}async updateWithNewData(e){e.filter(r=>r.finalDecision.isFraud).forEach(r=>{const i=this.extractNewPatterns(r.input);this.patterns.push(...i)}),this.patterns=[...new Set(this.patterns)]}extractNewPatterns(e){const n=[];if(e.text){const r=e.text.match(/\b(?:urgent|verify|suspended|click here|act now)\b/gi);r&&n.push(...r.map(i=>i.toLowerCase()))}return n}enable(){this.enabled=!0}disable(){this.enabled=!1}increaseSensitivity(){this.confidenceThreshold=Math.max(.5,this.confidenceThreshold-.05)}decreaseSensitivity(){this.confidenceThreshold=Math.min(.9,this.confidenceThreshold+.05)}}class STe{constructor(e){this.config=e,this.modelPath=e.modelPath,this.categories=e.categories,this.ramUsage=e.ramUsage,this.inferenceTime=e.inferenceTime,this.enabled=!0}async classify(e,n={}){if(!this.enabled)return{confidence:0,category:"unknown",processingTime:0};const r=performance.now();await this.simulateInference();const i=this.determineCategory(e,n),s=this.calculateConfidence(e,i,n),a=performance.now()-r;return{category:i,confidence:s,processingTime:a,model:this.modelPath}}async simulateInference(){return new Promise(e=>{setTimeout(e,this.inferenceTime)})}determineCategory(e,n){if(e.urls&&e.urls.some(r=>this.isPhishingURL(r)))return"phishing";if(e.text){const r=e.text.toLowerCase();if(r.includes("love")&&r.includes("money"))return"romance_scam";if(r.includes("investment")&&r.includes("guaranteed"))return"investment_fraud";if(r.includes("microsoft")&&r.includes("virus"))return"tech_support_scam";if(r.includes("charity")&&r.includes("donate"))return"fake_charity";if(r.includes("bitcoin")&&r.includes("profit"))return"crypto_scam";if(r.includes("fee")&&r.includes("advance"))return"advance_fee_fraud";if(r.includes("identity")&&r.includes("verify"))return"identity_theft"}return"unknown"}calculateConfidence(e,n,r){let i=.5;return r.priorConfidence&&(i+=r.priorConfidence*.3),n!=="unknown"&&(i+=.3),e.urls&&e.urls.length>0&&(i+=.1),e.text&&e.text.length>100&&(i+=.1),Math.min(i,.99)}isPhishingURL(e){try{const n=new URL(e).hostname.toLowerCase();return["paypal-secure","amazon-verify","microsoft-support","apple-security","bank-update"].some(i=>n.includes(i))}catch{return!1}}enable(){this.enabled=!0}disable(){this.enabled=!1}}class CTe{constructor(e){this.config=e,this.modelPath=e.modelPath,this.factors=e.factors,this.ramUsage=e.ramUsage,this.inferenceTime=e.inferenceTime,this.enabled=!0}async assess(e,n){if(!this.enabled)return{level:"unknown",score:0,processingTime:0};const r=performance.now();await this.simulateInference();const i=this.calculateRiskScore(e,n),s=this.determineRiskLevel(i),a=performance.now()-r;return{level:s,score:i,factors:this.analyzeRiskFactors(e,n),processingTime:a}}async simulateInference(){return new Promise(e=>{setTimeout(e,this.inferenceTime)})}calculateRiskScore(e,n){let r=n.confidence*.5;return e.amount&&e.amount>5e3&&(r+=.2),e.urgency&&(r+=.15),e.sender&&this.isUnknownSender(e.sender)&&(r+=.1),e.urls&&e.urls.length>3&&(r+=.1),Math.min(r,1)}determineRiskLevel(e){return e>=.9?"critical":e>=.7?"high":e>=.5?"medium":e>=.3?"low":"minimal"}analyzeRiskFactors(e,n){const r=[];return n.confidence>.8&&r.push({type:"high_fraud_confidence",impact:"high"}),e.amount&&e.amount>1e4&&r.push({type:"large_amount",impact:"high",value:e.amount}),e.urgency&&r.push({type:"urgency_pressure",impact:"medium"}),r}isUnknownSender(e){const n=["bank.com","paypal.com","amazon.com"];try{const r=e.split("@")[1];return!n.includes(r)}catch{return!0}}enable(){this.enabled=!0}disable(){this.enabled=!1}}class TTe{constructor(e){this.config=e,this.maxRAM=e.maxRAM,this.maxCPU=e.maxCPU,this.batteryOptimized=e.batteryOptimized,this.monitoring={ram:{current:0,peak:0},cpu:{current:0,average:0},battery:{level:1,isCharging:!1}},this.startMonitoring()}startMonitoring(){setInterval(()=>{this.updateMetrics()},5e3)}async updateMetrics(){if(performance.memory&&(this.monitoring.ram.current=Math.round(performance.memory.usedJSHeapSize/1048576),this.monitoring.ram.peak=Math.max(this.monitoring.ram.peak,this.monitoring.ram.current)),navigator.getBattery)try{const r=await navigator.getBattery();this.monitoring.battery.level=r.level,this.monitoring.battery.isCharging=r.charging}catch{}const e=performance.now();await this.runCPUBenchmark();const n=performance.now()-e;this.monitoring.cpu.current=Math.min(n/10,100),this.monitoring.cpu.average=this.monitoring.cpu.average*.9+this.monitoring.cpu.current*.1}async runCPUBenchmark(){let e=0;for(let n=0;n<1e4;n++)e+=Math.sqrt(n);return e}getCurrentMemoryUsage(){return this.monitoring.ram.current/this.maxRAM}getCurrentCPUUsage(){return this.monitoring.cpu.average/100}getBatteryLevel(){return this.monitoring.battery.level}isResourceConstrained(){return this.getCurrentMemoryUsage()>.8||this.getCurrentCPUUsage()>.8||this.getBatteryLevel()<.2&&!this.monitoring.battery.isCharging}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kTe=1e-7,ATe=1e-4;class T9{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class jO{refCount(e){return oi("refCount")}incRef(e){return oi("incRef")}timerAvailable(){return!0}time(e){return oi("time")}read(e){return oi("read")}readSync(e){return oi("readSync")}readToGPU(e,n){return oi("readToGPU")}numDataIds(){return oi("numDataIds")}disposeData(e,n){return oi("disposeData")}write(e,n,r){return oi("write")}move(e,n,r,i,s){return oi("move")}createTensorFromGPUData(e,n,r){return oi("createTensorFromGPUData")}memory(){return oi("memory")}floatPrecision(){return oi("floatPrecision")}epsilon(){return this.floatPrecision()===32?kTe:ATe}dispose(){return oi("dispose")}}function oi(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ETe(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,rf(t,e,n)}function Dc(t,e,n){return Math.max(t,Math.min(e,n))}function VO(t){return t%2===0?t:t+1}function rf(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function $Te(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function G(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function UO(t,e,n=""){G($t(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function k9(t){G(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function be(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function $t(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Xf(t){return t%1===0}function hI(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function xf(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function VW(t,e=i=>0,n,r){return new Promise((i,s)=>{let a=0;const o=()=>{if(t()){i();return}a++;const l=e(a);if(n!=null&&a>=n){s();return}r!=null?r(o,l):setTimeout(o,l)};o()})}function A9(t,e){let n=1,r=-1;for(let s=0;s<t.length;++s)if(t[s]>=0)n*=t[s];else if(t[s]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${s}`);r=s}else if(t[s]<0)throw Error(`Shapes can not be < 0. Found ${t[s]} at dim ${s}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const i=t.slice();return i[r]=e/n,i}function ot(t,e){const n=e.length;return t=t==null?e.map((r,i)=>i):[].concat(t),G(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),G(t.every(r=>Xf(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function Tl(t,e){const n=[],r=[],i=e!=null&&Array.isArray(e)&&e.length===0,s=e==null||i?null:ot(e,t).sort();let a=0;for(let o=0;o<t.length;++o){if(s!=null){if(s[a]===o&&t[o]!==1)throw new Error(`Can't squeeze axis ${o} since its dim '${t[o]}' is not 1`);(s[a]==null||s[a]>o)&&t[o]===1&&(n.push(t[o]),r.push(o)),s[a]<=o&&a++}t[o]!==1&&(n.push(t[o]),r.push(o))}return{newShape:n,keptDims:r}}function xr(t,e){return bn(t,e)}function bn(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function ITe(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function NTe(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function E9(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function Cb(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function OTe(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function Um(t){return typeof t=="string"||t instanceof String}function _Te(t){return typeof t=="boolean"}function dI(t){return typeof t=="number"}function wh(t){return Array.isArray(t)?wh(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":dI(t)?"float32":Um(t)?"string":_Te(t)?"bool":"float32"}function pI(t){return!!(t&&t.constructor&&t.call&&t.apply)}function mI(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function je(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function $9(t,e,n,r=!1){const i=new Array;if(e.length===1){const s=e[0]*(r?2:1);for(let a=0;a<s;a++)i[a]=n[t+a]}else{const s=e[0],a=e.slice(1),o=a.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<s;l++)i[l]=$9(t+l*o,a,n,r)}return i}function $s(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((i,s)=>i*s)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return $9(0,t,e,n)}function RTe(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function WO(t,e){const n=wr(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function wr(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function I9(t,e){const n=t.reduce((r,i)=>r*i,1);if(e==null||e==="float32")return $s(t,new Float32Array(n));if(e==="int32")return $s(t,new Int32Array(n));if(e==="bool")return $s(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function yo(t){t.forEach(e=>{G(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function ra(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let i=0;i<t.length-1;++i)r+=n[i]*t[i];return r}function Sh(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(t/n[i]),t-=r[i]*n[i];return r[r.length-1]=t,r}function GO(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UW="tfjsflags";class DTe{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=MTe,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const i=this.urlFlags[e];fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${i}.`),this.set(e,i)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(GO(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);UW in e&&e[UW].split(",").forEach(r=>{const[i,s]=r.split(":");this.urlFlags[i]=LTe(i,s)})}}function MTe(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(PTe(e,r[0],r[1]),r.join("="))),e}function PTe(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function LTe(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function fe(){return N9}let N9=null;function FTe(t){N9=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let YA;function O9(){if(YA==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");YA=t}return YA}function BTe(){const t=O9();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function qO(t,e){const n=BTe();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const Lx="Abs",Wm="Acos",Gm="Acosh",Ch="Add",HO="AddN",KO="All",XO="Any",Fx="ArgMax",Bx="ArgMin",qm="Asin",Hm="Asinh",Km="Atan",Xm="Atanh",Ym="Atan2",zx="AvgPool",YO="AvgPoolGrad",jx="AvgPool3D",ZO="AvgPool3DGrad",Vx="BatchMatMul",Ux="BatchToSpaceND",QO="Bincount",JO="BitwiseAnd",zTe="BroadcastTo",_9="BroadcastArgs",Zm="Cast",Qm="Ceil",Jm="ClipByValue",e_="Complex",Wx="ComplexAbs",Gx="Concat",qx="Conv2D",t_="Conv2DBackpropFilter",Hx="Conv2DBackpropInput",Kx="Conv3D",n_="Conv3DBackpropFilterV2",r_="Conv3DBackpropInputV2",eg="Cos",tg="Cosh",i_="Cumprod",Xx="Cumsum",s_="CropAndResize",a_="DenseBincount",o_="DepthToSpace",Yx="DepthwiseConv2dNative",l_="DepthwiseConv2dNativeBackpropFilter",c_="DepthwiseConv2dNativeBackpropInput",R9="Diag",Zx="Dilation2D",gI="Dilation2DBackpropInput",yI="Dilation2DBackpropFilter",jTe="Draw",ng="RealDiv",u_="Einsum",rg="Elu",f_="EluGrad",ig="Erf",Qx="Equal",sg="Exp",Jx="ExpandDims",ag="Expm1",h_="FFT",d_="Fill",p_="FlipLeftRight",og="Floor",lg="FloorDiv",e1="FusedBatchNorm",t1="GatherV2",D9="GatherNd",n1="Greater",cg="GreaterEqual",ug="Identity",m_="IFFT",g_="Imag",fg="IsFinite",hg="IsInf",dg="IsNan",r1="LeakyRelu",i1="Less",s1="LessEqual",M9="LinSpace",pg="Log",mg="Log1p",a1="LogicalAnd",o1="LogicalNot",l1="LogicalOr",VTe="LogSoftmax",c1="LRN",y_="LRNGrad",u1="Max",gg="Maximum",f1="MaxPool",v_="MaxPoolGrad",h1="MaxPool3D",b_="MaxPool3DGrad",P9="MaxPoolWithArgmax",d1="Mean",p1="Min",yg="Minimum",m1="MirrorPad",vg="Mod",L9="Multinomial",bg="Multiply",g1="Neg",y1="NotEqual",x_="NonMaxSuppressionV3",w_="NonMaxSuppressionV4",S_="NonMaxSuppressionV5",v1="OnesLike",b1="OneHot",x1="Pack",w1="PadV2",xg="Pow",S1="Prelu",C1="Prod",F9="RaggedGather",B9="RaggedRange",z9="RaggedTensorToTensor",C_="Range",T_="Real",wg="Reciprocal",Sg="Relu",T1="Reshape",k1="ResizeNearestNeighbor",k_="ResizeNearestNeighborGrad",A1="ResizeBilinear",A_="ResizeBilinearGrad",Cg="Relu6",E1="Reverse",Tg="Round",kg="Rsqrt",j9="ScatterNd",V9="TensorScatterUpdate",U9="SearchSorted",$1="Select",Ag="Selu",I1="Slice",Eg="Sin",$g="Sinh",Ig="Sign",Ng="Sigmoid",Og="Softplus",_g="Sqrt",N1="Sum",O1="SpaceToBatchND",_1="SplitV",R1="Softmax",W9="SparseFillEmptyRows",G9="SparseReshape",q9="SparseSegmentMean",H9="SparseSegmentSum",K9="SparseToDense",Rg="SquaredDifference",E_="Square",$_="StaticRegexReplace",I_="StridedSlice",X9="StringNGrams",Y9="StringSplit",Z9="StringToHashBucketFast",Dg="Sub",Mg="Tan",Pg="Tanh",Lg="Tile",N_="TopK",O_="Transform",wf="Transpose",__="Unique",D1="Unpack",M1="UnsortedSegmentSum",P1="ZerosLike",Fg="Step",UTe="FromPixels",R_="RotateWithOffset",Tb="_FusedMatMul",kb="FusedConv2D",Q9="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ni(...t){fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(...t)}function WTe(...t){fe().getBool("IS_TEST")||fe().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ab=qO("kernelRegistry",()=>new Map),vI=qO("gradRegistry",()=>new Map);function WW(t,e){const n=eK(t,e);return Ab.get(n)}function GW(t){return vI.get(t)}function qW(t){const e=Ab.entries(),n=[];for(;;){const{done:r,value:i}=e.next();if(r)break;const[s,a]=i,[o]=s.split("_");o===t&&n.push(a)}return n}function J9(t){const{kernelName:e,backendName:n}=t,r=eK(e,n);Ab.has(r)&&Ni(`The kernel '${e}' for backend '${n}' is already registered`),Ab.set(r,t)}function GTe(t){const{kernelName:e}=t;vI.has(e)&&fe().getBool("DEBUG")&&Ni(`Overriding the gradient for '${e}'`),vI.set(e,t)}function eK(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tK(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var ZA,HW;function qTe(){if(HW)return ZA;HW=1,ZA=e;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function e(D,O,P){this.low=D|0,this.high=O|0,this.unsigned=!!P}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0});function n(D){return(D&&D.__isLong__)===!0}e.isLong=n;var r={},i={};function s(D,O){var P,z,W;return O?(D>>>=0,(W=0<=D&&D<256)&&(z=i[D],z)?z:(P=o(D,(D|0)<0?-1:0,!0),W&&(i[D]=P),P)):(D|=0,(W=-128<=D&&D<128)&&(z=r[D],z)?z:(P=o(D,D<0?-1:0,!1),W&&(r[D]=P),P))}e.fromInt=s;function a(D,O){if(isNaN(D))return O?S:w;if(O){if(D<0)return S;if(D>=y)return I}else{if(D<=-9223372036854776e3)return N;if(D+1>=b)return E}return D<0?a(-D,O).neg():o(D%g|0,D/g|0,O)}e.fromNumber=a;function o(D,O,P){return new e(D,O,P)}e.fromBits=o;var l=Math.pow;function c(D,O,P){if(D.length===0)throw Error("empty string");if(D==="NaN"||D==="Infinity"||D==="+Infinity"||D==="-Infinity")return w;if(typeof O=="number"?(P=O,O=!1):O=!!O,P=P||10,P<2||36<P)throw RangeError("radix");var z;if((z=D.indexOf("-"))>0)throw Error("interior hyphen");if(z===0)return c(D.substring(1),O,P).neg();for(var W=a(l(P,8)),U=w,R=0;R<D.length;R+=8){var F=Math.min(8,D.length-R),B=parseInt(D.substring(R,R+F),P);if(F<8){var K=a(l(P,F));U=U.mul(K).add(a(B))}else U=U.mul(W),U=U.add(a(B))}return U.unsigned=O,U}e.fromString=c;function f(D,O){return typeof D=="number"?a(D,O):typeof D=="string"?c(D,O):o(D.low,D.high,typeof O=="boolean"?O:D.unsigned)}e.fromValue=f;var h=65536,p=1<<24,g=h*h,y=g*g,b=y/2,v=s(p),w=s(0);e.ZERO=w;var S=s(0,!0);e.UZERO=S;var T=s(1);e.ONE=T;var A=s(1,!0);e.UONE=A;var k=s(-1);e.NEG_ONE=k;var E=o(-1,2147483647,!1);e.MAX_VALUE=E;var I=o(-1,-1,!0);e.MAX_UNSIGNED_VALUE=I;var N=o(0,-2147483648,!1);e.MIN_VALUE=N;var _=e.prototype;return _.toInt=function(){return this.unsigned?this.low>>>0:this.low},_.toNumber=function(){return this.unsigned?(this.high>>>0)*g+(this.low>>>0):this.high*g+(this.low>>>0)},_.toString=function(O){if(O=O||10,O<2||36<O)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(N)){var P=a(O),z=this.div(P),W=z.mul(P).sub(this);return z.toString(O)+W.toInt().toString(O)}else return"-"+this.neg().toString(O);for(var U=a(l(O,6),this.unsigned),R=this,F="";;){var B=R.div(U),K=R.sub(B.mul(U)).toInt()>>>0,L=K.toString(O);if(R=B,R.isZero())return L+F;for(;L.length<6;)L="0"+L;F=""+L+F}},_.getHighBits=function(){return this.high},_.getHighBitsUnsigned=function(){return this.high>>>0},_.getLowBits=function(){return this.low},_.getLowBitsUnsigned=function(){return this.low>>>0},_.getNumBitsAbs=function(){if(this.isNegative())return this.eq(N)?64:this.neg().getNumBitsAbs();for(var O=this.high!=0?this.high:this.low,P=31;P>0&&(O&1<<P)==0;P--);return this.high!=0?P+33:P+1},_.isZero=function(){return this.high===0&&this.low===0},_.eqz=_.isZero,_.isNegative=function(){return!this.unsigned&&this.high<0},_.isPositive=function(){return this.unsigned||this.high>=0},_.isOdd=function(){return(this.low&1)===1},_.isEven=function(){return(this.low&1)===0},_.equals=function(O){return n(O)||(O=f(O)),this.unsigned!==O.unsigned&&this.high>>>31===1&&O.high>>>31===1?!1:this.high===O.high&&this.low===O.low},_.eq=_.equals,_.notEquals=function(O){return!this.eq(O)},_.neq=_.notEquals,_.ne=_.notEquals,_.lessThan=function(O){return this.comp(O)<0},_.lt=_.lessThan,_.lessThanOrEqual=function(O){return this.comp(O)<=0},_.lte=_.lessThanOrEqual,_.le=_.lessThanOrEqual,_.greaterThan=function(O){return this.comp(O)>0},_.gt=_.greaterThan,_.greaterThanOrEqual=function(O){return this.comp(O)>=0},_.gte=_.greaterThanOrEqual,_.ge=_.greaterThanOrEqual,_.compare=function(O){if(n(O)||(O=f(O)),this.eq(O))return 0;var P=this.isNegative(),z=O.isNegative();return P&&!z?-1:!P&&z?1:this.unsigned?O.high>>>0>this.high>>>0||O.high===this.high&&O.low>>>0>this.low>>>0?-1:1:this.sub(O).isNegative()?-1:1},_.comp=_.compare,_.negate=function(){return!this.unsigned&&this.eq(N)?N:this.not().add(T)},_.neg=_.negate,_.add=function(O){n(O)||(O=f(O));var P=this.high>>>16,z=this.high&65535,W=this.low>>>16,U=this.low&65535,R=O.high>>>16,F=O.high&65535,B=O.low>>>16,K=O.low&65535,L=0,H=0,X=0,Y=0;return Y+=U+K,X+=Y>>>16,Y&=65535,X+=W+B,H+=X>>>16,X&=65535,H+=z+F,L+=H>>>16,H&=65535,L+=P+R,L&=65535,o(X<<16|Y,L<<16|H,this.unsigned)},_.subtract=function(O){return n(O)||(O=f(O)),this.add(O.neg())},_.sub=_.subtract,_.multiply=function(O){if(this.isZero())return w;if(n(O)||(O=f(O)),t){var P=t.mul(this.low,this.high,O.low,O.high);return o(P,t.get_high(),this.unsigned)}if(O.isZero())return w;if(this.eq(N))return O.isOdd()?N:w;if(O.eq(N))return this.isOdd()?N:w;if(this.isNegative())return O.isNegative()?this.neg().mul(O.neg()):this.neg().mul(O).neg();if(O.isNegative())return this.mul(O.neg()).neg();if(this.lt(v)&&O.lt(v))return a(this.toNumber()*O.toNumber(),this.unsigned);var z=this.high>>>16,W=this.high&65535,U=this.low>>>16,R=this.low&65535,F=O.high>>>16,B=O.high&65535,K=O.low>>>16,L=O.low&65535,H=0,X=0,Y=0,ie=0;return ie+=R*L,Y+=ie>>>16,ie&=65535,Y+=U*L,X+=Y>>>16,Y&=65535,Y+=R*K,X+=Y>>>16,Y&=65535,X+=W*L,H+=X>>>16,X&=65535,X+=U*K,H+=X>>>16,X&=65535,X+=R*B,H+=X>>>16,X&=65535,H+=z*L+W*K+U*B+R*F,H&=65535,o(Y<<16|ie,H<<16|X,this.unsigned)},_.mul=_.multiply,_.divide=function(O){if(n(O)||(O=f(O)),O.isZero())throw Error("division by zero");if(t){if(!this.unsigned&&this.high===-2147483648&&O.low===-1&&O.high===-1)return this;var P=(this.unsigned?t.div_u:t.div_s)(this.low,this.high,O.low,O.high);return o(P,t.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?S:w;var z,W,U;if(this.unsigned){if(O.unsigned||(O=O.toUnsigned()),O.gt(this))return S;if(O.gt(this.shru(1)))return A;U=S}else{if(this.eq(N)){if(O.eq(T)||O.eq(k))return N;if(O.eq(N))return T;var R=this.shr(1);return z=R.div(O).shl(1),z.eq(w)?O.isNegative()?T:k:(W=this.sub(O.mul(z)),U=z.add(W.div(O)),U)}else if(O.eq(N))return this.unsigned?S:w;if(this.isNegative())return O.isNegative()?this.neg().div(O.neg()):this.neg().div(O).neg();if(O.isNegative())return this.div(O.neg()).neg();U=w}for(W=this;W.gte(O);){z=Math.max(1,Math.floor(W.toNumber()/O.toNumber()));for(var F=Math.ceil(Math.log(z)/Math.LN2),B=F<=48?1:l(2,F-48),K=a(z),L=K.mul(O);L.isNegative()||L.gt(W);)z-=B,K=a(z,this.unsigned),L=K.mul(O);K.isZero()&&(K=T),U=U.add(K),W=W.sub(L)}return U},_.div=_.divide,_.modulo=function(O){if(n(O)||(O=f(O)),t){var P=(this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,O.low,O.high);return o(P,t.get_high(),this.unsigned)}return this.sub(this.div(O).mul(O))},_.mod=_.modulo,_.rem=_.modulo,_.not=function(){return o(~this.low,~this.high,this.unsigned)},_.and=function(O){return n(O)||(O=f(O)),o(this.low&O.low,this.high&O.high,this.unsigned)},_.or=function(O){return n(O)||(O=f(O)),o(this.low|O.low,this.high|O.high,this.unsigned)},_.xor=function(O){return n(O)||(O=f(O)),o(this.low^O.low,this.high^O.high,this.unsigned)},_.shiftLeft=function(O){return n(O)&&(O=O.toInt()),(O&=63)===0?this:O<32?o(this.low<<O,this.high<<O|this.low>>>32-O,this.unsigned):o(0,this.low<<O-32,this.unsigned)},_.shl=_.shiftLeft,_.shiftRight=function(O){return n(O)&&(O=O.toInt()),(O&=63)===0?this:O<32?o(this.low>>>O|this.high<<32-O,this.high>>O,this.unsigned):o(this.high>>O-32,this.high>=0?0:-1,this.unsigned)},_.shr=_.shiftRight,_.shiftRightUnsigned=function(O){if(n(O)&&(O=O.toInt()),O&=63,O===0)return this;var P=this.high;if(O<32){var z=this.low;return o(z>>>O|P<<32-O,P>>>O,this.unsigned)}else return O===32?o(P,0,this.unsigned):o(P>>>O-32,0,this.unsigned)},_.shru=_.shiftRightUnsigned,_.shr_u=_.shiftRightUnsigned,_.toSigned=function(){return this.unsigned?o(this.low,this.high,!1):this},_.toUnsigned=function(){return this.unsigned?this:o(this.low,this.high,!0)},_.toBytes=function(O){return O?this.toBytesLE():this.toBytesBE()},_.toBytesLE=function(){var O=this.high,P=this.low;return[P&255,P>>>8&255,P>>>16&255,P>>>24,O&255,O>>>8&255,O>>>16&255,O>>>24]},_.toBytesBE=function(){var O=this.high,P=this.low;return[O>>>24,O>>>16&255,O>>>8&255,O&255,P>>>24,P>>>16&255,P>>>8&255,P&255]},e.fromBytes=function(O,P,z){return z?e.fromBytesLE(O,P):e.fromBytesBE(O,P)},e.fromBytesLE=function(O,P){return new e(O[0]|O[1]<<8|O[2]<<16|O[3]<<24,O[4]|O[5]<<8|O[6]<<16|O[7]<<24,P)},e.fromBytesBE=function(O,P){return new e(O[4]<<24|O[5]<<16|O[6]<<8|O[7],O[0]<<24|O[1]<<16|O[2]<<8|O[3],P)},ZA}var nK=qTe();const rK=Nt(nK),HTe=J5({__proto__:null,default:rK},[nK]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uc=rK||HTe;function L1(t){return uc.fromString(t,!0,16)}const iK=L1("c3a5c85c97cb3127"),cc=L1("b492b66fbe98f273"),Pr=L1("9ae16a3b2f90404f");function bI(t){return t.xor(t.shru(47))}function sK(t,e,n){const r=t.slice(e,e+n);return uc.fromBytes(Array.from(r),!0,!0)}function Gt(t,e){return sK(t,e,8)}function KW(t,e){return sK(t,e,4)}function Xn(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function sl(t,e,n=L1("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let i=e.xor(r).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function KTe(t,e,n,r,i,s){i=i.add(t),s=Xn(s.add(i).add(r),21);const a=i;return i=i.add(e),i=i.add(n),s=s.add(Xn(i,44)),[i.add(r),s.add(a)]}function jv(t,e,n,r){return KTe(Gt(t,e),Gt(t,e+8),Gt(t,e+16),Gt(t,e+24),n,r)}function XTe(t,e=t.length){if(e>=8){const n=Pr.add(e*2),r=Gt(t,0).add(Pr),i=Gt(t,e-8),s=Xn(i,37).mul(n).add(r),a=Xn(r,25).add(i).mul(n);return sl(s,a,n)}if(e>=4){const n=Pr.add(e*2),r=KW(t,0);return sl(r.shl(3).add(e),KW(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],i=t[e-1],s=n+(r<<8),a=e+(i<<2);return bI(Pr.mul(s).xor(iK.mul(a))).mul(Pr)}return Pr}function YTe(t,e=t.length){const n=Pr.add(e*2),r=Gt(t,0).mul(cc),i=Gt(t,8),s=Gt(t,e-8).mul(n),a=Gt(t,e-16).mul(Pr);return sl(Xn(r.add(i),43).add(Xn(s,30)).add(a),r.add(Xn(i.add(Pr),18)).add(s),n)}function ZTe(t,e=t.length){const n=Pr.add(e*2),r=Gt(t,0).mul(Pr),i=Gt(t,8),s=Gt(t,e-8).mul(n),a=Gt(t,e-16).mul(Pr),o=Xn(r.add(i),43).add(Xn(s,30)).add(a),l=sl(o,r.add(Xn(i.add(Pr),18)).add(s),n),c=Gt(t,16).mul(n),f=Gt(t,24),h=o.add(Gt(t,e-32)).mul(n),p=l.add(Gt(t,e-24)).mul(n);return sl(Xn(c.add(f),43).add(Xn(h,30)).add(p),c.add(Xn(f.add(r),18)).add(h),n)}function QTe(t,e=t.length){const n=uc.fromNumber(81,!0);if(e<=32)return e<=16?XTe(t,e):YTe(t,e);if(e<=64)return ZTe(t,e);let r=n,i=n.mul(cc).add(113),s=bI(i.mul(Pr).add(113)).mul(Pr),a=[uc.UZERO,uc.UZERO],o=[uc.UZERO,uc.UZERO];r=r.mul(Pr).add(Gt(t,0));let l=0;const c=(e-1>>6)*64,f=c+(e-1&63)-63;do r=Xn(r.add(i).add(a[0]).add(Gt(t,l+8)),37).mul(cc),i=Xn(i.add(a[1]).add(Gt(t,l+48)),42).mul(cc),r=r.xor(o[1]),i=i.add(a[0]).add(Gt(t,l+40)),s=Xn(s.add(o[0]),33).mul(cc),a=jv(t,l,a[1].mul(cc),r.add(o[0])),o=jv(t,l+32,s.add(o[1]),i.add(Gt(t,l+16))),[s,r]=[r,s],l+=64;while(l!==c);const h=cc.add(s.and(255).shl(1));return l=f,o[0]=o[0].add(e-1&63),a[0]=a[0].add(o[0]),o[0]=o[0].add(a[0]),r=Xn(r.add(i).add(a[0]).add(Gt(t,l+8)),37).mul(h),i=Xn(i.add(a[1]).add(Gt(t,l+48)),42).mul(h),r=r.xor(o[1].mul(9)),i=i.add(a[0].mul(9).add(Gt(t,l+40))),s=Xn(s.add(o[0]),33).mul(h),a=jv(t,l,a[1].mul(h),r.add(o[0])),o=jv(t,l+32,s.add(o[1]),i.add(Gt(t,l+16))),[s,r]=[r,s],sl(sl(a[0],o[0],h).add(bI(i).mul(iK)).add(s),sl(a[1],o[1],h).add(r),h)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kl(t,e){return e==="string"?al(t):Qc([t],e)}function JTe(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Qc(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Mc(t)),fe().getBool("DEBUG")&&ITe(t,e),JTe(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Wr(){return fe().platform.now()}function al(t,e="utf-8"){return e=e||"utf-8",fe().platform.encode(t,e)}function fl(t,e="utf-8"){return e=e||"utf-8",fe().platform.decode(t,e)}function os(t){return fe().platform.isTypedArray!=null?fe().platform.isTypedArray(t):tK(t)}function Mc(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||GO(t)||t==null||os(t)&&n)e.push(t);else if(Array.isArray(t)||os(t))for(let r=0;r<t.length;++r)Mc(t[r],e,n);else{let r=-1;for(const i of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(i)&&(r=Math.max(r,Number(i)));for(let i=0;i<=r;i++)Mc(t[i],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class e2e{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new n2e)}profileKernel(e,n,r){let i;const s=()=>{i=r()};let a;const o=Wr();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(s);else{s();for(const c of i)c.dataSync();a=Promise.resolve({kernelMs:Wr()-o})}if(fe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<i.length;c++){const f=i[c];f.data().then(h=>{t2e(h,f.dtype,e)})}return{kernelName:e,outputs:i,inputs:n,timeMs:a.then(c=>c.kernelMs),extraInfo:a.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:i,inputs:s,extraInfo:a}=e;r.forEach(o=>{Promise.all([o.data(),i,a]).then(l=>{this.logger.logKernelProfile(n,o,l[0],l[1],s,l[2])})})}}function t2e(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const i=t[r];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${n}'`),!0}return!1}class n2e{logKernelProfile(e,n,r,i,s,a){const o=typeof i=="number"?xf(`${i}ms`,9):i.error,l=xf(e,25),c=n.rank,f=n.size,h=xf(n.shape.toString(),14);let p="";for(const g in s){const y=s[g];if(y!=null){const b=y.shape||n.shape,v=b.length;p+=`${g}: ${v}D ${v>0?b:""} `}}console.log(`%c${l}	%c${o}	%c${c}D ${h}	%c${f}	%c${p}	%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r2e(t,e,n){const r={},i={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const c=t[l],f=c.inputs;for(const h in f){const p=f[h];let g=!1;for(let y=0;y<e.length;y++)if(r[p.id]){c.outputs.forEach(b=>r[b.id]=!0),g=!0,i[c.id]=!0;break}if(g)break}}const s={};s[n.id]=!0;const a={};for(let l=t.length-1;l>=0;l--){const c=t[l],f=c.inputs;for(let h=0;h<c.outputs.length;h++)if(s[c.outputs[h].id]){for(const p in f)s[f[p].id]=!0,a[c.id]=!0;break}}const o=[];for(let l=0;l<t.length;l++){const c=t[l];if(i[c.id]&&a[c.id]){const f={};for(const p in c.inputs){const g=c.inputs[p];r[g.id]&&(f[p]=g)}const h=Object.assign({},c);h.inputs=f,h.outputs=c.outputs,o.push(h)}}return o}function i2e(t,e,n,r){for(let i=e.length-1;i>=0;i--){const s=e[i],a=[];if(s.outputs.forEach(l=>{const c=t[l.id];c!=null?a.push(c):a.push(null)}),s.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);const o=s.gradient(a);for(const l in s.inputs){if(!(l in o))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(o)}.`);const c=n(()=>o[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const f=s.inputs[l];if(!$t(c.shape,f.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${f.shape}'`);if(t[f.id]==null)t[f.id]=c;else{const h=t[f.id];t[f.id]=r(h,c),h.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XW=20,Qd=3,QA=7;function s2e(t,e,n,r){const i=je(e),s=a2e(t,e,n,i),a=e.length,o=l0(t,e,n,i,s),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${a}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(o.map(c=>"    "+c).join(`
`)),l.join(`
`)}function a2e(t,e,n,r){const i=be(e),s=r[r.length-1],a=new Array(s).fill(0),o=e.length,l=n==="complex64"?cp(t):t;if(o>1)for(let c=0;c<i/s;c++){const f=c*s;for(let h=0;h<s;h++)a[h]=Math.max(a[h],lp(l[f+h],0,n).length)}return a}function lp(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(QA))} + ${parseFloat(t[1].toFixed(QA))}j`:Um(t)?r=`'${t}'`:n==="bool"?r=aK(t):r=parseFloat(t.toFixed(QA)).toString(),xf(r,e)}function aK(t){return t===0?"false":"true"}function l0(t,e,n,r,i,s=!0){const a=n==="complex64"?2:1,o=e[0],l=e.length;if(l===0){if(n==="complex64"){const b=cp(t);return[lp(b[0],0,n)]}return n==="bool"?[aK(t[0])]:[t[0].toString()]}if(l===1){if(o>XW){const v=Qd*a;let w=Array.from(t.slice(0,v)),S=Array.from(t.slice((o-Qd)*a,o*a));return n==="complex64"&&(w=cp(w),S=cp(S)),["["+w.map((T,A)=>lp(T,i[A],n)).join(", ")+", ..., "+S.map((T,A)=>lp(T,i[o-Qd+A],n)).join(", ")+"]"]}return["["+(n==="complex64"?cp(t):Array.from(t)).map((v,w)=>lp(v,i[w],n)).join(", ")+"]"]}const c=e.slice(1),f=r.slice(1),h=r[0]*a,p=[];if(o>XW){for(let b=0;b<Qd;b++){const v=b*h,w=v+h;p.push(...l0(t.slice(v,w),c,n,f,i,!1))}p.push("...");for(let b=o-Qd;b<o;b++){const v=b*h,w=v+h;p.push(...l0(t.slice(v,w),c,n,f,i,b===o-1))}}else for(let b=0;b<o;b++){const v=b*h,w=v+h;p.push(...l0(t.slice(v,w),c,n,f,i,b===o-1))}const g=l===2?",":"";p[0]="["+(o>0?p[0]+g:"");for(let b=1;b<p.length-1;b++)p[b]=" "+p[b]+g;let y=`,
`;for(let b=2;b<l;b++)y+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(s?"":y),p}function cp(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class or{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=be(e),r!=null){const i=r.length;G(i===this.size,()=>`Length of values '${i}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||bn(n,this.size),this.strides=je(e)}set(e,...n){n.length===0&&(n=[0]),G(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const i of e){if(i<0||i>=this.shape[n]){const s=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(s)}n++}let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=this.strides[i]*e[i];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return Ss().makeTensor(this.values,this.shape,this.dtype)}}let Ss=null,sf=null;function o2e(t){Ss=t}function l2e(t){sf=t}class Mn{constructor(e,n,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=be(e),this.strides=je(e),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return sf.buffer(this.shape,this.dtype,e)}bufferSync(){return sf.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return $s(this.shape,e,this.dtype==="complex64")}arraySync(){return $s(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=Ss().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>fl(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Ss().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Ss().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>fl(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Ss().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Ss().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return sf.print(this,e)}clone(){return this.throwIfDisposed(),sf.clone(this)}toString(e=!1){const n=this.dataSync();return s2e(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),sf.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),Ss().makeVariable(this,e,n,r)}}Object.defineProperty(Mn,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function ge(){return qO("Tensor",()=>Mn)}ge();class Eb extends Mn{constructor(e,n,r,i){super(e.shape,e.dtype,e.dataId,i),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!$t(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Ss().disposeTensor(this),this.dataId=e.dataId,Ss().incRef(this,null)}dispose(){Ss().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Eb,Symbol.hasInstance,{value:t=>t instanceof Mn&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var YW;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(YW||(YW={}));var xI;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(xI||(xI={}));var wI;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(wI||(wI={}));var SI;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(SI||(SI={}));var CI;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(CI||(CI={}));const c2e={float32:SI,int32:xI,bool:wI,complex64:CI};function hi(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return c2e[t][e]}function D_(t){return hi(t,"int32")}function oK(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function lK(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wn(t,e){if(t.dtype===e.dtype)return[t,e];const n=hi(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function cK(t){const e=[];return uK(t,e,new Set),e}function uK(t,e,n){if(t==null)return;if(t instanceof Mn){e.push(t);return}if(!u2e(t))return;const r=t;for(const i in r){const s=r[i];n.has(s)||(n.add(s),uK(s,e,n))}}function u2e(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JA(t){return t.kernelName!=null}class ZW{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Yf{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new ZW}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(Ni(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new e2e(this.backendInstance),!0}setupRegisteredKernels(){qW(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){qW(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof jO)&&typeof r.then=="function"){const i=++this.pendingBackendInitId,s=r.then(a=>i<this.pendingBackendInitId?!1:(this.registry[e]=a,this.pendingBackendInit=null,!0)).catch(a=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,Ni(`Initialization of backend ${e} failed`),Ni(a.stack||a.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Ni(`Initialization of backend ${e} failed`),Ni(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:i,asyncInit:s}=this.initializeBackend(r);if(s||i)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),i=r.backend,s=this.readSync(n),a=i.refCount(n);i.disposeData(n,!0),r.backend=e,e.move(n,s,r.shape,r.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let i;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(i),()=>(i=n(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(e,n,r){e();try{const i=r();return n(),i}catch(i){throw n(),i}}nextTensorId(){return Yf.nextTensorId++}nextVariableId(){return Yf.nextVariableId++}clone(e){const n=re.runKernel(ug,{x:e}),r={x:e},i=a=>({x:()=>{const o="float32",l={x:a},c={dtype:o};return re.runKernel(Zm,l,c)}}),s=[];return this.addTapeNode(this.state.activeScope.name,r,[n],i,s,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(WW(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const i=this.backend.numDataIds();let s=0;r.forEach(l=>{s+=l.dtype==="complex64"?3:1});const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=i-n-s-a;if(o>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${o} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const i=this.isTapeOn(),s=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let o;this.backendName==null&&this.backend;let l;const c=JA(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(JA(e)){const{kernelName:y,inputs:b,attrs:v}=e;this.backendName==null&&this.backend;const w=WW(y,this.backendName);G(w!=null,()=>`Cannot find registered kernel '${y}' for backend '${this.backendName}'`),o=()=>{const S=this.backend.numDataIds();l=w.kernelFunc({inputs:b,attrs:v,backend:this.backend});const T=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(y,S,T);const A=T.map(k=>k.rank!=null?k:this.makeTensorFromTensorInfo(k));if(i){const k=this.getTensorsForGradient(y,b,A);r=this.saveTensorsForBackwardMode(k)}return A}}else{const{forwardFunc:y}=e,b=v=>{i&&(r=v.map(w=>this.keep(this.clone(w))))};o=()=>{const v=this.backend.numDataIds();l=this.tidy(()=>y(this.backend,b));const w=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,v,w),w}}const{inputs:f,attrs:h}=e,p=JA(e)?null:e.backwardsFunc;let g;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=o():(g=this.profiler.profileKernel(c,f,()=>o()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(g),n=g.outputs)}),i&&this.addTapeNode(c,f,n,p,r,h),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(f).map(y=>f[y]!=null?f[y].shape:null),outputShapes:n.map(y=>y.shape),kernelTimeMs:g.timeMs,extraInfo:g.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const i=GW(e);if(i!=null){const s=i.inputsToSave||[],a=i.outputsToSave||[];let o;i.saveAllInputs?(G(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),o=Object.keys(n).map(c=>n[c])):o=s.map(c=>n[c]);const l=r.filter((c,f)=>a[f]);return o.concat(l)}return[]}makeTensor(e,n,r,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;let s=e;r==="string"&&Um(e[0])&&(s=e.map(l=>al(l)));const a=i.write(s,n,r),o=new Mn(n,r,a,this.nextTensorId());if(this.trackTensor(o,i),r==="string"){const l=this.state.tensorInfo.get(a),c=OTe(s);this.state.numBytes+=c-l.bytes,l.bytes=c}return o}makeTensorFromDataId(e,n,r,i){r=r||"float32";const s={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(s,i)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:i,dtype:s}=e,a=new Mn(i,s,r,this.nextTensorId());return this.trackTensor(a,n),a}makeVariable(e,n=!0,r,i){r=r||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.cast(i));const s=new Eb(e,n,r,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*Cb(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof Eb||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*Cb(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const i of this.state.activeProfile.kernels)i.kernelTimeMs=await i.kernelTimeMs,i.extraInfo=await i.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,i,s,a){const o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:s},l=GW(e);l!=null&&(i=l.gradFunc),i!=null&&(o.gradient=c=>(c=c.map((f,h)=>{if(f==null){const p=r[h],g=wr(p.size,p.dtype);return this.makeTensor(g,p.shape,p.dtype)}return f}),i(c.length>1?c:c[0],s,a))),this.state.activeTape.push(o)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=cK(e),r=new Set(n.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){const a=this.state.activeScope.track[s];!a.kept&&!r.has(a.id)&&a.dispose()}const i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(s=>{!s.kept&&s.scopeId===i.id&&this.track(s)})}gradients(e,n,r,i=!1){if(G(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));G(s instanceof Mn,()=>"The result y returned by f() must be a tensor.");const a=r2e(this.state.activeTape,n,s);if(!i&&a.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const o={};o[s.id]=r??f2e(s.shape),i2e(o,a,c=>this.tidy(c),h2e);const l=n.map(c=>o[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const f of c.saved)f.dispose()}),this.state.activeTape=null),{value:s,grads:l}})}customGrad(e){return G(pI(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{G(n.every(o=>o instanceof Mn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const i={};n.forEach((o,l)=>{i[l]=o});const s=(o,l)=>(r=e(...n,l),G(r.value instanceof Mn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),G(pI(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),a=(o,l)=>{const c=r.gradFunc(o,l),f=Array.isArray(c)?c:[c];G(f.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),G(f.every(p=>p instanceof Mn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const h={};return f.forEach((p,g)=>{h[g]=()=>p}),h};return this.runKernelFunc({forwardFunc:s,backwardsFunc:a,inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Wr(),r=await this.backend.time(e);return r.wallMs=Wr()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new ZW;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Yf.nextTensorId=0;Yf.nextVariableId=0;function f2e(t){const e=WO(be(t),"float32");return re.makeTensor(e,t,"float32")}function fK(){const t=O9();if(t._tfengine==null){const e=new DTe(t);t._tfengine=new Yf(e)}return FTe(t._tfengine.ENV),o2e(()=>t._tfengine),t._tfengine}const re=fK();function h2e(t,e){const n={a:t,b:e};return re.runKernel(Ch,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d2e(){return typeof navigator<"u"&&navigator!=null}function hK(t){if(t||d2e()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function dK(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yr=fe();Yr.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Yr.registerFlag("IS_BROWSER",()=>dK());Yr.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Yr.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Yr.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Yr.registerFlag("PROD",()=>!1);Yr.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Yr.getBool("DEBUG"));Yr.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Yr.registerFlag("IS_TEST",()=>!1);Yr.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Yr.getBool("DEBUG"));Yr.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Yr.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Yr.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F1(t,e){let n=t;if(os(t))return e==="string"?[]:[t.length];if(oK(t)){const i=t.channels||"RGBA";return[t.height,t.width*i.length]}else if(lK(t))return[t.buffer.size/(e==null?4:Cb(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||os(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&fe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&pK(t,r,[]),r}function pK(t,e,n){if(n=n||[],!Array.isArray(t)&&!os(t)){G(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}G(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),G(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let i=0;i<t.length;++i)pK(t[i],r,n.concat(i))}function QW(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function Z(t,e,n,r="numeric"){if(t instanceof ge())return QW(r,t.dtype,e,n),t;let i=wh(t);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),QW(r,i,e,n),t==null||!os(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const s=F1(t,i);!os(t)&&!Array.isArray(t)&&(t=[t]);const o=i!=="string"?Qc(t,i):Mc(t,[],!0);return re.makeTensor(o,s,i)}function mK(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((s,a)=>Z(s,`${e}[${a}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p2e="__op";function ae(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+p2e;const i=(...s)=>{re.startScope(n);try{const a=r(...s);return GO(a)&&console.error("Cannot return a Promise inside of tidy."),re.endScope(a),a}catch(a){throw re.endScope(null),a}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m2e(t,e){const n=Z(t,"real","complex"),r=Z(e,"imag","complex");UO(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const i={real:n,imag:r};return re.runKernel(e_,i)}const Zf=ae({complex_:m2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B1(t,e,n,r){if(r==null)r=wh(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(lK(t)||oK(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return re.backend.createTensorFromGPUData(t,e||n,r)}if(!os(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){yo(e);const i=be(e),s=be(n);G(i===s,()=>`Based on the provided shape, [${e}], the tensor should have ${i} values but has ${s}`);for(let a=0;a<n.length;++a){const o=n[a],l=a===n.length-1?o!==be(e.slice(a)):!0;G(n[a]===e[a]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!os(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Qc(t,r):Mc(t,[],!0),re.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gK(t,e,n){const r=F1(t,n);return B1(t,e,r,n)}class Th{static join(e){return new Th(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>os(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const i=e[r];r!==e.length-1&&i.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const s=n+i.byteLength;this.shards.push({buffer:i,start:n,end:s}),n=s}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const i=n-e,s=new ArrayBuffer(i),a=new Uint8Array(s);let o=0;for(let l=r;l<this.shards.length;l++){const c=this.shards[l],h=e+o-c.start,p=o,y=Math.min(n,c.end)-c.start,b=new Uint8Array(c.buffer,h,y-h);if(a.set(b,p),o+=b.length,n<c.end)break}return s}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(i){return e<i.start?-1:e>=i.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=g2e(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function g2e(t,e){let n=0,r=t.length;for(;n<=r;){const i=Math.floor((r-n)/2)+n,s=e(t[i]);if(s===0)return i;s<0?r=i:n=i+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vs(){return re}function JW(){return re.memory()}function ce(t,e){return re.tidy(t,e)}function ft(t){cK(t).forEach(n=>n.dispose())}function ia(t){return re.keep(t)}function eG(t){return re.setBackend(t)}function yK(t,e,n=1){return re.registerBackend(t,e,n)}function y2e(){return re.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tG=4;async function nG(t,e){const n=[],r=[],i=Array.isArray(t)?t.map(a=>a.name):Object.keys(t);for(let a=0;a<i.length;++a){const o=i[a],l=Array.isArray(t)?t[a].tensor:t[o];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${o}': ${l.dtype}`);const c={name:o,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const f=new Promise(async h=>{const p=await l.bytes(),g=p.reduce((v,w)=>v+w.length,0)+tG*p.length,y=new Uint8Array(g);let b=0;for(let v=0;v<p.length;v++){const w=p[v],S=new Uint8Array(new Uint32Array([w.length]).buffer);y.set(S,b),b+=tG,y.set(w,b),b+=w.length}h(y)});r.push(f)}else r.push(l.data());e!=null&&(c.group=e),n.push(c)}const s=await Promise.all(r);return{data:v2e(s),specs:n}}function v2e(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(s=>{if(e+=s.byteLength,n.push(s.byteLength===s.buffer.byteLength?s:new s.constructor(s)),!(s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${s.constructor.name}`)});const r=new Uint8Array(e);let i=0;return n.forEach(s=>{r.set(new Uint8Array(s.buffer),i),i+=s.byteLength}),r.buffer}const M_=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function rG(t){return M_?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function b2e(t){if(M_)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function x2e(t){if(M_){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function w2e(t){return Th.join(t)}function vK(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:rG(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:rG(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new Th(t.weightData).byteLength}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _r{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return _r.instance==null&&(_r.instance=new _r),_r.instance}static registerSaveRouter(e){_r.getInstance().saveRouters.push(e)}static registerLoadRouter(e){_r.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return _r.getHandlers(e,"save")}static getLoadHandlers(e,n){return _r.getHandlers(e,"load",n)}static getHandlers(e,n,r){const i=[];return(n==="load"?_r.getInstance().loadRouters:_r.getInstance().saveRouters).forEach(a=>{const o=a(e,r);o!==null&&i.push(o)}),i}}const S2e=t=>_r.getSaveHandlers(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TI="tensorflowjs",kI=1,xc="models_store",el="model_info_store";function bK(){if(!fe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function AI(t){const e=t.result;e.createObjectStore(xc,{keyPath:"modelPath"}),e.createObjectStore(el,{keyPath:"modelPath"})}class Pc{constructor(e){if(this.indexedDB=bK(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,i)=>{const s=this.indexedDB.open(TI,kI);s.onupgradeneeded=()=>AI(s),s.onsuccess=()=>{const a=s.result;if(n==null){const o=a.transaction(xc,"readonly"),c=o.objectStore(xc).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return a.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(c.result.modelArtifacts)},c.onerror=f=>(a.close(),i(c.error)),o.oncomplete=()=>a.close()}else{n.weightData=Th.join(n.weightData);const o=vK(n),l=a.transaction(el,"readwrite");let c=l.objectStore(el),f;try{f=c.put({modelPath:this.modelPath,modelArtifactsInfo:o})}catch(p){return i(p)}let h;f.onsuccess=()=>{h=a.transaction(xc,"readwrite");const p=h.objectStore(xc);let g;try{g=p.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:o})}catch(y){return i(y)}g.onsuccess=()=>r({modelArtifactsInfo:o}),g.onerror=y=>{c=l.objectStore(el);const b=c.delete(this.modelPath);b.onsuccess=()=>(a.close(),i(g.error)),b.onerror=v=>(a.close(),i(g.error))}},f.onerror=p=>(a.close(),i(f.error)),l.oncomplete=()=>{h==null?a.close():h.oncomplete=()=>a.close()}}},s.onerror=a=>i(s.error)})}}Pc.URL_SCHEME="indexeddb://";const xK=t=>fe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Pc.URL_SCHEME)?C2e(t.slice(Pc.URL_SCHEME.length)):null;_r.registerSaveRouter(xK);_r.registerLoadRouter(xK);function C2e(t){return new Pc(t)}function T2e(t){return t.startsWith(Pc.URL_SCHEME)?t.slice(Pc.URL_SCHEME.length):t}class k2e{constructor(){this.indexedDB=bK()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(TI,kI);r.onupgradeneeded=()=>AI(r),r.onsuccess=()=>{const i=r.result,s=i.transaction(el,"readonly"),o=s.objectStore(el).getAll();o.onsuccess=()=>{const l={};for(const c of o.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},o.onerror=l=>(i.close(),n(o.error)),s.oncomplete=()=>i.close()},r.onerror=i=>n(r.error)})}async removeModel(e){return e=T2e(e),new Promise((n,r)=>{const i=this.indexedDB.open(TI,kI);i.onupgradeneeded=()=>AI(i),i.onsuccess=()=>{const s=i.result,a=s.transaction(el,"readwrite"),o=a.objectStore(el),l=o.get(e);let c;l.onsuccess=()=>{if(l.result==null)return s.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const f=o.delete(e),h=()=>{c=s.transaction(xc,"readwrite");const g=c.objectStore(xc).delete(e);g.onsuccess=()=>n(l.result.modelArtifactsInfo),g.onerror=y=>r(l.error)};f.onsuccess=h,f.onerror=p=>(h(),s.close(),r(l.error))}},l.onerror=f=>(s.close(),r(l.error)),a.oncomplete=()=>{c==null?s.close():c.oncomplete=()=>s.close()}},i.onerror=s=>r(i.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ga="/",af="tensorflowjs_models",wK="info",A2e="model_topology",E2e="weight_specs",$2e="weight_data",I2e="model_metadata";function SK(t){return{info:[af,t,wK].join(Ga),topology:[af,t,A2e].join(Ga),weightSpecs:[af,t,E2e].join(Ga),weightData:[af,t,$2e].join(Ga),modelMetadata:[af,t,I2e].join(Ga)}}function CK(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function N2e(t){const e=t.split(Ga);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Ga)}function O2e(t){return t.startsWith(Lc.URL_SCHEME)?t.slice(Lc.URL_SCHEME.length):t}class Lc{constructor(e){if(!fe().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=SK(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=vK(e),s=Th.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,b2e(s));const a={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:i}}catch{throw CK(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=i;const s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){const o=JSON.parse(s);n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,o.signature!=null&&(n.signature=o.signature),o.userDefinedMetadata!=null&&(n.userDefinedMetadata=o.userDefinedMetadata),o.modelInitializer!=null&&(n.modelInitializer=o.modelInitializer),o.initializerSignature!=null&&(n.initializerSignature=o.initializerSignature),o.trainingConfig!=null&&(n.trainingConfig=o.trainingConfig)}const a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=x2e(a),n}}Lc.URL_SCHEME="localstorage://";const TK=t=>fe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Lc.URL_SCHEME)?_2e(t.slice(Lc.URL_SCHEME.length)):null;_r.registerSaveRouter(TK);_r.registerLoadRouter(TK);function _2e(t){return new Lc(t)}class R2e{constructor(){G(fe().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),G(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=af+Ga,r=Ga+wK;for(let i=0;i<this.LS.length;++i){const s=this.LS.key(i);if(s.startsWith(n)&&s.endsWith(r)){const a=N2e(s);e[a]=JSON.parse(this.LS.getItem(s))}}return e}async removeModel(e){e=O2e(e);const n=SK(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return CK(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iG="://";class Ws{constructor(){this.managers={}}static getInstance(){return Ws.instance==null&&(Ws.instance=new Ws),Ws.instance}static registerManager(e,n){G(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(iG)&&(e=e.slice(0,e.indexOf(iG))),G(e.length>0,()=>"scheme must not be an empty string.");const r=Ws.getInstance();G(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=Ws.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Ws.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D2e{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!fe().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const i=this.functionRefs[r.data.index];i(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return tK(e)}}if(fe().get("IS_BROWSER")){fe().setPlatform("browser",new D2e);try{Ws.registerManager(Lc.URL_SCHEME,new R2e)}catch{}try{Ws.registerManager(Pc.URL_SCHEME,new k2e)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M2e={importFetch:()=>require("node-fetch")};let eE;class P2e{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return fe().global.fetch!=null?fe().global.fetch(e,n):(eE==null&&(eE=M2e.importFetch()),eE(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}fe().get("IS_NODE")&&!fe().get("IS_BROWSER")&&fe().setPlatform("node",new P2e);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function at(t,e="float32",n){return e=e||"float32",yo(t),new or(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L2e(t,e){const n=Z(t,"x","cast");if(!NTe(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},i={dtype:e};return re.runKernel(Zm,r,i)}const Re=ae({cast_:L2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F2e(t){const n={x:Z(t,"x","clone","string_or_numeric")};return re.runKernel(ug,n)}const Ac=ae({clone_:F2e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B2e(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fK();const z2e={buffer:at,cast:Re,clone:Ac,print:B2e};l2e(z2e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j2e(t,e){let n=Z(t,"a","add"),r=Z(e,"b","add");[n,r]=wn(n,r);const i={a:n,b:r};return re.runKernel(Ch,i)}const Ae=ae({add_:j2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V2e(t,e){let n=Z(t,"a","floorDiv"),r=Z(e,"b","floorDiv");[n,r]=wn(n,r);const i={a:n,b:r};return re.runKernel(lg,i)}const kK=ae({floorDiv_:V2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U2e(t,e){let n=Z(t,"a","div"),r=Z(e,"b","div");if([n,r]=wn(n,r),n.dtype==="int32"&&r.dtype==="int32")return kK(n,r);const i={a:n,b:r},s={};return re.runKernel(ng,i,s)}const We=ae({div_:U2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W2e(t,e){let n=Z(t,"a","mul"),r=Z(e,"b","mul");[n,r]=wn(n,r);const i={a:n,b:r};return re.runKernel(bg,i)}const ne=ae({mul_:W2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G2e(t){const e=Z(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return re.runKernel(Wx,n)}else{const n={x:e};return re.runKernel(Lx,n)}}const Rr=ae({abs_:G2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q2e(t){const n={x:Z(t,"x","acos")};return re.runKernel(Wm,n)}const H2e=ae({acos_:q2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K2e(t){const n={x:Z(t,"x","acosh")};return re.runKernel(Gm,n)}const X2e=ae({acosh_:K2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y2e(t,e=null,n=!1){const i={x:Z(t,"x","all","bool")},s={axis:e,keepDims:n};return re.runKernel(KO,i,s)}const AK=ae({all_:Y2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z2e(t,e=null,n=!1){const i={x:Z(t,"x","any","bool")},s={axis:e,keepDims:n};return re.runKernel(XO,i,s)}const EI=ae({any_:Z2e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q2e(t,e=0){const r={x:Z(t,"x","argMax")},i={axis:e};return re.runKernel(Fx,r,i)}const ym=ae({argMax_:Q2e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J2e(t,e=0){const r={x:Z(t,"x","argMin")},i={axis:e};return re.runKernel(Bx,r,i)}const eke=ae({argMin_:J2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tke(t){const n={x:Z(t,"x","asin")};return re.runKernel(qm,n)}const nke=ae({asin_:tke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rke(t){const n={x:Z(t,"x","asinh")};return re.runKernel(Hm,n)}const ike=ae({asinh_:rke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ske(t){const n={x:Z(t,"x","atan")};return re.runKernel(Km,n)}const ake=ae({atan_:ske});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oke(t,e){let n=Z(t,"a","atan2"),r=Z(e,"b","atan2");[n,r]=wn(n,r);const i={a:n,b:r};return re.runKernel(Ym,i)}const lke=ae({atan2_:oke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cke(t){const n={x:Z(t,"x","atanh")};return re.runKernel(Xm,n)}const uke=ae({atanh_:cke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bg(t,e,n,r,i="NHWC",s){const a=t[3],o=[...e,a],l=bo(i);return cr(t,o,n,s,r,null,null,l)}function us(t,e,n,r,i,s,a="channelsLast"){const[o,l]=vm(e);let c;if(a==="channelsLast")c=[o,l,t[3],t[3]];else if(a==="channelsFirst")c=[o,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${a}`);return cr(t,c,n,r,i,s,!1,a)}function vo(t,e,n,r,i,s,a="NDHWC"){const[o,l,c]=$I(e);let f,h;if(a==="NDHWC")h="channelsLast",f=[o,l,c,t[4],t[4]];else if(a==="NCDHW")h="channelsFirst",f=[o,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${a}`);return Al(t,f,n,r,i,!1,h,s)}function cr(t,e,n,r,i,s,a=!1,o="channelsLast"){let[l,c,f,h]=[-1,-1,-1,-1];if(o==="channelsLast")[l,c,f,h]=t;else if(o==="channelsFirst")[l,h,c,f]=t;else throw new Error(`Unknown dataFormat ${o}`);const[p,g,,y]=e,[b,v]=vm(n),[w,S]=vm(r),T=Sf(p,w),A=Sf(g,S),{padInfo:k,outHeight:E,outWidth:I}=dke(i,c,f,b,v,T,A,s,o),N=a?y*h:y;let _;return o==="channelsFirst"?_=[l,N,E,I]:o==="channelsLast"&&(_=[l,E,I,N]),{batchSize:l,dataFormat:o,inHeight:c,inWidth:f,inChannels:h,outHeight:E,outWidth:I,outChannels:N,padInfo:k,strideHeight:b,strideWidth:v,filterHeight:p,filterWidth:g,effectiveFilterHeight:T,effectiveFilterWidth:A,dilationHeight:w,dilationWidth:S,inShape:t,outShape:_,filterShape:e}}function Al(t,e,n,r,i,s=!1,a="channelsLast",o){let[l,c,f,h,p]=[-1,-1,-1,-1,-1];if(a==="channelsLast")[l,c,f,h,p]=t;else if(a==="channelsFirst")[l,p,c,f,h]=t;else throw new Error(`Unknown dataFormat ${a}`);const[g,y,b,,v]=e,[w,S,T]=$I(n),[A,k,E]=$I(r),I=Sf(g,A),N=Sf(y,k),_=Sf(b,E),{padInfo:D,outDepth:O,outHeight:P,outWidth:z}=pke(i,c,f,h,w,S,T,I,N,_,o),W=s?v*p:v;let U;return a==="channelsFirst"?U=[l,W,O,P,z]:a==="channelsLast"&&(U=[l,O,P,z,W]),{batchSize:l,dataFormat:a,inDepth:c,inHeight:f,inWidth:h,inChannels:p,outDepth:O,outHeight:P,outWidth:z,outChannels:W,padInfo:D,strideDepth:w,strideHeight:S,strideWidth:T,filterDepth:g,filterHeight:y,filterWidth:b,effectiveFilterDepth:I,effectiveFilterHeight:N,effectiveFilterWidth:_,dilationDepth:A,dilationHeight:k,dilationWidth:E,inShape:t,outShape:U,filterShape:e}}function fke(t,e,n,r,i){r==null&&(r=P_(t,e,n));const s=t[0],a=t[1],o=bm((s-e+2*r)/n+1,i),l=bm((a-e+2*r)/n+1,i);return[o,l]}function hke(t,e,n,r,i,s){i==null&&(i=P_(t,e[0],r[0]));const a=[0,0,0,n];for(let o=0;o<3;o++)t[o]+2*i>=e[o]&&(a[o]=bm((t[o]-e[o]+2*i)/r[o]+1,s));return a}function P_(t,e,n,r=1){const i=Sf(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function vm(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function $I(t){return typeof t=="number"?[t,t,t]:t}function Sf(t,e){return e<=1?t:t+(t-1)*(e-1)}function dke(t,e,n,r,i,s,a,o,l){let c,f,h;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const g=fke([e,n],s,r,t,o);f=g[0],h=g[1]}else if(t==="same"){f=Math.ceil(e/r),h=Math.ceil(n/i);const p=Math.max(0,(f-1)*r+s-e),g=Math.max(0,(h-1)*i+a-n),y=Math.floor(p/2),b=p-y,v=Math.floor(g/2),w=g-v;c={top:y,bottom:b,left:v,right:w,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},f=Math.ceil((e-s+1)/r),h=Math.ceil((n-a+1)/i);else if(typeof t=="object"){const p=l==="channelsLast"?t[1][0]:t[2][0],g=l==="channelsLast"?t[1][1]:t[2][1],y=l==="channelsLast"?t[2][0]:t[3][0],b=l==="channelsLast"?t[2][1]:t[3][1];c={top:p,bottom:g,left:y,right:b,type:p===0&&g===0&&y===0&&b===0?"VALID":"EXPLICIT"},f=bm((e-s+p+g)/r+1,o),h=bm((n-a+y+b)/i+1,o)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:f,outWidth:h}}function pke(t,e,n,r,i,s,a,o,l,c,f){let h,p,g,y;if(t==="valid"&&(t=0),typeof t=="number"){h={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const v=hke([e,n,r,1],[o,l,c],1,[i,s,a],t,f);p=v[0],g=v[1],y=v[2]}else if(t==="same"){p=Math.ceil(e/i),g=Math.ceil(n/s),y=Math.ceil(r/a);const b=(p-1)*i+o-e,v=(g-1)*s+l-n,w=(y-1)*a+c-r,S=Math.floor(b/2),T=b-S,A=Math.floor(v/2),k=v-A,E=Math.floor(w/2),I=w-E;h={top:A,bottom:k,left:E,right:I,front:S,back:T,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:h,outDepth:p,outHeight:g,outWidth:y}}function bm(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function Fc(t){const[e,n,r]=vm(t);return e===1&&n===1&&r===1}function Cr(t,e){return Fc(t)||Fc(e)}function Bc(t){return vm(t).every(e=>e>0)}function bo(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Qr(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")G(Xf(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(i=>{G(Xf(i),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${i}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mke(t,e){const r={x:Z(t,"x","reshape","string_or_numeric")},i={shape:e};return re.runKernel(T1,r,i)}const se=ae({reshape_:mke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gke(t,e,n,r,i){const s=Z(t,"x","avgPool","float32"),a=1;G(Cr(n,a),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`);let o=s,l=!1;s.rank===3&&(l=!0,o=se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),G(o.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${o.rank}.`),Qr("avgPool",r,i);const c={x:o},f={filterSize:e,strides:n,pad:r,dimRoundingMode:i};let h=re.runKernel(zx,c,f);return h=Re(h,s.dtype),l?se(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const L_=ae({avgPool_:gke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yke(t,e,n,r,i,s="NDHWC"){const a=Z(t,"x","avgPool3d","float32");let o=a,l=!1;a.rank===4&&(l=!0,o=se(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),G(o.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${o.rank}.`),G(s==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),G(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Qr("avgPool3d",r,i);const c={x:o},f={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:s};let h=re.runKernel(jx,c,f);return h=Re(h,o.dtype),l?se(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const vke=ae({avgPool3d_:yke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bke(t,e=0){G(t.length>=1,()=>"Pass at least one tensor to concat");const n=mK(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(s=>{if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${s.dtype}. `)}),n.length===1)return Ac(n[0]);const r=n,i={axis:e};return re.runKernel(Gx,r,i)}const Xr=ae({concat_:bke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xke(t,e,n=!1,r=!1){let i=Z(t,"a","matMul"),s=Z(e,"b","matMul");[i,s]=wn(i,s);const a={a:i,b:s},o={transposeA:n,transposeB:r};return re.runKernel(Vx,a,o)}const kt=ae({matMul_:xke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wke(t){const n={x:Z(t,"x","sigmoid","float32")};return re.runKernel(Ng,n)}const kh=ae({sigmoid_:wke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ske(t,e,n){const r=Z(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const i={x:r},s={begin:e,size:n};return re.runKernel(I1,i,s)}const qt=ae({slice_:Ske});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cke(t){const n={x:Z(t,"x","tanh","float32")};return re.runKernel(Pg,n)}const z1=ae({tanh_:Cke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tke(t,e,n){const r=Z(t,"x","batchToSpaceND"),i=e.reduce((o,l)=>o*l);G(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),G(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),G(r.shape[0]%i===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${i}`);const s={x:r},a={blockShape:e,crops:n};return re.runKernel(Ux,s,a)}const F_=ae({batchToSpaceND_:Tke});function kke(t){let e;return t.rank===0||t.rank===1?e=se(t,[1,1,1,t.size]):t.rank===2?e=se(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=se(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ake(t,e,n,r,i,s){s==null&&(s=.001);const a=Z(t,"x","batchNorm"),o=Z(e,"mean","batchNorm"),l=Z(n,"variance","batchNorm");let c;i!=null&&(c=Z(i,"scale","batchNorm"));let f;r!=null&&(f=Z(r,"offset","batchNorm")),G(o.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),G(f==null||o.rank===f.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),G(c==null||o.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const p={x:kke(a),scale:c,offset:f,mean:o,variance:l},g={varianceEpsilon:s},y=re.runKernel(e1,p,g);return se(y,a.shape)}const j1=ae({batchNorm_:Ake});function Eke(t,e,n,r,i,s){const a=Z(t,"x","batchNorm"),o=Z(e,"mean","batchNorm"),l=Z(n,"variance","batchNorm");let c;i!=null&&(c=Z(i,"scale","batchNorm"));let f;return r!=null&&(f=Z(r,"offset","batchNorm")),G(a.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${a.rank}.`),G(o.rank===2||o.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${o.rank}.`),G(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&G(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),f!=null&&G(f.rank===2||f.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${f.rank}.`),j1(a,o,l,f,c,s)}const $ke=ae({batchNorm2d_:Eke});function Ike(t,e,n,r,i,s){const a=Z(t,"x","batchNorm"),o=Z(e,"mean","batchNorm"),l=Z(n,"variance","batchNorm");let c;i!=null&&(c=Z(i,"scale","batchNorm"));let f;return r!=null&&(f=Z(r,"offset","batchNorm")),G(a.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${a.rank}.`),G(o.rank===3||o.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${o.rank}.`),G(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&G(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),f!=null&&G(f.rank===3||f.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${f.rank}.`),j1(a,o,l,f,c,s)}const Nke=ae({batchNorm3d_:Ike});function Oke(t,e,n,r,i,s){const a=Z(t,"x","batchNorm"),o=Z(e,"mean","batchNorm"),l=Z(n,"variance","batchNorm");let c;i!=null&&(c=Z(i,"scale","batchNorm"));let f;return r!=null&&(f=Z(r,"offset","batchNorm")),G(a.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${a.rank}.`),G(o.rank===4||o.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${o.rank}.`),G(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&G(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),f!=null&&G(f.rank===4||f.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${f.rank}.`),j1(a,o,l,f,c,s)}const _ke=ae({batchNorm4d_:Oke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rke(t,e,n){const r=Z(t,"x","bincount"),i=Z(e,"weights","bincount");G(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),G(n>=0,()=>`size must be non-negative, but got ${n}.`),G(i.size===r.size||i.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`);const s={x:r,weights:i},a={size:n};return re.runKernel(QO,s,a)}const Dke=ae({bincount_:Rke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mke(t,e){let n=Z(t,"broadcastTo","x");const r=n.shape;if(yo(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const c=n.shape.slice();for(;c.length<e.length;)c.unshift(1);n=se(n,c)}const i=n.shape,s=Array.from(e);for(let c=e.length-1;c>=0;c--)if(i[c]===e[c])s[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(s.map((c,f)=>c>1?f:-1).filter(c=>c>=0).length===0)return Ac(n);const o={x:n},l={reps:s};return re.runKernel(Lg,o,l)}const Tp=ae({broadcastTo_:Mke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pke(t){const n={x:Z(t,"x","ceil","float32")};return re.runKernel(Qm,n)}const Lke=ae({ceil_:Pke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V1(t,e,n){yo(t),n=n||wh(e);const r={shape:t,value:e,dtype:n};return re.runKernel(d_,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fke(t,e,n){const r=Z(t,"x","clipByValue");if(G(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return V1(r.shape,e,r.dtype);const i={x:r},s={clipValueMin:e,clipValueMax:n};return re.runKernel(Jm,i,s)}const Di=ae({clipByValue_:Fke});function Bke(t){return Xr(t,0)}const zke=ae({concat1d_:Bke});function jke(t,e){return Xr(t,e)}const Vke=ae({concat2d_:jke});function Uke(t,e){return Xr(t,e)}const Wke=ae({concat3d_:Uke});function Gke(t,e){return Xr(t,e)}const qke=ae({concat4d_:Gke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hke(t,e,n,r,i="NHWC",s=[1,1],a){const o=Z(t,"x","conv2d","float32"),l=Z(e,"filter","conv2d","float32");let c=o,f=!1;o.rank===3&&(f=!0,c=se(o,[1,o.shape[0],o.shape[1],o.shape[2]])),G(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),G(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Qr("conv2d",r,a);const h=i==="NHWC"?c.shape[3]:c.shape[1];G(h===l.shape[2],()=>`Error in conv2d: depth of input (${h}) must match input depth for filter ${l.shape[2]}.`),G(Cr(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),G(Bc(s),()=>"Error in conv2D: Dilated rates should be larger than 0."),G(Bc(n),()=>"Error in conv2D: Strides should be larger than 0.");const p={x:c,filter:l},g={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:a},y=re.runKernel(qx,p,g);return f?se(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const zc=ae({conv2d_:Hke});function Kke(t,e,n,r,i="NWC",s=1,a){const o=Z(t,"x","conv1d"),l=Z(e,"filter","conv1d");let c=o,f=!1;o.rank===2&&(f=!0,c=se(o,[1,o.shape[0],o.shape[1]])),G(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),G(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Qr("conv1d",r,a),G(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),G(Cr(n,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`),G(Bc(s),()=>"Error in conv1D: Dilated rates should be larger than 0."),G(Bc(n),()=>"Error in conv1D: Stride should be larger than 0."),G(i==="NWC",()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);const h=se(l,[1,l.shape[0],l.shape[1],l.shape[2]]),p=se(c,[c.shape[0],1,c.shape[1],c.shape[2]]),v=zc(p,h,[1,n],r,"NHWC",[1,s],a);return f?se(v,[v.shape[2],v.shape[3]]):se(v,[v.shape[0],v.shape[2],v.shape[3]])}const EK=ae({conv1d_:Kke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xke(t,e,n,r,i,s="NHWC",a){G(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let o=t,l=e,c=!1;e.rank===3&&(c=!0,l=se(e,[1,e.shape[0],e.shape[1],e.shape[2]]),o=[1,t[0],t[1],t[2]]),G(o.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${o.length}.`),G(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),G(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const f=s==="NHWC"?o[3]:o[1],h=s==="NHWC"?l.shape[3]:l.shape[1];G(f===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${f}) must match input depth for filter ${n.shape[2]}.`),G(h===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${h}) must match output depth for filter ${n.shape[3]}.`),Qr("conv2dDerInput",i,a);const p={dy:l,filter:n},g={strides:r,pad:i,dataFormat:s,dimRoundingMode:a,inputShape:o},y=re.runKernel(Hx,p,g);return c?se(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const B_=ae({conv2DBackpropInput_:Xke});function Yke(t,e,n,r,i,s){const a=Z(t,"x","conv2dTranspose"),o=Z(e,"filter","conv2dTranspose");return B_(n,a,o,r,i,"NHWC",s)}const $K=ae({conv2dTranspose_:Yke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zke(t,e,n,r,i="NDHWC",s=[1,1,1]){const a=Z(t,"x","conv3d"),o=Z(e,"filter","conv3d");let l=a,c=!1;a.rank===4&&(c=!0,l=se(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),G(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),G(o.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${o.rank}.`),G(l.shape[4]===o.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${o.shape[3]}.`),G(Cr(n,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),G(i==="NDHWC",()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),G(Bc(s),()=>"Error in conv3D: Dilated rates should be larger than 0."),G(Bc(n),()=>"Error in conv3D: Strides should be larger than 0.");const f={x:l,filter:o},h={strides:n,pad:r,dataFormat:i,dilations:s},p=re.runKernel(Kx,f,h);return c?se(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const Qke=ae({conv3d_:Zke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jke(t,e,n,r,i){G(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,a=e,o=!1;e.rank===4&&(o=!0,a=se(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),s=[1,t[0],t[1],t[2],t[3]]);const l=s[4],c=a.shape[4];G(s.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),G(a.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${a.rank}`),G(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),G(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),G(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);const f={dy:a,filter:n},h={pad:i,strides:r,inputShape:s},p=re.runKernel(r_,f,h);return o?se(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const IK=ae({conv3DBackpropInput_:Jke});function eAe(t,e,n,r,i){const s=Z(t,"x","conv3dTranspose"),a=Z(e,"filter","conv3dTranspose");return IK(n,s,a,r,i)}const tAe=ae({conv3dTranspose_:eAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nAe(t){const n={x:Z(t,"x","cos","float32")};return re.runKernel(eg,n)}const z_=ae({cos_:nAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rAe(t){const n={x:Z(t,"x","cosh","float32")};return re.runKernel(tg,n)}const NK=ae({cosh_:rAe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iAe(t,e=0,n=!1,r=!1){const s={x:Z(t,"x","cumprod")},a={axis:e,exclusive:n,reverse:r};return re.runKernel(i_,s,a)}const II=ae({cumprod_:iAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sAe(t,e=0,n=!1,r=!1){const s={x:Z(t,"x","cumsum")},a={axis:e,exclusive:n,reverse:r};return re.runKernel(Xx,s,a)}const OK=ae({cumsum_:sAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aAe(t,e,n,r=!1){const i=Z(t,"x","denseBincount"),s=Z(e,"weights","denseBincount");G(i.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),G(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),G(n>=0,()=>`size must be non-negative, but got ${n}.`),G(s.size===i.size||s.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${s.shape}.`);const a={x:i,weights:s},o={size:n,binaryOutput:r};return re.runKernel(a_,a,o)}const sG=ae({denseBincount_:aAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oAe(t,e,n="NHWC"){const r=Z(t,"x","depthToSpace","float32"),i=n==="NHWC"?r.shape[1]:r.shape[2],s=n==="NHWC"?r.shape[2]:r.shape[3],a=n==="NHWC"?r.shape[3]:r.shape[1];G(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),G(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e}  for depthToSpace with input shape
    ${r.shape}`),G(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e} for depthToSpace with input shape
        ${r.shape}`),G(a%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${a} for depthToSpace with input shape ${r.shape}`);const o={x:r},l={blockSize:e,dataFormat:n};return re.runKernel(o_,o,l)}const lAe=ae({depthToSpace_:oAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cAe(t,e,n,r,i="NHWC",s=[1,1],a){const o=Z(t,"x","depthwiseConv2d","float32"),l=Z(e,"filter","depthwiseConv2d","float32");let c=o,f=!1;o.rank===3&&(f=!0,c=se(o,[1,o.shape[0],o.shape[1],o.shape[2]])),G(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),G(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const h=i==="NHWC"?c.shape[3]:c.shape[1];G(h===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${h}) must match the inChannels dimension in filter ${l.shape[2]}.`),Qr("depthwiseConv2d",r,a);const p={x:c,filter:l},g={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:a},y=re.runKernel(Yx,p,g);return f?se(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const j_=ae({depthwiseConv2d_:cAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uAe(t,e,n,r,i=[1,1],s="NHWC"){const a=Z(t,"x","dilation2d"),o=Z(e,"filter","dilation2d");G(a.rank===3||a.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${a.rank}.`),G(o.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${o.rank}.`),G(s==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`);let l=a,c=!1;a.rank===3&&(l=se(a,[1,a.shape[0],a.shape[1],a.shape[2]]),c=!0),G(l.shape[3]===o.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${o.shape[2]}`);const f={x:l,filter:o},h={strides:n,pad:r,dilations:i},p=re.runKernel(Zx,f,h);return c?se(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const fAe=ae({dilation2d_:uAe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qf(t,e){const n=t.length,r=[];for(let i=0;i<n;i++){const s=n-1-i,a=t[s]||1;(e[e.length-1-i]||1)>1&&a===1&&r.unshift(s)}return r}function jn(t,e){const n=[];for(let r=0;r<e.length;r++){const i=t[t.length-r-1],s=e.length-r-1,a=e[s];(i==null||i===1&&a>1)&&n.unshift(s)}return n}function nt(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let i=0;i<n;i++){let s=t[t.length-i-1];s==null&&(s=1);let a=e[e.length-i-1];if(a==null&&(a=1),s===1)r[n-i-1]=a;else if(a===1)r[n-i-1]=s;else if(s!==a){const o=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(o)}else r[n-i-1]=s}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hAe(t,e){let n=Z(t,"a","equal","string_or_numeric"),r=Z(e,"b","equal","string_or_numeric");[n,r]=wn(n,r),nt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(Qx,i)}const ca=ae({equal_:hAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dAe(t,e,n){const r=Z(e,"a","where"),i=Z(n,"b","where"),s=Z(t,"condition","where","bool"),a=nt(nt(s.shape,r.shape),i.shape),o=Tp(s,a),l=Tp(r,a),c=Tp(i,a),f={condition:o,t:l,e:c};return re.runKernel($1,f)}const Br=ae({where_:dAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pAe(t){const n={x:Z(t,"x","zerosLike")};return re.runKernel(P1,n)}const bt=ae({zerosLike_:pAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mAe(t,e){let n=Z(t,"a","div"),r=Z(e,"b","div");[n,r]=wn(n,r);const i=We(n,r),s=bt(i),a=ca(r,s);return Br(a,s,i)}const gAe=ae({divNoNan_:mAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yAe(t,e){const n=Z(t,"t1","dot"),r=Z(e,"t2","dot");G((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const i=n.rank===1?n.size:n.shape[1],s=r.rank===1?r.size:r.shape[0];if(G(i===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${s}.`),n.rank===1&&r.rank===1){const a=se(n,[1,-1]),o=se(r,[-1,1]),l=kt(a,o);return se(l,[])}else if(n.rank===1&&r.rank===2){const a=se(n,[1,-1]),o=se(r,[r.shape[0],r.shape[1]]),l=kt(a,o);return se(l,[l.size])}else if(n.rank===2&&r.rank===1){const a=se(r,[-1,1]),o=kt(n,a);return se(o,[o.size])}else{const a=se(r,[r.shape[0],r.shape[1]]);return kt(n,a)}}const vAe=ae({dot_:yAe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bAe(t,...e){const n=e.map((i,s)=>Z(i,`tensors${s}`,"einsum")),r={equation:t};return re.runKernel(u_,n,r)}const Jd=ae({einsum_:bAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xAe(t){const n={x:Z(t,"x","elu","float32")};return re.runKernel(rg,n)}const U1=ae({elu_:xAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wAe(t){let e=Z(t,"x","erf");G(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Re(e,"float32"));const n={x:e};return re.runKernel(ig,n)}const _K=ae({erf_:wAe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V_(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function RK(t,e,n){const r=t.length+e.length,i=[];let s=0,a=0;for(let o=0;o<r;o++)n.indexOf(o)===-1?i.push(t[s++]):i.push(e[a++]);return i}function er(t,e){const n=[],r=t.length;for(let s=0;s<r;s++)e.indexOf(s)===-1&&n.push(t[s]);const i=e.map(s=>t[s]);return[n,i]}function On(t,e){const n=e.map(r=>1);return RK(t,n,e)}function ur(t,e,n){G(V_(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function on(t,e){if(V_(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function El(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function Sn(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SAe(t,e=null,n=!1){const i={x:Z(t,"x","max")},s={reductionIndices:e,keepDims:n};return re.runKernel(u1,i,s)}const Is=ae({max_:SAe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CAe(t,e=null,n=!1){const i={x:Z(t,"x","min")},s={axis:e,keepDims:n};return re.runKernel(p1,i,s)}const $b=ae({min_:CAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TAe(t,e){let n=Z(t,"base","pow"),r=Z(e,"exp","pow");[n,r]=wn(n,r);const i={a:n,b:r};return re.runKernel(xg,i)}const jc=ae({pow_:TAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function At(t,e){if((os(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&os(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return B1(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kAe(t){const n={x:Z(t,"x","sqrt","float32")};return re.runKernel(_g,n)}const Sr=ae({sqrt_:kAe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AAe(t){const e=Z(t,"x","square"),n={};return re.runKernel("Square",{x:e},n)}const Qt=ae({square_:AAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EAe(t,e=null,n=!1){let r=Z(t,"x","sum");r.dtype==="bool"&&(r=Re(r,"int32"));const i={x:r},s={axis:e,keepDims:n};return re.runKernel(N1,i,s)}const Ue=ae({sum_:EAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ae(t,e="euclidean",n=null,r=!1){t=Z(t,"x","norm");const i=DK(t,e,n);let s=i.shape;if(r){const a=ot(n,t.shape);s=On(i.shape,a)}return se(i,s)}function DK(t,e,n=null){if(t.rank===0)return Rr(t);if(t.rank!==1&&n===null)return DK(se(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Ue(Rr(t),n);if(e===1/0)return Is(Rr(t),n);if(e===-1/0)return $b(Rr(t),n);if(e==="euclidean"||e===2)return Sr(Ue(jc(Rr(t),At(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return Is(Ue(Rr(t),n[0]),n[1]-1);if(e===1/0)return Is(Ue(Rr(t),n[1]),n[0]);if(e===-1/0)return $b(Ue(Rr(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return Sr(Ue(Qt(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const W1=ae({norm_:$Ae});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IAe(t,e=null,n=!1){return W1(t,"euclidean",e,n)}const NAe=ae({euclideanNorm_:IAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OAe(t){const n={x:Z(t,"x","exp")};return re.runKernel(sg,n)}const ua=ae({exp_:OAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ae(t,e=0){const n=Z(t,"x","expandDims","string_or_numeric");G(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},i={dim:e};return re.runKernel(Jx,r,i)}const Gr=ae({expandDims_:_Ae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RAe(t){const n={x:Z(t,"x","expm1")};return re.runKernel(ag,n)}const DAe=ae({expm1_:RAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MAe(t,e){const n=Z(t,"x","tile","string_or_numeric");G(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},i={reps:e};return re.runKernel(Lg,r,i)}const As=ae({tile_:MAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PAe(t,e,n,r="float32"){e==null&&(e=t);const i=at([t,e],r),s=t<=e?t:e;for(let o=0;o<s;++o)i.set(1,o,o);const a=se(i.toTensor(),[t,e]);if(n==null)return a;if(n.length===1)return As(Gr(a,0),[n[0],1,1]);if(n.length===2)return As(Gr(Gr(a,0),0),[n[0],n[1],1,1]);if(n.length===3)return As(Gr(Gr(Gr(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const MK=ae({eye_:PAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LAe(t){const n={x:Z(t,"x","floor","float32")};return re.runKernel(og,n)}const G1=ae({floor_:LAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FAe(t,e,n=0,r=0){const i=Z(t,"x","gather"),s=Z(e,"indices","gather","int32"),a={x:i,indices:s},o={axis:n,batchDims:r};return re.runKernel(t1,a,o)}const U_=ae({gather_:FAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BAe(t,e){let n=Z(t,"a","greater","string_or_numeric"),r=Z(e,"b","greater","string_or_numeric");[n,r]=wn(n,r),nt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(n1,i)}const Mi=ae({greater_:BAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zAe(t,e){let n=Z(t,"a","greaterEqual","string_or_numeric"),r=Z(e,"b","greaterEqual","string_or_numeric");[n,r]=wn(n,r),nt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(cg,i)}const Jc=ae({greaterEqual_:zAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jAe(t){const n={input:Z(t,"input","imag")};return re.runKernel(g_,n)}const W_=ae({imag_:jAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VAe(t){const n={x:Z(t,"x","isFinite")};return re.runKernel(fg,n)}const UAe=ae({isFinite_:VAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WAe(t){const n={x:Z(t,"x","isInf")};return re.runKernel(hg,n)}const GAe=ae({isInf_:WAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qAe(t){const n={x:Z(t,"x","isNaN")};return re.runKernel(dg,n)}const HAe=ae({isNaN_:qAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KAe(t,e=.2){const r={x:Z(t,"x","leakyRelu")},i={alpha:e};return re.runKernel(r1,r,i)}const G_=ae({leakyRelu_:KAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XAe(t,e){let n=Z(t,"a","less","string_or_numeric"),r=Z(e,"b","less","string_or_numeric");[n,r]=wn(n,r),nt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(i1,i)}const Ib=ae({less_:XAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YAe(t,e){let n=Z(t,"a","lessEqual","string_or_numeric"),r=Z(e,"b","lessEqual","string_or_numeric");[n,r]=wn(n,r),nt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(s1,i)}const Ah=ae({lessEqual_:YAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZAe(t,e=5,n=1,r=1,i=.5){const s=Z(t,"x","localResponseNormalization");G(s.rank===4||s.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${s.rank}.`),G(Xf(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let a=s,o=!1;s.rank===3&&(o=!0,a=se(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const l={x:a},c={depthRadius:e,bias:n,alpha:r,beta:i},f=re.runKernel(c1,l,c);return o?se(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const QAe=ae({localResponseNormalization_:ZAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JAe(t){const n={x:Z(t,"x","log","float32")};return re.runKernel(pg,n)}const fa=ae({log_:JAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eEe(t){const n={x:Z(t,"x","log1p")};return re.runKernel(mg,n)}const PK=ae({log1p_:eEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tEe(t,e){G(pI(t),()=>"The f passed in variableGrads(f) must be a function"),G(e==null||Array.isArray(e)&&e.every(c=>c instanceof Eb),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const c in re.registeredVariables)e.push(re.registeredVariables[c])}const r=n?e.filter(c=>!c.trainable):null,i=e.length;e=e.filter(c=>c.trainable),G(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);const s=!0,{value:a,grads:o}=re.gradients(t,e,null,s);G(o.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),G(a.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${a.rank} tensor`);const l={};return e.forEach((c,f)=>{o[f]!=null&&(l[c.name]=o[f])}),r!=null&&r.forEach(c=>l[c.name]=null),{value:a,grads:l}}function Jf(t){return re.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nEe(t){const n={x:Z(t,"x","neg")};return re.runKernel(g1,n)}const xn=ae({neg_:nEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rEe(t){const n={x:Z(t,"x","softplus")};return re.runKernel(Og,n)}const zg=ae({softplus_:rEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iEe(t){const e=Z(t,"x","logSigmoid");return Jf(r=>({value:xn(zg(xn(r))),gradFunc:a=>ne(a,kh(xn(r)))}))(e)}const sEe=ae({logSigmoid_:iEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aEe(t,e){let n=Z(t,"a","sub"),r=Z(e,"b","sub");[n,r]=wn(n,r);const i={a:n,b:r};return re.runKernel(Dg,i)}const Ke=ae({sub_:aEe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oEe(t,e=-1){const n=Z(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Jf((i,s)=>{const o=Is(i,e,!0),l=Ke(i,o),c=Ke(Re(l,"float32"),fa(Ue(ua(l),e,!0)));return s([c]),{value:c,gradFunc:(h,p)=>{const[g]=p,y=!0,b=ua(g);return Ke(h,ne(Ue(h,e,y),b))}}})(n)}const LK=ae({logSoftmax_:oEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lEe(t,e=null,n=!1){const r=Z(t,"x","logSumExp"),i=ot(e,r.shape),s=Is(r,i,!0),a=Ke(r,s),o=ua(a),l=Ue(o,i),c=fa(l),f=Ae(se(s,c.shape),c);if(n){const h=On(f.shape,i);return se(f,h)}return f}const FK=ae({logSumExp_:lEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cEe(t,e){const n=Z(t,"a","logicalAnd","bool"),r=Z(e,"b","logicalAnd","bool");nt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(a1,i)}const lo=ae({logicalAnd_:cEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uEe(t){const n={x:Z(t,"x","logicalNot","bool")};return re.runKernel(o1,n)}const q_=ae({logicalNot_:uEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fEe(t,e){const n=Z(t,"a","logicalOr","bool"),r=Z(e,"b","logicalOr","bool");nt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(l1,i)}const BK=ae({logicalOr_:fEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hEe(t,e){const n=Z(t,"a","logicalXor","bool"),r=Z(e,"b","logicalXor","bool");return nt(n.shape,r.shape),lo(BK(t,e),q_(lo(t,e)))}const dEe=ae({logicalXor_:hEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pEe(t,e,n,r,i){const s=Z(t,"x","maxPool"),a=1;let o=s,l=!1;s.rank===3&&(l=!0,o=se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),G(o.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${o.rank}.`),G(Cr(n,a),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),Qr("maxPool",r,i);const c={x:o},f={filterSize:e,strides:n,pad:r,dimRoundingMode:i},h=re.runKernel(f1,c,f);return l?se(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const H_=ae({maxPool_:pEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mEe(t,e=[1,1,1],n,r,i,s="NDHWC"){const a=Z(t,"x","maxPool3d");let o=a,l=!1;a.rank===4&&(l=!0,o=se(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),G(o.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${o.rank}.`),G(s==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),Qr("maxPool3d",r,i);const c={x:o},f={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:s},h=re.runKernel(h1,c,f);return l?se(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const gEe=ae({maxPool3d_:mEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yEe(t,e){let n=Z(t,"a","maximum"),r=Z(e,"b","maximum");[n,r]=wn(n,r),n.dtype==="bool"&&(n=Re(n,"int32"),r=Re(r,"int32")),nt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(gg,i)}const $l=ae({maximum_:yEe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vEe(t,e=null,n=!1){const i={x:Z(t,"x","mean")},s={axis:e,keepDims:n};return re.runKernel(d1,i,s)}const Nn=ae({mean_:vEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yn(t,e="float32"){if(yo(t),e==="complex64"){const r=Yn(t,"float32"),i=Yn(t,"float32");return Zf(r,i)}const n=wr(be(t),e);return re.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Il(t,e="float32"){if(yo(t),e==="complex64"){const r=Il(t,"float32"),i=Yn(t,"float32");return Zf(r,i)}const n=WO(be(t),e);return re.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bEe(t,e){let n=Z(t,"a","minimum"),r=Z(e,"b","minimum");[n,r]=wn(n,r),n.dtype==="bool"&&(n=Re(n,"int32"),r=Re(r,"int32")),nt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(yg,i)}const xm=ae({minimum_:bEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xEe(t,e,n){G(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=Z(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");G(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const i=n==="reflect"?1:0;for(let o=0;o<r.rank;o++)G(e[o].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),G(e[o][0]>=0&&e[o][0]<=r.shape[o]-i&&e[o][1]>=0&&e[o][1]<=r.shape[o]-i,()=>`Padding in dimension ${o} cannot be greater than or equal to ${r.shape[o]-i} or less than 0 for input of shape ${r.shape}`);const s={paddings:e,mode:n},a={x:r};return re.runKernel(m1,a,s)}const wEe=ae({mirrorPad_:xEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SEe(t,e){let n=Z(t,"a","mod"),r=Z(e,"b","mod");[n,r]=wn(n,r);const i={a:n,b:r};return re.runKernel(vg,i)}const CEe=ae({mod_:SEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TEe(t,e=null,n=!1){t=Z(t,"x","moments");const r=ot(e,t.shape),i=Nn(t,r,n);let s=i.shape;n||(s=On(i.shape,r));const a=Qt(Ke(Re(t,"float32"),se(i,s))),o=Nn(a,r,n);return{mean:i,variance:o}}const K_=ae({moments_:TEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kEe(t,e){let n=Z(t,"a","notEqual","string_or_numeric"),r=Z(e,"b","notEqual","string_or_numeric");[n,r]=wn(n,r),nt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(y1,i)}const Nb=ae({notEqual_:kEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AEe(t,e,n=1,r=0,i="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const a={indices:Z(t,"indices","oneHot","int32")},o={dtype:i,depth:e,onValue:n,offValue:r};return re.runKernel(b1,a,o)}const zK=ae({oneHot_:AEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EEe(t){const n={x:Z(t,"x","onesLike")};return re.runKernel(v1,n)}const ls=ae({onesLike_:EEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ee(t,e,n=0){const r=Z(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:e,constantValue:n},s={x:r};return re.runKernel(w1,s,i)}const X_=ae({pad_:$Ee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IEe(t,e,n){const r=Z(t,"x","spaceToBatchND");G(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),G(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),G(r.shape.reduce((a,o,l)=>l>0&&l<=e.length?a&&(o+n[l-1][0]+n[l-1][1])%e[l-1]===0:a,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const i={x:r},s={blockShape:e,paddings:n};return re.runKernel(O1,i,s)}const Y_=ae({spaceToBatchND_:IEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NEe(t,e,n,r,i,s,a){i==null&&(i=[1,1]),s==null&&(s=1),r===0&&(r="valid");const o=Z(t,"x","maxPool");let l=o,c=!1;o.rank===3&&(c=!0,l=se(o,[1,o.shape[0],o.shape[1],o.shape[2]])),G(Cr(s,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${i}'`);const f=us(l.shape,e,s,i,r),h=[f.dilationHeight,f.dilationWidth];let p;r==="same"?p=_Ee([f.filterHeight,f.filterWidth],h):p=[[0,0],[0,0]];const g=h[0]===1&&h[1]===1,[y,b]=OEe([f.inHeight,f.inWidth],h,p),v=g?r:"valid",w=g?l:Y_(l,h,y),T=(n==="avg"?()=>L_(w,e,s,v,a):()=>H_(w,e,s,v,a))(),A=g?T:F_(T,h,b);return c?se(A,[A.shape[1],A.shape[2],A.shape[3]]):A}function OEe(t,e,n){const r=n.map(f=>f[0]),i=n.map(f=>f[1]),s=t.concat(r,i),a=e.map((f,h)=>(f-s[h]%f)%f),o=i.map((f,h)=>f+a[h]),l=e.map((f,h)=>[r[h],o[h]]),c=e.map((f,h)=>[0,a[h]]);return[l,c]}function _Ee(t,e){const r=t.map((a,o)=>a+(a-1)*(e[o]-1)).map(a=>a-1),i=r.map(a=>Math.floor(a/2)),s=r.map((a,o)=>a-i[o]);return r.map((a,o)=>[i[o],s[o]])}const REe=ae({pool_:NEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DEe(t,e){const n=Z(t,"x","prelu"),r=Z(e,"alpha","prelu"),i={x:n,alpha:r};return re.runKernel(S1,i)}const Z_=ae({prelu_:DEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MEe(t,e=null,n=!1){let r=Z(t,"x","prod");r.dtype==="bool"&&(r=Re(r,"int32"));const i={x:r},s={axis:e,keepDims:n};return re.runKernel(C1,i,s)}const PEe=ae({prod_:MEe});var c0={exports:{}},LEe=c0.exports,aG;function FEe(){return aG||(aG=1,function(t){(function(e,n,r){function i(l){var c=this,f=o();c.next=function(){var h=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=h-(c.c=h|0)},c.c=1,c.s0=f(" "),c.s1=f(" "),c.s2=f(" "),c.s0-=f(l),c.s0<0&&(c.s0+=1),c.s1-=f(l),c.s1<0&&(c.s1+=1),c.s2-=f(l),c.s2<0&&(c.s2+=1),f=null}function s(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function a(l,c){var f=new i(l),h=c&&c.state,p=f.next;return p.int32=function(){return f.next()*4294967296|0},p.double=function(){return p()+(p()*2097152|0)*11102230246251565e-32},p.quick=p,h&&(typeof h=="object"&&s(h,f),p.state=function(){return s(f,{})}),p}function o(){var l=4022871197,c=function(f){f=String(f);for(var h=0;h<f.length;h++){l+=f.charCodeAt(h);var p=.02519603282416938*l;l=p>>>0,p-=l,p*=l,l=p>>>0,p-=l,l+=p*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=a:this.alea=a})(LEe,t)}(c0)),c0.exports}var u0={exports:{}},BEe=u0.exports,oG;function zEe(){return oG||(oG=1,function(t){(function(e,n,r){function i(o){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var h=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^h^h>>>8},o===(o|0)?l.x=o:c+=o;for(var f=0;f<c.length+64;f++)l.x^=c.charCodeAt(f)|0,l.next()}function s(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l}function a(o,l){var c=new i(o),f=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},h.int32=c.next,h.quick=h,f&&(typeof f=="object"&&s(f,c),h.state=function(){return s(c,{})}),h}n&&n.exports?n.exports=a:this.xor128=a})(BEe,t)}(u0)),u0.exports}var f0={exports:{}},jEe=f0.exports,lG;function VEe(){return lG||(lG=1,function(t){(function(e,n,r){function i(o){var l=this,c="";l.next=function(){var h=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(h^h<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,o===(o|0)?l.x=o:c+=o;for(var f=0;f<c.length+64;f++)l.x^=c.charCodeAt(f)|0,f==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l.v=o.v,l.d=o.d,l}function a(o,l){var c=new i(o),f=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},h.int32=c.next,h.quick=h,f&&(typeof f=="object"&&s(f,c),h.state=function(){return s(c,{})}),h}n&&n.exports?n.exports=a:this.xorwow=a})(jEe,t)}(f0)),f0.exports}var h0={exports:{}},UEe=h0.exports,cG;function WEe(){return cG||(cG=1,function(t){(function(e,n,r){function i(o){var l=this;l.next=function(){var f=l.x,h=l.i,p,g;return p=f[h],p^=p>>>7,g=p^p<<24,p=f[h+1&7],g^=p^p>>>10,p=f[h+3&7],g^=p^p>>>3,p=f[h+4&7],g^=p^p<<7,p=f[h+7&7],p=p^p<<13,g^=p^p<<9,f[h]=g,l.i=h+1&7,g};function c(f,h){var p,g=[];if(h===(h|0))g[0]=h;else for(h=""+h,p=0;p<h.length;++p)g[p&7]=g[p&7]<<15^h.charCodeAt(p)+g[p+1&7]<<13;for(;g.length<8;)g.push(0);for(p=0;p<8&&g[p]===0;++p);for(p==8?g[7]=-1:g[p],f.x=g,f.i=0,p=256;p>0;--p)f.next()}c(l,o)}function s(o,l){return l.x=o.x.slice(),l.i=o.i,l}function a(o,l){o==null&&(o=+new Date);var c=new i(o),f=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},h.int32=c.next,h.quick=h,f&&(f.x&&s(f,c),h.state=function(){return s(c,{})}),h}n&&n.exports?n.exports=a:this.xorshift7=a})(UEe,t)}(h0)),h0.exports}var d0={exports:{}},GEe=d0.exports,uG;function qEe(){return uG||(uG=1,function(t){(function(e,n,r){function i(o){var l=this;l.next=function(){var f=l.w,h=l.X,p=l.i,g,y;return l.w=f=f+1640531527|0,y=h[p+34&127],g=h[p=p+1&127],y^=y<<13,g^=g<<17,y^=y>>>15,g^=g>>>12,y=h[p]=y^g,l.i=p,y+(f^f>>>16)|0};function c(f,h){var p,g,y,b,v,w=[],S=128;for(h===(h|0)?(g=h,h=null):(h=h+"\0",g=0,S=Math.max(S,h.length)),y=0,b=-32;b<S;++b)h&&(g^=h.charCodeAt((b+32)%h.length)),b===0&&(v=g),g^=g<<10,g^=g>>>15,g^=g<<4,g^=g>>>13,b>=0&&(v=v+1640531527|0,p=w[b&127]^=g+v,y=p==0?y+1:0);for(y>=128&&(w[(h&&h.length||0)&127]=-1),y=127,b=4*128;b>0;--b)g=w[y+34&127],p=w[y=y+1&127],g^=g<<13,p^=p<<17,g^=g>>>15,p^=p>>>12,w[y]=g^p;f.w=v,f.X=w,f.i=y}c(l,o)}function s(o,l){return l.i=o.i,l.w=o.w,l.X=o.X.slice(),l}function a(o,l){o==null&&(o=+new Date);var c=new i(o),f=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},h.int32=c.next,h.quick=h,f&&(f.X&&s(f,c),h.state=function(){return s(c,{})}),h}n&&n.exports?n.exports=a:this.xor4096=a})(GEe,t)}(d0)),d0.exports}var p0={exports:{}},HEe=p0.exports,fG;function KEe(){return fG||(fG=1,function(t){(function(e,n,r){function i(o){var l=this,c="";l.next=function(){var h=l.b,p=l.c,g=l.d,y=l.a;return h=h<<25^h>>>7^p,p=p-g|0,g=g<<24^g>>>8^y,y=y-h|0,l.b=h=h<<20^h>>>12^p,l.c=p=p-g|0,l.d=g<<16^p>>>16^y,l.a=y-h|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,o===Math.floor(o)?(l.a=o/4294967296|0,l.b=o|0):c+=o;for(var f=0;f<c.length+20;f++)l.b^=c.charCodeAt(f)|0,l.next()}function s(o,l){return l.a=o.a,l.b=o.b,l.c=o.c,l.d=o.d,l}function a(o,l){var c=new i(o),f=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},h.int32=c.next,h.quick=h,f&&(typeof f=="object"&&s(f,c),h.state=function(){return s(c,{})}),h}n&&n.exports?n.exports=a:this.tychei=a})(HEe,t)}(p0)),p0.exports}var m0={exports:{}};const XEe={},YEe=Object.freeze(Object.defineProperty({__proto__:null,default:XEe},Symbol.toStringTag,{value:"Module"})),ZEe=One(YEe);var QEe=m0.exports,hG;function JEe(){return hG||(hG=1,function(t){(function(e,n,r){var i=256,s=6,a=52,o="random",l=r.pow(i,s),c=r.pow(2,a),f=c*2,h=i-1,p;function g(A,k,E){var I=[];k=k==!0?{entropy:!0}:k||{};var N=w(v(k.entropy?[A,T(n)]:A??S(),3),I),_=new y(I),D=function(){for(var O=_.g(s),P=l,z=0;O<c;)O=(O+z)*i,P*=i,z=_.g(1);for(;O>=f;)O/=2,P/=2,z>>>=1;return(O+z)/P};return D.int32=function(){return _.g(4)|0},D.quick=function(){return _.g(4)/4294967296},D.double=D,w(T(_.S),n),(k.pass||E||function(O,P,z,W){return W&&(W.S&&b(W,_),O.state=function(){return b(_,{})}),z?(r[o]=O,P):O})(D,N,"global"in k?k.global:this==r,k.state)}function y(A){var k,E=A.length,I=this,N=0,_=I.i=I.j=0,D=I.S=[];for(E||(A=[E++]);N<i;)D[N]=N++;for(N=0;N<i;N++)D[N]=D[_=h&_+A[N%E]+(k=D[N])],D[_]=k;(I.g=function(O){for(var P,z=0,W=I.i,U=I.j,R=I.S;O--;)P=R[W=h&W+1],z=z*i+R[h&(R[W]=R[U=h&U+P])+(R[U]=P)];return I.i=W,I.j=U,z})(i)}function b(A,k){return k.i=A.i,k.j=A.j,k.S=A.S.slice(),k}function v(A,k){var E=[],I=typeof A,N;if(k&&I=="object")for(N in A)try{E.push(v(A[N],k-1))}catch{}return E.length?E:I=="string"?A:A+"\0"}function w(A,k){for(var E=A+"",I,N=0;N<E.length;)k[h&N]=h&(I^=k[h&N]*19)+E.charCodeAt(N++);return T(k)}function S(){try{var A;return p&&(A=p.randomBytes)?A=A(i):(A=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(A)),T(A)}catch{var k=e.navigator,E=k&&k.plugins;return[+new Date,e,E,e.screen,T(n)]}}function T(A){return String.fromCharCode.apply(0,A)}if(w(r.random(),n),t.exports){t.exports=g;try{p=ZEe}catch{}}else r["seed"+o]=g})(typeof self<"u"?self:QEe,[],Math)}(m0)),m0.exports}var tE,dG;function e$e(){if(dG)return tE;dG=1;var t=FEe(),e=zEe(),n=VEe(),r=WEe(),i=qEe(),s=KEe(),a=JEe();return a.alea=t,a.xor128=e,a.xorwow=n,a.xorshift7=r,a.xor4096=i,a.tychei=s,tE=a,tE}var Q_=e$e();/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jK{constructor(e,n,r,i,s){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const a=s||Math.random();this.random=Q_.alea(a.toString())}nextValue(){if(!isNaN(this.nextVal)){const i=this.nextVal;return this.nextVal=NaN,i}let e,n,r=!1;for(;!r;){let i,s,a;do i=2*this.random()-1,s=2*this.random()-1,a=i*i+s*s;while(a>=1||a===0);const o=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*i*o,n=this.mean+this.stdDev*s*o,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class t$e{constructor(e=0,n=1,r,i){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=Q_.alea(i)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n$e(t,e=0,n=1,r,i){if(yo(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const s=new jK(e,n,r,!1,i),a=at(t,r);for(let o=0;o<a.values.length;o++)a.values[o]=s.nextValue();return a.toTensor()}const r$e=ae({randomNormal_:n$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i$e(t,e=0,n=1,r="float32",i){yo(t);const s=at(t,r),a=new t$e(e,n,null,i);for(let o=0;o<s.values.length;o++)s.values[o]=a.nextValue();return s.toTensor()}const jg=ae({randomUniform_:i$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wm(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const i={start:t,stop:e,step:n,dtype:r};return re.runKernel(C_,{},i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s$e(t){const n={input:Z(t,"input","real")};return re.runKernel(T_,n)}const Ob=ae({real_:s$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a$e(t){const n={x:Z(t,"x","reciprocal")};return re.runKernel(wg,n)}const o$e=ae({reciprocal_:a$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l$e(t){const n={x:Z(t,"x","relu")};return re.runKernel(Sg,n)}const eu=ae({relu_:l$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c$e(t){const n={x:Z(t,"x","relu6")};return re.runKernel(Cg,n)}const VK=ae({relu6_:c$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u$e(t,e){const r={x:Z(t,"x","reverse")},i={dims:e};return re.runKernel(E1,r,i)}const Vc=ae({reverse_:u$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f$e(t){const n={x:Z(t,"x","round")};return re.runKernel(Tg,n)}const UK=ae({round_:f$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h$e(t){const n={x:Z(t,"x","rsqrt","float32")};return re.runKernel(kg,n)}const WK=ae({rsqrt_:h$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d$e(t){const n={x:Z(t,"x","selu")};return re.runKernel(Ag,n)}const GK=ae({selu_:d$e});function p$e(t,e,n,r,i,s=[1,1],a="NHWC"){const o=Z(t,"x","separableConv2d"),l=Z(e,"depthwiseFilter","separableConv2d"),c=Z(n,"pointwiseFilter","separableConv2d");let f=o,h=!1;if(o.rank===3&&(h=!0,f=se(o,[1,o.shape[0],o.shape[1],o.shape[2]])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");G(f.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${f.rank}.`),G(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),G(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),G(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),G(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const p=l.shape[2],g=l.shape[3];G(c.shape[2]===p*g,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*g}, but got ${c.shape[2]}.`);const y=j_(f,l,r,i,a,s),v=zc(y,c,1,"valid",a);return h?se(v,[v.shape[1],v.shape[2],v.shape[3]]):v}const qK=ae({separableConv2d_:p$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m$e(t){const n={x:Z(t,"x","sign")};return re.runKernel(Ig,n)}const g$e=ae({sign_:m$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y$e(t){const n={x:Z(t,"x","sin","float32")};return re.runKernel(Eg,n)}const HK=ae({sin_:y$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v$e(t){const n={x:Z(t,"x","sinh")};return re.runKernel($g,n)}const KK=ae({sinh_:v$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b$e(t,e,n){const r=Z(t,"x","slice1d");return G(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),qt(r,[e],[n])}const J_=ae({slice1d_:b$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x$e(t,e,n){const r=Z(t,"x","slice2d");return G(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),qt(r,e,n)}const XK=ae({slice2d_:x$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w$e(t,e,n){const r=Z(t,"x","slice3d");return G(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),qt(r,e,n)}const eR=ae({slice3d_:w$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S$e(t,e,n){const r=Z(t,"x","slice4d");return G(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),qt(r,e,n)}const _b=ae({slice4d_:S$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C$e(t,e=-1){const n=Z(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},i={dim:e};return re.runKernel(R1,r,i)}const tR=ae({softmax_:C$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T$e(t){G(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return re.runKernel(h_,e)}const YK=ae({fft_:T$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k$e(t){G(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return re.runKernel(m_,e)}const NI=ae({ifft_:k$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A$e(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const i=se(t,[n,e]);r=NI(i)}else{const i=[n,2*(e-1)],s=se(Ob(t),[n,e]),a=se(W_(t),[n,e]),o=Vc(qt(s,[0,1],[n,e-2]),1),l=ne(Vc(qt(a,[0,1],[n,e-2]),1),At(-1)),c=Xr([s,o],1),f=Xr([a,l],1),h=se(Zf(c,f),[i[0],i[1]]);r=NI(h)}if(r=Ob(r),t.rank===3&&t.shape[0]!==0){const i=r,s=t.shape[0];r=se(r,[s,r.shape[0]/s,r.shape[1]]),i.dispose()}return r}const E$e=ae({irfft_:A$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $$e(t,e,n=0){const i={x:Z(t,"x","split")},s={numOrSizeSplits:e,axis:n};return re.runKernel(_1,i,s)}const _i=ae({split_:$$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I$e(t,e){G(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let i;if(e!=null&&e<n){const y=t.shape.map(v=>0),b=t.shape.map(v=>v);b[t.shape.length-1]=e,i=qt(t,y,b),n=e}else if(e!=null&&e>n){const y=t.shape.map(b=>b);y[t.shape.length-1]=e-n,i=Xr([t,Yn(y)],t.shape.length-1),n=e}else i=t;const s=bt(i),a=se(Zf(i,s),[r,n]),o=YK(a),l=Math.floor(n/2)+1,c=Ob(o),f=W_(o),h=_i(c,[l,n-l],c.shape.length-1),p=_i(f,[l,n-l],f.shape.length-1),g=i.shape.slice();return g[i.shape.length-1]=l,se(Zf(h[0],p[0]),g)}const N$e=ae({rfft_:I$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O$e(t,e){let n=Z(t,"a","squaredDifference"),r=Z(e,"b","squaredDifference");[n,r]=wn(n,r),nt(n.shape,r.shape);const i={a:n,b:r},s={};return re.runKernel(Rg,i,s)}const _$e=ae({squaredDifference_:O$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R$e(t,e){const n=Z(t,"x","squeeze","string_or_numeric");return se(n,Tl(n.shape,e).newShape)}const Vg=ae({squeeze_:R$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D$e(t,e=0){const n=mK(t,"tensors","stack","string_or_numeric");G(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&G(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,i={axis:e};return re.runKernel(x1,r,i)}const co=ae({stack_:D$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M$e(t,e=0){const r={x:Z(t,"x","step")},i={alpha:e};return re.runKernel(Fg,r,i)}const Ug=ae({step_:M$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P$e(t,e,n,r,i=0,s=0,a=0,o=0,l=0){const f={x:Z(t,"x","stridedSlice","string_or_numeric")},h={begin:e,end:n,strides:r,beginMask:i,endMask:s,ellipsisMask:a,newAxisMask:o,shrinkAxisMask:l};return re.runKernel(I_,f,h)}const L$e=ae({stridedSlice_:P$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F$e(t){const n={x:Z(t,"x","tan","float32")};return re.runKernel(Mg,n)}const B$e=ae({tan_:F$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fi(t,e){k9(t);const n=F1(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return B1(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nE(t,e,n){if(k9(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=F1(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return B1(t,e,r,n)}function ZK(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(s+` update.rank < ${i}. `);if(t.length<r+(n.rank-i))throw new Error(s+` Output shape length < ${r+(n.rank-i)}`);if(n.rank!==i+t.length-r)throw new Error(s+` update.rank != ${i+t.length-r}`);for(let a=0;a<i;++a)if(n.shape[a]!==e.shape[a])throw new Error(s+` updates.shape[${a}] (${n.shape[a]}) != indices.shape[${a}] (${e.shape[a]}).`);for(let a=0;a<n.rank-i;++a)if(n.shape[a+i]!==t[a+r])throw new Error(s+` updates.shape[${a+i}] (${n.shape[a+i]}) != shape[${a+i}] (${t[a+i]})`)}function z$e(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}ZK(n,e,t)}function tu(t,e,n){const r=e.shape.length,i=r>1?e.shape[r-1]:1,s=n.length;let a=1;for(let h=i;h<s;++h)a*=n[h];const o=i<1?1:i,l=be(e.shape)/o,c=[...je(n.slice(0,i)),1],f=be(n);return{sliceRank:i,numUpdates:l,sliceSize:a,strides:c,outputSize:f}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j$e(t,e=1,n=!0){const r=Z(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${e}`);const s={x:r},a={k:e,sorted:n},[o,l]=re.runKernel(N_,s,a);return{values:o,indices:l}}const V$e=ae({topk_:j$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U$e(t,e=0,n=1,r,i){if(yo(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const s=new jK(e,n,r,!0,i),a=at(t,r);for(let o=0;o<a.values.length;o++)a.values[o]=s.nextValue();return a.toTensor()}const QK=ae({truncatedNormal_:U$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W$e(t,e=0){const n=Z(t,"x","unique","string_or_numeric");G(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},i={axis:e},[s,a]=re.runKernel(__,r,i);return{values:s,indices:a}}const G$e=ae({unique_:W$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q$e(t,e,n){const r=Z(t,"x","unsortedSegmentSum"),i=Z(e,"segmentIds","unsortedSegmentSum","int32");G(Xf(n),()=>"numSegments must be of dtype int");const s={x:r,segmentIds:i},a={numSegments:n};return re.runKernel(M1,s,a)}const JK=ae({unsortedSegmentSum_:q$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H$e(t,e=0){const n=Z(t,"x","unstack","string_or_numeric");G(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},i={axis:e};return re.runKernel(D1,r,i)}const Uc=ae({unstack_:H$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K$e(t,e=!0,n,r){return re.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eX(t,e){const n=[];for(let s=0;s<e.length;s++)e[s]&&n.push(s);const r=at(t,"int32"),i=at([n.length,t.length],"int32");for(let s=0;s<n.length;s++){const a=r.indexToLoc(n[s]),o=s*t.length;i.values.set(a,o)}return i.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X$e(t,e,n){const r=Z(t,"x","transpose");if(e==null&&(e=r.shape.map((a,o)=>o).reverse()),G(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(a=>{G(a>=0&&a<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const i={x:r},s={perm:e};return r.dtype==="complex64"?ce(()=>{let a=Ob(r),o=W_(r);return a=re.runKernel(wf,{x:a},s),o=re.runKernel(wf,{x:o},s),n&&(o=xn(o)),Zf(a,o)}):re.runKernel(wf,i,s)}const vt=ae({transpose_:X$e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y$e(t,e){if(e==null)return t.shape.slice();if($t(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z$e(t,e,n,r){const i=Z(t,"x","dropout");if(G(i.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),G(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Mn?i.clone():i;const s=Y$e(i,n),a=1-e,o=We(G1(Ae(jg(s,0,1,"float32",r),a)),a);return ne(i,o)}const Q$e=ae({dropout_:Z$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J$e(t,e,n,r,i,s="NHWC",a){let o=t;t.rank===3&&(o=se(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=se(e,[1,e.shape[0],e.shape[1],e.shape[2]])),G(o.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${o.shape}.`),G(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),G(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const c=s==="NHWC"?o.shape[3]:o.shape[1],f=s==="NHWC"?l.shape[3]:l.shape[1];G(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),G(f===n[3],()=>`Error in conv2dDerFilter: depth of dy (${f}) must match output depth for filter (${n[3]}).`),Qr("conv2dDerFilter",i,a);const h={x:o,dy:l},p={strides:r,pad:i,dataFormat:s,dimRoundingMode:a,filterShape:n};return re.runKernel(t_,h,p)}const nR=ae({conv2DBackpropFilter_:J$e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rR(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return ne(t,Ug(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function iR(t,e){let n=e;const r=jn(t.shape,e.shape);return r.length>0&&(n=Ue(n,r)),se(n,t.shape)}function sR(t,e,n,r){if(e==="linear")return t;if(e==="relu")return eu(t);if(e==="elu")return U1(t);if(e==="relu6")return VK(t);if(e==="prelu")return Z_(t,n);if(e==="leakyrelu")return G_(t,r);if(e==="sigmoid")return kh(t);throw new Error(`Unknown fused activation ${e}.`)}const aR=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eIe({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:a,bias:o,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:f}){if(l=l||"linear",aR(re.state.gradientDepth,l)===!1){G(i==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let E=zc(t,e,n,r,i,s,a);return o!=null&&(E=Ae(E,o)),sR(E,l,c,f)}const h=Z(t,"x","conv2d","float32"),p=Z(e,"filter","conv2d","float32");let g=h,y=!1;h.rank===3&&(y=!0,g=se(h,[1,h.shape[0],h.shape[1],h.shape[2]])),G(g.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${g.rank}.`),G(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),Qr("fused conv2d",r,a);const b=i==="NHWC"?g.shape[3]:g.shape[1];G(p.shape[2]===b,()=>`Error in conv2d: depth of input (${b}) must match input depth for filter ${p.shape[2]}.`),G(Cr(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);const v=cr(g.shape,p.shape,n,s,r,a);let w;o!=null&&(w=Z(o,"bias","fused conv2d"),[w]=wn(w,h),i==="NHWC"?nt(v.outShape,w.shape):(G(w.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${w.shape.length}.`),G(w.shape.length===0||w.shape[0]===v.outChannels||w.shape[0]===1,()=>`Error in fused conv2d: bias shape (${w.shape}) is not compatible with the number of output channels (${v.outChannels})`)));let S;if(c!=null){const E=c.shape;if(G(E.length<=1||E.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${E.length}.`),E.length===1)G(E[0]===1||E[0]===v.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${E}) is not compatible with the number of output channels (${v.outChannels}).`);else if(E.length===3)try{nt(E,v.outShape)}catch{const N=`Error in fused conv2d: PReLU activation weights (${E}) is not compatible with the output shape of the conv2d (${v.outShape}).`;throw Error(N)}S=Z(c,"prelu weights","fused conv2d")}const T=(E,I)=>{G(i==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);const[N,_,D,O]=I,P=rR(E,D,l);G(Fc(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const z=B_(_.shape,P,N,n,r),W=nR(_,P,N.shape,n,r),U=[z,W];if(O!=null){const R=iR(O,P);U.push(R)}return U},A={x:g,filter:p,bias:w,preluActivationWeights:S},k={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:a,activation:l,leakyreluAlpha:f};return o==null?Jf((I,N,_)=>{let D=re.runKernel(kb,A,k);return _([N,I,D]),y&&(D=se(D,[D.shape[1],D.shape[2],D.shape[3]])),{value:D,gradFunc:T}})(g,p):Jf((I,N,_,D)=>{let O=re.runKernel(kb,A,k);return D([N,I,O,_]),y&&(O=se(O,[O.shape[1],O.shape[2],O.shape[3]])),{value:O,gradFunc:T}})(g,p,w)}const tIe=ae({fusedConv2d_:eIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nIe(t,e,n,r,i,s=[1,1],a){let o=t;t.rank===3&&(o=se(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=se(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={x:o,dy:l},f={strides:r,pad:i,dimRoundingMode:a,dilations:s,filterShape:n};return re.runKernel(l_,c,f)}const rIe=ae({depthwiseConv2dNativeBackpropFilter_:nIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iIe(t,e,n,r,i,s=[1,1],a){let o=e,l=!1;e.rank===3&&(l=!0,o=se(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={dy:o,filter:n},f={strides:r,pad:i,dimRoundingMode:a,dilations:s,inputShape:t},h=re.runKernel(c_,c,f);return l?se(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const sIe=ae({depthwiseConv2dNativeBackpropInput_:iIe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aIe({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:i,activation:s="linear",preluActivationWeights:a,leakyreluAlpha:o=.2}){if(aR(re.state.gradientDepth,s)===!1){let O=kt(t,e,n,r);return i!=null&&(O=Ae(O,i)),sR(O,s,a,o)}let l=Z(t,"a","fused matMul"),c=Z(e,"b","fused matMul");[l,c]=wn(l,c);const f=n?l.shape[l.rank-2]:l.shape[l.rank-1],h=r?c.shape[c.rank-1]:c.shape[c.rank-2],p=n?l.shape[l.rank-1]:l.shape[l.rank-2],g=r?c.shape[c.rank-2]:c.shape[c.rank-1],y=l.shape.slice(0,-2),b=c.shape.slice(0,-2),v=be(y),w=be(b);G(f===h,()=>`Error in fused matMul: inner shapes (${f}) and (${h}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);const T=nt(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,g]),A=n?se(l,[v,f,p]):se(l,[v,p,f]),k=r?se(c,[w,g,h]):se(c,[w,h,g]);let E;i!=null&&(E=Z(i,"bias","fused matMul"),[E]=wn(E,l),nt(T,E.shape));let I;a!=null&&(I=Z(a,"prelu weights","fused matMul"));const N=(O,P)=>{const[z,W,U,R]=P,F=rR(se(O,U.shape),U,s);let B,K;if(!n&&!r?(B=kt(F,W,!1,!0),K=kt(z,F,!0,!1)):!n&&r?(B=kt(F,W,!1,!1),K=kt(F,z,!0,!1)):n&&!r?(B=kt(W,F,!1,!0),K=kt(z,F,!1,!1)):(B=kt(W,F,!0,!0),K=kt(F,z,!0,!0)),i!=null){const L=iR(R,F);return[B,K,L]}else return[B,K]},_={a:A,b:k,bias:E,preluActivationWeights:I},D={transposeA:n,transposeB:r,activation:s,leakyreluAlpha:o};return i==null?Jf((P,z,W)=>{const U=re.runKernel(Tb,_,D);return W([P,z,U]),{value:se(U,T),gradFunc:N}})(A,k):Jf((P,z,W,U)=>{const R=re.runKernel(Tb,_,D);return U([P,z,R,W]),{value:se(R,T),gradFunc:N}})(A,k,E)}const pG=ae({fusedMatMul_:aIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oIe(t,e,n,r,i="bilinear",s=0){const a=Z(t,"image","cropAndResize"),o=Z(e,"boxes","cropAndResize","float32"),l=Z(n,"boxInd","cropAndResize","int32"),c=o.shape[0];G(a.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${a.rank}.`),G(o.rank===2&&o.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${o.shape}.`),G(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${o.shape}.`),G(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),G(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),G(i==="bilinear"||i==="nearest",()=>`method must be bilinear or nearest, but was ${i}`);const f={image:a,boxes:o,boxInd:l},h={method:i,extrapolationValue:s,cropSize:r};return re.runKernel(s_,f,h)}const lIe=ae({cropAndResize_:oIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cIe(t){const e=Z(t,"image","flipLeftRight","float32");G(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return re.runKernel(p_,n,{})}const uIe=ae({flipLeftRight_:cIe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fIe(t){const e=Z(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];G(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),G(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const i=new Array(e.rank);return i.fill(1,0,n),i[n]=3,As(e,i)}const hIe=ae({grayscaleToRGB_:fIe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dIe(t){const e=Z(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];G(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),G(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const i=e.dtype,s=Re(e,"float32"),a=fi([.2989,.587,.114]);let o;switch(e.rank){case 2:o=Jd("ij,j->i",s,a);break;case 3:o=Jd("ijk,k->ij",s,a);break;case 4:o=Jd("ijkl,l->ijk",s,a);break;case 5:o=Jd("ijklm,m->ijkl",s,a);break;case 6:o=Jd("ijklmn,n->ijklm",s,a);break;default:throw new Error("Not a valid tensor rank.")}return o=Gr(o,-1),Re(o,i)}const pIe=ae({rgbToGrayscale_:dIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mIe(t,e,n=0,r=.5){const i=Z(t,"image","rotateWithOffset","float32");G(i.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);const s={image:i},a={radians:e,fillValue:n,center:r};return re.runKernel(R_,s,a)}const gIe=ae({rotateWithOffset_:mIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eh(t,e,n,r,i,s){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),s==null&&(s=0);const a=t.shape[0];return n=Math.min(n,a),G(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),G(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),G(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),G(e.rank===1,()=>"scores must be a 1D tensor"),G(e.shape[0]===a,()=>`scores has incompatible shape with boxes. Expected ${a}, but was ${e.shape[0]}`),G(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yIe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=Z(t,"boxes","nonMaxSuppression","float32"),a=Z(e,"scores","nonMaxSuppression","float32"),o=Eh(s,a,n,r,i);n=o.maxOutputSize,r=o.iouThreshold,i=o.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return re.runKernel(x_,{boxes:s,scores:a},l)}const vIe=ae({nonMaxSuppression_:yIe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bIe(t,e,n){const r=xIe(t,e,n),i=r<0?-(r+1):r;t.splice(i,0,e)}function xIe(t,e,n){return SIe(t,e,n||wIe)}function wIe(t,e){return t>e?1:t<e?-1:0}function SIe(t,e,n){let r=0,i=t.length,s=0,a=!1;for(;r<i;){s=r+(i-r>>>1);const o=n(e,t[s]);o>0?r=s+1:(i=s,a=!o)}return a?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oR(t,e,n,r,i){return uR(t,e,n,r,i,0)}function lR(t,e,n,r,i,s){return uR(t,e,n,r,i,0,!1,s,!0)}function cR(t,e,n,r,i,s){return uR(t,e,n,r,i,s,!0)}function uR(t,e,n,r,i,s,a=!1,o=!1,l=!1){const c=[];for(let v=0;v<e.length;v++)e[v]>i&&c.push({score:e[v],boxIndex:v,suppressBeginIndex:0});c.sort(mG);const f=s>0?-.5/s:0,h=[],p=[];for(;h.length<n&&c.length>0;){const v=c.pop(),{score:w,boxIndex:S,suppressBeginIndex:T}=v;if(w<i)break;let A=!1;for(let k=h.length-1;k>=T;--k){const E=CIe(t,S,h[k]);if(E>=r){A=!0;break}if(v.score=v.score*TIe(r,f,E),v.score<=i)break}v.suppressBeginIndex=h.length,A||(v.score===w?(h.push(S),p.push(v.score)):v.score>i&&bIe(c,v,mG))}const g=h.length,y=n-g;o&&y>0&&(h.push(...new Array(y).fill(0)),p.push(...new Array(y).fill(0)));const b={selectedIndices:h};return a&&(b.selectedScores=p),l&&(b.validOutputs=g),b}function CIe(t,e,n){const r=t.subarray(e*4,e*4+4),i=t.subarray(n*4,n*4+4),s=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(i[0],i[2]),f=Math.min(i[1],i[3]),h=Math.max(i[0],i[2]),p=Math.max(i[1],i[3]),g=(o-s)*(l-a),y=(h-c)*(p-f);if(g<=0||y<=0)return 0;const b=Math.max(s,c),v=Math.max(a,f),w=Math.min(o,h),S=Math.min(l,p),T=Math.max(w-b,0)*Math.max(S-v,0);return T/(g+y-T)}function TIe(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function mG(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function kIe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=Z(t,"boxes","nonMaxSuppressionAsync"),a=Z(e,"scores","nonMaxSuppressionAsync"),o=Eh(s,a,n,r,i);n=o.maxOutputSize,r=o.iouThreshold,i=o.scoreThreshold;const l=await Promise.all([s.data(),a.data()]),c=l[0],f=l[1],{selectedIndices:h}=oR(c,f,n,r,i);return s!==t&&s.dispose(),a!==e&&a.dispose(),fi(h,"int32")}const AIe=kIe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EIe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const a=Z(t,"boxes","nonMaxSuppression"),o=Z(e,"scores","nonMaxSuppression"),l=Eh(a,o,n,r,i,s);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,s=l.softNmsSigma;const c={boxes:a,scores:o},f={maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:s},h=re.runKernel(S_,c,f);return{selectedIndices:h[0],selectedScores:h[1]}}const $Ie=ae({nonMaxSuppressionWithScore_:EIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function IIe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const a=Z(t,"boxes","nonMaxSuppressionAsync"),o=Z(e,"scores","nonMaxSuppressionAsync"),l=Eh(a,o,n,r,i,s);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,s=l.softNmsSigma;const c=await Promise.all([a.data(),o.data()]),f=c[0],h=c[1],{selectedIndices:p,selectedScores:g}=cR(f,h,n,r,i,s);return a!==t&&a.dispose(),o!==e&&o.dispose(),{selectedIndices:fi(p,"int32"),selectedScores:fi(g)}}const NIe=IIe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OIe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const a=Z(t,"boxes","nonMaxSuppression"),o=Z(e,"scores","nonMaxSuppression"),l=Eh(a,o,n,r,i,null),c=l.maxOutputSize,f=l.iouThreshold,h=l.scoreThreshold,p={boxes:a,scores:o},g={maxOutputSize:c,iouThreshold:f,scoreThreshold:h,padToMaxOutputSize:s},y=re.runKernel(w_,p,g);return{selectedIndices:y[0],validOutputs:y[1]}}const _Ie=ae({nonMaxSuppressionPadded_:OIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function RIe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const a=Z(t,"boxes","nonMaxSuppressionAsync"),o=Z(e,"scores","nonMaxSuppressionAsync"),l=Eh(a,o,n,r,i,null),c=l.maxOutputSize,f=l.iouThreshold,h=l.scoreThreshold,[p,g]=await Promise.all([a.data(),o.data()]),{selectedIndices:y,validOutputs:b}=lR(p,g,c,f,h,s);return a!==t&&a.dispose(),o!==e&&o.dispose(),{selectedIndices:fi(y,"int32"),validOutputs:At(b,"int32")}}const DIe=RIe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MIe(t,e,n=!1,r=!1){const i=Z(t,"images","resizeBilinear");G(i.rank===3||i.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),G(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),G(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=i,a=!1;i.rank===3&&(a=!0,s=se(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const o={images:s},l={alignCorners:n,halfPixelCenters:r,size:e},c=re.runKernel(A1,o,l);return a?se(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const tX=ae({resizeBilinear_:MIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PIe(t,e,n=!1,r=!1){const i=Z(t,"images","resizeNearestNeighbor");G(i.rank===3||i.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),G(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),G(i.dtype==="float32"||i.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),G(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=i,a=!1;i.rank===3&&(a=!0,s=se(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const o={images:s},l={alignCorners:n,halfPixelCenters:r,size:e},c=re.runKernel(k1,o,l);return a?se(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const nX=ae({resizeNearestNeighbor_:PIe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LIe(t,e="binary",n=!1,r=.5){const i=Z(t,"image","threshold"),s=.2989,a=.587,o=.114,l=i.shape[0]*i.shape[1];let c=ne(fi([r]),255),f,h,p,g;if(G(i.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),G(i.shape[2]===3||i.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),G(i.dtype==="int32"||i.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),G(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),i.shape[2]===3){[f,h,p]=_i(i,[1,1,1],-1);const v=ne(f,s),w=ne(h,a),S=ne(p,o);g=Ae(Ae(v,w),S)}else g=t;if(e==="otsu"){const v=Dke(Re(UK(g),"int32"),gK([]),256);c=FIe(v,l)}const y=n?Ah(g,c):Mi(g,c);return Re(ne(y,255),"int32")}function FIe(t,e){let n=fi([-1]),r=fi([0]),i=fi([0]),s,a,o,l,c,f;for(let h=0;h<t.size-1;h++){s=qt(t,0,h+1),a=qt(t,h+1),c=We(Ue(s),e),f=We(Ue(a),e);const p=Ue(ne(s,wm(0,s.size)));o=We(p,Ue(s));const g=V1(a.shape,s.size),y=Ae(wm(0,a.size),g),b=ne(a,y);l=We(Ue(b),Ue(a));const v=Ke(o,l),w=Ke(o,l),S=ne(c,f);i=ne(ne(S,v),w);const T=Mi(i,r);r=Br(T,i,r),n=Br(T,fi([h]),n)}return n}const BIe=ae({threshold_:LIe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zIe(t,e,n="nearest",r="constant",i=0,s){const a=Z(t,"image","transform","float32"),o=Z(e,"transforms","transform","float32");G(a.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${a.rank}.`),G(o.rank===2&&(o.shape[0]===a.shape[0]||o.shape[0]===1)&&o.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),G(s==null||s.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`);const l={image:a,transforms:o},c={interpolation:n,fillMode:r,fillValue:i,outputShape:s};return re.runKernel(O_,l,c)}const jIe=ae({transform_:zIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VIe(t,e,n){const r=Z(t,"a","bandPart");G(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const i=r.shape,[s,a]=r.shape.slice(-2);let o,l;typeof e=="number"?(G(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),G(e<=s,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${s}).`),o=Z(e<0?s:e,"numLower","bandPart")):(G(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),o=Br(Ib(e,0),s,xm(e,s))),typeof n=="number"?(G(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),G(n<=a,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${a}).`),l=Z(n<0?a:n,"numUpper","bandPart")):(G(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=Br(Ib(n,0),a,xm(n,a)));const c=se(wm(0,s,1,"int32"),[-1,1]),f=wm(0,a,1,"int32"),h=Ke(c,f),p=lo(Ah(h,o),Jc(h,xn(l))),g=Yn([s,a],r.dtype);return se(co(Uc(se(r,[-1,s,a])).map(y=>Br(p,y,g))),i)}const UIe=ae({bandPart_:VIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WIe(t){let e;if(Array.isArray(t)){e=!1,G(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const i=t[0].shape[0];for(let s=1;s<t.length;++s)G(t[s].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[s].shape[0]} vs. ${i})`)}else e=!0,t=_i(t,t.shape[0],0).map(i=>Vg(i,[0]));G(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let i=0;i<t.length;++i)n.push(re.tidy(()=>{let s=r[i];if(i>0)for(let a=0;a<i;++a){const o=ne(Ue(ne(n[a],s)),n[a]);s=Ke(s,o)}return We(s,W1(s,"euclidean"))}));return e?co(n,0):n}const GIe=ae({gramSchmidt_:WIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qIe(t,e=!1){if(G(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return gG(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),r=Uc(se(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],s=[];r.forEach(l=>{const[c,f]=gG(l,e);i.push(c),s.push(f)});const a=se(co(i,0),t.shape),o=se(co(s,0),t.shape);return[a,o]}}function gG(t,e=!1){return re.tidy(()=>{G(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let i=MK(n),s=Ac(t);const a=nE([[1]],[1,1]);let o=Ac(a);const l=n>=r?r:n;for(let c=0;c<l;++c){const f=s,h=o,p=i;[o,s,i]=re.tidy(()=>{const g=qt(s,[c,c],[n-c,1]),y=W1(g),b=qt(s,[c,c],[1,1]),v=Br(Mi(b,0),nE([[-1]]),nE([[1]])),w=Ke(b,ne(v,y)),S=We(g,w);S.shape[0]===1?o=Ac(a):o=Xr([a,qt(S,[1,0],[S.shape[0]-1,S.shape[1]])],0);const T=xn(We(kt(v,w),y)),A=qt(s,[c,0],[n-c,r]),k=ne(T,o),E=vt(o);if(c===0)s=Ke(A,kt(k,kt(E,A)));else{const _=Ke(A,kt(k,kt(E,A)));s=Xr([qt(s,[0,0],[c,r]),_],0)}const I=vt(k),N=qt(i,[0,c],[n,i.shape[1]-c]);if(c===0)i=Ke(N,kt(kt(N,o),I));else{const _=Ke(N,kt(kt(N,o),I));i=Xr([qt(i,[0,0],[n,c]),_],1)}return[o,s,i]}),ft([f,h,p])}return!e&&n>r&&(i=qt(i,[0,0],[n,r]),s=qt(s,[0,0],[r,r])),[i,s]})}const HIe=ae({qr_:qIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xa={flipLeftRight:uIe,grayscaleToRGB:hIe,resizeNearestNeighbor:nX,resizeBilinear:tX,rgbToGrayscale:pIe,rotateWithOffset:gIe,cropAndResize:lIe,nonMaxSuppression:vIe,nonMaxSuppressionAsync:AIe,nonMaxSuppressionWithScore:$Ie,nonMaxSuppressionWithScoreAsync:NIe,nonMaxSuppressionPadded:_Ie,nonMaxSuppressionPaddedAsync:DIe,threshold:BIe,transform:jIe},KIe={bandPart:UIe,gramSchmidt:GIe,qr:HIe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XIe=new Map,YIe=new Map;class $h{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class es{constructor(){this.classNameMap={}}static getMap(){return es.instance==null&&(es.instance=new es),es.instance}static register(e){es.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Te(t,e,n){G(t.className!=null,()=>"Class being registered does not have the static className property defined."),G(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),G(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,i=e+">"+r;return es.register(t),XIe.set(i,t),YIe.set(t,i),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nl extends $h{minimize(e,n=!1,r){const{value:i,grads:s}=this.computeGradients(e,r);if(r!=null){const a=r.map(o=>({name:o.name,tensor:s[o.name]}));this.applyGradients(a)}else this.applyGradients(s);return ft(s),n?i:(i.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return tEe(e,n)}dispose(){this.iterations_!=null&&ft(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:At(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Nl,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rX extends Nl{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=re.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=re.registeredVariables[r],a=!1;this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accum_grad`,variable:ce(()=>bt(s).variable(a))}),this.accumulatedUpdates[i]==null&&(this.accumulatedUpdates[i]={originalName:`${r}/accum_var`,variable:ce(()=>bt(s).variable(a))});const o=Array.isArray(e)?e[i].tensor:e[r];if(o==null)return;const l=this.accumulatedGrads[i].variable,c=this.accumulatedUpdates[i].variable;ce(()=>{const f=Ae(ne(l,this.rho),ne(Qt(o),1-this.rho)),h=ne(We(Sr(Ae(c,this.epsilon)),Sr(Ae(l,this.epsilon))),o),p=Ae(ne(c,this.rho),ne(Qt(h),1-this.rho));l.assign(f),c.assign(p);const g=Ae(ne(h,-this.learningRate),s);s.assign(g)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(ft(this.accumulatedGrads.map(e=>e.variable)),ft(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iX extends Nl{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=re.registeredVariables[r];this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accumulator`,variable:ce(()=>V1(s.shape,this.initialAccumulatorValue).variable(!1))});const a=Array.isArray(e)?e[i].tensor:e[r];if(a==null)return;const o=this.accumulatedGrads[i].variable;ce(()=>{const l=Ae(o,Qt(a));o.assign(l);const c=Ae(ne(We(a,Sr(Ae(l,re.backend.epsilon()))),-this.learningRate),s);s.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&ft(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sX extends Nl{static get className(){return"Adam"}constructor(e,n,r,i=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],ce(()=>{this.accBeta1=At(n).variable(),this.accBeta2=At(r).variable()}),i==null&&(this.epsilon=re.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);ce(()=>{const r=Ke(1,this.accBeta1),i=Ke(1,this.accBeta2);n.forEach((s,a)=>{const o=re.registeredVariables[s],l=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${s}/m`,variable:ce(()=>bt(o).variable(l))}),this.accumulatedSecondMoment[a]==null&&(this.accumulatedSecondMoment[a]={originalName:`${s}/v`,variable:ce(()=>bt(o).variable(l))});const c=Array.isArray(e)?e[a].tensor:e[s];if(c==null)return;const f=this.accumulatedFirstMoment[a].variable,h=this.accumulatedSecondMoment[a].variable,p=Ae(ne(f,this.beta1),ne(c,1-this.beta1)),g=Ae(ne(h,this.beta2),ne(Qt(c),1-this.beta2)),y=We(p,r),b=We(g,i);f.assign(p),h.assign(g);const v=Ae(ne(We(y,Ae(Sr(b),this.epsilon)),-this.learningRate),o);o.assign(v)}),this.accBeta1.assign(ne(this.accBeta1,this.beta1)),this.accBeta2.assign(ne(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&ft(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&ft(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),ce(()=>{this.accBeta1.assign(jc(this.beta1,this.iterations_+1)),this.accBeta2.assign(jc(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aX extends Nl{static get className(){return"Adamax"}constructor(e,n,r,i=null,s=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.decay=s,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],ce(()=>{this.iteration=At(0).variable(),this.accBeta1=At(n).variable()}),i==null&&(this.epsilon=re.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);ce(()=>{const r=Ke(1,this.accBeta1),i=We(-this.learningRate,Ae(ne(this.iteration,this.decay),1));n.forEach((s,a)=>{const o=re.registeredVariables[s],l=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${s}/m`,variable:bt(o).variable(l)}),this.accumulatedWeightedInfNorm[a]==null&&(this.accumulatedWeightedInfNorm[a]={originalName:`${s}/v`,variable:bt(o).variable(l)});const c=Array.isArray(e)?e[a].tensor:e[s];if(c==null)return;const f=this.accumulatedFirstMoment[a].variable,h=this.accumulatedWeightedInfNorm[a].variable,p=Ae(ne(f,this.beta1),ne(c,1-this.beta1)),g=ne(h,this.beta2),y=Rr(c),b=$l(g,y);f.assign(p),h.assign(b);const v=Ae(ne(We(i,r),We(p,Ae(b,this.epsilon))),o);o.assign(v)}),this.iteration.assign(Ae(this.iteration,1)),this.accBeta1.assign(ne(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&ft(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&ft(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fR extends Nl{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Array.isArray(e)?e[i].tensor:e[r];if(s==null)return;const a=re.registeredVariables[r];ce(()=>{const o=Ae(ne(this.c,s),a);a.assign(o)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=ia(At(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oX extends fR{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=At(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=re.registeredVariables[r];this.accumulations[i]==null&&(this.accumulations[i]={originalName:`${r}/momentum`,variable:ce(()=>bt(s).variable(!1))});const a=this.accumulations[i].variable,o=Array.isArray(e)?e[i].tensor:e[r];o!=null&&ce(()=>{let l;const c=Ae(ne(this.m,a),o);this.useNesterov?l=Ae(ne(this.c,Ae(o,ne(c,this.m))),s):l=Ae(ne(this.c,c),s),a.assign(c),s.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&ft(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lX extends Nl{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,i=null,s=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=s,i==null&&(this.epsilon=re.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=re.registeredVariables[r],a=!1;this.accumulatedMeanSquares[i]==null&&(this.accumulatedMeanSquares[i]={originalName:`${r}/rms`,variable:ce(()=>bt(s).variable(a))}),this.accumulatedMoments[i]==null&&(this.accumulatedMoments[i]={originalName:`${r}/momentum`,variable:ce(()=>bt(s).variable(a))}),this.accumulatedMeanGrads[i]==null&&this.centered&&(this.accumulatedMeanGrads[i]={originalName:`${r}/mg`,variable:ce(()=>bt(s).variable(a))});const o=Array.isArray(e)?e[i].tensor:e[r];if(o==null)return;const l=this.accumulatedMeanSquares[i].variable,c=this.accumulatedMoments[i].variable;ce(()=>{const f=Ae(ne(l,this.decay),ne(Qt(o),1-this.decay));if(this.centered){const h=this.accumulatedMeanGrads[i].variable,p=Ae(ne(h,this.decay),ne(o,1-this.decay)),g=We(ne(o,this.learningRate),Sr(Ke(f,Ae(Qt(p),this.epsilon)))),y=Ae(ne(c,this.momentum),g);l.assign(f),h.assign(p),c.assign(y);const b=Ke(s,y);s.assign(b)}else{const h=Ae(ne(l,this.decay),ne(Qt(o),1-this.decay)),p=Ae(ne(c,this.momentum),We(ne(o,this.learningRate),Sr(Ae(h,this.epsilon))));l.assign(h),c.assign(p);const g=Ke(s,p);s.assign(g)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&ft(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&ft(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&ft(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZIe=[rX,iX,sX,aX,oX,lX,fR];function QIe(){for(const t of ZIe)Te(t)}function hR(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(be(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const i=e.shape,s=i[i.length-1];let a=1;for(let h=0;h<i.length-1;++h)a*=i[h];const o=t.shape,l=i.slice();l.pop();let c=1;for(let h=s;h<n;++h)c*=o[h],l.push(o[h]);const f=[...je(t.shape).map(h=>h/c),1].slice(0,s);return[l,a,c,f]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OI=-2,JIe=-1;function dR(t,e,n){const r=t.shape.length;G(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),G(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let i=0;i<r;++i)G(e[i]+n[i]<=t.shape[i],()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${e[i]+n[i]}) would overflow input.shape[${i}] (${t.shape[i]})`)}function eNe(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function pR(t,e,n){const r=[];for(let i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function cX(t,e,n,r){const i=[...t];for(let s=i.length;s<r.length;s++)i.push(1);for(let s=0;s<n;s++)s===0?i[e]=1:(i.splice(e,0,1),i.pop());return i}function uX(t,e,n){return n<=t?n:n-(e-1)}function fX(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function tNe(t,e,n,r,i,s,a,o,l){const c=t.length;let f=new Array(c),h=new Array(c),p=new Array(c);if(e.length&&n>0){const g=e[0],y=n+1;f=hX(a,g,y,r,t),h=dX(o,g,y,i,t),p=cX(s,g,y,t)}else for(let g=0;g<c;g++)f[g]=mX(a,r,s,t,g,l),h[g]=gX(o,i,s,t,g,l),p[g]=pX(s,g,l);return{begin:f,end:h,strides:p}}function hX(t,e,n,r,i){const s=[...i],a=fX(n,e);for(let o=0;o<s.length;o++)if(a.indexOf(o)>-1)s[o]=0;else{const l=uX(e,n,o);let c=r[l];t&1<<l&&(c=0),s[o]=c}return s}function dX(t,e,n,r,i){const s=[...i],a=fX(n,e);for(let o=0;o<s.length;o++)if(a.indexOf(o)>-1)s[o]=Number.MAX_SAFE_INTEGER;else{const l=uX(e,n,o);let c=r[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),s[o]=c}for(let o=0;o<s.length;o++){const l=i[o];s[o]<0&&(s[o]+=l),s[o]=Dc(0,s[o],i[o])}return s}function pX(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function mX(t,e,n,r,i,s){let a=e[i];const o=n[i]||1;(t&1<<i||s&1<<i||a==null)&&(o>0?a=Number.MIN_SAFE_INTEGER:a=Number.MAX_SAFE_INTEGER);const l=r[i];return a<0&&(a+=l),a=Dc(0,a,l-1),a}function gX(t,e,n,r,i,s){let a=e[i];const o=n[i]||1;(t&1<<i||s&1<<i||a==null)&&(o>0?a=Number.MAX_SAFE_INTEGER:a=Number.MIN_SAFE_INTEGER);const l=r[i];return a<0&&(a+=l),o>0?a=Dc(0,a,l):a=Dc(-1,a,l-1),a}function mR(t,e,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function gR(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function q1(t,e,n){let r;const i=t.shape.length;typeof e=="number"?r=[e,...new Array(i-1).fill(0)]:e.length<i?r=e.concat(new Array(i-e.length).fill(0)):r=e.slice(),r.forEach(a=>{G(a!==-1,()=>"slice() does not support negative begin indexing.")});let s;return n==null?s=new Array(i).fill(-1):typeof n=="number"?s=[n,...new Array(i-1).fill(-1)]:n.length<i?s=n.concat(new Array(i-n.length).fill(-1)):s=n,s=s.map((a,o)=>a>=0?a:(G(a===-1,()=>`Negative size values should be exactly -1 but got ${a} for the slice() size at index ${o}.`),t.shape[o]-r[o])),[r,s]}function yR(t,e,n,r,i,s,a,o,l){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,a!=null&&(a&a-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let f=!1;const h={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:c.slice(),beginMask:i,endMask:s,ellipsisMask:a,newAxisMask:o,shrinkAxisMask:l};for(let T=0;T<h.dims;T++)f&&(1<<T&o)!==0&&h.numAddAxisAfterEllipsis++,1<<T&a&&(f=!0);f||(h.ellipsisMask|=1<<h.dims,h.dims++);const p={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};nNe(h,p);let g=!0,y=!0,b=!0;const v=[],w=[];for(let T=0;T<t.length;++T){if(p.strides[T]===0)throw Error(`strides[${T}] must be non-zero`);const A=!!(p.shrinkAxisMask&1<<T),k=t[T];if(k===-1){v.push(A?1:-1);continue}const E=[p.beginMask&1<<T,p.endMask&1<<T],I=[p.strides[T]>0?0:-1,p.strides[T]>0?k:k-1];if(A&&p.strides[T]<=0)throw Error("only stride 1 allowed on non-range indexing.");b=b&&p.strides[T]===1;const N=!!(p.beginMask&1<<T&&p.endMask&1<<T);if(p.beginValid&&p.endValid){if(A){const P=p.begin[T]<0?k+p.begin[T]:p.begin[T];if(p.begin[T]=P,p.end[T]=p.begin[T]+1,P<0||P>=k)throw Error(`slice index ${p.begin[T]} of dimension ${T} out of bounds.`)}else p.begin[T]=yG(p.begin[T],0,p.strides[T],k,E,I),p.end[T]=yG(p.end[T],1,p.strides[T],k,E,I);const O=p.strides[T]===1&&p.begin[T]===0&&p.end[T]===k;g=g&&O,y=y&&(T===0&&p.strides[T]===1||O)}else g=g&&p.strides[T]===1&&N,y=y&&(T===0&&p.strides[T]===1||N);let _,D=!1;if(p.beginValid&&p.endValid?(_=p.end[T]-p.begin[T],D=!0):A?(_=1,D=!0):N&&k>=0&&(p.strides[T]<0?_=-k:_=k,D=!0),D){let O;_===0||_<0!=p.strides[T]<0?O=0:O=Math.trunc(_/p.strides[T])+(_%p.strides[T]!==0?1:0),v.push(O)}else v.push(-1)}for(let T=0;T<p.finalShapeGatherIndices.length;++T){const A=p.finalShapeGatherIndices[T];A>=0?w.push(v[A]):A===OI&&w.push(1)}return{finalShapeSparse:w.filter((T,A)=>p.finalShapeGatherIndices[A]!==OI),finalShape:w,isIdentity:g,sliceDim0:y,isSimpleSlice:b,begin:p.begin,end:p.end,strides:p.strides}}function nNe(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const i=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<i;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(OI),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(JIe),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function yG(t,e,n,r,i,s){if(i[e])return n>0?s[e]:s[e+1&1];{const a=t<0?r+t:t;return a<s[0]?s[0]:a>s[1]?s[1]:a}}const rNe=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:dR,computeFlatOffset:gR,computeOutShape:pR,getNormalizedAxes:tNe,isSliceContinous:mR,maskToAxes:eNe,parseSliceParams:q1,sliceInfo:yR,startForAxis:mX,startIndicesWithElidedDims:hX,stopForAxis:gX,stopIndicesWithElidedDims:dX,stridesForAxis:pX,stridesWithElidedDims:cX},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iNe{static sgd(e){return new fR(e)}static momentum(e,n,r=!1){return new oX(e,n,r)}static rmsprop(e,n=.9,r=0,i=null,s=!1){return new lX(e,n,r,i,s)}static adam(e=.001,n=.9,r=.999,i=null){return new sX(e,n,r,i)}static adadelta(e=.001,n=.95,r=null){return new rX(e,n,r)}static adamax(e=.002,n=.9,r=.999,i=null,s=0){return new aX(e,n,r,i,s)}static adagrad(e,n=.1){return new iX(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ef=iNe;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sNe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function yX(){return new Promise(t=>sNe(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vR(t,e){const n=t[0].length;t.forEach((i,s)=>{G(i.length===n,()=>`Error in concat${n}D: rank of tensors[${s}] must be the same as the rank of the rest (${n})`)}),G(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((i,s)=>{for(let a=0;a<n;a++)G(a===e||i[a]===r[a],()=>`Error in concat${n}D: Shape of tensors[${s}] (${i}) does not match the shape of the rest (${r}) along the non-concatenated axis ${s}.`)})}function sa(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Cs;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(Cs||(Cs={}));function vX(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let i=1;i<n.length;++i){const s=n[i],a=r[r.length-n.length+i],o=r[a];if(s>=0)if(o>=0){if(o!==s)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${i+t}] = ${s} but shape[${i+t}] = ${o}`)}else r[a]=s}return r}function bX(t){const e={FIRST_DIM_SIZE:Cs.FIRST_DIM_SIZE,VALUE_ROWIDS:Cs.VALUE_ROWIDS,ROW_LENGTHS:Cs.ROW_LENGTHS,ROW_SPLITS:Cs.ROW_SPLITS,ROW_LIMITS:Cs.ROW_LIMITS,ROW_STARTS:Cs.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function xX(t){return t.length===0?0:t[0]===Cs.FIRST_DIM_SIZE?t.length-1:t.length}function wX(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(n,r-1);++i){const s=t[i],a=e[i+1];if(s>=0&&a>=0&&s!==1&&s!==a)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${i-t.length}] = ${s} but ragged tensor input.flatValues.shape[${i-t.length}] = ${a}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bR=30;function H1(t){return t<=bR?t:mI(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xR(t,e,n){const r=n*(typeof t=="number"?t:t[0]),i=e*(typeof t=="number"?t:t[1]);return[r,i]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wg(t,e,n,r=!0){let i=[];if(r)i=i.concat(e.slice(0)),i.push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);const s=e.length;for(let a=0;a<s;++a)i=i.concat([t[a+1]/e[a],e[a]]);i=i.concat(t.slice(s+1))}return i}function Gg(t,e,n=!0){const r=[];if(n){r.push(e);for(let i=e+1;i<t;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{const i=[],s=[];for(let a=1;a<t;++a)a>=e*2+1||a%2===1?s.push(a):i.push(a);r.push(...i),r.push(0),r.push(...s)}return r}function qg(t,e,n,r=!0){const i=[];r?i.push(t[0]/n):i.push(t[0]*n);for(let s=1;s<t.length;++s)s<=e.length?r?i.push(e[s-1]*t[s]):i.push(t[s]/e[s-1]):i.push(t[s]);return i}function wR(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function SR(t,e,n){const r=t.slice(0,1);for(let i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K1=1.7580993408473768,X1=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CR=.3275911,TR=.254829592,kR=-.284496736,AR=1.421413741,ER=-1.453152027,$R=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uo(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function SX(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function CX(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=0;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function TX(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=2;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function IR(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function kX(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function AX(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let i=0;i<Math.ceil(t/2);i++){const s=(e?2:-2)*Math.PI*(i/t);n[i]=Math.cos(s),r[i]=Math.sin(s)}return{real:n,imag:r}}function EX(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),i=Math.cos(r),s=Math.sin(r);return{real:i,imag:s}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rE="->",aNe=/->/g,vG=",",bG="...";function NR(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(aNe,"").length)/rE.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${rE}").`);const[r,i]=t.split(rE);G(r.indexOf(bG)===-1,()=>`The ellipsis notation ("${bG}") is not supported yet.`);const s=r.split(vG),a=s.length;if(e!==a)throw new Error(`Expected ${a} input tensors, received ${e}`);if(a>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const o=[];for(let p=0;p<i.length;++p){const g=i[p];if(!s.some(y=>y.indexOf(g)!==-1))throw new Error(`Output subscripts contain the label ${g} not present in the input subscripts.`);o.indexOf(g)===-1&&o.push(g)}for(let p=0;p<r.length;++p){const g=r[p];o.indexOf(g)===-1&&g!==vG&&o.push(g)}const l=new Array(s.length);for(let p=0;p<a;++p){if(new Set(s[p].split("")).size!==s[p].length)throw new Error(`Found duplicate axes in input component ${s[p]}. Support for duplicate axes in input is not implemented yet.`);l[p]=[];for(let g=0;g<s[p].length;++g)l[p].push(o.indexOf(s[p][g]))}const c=o.length,f=i.length,h=[];for(let p=f;p<c;++p)h.push(p);return{allDims:o,summedDims:h,idDims:l}}function OR(t,e){let n=new Array(t);n.fill(-1);for(let i=0;i<e.length;++i)n[e[i]]=i;const r=[];for(let i=0;i<t;++i)n[i]===-1&&r.push(i);return n=n.filter(i=>i!==-1),{permutationIndices:n,expandDims:r}}function _R(t,e,n){const r=new Array(t);for(let i=0;i<n.length;++i){const s=n[i].shape;for(let a=0;a<e[i].length;++a)r[e[i][a]]===void 0?r[e[i][a]]=s[a]:G(r[e[i][a]]===s[a],()=>`Expected dimension ${r[e[i][a]]} at axis ${a} of input shaped ${JSON.stringify(s)}, but got dimension ${s[a]}`)}}function RR(t,e){const n=t,r=[];let i=0;t.length===0&&n.push(-1),i=t.length+1;for(let a=0;a<i;++a)r.push([]);const s=[];for(let a=0;a<n.length;++a){const o=n[a],l=oNe(e,o);for(const c of l)s.indexOf(c)===-1&&(r[a].push(c),s.push(c))}return{path:n,steps:r}}function DR(t){return t.every((e,n)=>e===n)}function oNe(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function MR(t,e,n=0){let r=[];if(typeof e=="number")G(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const i=e.reduce((a,o)=>(o===-1&&(a+=1),a),0);G(i<=1,()=>"There should be only one negative value in split array.");const s=e.indexOf(-1);if(s!==-1){const a=e.reduce((o,l)=>l>0?o+l:o);e[s]=t.shape[n]-a}G(t.shape[n]===e.reduce((a,o)=>a+o),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $X(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function IX(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function NX(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OX(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function _X(t,e){return`size ${t} must be non-negative, not ${e}`}function RX(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function DX(t,e){const n=be(t),r=be(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function MX(t,e){const n=be(t),r=be(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _I(){return"segment ids must be >= 0"}function PX(){return"segment ids are not increasing"}function LX(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function FX(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BX(t,e){let n=!1,r;for(t<=bR?(r=t,n=!0):r=mI(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=mI(t,r+1);return r}function zX(t,e,n){const r=[],i=t.length;for(let s=0;s<i;s++)s!==e?r.push(t[s]):r.push(n);return r}function PR(t,e,n,r){const i=e.shape.length,s=t.shape.length;if(r!==0&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>s)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${s}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let h=0;h<r;++h)if(t.shape[h]!==e.shape[h])throw new Error(`x.shape[${h}]: ${t.shape[h]} should be equal to indices.shape[${h}]: ${e.shape[h]}.`);const a=t.shape[n],o=[];let l=1,c=1,f=1;for(let h=0;h<r;++h)o.push(t.shape[h]),l*=t.shape[h];for(let h=r;h<n;h++)o.push(t.shape[h]),c*=t.shape[h];for(let h=r;h<i;h++)o.push(e.shape[h]);for(let h=n+1;h<s;h++)o.push(t.shape[h]),f*=t.shape[h];return{batchSize:l,sliceSize:f,outerSize:c,dimSize:a,outputShape:o}}const lNe=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:PR,computeOutShape:zX,segOpComputeOptimalWindowSize:BX},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fo(t){try{return t.map(e=>fl(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function jX(t){return t.map(e=>al(e))}const cNe=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:TR,ERF_A2:kR,ERF_A3:AR,ERF_A4:ER,ERF_A5:$R,ERF_P:CR,PARALLELIZE_THRESHOLD:bR,get RowPartitionType(){return Cs},SELU_SCALE:X1,SELU_SCALEALPHA:K1,applyActivation:sR,assertAndGetBroadcastShape:nt,assertAxesAreInnerMostDims:ur,assertParamsConsistent:vR,assignToTypedArray:kX,axesAreInnerMostDims:V_,calculateShapes:tu,checkEinsumDimSizes:_R,checkPadOnDimRoundingMode:Qr,combineLocations:RK,combineRaggedTensorToTensorShapes:vX,complexWithEvenIndex:CX,complexWithOddIndex:TX,computeConv2DInfo:cr,computeConv3DInfo:Al,computeDefaultPad:P_,computeDilation2DInfo:Bg,computeOptimalWindowSize:H1,computeOutAndReduceShapes:er,computeOutShape:sa,computePool2DInfo:us,computePool3DInfo:vo,convertConv2DDataFormat:bo,decodeEinsumEquation:NR,eitherStridesOrDilationsAreOne:Cr,expandShapeToKeepDim:On,exponent:EX,exponents:AX,fromStringArrayToUint8:jX,fromUint8ToStringArray:fo,getAxesPermutation:on,getBroadcastDims:Qf,getComplexWithIndex:IR,getEinsumComputePath:RR,getEinsumPermutation:OR,getFusedBiasGradient:iR,getFusedDyActivation:rR,getImageCenter:xR,getInnerMostAxes:Sn,getPermuted:Gg,getRaggedRank:xX,getReductionAxes:jn,getReshaped:Wg,getReshapedPermuted:qg,getRowPartitionTypesHelper:bX,getSliceBeginCoords:wR,getSliceSize:SR,getSparseFillEmptyRowsIndicesDenseShapeMismatch:$X,getSparseFillEmptyRowsNegativeIndexErrorMessage:IX,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:NX,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:RX,getSparseReshapeInputOutputMismatchErrorMessage:MX,getSparseReshapeInputOutputMultipleErrorMessage:DX,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:OX,getSparseReshapeNegativeOutputDimErrorMessage:_X,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:FX,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:_I,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:PX,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:LX,getUndoAxesPermutation:El,isIdentityPermutation:DR,log:WTe,mergeRealAndImagArrays:uo,prepareAndValidate:hR,prepareSplitSize:MR,segment_util:lNe,shouldFuse:aR,slice_util:rNe,splitRealAndImagArrays:SX,stridesOrDilationsArePositive:Bc,tupleValuesAreOne:Fc,upcastType:hi,validateDefaultValueShape:wX,validateInput:z$e,validateUpdateShape:ZK,warn:Ni},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */QIe();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VX={kernelName:Lx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,Ug(Re(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uNe={kernelName:Wm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Qt(Re(n,"float32")),i=Sr(Ke(At(1),r));return xn(We(t,i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fNe={kernelName:Gm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Sr(Ke(Qt(Re(n,"float32")),1));return We(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hNe={kernelName:Ch,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=nt(n.shape,r.shape);return{a:()=>{let o=t;const l=jn(n.shape,i);return l.length>0&&(o=Ue(o,l)),se(o,n.shape)},b:()=>{let o=t;const l=jn(r.shape,i);return l.length>0&&(o=Ue(o,l)),se(o,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dNe={kernelName:HO,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,i)=>{n[i]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pNe={kernelName:Fx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>bt(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mNe={kernelName:Bx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>bt(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gNe={kernelName:qm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>We(t,Sr(Ke(At(1),Qt(Re(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yNe={kernelName:Hm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Sr(Ae(At(1),Qt(Re(n,"float32"))));return We(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vNe={kernelName:Ym,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=nt(n.shape,r.shape);return{a:()=>{const o=Ae(Qt(n),Qt(r));let l=ne(t,We(r,o));const c=jn(n.shape,i);return c.length>0&&(l=Ue(l,c)),se(l,n.shape)},b:()=>{const o=Ae(Qt(n),Qt(r));let l=xn(ne(t,We(n,o)));const c=jn(r.shape,i);return c.length>0&&(l=Ue(l,c)),se(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bNe={kernelName:Km,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>We(t,Ae(Qt(Re(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xNe={kernelName:Xm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>We(t,Ke(At(1),Qt(Re(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wNe(t,e,n,r,i,s){const a=Z(t,"dy","avgPool3dGrad"),o=Z(e,"input","avgPool3dGrad");let l=a,c=o,f=!1;o.rank===4&&(f=!0,l=se(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),c=se(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),G(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),G(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),Qr("avgPool3dGrad",i,s);const h={dy:l,input:c},p={filterSize:n,strides:r,pad:i,dimRoundingMode:s},g=re.runKernel(ZO,h,p);return f?se(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const SNe=ae({avgPool3dGrad_:wNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CNe={kernelName:jx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:s,pad:a,dimRoundingMode:o}=n;return{x:()=>SNe(t,r,i,s,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TNe(t,e,n,r,i){const s=Z(t,"dy","avgPoolGrad"),a=Z(e,"input","avgPoolGrad");G(a.rank===s.rank,()=>`Rank of input (${a.rank}) does not match rank of dy (${s.rank})`);let o=a,l=s,c=!1;a.rank===3&&(c=!0,o=se(a,[1,a.shape[0],a.shape[1],a.shape[2]]),l=se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),G(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),G(o.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${o.rank}.`);const f={dy:l,input:o},h={filterSize:n,strides:r,pad:i},p=re.runKernel(YO,f,h);return c?se(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const kNe=ae({avgPoolGrad_:TNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ANe={kernelName:zx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:s,pad:a}=n;return{x:()=>kNe(t,r,i,s,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ENe={kernelName:Vx,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,i]=e,{transposeA:s,transposeB:a}=n;return!s&&!a?{a:()=>kt(t,i,!1,!0),b:()=>kt(r,t,!0,!1)}:!s&&a?{a:()=>kt(t,i,!1,!1),b:()=>kt(t,r,!0,!1)}:s&&!a?{a:()=>kt(i,t,!1,!0),b:()=>kt(r,t,!1,!1)}:{a:()=>kt(i,t,!0,!0),b:()=>kt(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ne={kernelName:Ux,gradFunc:(t,e,n)=>{const{blockShape:r,crops:i}=n;return{x:()=>Y_(t,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const INe={kernelName:zTe,gradFunc:(t,e,n)=>{const r=n,i=r.inputShape,s=r.shape,a=Array.from(s);for(let l=i.length-1;l>=0;l--)if(i[l]===s[l])a[l]=1;else if(i[l]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${s}].`);const o=[];for(let l=0;l<a.length;l++)a[l]>1&&o.push(l);return{x:()=>Ue(t,o,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NNe={kernelName:Zm,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ONe={kernelName:Qm,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ne={kernelName:Jm,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:i,clipValueMax:s}=n;return{x:()=>Br(lo(Jc(r,i),Ah(r,s)),t,bt(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RNe={kernelName:Wx,inputsToSave:["x"],gradFunc:VX.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DNe={kernelName:Gx,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:i}=n,s=ot(i,e[0].shape)[0],a=r.map(l=>l[s]);return _i(t,a,s).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MNe={kernelName:qx,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{dilations:s,strides:a,pad:o,dataFormat:l}=n;return G(Fc(s),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`),{x:()=>B_(r.shape,t,i,a,o,l),filter:()=>nR(r,t,i.shape,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PNe={kernelName:Hx,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{strides:s,pad:a,dataFormat:o,dimRoundingMode:l}=n;return{dy:()=>zc(t,i,s,a,o,1,l),filter:()=>nR(t,r,i.shape,s,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LNe(t,e,n,r,i){let s=t;t.rank===4&&(s=se(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let a=e;a.rank===4&&(a=se(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),G(s.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${s.shape}.`),G(a.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${a.shape}.`),G(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),G(s.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${n[3]}.`),G(a.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${a.shape[4]}) must match output depth for filter (${n[4]}).`);const o={x:s,dy:a},l={strides:r,pad:i,filterShape:n};return re.runKernel(n_,o,l)}const FNe=ae({conv3DBackpropFilter_:LNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BNe={kernelName:Kx,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:s}=n;G(Fc(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[a,o]=e;return{x:()=>IK(a.shape,t,o,i,s),filter:()=>FNe(a,t,o.shape,i,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zNe={kernelName:eg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(xn(HK(Re(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jNe={kernelName:tg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(KK(Re(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VNe={kernelName:Xx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i,exclusive:s,reverse:a}=n;return{x:()=>{const o=on([i],r.rank);let l=OK(t,i,s,!a);return o!=null&&(l=vt(l,o)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UNe={kernelName:Yx,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:s,dimRoundingMode:a}=n,o=r??[1,1];G(Fc(o),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);const[l,c]=e;return G(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),G(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),G(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),G(Cr(i,o),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${o}'.`),Qr("depthwiseConv2d",s,a),{x:()=>sIe(l.shape,t,c,i,s,o,a),filter:()=>rIe(l,t,c.shape,i,s,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WNe={kernelName:Zx,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,s={x:r,filter:i,dy:t},a={x:r,filter:i,dy:t};return{x:()=>re.runKernel(gI,s,n),filter:()=>re.runKernel(yI,a,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GNe={kernelName:rg,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>re.runKernel(f_,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qNe={kernelName:ig,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=ne(ua(xn(Qt(n))),2/Math.sqrt(Math.PI));return{x:()=>ne(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HNe={kernelName:sg,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KNe={kernelName:Jx,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>se(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XNe={kernelName:ag,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,ua(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YNe={kernelName:og,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZNe={kernelName:lg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=nt(n.shape,r.shape);return{a:()=>{const o=We(t,Re(r,"float32")),l=jn(n.shape,i);return l.length>0?se(Ue(o,l),n.shape):o},b:()=>{let o=ne(t,Re(n,"float32"));const l=jn(r.shape,i);l.length>0&&(o=se(Ue(o,l),r.shape));const c=Qt(r);return xn(We(o,Re(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QNe={kernelName:e1,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[i,s,a,o]=e,l=o??At(1),c=jn(s.shape,i.shape),f=[];if(s.rank===1){for(let A=0;A<i.shape.length-1;++A)f.push(i.shape[A]);f.push(1)}const h=Ke(i,s),p=ne(t,l),g=WK(Ae(a,At(r))),y=ne(ne(ne(g,g),g),At(-.5));return{x:()=>s.rank===1?se(ne(ne(t,As(se(g,[1,1,1,s.shape[0]]),f)),l),i.shape):se(ne(ne(t,g),l),i.shape),mean:()=>{let A=ne(ne(g,At(-1)),p);return s.rank===1&&(A=Ue(A,c)),se(A,s.shape)},variance:()=>{let A=ne(ne(y,h),p);return s.rank===1&&(A=Ue(A,c)),se(A,s.shape)},scale:()=>{const A=ne(h,g);let k=ne(t,A);return s.rank===1&&(k=Ue(k,c)),se(k,s.shape)},offset:()=>{let A=t;return s.rank===1&&(A=Ue(A,c)),se(A,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JNe={kernelName:t1,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,i]=e,{axis:s,batchDims:a}=n,o=ot(s,r.shape)[0],l=(c,f,h)=>()=>{const p=c.shape,g=f.size,y=p.slice(0,o),b=y.length,v=p.slice(s,p.length).slice(1),w=v.length,S=xG(0,b),T=xG(b+1,b+1+w),A=wG([y,[g],v]),k=se(h,A),E=se(f,[g]),I=wG([[b],S,T]),N=vt(k,I);let _=JK(N,E,c.shape[o]);const D=El(I);return _=vt(_,D),_};if(a===1){const c=r.shape[0],f=r.split(c,0);return{x:()=>co(f.map((g,y)=>l(g,i.slice(y,1),t.slice(y,1))())).reshape(r.shape),indices:()=>i}}else return{x:l(r,i,t),indices:()=>i}}};function xG(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function wG(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eOe={kernelName:cg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>bt(n),b:()=>bt(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tOe={kernelName:ug,gradFunc:t=>({x:()=>Re(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nOe={kernelName:fg,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rOe={kernelName:hg,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iOe={kernelName:dg,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sOe={kernelName:r1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:i}=n,s=Mi(r,0);return{x:()=>Br(s,t,ne(t,i))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aOe={kernelName:mg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>We(t,Ae(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oOe={kernelName:pg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>We(t,Re(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lOe={kernelName:VTe,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;return{logits:()=>{const a=ua(r);return Ke(t,ne(Ue(t,i,!0),a))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cOe(t,e,n,r=5,i=1,s=1,a=.5){const o={x:t,y:e,dy:n},l={depthRadius:r,bias:i,alpha:s,beta:a};return re.runKernel(y_,o,l)}const uOe=ae({localResponseNormalizationBackprop_:cOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fOe={kernelName:c1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{depthRadius:s,bias:a,alpha:o,beta:l}=n;return{x:()=>uOe(r,i,t,s,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UX(t,e,n,r){return e.rank<n.rank&&(e=se(e,On(e.shape,r))),t.rank<n.rank&&(t=se(t,On(t.shape,r))),{x:()=>ne(t,Re(ca(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SG={kernelName:u1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:i}=r,s=e[0],a=e[1],o=ot(i,s.shape),l=UX(t,a,s,o);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hOe={kernelName:gg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>ne(t,Re(Jc(n,r),"float32")),b:()=>ne(t,Re(Ib(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dOe(t,e,n,r,i,s,a){const o=Z(t,"dy","maxPool3dGrad"),l=Z(e,"input","maxPool3dGrad"),c=Z(n,"output","maxPool3dGrad");let f=o,h=l,p=c,g=!1;l.rank===4&&(g=!0,f=se(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),h=se(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),p=se(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),G(f.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${f.rank}.`),G(h.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${h.rank}.`),G(p.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${p.rank}.`),Qr("maxPool3dGrad",s,a);const y={dy:f,input:h,output:p},b={filterSize:r,strides:i,pad:s,dimRoundingMode:a},v=re.runKernel(b_,y,b);return g?se(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}const pOe=ae({maxPool3dGrad_:dOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mOe={kernelName:h1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:s,strides:a,pad:o,dimRoundingMode:l}=n;return{x:()=>pOe(t,r,i,s,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gOe(t,e,n,r,i,s,a){const o=Z(t,"dy","maxPoolGrad"),l=Z(e,"input","maxPoolGrad"),c=Z(n,"output","maxPoolGrad");G(l.rank===o.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${o.rank})`),G(o.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${o.rank}.`),G(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Qr("maxPoolGrad",s,a);const f={dy:o,input:l,output:c},h={filterSize:r,strides:i,pad:s,dimRoundingMode:a};return re.runKernel(v_,f,h)}const yOe=ae({maxPoolGrad_:gOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vOe={kernelName:f1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:s,strides:a,pad:o}=n;return{x:()=>yOe(t,r,i,s,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bOe={kernelName:d1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n,s=ot(i,r.shape),o=er(r.shape,s)[1],l=be(o);return{x:()=>{const f=r.shape.slice();s.forEach(g=>{f[g]=1});const h=se(t,f);return We(ne(h,Il(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xOe={kernelName:p1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:i}=r,[s,a]=e,o=ot(i,s.shape),l=UX(t,a,s,o);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wOe={kernelName:yg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>ne(t,Re(Ah(n,r),"float32")),b:()=>ne(t,Re(Mi(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SOe={kernelName:m1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,s=i.map(a=>a[0]);return{x:()=>qt(t,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const COe={kernelName:vg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=nt(n.shape,r.shape);return{a:()=>{const o=jn(n.shape,i);return o.length>0?se(Ue(t,o),n.shape):t},b:()=>{const o=ne(t,xn(G1(We(n,r)))),l=jn(r.shape,i);return l.length>0?se(Ue(o,l),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TOe={kernelName:bg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=nt(n.shape,r.shape);return{a:()=>{const o=ne(t,Re(r,"float32")),l=jn(n.shape,i);return l.length>0?se(Ue(o,l),n.shape):o},b:()=>{const o=ne(t,Re(n,"float32")),l=jn(r.shape,i);return l.length>0?se(Ue(o,l),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kOe={kernelName:g1,gradFunc:t=>({x:()=>xn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AOe={kernelName:b1,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>Yn(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EOe={kernelName:v1,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Oe={kernelName:x1,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return Uc(t,r).map(s=>()=>s)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CG={kernelName:w1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,s=i.map(a=>a[0]);return{x:()=>qt(t,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IOe={kernelName:xg,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,i]=e,s=n,a=r,o=nt(s.shape,a.shape);return{a:()=>{const f=Re(a,"float32");let h=ne(t,ne(f,jc(s,Ke(f,At(1)))));const p=jn(s.shape,o);return p.length>0&&(h=Ue(h,p)),se(h,s.shape)},b:()=>{const f=Mi(s,0),h=Br(f,fa(s),bt(s));let p=ne(t,ne(i,h));const g=jn(a.shape,o);return g.length>0&&(p=Ue(p,g)),se(p,a.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NOe={kernelName:S1,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,i=Mi(n,0);return{x:()=>Br(i,t,ne(t,r)),alpha:()=>{let s=Br(i,bt(t),ne(t,n));const a=jn(r.shape,t.shape);return a.length>0&&(s=Ue(s,a)),se(s,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OOe(t,e,n){const r=t.shape.slice();r[n]=1;const i=se(e,r),s=II(t,n,!0,!1),a=II(t,n,!0,!0),o=ne(s,a);return ne(i,o)}function _Oe(t,e,n){const r=t.shape.length,i=r-n.length,s=on(n,r);let a=t;s!=null&&(a=vt(t,s));const o=a.shape.slice(),c=o.splice(r-n.length,n.length).reduce((p,g)=>p*g,1);o.push(c);const f=a.reshape(o);let h=OOe(f,e,i);if(h=h.reshape(a.shape),s!=null){const p=El(s);h=vt(h,p)}return h}const ROe={kernelName:C1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;let s=[];return i==null?s=r.shape.map((a,o)=>o):typeof i=="number"?s=[i]:s=i,{x:()=>_Oe(r,t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DOe={kernelName:ng,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=nt(n.shape,r.shape);return{a:()=>{const o=We(t,Re(r,"float32")),l=jn(n.shape,i);return l.length>0?se(Ue(o,l),n.shape):o},b:()=>{let o=ne(t,Re(n,"float32"));const l=jn(r.shape,i);l.length>0&&(o=se(Ue(o,l),r.shape));const c=Qt(r);return xn(We(o,Re(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MOe={kernelName:wg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>We(t,xn(Qt(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const POe={kernelName:Cg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=ne(Ah(n,6),Ug(n));return{x:()=>ne(t,Re(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LOe={kernelName:Sg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,Re(Ug(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FOe={kernelName:T1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>se(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BOe={kernelName:A1,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r};return{images:()=>re.runKernel(A_,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zOe={kernelName:k1,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r};return{images:()=>re.runKernel(k_,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jOe={kernelName:E1,gradFunc:(t,e,n)=>{const{dims:r}=n,i=ot(r,t.shape);return{x:()=>Vc(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VOe={kernelName:Tg,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UOe={kernelName:kg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>xn(We(t,ne(jc(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WOe={kernelName:$1,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>Re(bt(n),"float32"),t:()=>ne(t,Re(n,t.dtype)),e:()=>ne(t,Re(q_(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GOe={kernelName:Ag,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Mi(n,At(0)),i=At(K1),s=At(X1),a=ne(t,s),o=ne(ne(t,i),ua(Re(n,"float32")));return Br(r,a,o)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qOe={kernelName:Ng,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,ne(n,Ke(At(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HOe={kernelName:Ig,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KOe={kernelName:Eg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(z_(Re(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XOe={kernelName:$g,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(NK(Re(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YOe={kernelName:I1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:i,size:s}=n,a=r.shape,[o,l]=q1(r,i,s),c=[];for(let f=0;f<t.rank;f++)c.push([o[f],a[f]-o[f]-l[f]]);return{x:()=>X_(t,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZOe={kernelName:R1,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:i}=n,s=!0,a=ne(t,r);return{logits:()=>Ke(a,ne(Ue(a,[i],s),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QOe={kernelName:Og,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,kh(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TG={kernelName:O1,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:i}=n;return{x:()=>F_(t,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kG={kernelName:_1,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>Xr(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JOe={kernelName:_g,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>We(t,ne(Sr(Re(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e_e={kernelName:E_,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,ne(Re(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t_e={kernelName:Rg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=At(2);return{a:()=>ne(t,ne(i,Ke(n,r))),b:()=>ne(t,ne(i,Ke(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n_e={kernelName:Fg,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r_e={kernelName:Dg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=nt(n.shape,r.shape);return{a:()=>{let o=t;const l=jn(n.shape,i);return l.length>0&&(o=Ue(o,l)),se(o,n.shape)},b:()=>{let o=t;const l=jn(r.shape,i);return l.length>0&&(o=Ue(o,l)),se(xn(o),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i_e={kernelName:N1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,i=r.shape.slice(),{axis:s}=n;ot(s,r.shape).forEach(c=>{i[c]=1});const o=se(t,i),l=ne(o,Il(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s_e={kernelName:Mg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>We(t,Qt(z_(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a_e={kernelName:Pg,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(Ke(At(1),Qt(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o_e={kernelName:Lg,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:i}=n;return{x:()=>{let a=bt(r);if(r.rank===1)for(let o=0;o<i[0];++o)a=Ae(a,qt(t,[o*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let o=0;o<i[0];++o)for(let l=0;l<i[1];++l)a=Ae(a,qt(t,[o*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let o=0;o<i[0];++o)for(let l=0;l<i[1];++l)for(let c=0;c<i[2];++c)a=Ae(a,qt(t,[o*r.shape[0],l*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let o=0;o<i[0];++o)for(let l=0;l<i[1];++l)for(let c=0;c<i[2];++c)for(let f=0;f<i[3];++f)a=Ae(a,qt(t,[o*r.shape[0],l*r.shape[1],c*r.shape[2],f*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l_e={kernelName:wf,gradFunc:(t,e,n)=>{const r=n,{perm:i}=r,s=El(i);return{x:()=>vt(t,s)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c_e={kernelName:D1,gradFunc:(t,e,n)=>{const r=n,{axis:i}=r;return{value:()=>co(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u_e={kernelName:M1,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>f_e(t,n)}}};function f_e(t,e){const n=$l(e,bt(e)),r=U_(t,n);let i=Jc(e,At(0,"int32"));const s=r.rank-i.rank;for(let o=0;o<s;++o)i=Gr(i,o+1);i=lo(i,Il(r.shape,"bool"));const a=bt(r);return Br(i,r,a)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h_e={kernelName:P1,gradFunc:t=>({x:()=>bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d_e=[VX,uNe,fNe,hNe,dNe,pNe,mNe,gNe,yNe,vNe,bNe,xNe,CNe,ANe,ENe,$Ne,INe,NNe,ONe,_Ne,RNe,DNe,PNe,MNe,BNe,zNe,jNe,VNe,UNe,WNe,DOe,GNe,qNe,HNe,KNe,XNe,ZNe,YNe,QNe,JNe,eOe,tOe,nOe,rOe,iOe,sOe,aOe,oOe,lOe,fOe,SG,SG,hOe,mOe,vOe,bOe,xOe,wOe,SOe,COe,TOe,kOe,AOe,EOe,$Oe,CG,CG,IOe,NOe,ROe,MOe,POe,LOe,FOe,BOe,zOe,jOe,VOe,UOe,WOe,GOe,qOe,HOe,KOe,XOe,YOe,ZOe,QOe,TG,TG,kG,kG,JOe,t_e,e_e,n_e,r_e,i_e,s_e,a_e,o_e,l_e,c_e,u_e,h_e];for(const t of d_e)GTe(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.abs=function(){return this.throwIfDisposed(),Rr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.acos=function(){return this.throwIfDisposed(),H2e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.acosh=function(){return this.throwIfDisposed(),X2e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.add=function(t){return this.throwIfDisposed(),Ae(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.all=function(t,e){return this.throwIfDisposed(),AK(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.any=function(t,e){return this.throwIfDisposed(),EI(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.argMax=function(t){return this.throwIfDisposed(),ym(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.argMin=function(t){return this.throwIfDisposed(),eke(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.asScalar=function(){return this.throwIfDisposed(),G(this.size===1,()=>"The array must have only 1 element."),se(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.asType=function(t){return this.throwIfDisposed(),Re(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.as1D=function(){return this.throwIfDisposed(),se(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.as2D=function(t,e){return this.throwIfDisposed(),se(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),se(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),se(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.as5D=function(t,e,n,r,i){return this.throwIfDisposed(),se(this,[t,e,n,r,i])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.asin=function(){return this.throwIfDisposed(),nke(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.asinh=function(){return this.throwIfDisposed(),ike(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.atan=function(){return this.throwIfDisposed(),ake(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.atan2=function(t){return this.throwIfDisposed(),lke(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.atanh=function(){return this.throwIfDisposed(),uke(this)};ge().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),L_(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),F_(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.batchNorm=function(t,e,n,r,i){return this.throwIfDisposed(),j1(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.broadcastTo=function(t){return this.throwIfDisposed(),Tp(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.cast=function(t){return this.throwIfDisposed(),Re(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.ceil=function(){return this.throwIfDisposed(),Lke(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Di(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof Mn&&(t=[t]),Xr([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.conv1d=function(t,e,n,r,i,s){return this.throwIfDisposed(),EK(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.conv2dTranspose=function(t,e,n,r,i){return this.throwIfDisposed(),$K(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.conv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),zc(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.cos=function(){return this.throwIfDisposed(),z_(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.cosh=function(){return this.throwIfDisposed(),NK(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),II(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),OK(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),lAe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.depthwiseConv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),j_(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.dilation2d=function(t,e,n,r,i){return this.throwIfDisposed(),fAe(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.divNoNan=function(t){return this.throwIfDisposed(),gAe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.div=function(t){return this.throwIfDisposed(),We(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.dot=function(t){return this.throwIfDisposed(),vAe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.elu=function(){return this.throwIfDisposed(),U1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.equal=function(t){return this.throwIfDisposed(),ca(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.erf=function(){return this.throwIfDisposed(),_K(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),NAe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.exp=function(){return this.throwIfDisposed(),ua(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.expandDims=function(t){return this.throwIfDisposed(),Gr(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.expm1=function(){return this.throwIfDisposed(),DAe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.fft=function(){return this.throwIfDisposed(),YK(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.flatten=function(){return this.throwIfDisposed(),se(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.floor=function(){return this.throwIfDisposed(),G1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.floorDiv=function(t){return this.throwIfDisposed(),kK(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.gather=function(t,e,n){return this.throwIfDisposed(),U_(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.greaterEqual=function(t){return this.throwIfDisposed(),Jc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.greater=function(t){return this.throwIfDisposed(),Mi(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.ifft=function(){return this.throwIfDisposed(),NI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.irfft=function(){return this.throwIfDisposed(),E$e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.isFinite=function(){return this.throwIfDisposed(),UAe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.isInf=function(){return this.throwIfDisposed(),GAe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.isNaN=function(){return this.throwIfDisposed(),HAe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.leakyRelu=function(t){return this.throwIfDisposed(),G_(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.lessEqual=function(t){return this.throwIfDisposed(),Ah(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.less=function(t){return this.throwIfDisposed(),Ib(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),QAe(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.logSigmoid=function(){return this.throwIfDisposed(),sEe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.logSoftmax=function(t){return this.throwIfDisposed(),LK(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),FK(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.log=function(){return this.throwIfDisposed(),fa(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.log1p=function(){return this.throwIfDisposed(),PK(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.logicalAnd=function(t){return this.throwIfDisposed(),lo(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.logicalNot=function(){return this.throwIfDisposed(),q_(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.logicalOr=function(t){return this.throwIfDisposed(),BK(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.logicalXor=function(t){return this.throwIfDisposed(),dEe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),kt(this,t,e,n)};ge().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),H_(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.max=function(t,e){return this.throwIfDisposed(),Is(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.maximum=function(t){return this.throwIfDisposed(),$l(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.mean=function(t,e){return this.throwIfDisposed(),Nn(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.min=function(t,e){return this.throwIfDisposed(),$b(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.minimum=function(t){return this.throwIfDisposed(),xm(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),wEe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.mod=function(t){return this.throwIfDisposed(),CEe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.mul=function(t){return this.throwIfDisposed(),ne(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.neg=function(){return this.throwIfDisposed(),xn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.norm=function(t,e,n){return this.throwIfDisposed(),W1(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.notEqual=function(t){return this.throwIfDisposed(),Nb(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),zK(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.onesLike=function(){return this.throwIfDisposed(),ls(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.pad=function(t,e){return this.throwIfDisposed(),X_(this,t,e)};ge().prototype.pool=function(t,e,n,r,i,s){return this.throwIfDisposed(),REe(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.pow=function(t){return this.throwIfDisposed(),jc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.prelu=function(t){return this.throwIfDisposed(),Z_(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.prod=function(t,e){return this.throwIfDisposed(),PEe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.reciprocal=function(){return this.throwIfDisposed(),o$e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.relu=function(){return this.throwIfDisposed(),eu(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.relu6=function(){return this.throwIfDisposed(),VK(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.reshapeAs=function(t){return this.throwIfDisposed(),se(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.reshape=function(t){return this.throwIfDisposed(),se(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),tX(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),nX(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.reverse=function(t){return this.throwIfDisposed(),Vc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.rfft=function(){return this.throwIfDisposed(),N$e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.round=function(){return this.throwIfDisposed(),UK(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.rsqrt=function(){return this.throwIfDisposed(),WK(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.selu=function(){return this.throwIfDisposed(),GK(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.separableConv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),qK(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.sigmoid=function(){return this.throwIfDisposed(),kh(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.sign=function(){return this.throwIfDisposed(),g$e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.sin=function(){return this.throwIfDisposed(),HK(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.sinh=function(){return this.throwIfDisposed(),KK(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.slice=function(t,e){return this.throwIfDisposed(),qt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.softmax=function(t){return this.throwIfDisposed(),tR(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.softplus=function(){return this.throwIfDisposed(),zg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),Y_(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.split=function(t,e){return this.throwIfDisposed(),_i(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.sqrt=function(){return this.throwIfDisposed(),Sr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.square=function(){return this.throwIfDisposed(),Qt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.squaredDifference=function(t){return this.throwIfDisposed(),_$e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.squeeze=function(t){return this.throwIfDisposed(),Vg(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof Mn?[this,t]:[this,...t];return co(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.step=function(t){return this.throwIfDisposed(),Ug(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.stridedSlice=function(t,e,n,r,i,s,a,o){return this.throwIfDisposed(),L$e(this,t,e,n,r,i,s,a,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.sub=function(t){return this.throwIfDisposed(),Ke(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.sum=function(t,e){return this.throwIfDisposed(),Ue(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.tan=function(){return this.throwIfDisposed(),B$e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.tanh=function(){return this.throwIfDisposed(),z1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.tile=function(t){return this.throwIfDisposed(),As(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.toBool=function(){return this.throwIfDisposed(),Re(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.toFloat=function(){return this.throwIfDisposed(),Re(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.toInt=function(){return this.throwIfDisposed(),Re(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.topk=function(t,e){return this.throwIfDisposed(),V$e(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.transpose=function(t){return this.throwIfDisposed(),vt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.unique=function(t){return this.throwIfDisposed(),G$e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),JK(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.unstack=function(t){return this.throwIfDisposed(),Uc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.where=function(t,e){return this.throwIfDisposed(),Br(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.zerosLike=function(){return this.throwIfDisposed(),bt(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Gs extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Gs.prototype)}}class ns extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ns.prototype)}}class ee extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ee.prototype)}}class rt extends Error{constructor(e){super(e),Object.setPrototypeOf(this,rt.prototype)}}let p_e=class WX extends Error{constructor(e){super(e),Object.setPrototypeOf(this,WX.prototype)}};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class GX{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Wc(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function qs(t,e){if(!t)throw new p_e(e)}function AG(t,e){let n=0;for(const r of t)r===e&&n++;return n}function qr(t){return t.length===1?t[0]:t}function Rt(t){return Array.isArray(t)?t:[t]}function Wa(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function fc(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let Xi={};function LR(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function RI(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>RI(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:RI(r))}}}function Hg(t,e={},n={},r="object",i=!1){if(typeof t=="string"){const s=t;let a;if(s in n)a=n[s];else if(s in Xi)a=Xi[s];else if(a=e[s],a==null)throw new ee(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return a}else{const s=t;if(s.className==null||s.config==null)throw new ee(`${r}: Improper config format: ${JSON.stringify(s)}.
'className' and 'config' must set.`);const a=s.className;let o,l;if(a in n?[o,l]=n[a]:a in Xi?[o,l]=Xi.className:a in e&&([o,l]=e[a]),o==null)throw new ee(`Unknown ${r}: ${a}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const c={};for(const g of Object.keys(Xi))c[g]=Xi[g];for(const g of Object.keys(n))c[g]=n[g];const f=s.config;f.customObjects=c;const h=Object.assign({},Xi);for(const g of Object.keys(n))Xi[g]=n[g];RI(s.config);const p=l(o,s.config,n,i);return Xi=Object.assign({},h),p}else{const c=Object.assign({},Xi);for(const h of Object.keys(n))Xi[h]=n[h];const f=new o(s.config);return Xi=Object.assign({},c),f}}}function m_e(t,e){return t<e?-1:t>e?1:0}function Vv(t,e){return-1*m_e(t,e)}function ol(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function g_e(t){if(t==null)throw new ee(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function nu(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new ee(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function FR(t,e,n=0,r=1/0){return qs(n>=0),qs(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(i=>typeof i===e)}function Qn(t,e){Array.isArray(t)?(G(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>Qn(n,`element ${r+1} of ${e}`))):G(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${qX(t)}.`)}function qX(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>qX(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function y_e(t,e,n){let r=n!=null?n():Wr(),i;return(...a)=>{const o=n!=null?n():Wr();return o-r<e||(r=o,i=t(...a)),i}}function HX(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let v_e=0;function KX(){return v_e++}const Uv={};function Y1(t=""){return t in Uv||(Uv[t]=0),Uv[t]+=1,t+Uv[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const b_e=["channelsFirst","channelsLast"],x_e=["nearest","bilinear"],w_e=["valid","same","causal"],S_e=["max","avg"],C_e=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const tf=new Map;function Cn(t){nu(b_e,"DataFormat",t)}function T_e(t){nu(x_e,"InterpolationFormat",t)}function Pi(t){nu(w_e,"PaddingMode",t)}function XX(t){nu(S_e,"PoolMode",t)}const kp=[],EG="/";function Ec(t,e){kp.push(t);try{const n=e();return kp.pop(),n}catch(n){throw kp.pop(),n}}function k_e(){return kp.length===0?"":kp.join(EG)+EG}function YX(t){if(!QX(t))throw new Error("Not a valid tensor name: '"+t+"'");return k_e()+t}function ZX(t){if(!QX(t))throw new Error("Not a valid tensor name: '"+t+"'");tf.has(t)||tf.set(t,0);const e=tf.get(t);if(tf.set(t,tf.get(t)+1),e>0){const n=`${t}_${e}`;return tf.set(n,1),n}else return t}const A_e=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function QX(t){return!!t.match(A_e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function E_e(t){return t===parseInt(t.toString(),10)}function ll(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let i=e;i<n;++i)r*=t[i];return r}function eh(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function hl(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function Os(t,e){if(e<t)throw new ee(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let iE;function Pn(){return iE==null&&(iE=y2e().epsilon()),iE}function _s(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function aa(t,e){return Re(t,e)}function Kg(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),se(t,n)}function $_e(t,e){return ce(()=>{if(t.shape.length!==2)throw new ee(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=Kg(t,1);return DI(n,[1,e,1])})}function I_e(t){const e=[ll(t.shape)];return se(t,e)}function N_e(t){if(t.rank<=1)throw new ee(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],ll(t.shape,1)];return se(t,e)}function $c(t,e,n){return ce(()=>{switch(t.rank){case 1:return J_(t,e,n);case 2:return XK(t,[e,0],[n,t.shape[1]]);case 3:return eR(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return _b(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return qt(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return qt(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new ee(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function sE(t,e,n){return ce(()=>{switch(t.rank){case 1:return J_(t,e,n);case 2:return XK(t,[0,e],[t.shape[0],n]);case 3:return eR(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return _b(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new ee(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function Wv(t,e,n,r){return ce(()=>{switch(t.rank){case 1:return J_(t,e,n);case 2:switch(r){case 1:return $c(t,e,n);case 2:return sE(t,e,n);default:throw new ee(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return $c(t,e,n);case 2:return eR(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return sE(t,e,n);default:throw new ee(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return $c(t,e,n);case 2:return _b(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return _b(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return sE(t,e,n);default:throw new ee(`The axis is not within the rank of the tensor ${r}`)}default:throw new ee(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function BR(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),Xr(t,e)}function $G(t,e){switch(t.rank){case 1:return zke([t,e]);case 2:return Vke([t,e],0);case 3:return Wke([t,e],0);case 4:return qke([t,e],0);default:throw new ee(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function DI(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new ee(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return As(t,e)}function Z1(t,e=0,n=1,r,i){return r$e(t,e,n,r,i)}function oa(t,e,n,r){if(t.rank<2||e.rank<2)throw new rt(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const i=t.shape.slice(-1)[0],s=e.shape.slice(-2)[0];if(i!==s)throw new rt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return pG({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?MI(t.rank,r,_s()):null,activation:n});{const i=t.shape.slice(),s=i.pop();t=se(t,[-1,s]);const a=e.shape.slice(),o=a.pop(),l=a.pop(),c=[...a,o],f=Array.from({length:e.rank},(y,b)=>b===0?e.rank-2:b<=e.rank-2?b-1:b);e=se(vt(e,f),[l,-1]);const h=[...i,...c];return se(pG({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?MI(t.rank,r,_s()):null,activation:n}),h)}}function JX(t,e,n){return ce(()=>(Array.isArray(e)?e=fi(e,"int32"):e=Re(e,"int32"),U_(t,e,n)))}function Xg(t){return ne(t,t)}function MI(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new ee(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?se(e,[1,r[0],1,1,1]):se(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?se(e,[1,1,1,1,r[0]]):se(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?se(e,[1,r[0],1,1]):se(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?se(e,[1,1,1,r[0]]):se(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?se(e,[1,r[0],1]):se(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?se(e,[1,1,r[0]]):se(e,[1].concat(r))}else if(t<3)return e;throw new ee(`Unsupported input rank by biasAdd: ${e.rank}`)}function Ps(t,e,n){return ce(()=>(n==null&&(n=_s()),Cn(n),Ae(t,MI(t.rank,e,n))))}function O_e(t,e=1){if(e!==1)throw new rt(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return U1(t)}function __e(t){return ce(()=>We(t,Ae(Rr(t),1)))}function eY(t,e,n,r){return ce(()=>Q$e(t,e,n,r))}function R_e(t){return ce(()=>{const e=Ae(.5,ne(.2,t));return Di(e,0,1)})}function Yg(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const D_e=["fanIn","fanOut","fanAvg"],M_e=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function P_e(t){nu(D_e,"FanMode",t)}function L_e(t){nu(M_e,"Distribution",t)}class fs extends $h{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class tY extends fs{apply(e,n){return Yn(e,n)}}tY.className="Zeros";Te(tY);class zR extends fs{apply(e,n){return Il(e,n)}}zR.className="Ones";Te(zR);class nY extends fs{constructor(e){if(super(),typeof e!="object")throw new ee(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new ee(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return ce(()=>ne(At(this.value),Il(e,n)))}getConfig(){return{value:this.value}}}nY.className="Constant";Te(nY);class rY extends fs{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return jg(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}rY.className="RandomUniform";Te(rY);class iY extends fs{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new rt(`randomNormal does not support dType ${n}.`);return Z1(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}iY.className="RandomNormal";Te(iY);class sY extends fs{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new rt(`truncatedNormal does not support dType ${n}.`);return QK(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}sY.className="TruncatedNormal";Te(sY);class aY extends fs{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return ce(()=>{if(e.length!==2||e[0]!==e[1])throw new ee("Identity matrix initializer can only be used for 2D square matrices.");return ne(this.gain,MK(e[0]))})}getConfig(){return{gain:this.gain}}}aY.className="Identity";Te(aY);function F_e(t,e="channelsLast"){let n,r;if(Cn(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const i=ll(t,2);n=t[1]*i,r=t[0]*i}else if(e==="channelsLast"){const i=ll(t,0,t.length-2);n=t[t.length-2]*i,r=t[t.length-1]*i}}else{const i=ll(t);n=Math.sqrt(i),r=Math.sqrt(i)}return[n,r]}class di extends fs{constructor(e){if(super(),e.scale<0)throw new ee(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,P_e(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,L_e(this.distribution),this.seed=e.seed}apply(e,n){const r=F_e(e),i=r[0],s=r[1];let a=this.scale;if(this.mode==="fanIn"?a/=Math.max(1,i):this.mode==="fanOut"?a/=Math.max(1,s):a/=Math.max(1,(i+s)/2),this.distribution==="normal"){const o=Math.sqrt(a);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new rt(`${this.getClassName()} does not support dType ${n}.`);return QK(e,0,o,n,this.seed)}else{const o=Math.sqrt(3*a);return jg(e,-o,o,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}di.className="VarianceScaling";Te(di);class jR extends di{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return di.className}}jR.className="GlorotUniform";Te(jR);class VR extends di{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return di.className}}VR.className="GlorotNormal";Te(VR);class UR extends di{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return di.className}}UR.className="HeNormal";Te(UR);class WR extends di{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return di.className}}WR.className="HeUniform";Te(WR);class GR extends di{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return di.className}}GR.className="LeCunNormal";Te(GR);class qR extends di{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return di.className}}qR.className="LeCunUniform";Te(qR);class oY extends fs{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return ce(()=>{if(e.length<2)throw new rt("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=be(e.slice(0,-1)),i=e[e.length-1],s=r*i;s>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${s}) elements: Slowness may result.`);const a=[Math.max(i,r),Math.min(i,r)],o=Z1(a,0,1,n,this.seed),l=KIe.qr(o,!1);let c=l[0];const h=l[1].flatten().stridedSlice([0],[Math.min(i,r)*Math.min(i,r)],[Math.min(i,r)+1]);return c=ne(c,h.sign()),r<i&&(c=c.transpose()),ne(At(this.gain),c.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}oY.className="Orthogonal";Te(oY);const IG={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function NG(t,e={}){return Hg(t,es.getMap().classNameMap,e,"initializer")}function an(t){return LR(t)}function en(t){if(typeof t=="string"){const e=t in IG?IG[t]:t;if(e==="GlorotNormal")return new VR;if(e==="GlorotUniform")return new jR;if(e==="HeNormal")return new UR;if(e==="HeUniform")return new WR;if(e==="LeCunNormal")return new GR;if(e==="LeCunUniform")return new qR;{const n={};return n.className=e,n.config={},NG(n)}}else return t instanceof fs?t:NG(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function PI(t){return Array.isArray(t)&&Array.isArray(t[0])}function Rb(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function Qe(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new ee(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function Ct(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new ee(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Db(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,i)=>r*i);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const OG="Variable";class B_e{constructor(e,n="float32",r=OG,i=!0,s=null){this.dtype=n??"float32",this.shape=e.shape,this.id=KX(),r=r??OG,this.originalName=YX(r),this.name=ZX(this.originalName),this.trainable_=i,this.constraint=s,this.val=K$e(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),z_e(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function z_e(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function LI(t){return t.map(e=>e.read())}function HR(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ln{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class ha{constructor(e,n,r,i,s,a,o){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=i,this.callArgs=s,this.outputTensorIndex=o,this.id=KX(),a!=null&&(this.originalName=YX(a),this.name=ZX(this.originalName)),this.rank=n.length}}let j_e=0;class Q1{constructor(e,n){this.callArgs=n,this.id=j_e++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let V_e=0;class lt extends $h{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=V_e++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=Wa(r)+"_"+Y1(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let s=null;e.batchSize!=null&&(s=e.batchSize),r=[s].concat(e.inputShape)}this.batchInputShape=r;let i=e.dtype;i==null&&(i=e.inputDType),i==null&&(i="float32"),this.dtype=i}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new ns(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new ee(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return qr(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return qr(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Gs(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Gs(`Layer ${this.name} is not connected, no input to return.`);return qr(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Gs(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Gs(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return qr(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=Rt(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=Rt(this.inputSpec);if(n.length!==r.length)throw new ee(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let i=0;i<n.length;i++){const s=n[i],a=r[i];if(a==null)continue;const o=s.rank;if(a.ndim!=null&&o!==a.ndim)throw new ee(`Input ${i} is incompatible with layer ${this.name}: expected ndim=${a.ndim}, found ndim=${o}`);if(a.maxNDim!=null&&o>a.maxNDim)throw new ee(`Input ${i} is incompatible with layer ${this.name}: expected max_ndim=${a.maxNDim}, found ndim=${o}`);if(a.minNDim!=null&&o<a.minNDim)throw new ee(`Input ${i} is incompatible with layer ${this.name}: expected min_ndim=${a.minNDim}, found ndim=${o}.`);if(a.dtype!=null&&s.dtype!==a.dtype)throw new ee(`Input ${i} is incompatible with layer ${this.name} : expected dtype=${a.dtype}, found dtype=${s.dtype}.`);if(a.axes){const l=s.shape;for(const c in a.axes){const f=Number(c),h=a.axes[c],p=f>=0?l[f]:l[l.length+f];if(h!=null&&[h,null].indexOf(p)===-1)throw new ee(`Input ${i} is incompatible with layer ${this.name}: expected axis ${f} of input shape to have value ${h} but got shape ${l}.`)}}if(a.shape!=null)for(let l=0;l<a.shape.length;++l){const c=a.shape[l],f=s.shape[l];if(c!=null&&f!=null&&c!==f)throw new ee(`Input ${i} is incompatible with layer ${this.name}: expected shape=${a.shape}, found shape=${s.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=Rt(e),i=G_e(e),s=q_e(e);if(i===s)throw new ee("Arguments to apply() must be all SymbolicTensors or all Tensors");return Ec(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const a=[];for(const o of Rt(e))a.push(o.shape);this.build(qr(a)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&s&&(this._refCount=1)}if(this.assertInputCompatibility(e),s){let a=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,a);const o=Rt(a),l=[];for(let c of o)r.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(a=qr(l),this.activityRegularizer!=null)throw new rt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return a}else{const a=U_e(e),o=this.computeOutputShape(a);let l;const c=W_e(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?a[0]:a),o!=null&&o.length>0&&Array.isArray(o[0])?l=o.map((f,h)=>new ha(c,f,this,Rt(e),n,this.name,h)):l=new ha(c,o,this,Rt(e),n,this.name),this.addInboundNode(e,l,null,null,a,o,n),this._refCount++,this.activityRegularizer!=null)throw new rt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,i)=>{r!=null&&e[i]!=null&&e[i]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Gs(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new Gs(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new ns(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return Db(this.weights)}build(e){this.built=!0}getWeights(e=!1){return LI(e?this.trainableWeights:this.weights)}setWeights(e){ce(()=>{const n=this.weights;if(n.length!==e.length)throw new ee(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],i=LI(n);for(let s=0;s<i.length;++s){const a=i[s],o=n[s],l=e[s];if(!$t(a.shape,l.shape))throw new ee(`Layer weight shape ${a.shape} not compatible with provided weight shape ${l.shape}`);r.push([o,l])}HR(r)})}addWeight(e,n,r,i,s,a,o,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new ee(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(i=l!=null?l():en("zeros"));const c=i.apply(n,r),f=new B_e(c,r,e,a,o);return c.dispose(),s!=null&&this.addLoss(()=>s.apply(f.read())),a==null&&(a=!0),a?this._trainableWeights.push(f):this._nonTrainableWeights.push(f),f}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=Rt(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const i=this.computeMask(e,r),s=Rt(n),a=Rt(i);if(s.length!==a.length)throw new Error(`${this.name} outputs ${s.length} tensors but ${s.length} masks for those tensors`);for(let o=0;o<s.length;o++)s[o].kerasMask=a[o]}addInboundNode(e,n,r,i,s,a,o=null){const l=Rt(e);n=Rt(n),r=Rt(r),i=Rt(i),s=Rb(s),a=Rb(a);const c=[],f=[],h=[];for(const p of l)c.push(p.sourceLayer),f.push(p.nodeIndex),h.push(p.tensorIndex);new Q1({outboundLayer:this,inboundLayers:c,nodeIndices:f,tensorIndices:h,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:i,inputShapes:s,outputShapes:a},o);for(let p=0;p<n.length;p++)n[p].sourceLayer=this,n[p].nodeIndex=this.inboundNodes.length-1,n[p].tensorIndex=p}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function U_e(t){t=Rt(t);const e=[];for(const n of t)e.push(n.shape);return qr(e)}function W_e(t){return"float32"}function lY(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const i=[];for(let s=0;s<r.inboundLayers.length;s++){const a=r.inputTensors[s],o=r.inboundLayers[s],l=r.nodeIndices[s],c=lY(a,o,l);for(const f of c)i.indexOf(f)===-1&&i.push(f)}return i}}}function G_e(t){let e=!0;for(const n of Rt(t))if(!(n instanceof ha)){e=!1;break}return e}function q_e(t){let e=!0;for(const n of Rt(t))if(n instanceof ha){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Zg extends lt{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:Y1("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new ee("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new ee("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new ee("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const i=new ha(this.dtype,this.batchInputShape,this,[],{},this.name);i.nodeIndex=0,i.tensorIndex=0,new Q1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new ee(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}Zg.className="InputLayer";Te(Zg);function H_e(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new ee("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new Zg({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function K_e(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return Re(e,t.dtype)}catch{throw new ee(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class tl{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof tl)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=K_e(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new ee(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof ha){if(this.id2Value[e.id]==null)throw new ee(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new ee(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof ha){if(this.id2Value[e.id]==null)throw new ee(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new ee(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&ft(this.id2Mask)}}const Mb=new GX,Pb=new GX;function X_e(t){Mb!=null&&Mb.setMaxEntries(t),Pb!=null&&Pb.setMaxEntries(t)}function up(t,e,n,r){const i=n==null?!1:n.training,s=Array.isArray(t),a=s?t:[t],o=a.map(y=>y.name),l=[],c=e.names();for(const y of o)c.indexOf(y)!==-1?l.push(e.getValue(y)):l.push(null);const f=o.join(",")+"|"+e.names().sort().join(",");let h=Mb.get(f),p;if(h==null){const y=Y_e(a,e);h=y.sorted,p=y.recipientCounts,Mb.put(f,h),Pb.put(f,p)}p={},i||Object.assign(p,Pb.get(f));const g=new tl(e);for(let y=0;y<h.length;++y){const b=h[y],v=b.sourceLayer;if(v instanceof Zg)continue;const w=[],S=[],T=[];let A=!1;for(const _ of b.inputs){const D=g.getValue(_),O=g.getMask(_);w.push(D),S.push(O),O!=null&&(A=!0),i||(p[_.name]--,p[_.name]===0&&!e.hasKey(_)&&o.indexOf(_.name)===-1&&!D.isDisposed&&_.sourceLayer.stateful!==!0&&T.push(D))}A&&(n=n||{},n.mask=S[0]);const k=Rt(v.apply(w,n));let E=null;v.supportsMasking&&(E=v.computeMask(w,S));const I=Q_e(b),N=Array.isArray(I)?I:[I];for(let _=0;_<N.length;++_){g.hasKey(N[_])||g.add(N[_],k[_],Array.isArray(E)?E[0]:E);const D=o.indexOf(N[_].name);D!==-1&&(l[D]=k[_])}i||ft(T)}return g.disposeMasks(),s?l:l[0]}function Y_e(t,e){G(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const i=_G(t[0],e);n=i.sorted,r=i.recipientMap}else{const i=new Set;for(const s of t){const{sorted:a,recipientMap:o}=_G(s,e);for(const l of a)i.has(l.name)||(n.push(l),i.add(l.name));for(const l in o)r[l]==null&&(r[l]=new Set),o[l].forEach(c=>r[l].add(c))}}return{sorted:n,recipientCounts:Z_e(r)}}function Z_e(t){const e={};for(const n in t)e[n]=t[n].size;return e}function _G(t,e){const n=new Set,r=[],i={};for(const o of e.names())n.add(o);const s=[],a=[];for(s.push(t);s.length>0;){const o=s[s.length-1];if(n.has(o.name)){s.pop();continue}const l=a[a.length-1]===s.length-1;if(o.inputs.length===0||l)s.pop(),r.push(o),n.add(o.name),l&&a.pop();else{a.push(s.length-1);for(const c of o.inputs)i[c.name]==null&&(i[c.name]=new Set),i[c.name].add(o.name),!n.has(c.name)&&s.push(c)}}return{sorted:r,recipientMap:i}}function Q_e(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const i of t.sourceLayer.inboundNodes[r].outputTensors)if(i.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J_e=fe();J_e.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,X_e);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function KR(t,e){return ce(()=>Sr(Ue(ne(t,t),e,!0)))}class Qg extends $h{getConfig(){return{}}}class cY extends Qg{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ce(()=>{const n=KR(e,this.axis),r=Di(n,0,this.maxValue);return ne(e,We(r,Ae(Pn(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}cY.className="MaxNorm";Te(cY);class uY extends Qg{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ce(()=>We(e,Ae(Pn(),KR(e,this.axis))))}getConfig(){return{axis:this.axis}}}uY.className="UnitNorm";Te(uY);class fY extends Qg{apply(e){return eu(e)}}fY.className="NonNeg";Te(fY);class hY extends Qg{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ce(()=>{const n=KR(e,this.axis),r=Ae(ne(this.rate,Di(n,this.minValue,this.maxValue)),ne(1-this.rate,n));return ne(e,We(r,Ae(Pn(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}hY.className="MinMaxNorm";Te(hY);const RG={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Bn(t){return LR(t)}function DG(t,e={}){return Hg(t,es.getMap().classNameMap,e,"constraint")}function zn(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in RG?RG[t]:t,config:{}};return DG(n)}else return t instanceof Qg?t:DG(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function tc(t){if(t==null)return;const e=[],n=[],r=[];for(const i in t){const s=t[i];if(typeof s!="number"){const a=s;e.push(a.data()),n.push(i),r.push(a)}}if(e.length>0){const i=await Promise.all(e);for(let s=0;s<i.length;++s)t[n[s]]=i[s][0];ft(r)}}function dY(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var MG;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(MG||(MG={}));const eRe=125;class Sm{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class tRe{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class nRe extends Sm{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const i in n){const s=n[i];if(typeof s=="number")this.totals.hasOwnProperty(i)||(this.totals[i]=0),this.totals[i]=this.totals[i]+s*r;else{let a;i in this.totals?a=this.totals[i]:this.totals[i]=0;const o=ce(()=>Ae(this.totals[i],ne(s,r)));this.totals[i]=o,a!=null&&a.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:ce(()=>{const i=ne(We(1,this.seen),this.totals[r]);n[r]=i,this.totals[r].dispose(),ia(n[r])}))}}class rRe extends Sm{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const s in this.history){const a=this.history[s];for(let o=0;o<a.length;++o)if(typeof a[o]!="number"){const l=a[o];e.push(l.data()),n.push(s),r.push(o)}}const i=await Promise.all(e);for(let s=0;s<i.length;++s)this.history[n[s]][r[s]].dispose(),this.history[n[s]][r[s]]=i[s][0]}}class iRe extends Sm{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||yX,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=eRe),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");dI(this.yieldEvery)&&(this.maybeWait=y_e(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const i=[];this.yield!=null&&(await tc(r),i.push(this.yield(e,n,r))),i.push(this.nextFrameFunc()),await Promise.all(i)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await tc(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await tc(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await tc(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await tc(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):dI(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await tc(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await tc(e),await this.trainEnd(e))}}function pY(t,e){return t==null&&(t={}),t instanceof Sm?[t]:Array.isArray(t)&&t[0]instanceof Sm?t:Rt(t).map(r=>new iRe(r,e))}class Qi{constructor(){}static registerCallbackConstructor(e,n){G(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),Qi.checkForDuplicate(n),Qi.constructors[e]==null&&(Qi.constructors[e]=[]),Qi.constructors[e].push(n)}static checkForDuplicate(e){for(const n in Qi.constructors)Qi.constructors[+n].forEach(i=>{if(i===e)throw new ee("Duplicate callback constructor.")})}static clear(){Qi.constructors={}}static createCallbacks(e){const n=[];for(const r in Qi.constructors){const i=+r;e>=i&&n.push(...Qi.constructors[i])}return n.map(r=>new r)}}Qi.constructors={};function mY(t,e,n,r,i,s,a,o,l){const c=new rRe,f=[new nRe,...Qi.createCallbacks(e)];t!=null&&f.push(...t),f.push(c);const h=new tRe(f);return h.setParams({epochs:n,initialEpoch:r,samples:i,steps:s,batchSize:a,verbose:e,doValidation:o,metrics:l}),{callbackList:h,history:c}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function eo(t,e={},n=!1){return Hg(t,es.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Lb(t,e){return ce(()=>{t.dtype!=="float32"&&(t=Re(t,"float32"));const n=Ue(Xg(t),e,!0),r=V1(n.shape,Pn()),i=Sr($l(n,r));return We(t,i)})}function J1(t,e){return ce(()=>Nn(Xg(Ke(e,t)),-1))}function XR(t,e){return ce(()=>Nn(Rr(Ke(e,t)),-1))}function YR(t,e){return ce(()=>{const n=Ke(t,e),r=Di(Rr(t),Pn(),Number.MAX_VALUE),i=Rr(We(n,r));return ne(100,Nn(i,-1))})}function sRe(t,e){return ce(()=>{const n=Di(e,Pn(),Number.MAX_VALUE),r=fa(Ae(1,n)),i=Di(t,Pn(),Number.MAX_VALUE),s=fa(Ae(1,i));return Nn(Xg(Ke(r,s)),-1)})}function aRe(t,e){return ce(()=>{const n=$l(0,Ke(1,ne(t,e)));return Nn(Xg(n),-1)})}function oRe(t,e){return ce(()=>{const n=$l(0,Ke(1,ne(t,e)));return Nn(n,-1)})}function lRe(t,e){return ce(()=>{const n=Ue(ne(t,e),-1),r=Is(ne(Ke(1,t),e),-1);return $l(0,Ae(1,Ke(r,n)))})}function cRe(t,e){return ce(()=>{const n=Math.log(2),r=Ke(e,t),i=Ke(Ae(r,zg(ne(-2,r))),n);return Nn(i,-1)})}function Cm(t,e,n=!1){return ce(()=>{if(n)e=tR(e);else{const r=Ue(e,e.shape.length-1,!0);e=We(e,r)}return e=Di(e,Pn(),1-Pn()),xn(Ue(ne(Re(t,"float32"),fa(e)),e.shape.length-1))})}function Fb(t,e,n=!1){return ce(()=>{const r=Re(G1(I_e(t)),"int32");e=Di(e,Pn(),1-Pn());const i=e.shape,s=se(zK(r,i[i.length-1]),i);return Cm(s,e,n)})}function uRe(t,e){if(!$t(t.shape,e.shape))throw new ee(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return ce(()=>{const n=eu(e),r=xn(Rr(e));return Ae(Ke(n,ne(e,t)),PK(ua(r)))})}function ew(t,e){return ce(()=>{let n;return n=Di(e,Pn(),1-Pn()),n=fa(We(n,Ke(1,n))),Nn(uRe(t,n),-1)})}function fRe(t,e){return ce(()=>{const n=Di(t,Pn(),1),r=Di(e,Pn(),1);return Ue(ne(t,fa(We(n,r))),-1)})}function hRe(t,e){return ce(()=>{const n=fa(Ae(Pn(),e));return Nn(Ke(e,ne(t,n)),-1)})}function gY(t,e){return ce(()=>{const n=Lb(t,-1),r=Lb(e,-1),i=ne(n,r);return xn(Ue(i,-1))})}const Bb={meanSquaredError:J1,meanAbsoluteError:XR,meanAbsolutePercentageError:YR,meanSquaredLogarithmicError:sRe,squaredHinge:aRe,hinge:oRe,categoricalHinge:lRe,logcosh:cRe,categoricalCrossentropy:Cm,sparseCategoricalCrossentropy:Fb,binaryCrossentropy:ew,kullbackLeiblerDivergence:fRe,poisson:hRe,cosineProximity:gY};function aE(t){if(typeof t=="string"){if(t in Bb)return Bb[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new ee(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function yY(t,e){return ce(()=>{const n=ne(.5,ls(e)),r=aa(Mi(e,n),t.dtype);return Nn(ca(t,r),-1)})}function vY(t,e){return ce(()=>aa(ca(ym(t,-1),ym(e,-1)),"float32"))}function dRe(t,e){return ce(()=>Re(Ue(lo(ca(t,1),ca(e,1))),"float32"))}function pRe(t,e){return ce(()=>Re(Ue(lo(ca(t,0),ca(e,1))),"float32"))}function mRe(t,e){return ce(()=>{const n=dRe(t,e),r=pRe(t,e),i=Ae(n,r);return Re(Br(Mi(i,0),We(n,i),0),"float32")})}function gRe(t,e){return ew(t,e)}function yRe(t,e){return t.rank===e.rank&&(t=Vg(t,[t.rank-1])),e=ym(e,-1),e.dtype!==t.dtype&&(e=Re(e,t.dtype)),Re(ca(t,e),"float32")}const vRe=J1,bRe=J1,xRe=XR,wRe=XR,SRe=YR,CRe=YR,bY=Cm,TRe=gY,xY=Fb,zb={binaryAccuracy:yY,categoricalAccuracy:vY,precision:mRe,categoricalCrossentropy:bY,sparseCategoricalCrossentropy:xY,mse:vRe,MSE:bRe,mae:xRe,MAE:wRe,mape:SRe,MAPE:CRe,cosine:TRe};function kRe(t){if(typeof t=="string"&&t in zb)return zb[t];if(typeof t!="string"&&t!=null)return t;throw new ee(`Unknown metric ${t}`)}function Gv(t){if(qs(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(Bb))if(Bb[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(zb))if(zb[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ARe(t){const e={Adagrad:()=>ef.adagrad(.01),Adadelta:()=>ef.adadelta(1,.95,Pn()),Adam:()=>ef.adam(.001,.9,.999,Pn()),Adamax:()=>ef.adamax(.002,.9,.999,Pn(),0),RMSProp:()=>ef.rmsprop(.001,.9,0,Pn()),SGD:()=>ef.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new ee(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const PG=1*1024*1024;function LG(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!FI(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>PG&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${PG}.`)}}function FI(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!FI(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!FI(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ERe(t,e,n,r=console.log){const i=IRe(t),s=["Layer (type)","Input Shape","Output shape","Param #"];i?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(f=>Math.floor(e*f)));let a;if(!i){s.push("Receives inputs"),a=[];for(const f in t.nodesByDepth)a.push(...t.nodesByDepth[f])}r("_".repeat(e)),jb(s,n,r),r("=".repeat(e));const o=t.layers;for(let f=0;f<o.length;++f)i?NRe(o[f],n,r):ORe(o[f],n,a,r),r((f===o.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=$Re(t),c=Db(t.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(e))}function $Re(t){let e;return t.collectedTrainableWeights!=null?e=Db(t.collectedTrainableWeights):e=Db(t.trainableWeights),e}function IRe(t){let e=!0;const n=[],r=[];for(const i in t.nodesByDepth)n.push(t.nodesByDepth[i]);for(const i of n){if(i.length>1||i.length===1&&i[0].inboundLayers.length>1){e=!1;break}r.push(...i)}if(e)for(const i of t.layers){let s=!1;for(const a of i.inboundNodes)if(r.indexOf(a)!==-1)if(s){e=!1;break}else s=!0;if(!e)break}return e}function jb(t,e,n=console.log){let r="";for(let i=0;i<t.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=t[i],r=r.slice(0,e[i]),r+=" ".repeat(e[i]-r.length);n(r)}function NRe(t,e,n){let r,i;try{i=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{i="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const s=t.name,a=t.getClassName(),o=[`${s} (${a})`,i,r,t.countParams().toString()];jb(o,e,n)}function ORe(t,e,n,r){let i,s;try{s=t.inboundNodes.map(h=>JSON.stringify(h.inputShapes)).join(",")}catch{s="multiple"}try{i=JSON.stringify(t.outputShape)}catch{i="multiple"}const a=[];for(const h of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(h)===-1))for(let p=0;p<h.inboundLayers.length;++p){const g=h.inboundLayers[p].name,y=h.nodeIndices[p],b=h.tensorIndices[p];a.push(`${g}[${y}][${b}]`)}const o=t.name,l=t.getClassName(),c=a.length===0?"":a[0],f=[`${o} (${l})`,s,i,t.countParams().toString(),c];jb(f,e,r);for(let h=1;h<a.length;++h)jb(["","","","",a[h]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function wY(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function BI(t,e){if(t===null)return null;if(typeof t=="string")return fc(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const s=t[i];wY(e,i,s)?n.push(s):n.push(BI(s,e))}return n}else{const n={};for(const r of Object.keys(t)){const i=t[r];if(r==="name"&&typeof i=="string")n[r]=i;else{const s=fc(r);n[s]=BI(i,s)}}return n}}function zI(t,e){if(t==null)return null;if(typeof t=="string")return Wa(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const s=t[i];wY(e,i,s)?n.push(s):n.push(zI(s,e))}return n}else{const n={};for(const r of Object.keys(t)){const i=t[r],s=Wa(r);(r==="name"||r==="className")&&typeof i=="string"?n[s]=i:n[s]=zI(i,r)}return n}}/** @license See the LICENSE file. */const SY="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const _Re=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class xs extends lt{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const S=this.getClassName().toLowerCase();this.name=Y1(S)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],ol(this.inputs).length!==this.inputs.length)throw new ee(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(S=>S.name)}`);ol(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(S=>S.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const S of this.outputs){const T=S.sourceLayer,A=S.nodeIndex,k=S.tensorIndex;this.outputLayers.push(T),this.outputLayersNodeIndices.push(A),this.outputLayersTensorIndices.push(k)}for(const S of this.inputs){const T=S.sourceLayer,A=S.nodeIndex,k=S.tensorIndex;qs(A===0,"input layer has >1 nodes"),qs(k===0,"input layer has >1 tensors"),this.inputLayers.push(T),this.inputLayersNodeIndices.push(A),this.inputLayersTensorIndices.push(k)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let S=0;S<this.inputLayers.length;S++){const T=this.inputLayers[S];if(!(T instanceof Zg))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${S} (0-based) originates from layer type ${T.getClassName()}.`);this.inputNames.push(T.name),this.feedInputShapes.push(T.batchInputShape),this.feedInputNames.push(T.name)}for(const S of this.outputLayers)this.outputNames.push(S.name);this.internalInputShapes=this.inputs.map(S=>S.shape),this.internalOutputShapes=this.outputs.map(S=>S.shape);const n={},r={},i={},s={},a={},o=[],l=(S,T,A,k,E,I)=>{(k==null||E==null||I==null)&&(k=S.sourceLayer,E=S.nodeIndex,I=S.tensorIndex);const N=k.inboundNodes[E];if(A.indexOf(N)!==-1)throw new ns(`The tensor ${S.name} at layer "${k.name}" is part of a cycle.`);if(T.indexOf(N)!==-1)return;this.containerNodes.add(xs.nodeKey(k,E)),k.id in a||(a[k.id]=Object.keys(a).length),A.indexOf(N)===-1&&A.push(N);const _=N.inboundLayers.length;for(let D=0;D<_;D++){const O=N.inputTensors[D],P=N.inboundLayers[D],z=N.nodeIndices[D],W=N.tensorIndices[D];l(O,T,A,P,z,W)}for(T.push(N);A.indexOf(N)>=0;)A.splice(A.indexOf(N),1);o.push(N)},c=[],f=[];for(const S of this.outputs)l(S,c,f);const h=o.slice().reverse();for(const S of h){r[S.id]=S,S.id in n||(n[S.id]=0);let T=n[S.id];const A=i[S.outboundLayer.id]==null?0:i[S.outboundLayer.id];T=Math.max(T,A),i[S.outboundLayer.id]=T,s[S.outboundLayer.id]=S.outboundLayer,n[S.id]=T;for(let k=0;k<S.inboundLayers.length;k++){const E=S.inboundLayers[k],I=S.nodeIndices[k],N=E.inboundNodes[I],_=n[N.id]==null?0:n[N.id];n[N.id]=Math.max(T+1,_),r[N.id]=N}}const p={};for(const S in n){const T=n[S];T in p||(p[T]=[]),p[T].push(r[S])}const g={};for(const S in i){const T=i[S];T in g||(g[T]=[]),g[T].push(s[S])}let y=Object.keys(g).map(S=>parseInt(S,10)).sort(Vv);this.layers=[];for(const S of y){const T=g[S];T.sort((A,k)=>{const E=a[A.id],I=a[k.id];return E<I?-1:E>I?1:0});for(const A of T)A instanceof xs&&this.internalContainerRefs.push(A),this.layers.push(A)}this.layersByDepth=g,y=Object.keys(p).map(S=>parseInt(S,10)).sort(Vv);const b=this.inputs.slice(),v=[];for(const S of y)for(const T of p[S]){const A=T.outboundLayer;if(A!=null){for(const k of T.inputTensors)if(b.indexOf(k)===-1)throw new ns(`Graph disconnected: cannot obtain value for tensor ${k} at layer "${A.name}". The following previous layers were accessed without issue: ${v}`);for(const k of T.outputTensors)b.push(k);v.push(A.name)}}this.nodesByDepth=p;const w=this.layers.map(S=>S.name);for(const S of w){const T=w.filter(A=>A===S).length;if(T!==1)throw new ns(`The name "${S}" is used ${T} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(w))}this.outboundNodes=[],this.inboundNodes=[],new Q1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(S=>null),outputMasks:this.outputs.map(S=>null),inputShapes:this.inputs.map(S=>S.shape),outputShapes:this.outputs.map(S=>S.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new ee("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let i=0;const s=_Re(e);s&&this.parseWeights(e);for(const o of this.layers)for(const[l,c]of o.weights.entries()){const f=s?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[f]!=null)throw new ee(`Duplicate weight name: ${f}`);r[f]=c,i++}const a=[];for(const o in e){let l=o;if(r[o]==null){const c=o.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)a.push([r[l],e[o]]);else if(n)throw new ee(`Provided weight data has no target variable: ${o}`);delete r[l]}if(n){const o=[];for(const l in r)o.push(l);if(o.length>0)throw new ee(`${o.length} of ${i} weights are not set: ${o}`)}HR(a)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),i=["vars","layer_checkpoint_dependencies"],s=r.map(a=>a.startsWith("_")?a.slice(1):a).filter(a=>!i.includes(a)).join("/");s!==n&&(e[s]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${SY}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=zI(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return ce(()=>{e=Rt(e);const r=new tl;for(let i=0;i<this.inputs.length;++i)r.add(this.inputs[i],e[i]);return up(this.outputs,r,n)})}computeMask(e,n){return ce(()=>{e=Rt(e);let r;return n==null?r=Wc(null,e.length):r=Rt(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=Rb(e);if(n.length!==this.inputLayers.length)throw new ee(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let o=0;o<n.length;o++){const l=this.inputLayers[o],c=n[o],f=l.name+"_0_0";r[f]=c}const i=Object.keys(this.nodesByDepth).map(o=>parseInt(o,10)).sort(Vv);if(i.length>1)for(const o of i){const l=this.nodesByDepth[o];for(const c of l){const f=c.outboundLayer;if(this.inputLayers.map(b=>b.id).indexOf(f.id)!==-1)continue;const h=[];for(let b=0;b<c.inboundLayers.length;b++){const v=c.inboundLayers[b],w=c.nodeIndices[b],S=c.tensorIndices[b],T=`${v.name}_${w}_${S}`,A=r[T];h.push(A)}const p=f.computeOutputShape(qr(h)),g=Rb(p),y=f.inboundNodes.indexOf(c);for(let b=0;b<g.length;b++){const v=`${f.name}_${y}_${b}`;r[v]=g[b]}}}const s=[],a=[];for(let o=0;o<this.outputLayers.length;o++){const l=this.outputLayers[o],c=this.outputLayersNodeIndices[o],f=this.outputLayersTensorIndices[o],h=`${l.name}_${c}_${f}`;a.push(h)}for(let o=0;o<a.length;o++){const l=a[o];qs(l in r),s.push(r[l])}return qr(s)}runInternalGraph(e,n){n==null&&(n=Wc(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const c=this.inputs[l],f=e[l],h=n[l];r[c.id]=[f,h]}const i=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(Vv);for(const l of i){const c=this.nodesByDepth[l];for(const f of c){const h=f.outboundLayer,p=f.inputTensors,g=f.outputTensors,y=new Array;for(const b of p)b.id in r&&y.push(r[b.id]);if(y.length===p.length){let b={},v,w,S,T;if(f.callArgs!=null&&(b=f.callArgs),y.length===1){const[A,k]=y[0];b.mask==null&&(b.mask=k),S=Rt(h.call(A,b)),T=Rt(h.computeMask(A,k)),v=[A],w=[k]}else v=y.map(A=>A[0]),w=y.map(A=>A[1]),b.mask==null&&(b.mask=w),S=Rt(h.call(v,b)),T=Rt(h.computeMask(v,w));if(h.activityRegularizer)throw new rt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let A=0;A<g.length;++A){const k=g[A],E=S[A],I=T[A];r[k.id]=[E,I]}}}}const s=[],a=[],o=[];for(const l of this.outputs){qs(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[c,f]=r[l.id];o.push(c.shape),s.push(c),a.push(f)}return[s,a,o]}buildNodeConversionMap(e){const n={};let r;for(const i of this.layers){r=i instanceof xs?1:0;for(let s=0;s<i.inboundNodes.length;s++){const a=xs.nodeKey(i,s);this.containerNodes.has(a)&&(n[a]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new ee("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new ee(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new ee(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return ce(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const i=xs.nodeKey(n,r);this.containerNodes.has(i)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const a of this.layers){const o=a.getClassName(),l=a.getConfig(),c=[];for(let h=0;h<a.inboundNodes.length;h++){const p=a.inboundNodes[h],g=xs.nodeKey(a,h);let y={};if(this.containerNodes.has(g)){if(p.callArgs)try{JSON.stringify(p.callArgs),y=p.callArgs}catch{console.warn(`Layer ${a.name} was passed non-serializable keyword arguments: ${p.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),y={}}if(p.inboundLayers.length>0){const b=[];for(let v=0;v<p.inboundLayers.length;v++){const w=p.inboundLayers[v],S=p.nodeIndices[v],T=p.tensorIndices[v],A=xs.nodeKey(w,S);let k=n[A];k==null&&(k=0),b.push([w.name,k,T,y])}c.push(b)}}}const f={};f.name=a.name,f.className=o,f.config=l,f.inboundNodes=c,r.push(f)}e.layers=r;const i=[];for(let a=0;a<this.inputLayers.length;a++){const o=this.inputLayers[a],l=this.inputLayersNodeIndices[a],c=xs.nodeKey(o,l);if(!this.containerNodes.has(c))continue;let f=n[c];f==null&&(f=0);const h=this.inputLayersTensorIndices[a];i.push([o.name,f,h])}e.inputLayers=i;const s=[];for(let a=0;a<this.outputLayers.length;a++){const o=this.outputLayers[a],l=this.outputLayersNodeIndices[a],c=xs.nodeKey(o,l);if(!this.containerNodes.has(c))continue;let f=n[c];f==null&&(f=0);const h=this.outputLayersTensorIndices[a];s.push([o.name,f,h])}return e.outputLayers=s,e}static fromConfig(e,n,r={},i=!1){const s={},a={};function o(v,w){v.name in a?a[v.name].push(w):a[v.name]=[w]}function l(v,w){const S=[];let T;for(const A of w){const k=A[0],E=A[1],I=A[2];if(T=A[3]==null?{}:A[3],!(k in s)){o(v,w);return}const N=s[k];if(N.inboundNodes.length<=E){o(v,w);return}const _=N.inboundNodes[E];S.push(_.outputTensors[I])}S.length>0&&v.apply(qr(S),T)}function c(v){const w=v.name,S=eo(v,n.customObjects!=null?n.customObjects:{});S.setFastWeightInitDuringBuild(i),s[w]=S,v.inboundNodes.forEach(A=>{if(!(A instanceof Array))throw new ee(`Corrupted configuration, expected array for nodeData: ${A}`);o(S,A)})}const f=n.name,h=n.layers;for(const v of h)c(v);for(;!g_e(a);)for(const v of h){const w=s[v.name];if(w.name in a){const S=a[w.name];delete a[w.name];for(const T of S)l(w,T)}}const p=[],g=[],y=n.inputLayers;for(const v of y){const w=v[0],S=v[1],T=v[2];qs(w in s);const k=s[w].inboundNodes[S].outputTensors;p.push(k[T])}const b=n.outputLayers;for(const v of b){const w=v[0],S=v[1],T=v[2];qs(w in s);const k=s[w].inboundNodes[S].outputTensors;g.push(k[T])}return new e({inputs:p,outputs:g,name:f})}get stateful(){if(this._stateful)throw new ee("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){ce(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function RRe(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(i=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const i=[];return e.forEach(s=>{s in t?i.push(t[s]):i.push(null)}),i}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function CY(t,e){return RRe(t,e,"classWeight")}async function TY(t,e,n,r){if(n!=null){const i=ce(()=>{if(t.shape.length===1)return Ac(t);if(t.shape.length===2){if(t.shape[1]>1)return ym(t,1);if(t.shape[1]===1)return se(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),s=Array.from(await i.data());ft(i);const a=[];return s.forEach(o=>{if(n[o]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${o} exists in the data but not in classWeight`);a.push(n[o])}),fi(a,"float32")}else return null}function DRe(t,e){return ne(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const MRe=32;function kY(t,e){let n,r;const i=e;n=i.xs,r=i.ys,G(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const s=FG("input",t.inputNames,n),a=FG("output",t.outputNames,r),o=s[0].shape[0];G(s.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${s.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),G(a.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${a.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<s.length;l++)G(s[l].shape[0]===o,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${s[l].shape[0]}; expected  ${o} based on input ${t.inputNames[0]}.`);for(let l=0;l<a.length;l++)G(a[l].shape[0]===o,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${a[l].shape[0]}; expected  ${o} based on input ${t.inputNames[0]}.`);return{xs:s,ys:a}}function FG(t,e,n){if(n instanceof Mn)return[n];if(Array.isArray(n))return G(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const i of e){if(n[i]==null)throw new ee(`The feature data generated by the dataset lacks the required ${t} key '${i}'.`);r.push(n[i])}return r}}function PRe(t){if(t.length===3)throw new rt("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function LRe(t,e,n){const r=n.batchesPerEpoch!=null;if(G(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),G(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),G(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),G(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),G(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const i=n.validationData!=null;let s,a;if(i)if(BG(n.validationData))G(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const v=PRe(n.validationData);s=v.xs,a=v.ys}const o=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let c;i?c=l.slice().concat(l.map(v=>"val_"+v)):c=l.slice();const f=pY(n.callbacks,n.yieldEvery),h=n.verbose==null?1:n.verbose,{callbackList:p,history:g}=mY(f,h,n.epochs,null,null,FRe(e,n),null,i,c);p.setModel(t),t.history=g,await p.onTrainBegin(),t.stopTraining_=!1;let y=n.initialEpoch==null?0:n.initialEpoch,b=await e.iterator();for(;y<n.epochs;){const v={};await p.onEpochBegin(y);let w=0,S=0;for(r||(b=await e.iterator());!r||w<n.batchesPerEpoch;){const T=await b.next();if(r&&T.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${w} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(T.value!=null){const{xs:A,ys:k}=kY(t,T.value),E={};E.batch=S,E.size=A[0].shape[0],await p.onBatchBegin(S,E);const I=[];if(n.classWeight!=null){const D=CY(n.classWeight,t.outputNames);for(let O=0;O<D.length;++O)I.push(await TY(k[O],null,D[O]))}const N=A.concat(k).concat(I),_=o(N);ft(N);for(let D=0;D<l.length;++D){const O=l[D],P=_[D];E[O]=P,ia(P)}await p.onBatchEnd(S,E),dY(E),S++,w++}if(r?w>=n.batchesPerEpoch:T.done){if(i){let A;BG(n.validationData)?A=Rt(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):A=Rt(t.evaluate(s,a,{batchSize:n.validationBatchSize==null?MRe:n.validationBatchSize,verbose:0}));for(let k=0;k<t.metricsNames.length;++k)v[`val_${t.metricsNames[k]}`]=A[k]}break}if(t.stopTraining_)break}if(await p.onEpochEnd(y,v),y++,t.stopTraining_)break}return await p.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function FRe(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function BG(t){return typeof t.iterator=="function"}function BRe(t){return typeof t.next=="function"}async function zRe(t,e,n){n=n||{};const r=n.batches!=null,i=t.testFunction;let s=[];if(n.verbose>0)throw new rt("Verbose mode is not implemented yet.");G(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const a=BRe(e)?e:await e.iterator();let o=0,l=0;for(;!r||l<n.batches;){const c=await a.next();if(s=ce(()=>{if(c.value){const{xs:f,ys:h}=kY(t,c.value),p=f.concat(h),g=ce(()=>i(p));if(ft(p),l===0)for(let b=0;b<g.length;++b)s.push(At(0));const y=p[0].shape[0];for(let b=0;b<g.length;++b){const v=g[b],w=s[b];s[b]=ce(()=>Ae(s[b],ne(y,v))),l>0&&ft(w)}ft(g),o+=y,++l}return s}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<s.length;++c){const f=s[c];s[c]=We(s[c],o),ft(f)}return qr(s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function oE(t){G(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function ep(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>$c(r,e,n-e)):$c(t,e,n-e)}function jI(t,e){return ce(()=>t==null?null:Array.isArray(t)?t.map(n=>jI(n,e)):JX(t,e.dtype==="int32"?e:Re(e,"int32")))}function lE(t,e){const n=[];let r=0,i=null;for(;r<t;)i=r+e,i>=t&&(i=t),n.push([r,i]),r=i;return n}function AY(t){const e=[];t instanceof Mn&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(Kg(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function vs(t,e){if(t==null)return;const n=[];if(e instanceof Mn)n.push(e.id);else if(Array.isArray(e))e.forEach(i=>n.push(i.id));else if(e!=null)for(const i in e){const s=e[i];n.push(s.id)}const r=[];if(t instanceof Mn)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(i=>{n.indexOf(i.id)===-1&&r.push(i)});else if(t!=null)for(const i in t){const s=t[i];n.indexOf(s.id)===-1&&r.push(s)}r.forEach(i=>{i.isDisposed||i.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function jRe(t){return t instanceof Mn}function VI(t){return Array.isArray(t)}function zG(t){return!jRe(t)&&!VI(t)}function jG(t,e,n,r=!0,i=""){if(e==null||e.length===0){if(t!=null){let a=!1;if(VI(t)&&t.length>0)a=!0;else if(zG(t)){for(const o in t)if(t.hasOwnProperty(o)){a=!0;break}}else a=!0;if(a)throw new ee(`Error when checking model ${i} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(a=>null);let s;if(zG(t)){t=t,s=[];for(const a of e){if(t[a]==null)throw new ee(`No data provided for "${a}". Need data for each key in: ${e}`);s.push(t[a])}}else if(VI(t)){if(t=t,t.length!==e.length)throw new ee(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);s=t}else{if(t=t,e.length>1)throw new ee(`The model ${i} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);s=[t]}if(s=AY(s),n!=null)for(let a=0;a<e.length;++a){if(n[a]==null)continue;const o=s[a];if(o.shape.length!==n[a].length)throw new ee(`Error when checking ${i}: expected ${e[a]} to have ${n[a].length} dimension(s). but got array with shape ${o.shape}`);for(let l=0;l<n[a].length;++l){if(l===0&&!r)continue;const c=o.shape[l],f=n[a][l];if(f!=null&&f>=0&&c!==f)throw new ee(`${i} expected a batch of elements where each example has shape [${n[a].slice(1,n[a].length)}] (i.e.,tensor shape [*,${n[a].slice(1,n[a].length)}]) but the ${i} received an input with ${o.shape[0]} examples, each with shape [${o.shape.slice(1,o.shape.length)}] (tensor shape [${o.shape}])`)}}return s}function VRe(t,e,n){const r=ol(t.map(s=>s.shape[0]));r.sort();const i=ol(e.map(s=>s.shape[0]));if(i.sort(),r.length>1)throw new ee(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(s=>s.shape))}`);if(i.length>1)throw new ee(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(s=>s.shape))}`);if(r.length>0&&i.length>0&&!$t(r,i))throw new ee(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${i[0]} target sample(s).`)}function URe(t,e,n){const r=[J1,ew,Cm];for(let i=0;i<t.length;++i){const s=t[i],a=e[i],o=n[i];if(a!=null){if(a===Cm&&s.shape[s.shape.length-1]===1)throw new ee(`You are passing a target array of shape ${s.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(a)!==-1){const l=s.shape.slice(1),c=o.slice(1);for(let f=0;f<l.length;++f){const h=l[f],p=c[f];if(p!=null&&h!==p)throw new ee(`A target Tensor with shape ${s.shape} was passed for an output of shape ${o}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function VG(t,e,n,r=!0,i=""){let s;if(Array.isArray(t)){if(t.length!==e.length)throw new ee(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);s=t}else{if(e.length>1)throw new ee(`The model expects ${e.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);s=[t]}if(n!=null)for(let a=0;a<e.length;++a){if(n[a]==null)continue;const o=s[a];if(o.shape.length!==n[a].length)throw new ee(`Error when checking ${i}: expected ${e[a]} to have ${n[a].length} dimension(s), but got array with shape ${JSON.stringify(o.shape)}`);for(let l=0;l<n[a].length;++l){if(l===0&&!r)continue;const c=o.shape[l],f=n[a][l];if(f!=null&&f!==c)throw new ee(`Error when checking ${i}: expected ${e[a]} to have shape ${JSON.stringify(n[a])} but got array with shape ${JSON.stringify(o.shape)}.`)}}}function WRe(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const i of e){let s=n.hasOwnProperty(i)?n[i]:[];Array.isArray(s)||(s=[s]),r.push(s)}return r}}const GRe="layers-model";class Cf extends xs{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new ee("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");ERe(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=ARe(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Nl))throw new ee("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const a in e.loss)if(this.outputNames.indexOf(a)===-1)throw new ee(`Unknown entry in loss dictionary: "${a}". Only expected the following keys: ${this.outputNames}`);for(const a of this.outputNames)e.loss[a]==null&&console.warn(`Output "${a}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${a} during training`),n.push(aE(e.loss[a]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new ee(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(o=>aE(o))}else{const a=aE(e.loss);this.outputs.forEach(o=>{n.push(a)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let a=0;a<this.outputs.length;++a){const o=this.internalOutputShapes[a],l=this.outputNames[a];this.feedOutputNames.push(l),this.feedOutputShapes.push(o),this.feedLossFns.push(this.lossFunctions[a])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Ec("loss",()=>{for(let a=0;a<this.outputs.length;++a){if(r.indexOf(a)!==-1)continue;const o=this.lossFunctions[a];this.outputs.length>1&&(this.metricsTensors.push([o,a]),this.metricsNames.push(this.outputNames[a]+"_loss"))}});const i=WRe(e.metrics,this.outputNames),s=(a,o,l)=>{this.outputNames.length>1&&(o=this.outputNames[a]+"_"+o),this.metricsNames.push(o),this.metricsTensors.push([l,a])};Ec("metric",()=>{for(let a=0;a<this.outputs.length;++a){if(r.indexOf(a)!==-1)continue;const o=i[a];(c=>{const f="";let h,p,g;for(const y of c){if(typeof y=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(y)!==-1){const v=this.internalOutputShapes[a];v[v.length-1]===1||this.lossFunctions[a]===ew?["accuracy","acc"].indexOf(y)!==-1?p=yY:["crossentropy","ce"].indexOf(y)!==-1&&(p=gRe):this.lossFunctions[a]===Fb?["accuracy","acc"].indexOf(y)!==-1?p=yRe:["crossentropy","ce"].indexOf(y)!==-1&&(p=xY):["accuracy","acc"].indexOf(y)!==-1?p=vY:["crossentropy","ce"].indexOf(y)!==-1&&(p=bY);let w;["accuracy","acc"].indexOf(y)!==-1?w="acc":["crossentropy","ce"].indexOf(y)!==-1&&(w="ce"),g=p,h=f+w}else g=kRe(y),h=f+Gv(y);let b;Ec(h,()=>{b=g}),s(a,h,b)}})(o)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const i=r.batchSize==null?32:r.batchSize;oE(i);const a=this.standardizeUserDataXY(e,n,!0,i);try{const o=a[0].concat(a[1]);this.makeTestFunction();const l=this.testFunction,c=this.testLoop(l,o,i,r.verbose,r.steps);return qr(c)}finally{vs(a[0],e),vs(a[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),zRe(this,e,n)}checkNumSamples(e,n,r,i="steps"){let s;if(r!=null){if(s=null,n!=null)throw new ee(`If ${i} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?s=e[0].shape[0]:s=e.shape[0];else throw new ee(`Either the input data should have a defined shape, or ${i} shoud be specified.`);return s}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new ee("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),i=r?n:[n],s=this.retrieveSymbolicTensors(i),a=new tl;if(e instanceof Mn&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new ee(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)a.add(this.inputs[l],e[l])}else for(const l of this.inputs){const c=e[l.name];if(c==null)throw new ee(`No value is provided for the model's input ${l.name}`);a.add(l,c)}const o=up(s,a);return r?o:o[0]}retrieveSymbolicTensors(e){const n=Wc(null,e.length);let r=e.length;for(const i of this.layers){const s=Array.isArray(i.output)?i.output:[i.output],a=s.map(o=>o.name);for(let o=0;o<e.length;++o){const l=a.indexOf(e[o]);if(l!==-1&&(n[o]=s[l],r--),r===0)break}if(r===0)break}if(r>0){const i=[];throw n.forEach((s,a)=>{s==null&&i.push(e[a])}),new ee(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(i)}`)}return n}predictLoop(e,n=32,r=!1){return ce(()=>{const i=this.checkNumSamples(e);if(r)throw new rt("Verbose predictLoop() is not implemented yet.");const s=lE(i,n),a=this.outputs.map(o=>[]);for(let o=0;o<s.length;++o)ce(()=>{const c=s[o][0],f=s[o][1],h=ep(e,c,f),p=[];if(Array.isArray(h))for(let y=0;y<h.length;++y)p.push({key:this.inputs[y],value:h[y]});else p.push({key:this.inputs[0],value:h});const g=new tl(p);return up(this.outputs,g)}).forEach((c,f)=>a[f].push(c));return qr(a.map(o=>Xr(o,0)))})}predict(e,n={}){const r=AY(e);VG(r,this.inputNames,this.feedInputShapes,!1);try{const i=n.batchSize==null?32:n.batchSize;return oE(i),this.predictLoop(r,i)}finally{vs(r,e)}}predictOnBatch(e){VG(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,i){if(this.optimizer_==null)throw new ns("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const s=[];for(let a=0;a<this.feedOutputShapes.length;++a){const o=this.feedOutputShapes[a];this.feedLossFns[a]===Fb?s.push(o.slice(0,o.length-1).concat([1])):s.push(o)}if(e=jG(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=jG(n,this.feedOutputNames,s,!1,"target"),VRe(e,n),URe(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&i!=null&&i>0&&e[0].shape[0]%i!==0)throw new ee(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${i}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,i,s=!0,a){const[o,l]=this.standardizeUserDataXY(e,n,s,a);if(r!=null)throw new Error("sample weight is not supported yet.");let c=null;if(i!=null){const f=CY(i,this.outputNames);c=[];for(let h=0;h<f.length;++h)c.push(await TY(l[h],null,f[h]))}return[o,l,c]}testLoop(e,n,r,i=0,s){return ce(()=>{const a=this.checkNumSamples(n,r,s,"steps"),o=[];if(i>0)throw new rt("Verbose mode is not implemented yet.");if(s!=null)throw new rt("steps mode in testLoop() is not implemented yet");{const l=lE(a,r),c=fi(Os(0,a));for(let f=0;f<l.length;++f){const h=l[f][0],p=l[f][1],g=$c(c,h,p-h),y=jI(n,g),b=e(y);if(f===0)for(let v=0;v<b.length;++v)o.push(At(0));for(let v=0;v<b.length;++v){const w=b[v];o[v]=Ae(o[v],ne(p-h,w))}}for(let f=0;f<o.length;++f)o[f]=We(o[f],a)}return o})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const i=e[r];let s=i;if(AG(e,i)>1){const a=AG(e.slice(0,r),i);s+=`_${a}`}n.push(s)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),a=[],o=()=>{const h=[];for(let b=0;b<this.inputs.length;++b)h.push({key:this.inputs[b],value:r[b]});const p=new tl(h),g=up(this.outputs,p,{training:!0});let y;for(let b=0;b<this.lossFunctions.length;++b){const v=this.lossFunctions[b];let w=v(i[b],g[b]);s[b]!=null&&(w=DRe(w,s[b]));const S=Nn(w);n.push(S),b===0?y=w:y=Ae(y,w)}for(let b=0;b<this.metricsTensors.length;++b){let v;if(this.outputs.length>1&&b<this.outputs.length)v=n[b];else{const w=this.metricsTensors[b][0],S=this.metricsTensors[b][1];v=Nn(w(i[S],g[S]))}ia(v),a.push(v)}return y=Nn(y),this.calculateLosses().forEach(b=>{y=Ae(y,b)}),y},l=this.collectedTrainableWeights.map(h=>h.read());return[this.optimizer_.minimize(o,!0,l)].concat(a)}}makeTestFunction(){this.testFunction=e=>ce(()=>{const n=[];let r;const i=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let c=0;c<this.inputs.length;++c)a.push({key:this.inputs[c],value:i[c]});const o=new tl(a),l=up(this.outputs,o);for(let c=0;c<this.lossFunctions.length;++c){const f=this.lossFunctions[c],h=Nn(f(s[c],l[c]));c===0?r=h:r=Ae(r,h),n.push(r)}for(let c=0;c<this.metricsTensors.length;++c){const f=this.metricsTensors[c][0],h=this.metricsTensors[c][1],p=Nn(f(s[h],l[h]));n.push(p)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let i,s,a,o,l,c,f,h,p;try{const g=r.batchSize==null?32:r.batchSize;oE(g);const b=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,g);i=b[0],s=b[1],p=b[2];let v=!1,w;if(r.validationData!=null&&r.validationData.length>0){if(v=!0,r.validationData.length===2)l=r.validationData[0],c=r.validationData[1];else throw r.validationData.length===3?new rt("validationData including sample weights is not supported yet."):new ee(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const D=await this.standardizeUserData(l,c,null,null,!0,g);f=D[0],h=D[1],w=f.concat(h)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){v=!0;const _=Math.floor(i[0].shape[0]*(1-r.validationSplit)),D=i[0].shape[0];f=ep(i,_,D),a=i,i=ep(i,0,_),h=ep(s,_,D),o=s,s=ep(s,0,_),w=f.concat(h)}else r.validationSteps!=null&&(v=!0);const S=i.concat(s).concat(p);this.checkTrainableWeightsConsistency();const T=this.makeTrainFunction(),A=this.getDedupedMetricsNames();let k,E;v?(this.makeTestFunction(),k=this.testFunction,E=A.slice().concat(A.map(_=>"val_"+_))):(k=null,w=[],E=A.slice());const I=pY(r.callbacks,r.yieldEvery);return await this.fitLoop(T,S,A,g,r.epochs,r.verbose,I,k,w,r.shuffle,E,r.initialEpoch,null,null)}finally{this.isTraining=!1,vs(i,e),vs(s,n),vs(a,e),vs(o,n),vs(f,l),vs(h,c),p!=null&&ft(p)}}async fitLoop(e,n,r,i,s,a,o,l,c,f,h,p,g,y){i==null&&(i=32),s==null&&(s=1),f==null&&(f=!0),p==null&&(p=0);let b=!1;if(l!=null&&c!=null&&(b=!0),y!=null&&(b=!0,g==null))throw new ee("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const v=this.checkNumSamples(n,i,g,"steps_per_epoch");let w;v!=null&&(w=Os(0,v)),a==null&&(a=1);const{callbackList:S,history:T}=mY(o,a,s,p,v,g,i,b,h);S.setModel(this),this.history=T,await S.onTrainBegin(),this.stopTraining_=!1;for(let A=p;A<s;++A){await S.onEpochBegin(A);const k={};if(g!=null)throw new rt("stepsPerEpoch mode is not implemented yet.");{if(f==="batch")throw new rt("batch shuffling is not implemneted yet");f&&ETe(w);const E=fi(w),I=lE(v,i);for(let N=0;N<I.length;++N){const _={};if(await S.onBatchBegin(N,_),ce(()=>{const D=I[N][0],O=I[N][1],P=$c(E,D,O-D);_.batch=N,_.size=O-D;const z=jI(n,P),W=e(z);for(let U=0;U<r.length;++U){const R=r[U],F=W[U];_[R]=F,ia(F)}if(N===I.length-1&&b){const U=this.testLoop(l,c,i);for(let R=0;R<r.length;++R){const F=r[R],B=U[R];ia(B),k["val_"+F]=B}}}),await S.onBatchEnd(N,_),dY(_),this.stopTraining_)break}E.dispose()}if(await S.onEpochEnd(A,k),this.stopTraining_)break}return await S.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return LRe(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),i=r[0],s=r[1],o=this.makeTrainFunction()(i.concat(s)),l=[];for(const c of o){const f=await c.data();l.push(f[0])}return ft(o),vs(r[0],e),vs(r[1],n),qr(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,i=r?this.trainableWeights:this.weights,s=this.getWeights(r);for(let a=0;a<i.length;++a)r&&!i[a].trainable||n.push({name:i[a].originalName,tensor:s[a]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=JW().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-JW().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Wa(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>Wa(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const i of n)if(typeof r[i]=="string")e[i]=Wa(r[i]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Wa(Gv(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Wa(Gv(e)));{const e={};for(const n in this.metrics)e[n]=Wa(Gv(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=BI(e.optimizer_config),r=eo(n);let i;if(typeof e.loss=="string")i=fc(e.loss);else if(Array.isArray(e.loss))i=e.loss.map(a=>fc(a));else if(e.loss!=null){i={};for(const a in e.loss)i[a]=fc(e.loss[a])}let s;if(Array.isArray(e.metrics))s=e.metrics.map(a=>fc(a));else if(e.metrics!=null){s={};for(const a in e.metrics)s[a]=fc(e.metrics[a])}this.compile({loss:i,metrics:s,optimizer:r})}async save(e,n){if(typeof e=="string"){const c=S2e(e);if(c.length===0)throw new ee(`Cannot find any save handlers for URL '${e}'`);if(c.length>1)throw new ee(`Found more than one (${c.length}) save handlers for URL '${e}'`);e=c[0]}if(e.save==null)throw new ee("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await nG(this.getNamedWeights(n)),o={modelTopology:this.toJSON(null,!1),format:GRe,generatedBy:`TensorFlow.js tfjs-layers v${SY}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){o.trainingConfig=this.getTrainingConfig();const c="optimizer",{data:f,specs:h}=await nG(await this.optimizer.getWeights(),c);r.specs.push(...h),r.data=w2e([r.data,f])}return this.userDefinedMetadata!=null&&(LG(this.userDefinedMetadata,this.name,!0),o.userDefinedMetadata=this.userDefinedMetadata),o.weightData=r.data,o.weightSpecs=r.specs,e.save(o)}setUserDefinedMetadata(e){LG(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}Cf.className="Model";Te(Cf);class EY extends Cf{}EY.className="Functional";Te(EY);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Tm extends Cf{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:Y1("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new ee(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof Tm||e instanceof Cf;let r;if(n){if(r=e,r.outputs.length!==1)throw new ee("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new ee("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new ee("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const i=H_e({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(i)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new ee(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new ee("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=lY(this.outputs[0])}this.inboundNodes=[],new Q1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Wc(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(i=>i.shape),outputShapes:this.outputs[0].shape})}else{const i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(Ct(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Cf({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new ns("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new ns("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new ns("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new ns("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},i=!1){let s,a={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new ee("Legacy serialization format not supported yet.");s=n}else G(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),s=n.layers,delete n.layers,a=n;const o=new e(a);if(!(o instanceof Tm))throw new rt(`Sequential.fromConfig called on non-Sequential input: ${o}`);for(const l of s){const f=eo(l,void 0,i);i&&f.setFastWeightInitDuringBuild(!0),o.add(f)}return o}set stopTraining(e){if(this.model==null)throw new ee("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new ee("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}Tm.className="Sequential";Te(Tm);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Tr=class extends $h{getConfig(){return{}}};class $Y extends Tr{apply(e,n=1){return O_e(e,n)}}$Y.className="elu";Te($Y);class IY extends Tr{apply(e){return GK(e)}}IY.className="selu";Te(IY);class NY extends Tr{apply(e){return eu(e)}}NY.className="relu";Te(NY);class OY extends Tr{apply(e){return ce(()=>xm(6,eu(e)))}}OY.className="relu6";Te(OY);class _Y extends Tr{apply(e){return e}}_Y.className="linear";Te(_Y);class RY extends Tr{apply(e){return kh(e)}}RY.className="sigmoid";Te(RY);class DY extends Tr{apply(e){return R_e(e)}}DY.className="hardSigmoid";Te(DY);class MY extends Tr{apply(e){return zg(e)}}MY.className="softplus";Te(MY);class PY extends Tr{apply(e){return __e(e)}}PY.className="softsign";Te(PY);class LY extends Tr{apply(e){return z1(e)}}LY.className="tanh";Te(LY);let ZR=class extends Tr{apply(e,n=-1){return tR(e,n)}};ZR.className="softmax";Te(ZR);class FY extends Tr{apply(e,n=-1){return LK(e,n)}}FY.className="logSoftmax";Te(FY);class BY extends Tr{apply(e){return ce(()=>ce(()=>{const n=Math.sqrt(2),r=ne(.5,Ae(1,_K(We(e,n))));return ne(e,r)}))}}BY.className="gelu";Te(BY);class zY extends Tr{apply(e){return ce(()=>ne(.5,ne(e,Ae(1,z1(ne(Sr(We(2,Math.PI)),Ae(e,ne(.044715,jc(e,3)))))))))}}zY.className="gelu_new";Te(zY);class jY extends Tr{apply(e){return ce(()=>ne(e,z1(zg(e))))}}jY.className="mish";Te(jY);class VY extends Tr{apply(e,n=1){return ce(()=>ne(kh(ne(e,n)),e))}}VY.className="swish";Te(VY);function dl(t){return t.getClassName()}function cE(t,e={}){return Hg(t,es.getMap().classNameMap,e,"activation")}function pl(t){if(t==null){const e={};return e.className="linear",e.config={},cE(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},cE(e)}else return t instanceof Tr?t:cE(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function qRe(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class UY extends $h{}class WY extends UY{constructor(e){super(),qRe(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return ce(()=>{let n=Yn([1]);return this.hasL1&&(n=Ae(n,Ue(ne(this.l1,Rr(e))))),this.hasL2&&(n=Ae(n,Ue(ne(this.l2,Xg(e))))),se(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}WY.className="L1L2";Te(WY);const UG={l1l2:"L1L2"};function Vt(t){return LR(t)}function WG(t,e={}){return Hg(t,es.getMap().classNameMap,e,"regularizer")}function tn(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in UG?UG[t]:t,config:{}};return WG(n)}else return t instanceof UY?t:WG(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class GY extends lt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=Qe(e);let r=eu(e);return this.maxValue!=null&&(r=Di(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}GY.className="ReLU";Te(GY);class qY extends lt{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Qe(e);return G_(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}qY.className="LeakyReLU";Te(qY);class HY extends lt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=en(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=tn(e.alphaRegularizer),this.alphaConstraint=zn(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new ee(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=Ct(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const i of this.sharedAxes)n[i-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let i=1;i<e.length;++i)r[i]=e[i];this.inputSpec=[new Ln({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=Qe(e),Z_(e,this.alpha.read())}getConfig(){const e={alphaInitializer:an(this.alphaInitializer),alphaRegularizer:Vt(this.alphaRegularizer),alphaConstraint:Bn(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}HY.className="PReLU";Te(HY);let KY=class extends lt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new rt(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Qe(e);return U1(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};KY.className="ELU";Te(KY);class XY extends lt{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=Qe(e);return ne(r,Re(Mi(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}XY.className="ThresholdedReLU";Te(XY);class YY extends lt{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new ZR().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return ce(()=>{let r=Qe(e);const i=n.mask;if(i!=null){const s=ne(Ke(Il(r.shape),Re(i,r.dtype)),At(-1e9));r=Ae(r,s)}return this.axis instanceof Array?this.axis.length>1?ua(Ke(r,FK(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}YY.className="Softmax";Te(YY);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Tf(t,e,n){if(typeof t=="number")return Wc(t,e);if(t.length!==e)throw new ee(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const i=t[r];if(!E_e(i))throw new ee(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${i}`)}return t}function Ns(t,e,n,r,i=1){if(t==null)return t;const s=e+(e-1)*(i-1);let a;return n==="same"?a=t:a=t-s+1,Math.floor((a+r-1)/r)}function Hs(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+hl([n-e,0]);else if(r==="same")t=t*e;else throw new ee(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function QR(t,e){return ce(()=>(Cn(e),e==="channelsFirst"?vt(t,[0,2,3,1]):t))}function ZY(t,e){return ce(()=>(Cn(e),e==="channelsFirst"?vt(t,[0,2,3,4,1]):t))}function HRe(t,e,n,r=1,i="valid",s,a=1){return ce(()=>{if(s==null&&(s=_s()),Cn(s),t.shape.length!==3)throw new ee(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new ee(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new ee(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(s==="channelsFirst"&&(t=vt(t,[0,2,1])),i==="causal")throw new rt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=EK(t,e,r,i==="same"?"same":"valid","NWC",a);return n!=null&&(o=Ps(o,n)),o})}function GG(t,e,n,r=[1,1],i="valid",s,a,o=null){return ce(()=>{if(s==null&&(s=_s()),Cn(s),t.rank!==3&&t.rank!==4)throw new ee(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new ee(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=QR(t,s);if(i==="causal")throw new rt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=tIe({x:l,filter:e,strides:r,pad:i==="same"?"same":"valid",dilations:a,dataFormat:"NHWC",bias:n,activation:o}),s==="channelsFirst"&&(l=vt(l,[0,3,1,2])),l})}function KRe(t,e,n,r=[1,1,1],i="valid",s,a){return ce(()=>{if(s==null&&(s=_s()),Cn(s),t.rank!==4&&t.rank!==5)throw new ee(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new ee(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let o=ZY(t,s);if(i==="causal")throw new rt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=Qke(o,e,r,i==="same"?"same":"valid","NDHWC",a),n!=null&&(o=Ps(o,n)),s==="channelsFirst"&&(o=vt(o,[0,4,1,2,3])),o})}class tw extends lt{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",tw.verifyArgs(n),this.rank=e,Qn(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new rt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Tf(n.kernelSize,e,"kernelSize"),this.strides=Tf(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,Pi(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Cn(this.dataFormat),this.activation=pl(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=en(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=zn(n.biasConstraint),this.biasRegularizer=tn(n.biasRegularizer),this.activityRegularizer=tn(n.activityRegularizer),this.dilationRate=Tf(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new ee(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new ee(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new ee(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(qs("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!FR(e.kernelSize,"number",1,3))throw new ee(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:dl(this.activation),useBias:this.useBias,biasInitializer:an(this.biasInitializer),biasRegularizer:Vt(this.biasRegularizer),activityRegularizer:Vt(this.activityRegularizer),biasConstraint:Bn(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class Ih extends tw{constructor(e,n){super(e,n),this.kernel=null,Ih.verifyArgs(n),this.filters=n.filters,Qn(this.filters,"filters"),this.kernelInitializer=en(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=zn(n.kernelConstraint),this.kernelRegularizer=tn(n.kernelRegularizer)}build(e){e=Ct(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ee(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],i=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return ce(()=>{e=Qe(e);let r;const i=this.bias==null?null:this.bias.read(),s=HX(this.activation.getClassName());if(s!=null&&this.rank===2)r=GG(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,s);else{if(this.rank===1)r=HRe(e,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=GG(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=KRe(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new rt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=Ct(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let s=0;s<r.length;++s){const a=Ns(r[s],this.kernelSize[s],this.padding,this.strides[s],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[s]);n.push(a)}let i=[e[0]];return this.dataFormat==="channelsLast"?(i=i.concat(n),i.push(this.filters)):(i.push(this.filters),i=i.concat(n)),i}getConfig(){const e={filters:this.filters,kernelInitializer:an(this.kernelInitializer),kernelRegularizer:Vt(this.kernelRegularizer),kernelConstraint:Bn(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new ee(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class Jg extends Ih{constructor(e){super(2,e),Jg.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!FR(e.kernelSize,"number",1,2))throw new ee(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}Jg.className="Conv2D";Te(Jg);class ey extends Ih{constructor(e){super(3,e),ey.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new ee(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}ey.className="Conv3D";Te(ey);class QY extends Jg{constructor(e){if(super(e),this.inputSpec=[new Ln({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new ee(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Ct(e),e.length!==4)throw new ee("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ee("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Ln({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return ce(()=>{let r=Qe(e);if(r.shape.length!==4)throw new ee(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,s=i[0];let a,o;this.dataFormat==="channelsFirst"?(a=2,o=3):(a=1,o=2);const l=i[a],c=i[o],f=this.kernelSize[0],h=this.kernelSize[1],p=this.strides[0],g=this.strides[1],y=Hs(l,p,f,this.padding),b=Hs(c,g,h,this.padding),v=[s,y,b,this.filters];this.dataFormat!=="channelsLast"&&(r=vt(r,[0,2,3,1]));let w=$K(r,this.kernel.read(),v,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(w=vt(w,[0,3,1,2])),this.bias!=null&&(w=Ps(w,this.bias.read(),this.dataFormat)),this.activation!=null&&(w=this.activation.apply(w)),w})}computeOutputShape(e){e=Ct(e);const n=e.slice();let r,i,s;this.dataFormat==="channelsFirst"?(r=1,i=2,s=3):(r=3,i=1,s=2);const a=this.kernelSize[0],o=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return n[r]=this.filters,n[i]=Hs(n[i],l,a,this.padding),n[s]=Hs(n[s],c,o,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}QY.className="Conv2DTranspose";Te(QY);class JY extends ey{constructor(e){if(super(e),this.inputSpec=[new Ln({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new ee(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Ct(e),e.length!==5)throw new ee("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ee("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Ln({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return ce(()=>{let r=Qe(e);if(r.shape.length!==5)throw new ee(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,s=i[0];let a,o,l;this.dataFormat==="channelsFirst"?(l=2,a=3,o=4):(l=1,a=2,o=3);const c=i[l],f=i[a],h=i[o],p=this.kernelSize[0],g=this.kernelSize[1],y=this.kernelSize[2],b=this.strides[0],v=this.strides[1],w=this.strides[2],S=Hs(c,b,p,this.padding),T=Hs(f,v,g,this.padding),A=Hs(h,w,y,this.padding),k=[s,S,T,A,this.filters];this.dataFormat!=="channelsLast"&&(r=vt(r,[0,2,3,4,1]));let E=tAe(r,this.kernel.read(),k,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(E=vt(E,[0,4,1,2,3])),this.bias!==null&&(E=Ps(E,this.bias.read(),this.dataFormat)),this.activation!==null&&(E=this.activation.apply(E)),E})}computeOutputShape(e){e=Ct(e);const n=e.slice();let r,i,s,a;this.dataFormat==="channelsFirst"?(r=1,i=2,s=3,a=4):(r=4,i=1,s=2,a=3);const o=this.kernelSize[0],l=this.kernelSize[1],c=this.kernelSize[2],f=this.strides[0],h=this.strides[1],p=this.strides[2];return n[r]=this.filters,n[i]=Hs(n[i],f,o,this.padding),n[s]=Hs(n[s],h,l,this.padding),n[a]=Hs(n[a],p,c,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}JY.className="Conv3DTranspose";Te(JY);class eZ extends Ih{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new ee("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new ee("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new ee(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=en(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=tn(n.depthwiseRegularizer),this.depthwiseConstraint=zn(n.depthwiseConstraint),this.pointwiseInitializer=en(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=tn(n.pointwiseRegularizer),this.pointwiseConstraint=zn(n.pointwiseConstraint)}build(e){if(e=Ct(e),e.length<this.rank+2)throw new ee(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new ee(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],i=this.kernelSize.concat([r,this.depthMultiplier]),s=[];for(let o=0;o<this.rank;++o)s.push(1);s.push(r*this.depthMultiplier,this.filters);const a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",i,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):this.bias=null,this.inputSpec=[new Ln({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return ce(()=>{e=Qe(e);let r;if(this.rank===1)throw new rt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=vt(e,[0,2,3,1])),r=qK(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=Ps(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=vt(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=an(this.depthwiseInitializer),e.pointwiseInitializer=an(this.pointwiseInitializer),e.depthwiseRegularizer=Vt(this.depthwiseRegularizer),e.pointwiseRegularizer=Vt(this.pointwiseRegularizer),e.depthwiseConstraint=Bn(this.depthwiseConstraint),e.pointwiseConstraint=Bn(this.pointwiseConstraint),e}}eZ.className="SeparableConv";class tZ extends eZ{constructor(e){super(2,e)}}tZ.className="SeparableConv2D";Te(tZ);class nw extends Ih{constructor(e){super(1,e),nw.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!FR(e.kernelSize,"number",1,1))throw new ee(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}nw.className="Conv1D";Te(nw);class nZ extends lt{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return ce(()=>{if(e=Qe(e),this.dataFormat==="channelsLast"){const r=Wv(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Wv(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=Wv(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Wv(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}nZ.className="Cropping2D";Te(nZ);class rZ extends lt{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Cn(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,T_e(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return ce(()=>{let r=Qe(e);const i=r.shape;if(this.dataFormat==="channelsFirst"){r=vt(r,[0,2,3,1]);const s=this.size[0]*i[2],a=this.size[1]*i[3],o=this.interpolation==="nearest"?Xa.resizeNearestNeighbor(r,[s,a]):Xa.resizeBilinear(r,[s,a]);return vt(o,[0,3,1,2])}else{const s=this.size[0]*i[1],a=this.size[1]*i[2];return this.interpolation==="nearest"?Xa.resizeNearestNeighbor(r,[s,a]):Xa.resizeBilinear(r,[s,a])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}rZ.className="UpSampling2D";Te(rZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function XRe(t,e,n=[1,1],r="valid",i,s){return ce(()=>{i==null&&(i=_s()),Cn(i);let a=QR(t,i);if(t.rank!==4)throw new ee(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new ee(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return a=j_(a,e,n,r==="same"?"same":"valid","NHWC",s),i==="channelsFirst"&&(a=vt(a,[0,3,1,2])),a})}class iZ extends tw{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=en(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=zn(e.depthwiseConstraint),this.depthwiseRegularizer=tn(e.depthwiseRegularizer)}build(e){if(e=Ct(e),e.length<4)throw new ee(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new ee(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],i=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",i,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return ce(()=>{e=Qe(e);let r=XRe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=Ps(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=Ct(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,s=Ns(n,this.kernelSize[0],this.padding,this.strides[0]),a=Ns(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],i,s,a]:[e[0],s,a,i]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=an(this.depthwiseInitializer),e.depthwiseRegularizer=Vt(this.depthwiseRegularizer),e.depthwiseConstraint=Bn(this.depthwiseRegularizer),e}}iZ.className="DepthwiseConv2D";Te(iZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function sZ(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new ee("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function i(s){return s==null||Array.isArray(s)?s:[s]}return e=i(e),n=i(n),{inputs:t,initialState:e,constants:n}}function aZ(t,e,n,r=!1,i,s,a=!1,o=!1){return ce(()=>{const l=e.shape.length;if(l<3)throw new ee(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(Os(2,l));e=vt(e,c),a&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i!=null&&(i=Re(Re(i,"bool"),"float32"),i.rank===l-1&&(i=Gr(i,-1)),i=vt(i,c)),r&&(e=Vc(e,0),i!=null&&(i=Vc(i,0)));const f=[];let h,p=n;const g=e.shape[0],y=Uc(e);let b;i!=null&&(b=Uc(i));for(let w=0;w<g;++w){const S=y[w],T=ce(()=>t(S,p));if(i==null)h=T[0],p=T[1];else{const A=ce(()=>{const k=b[w],E=Ke(ls(k),k),I=Ae(ne(T[0],k),ne(p[0],E)),N=p.map((_,D)=>Ae(ne(T[1][D],k),ne(_,E)));return{output:I,newStates:N}});h=A.output,p=A.newStates}o&&f.push(h)}let v;return o&&(v=co(f,1)),[h,v,p]})}class Ol extends lt{constructor(e){super(e);let n;if(e.cell==null)throw new ee("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new tD({cells:e.cell}):n=e.cell,n.stateSize==null)throw new ee("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Ln({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Os(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){PI(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let i;if(this.returnSequences?i=[e[0],e[1],r]:i=[e[0],r],this.returnState){const s=[];for(const a of n)s.push([e[0],a]);return[i].concat(s)}else return i}computeMask(e,n){return ce(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const i=this.states.map(s=>null);return[r].concat(i)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new rt("Constants support is not implemented in RNN yet.");PI(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new Ln({shape:[n,null,...r]});const i=[e[0]].concat(e.slice(2));this.cell.build(i);let s;if(Array.isArray(this.cell.stateSize)?s=this.cell.stateSize:s=[this.cell.stateSize],this.stateSpec!=null){if(!$t(this.stateSpec.map(a=>a.shape[a.shape.length-1]),s))throw new ee(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=s.map(a=>new Ln({shape:[null,a]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){ce(()=>{if(!this.stateful)throw new Gs("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new ee("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>Yn([r,i])):this.states_=[Yn([r,this.cell.stateSize])];else if(e==null)ft(this.states_),this.keptStates!=null&&(ft(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>Yn([r,i])):this.states_[0]=Yn([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ee(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):ft(this.states_);for(let i=0;i<this.states_.length;++i){const s=e[i],a=Array.isArray(this.cell.stateSize)?this.cell.stateSize[i]:this.cell.stateSize,o=[r,a];if(!$t(s.shape,o))throw new ee(`State ${i} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${s.shape}`);this.states_[i]=s}}this.states_=this.states_.map(i=>ia(i.clone()))})}apply(e,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const s=sZ(e,r,i,this.numConstants);e=s.inputs,r=s.initialState,i=s.constants;let a=[],o=[];if(r!=null){n.initialState=r,a=a.concat(r),this.stateSpec=[];for(const c of r)this.stateSpec.push(new Ln({shape:c.shape}));o=o.concat(this.stateSpec)}if(i!=null&&(n.constants=i,a=a.concat(i),this.numConstants=i.length),a[0]instanceof ha){const c=[e].concat(a),f=this.inputSpec.concat(o),h=this.inputSpec;this.inputSpec=f;const p=super.apply(c,n);return this.inputSpec=h,p}else return super.apply(e,n)}call(e,n){return ce(()=>{const r=n==null?null:n.mask,i=n==null?null:n.training;let s=n==null?null:n.initialState;e=Qe(e),s==null&&(this.stateful?s=this.states_:s=this.getInitialState(e));const a=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(s.length!==a)throw new ee(`RNN Layer has ${a} state(s) but was passed ${s.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const o={training:i},c=aZ((y,b)=>{const v=this.cell.call([y].concat(b),o);return[v[0],v.slice(1)]},e,s,this.goBackwards,r,null,this.unroll,this.returnSequences),f=c[0],h=c[1],p=c[2];this.stateful&&this.resetStates(p,i);const g=this.returnSequences?h:f;return this.returnState?[g].concat(p):g})}getInitialState(e){return ce(()=>{let n=Yn(e.shape);return n=Ue(n,[1,2]),n=Kg(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?DI(n,[1,r]):n):this.cell.stateSize>1?[DI(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===Ol.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const i=n.cell,s=eo(i,r);return new e(Object.assign(n,{cell:s}))}}Ol.className="RNN";Te(Ol);class rw extends lt{}class JR extends rw{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Qn(this.units,"units"),this.activation=pl(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=en(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=en(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=en(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=tn(e.kernelRegularizer),this.recurrentRegularizer=tn(e.recurrentRegularizer),this.biasRegularizer=tn(e.biasRegularizer),this.kernelConstraint=zn(e.kernelConstraint),this.recurrentConstraint=zn(e.recurrentConstraint),this.biasConstraint=zn(e.biasConstraint),this.dropout=eh([1,hl([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=eh([1,hl([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Ct(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return ce(()=>{if(e=e,e.length!==2)throw new ee(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const i=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ml({ones:()=>ls(e),rate:this.dropout,training:i,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ml({ones:()=>ls(r),rate:this.recurrentDropout,training:i,dropoutFunc:this.dropoutFunc}));let s;const a=this.dropoutMask,o=this.recurrentDropoutMask;a!=null?s=oa(ne(e,a),this.kernel.read()):s=oa(e,this.kernel.read()),this.bias!=null&&(s=Ps(s,this.bias.read())),o!=null&&(r=ne(r,o));let l=Ae(s,oa(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:dl(this.activation),useBias:this.useBias,kernelInitializer:an(this.kernelInitializer),recurrentInitializer:an(this.recurrentInitializer),biasInitializer:an(this.biasInitializer),kernelRegularizer:Vt(this.kernelRegularizer),recurrentRegularizer:Vt(this.recurrentRegularizer),biasRegularizer:Vt(this.biasRegularizer),activityRegularizer:Vt(this.activityRegularizer),kernelConstraint:Bn(this.kernelConstraint),recurrentConstraint:Bn(this.recurrentConstraint),biasConstraint:Bn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}JR.className="SimpleRNNCell";Te(JR);class oZ extends Ol{constructor(e){e.cell=new JR(e),super(e)}call(e,n){return ce(()=>{this.cell.dropoutMask!=null&&(ft(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ft(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,n){return new e(n)}}oZ.className="SimpleRNN";Te(oZ);class eD extends rw{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new ee("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Qn(this.units,"units"),this.activation=pl(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=pl(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=en(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=en(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=en(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=tn(e.kernelRegularizer),this.recurrentRegularizer=tn(e.recurrentRegularizer),this.biasRegularizer=tn(e.biasRegularizer),this.kernelConstraint=zn(e.kernelConstraint),this.recurrentConstraint=zn(e.recurrentConstraint),this.biasConstraint=zn(e.biasConstraint),this.dropout=eh([1,hl([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=eh([1,hl([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Ct(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return ce(()=>{if(e=e,e.length!==2)throw new ee(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let i=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ml({ones:()=>ls(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ml({ones:()=>ls(i),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,a=this.recurrentDropoutMask;let o,l,c;0<this.dropout&&this.dropout<1&&(e=ne(e,s[0]));let f=oa(e,this.kernel.read());this.useBias&&(f=Ps(f,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(i=ne(i,a[0]));const h=this.recurrentKernel.read(),[p,g]=_i(h,[2*this.units,this.units],h.rank-1),y=oa(i,p),[b,v,w]=_i(f,3,f.rank-1),[S,T]=_i(y,2,y.rank-1);o=this.recurrentActivation.apply(Ae(b,S)),l=this.recurrentActivation.apply(Ae(v,T));const A=oa(ne(l,i),g);c=this.activation.apply(Ae(w,A));const k=Ae(ne(o,i),ne(Ae(1,xn(o)),c));return[k,k]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:dl(this.activation),recurrentActivation:dl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:an(this.kernelInitializer),recurrentInitializer:an(this.recurrentInitializer),biasInitializer:an(this.biasInitializer),kernelRegularizer:Vt(this.kernelRegularizer),recurrentRegularizer:Vt(this.recurrentRegularizer),biasRegularizer:Vt(this.biasRegularizer),activityRegularizer:Vt(this.activityRegularizer),kernelConstraint:Bn(this.kernelConstraint),recurrentConstraint:Bn(this.recurrentConstraint),biasConstraint:Bn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}eD.className="GRUCell";Te(eD);class lZ extends Ol{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new eD(e),super(e)}call(e,n){return ce(()=>{this.cell.dropoutMask!=null&&(ft(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ft(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}lZ.className="GRU";Te(lZ);class iw extends rw{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Qn(this.units,"units"),this.activation=pl(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=pl(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=en(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=en(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=en(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=tn(e.kernelRegularizer),this.recurrentRegularizer=tn(e.recurrentRegularizer),this.biasRegularizer=tn(e.biasRegularizer),this.kernelConstraint=zn(e.kernelConstraint),this.recurrentConstraint=zn(e.recurrentConstraint),this.biasConstraint=zn(e.biasConstraint),this.dropout=eh([1,hl([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=eh([1,hl([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=Ct(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let i;if(this.useBias){if(this.unitForgetBias){const s=this.biasInitializer,a=this.units;i=new(n=class extends fs{apply(l,c){const f=s.apply([a]),h=new zR().apply([a]),p=s.apply([a*2]);return $G($G(f,h),p)}},n.className="CustomInit",n)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,i,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return ce(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new ee(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let i=e[1];const s=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ml({ones:()=>ls(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ml({ones:()=>ls(i),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,o=this.recurrentDropoutMask;let l,c,f,h;0<this.dropout&&this.dropout<1&&(e=ne(e,a[0]));let p=oa(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(i=ne(i,o[0])),p=Ae(p,oa(i,this.recurrentKernel.read())),this.useBias&&(p=Ps(p,this.bias.read()));const[g,y,b,v]=_i(p,4,p.rank-1);l=this.recurrentActivation.apply(g),c=this.recurrentActivation.apply(y),f=Ae(ne(c,s),ne(l,this.activation.apply(b))),h=this.recurrentActivation.apply(v);const w=ne(h,this.activation.apply(f));return[w,w,f]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:dl(this.activation),recurrentActivation:dl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:an(this.kernelInitializer),recurrentInitializer:an(this.recurrentInitializer),biasInitializer:an(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Vt(this.kernelRegularizer),recurrentRegularizer:Vt(this.recurrentRegularizer),biasRegularizer:Vt(this.biasRegularizer),activityRegularizer:Vt(this.activityRegularizer),kernelConstraint:Bn(this.kernelConstraint),recurrentConstraint:Bn(this.recurrentConstraint),biasConstraint:Bn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}iw.className="LSTMCell";Te(iw);class cZ extends Ol{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new iw(e),super(e)}call(e,n){return ce(()=>{this.cell.dropoutMask!=null&&(ft(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ft(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}cZ.className="LSTM";Te(cZ);class tD extends rw{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return ce(()=>{e=e;let r=e.slice(1);const i=[];for(const o of this.cells.slice().reverse())Array.isArray(o.stateSize)?i.push(r.splice(0,o.stateSize.length)):i.push(r.splice(0,1));i.reverse();const s=[];let a;for(let o=0;o<this.cells.length;++o){const l=this.cells[o];r=i[o],o===0?a=[e[0]].concat(r):a=[a[0]].concat(r),a=l.call(a,n),s.push(a.slice(1))}r=[];for(const o of s.slice().reverse())r.push(...o);return[a[0]].concat(r)})}build(e){PI(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,i)=>{Ec(`RNNCell_${i}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=s=>({className:s.getClassName(),config:s.getConfig()}),i={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),i)}static fromConfig(e,n,r={}){const i=[];for(const s of n.cells)i.push(eo(s,r));return new e({cells:i})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return LI(e)}setWeights(e){const n=[];for(const r of this.cells){const i=r.weights.length,s=e.splice(i);for(let a=0;a<r.weights.length;++a)n.push([r.weights[a],s[a]])}HR(n)}}tD.className="StackedRNNCells";Te(tD);function ml(t){const{ones:e,rate:n,training:r=!1,count:i=1,dropoutFunc:s}=t,a=()=>s!=null?s(e(),n):eY(e(),n),o=()=>Yg(a,e,r);return!i||i<=1?ia(o().clone()):Array(i).fill(void 0).map(o).map(c=>ia(c.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var YRe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class uZ extends Ol{constructor(e){if(e.unroll)throw new rt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new rt("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Ln({ndim:5})]}call(e,n){return ce(()=>{if(this.cell.dropoutMask!=null&&(ft(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ft(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new ee("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return ce(()=>{const{stateSize:n}=this.cell,r=e.shape,i=this.computeSingleOutputShape(r),s=[i[0],...i.slice(2)],a=Yn(s);return Array.isArray(n)?Array(n.length).fill(a):[a]})}resetStates(e,n=!1){ce(()=>{if(!this.stateful)throw new Gs("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,i=this.computeSingleOutputShape(r),s=[i[0],...i.slice(2)];if(r[0]==null)throw new ee("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Yn(s)):this.states_=[Yn(s)];else if(e==null)ft(this.states_),this.keptStates!=null&&(ft(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Yn(s)):this.states_[0]=Yn(s);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ee(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):ft(this.states_);for(let o=0;o<this.states_.length;++o){const l=e[o],c=s;if(!$t(l.shape,c))throw new ee(`State ${o} is incompatible with layer ${this.name}: expected shape=${c}, received shape=${l.shape}`);this.states_[o]=l}}this.states_=this.states_.map(o=>ia(o.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:i,padding:s,strides:a,dilationRate:o}=this.cell,l=n==="channelsFirst",c=e[l?3:2],f=e[l?4:3],h=Ns(c,i[0],s,a[0],o[0]),p=Ns(f,i[1],s,a[1],o[1]);return[...e.slice(0,2),...l?[r,h,p]:[h,p,r]]}}uZ.className="ConvRNN2D";class nD extends iw{constructor(e){const{filters:n,kernelSize:r,strides:i,padding:s,dataFormat:a,dilationRate:o}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,Qn(this.filters,"filters"),this.kernelSize=Tf(r,2,"kernelSize"),this.kernelSize.forEach(l=>Qn(l,"kernelSize")),this.strides=Tf(i||1,2,"strides"),this.strides.forEach(l=>Qn(l,"strides")),this.padding=s||"valid",Pi(this.padding),this.dataFormat=a||"channelsLast",Cn(this.dataFormat),this.dilationRate=Tf(o||1,2,"dilationRate"),this.dilationRate.forEach(l=>Qn(l,"dilationRate"))}build(e){var n;e=Ct(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new ee(`The channel dimension of the input should be defined. Found ${e[r]}`);const i=e[r],s=4,a=this.kernelSize.concat([i,this.filters*s]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const o=this.kernelSize.concat([this.filters,this.filters*s]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const c=this.biasInitializer,f=this.filters;l=new(n=class extends fs{apply(p,g){const y=c.apply([f]),b=Il([f]),v=c.apply([f*2]);return BR([y,b,v])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*s],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return ce(()=>{if(e.length!==3)throw new ee(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,i=e[0],s=e[1],a=e[2],o=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ml({ones:()=>ls(i),rate:this.dropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,c=(L,H,X)=>!H||!H[X]?L:ne(H[X],L);let f=c(i,l,0),h=c(i,l,1),p=c(i,l,2),g=c(i,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ml({ones:()=>ls(s),rate:this.recurrentDropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const y=this.recurrentDropoutMask;let b=c(s,y,0),v=c(s,y,1),w=c(s,y,2),S=c(s,y,3);const T=3,[A,k,E,I]=_i(this.kernel.read(),o,T),[N,_,D,O]=this.useBias?_i(this.bias.read(),o):[null,null,null,null];f=this.inputConv(f,A,N,this.padding),h=this.inputConv(h,k,_,this.padding),p=this.inputConv(p,E,D,this.padding),g=this.inputConv(g,I,O,this.padding);const[P,z,W,U]=_i(this.recurrentKernel.read(),o,T);b=this.recurrentConv(b,P),v=this.recurrentConv(v,z),w=this.recurrentConv(w,W),S=this.recurrentConv(S,U);const R=this.recurrentActivation.apply(Ae(f,b)),F=this.recurrentActivation.apply(Ae(h,v)),B=Ae(ne(F,a),ne(R,this.activation.apply(Ae(p,w)))),K=ne(this.recurrentActivation.apply(Ae(g,S)),this.activation.apply(B));return[K,K,B]})}getConfig(){const e=super.getConfig(),{units:n}=e,r=YRe(e,["units"]),i={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},r),i)}inputConv(e,n,r,i){const s=zc(e,n,this.strides,i||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?Ps(s,r,this.dataFormat):s}recurrentConv(e,n){return zc(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}nD.className="ConvLSTM2DCell";Te(nD);class fZ extends uZ{constructor(e){const n=new nD(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}fZ.className="ConvLSTM2D";Te(fZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class rD extends lt{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let i=0;i<this.noiseShape.length;++i)r.push(this.noiseShape[i]==null?n[i]:this.noiseShape[i]);return r}call(e,n){return ce(()=>{this.invokeCallHook(e,n);const r=Qe(e);if(0<this.rate&&this.rate<1){const i=n.training==null?!1:n.training,s=this.getNoiseShape(r);return Yg(()=>eY(r,this.rate,s,this.seed),()=>r,i)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}rD.className="Dropout";Te(rD);class hZ extends rD{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}hZ.className="SpatialDropout1D";Te(hZ);class dZ extends lt{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,Qn(this.units,"units"),this.activation=pl(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=en(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=en(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=zn(e.kernelConstraint),this.biasConstraint=zn(e.biasConstraint),this.kernelRegularizer=tn(e.kernelRegularizer),this.biasRegularizer=tn(e.biasRegularizer),this.activityRegularizer=tn(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=Ct(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=Ct(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return ce(()=>{this.invokeCallHook(e,n);const r=Qe(e),i=HX(this.activation.getClassName());let s;return i!=null?s=oa(r,this.kernel.read(),i,this.bias?this.bias.read():null):(s=oa(r,this.kernel.read()),this.bias!=null&&(s=Ps(s,this.bias.read())),this.activation!=null&&(s=this.activation.apply(s))),s})}getConfig(){const e={units:this.units,activation:dl(this.activation),useBias:this.useBias,kernelInitializer:an(this.kernelInitializer),biasInitializer:an(this.biasInitializer),kernelRegularizer:Vt(this.kernelRegularizer),biasRegularizer:Vt(this.biasRegularizer),activityRegularizer:Vt(this.activityRegularizer),kernelConstraint:Bn(this.kernelConstraint),biasConstraint:Bn(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}dZ.className="Dense";Te(dZ);class pZ extends lt{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Ct(e);for(const n of e.slice(1))if(n==null)throw new ee(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],ll(e,1)]}call(e,n){return ce(()=>{this.invokeCallHook(e,n);let r=Qe(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const i=[0];for(let s=2;s<r.rank;++s)i.push(s);i.push(1),r=vt(r,i)}return N_e(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}pZ.className="Flatten";Te(pZ);class mZ extends lt{constructor(e){super(e),this.supportsMasking=!0,this.activation=pl(e.activation)}call(e,n){return ce(()=>{this.invokeCallHook(e,n);const r=Qe(e);return this.activation.apply(r)})}getConfig(){const e={activation:dl(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}mZ.className="Activation";Te(mZ);class gZ extends lt{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return ce(()=>(e=Qe(e),$_e(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}gZ.className="RepeatVector";Te(gZ);class yZ extends lt{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",i=n.slice();let s=1,a=null;for(let l=0;l<i.length;++l){const c=i[l];if(this.isUnknown(c))if(a===null)a=l;else throw new ee("Can only specifiy one unknown dimension.");else s*=c}const o=ll(e);if(a!==null){if(s===0||o%s!==0)throw new ee(r);i[a]=o/s}else if(o!==s)throw new ee(r);return i}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return ce(()=>{this.invokeCallHook(e,n);const r=Qe(e),i=r.shape,s=i.slice(0,1).concat(this.fixUnknownDimension(i.slice(1),this.targetShape));return se(r,s)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}yZ.className="Reshape";Te(yZ);class vZ extends lt{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=Os(1,e.dims.length+1);if(!$t(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Ln({ndim:this.dims.length+1})]}computeOutputShape(e){e=Ct(e);const n=e.slice();return this.dims.forEach((r,i)=>{n[i+1]=e[r]}),n}call(e,n){return vt(Qe(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}vZ.className="Permute";Te(vZ);class bZ extends lt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=Qe(e);return EI(Nb(r,this.maskValue),-1)}call(e,n){return ce(()=>{this.invokeCallHook(e,n);const r=Qe(e),a=EI(Nb(r,this.maskValue),-1,!0);return ne(r,Re(a,r.dtype))})}}bZ.className="Masking";Te(bZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class xZ extends lt{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(Rt(e.inputLength))}this.inputDim=e.inputDim,Qn(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Qn(this.outputDim,"outputDim"),this.embeddingsInitializer=en(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=tn(e.embeddingsRegularizer),this.activityRegularizer=tn(e.activityRegularizer),this.embeddingsConstraint=zn(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return ce(()=>this.maskZero?(e=Qe(e),Nb(e,bt(e))):null)}computeOutputShape(e){if(e=Ct(e),this.inputLength==null)return[...e,this.outputDim];const n=Rt(this.inputLength);if(n.length!==e.length-1)throw new ee(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let i=0;i<n.length;++i){const s=n[i],a=e[i+1];if(s!=null&&a!=null&&s!==a)throw new ee(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);s==null&&(n[r]=a),r++}}return[e[0],...n,this.outputDim]}call(e,n){return ce(()=>{this.invokeCallHook(e,n);let r=Qe(e);r.dtype!=="int32"&&(r=aa(r,"int32"));const i=JX(this.embeddings.read(),se(r,[r.size]));return se(i,Ct(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:an(this.embeddingsInitializer),embeddingsRegularizer:Vt(this.embeddingsRegularizer),activityRegularizer:Vt(this.activityRegularizer),embeddingsConstraint:Bn(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}xZ.className="Embedding";Te(xZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ru extends lt{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new rt}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let i=0;i<n.length;++i){const s=e[e.length-n.length+i],a=n[i];if(s==null||a==null||s<0||a<0)r.push(null);else if(s===1)r.push(a);else if(a===1)r.push(s);else{if(s!==a)throw new ee("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(s)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Ct(e)]),e=e,e.length<2)throw new ee(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const s of e)s!=null&&s[0]!==null&&n.push(s[0]);if(n=ol(n),n.length>1)throw new ee(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let s=1;s<e.length;++s){const a=e[s]==null?null:e[s].slice(1);r=this.computeElementwiseOpOutputShape(r,a)}const i=e.map(s=>s.length);e.indexOf(null)===-1&&ol(i).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return ce(()=>{if(e=e,this.reshapeRequired){const r=[],i=e.map(s=>s.rank);if(i.indexOf(null)===-1){const s=hl(i);for(let a of e){const o=a.rank;for(let l=0;l<s-o;++l)a=Kg(a,1);r.push(a)}return this.mergeFunction(r)}else{let s=!1;for(const l of e){const c=l.rank;if(c==null){const f=l.shape,h=f[0],p=f.slice(1).concat([h]);let g=se(l,[h].concat(ll(f.slice(1))));g=vt(g,[1,0]),g=se(g,p),r.push(g),s=!0}else if(c>1){const f=Os(1,c).concat([0]);r.push(vt(l,f)),s=!0}else r.push(l)}let a=this.mergeFunction(r);const o=a.rank;if(s){if(o==null){const l=a.shape,c=l.length,f=l[c-1],h=[f].concat(l.slice(0,l.length-1));a=se(vt(se(a,[-1,f]),[1,0]),h)}else if(o>1){const l=[o-1].concat(Os(0,o-1));a=vt(a,l)}}return a}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let i=1;i<e.length;++i){const s=e[i]==null?null:e[i].slice(1);n=this.computeElementwiseOpOutputShape(n,s)}let r=[];for(const i of e)i!=null&&i[0]!==null&&r.push(i[0]);return r=ol(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return ce(()=>{if(n==null)return null;if(!Array.isArray(n))throw new ee("`mask` should be an Array");if(!Array.isArray(e))throw new ee("`inputs` should be an Array");if(n.length!==e.length)throw new ee(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(i=>i==null))return null;n=n.map(i=>i==null?i:Gr(i,0));let r=n[0];for(let i=1;i<n.length-1;++i)r=lo(r,n[i]);return r})}}class wZ extends ru{constructor(e){super(e)}mergeFunction(e){return ce(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Ae(n,e[r]);return n})}}wZ.className="Add";Te(wZ);class SZ extends ru{constructor(e){super(e)}mergeFunction(e){return ce(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=ne(n,e[r]);return n})}}SZ.className="Multiply";Te(SZ);class CZ extends ru{constructor(e){super(e)}mergeFunction(e){return ce(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Ae(n,e[r]);return ne(1/e.length,n)})}}CZ.className="Average";Te(CZ);class TZ extends ru{constructor(e){super(e)}mergeFunction(e){return ce(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=$l(n,e[r]);return n})}}TZ.className="Maximum";Te(TZ);class kZ extends ru{constructor(e){super(e)}mergeFunction(e){return ce(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=xm(n,e[r]);return n})}}kZ.className="Minimum";Te(kZ);class AZ extends ru{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new ee("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const i of e)if(i!=null){n=!1;break}if(n)return;const r=[];for(let i=0;i<e.length;++i){const s=e[i].slice();s.splice(this.axis,1);let a=!1;for(const o of r)if($t(o,s)){a=!0;break}a||r.push(s)}if(r.length>1)throw new ee("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return ce(()=>BR(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new ee("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),i=this.axis<0?r.length+this.axis:this.axis;for(const s of n.slice(1)){if(r[i]==null||s[i]==null){r[i]=null;break}r[i]+=s[i]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new ee("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new ee("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new ee(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return ce(()=>{let r=!0;if(n.forEach(a=>{if(a!=null){r=!1;return}}),r)return null;const i=[];for(let a=0;a<e.length;++a)n[a]==null?i.push(Re(ls(e[a]),"bool")):n[a].rank<e[a].rank?i.push(Gr(n[a],-1)):i.push(n[a]);const s=Xr(i,this.axis);return AK(s,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}AZ.className="Concatenate";Te(AZ);function tp(t,e){for(;t<0;)t+=e;return t}function ZRe(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new rt("batchDot is not implemented for tensors of 4D or higher rank yet");if(G(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),G(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new rt("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,i=e.shape.length;n==null&&(n=[r-1,i-2]);const s=n;return ce(()=>{let a;if(r>i){a=r-i;const l=[];for(let c=0;c<a;++c)l.push(1);e=se(e,e.shape.concat(l))}else if(i>r){a=i-r;const l=[];for(let c=0;c<a;++c)l.push(1);t=se(t,t.shape.concat(l))}else a=0;let o;if(t.shape.length===2&&e.shape.length===2)s[0]===s[1]?o=Ue(ne(t,e),s[0]):o=Ue(ne(vt(t,[1,0]),e),s[1]);else{const l=s[0]!==t.shape.length-1,c=s[1]===e.shape.length-1;o=kt(t,e,l,c)}if(a>0){let l;r>i?l=r+i-3:l=r-1;const c=[];for(let f=l;f<l+a;++f)c.push(f);o=Vg(o,c)}return o.shape.length===1&&(o=Gr(o,1)),o})}class EZ extends ru{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){G(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new rt("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);if(n[i[0]]!==r[i[1]])throw new ee(`Dimension incompatibility: ${n[i[0]]} !== ${r[i[1]]}`)}mergeFunction(e){if(e.length!==2)throw new ee(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],i;return Array.isArray(this.axes)?i=this.axes.map((s,a)=>tp(s,e[a].shape.length)):i=[tp(this.axes,n.shape.length),tp(this.axes,r.shape.length)],this.normalize&&(n=Lb(n,i[0]),r=Lb(r,i[1])),ZRe(n,r,i)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[tp(this.axes,e.length),tp(this.axes,n.length)],r}computeOutputShape(e){G(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new rt("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);n.splice(i[0],1),r.splice(i[1],1),r.splice(0,1);const s=n.concat(r);return s.length===1&&s.push(1),s}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}EZ.className="Dot";Te(EZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class $Z extends lt{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return ce(()=>{this.invokeCallHook(e,n);const r=Qe(e);return Yg(()=>Ae(Z1(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}$Z.className="GaussianNoise";Te($Z);class IZ extends lt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return ce(()=>{this.invokeCallHook(e,n);const r=Qe(e);return this.rate>0&&this.rate<1?Yg(()=>{const s=Math.sqrt(this.rate/(1-this.rate));return ne(r,Z1(r.shape,1,s))},()=>r,n.training||!1):r})}}IZ.className="GaussianDropout";Te(IZ);class NZ extends lt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Qe(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return ce(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return Yg(()=>{const s=Qe(e),o=-1.6732632423543772*1.0507009873554805;let l=Jc(jg(r),this.rate);l=aa(l,"float32");const c=((1-this.rate)*(1+this.rate*o**2))**-.5,f=-c*o*this.rate,h=Ae(ne(s,l),ne(Ae(l,-1),o));return Ae(ne(h,c),f)},()=>Qe(e),n.training||!1)}return e})}}NZ.className="AlphaDropout";Te(NZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function km(t,e,n,r,i,s=.001){let a;if(t.rank===2)a=$ke(t,e,n,r,i,s);else if(t.rank===3)a=Nke(t,e,n,r,i,s);else if(t.rank===4)a=_ke(t,e,n,r,i,s);else throw new rt(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return a}function QRe(t,e,n,r,i=.001){return ce(()=>{const s=K_(t,r),a=s.mean,o=s.variance;return[km(t,a,o,n,e,i),a,o]})}function JRe(t,e,n,r,i=.001){return ce(()=>{const s=K_(t,r),a=s.mean,o=s.variance,l=[];for(const y of Os(0,t.rank))r.indexOf(y)!==-1?l.push(1):l.push(t.shape[y]);const c=se(a,l),f=se(o,l),h=e==null?null:se(e,l),p=n==null?null:se(n,l);return[km(t,c,f,p,h,i),a,o]})}function eDe(t,e,n,r,i=.001){return $t(r.slice().sort(),Os(0,t.rank-1))?QRe(t,e,n,r,i):JRe(t,e,n,r,i)}class OZ extends lt{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=en(e.betaInitializer||"zeros"),this.gammaInitializer=en(e.gammaInitializer||"ones"),this.movingMeanInitializer=en(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=en(e.movingVarianceInitializer||"ones"),this.betaConstraint=zn(e.betaConstraint),this.gammaConstraint=zn(e.gammaConstraint),this.betaRegularizer=tn(e.betaRegularizer),this.gammaRegularizer=tn(e.gammaRegularizer)}build(e){e=Ct(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new ee(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Ln({ndim:e.length,axes:{[n]:r}})];const i=[r];this.scale&&(this.gamma=this.addWeight("gamma",i,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",i,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",i,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",i,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return ce(()=>{const r=n.training==null?!1:n.training,i=Qe(e),s=i.shape,a=s.length,o=Os(0,a),l=this.axis>=0?this.axis:this.axis+a;o.splice(l,1);const c=Wc(1,a);c[l]=s[l];const f=o.slice();f.sort();const h=!$t(f,Os(0,a).slice(0,a-1)),p=()=>{if(h){const S=se(this.movingMean.read(),c),T=se(this.movingVariance.read(),c),A=this.center?se(this.beta.read(),c):null,k=this.scale?se(this.gamma.read(),c):null;return km(i,S,T,A,k,this.epsilon)}else return km(i,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return p();const[g,y,b]=eDe(i,this.gamma.read(),this.beta.read(),o,this.epsilon),v=(S,T,A)=>{ce(()=>{const k=1-A,E=S.read(),I=ne(Ke(E,T),k);S.write(Ke(E,I))})};return(()=>{v(this.movingMean,y,this.momentum),v(this.movingVariance,b,this.momentum)})(),g})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:an(this.betaInitializer),gammaInitializer:an(this.gammaInitializer),movingMeanInitializer:an(this.movingMeanInitializer),movingVarianceInitializer:an(this.movingVarianceInitializer),betaRegularizer:Vt(this.betaRegularizer),gammaRegularizer:Vt(this.gammaRegularizer),betaConstraint:Bn(this.betaConstraint),gammaConstraint:Bn(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}OZ.className="BatchNormalization";Te(OZ);class _Z extends lt{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=en(e.betaInitializer||"zeros"),this.gammaInitializer=en(e.gammaInitializer||"ones"),this.betaRegularizer=tn(e.betaRegularizer),this.gammaRegularizer=tn(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=Ct(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let s=0;s<this.axis.length;++s)this.axis[s]<0&&(this.axis[s]+=n);for(const s of this.axis)if(s<0||s>=n)throw new Error(`Invalid axis: ${s}`);if(this.axis.length!==ol(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(s=>e[s]),i=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,i):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,i):this.beta=null,this.built=!0}call(e,n){const r=Qe(e),i=r.shape,s=i.length;return ce(()=>{let{mean:o,variance:l}=K_(r,this.axis,!0);const c=Wc(1,s);for(const b of this.axis)c[b]=i[b];const f=b=>b!=null&&b.shape.length!==s?se(b,c):b;let h=this.scale?f(this.gamma.read()):null,p=this.center?f(this.beta.read()):null;const g=[],y=[];for(let b=0;b<s;++b)this.axis.indexOf(b)!==-1?(g.push(i[b]),y.push(1)):(g.push(1),y.push(i[b]));return o=As(o,g),l=As(l,g),h!=null&&(h=As(h,y)),p!=null&&(p=As(p,y)),km(r,o,l,p,h,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:an(this.betaInitializer),gammaInitializer:an(this.gammaInitializer),betaRegularizer:Vt(this.betaRegularizer),gammaRegularizer:Vt(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}_Z.className="LayerNormalization";Te(_Z);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function tDe(t,e,n){return ce(()=>{if(t.rank!==4)throw new ee(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new ee("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=_s()),n!=="channelsLast"&&n!=="channelsFirst")throw new ee(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],X_(t,r)})}class RZ extends lt{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?_s():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new ee(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new ee(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new ee(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new Ln({ndim:4})]}computeOutputShape(e){e=Ct(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return ce(()=>tDe(Qe(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}RZ.className="ZeroPadding2D";Te(RZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function sw(t,e,n,r,i,s){return ce(()=>{Cn(i),XX(s),Pi(r),n==null&&(n=[1,1]),r==null&&(r="valid"),i==null&&(i=_s()),s==null&&(s="max"),t=QR(t,i);let a;const o=r==="same"?"same":"valid";return s==="max"?a=H_(t,e,n,o):a=L_(t,e,n,o),i==="channelsFirst"&&(a=vt(a,[0,3,1,2])),a})}function DZ(t,e,n,r,i,s){return ce(()=>{Cn(i),XX(s),Pi(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),i==null&&(i=_s()),s==null&&(s="max"),t=ZY(t,i);let a;const o=r==="same"?"same":"valid";return s==="max"?a=gEe(t,e,n,o):a=vke(t,e,n,o),i==="channelsFirst"&&(a=vt(a,[0,4,1,2,3])),a})}class MZ extends lt{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new ee(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(Qn(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new ee(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);Qn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,Pi(this.padding),this.inputSpec=[new Ln({ndim:3})]}computeOutputShape(e){e=Ct(e);const n=Ns(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return ce(()=>{this.invokeCallHook(e,n),e=Kg(Qe(e),2);const r=this.poolingFunction(Qe(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Vg(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class PZ extends MZ{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Cn(s),Pi(i),sw(e,n,r,i,s,"max")}}PZ.className="MaxPooling1D";Te(PZ);class LZ extends MZ{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Cn(s),Pi(i),sw(e,n,r,i,s,"avg")}}LZ.className="AveragePooling1D";Te(LZ);class FZ extends lt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new ee(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Qn(this.poolSize,"poolSize"),Qn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Cn(this.dataFormat),Pi(this.padding),this.inputSpec=[new Ln({ndim:4})]}computeOutputShape(e){e=Ct(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=Ns(n,this.poolSize[0],this.padding,this.strides[0]),r=Ns(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return ce(()=>(this.invokeCallHook(e,n),this.poolingFunction(Qe(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class BZ extends FZ{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Cn(s),Pi(i),sw(e,n,r,i,s,"max")}}BZ.className="MaxPooling2D";Te(BZ);class zZ extends FZ{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Cn(s),Pi(i),sw(e,n,r,i,s,"avg")}}zZ.className="AveragePooling2D";Te(zZ);class jZ extends lt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new ee(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Qn(this.poolSize,"poolSize"),Qn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Cn(this.dataFormat),Pi(this.padding),this.inputSpec=[new Ln({ndim:5})]}computeOutputShape(e){e=Ct(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=Ns(n,this.poolSize[0],this.padding,this.strides[0]),r=Ns(r,this.poolSize[1],this.padding,this.strides[1]),i=Ns(i,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,i]:[e[0],n,r,i,e[4]]}call(e,n){return ce(()=>(this.invokeCallHook(e,n),this.poolingFunction(Qe(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class VZ extends jZ{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Cn(s),Pi(i),DZ(e,n,r,i,s,"max")}}VZ.className="MaxPooling3D";Te(VZ);class UZ extends jZ{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Cn(s),Pi(i),DZ(e,n,r,i,s,"avg")}}UZ.className="AveragePooling3D";Te(UZ);class WZ extends lt{constructor(e){super(e),this.inputSpec=[new Ln({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new rt}}class GZ extends WZ{constructor(e){super(e||{})}call(e,n){return ce(()=>{const r=Qe(e);return Nn(r,1)})}}GZ.className="GlobalAveragePooling1D";Te(GZ);class qZ extends WZ{constructor(e){super(e||{})}call(e,n){return ce(()=>{const r=Qe(e);return Is(r,1)})}}qZ.className="GlobalMaxPooling1D";Te(qZ);class HZ extends lt{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Cn(this.dataFormat),this.inputSpec=[new Ln({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new rt}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class KZ extends HZ{call(e,n){return ce(()=>{const r=Qe(e);return this.dataFormat==="channelsLast"?Nn(r,[1,2]):Nn(r,[2,3])})}}KZ.className="GlobalAveragePooling2D";Te(KZ);class XZ extends HZ{call(e,n){return ce(()=>{const r=Qe(e);return this.dataFormat==="channelsLast"?Is(r,[1,2]):Is(r,[2,3])})}}XZ.className="GlobalMaxPooling2D";Te(XZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class YZ extends lt{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const i=n.layer,s=eo(i,r);delete n.layer;const a={layer:s};return Object.assign(a,n),new e(a)}}class ZZ extends YZ{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=Ct(e),e.length<3)throw new ee(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=Ct(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),i=e[1];return[r[0],i].concat(r.slice(1))}call(e,n){return ce(()=>(e=Qe(e),aZ((a,o)=>[Qe(this.layer.call(a,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}ZZ.className="TimeDistributed";Te(ZZ);function nDe(t){nu(C_e,"BidirectionalMergeMode",t)}const rDe="concat";class QZ extends YZ{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=eo(r),n.goBackwards=n.goBackwards!==!0;const i={};if(i.className=e.layer.getClassName(),i.config=n,this.backwardLayer=eo(i),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?rDe:e.mergeMode,nDe(this.mergeMode),e.weights)throw new rt("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,i,s;return this.returnState&&(s=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,i=[r]):this.mergeMode==null?i=[r,r.slice()]:i=[r],this.returnState?this.mergeMode==null?i.concat(s).concat(s.slice()):[r].concat(s).concat(s.slice()):qr(i)}apply(e,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const s=sZ(e,r,i,this.numConstants);if(e=s.inputs,r=s.initialState,i=s.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&i==null)return super.apply(e,n);const a=[],o=[];if(r!=null){const c=r.length;if(c%2>0)throw new ee("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,a.push(...r);const f=r.map(h=>new Ln({shape:h.shape}));this.forwardLayer.stateSpec=f.slice(0,c/2),this.backwardLayer.stateSpec=f.slice(c/2),o.push(...f)}if(i!=null)throw new rt("Support for constants in Bidirectional layers is not implemented yet.");const l=a[0]instanceof ha;for(const c of a)if(c instanceof ha!==l)throw new ee("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const c=[e].concat(a),f=this.inputSpec.concat(o),h=this.inputSpec;this.inputSpec=f;const p=super.apply(c,n);return this.inputSpec=h,p}else return super.apply(e,n)}call(e,n){return ce(()=>{const r=n.initialState;let i,s;if(r==null)i=this.forwardLayer.call(e,n),s=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),c=r.slice(r.length/2);i=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),s=this.backwardLayer.call(e,Object.assign(n,{initialState:c}))}let a;this.returnState&&(Array.isArray(i)&&(a=i.slice(1).concat(s.slice(1))),i=i[0],s=s[0]),this.returnSequences&&(s=Vc(s,1));let o;return this.mergeMode==="concat"?o=BR([i,s]):this.mergeMode==="sum"?o=Ae(i,s):this.mergeMode==="ave"?o=ne(.5,Ae(i,s)):this.mergeMode==="mul"?o=ne(i,s):this.mergeMode==null&&(o=[i,s]),this.returnState?this.mergeMode==null?o.concat(a):[o].concat(a):o})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Ec(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Ec(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const s=this.forwardLayer.states.map(a=>null);return Array.isArray(r)?r.concat(s).concat(s):[r].concat(s).concat(s)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=eo(n.layer);if(delete n.layer,n.numConstants!=null)throw new rt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const i=n;return i.layer=r,new e(i)}}QZ.className="Bidirectional";Te(QZ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class JZ extends lt{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return ce(()=>(e=Qe(e),e.dtype!=="float32"&&(e=aa(e,"float32")),Ae(ne(e,this.scale),this.offset)))}}JZ.className="Rescaling";Te(JZ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:iDe,cropAndResize:sDe}=Xa;class eQ extends lt{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,i,s,a,o,l){return ce(()=>{let c,f=!1;const h=n/a,p=r/o,g=(i+n)/a,y=(s+r)/o,b=[h,p,g,y],v=[];e.rank===3?(f=!0,c=co([e])):c=e;for(let k=0;k<c.shape[0];k++)v.push(b);const w=gK(v,[v.length,4]),S=wm(0,v.length,1,"int32"),A=sDe(c,w,S,[i,s],"nearest");return aa(f?Qe(Uc(A)):A,l)})}upsize(e,n,r,i){return ce(()=>{const s=iDe(e,[n,r]);return aa(s,i)})}call(e,n){return ce(()=>{const r=Qe(e),i=r.dtype,s=r.shape,a=s[s.length-3],o=s[s.length-2];let l=0;a!==this.height&&(l=Math.floor((a-this.height)/2));let c=0;return o!==this.width&&(c=Math.floor((o-this.width)/2),c===0&&(c=1)),l>=0&&c>=0?this.centerCrop(r,l,c,this.height,this.width,a,o,i):this.upsize(e,this.height,this.width,i)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Ct(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}eQ.className="CenterCrop";Te(eQ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function aDe(t,e,n,r){let i=Qe(t);if(i.dtype!=="int32"&&(i=aa(i,"int32")),e==="int")return i;const s=i.shape;if(i.rank===0&&(i=Gr(i,-1)),e==="oneHot"&&i.shape[i.shape.length-1]!==1&&(i=Gr(i,-1)),i.rank>2)throw new ee(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${s} which would result in output rank ${i.rank}.`);const a=["multiHot","oneHot"].includes(e),o=i;let l;if(typeof r<"u"&&e==="count"?l=sG(o,r,n,a):l=sG(o,[],n,a),e!=="tfIdf")return l;if(r)return ne(l,r);throw new ee("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class tQ extends lt{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=Ct(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return ce(()=>{e=Qe(e),e.dtype!=="int32"&&(e=aa(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new ee(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=Qe(n.countWeights)}const i=Is(e),s=$b(e),a=Mi(this.numTokens,i).bufferSync().get(0),o=Jc(s,0).bufferSync().get(0);if(!(a&&o))throw new ee(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return aDe(e,this.outputMode,this.numTokens,r)})}}tQ.className="CategoryEncoding";Te(tQ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const oDe=["bilinear","nearest"],qG=new Set(oDe);class nQ extends lt{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(qG.has(e.interpolation))this.interpolation=e.interpolation;else throw new ee(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=Ct(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return ce(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return Xa.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Xa.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...qG]} are supported`)})}}nQ.className="Resizing";Te(nQ);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class rQ{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}rQ.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class iQ extends lt{constructor(e){super(e),this.randomGenerator=new rQ(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}iQ.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const lDe=["bilinear","nearest"],HG=new Set(lDe);class sQ extends iQ{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new ee(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new ee(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new ee(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(HG.has(r))this.interpolation=r;else throw new ee(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Ct(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return ce(()=>{const r=Qe(e);this.imgHeight=r.shape[r.shape.length-3];const i=r.shape[r.shape.length-2];this.widthFactor=jg([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let s=this.widthFactor.dataSync()[0]*i;s=Math.round(s);const a=[this.imgHeight,s];switch(this.interpolation){case"bilinear":return Xa.resizeBilinear(e,a);case"nearest":return Xa.resizeNearestNeighbor(e,a);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...HG]} are supported`)}})}}sQ.className="RandomWidth";Te(sQ);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cDe=fe();cDe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var KG;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(KG||(KG={}));var XG;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(XG||(XG={}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var YG;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(YG||(YG={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Me(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&G(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uDe=eX;class aw extends jO{nextDataId(){return aw.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new T9(this,Vs())}write(e,n,r){this.firstUse&&(this.firstUse=!1,fe().get("IS_NODE")&&Ni(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const i={id:this.nextDataId()};return this.data.set(i,{values:e,dtype:r,refCount:1}),i}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&Um(r[0])){const s=r.map(a=>al(a));i=this.write(s,e,n)}else i=this.write(r,e,n);return{dataId:i,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,i,s){this.data.set(e,{values:n,dtype:i,refCount:s})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const i=this.readSync(r.real.dataId),s=this.readSync(r.imag.dataId);return uo(i,s)}return RTe(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(i=>fl(i));return at(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return at(e.shape,e.dtype,n)}makeOutput(e,n,r){return Vs().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=Wr();return e(),{kernelMs:Wr()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Me([e],"where");const n=this.readSync(e.dataId);return uDe(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}aw.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aQ(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const fDe=t=>{const{x:e}=t.inputs,n=t.backend;Me(e,"abs");let r=new Float32Array(be(e.shape));const i=n.data.get(e.dataId).values;return r=aQ(i),n.makeOutput(r,e.shape,e.dtype)},hDe={kernelName:Lx,backendName:"cpu",kernelFunc:fDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tn(t){return(e,n,r,i,s)=>{const a=nt(e,n),o=a.length,l=je(a),c=be(a),f=xr(s,c),h=e.length,p=n.length,g=je(e),y=je(n),b=Qf(e,a),v=Qf(n,a);if(b.length+v.length===0)for(let w=0;w<f.length;++w)f[w]=t(r[w%r.length],i[w%i.length]);else for(let w=0;w<f.length;++w){const S=Sh(w,o,l),T=S.slice(-h);b.forEach(I=>T[I]=0);const A=ra(T,h,g),k=S.slice(-p);v.forEach(I=>k[I]=0);const E=ra(k,p,y);f[w]=t(r[A],i[E])}return[f,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function li(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,s=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,o=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(o.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",s),imag:n.makeTensorInfo(i.shape,"float32",a)},o}const dDe={kernelName:e_,backendName:"cpu",kernelFunc:li};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vb(t,e,n="float32"){if(n==="complex64"){const i=Vb(t,e,"float32"),s=Vb(t,e,"float32");return li({inputs:{real:i,imag:s},backend:t})}const r=wr(be(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function da(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const pDe={kernelName:ug,backendName:"cpu",kernelFunc:da};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gc(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.real,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}const mDe={kernelName:T_,backendName:"cpu",kernelFunc:Gc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oQ(t,e,n,r){if(r==="int32"){const i=Int32Array.from(t);return[e,"int32",i]}if(r==="bool"){const i=Qc([0],n),[s,a]=Tn((o,l)=>o!==l?1:0)(e,[],t,i,"bool");return[a,"bool",s]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function gl(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:s}=r;if(s==="complex64"){if(i.dtype==="complex64")return da({inputs:{x:i},backend:n});const f=Vb(n,i.shape,i.dtype),h=gl({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),p=li({inputs:{real:h,imag:f},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}if(i.dtype==="complex64"){const f=Gc({inputs:{input:i},backend:n}),h=gl({inputs:{x:f},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(f),h}if(!E9(i.dtype,s)){const f=da({inputs:{x:i},backend:n});return{dataId:f.dataId,shape:f.shape,dtype:s}}const a=n.data.get(i.dataId).values,[o,l,c]=oQ(a,i.shape,i.dtype,s);return n.makeTensorInfo(o,l,c)}const gDe={kernelName:Zm,backendName:"cpu",kernelFunc:gl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vn(t,e,n,r){return n==null?({inputs:i,backend:s})=>{const{a,b:o}=i,l=s;Me([a,o],t);const c=l.data.get(a.dataId).values,f=l.data.get(o.dataId).values,h=a.dtype==="string"?fo(c):c,p=a.dtype==="string"?fo(f):f,g=r||a.dtype,[y,b]=e(a.shape,o.shape,h,p,g);return l.makeTensorInfo(b,g,y)}:({inputs:i,backend:s})=>{const{a,b:o}=i,l=s;if(a.dtype==="complex64"||o.dtype==="complex64"){const c=gl({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),f=l.data.get(c.dataId),h=f.complexTensorInfos.real,p=f.complexTensorInfos.imag,g=l.data.get(h.dataId).values,y=l.data.get(p.dataId).values,b=gl({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),v=l.data.get(b.dataId),w=v.complexTensorInfos.real,S=v.complexTensorInfos.imag,T=l.data.get(w.dataId).values,A=l.data.get(S.dataId).values,[k,E,I]=n(a.shape,o.shape,g,y,T,A),N=l.makeTensorInfo(I,"float32",k),_=l.makeTensorInfo(I,"float32",E),D=li({inputs:{real:N,imag:_},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(b),l.disposeIntermediateTensorInfo(N),l.disposeIntermediateTensorInfo(_),D}else{const c=l.data.get(a.dataId).values,f=l.data.get(o.dataId).values,h=r||a.dtype,[p,g]=e(a.shape,o.shape,c,f,h);return l.makeTensorInfo(g,h,p)}}}function iD(t){return(e,n,r,i,s,a)=>{const o=nt(e,n),l=be(o),c=o.length,f=je(o),h=xr("float32",l),p=xr("float32",l),g=Qf(e,o),y=Qf(n,o),b=uo(r,i),v=uo(s,a),w=e.length,S=je(e),T=n.length,A=je(n);if(g.length+y.length===0)for(let k=0;k<h.length;k++){const E=k%b.length,I=k%v.length,N=t(b[E*2],b[E*2+1],v[I*2],v[I*2+1]);h[k]=N.real,p[k]=N.imag}else for(let k=0;k<h.length;k++){const E=Sh(k,c,f),I=E.slice(-w);g.forEach(P=>I[P]=0);const N=ra(I,w,S),_=E.slice(-T);y.forEach(P=>_[P]=0);const D=ra(_,T,A),O=t(b[N*2],b[N*2+1],v[D*2],v[D*2+1]);h[k]=O.real,p[k]=O.imag}return[h,p,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lQ=Tn((t,e)=>t+e),yDe=iD((t,e,n,r)=>({real:t+n,imag:e+r})),th=Vn(Ch,lQ,yDe),vDe={kernelName:Ch,backendName:"cpu",kernelFunc:th};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sD(t,e,n,r,i){const s=be(r),a=wr(i,n);for(let o=0;o<t.length;o++){const l=t[o];if(l<0)throw new Error("Input x must be non-negative!");l>=i||(s>0?a[l]+=e[o]:a[l]+=1)}return a}function cQ(t,e,n,r=!1){const i=t.shape[0],s=t.shape[1],a=at([i,n],e.dtype);for(let o=0;o<i;o++)for(let l=0;l<s;l++){const c=t.get(o,l);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?a.set(1,o,c):e.size>0?a.set(a.get(o,c)+e.get(o,l),o,c):a.set(a.get(o,c)+1,o,c))}return a}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uQ=Tn((t,e)=>t&e),bDe=Vn(JO,uQ),xDe={kernelName:JO,backendName:"cpu",kernelFunc:bDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ma(t){return(e,n,r)=>{const i=bn(n,e.length);for(let s=0;s<e.length;++s)i[s]=t(e[s],r);return i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dt(t,e,n){const r=ma(e);return _l(t,r,n)}function _l(t,e,n){return({inputs:r,attrs:i,backend:s})=>{const{x:a}=r;Me(a,t);const o=s,l=o.data.get(a.dataId).values;let c;if(a.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=fo(l)}else c=l;const f=n||a.dtype,h=e(c,f,i);return o.makeTensorInfo(a.shape,f,h)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fQ=ma(t=>Math.ceil(t)),wDe=_l(Qm,fQ),SDe={kernelName:Qm,backendName:"cpu",kernelFunc:wDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hQ(t,e,n,r){const i=bn(n,be(e));if(r&&n!=="string"){let s=0;t.forEach(a=>{const o=be(a.shape);i.set(a.vals,s),s+=o})}else{let s=0;t.forEach(a=>{const o=n==="string"?fo(a.vals):a.vals;let l=0;for(let c=0;c<a.shape[0];++c){const f=c*e[1]+s;for(let h=0;h<a.shape[1];++h)i[f+h]=o[l++]}s+=a.shape[1]})}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dQ=Tn((t,e)=>t===e?1:0),pQ=Vn(Qx,dQ,null,"bool"),CDe={kernelName:Qx,backendName:"cpu",kernelFunc:pQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mQ=ma(t=>Math.exp(t)),gQ=_l(sg,mQ,"float32"),TDe={kernelName:sg,backendName:"cpu",kernelFunc:gQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yQ=ma(t=>Math.expm1(t)),kDe=_l(ag,yQ),ADe={kernelName:ag,backendName:"cpu",kernelFunc:kDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vQ=ma(t=>Math.floor(t)),EDe=_l(og,vQ),$De={kernelName:og,backendName:"cpu",kernelFunc:EDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bQ=Tn((t,e)=>Math.floor(t/e)),IDe=Vn(lg,bQ,null,"int32"),NDe={kernelName:lg,backendName:"cpu",kernelFunc:IDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xQ(t,e,n,r,i,s,a,o,l){const c=at([r,s],n);for(let f=0;f<r;f++){const h=[];let p=0;for(let g=0;g<i;g++){const y=t[f*i+g];p+=y*a[g],h.push(y)}if(p<0||p>=l/s)throw new Error(`Invalid indices: ${h} does not index into ${o}`);for(let g=0;g<s;g++)c.values[f*s+g]=e.get(...e.indexToLoc(p*s+g))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wQ(t,e,n){const r=at(n,t.dtype);for(let i=0;i<r.size;++i){const a=r.indexToLoc(i).slice(),o=a[0],l=a[2],c=e.locToIndex([o,l]);a[2]=e.values[c];const f=t.locToIndex(a);0<=f&&f<t.values.length&&(r.values[i]=t.values[f])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SQ=Tn((t,e)=>t>e?1:0),ODe=Vn(n1,SQ,null,"bool"),_De={kernelName:n1,backendName:"cpu",kernelFunc:ODe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CQ=Tn((t,e)=>t>=e?1:0),RDe=Vn(cg,CQ,null,"bool"),DDe={kernelName:cg,backendName:"cpu",kernelFunc:RDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TQ=Tn((t,e)=>t<e?1:0),MDe=Vn(i1,TQ,null,"bool"),PDe={kernelName:i1,backendName:"cpu",kernelFunc:MDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kQ=Tn((t,e)=>t<=e?1:0),LDe=Vn(s1,kQ,null,"bool"),FDe={kernelName:s1,backendName:"cpu",kernelFunc:LDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AQ(t,e,n){const r=(e-t)/(n-1),i=wr(n,"float32");i[0]=t;for(let s=1;s<i.length;s++)i[s]=i[s-1]+r;return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EQ=ma(t=>Math.log(t)),BDe=_l(pg,EQ),zDe={kernelName:pg,backendName:"cpu",kernelFunc:BDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Q(t,e,n,r){const i=xr(r,be(n));for(let s=0;s<i.length;++s){const a=s*e;let o=t[a];for(let l=0;l<e;++l){const c=t[a+l];(Number.isNaN(c)||c>o)&&(o=c)}i[s]=o}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IQ=Tn((t,e)=>Math.max(t,e)),jDe=Vn(gg,IQ),VDe={kernelName:gg,backendName:"cpu",kernelFunc:jDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NQ=Tn((t,e)=>Math.min(t,e)),UDe=Vn(yg,NQ),WDe={kernelName:yg,backendName:"cpu",kernelFunc:UDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aD=Tn((t,e)=>t*e),GDe=iD((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),ow=Vn(bg,aD,GDe),qDe={kernelName:bg,backendName:"cpu",kernelFunc:ow};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OQ(t,e,n){const r=kl(-1,n);return aD([],e,r,t,n)}function HDe(t){const{inputs:e,backend:n}=t,{x:r}=e;Me(r,"neg");const i=n.data.get(r.dataId).values,[s,a]=OQ(i,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,s)}const KDe={kernelName:g1,backendName:"cpu",kernelFunc:HDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Q=Tn((t,e)=>t!==e?1:0),XDe=Vn(y1,_Q,null,"bool"),YDe={kernelName:y1,backendName:"cpu",kernelFunc:XDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oD(t,e,n,r,i){const s=e.length,a=be(e),o=je(e),l=je(i),c=xr(n,be(i));for(let f=0;f<a;++f){const h=Sh(f,s,o),p=new Array(h.length);for(let y=0;y<p.length;y++)p[y]=h[r[y]];const g=ra(p,s,l);c[g]=t[f]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zr(t){const{inputs:e,attrs:n,backend:r}=t,{x:i}=e,{perm:s}=n;Me(i,"transpose");const a=i.shape.length,o=new Array(a);for(let h=0;h<o.length;h++)o[h]=i.shape[s[h]];const l=r.data.get(i.dataId).values,c=oD(l,i.shape,i.dtype,s,o);return{dataId:r.write(c,o,i.dtype),shape:o,dtype:i.dtype}}const ZDe={kernelName:wf,backendName:"cpu",kernelFunc:Zr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RQ(t,e,n,r){const[i,s]=er(t,r),a=hi(e,"int32"),o=wr(be(i),a),l=be(s);for(let c=0;c<o.length;++c){const f=c*l;let h=1;for(let p=0;p<l;++p)h*=n[f+p];o[c]=h}return{outVals:o,outShape:i,outDtype:a}}function QDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r;Me(i,"prod");const o=i.shape.length,l=ot(s,i.shape),c=on(l,o);let f=l,h=i;const p=[];c!=null&&(h=Zr({inputs:{x:i},backend:n,attrs:{perm:c}}),p.push(h),f=Sn(f.length,o));const g=n.data.get(h.dataId).values,{outVals:y,outShape:b,outDtype:v}=RQ(h.shape,h.dtype,g,f);let w=b;return a&&(w=On(b,l)),p.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.makeTensorInfo(w,v,y)}const JDe={kernelName:C1,backendName:"cpu",kernelFunc:QDe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eMe(t,e,n){t.forEach((r,i)=>{if(r<0||r>=n){const s=Sh(i,e.length,je(e)).join(",");throw new Error(`indices[${s}] = ${r} is not in [0, ${n})`)}})}function tMe(t,e){for(let n=0;n<t.length;++n){const r=t[n],i=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let s=1;s<r.length;++s)if(r[s-1]>r[s])throw new Error("Ragged splits must be sorted in ascending order")}}function nMe(t,e,n,r){const i=[];let s=0;const a=e.length-1+n.length,o=new Array(a).fill(null).map(()=>[0]);tMe(n,r);let l=1;for(let c=0;c<e.length-1;++c){l*=e[c];const f=e[c+1];for(let h=1;h<l+1;++h)o[c].push(h*f)}for(let c=0;c<t.length;++c){let f=t[c],h=t[c]+1;for(let p=0;p<n.length;++p){const g=n[p],y=p+e.length-1;if(y>=0){const b=o[y],v=b[b.length-1]-g[f];for(let w=f;w<h;++w)o[y].push(g[w+1]+v)}f=g[f],h=g[h]}h!==f&&(i.push([f,h]),s+=h-f)}return{outSplits:o,valueSlices:i,numValues:s}}function rMe(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,i=bn("int32",r);e.push(i),t[n].forEach((s,a)=>i[a]=s)}return e}function ZG(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function iMe(t,e,n,r,i,s){const a=ZG(e,2)[1],o=ZG(s,2)[1];let l=0;for(const c of n)for(let f=c[0];f<c[1];++f){for(let h=0;h<r;++h)i[l*o+h]=t[f*a+h];++l}}function sMe(t,e,n,r,i){const s=e.slice();s[0]=i;const a=bn(n,be(s)),o=t.length,l=o===0?0:o/e[0];return iMe(t,e,r,l,a,s),[a,s]}function DQ(t,e,n,r,i,s,a,o){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(eMe(s,a,l),r.length===0)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:f,valueSlices:h,numValues:p}=nMe(s,a,t,c),g=rMe(f),y=sMe(n,r,i,h,p);return[g,y[0],y[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QG=2147483647;function MQ(t,e,n,r,i,s,a){if(e.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(a.length>1)throw new Error("deltas must be a scalar or vector");const o=e.length===0,l=i.length===0,c=a.length===0,f=[];o||f.push(e[0]),l||f.push(i[0]),c||f.push(a[0]);for(let v=1;v<f.length;++v)if(f[v]!==f[v-1])throw new Error("starts, limits, and deltas must have the same shape");const h=f.length===0?1:f[0],p=bn("int32",h+1);p[0]=0;for(let v=0;v<h;++v){const w=o?t[0]:t[v],S=l?r[0]:r[v],T=c?s[0]:s[v];if(T===0)throw new Error("Requires delta != 0");let A;if(T>0&&S<w||T<0&&S>w)A=0;else if(A=Math.ceil(Math.abs((S-w)/T)),A>QG)throw new Error(`Requires ((limit - start) / delta) <= ${QG}`);p[v+1]=p[v]+A}const g=p[h],y=bn(n,g);let b=0;for(let v=0;v<h;++v){const w=p[v+1]-p[v];let S=o?t[0]:t[v];const T=c?s[0]:s[v];for(let A=0;A<w;++A)y[b++]=S,S+=T}return[p,y]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Yi=Cs;class Ub{constructor(e,n,r,i,s,a,o,l,c,f){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=i,this.valuesDType=s,this.defaultValue=a,this.defaultValueShape=o,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=bX(f),this.raggedRank=xX(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Yi.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Yi.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Yi.VALUE_ROWIDS:return Ub.getMaxWidthValueRowID(n);case Yi.ROW_SPLITS:return Ub.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${Yi[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let i=0;i<n-1;++i){const s=e[i+1]-e[i];s>r&&(r=s)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,i=e[0],s=0;for(let a=1;a<n;++a){const o=e[a];o!==i&&(i=o,s=Math.max(a-r,s),r=a)}return Math.max(n-r,s)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return e5(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;wX(r,n);const i=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=vX(this.raggedRank,i,n);a[0]<0&&(a[0]=e);for(let o=1;o<=this.raggedRank;++o)a[o]<0&&(a[o]=this.getMaxWidth(o));return a}calculateFirstParentOutputIndex(e,n,r){const i=Math.min(e,r),s=[];let a=0;for(let o=0;o<i;++o,a+=n)s.push(a);for(let o=i;o<e;++o)s.push(-1);return G(s.length===e,()=>"Final length of result must be equal to firstDimension."),s}calculateOutputIndexRowSplit(e,n,r,i){const s=e.length,a=[];for(let o=0;o<s-1;++o){const l=e[o+1]-e[o];let c=Math.min(i,l),f=n[o];f===-1&&(c=0);for(let h=0;h<c;++h)a.push(f),f+=r;for(let h=0;h<l-c;++h)a.push(-1)}if(s>0&&a.length!==e[s-1])throw new Error("Invalid row split size.");return a}calculateOutputIndexValueRowID(e,n,r,i){const s=e.length,a=[];if(s===0)return[];let o=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let c=n[l];a.push(c);for(let f=1;f<s;++f){const h=e[f];if(h===l)c>=0&&(++o,o<i?c+=r:c=-1);else{if(o=0,l=h,h>=n.length)throw new Error(`Got nextValueRowId=${h} which is not less than ${n.length}`);c=n[h]}a.push(c)}if(a.length!==e.length)throw new Error("Invalid row ids.");return a}calculateOutputIndex(e,n,r,i){const s=this.getRowPartitionTensor(e),a=this.getRowPartitionTypeByDimension(e);switch(a){case Yi.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(s,n,r,i);case Yi.ROW_SPLITS:if(s.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${s.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(s,n,r,i);default:throw new Error(`Unsupported partition type: ${Yi[a]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case Yi.FIRST_DIM_SIZE:return e[0];case Yi.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Yi.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Yi[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),i=new Array(this.raggedRank+1);i[i.length-1]=1;for(let l=i.length-2;l>=0;--l)i[l]=i[l+1]*r[l+1];const s=e5(r,!1),a=bn(this.valuesDType,be(s));if(i[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,i[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,i[c],r[c]);this.setOutput(this.raggedRank,l,a,s)}return[s,a]}setOutput(e,n,r,i){if(r.length===0)return;const s=this.values,a=r;let o=i.slice();o=o.slice(e+1);const l=be(o),c=n.length;let f=this.defaultValue;if(f.length!==l&&f.length!==1){const y=this.defaultValueShape;ce(()=>{const b=se(f,y);f=Tp(b,o).dataSync()})}let h=0,p=0,g=0;for(let y=0;y<=c;++y){let b=y<c?n[y]:-1;if(b===g){++g;continue}if(p<g){const v=s.subarray(h*l),w=a.subarray(p*l),S=(g-p)*l;JG(w,v,S)}if(y>=c){const v=r.length;b=Math.floor(v/l)}if(b>g)if(this.defaultValue.length===1)a.subarray(g*l,b*l).fill(this.defaultValue[0]),g=b;else for(;b>g;){const v=a.slice(g*l);JG(v,f,l),++g}b<0?(h=y+1,p=g):(h=y,p=g,g=p+1)}}}function JG(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function e5(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function PQ(t,e,n,r,i,s,a,o,l,c){return new Ub(t,e,n,r,i,s,a,o,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LQ(t,e,n,r){const i=t===e,s=t<e&&n<0,a=e<t&&n>1;if(i||s||a)return wr(0,r);const o=Math.abs(Math.ceil((e-t)/n)),l=wr(o,r);e<t&&n===1&&(n=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FQ=ma(t=>1/Math.sqrt(t)),aMe=_l(kg,FQ),oMe={kernelName:kg,backendName:"cpu",kernelFunc:aMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wc(t,e,n,r,i,s,a,o,l,c){const f=[r/i,i],h=t.values,p=e.values;if(r===0)return at(n,e.dtype);const g=l instanceof or?l:at(f,e.dtype);typeof l=="string"||typeof l=="number"?g.values.fill(l):typeof l=="boolean"&&g.values.fill(+l);for(let y=0;y<s;y++){const b=[];let v=0;for(let w=0;w<a;w++){const S=h[y*a+w];b.push(S),v+=S*o[w]}if(v<0||v>=r/i)throw new Error(`Invalid indices: ${b} does not index into ${n}`);for(let w=0;w<i;w++)c?g.values[v*i+w]+=p[y*i+w]:g.values[v*i+w]=e.rank===0?p[0]:p[y*i+w]}return g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lMe=ma(t=>1/(1+Math.exp(-t))),BQ=Dt(Ng,t=>1/(1+Math.exp(-t))),cMe={kernelName:Ng,backendName:"cpu",kernelFunc:BQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zQ(t,e,n,r,i){const s=mR(r,e,n),a=be(n),o=je(r);if(s){const h=gR(e,o);return i==="string"?t.slice(h,h+a):t.subarray(h,h+a)}const l=i==="string"?fo(t):t,c=at(r,i,l),f=at(n,i);for(let h=0;h<f.size;++h){const p=f.indexToLoc(h),g=p.map((y,b)=>y+e[b]);f.set(c.get(...g),...p)}return i==="string"?jX(f.values):f.values}function qc(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,size:a}=r;Me(i,"slice");const[o,l]=q1(i,s,a);dR(i,o,l);const c=n.data.get(i.dataId).values,f=zQ(c,o,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,f)}const uMe={kernelName:I1,backendName:"cpu",kernelFunc:qc};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jQ(t,e,n,r,i,s,a){const o=e[0],l=s[0],c=new Array(l),f=new Array(o),h=e[1];if(l===0){if(o!==0)throw new Error($X(o));const v=bn(n,0),w=bn(i,0);return[v,[0,h],w,c,f]}let p=!0,g=0;const y=new Array(l).fill(0);for(let v=0;v<o;++v){const w=t[v*h];if(w<0)throw new Error(IX(v,w));if(w>=l)throw new Error(NX(v,w,l));++y[w],p=p&&w>=g,g=w}let b=!0;for(let v=0;v<l;++v){const w=y[v]===0;c[v]=w,b=b&&!w,y[v]=Math.max(y[v],1),v>0&&(y[v]+=y[v-1])}if(b&&p){const v=t,w=r;for(let S=0;S<o;++S)f[S]=S;return[v,[o,h],w,c,f]}else{const v=y[l-1],w=bn(n,v*h),S=bn(i,v),T=new Array(l).fill(0);for(let A=0;A<o;++A){const k=t[A*h],E=T[k],I=(k===0?0:y[k-1])+E;T[k]++;for(let N=0;N<h;++N)w[I*h+N]=t[A*h+N];S[I]=r[A],f[A]=I}for(let A=0;A<l;++A)if(T[A]===0){const E=A===0?0:y[A-1];w[E*h+0]=A;for(let I=1;I<h;++I)w[E*h+I]=0;S[E]=a}return[w,[v,h],S,c,f]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VQ(t,e,n,r,i){const s=be(r),a=e[0],o=i.length,l=[];let c=1,f=-1;for(let v=0;v<o;++v){const w=i[v];if(w===-1){if(f!==-1)throw new Error(OX(f,v));f=v,l.push(1)}else{if(w<0)throw new Error(_X(v,w));c*=w,l.push(w)}}if(f!==-1){if(c<=0)throw new Error(RX());const v=Math.trunc(s/c);if(c*v!==s)throw new Error(DX(r,l));l[f]=v}if(be(l)!==s)throw new Error(MX(r,l));const p=r.length,g=[];if(p>0){g[p-1]=1;for(let v=p-2;v>=0;--v)g[v]=g[v+1]*r[v+1]}const y=[];if(o>0){y[o-1]=1;for(let v=o-2;v>=0;--v)y[v]=y[v+1]*l[v+1]}const b=bn(n,a*o);for(let v=0;v<a;++v){let w=0;for(let S=0;S<p;++S)w+=t[v*p+S]*g[S];for(let S=0;S<o;++S)b[v*o+S]=Math.trunc(w/y[S]),w%=y[S]}return[b,[a,o],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lD(t,e,n,r,i,s=!1,a=0){const o=r.length,l=[e[0],t.length/e[0]],c=l[1],h=o>0?i[o-1]+1:0;if(h<0)throw new Error(_I());const p=e.slice();p[0]=h;const g=p.reduce((T,A)=>T*A,1),y=bn(n,g);if(o===0)return h>0&&y.fill(a),[y,p];if(h<=0)throw new Error(_I());let b=0,v=1,w=0,S=i[b];for(;;){let T=0;if(v<o){if(T=i[v],S===T){++v;continue}if(S>=T)throw new Error(PX())}if(S<0||S>=h)throw new Error(LX(S,h));S>w&&y.fill(a,w*c,S*c);for(let A=b;A<v;++A){const k=r[A];if(k<0||k>=l[0])throw new Error(FX(A,r[A],l[0]));for(let E=0;E<c;E++)y[S*c+E]+=t[k*c+E]}if(s)for(let A=0;A<c;A++)y[S*c+A]/=v-b;if(b=v,++v,w=S+1,S=T,v>o)break}return w<h&&y.fill(a,w*c,h*c),[y,p]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fMe=ma(t=>Math.sqrt(t)),hMe=Dt(_g,t=>Math.sqrt(t)),dMe={kernelName:_g,backendName:"cpu",kernelFunc:hMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UQ=Tn((t,e)=>{const n=t-e;return n*n}),pMe=Vn(Rg,UQ),mMe={kernelName:Rg,backendName:"cpu",kernelFunc:pMe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WQ=ma((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:i}=e;return t.replace(new RegExp(n,r?"g":""),i)}),gMe=_l($_,WQ),yMe={kernelName:$_,backendName:"cpu",kernelFunc:gMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GQ(t,e,n,r){const i=at(t,e.dtype);for(let s=0;s<i.size;s++){const a=i.indexToLoc(s),o=new Array(a.length);for(let l=0;l<o.length;l++)o[l]=a[l]*n[l]+r[l];i.set(e.get(...o),...a)}return i}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vMe{constructor(e,n,r,i,s,a){this.separator=al(e),this.nGramWidths=n,this.leftPad=al(r),this.rightPad=al(i),this.padWidth=s,this.preserveShort=a}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,i,s,a){for(let o=0;o<s;++o){const l=this.getPadWidth(a),c=Math.max(0,l-o),f=Math.max(0,l-(s-(o+1))),h=a-(c+f),p=n+(c>0?0:o-l);let g=0;g+=c*this.leftPad.length;for(let S=0;S<h;++S)g+=e[p+S].length;g+=f*this.rightPad.length;const y=c+f+h-1;g+=y*this.separator.length,r[i+o]=new Uint8Array(g);const b=r[i+o];let v=0;const w=S=>S.forEach(T=>b[v++]=T);for(let S=0;S<c;++S)w(this.leftPad),w(this.separator);for(let S=0;S<h-1;++S)w(e[p+S]),w(this.separator);if(h>0){w(e[p+h-1]);for(let S=0;S<f;++S)w(this.separator),w(this.rightPad)}else{for(let S=0;S<f-1;++S)w(this.rightPad),w(this.separator);w(this.rightPad)}}}compute(e,n){const r=e.length,i=n.length;if(i>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<i;++c){let f=n[c]>=l;if(f=f&&n[c]<=r,!f)throw new Error(`Invalid split value ${n[c]}, must be in [${l}, ${r}]`);l=n[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const s=i-1,a=bn("int32",i);if(r===0||i===0){const l=new Array(r);for(let c=0;c<=s;++c)a[c]=0;return[l,a]}a[0]=0;for(let l=1;l<=s;++l){const c=n[l]-n[l-1];let f=0;this.nGramWidths.forEach(h=>{f+=this.getNumNGrams(c,h)}),this.preserveShort&&c>0&&f===0&&(f=1),a[l]=a[l-1]+f}const o=new Array(a[s]);for(let l=0;l<s;++l){const c=n[l];let f=a[l];if(this.nGramWidths.forEach(h=>{const p=n[l+1]-n[l],g=this.getNumNGrams(p,h);this.createNGrams(e,c,o,f,g,h),f+=g}),this.preserveShort&&f===a[l]){const h=n[l+1]-n[l];if(h===0)continue;const p=h+2*this.padWidth;this.createNGrams(e,c,o,f,1,p)}}return[o,a]}}function qQ(t,e,n,r,i,s,a,o){return new vMe(n,r,i,s,a,o).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bMe(t,e,n,r){if(!t.length)return;if(e.length===0){for(let s=0;s<t.length;++s)r.push(t.subarray(s,s+1));return}if(e.length===1){const s=e[0];let a=t.indexOf(s);for(;a!==-1;){const o=t.subarray(0,a);(!n||o.length!==0)&&r.push(o),t=t.subarray(a+1),a=t.indexOf(s)}(!n||t.length!==0)&&r.push(t);return}let i=0;for(let s=0;s<t.length+1;s++)if(s===t.length||e.indexOf(t[s])!==-1){const a=t.subarray(i,s);(!n||a.length!==0)&&r.push(a),i=s+1}}function HQ(t,e,n){const r=t.length,i=[];let s=0,a=0;const o=new Array(r);for(let p=0;p<r;++p){const g=i.length;bMe(t[p],e,n,i);const y=i.length-g;o[p]=y,s+=y,a=Math.max(a,y)}const l=bn("int32",s*2),c=new Array(s),f=[r,a];let h=0;for(let p=0;p<r;++p)for(let g=0;g<o[p];++g)l[h*2]=p,l[h*2+1]=g,c[h]=i[h],++h;return[l,c,f]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KQ(t,e){const n=bn("int32",t.length);for(let r=0;r<t.length;++r)n[r]=QTe(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XQ=Tn((t,e)=>t-e),xMe=iD((t,e,n,r)=>({real:t-n,imag:e-r})),cD=Vn(Dg,XQ,xMe),wMe={kernelName:Dg,backendName:"cpu",kernelFunc:cD};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YQ(t,e){const n=new Array(t.rank);for(let i=0;i<n.length;i++)n[i]=t.shape[i]*e[i];const r=at(n,t.dtype);for(let i=0;i<r.values.length;++i){const s=r.indexToLoc(i),a=new Array(t.rank);for(let l=0;l<a.length;l++)a[l]=s[l]%t.shape[l];const o=t.locToIndex(a);r.values[i]=t.values[o]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fp=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function ZQ(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const o=r-n+1,l=e-n+1,c=Math.log(o),f=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*f*(o-f)/o)*Math.sign(l-o/2),p=Math.max(n,Math.floor(e-l*f/o+h)),g=Math.min(r,Math.floor(e+(o-l)*f/o+h));ZQ(t,e,p,g)}const i=t[e];let s=n,a=r;for(rf(t,n,e),fp(t[r],i)>0&&rf(t,n,r);s<a;){for(rf(t,s,a),s++,a--;fp(t[s],i)<0;)s=s+1;for(;fp(t[a],i)>0;)a=a-1}fp(t[n],i)===0?rf(t,n,a):(a=a+1,rf(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}}function QQ(t,e,n,r,i){const s=e[e.length-1],[a,o]=[t.length/s,s],l=xr(n,a*r),c=xr("int32",a*r);for(let h=0;h<a;h++){const p=h*o,g=t.subarray(p,p+o);let y=new Array(g.length);g.forEach((S,T)=>y[T]={value:S,index:T}),r<y.length&&(ZQ(y,r),y=y.slice(0,r)),i&&y.sort(fp);const b=h*r,v=l.subarray(b,b+r),w=c.subarray(b,b+r);for(let S=0;S<r;S++)v[S]=y[S].value,w[S]=y[S].index}const f=e.slice();return f[f.length-1]=r,[at(f,n,l),at(f,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JQ(t,e,n,r){const i=ot(e,n)[0],s=[1,n[0],1];for(let y=0;y<i;y++)s[0]*=n[y];s[1]=n[i];for(let y=i+1;y<n.length;y++)s[2]*=n[y];const a=new Map,o=new Int32Array(n[i]),l=new or(s,r,t),c=[],f=s[0]===1&&s[2]===1;for(let y=0;y<n[i];y++){let b;if(f)b=t[y].toString();else{const w=[];for(let S=0;S<s[0];S++)for(let T=0;T<s[2];T++)w.push(l.get(S,y,T));b=w.join(",")}const v=a.get(b);if(v!=null)o[y]=v;else{const w=a.size;a.set(b,w),o[y]=w,c.push(y)}}const h=s.slice();h[1]=a.size;const p=new or(h,r);c.forEach((y,b)=>{for(let v=0;v<s[0];v++)for(let w=0;w<s[2];w++)p.set(l.get(v,y,w),v,b,w)});const g=n.slice();return g[i]=h[1],{outputValues:p.values,outputShape:g,indices:o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SMe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:lQ,bincountImpl:sD,bincountReduceImpl:cQ,bitwiseAndImpl:uQ,castImpl:oQ,ceilImpl:fQ,concatImpl:hQ,equalImpl:dQ,expImpl:mQ,expm1Impl:yQ,floorDivImpl:bQ,floorImpl:vQ,gatherNdImpl:xQ,gatherV2Impl:wQ,greaterEqualImpl:CQ,greaterImpl:SQ,lessEqualImpl:kQ,lessImpl:TQ,linSpaceImpl:AQ,logImpl:EQ,maxImpl:$Q,maximumImpl:IQ,minimumImpl:NQ,multiplyImpl:aD,negImpl:OQ,notEqualImpl:_Q,prodImpl:RQ,raggedGatherImpl:DQ,raggedRangeImpl:MQ,raggedTensorToTensorImpl:PQ,rangeImpl:LQ,rsqrtImpl:FQ,scatterImpl:wc,sigmoidImpl:lMe,simpleAbsImpl:aQ,sliceImpl:zQ,sparseFillEmptyRowsImpl:jQ,sparseReshapeImpl:VQ,sparseSegmentReductionImpl:lD,sqrtImpl:fMe,squaredDifferenceImpl:UQ,staticRegexReplaceImpl:WQ,stridedSliceImpl:GQ,stringNGramsImpl:qQ,stringSplitImpl:HQ,stringToHashBucketFastImpl:KQ,subImpl:XQ,tileImpl:YQ,topKImpl:QQ,transposeImpl:oD,uniqueImpl:JQ},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */yK("cpu",()=>new aw,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eJ=Dt(rg,t=>t>=0?t:Math.exp(t)-1),CMe={kernelName:rg,backendName:"cpu",kernelFunc:eJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tJ(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:s}=r;Me([i],"leakyRelu");const a=be(i.shape),o=n.data.get(i.dataId).values,l=xr("float32",a);for(let c=0;c<o.length;c++)l[c]=o[c]<0?s*o[c]:o[c];return n.makeTensorInfo(i.shape,"float32",l)}const TMe={kernelName:r1,backendName:"cpu",kernelFunc:tJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kMe=Tn((t,e)=>t<0?e*t:t);function nJ(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e;Me([r,i],"prelu");const s=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,[o,l]=kMe(r.shape,i.shape,s,a,"float32");return n.makeTensorInfo(l,"float32",o)}const AMe={kernelName:S1,backendName:"cpu",kernelFunc:nJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rJ=Dt(Sg,t=>Math.max(0,t)),EMe={kernelName:Sg,backendName:"cpu",kernelFunc:rJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iJ=Dt(Cg,t=>Math.min(Math.max(0,t),6)),$Me={kernelName:Cg,backendName:"cpu",kernelFunc:iJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wb(t,e,n,r,i){if(n==="linear")return da({inputs:{x:e},backend:t});if(n==="relu")return rJ({inputs:{x:e},backend:t});if(n==="elu")return eJ({inputs:{x:e},backend:t});if(n==="relu6")return iJ({inputs:{x:e},backend:t});if(n==="prelu")return nJ({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return tJ({inputs:{x:e},backend:t,attrs:{alpha:i}});if(n==="sigmoid")return BQ({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:s}=r,a=be(i.shape),o=A9(s,a),l=be(o);G(a===l,()=>`The new shape (${o}) has ${l} elements and the old shape (${i.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`),n.incRef(i.dataId);const c=n.data.get(i.dataId);if(c.complexTensorInfos!=null){const f=c.complexTensorInfos.real,h=c.complexTensorInfos.imag;f.shape=o,h.shape=o}return{dataId:i.dataId,shape:o,dtype:i.dtype}}const IMe={kernelName:T1,backendName:"cpu",kernelFunc:Kt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sJ(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s}=e,{transposeA:a,transposeB:o}=r;Me([i,s],"matMul");const l=i.shape.length,c=s.shape.length,f=a?i.shape[l-2]:i.shape[l-1],h=o?s.shape[c-1]:s.shape[c-2],p=a?i.shape[l-1]:i.shape[l-2],g=o?s.shape[c-2]:s.shape[c-1],y=i.shape.slice(0,-2),b=s.shape.slice(0,-2),v=be(y),w=be(b),T=nt(i.shape.slice(0,-2),s.shape.slice(0,-2)).concat([p,g]);G(f===h,()=>`Error in matMul: inner shapes (${f}) and (${h}) of Tensors with shapes ${i.shape} and ${s.shape} and transposeA=${a} and transposeB=${o} must match.`);const A=a?[v,f,p]:[v,p,f],k=o?[w,g,h]:[w,h,g],E=Kt({inputs:{x:i},backend:n,attrs:{shape:A}}),I=Kt({inputs:{x:s},backend:n,attrs:{shape:k}}),N=a?E.shape[1]:E.shape[2],_=a?E.shape[2]:E.shape[1],D=o?I.shape[1]:I.shape[2],O=Math.max(v,w),P=n.data.get(E.dataId).values,z=n.data.get(I.dataId).values,W=je(E.shape),U=je(I.shape),[R,F,B]=a?[W[0],1,W[1]]:[W[0],W[1],1],[K,L,H]=o?[1,U[1],U[0]]:[U[1],1,U[0]],X=_*D,Y=at([O,_,D],E.dtype),ie=Y.values,pe=n.blockSize;for(let ve=0;ve<O;ve++){const ke=ve%v,Ee=ve%w;for(let me=0;me<_;me+=pe){const $e=Math.min(me+pe,_);for(let Ie=0;Ie<D;Ie+=pe){const ye=Math.min(Ie+pe,D);for(let Ge=0;Ge<N;Ge+=pe){const ze=Math.min(Ge+pe,N);for(let Je=me;Je<$e;Je++)for(let qe=Ie;qe<ye;qe++){let Xe=0;for(let gt=Ge;gt<ze;gt++){const Un=P[ke*R+Je*F+gt*B],Xt=z[gt*K+qe*L+Ee*H];Xe+=Un*Xt}ie[ve*X+(Je*D+qe)]+=Xe}}}}}return n.disposeIntermediateTensorInfo(E),n.disposeIntermediateTensorInfo(I),n.makeTensorInfo(T,Y.dtype,Y.values)}const NMe={kernelName:Vx,backendName:"cpu",kernelFunc:sJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OMe(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s,bias:a,preluActivationWeights:o}=e,{transposeA:l,transposeB:c,activation:f,leakyreluAlpha:h}=r;let p,g,y;const b=[];p=sJ({inputs:{a:i,b:s},attrs:{transposeA:l,transposeB:c},backend:n}),a&&(g=th({inputs:{a:p,b:a},backend:n}),b.push(p),p=g),f&&(y=Wb(n,p,f,o,h),b.push(p),p=y);for(const w of b)n.disposeIntermediateTensorInfo(w);return p}const _Me={kernelName:Tb,backendName:"cpu",kernelFunc:OMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RMe=Dt(Wm,t=>Math.acos(t)),DMe={kernelName:Wm,backendName:"cpu",kernelFunc:RMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MMe=Dt(Gm,t=>Math.acosh(t)),PMe={kernelName:Gm,backendName:"cpu",kernelFunc:MMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LMe(t){const{inputs:e,backend:n}=t,r=e;Me(e,"addN");const i=r.map(o=>n.data.get(o.dataId).values),s=at(r[0].shape,r[0].dtype),a=s.values;for(let o=0;o<r.length;o++){const l=i[o];for(let c=0;c<a.length;c++)a[c]+=l[c]}return n.makeTensorInfo(s.shape,s.dtype,s.values)}const FMe={kernelName:HO,backendName:"cpu",kernelFunc:LMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r;Me(i,"all");const o=ot(s,i.shape);let l=o;const c=on(l,i.shape.length);let f=i;c!=null&&(f=Zr({inputs:{x:i},backend:n,attrs:{perm:c}}),l=Sn(l.length,i.shape.length)),ur("all",l,f.shape.length);const[h,p]=er(f.shape,l),g=be(p),y=wr(be(h),f.dtype),b=n.data.get(f.dataId).values;for(let w=0;w<y.length;++w){const S=w*g;let T=b[S];for(let A=0;A<g;++A){const k=b[S+A];T=T&&k}y[w]=T}c!=null&&n.disposeIntermediateTensorInfo(f);const v=n.makeTensorInfo(h,f.dtype,y);if(a){const w=On(h,o),S=Kt({inputs:{x:v},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(v),S}return v}const zMe={kernelName:KO,backendName:"cpu",kernelFunc:BMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r;Me(i,"any");const o=ot(s,i.shape);let l=o;const c=on(l,i.shape.length);let f=i;c!=null&&(f=Zr({inputs:{x:i},backend:n,attrs:{perm:c}}),l=Sn(l.length,i.shape.length)),ur("any",l,f.shape.length);const[h,p]=er(f.shape,l),g=be(p),y=wr(be(h),f.dtype),b=n.data.get(f.dataId).values;for(let w=0;w<y.length;++w){const S=w*g;let T=b[S];for(let A=0;A<g;++A){const k=b[S+A];T=T||k}y[w]=T}c!=null&&n.disposeIntermediateTensorInfo(f);const v=n.makeTensorInfo(h,f.dtype,y);if(a){const w=On(h,o),S=Kt({inputs:{x:v},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(v),S}return v}const VMe={kernelName:XO,backendName:"cpu",kernelFunc:jMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;Me(i,"argMax");let a=ot(s,i.shape);const o=on(a,i.shape.length);let l=i;const c=[];o!=null&&(l=Zr({inputs:{x:i},backend:n,attrs:{perm:o}}),c.push(l),a=Sn(a.length,l.shape.length)),a=[a[0]],ur("argMax",a,l.shape.length);const[f,h]=er(l.shape,a),p=be(f),g=wr(p,"int32"),y=be(h),b=n.data.get(l.dataId).values;for(let v=0;v<g.length;++v){const w=v*y;let S=b[w],T=0;for(let A=0;A<y;++A){const k=b[w+A];k>S&&(S=k,T=A)}g[v]=T}return c.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(f,"int32",g)}const WMe={kernelName:Fx,backendName:"cpu",kernelFunc:UMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;Me(i,"argMin");let a=ot(s,i.shape);const o=on(a,i.shape.length);let l=i;const c=[];o!=null&&(l=Zr({inputs:{x:i},backend:n,attrs:{perm:o}}),c.push(l),a=Sn(a.length,l.shape.length)),a=[a[0]],ur("argMin",a,l.shape.length);const[f,h]=er(l.shape,a),p=be(f),g=wr(p,"int32"),y=be(h),b=n.data.get(l.dataId).values;for(let v=0;v<g.length;++v){const w=v*y;let S=b[w],T=0;for(let A=0;A<y;++A){const k=b[w+A];k<S&&(S=k,T=A)}g[v]=T}return c.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(f,"int32",g)}const qMe={kernelName:Bx,backendName:"cpu",kernelFunc:GMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HMe=Dt(qm,t=>Math.asin(t)),KMe={kernelName:qm,backendName:"cpu",kernelFunc:HMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XMe=Dt(Hm,t=>Math.asinh(t)),YMe={kernelName:Hm,backendName:"cpu",kernelFunc:XMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZMe=Dt(Km,t=>Math.atan(t)),QMe={kernelName:Km,backendName:"cpu",kernelFunc:ZMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JMe=Tn((t,e)=>Math.atan2(t,e)),ePe=Vn(Ym,JMe),tPe={kernelName:Ym,backendName:"cpu",kernelFunc:ePe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nPe=Dt(Xm,t=>Math.atanh(t)),rPe={kernelName:Xm,backendName:"cpu",kernelFunc:nPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uD(t,e,n,r,i,s){const a=i.strideHeight,o=i.strideWidth,l=i.dilationHeight,c=i.dilationWidth,f=i.effectiveFilterHeight,h=i.effectiveFilterWidth,p=i.padInfo.top,g=i.padInfo.left,y=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=at(i.outShape,n),v=b.values,w=i.outShape[1]*i.outShape[2]*i.outShape[3],S=i.outShape[2]*i.outShape[3],T=i.outShape[3];for(let A=0;A<i.batchSize;++A){const k=A*w,E=A*r[0];for(let I=0;I<i.inChannels;++I)for(let N=0;N<i.outHeight;++N){const _=N*a-p,D=Math.max(0,_),O=Math.min(i.inHeight,f+_),P=k+N*S;for(let z=0;z<i.outWidth;++z){const W=z*o-g,U=Math.max(0,W),R=Math.min(i.inWidth,h+W);let F=y,B=0,K=0;for(let H=D;H<O;H+=l){const X=E+H*r[1];for(let Y=U;Y<R;Y+=c){const ie=X+Y*r[2],pe=t[ie+I];s==="max"&&pe>F?F=pe:s==="avg"&&(B+=pe,K++)}if(isNaN(F))break}const L=P+z*T+I;v[L]=s==="avg"?B/K:F}}}return b}function aJ(t,e,n,r,i=!1,s=!1){const a=at(r.outShape,"int32"),o=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,f=r.dilationWidth,h=r.effectiveFilterHeight,p=r.effectiveFilterWidth,g=r.padInfo.top,y=r.padInfo.left,b=at(e,n,t);for(let v=0;v<r.batchSize;++v)for(let w=0;w<r.inChannels;++w)for(let S=0;S<r.outHeight;++S){const T=S*o-g;let A=T;for(;A<0;)A+=c;const k=Math.min(r.inHeight,h+T);for(let E=0;E<r.outWidth;++E){const I=E*l-y;let N=I;for(;N<0;)N+=f;const _=Math.min(r.inWidth,p+I);let D=Number.NEGATIVE_INFINITY,O=-1;for(let P=A;P<k;P+=c){const z=P-T;for(let W=N;W<_;W+=f){const U=W-I,R=b.get(v,P,W,w);R>D&&(D=R,i?O=s?((v*r.inHeight+P)*r.inWidth+W)*r.inChannels+w:(P*r.inWidth+W)*r.inChannels+w:O=z*p+U)}}a.set(O,v,S,E,w)}}return a}function oJ(t,e,n,r,i,s){const a=i.strideDepth,o=i.strideHeight,l=i.strideWidth,c=i.dilationDepth,f=i.dilationHeight,h=i.dilationWidth,p=i.effectiveFilterDepth,g=i.effectiveFilterHeight,y=i.effectiveFilterWidth,b=i.padInfo.front,v=i.padInfo.top,w=i.padInfo.left,S=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,T=at(i.outShape,n),A=T.values,k=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],E=i.outShape[2]*i.outShape[3]*i.outShape[4],I=i.outShape[3]*i.outShape[4],N=i.outShape[4];for(let _=0;_<i.batchSize;++_){const D=_*k,O=_*r[0];for(let P=0;P<i.inChannels;++P)for(let z=0;z<i.outDepth;++z){const W=z*a-b;let U=W;for(;U<0;)U+=c;const R=Math.min(i.inDepth,p+W),F=D+z*E;for(let B=0;B<i.outHeight;++B){const K=B*o-v;let L=K;for(;L<0;)L+=f;const H=Math.min(i.inHeight,g+K),X=F+B*I;for(let Y=0;Y<i.outWidth;++Y){const ie=Y*l-w;let pe=ie;for(;pe<0;)pe+=h;const ve=Math.min(i.inWidth,y+ie),ke=X+Y*N;let Ee=S,me=0,$e=0;for(let ye=U;ye<R;ye+=c){const Ge=O+ye*r[1];for(let ze=L;ze<H;ze+=f){const Je=Ge+ze*r[2];for(let qe=pe;qe<ve;qe+=h){const Xe=Je+qe*r[3],gt=t[Xe+P];if(s==="max"&&gt>Ee?Ee=gt:s==="avg"&&(me+=gt,$e++),isNaN(Ee))break}if(isNaN(Ee))break}if(isNaN(Ee))break}const Ie=ke+P;A[Ie]=s==="avg"?me/Math.max($e,1):Ee}}}}return T}function iPe(t,e){const n=at(e.outShape,"int32"),r=e.strideDepth,i=e.strideHeight,s=e.strideWidth,a=e.dilationDepth,o=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,f=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=e.padInfo.front,g=e.padInfo.top,y=e.padInfo.left;for(let b=0;b<e.batchSize;++b)for(let v=0;v<e.inChannels;++v)for(let w=0;w<e.outDepth;++w){const S=w*r-p;let T=S;for(;T<0;)T+=a;const A=Math.min(e.inDepth,c+S);for(let k=0;k<e.outHeight;++k){const E=k*i-g;let I=E;for(;I<0;)I+=o;const N=Math.min(e.inHeight,f+E);for(let _=0;_<e.outWidth;++_){const D=_*s-y;let O=D;for(;O<0;)O+=l;const P=Math.min(e.inWidth,h+D);let z=Number.NEGATIVE_INFINITY,W=-1;for(let U=T;U<A;U+=a){const R=U-S;for(let F=I;F<N;F+=o){const B=F-E;for(let K=O;K<P;K+=l){const L=K-D,H=t.get(b,U,F,K,v);H>=z&&(z=H,W=R*f*h+B*f+L)}}}n.set(W,b,w,k,_,v)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;Me(i,"avgPool");const{filterSize:s,strides:a,pad:o,dimRoundingMode:l}=r,c=1;G(Cr(a,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const f=us(i.shape,s,a,c,o,l);let h;if(f.filterWidth===1&&f.filterHeight===1&&$t(f.inShape,f.outShape))h=da({inputs:{x:i},backend:n});else{const p=n.data.get(i.dataId).values,g=je(i.shape),y=uD(p,i.shape,i.dtype,g,f,"avg");h=n.makeTensorInfo(f.outShape,i.dtype,y.values)}return h}const aPe={kernelName:zx,backendName:"cpu",kernelFunc:sPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:a,pad:o,dimRoundingMode:l,dataFormat:c}=r;Me(i,"avgPool3d");const f=vo(i.shape,s,a,1,o,l,c),h=n.data.get(i.dataId).values,p=oJ(h,i.shape,i.dtype,je(i.shape),f,"avg");return n.makeTensorInfo(p.shape,"float32",p.values)}const lPe={kernelName:jx,backendName:"cpu",kernelFunc:oPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cPe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,{filterSize:a,strides:o,pad:l,dimRoundingMode:c}=r;Me([i,s],"avgPool3DGrad");const f=vo(s.shape,a,o,1,l,c),h=f.strideDepth,p=f.strideHeight,g=f.strideWidth,y=f.filterDepth,b=f.filterHeight,v=f.filterWidth,w=f.dilationDepth,S=f.dilationHeight,T=f.dilationWidth,A=f.effectiveFilterDepth,k=f.effectiveFilterHeight,E=f.effectiveFilterWidth,I=A-1-f.padInfo.front,N=E-1-f.padInfo.left,_=k-1-f.padInfo.top,D=at(s.shape,"float32"),O=1/(y*b*v),P=n.bufferSync(i);for(let z=0;z<f.batchSize;++z)for(let W=0;W<f.inChannels;++W)for(let U=0;U<f.inDepth;++U)for(let R=0;R<f.inHeight;++R)for(let F=0;F<f.inWidth;++F){const B=U-I,K=R-_,L=F-N;let H=0;for(let X=0;X<A;X+=w){const Y=(B+X)/h;if(!(Y<0||Y>=f.outDepth||Math.floor(Y)!==Y))for(let ie=0;ie<k;ie+=S){const pe=(K+ie)/p;if(!(pe<0||pe>=f.outHeight||Math.floor(pe)!==pe))for(let ve=0;ve<E;ve+=T){const ke=(L+ve)/g;if(ke<0||ke>=f.outWidth||Math.floor(ke)!==ke)continue;const Ee=P.get(z,Y,pe,ke,W);H+=Ee}}}D.set(H*O,z,U,R,F,W)}return n.makeTensorInfo(D.shape,D.dtype,D.values)}const uPe={kernelName:ZO,backendName:"cpu",kernelFunc:cPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fPe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,a=s;Me([i,s],"avgPoolGrad");const{filterSize:o,strides:l,pad:c}=r,f=us(a.shape,o,l,1,c),h=f.strideHeight,p=f.strideWidth,g=f.filterHeight,y=f.filterWidth,b=f.dilationHeight,v=f.dilationWidth,w=f.effectiveFilterHeight,S=f.effectiveFilterWidth,T=S-1-f.padInfo.left,A=w-1-f.padInfo.top,k=at(a.shape,"float32"),E=1/(g*y),I=n.data.get(i.dataId).values,N=at(i.shape,"float32",I);for(let _=0;_<f.batchSize;++_)for(let D=0;D<f.inChannels;++D)for(let O=0;O<f.inHeight;++O)for(let P=0;P<f.inWidth;++P){const z=O-A,W=P-T;let U=0;for(let R=0;R<w;R+=b){const F=(z+R)/h;if(!(F<0||F>=f.outHeight||Math.floor(F)!==F))for(let B=0;B<S;B+=v){const K=(W+B)/p;if(K<0||K>=f.outWidth||Math.floor(K)!==K)continue;const L=N.get(_,F,K,D);U+=L}}k.set(U*E,_,O,P,D)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const hPe={kernelName:YO,backendName:"cpu",kernelFunc:fPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,scale:s,offset:a,mean:o,variance:l}=e;G(o.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),G(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),G(s==null||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Me([i,o,l,s,a],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);const f=n.data.get(i.dataId).values,h=n.data.get(o.dataId).values,p=n.data.get(l.dataId).values,g=s?n.data.get(s.dataId).values:new Float32Array([1]),y=a?n.data.get(a.dataId).values:new Float32Array([0]),b=new Float32Array(f.length),v=y.length,w=g.length,S=p.length,T=h.length;let A=0,k=0,E=0,I=0;for(let N=0;N<f.length;++N)b[N]=y[A++]+(f[N]-h[k++])*g[E++]/Math.sqrt(p[I++]+c),A>=v&&(A=0),k>=T&&(k=0),E>=w&&(E=0),I>=S&&(I=0);return n.makeTensorInfo(i.shape,i.dtype,b)}const pPe={kernelName:e1,backendName:"cpu",kernelFunc:dPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,crops:a}=r;Me([i],"batchToSpaceND");const o=s.reduce((w,S)=>w*S),l=Wg(i.shape,s,o),c=Gg(l.length,s.length),f=qg(i.shape,s,o),h=wR(a,s.length),p=SR(f,a,s.length),g=Kt({inputs:{x:i},backend:n,attrs:{shape:l}}),y=Zr({inputs:{x:g},backend:n,attrs:{perm:c}}),b=Kt({inputs:{x:y},backend:n,attrs:{shape:f}}),v=qc({inputs:{x:b},backend:n,attrs:{begin:h,size:p}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),v}const gPe={kernelName:Ux,backendName:"cpu",kernelFunc:mPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:a}=r,o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,c=sD(o,l,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,c)}const vPe={kernelName:QO,backendName:"cpu",kernelFunc:yPe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bPe(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,s=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,o=nt(Array.from(s),Array.from(a));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const xPe={kernelName:_9,backendName:"cpu",kernelFunc:bPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wPe=Dt(Jm,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),SPe={kernelName:Jm,backendName:"cpu",kernelFunc:wPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CPe=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(be(e.shape)),i=n.data.get(e.dataId),s=i.complexTensorInfos.real,a=i.complexTensorInfos.imag,o=n.data.get(s.dataId).values,l=n.data.get(a.dataId).values;for(let c=0;c<o.length;c++){const f=o[c],h=l[c];r[c]=Math.hypot(f,h)}return n.makeOutput(r,e.shape,"float32")},TPe={kernelName:Wx,backendName:"cpu",kernelFunc:CPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nh(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.imag,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}const kPe={kernelName:g_,backendName:"cpu",kernelFunc:nh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rh(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,s=ot(i,e[0].shape)[0],a=e.map(b=>b.shape);vR(a,s);let o=sa(e.map(b=>b.shape),s);if(be(o)===0)return n.makeTensorInfo(o,e[0].dtype,[]);const l=e.filter(b=>be(b.shape)>0);if(l.length===1)return da({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const b=l.map(A=>Gc({inputs:{input:A},backend:n})),v=l.map(A=>nh({inputs:{input:A},backend:n})),w=rh({inputs:b,backend:n,attrs:{axis:s}}),S=rh({inputs:v,backend:n,attrs:{axis:s}}),T=li({inputs:{real:w,imag:S},backend:n});return b.forEach(A=>n.disposeIntermediateTensorInfo(A)),v.forEach(A=>n.disposeIntermediateTensorInfo(A)),n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(S),T}const c=l.map(b=>{const w=[-1,be(b.shape.slice(s))];return Kt({inputs:{x:b},backend:n,attrs:{shape:w}})}),f=c.map(b=>({vals:n.data.get(b.dataId).values,shape:b.shape}));o=sa(c.map(b=>b.shape),1);const h=c[0].shape[0]===1,p=hQ(f,o,e[0].dtype,h),g=sa(l.map(b=>b.shape),s),y=n.makeTensorInfo(g,e[0].dtype,p);return c.forEach(b=>n.disposeIntermediateTensorInfo(b)),y}const APe={kernelName:Gx,backendName:"cpu",kernelFunc:rh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lJ(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:a,pad:o,dataFormat:l,dilations:c,dimRoundingMode:f}=r;Me([i,s],"conv2d");const h=bo(l),p=cr(i.shape,s.shape,a,c,o,f,!1,h),g=p.filterHeight,y=p.filterWidth,b=p.dilationHeight,v=p.dilationWidth,w=p.padInfo.left,S=p.padInfo.top,T=p.dataFormat==="channelsLast",A=new or(p.outShape,i.dtype),k=je(i.shape),E=je(s.shape),I=k[0],N=T?k[1]:k[2],_=T?k[2]:1,D=T?1:k[1],O=A.strides[0],P=T?A.strides[1]:A.strides[2],z=T?A.strides[2]:1,W=T?1:A.strides[1],U=n.data.get(i.dataId).values,R=n.data.get(s.dataId).values,F=A.values;for(let B=0;B<p.batchSize;++B){const K=B*I,L=B*O;for(let H=0;H<p.outHeight;++H){const X=L+H*P,Y=H*p.strideHeight-S;for(let ie=0;ie<g;++ie){const pe=Y+ie*b;if(pe<0||pe>=p.inHeight)continue;const ve=ie*E[0],ke=K+pe*N;for(let Ee=0;Ee<p.outWidth;++Ee){const me=X+Ee*z,$e=Ee*p.strideWidth-w;for(let Ie=0;Ie<y;++Ie){const ye=$e+Ie*v;if(ye<0||ye>=p.inWidth)continue;const Ge=ve+Ie*E[1],ze=ke+ye*_;let Je=Ge;for(let qe=0;qe<p.inChannels;++qe){const Xe=U[ze+qe*D];for(let gt=0;gt<p.outChannels;++gt)F[me+gt*W]+=Xe*R[Je+gt];Je+=p.outChannels}}}}}}return n.makeTensorInfo(A.shape,A.dtype,F)}const EPe={kernelName:qx,backendName:"cpu",kernelFunc:lJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Pe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:a,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:f}=r;Me([i,s],"conv2dBackpropFilter");const h=bo(l),p=cr(i.shape,f,a,1,o,c,!1,h),{strideHeight:g,strideWidth:y,filterHeight:b,filterWidth:v}=p,w=p.dataFormat==="channelsLast",S=new or(p.filterShape,"float32"),T=p.padInfo.left,A=p.padInfo.top,k=n.data.get(i.dataId).values,E=n.data.get(s.dataId).values,I=new or(i.shape,i.dtype,k),N=new or(s.shape,s.dtype,E);for(let _=0;_<b;++_){const D=Math.max(0,Math.ceil((A-_)/g)),O=Math.min(p.outHeight,(p.inHeight+A-_)/g);for(let P=0;P<v;++P){const z=Math.max(0,Math.ceil((T-P)/y)),W=Math.min(p.outWidth,(p.inWidth+T-P)/y);for(let U=0;U<p.inChannels;++U)for(let R=0;R<p.outChannels;++R){let F=0;for(let B=0;B<p.batchSize;++B)for(let K=D;K<O;++K){const L=_+K*g-A;for(let H=z;H<W;++H){const X=P+H*y-T;w?F+=I.get(B,L,X,U)*N.get(B,K,H,R):F+=I.get(B,U,L,X)*N.get(B,R,K,H)}}S.set(F,_,P,U,R)}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const IPe={kernelName:t_,backendName:"cpu",kernelFunc:$Pe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NPe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{inputShape:a,strides:o,pad:l,dataFormat:c,dimRoundingMode:f}=r;Me([i,s],"conv2dBackpropInput");const h=je(s.shape),p=je(i.shape);let g=bo(c);const y=cr(a,s.shape,o,1,l,f,!1,g),b=new or(y.inShape,"float32"),v=b.values,w=n.data.get(i.dataId).values,S=n.data.get(s.dataId).values,[T,A,k]=h,{batchSize:E,filterHeight:I,filterWidth:N,inChannels:_,inHeight:D,inWidth:O,outChannels:P,outHeight:z,outWidth:W,strideHeight:U,strideWidth:R}=y;g=y.dataFormat;const F=I-1-y.padInfo.top,B=N-1-y.padInfo.left,K=g==="channelsLast",L=b.strides[0],H=K?b.strides[1]:b.strides[2],X=K?b.strides[2]:1,Y=K?1:b.strides[1],ie=p[0],pe=K?p[1]:p[2],ve=K?p[2]:1,ke=K?1:p[1];for(let Ee=0;Ee<E;++Ee)for(let me=0;me<_;++me)for(let $e=0;$e<D;++$e){const Ie=$e-F,ye=Math.max(0,Math.ceil(Ie/U)),Ge=Math.min(z,(I+Ie)/U);for(let ze=0;ze<O;++ze){const Je=ze-B,qe=Math.max(0,Math.ceil(Je/R)),Xe=Math.min(W,(N+Je)/R);let gt=0;for(let Xt=ye;Xt<Ge;++Xt){const kn=Xt*U-Ie;for(let cn=qe;cn<Xe;++cn){const Jr=cn*R-Je,Ar=ie*Ee+pe*Xt+ve*cn,ei=T*(I-1-kn)+A*(N-1-Jr)+k*me;for(let ti=0;ti<P;++ti){const pn=w[Ar+ke*ti],hr=S[ei+ti];gt+=pn*hr}}}const Un=L*Ee+H*$e+X*ze+Y*me;v[Un]=gt}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const OPe={kernelName:Hx,backendName:"cpu",kernelFunc:NPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Pe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:a,pad:o,dilations:l}=r;Me([i,s],"conv3d");const c=Al(i.shape,s.shape,a,l,o),{filterDepth:f,filterHeight:h,filterWidth:p,dilationDepth:g,dilationHeight:y,dilationWidth:b,padInfo:v}=c,w=v.front,S=v.left,T=v.top,A=new or(c.outShape,i.dtype),k=n.data.get(i.dataId).values,E=n.data.get(s.dataId).values,I=A.values,N=je(i.shape),_=je(s.shape);for(let D=0;D<c.batchSize;++D){const O=D*N[0],P=D*A.strides[0];for(let z=0;z<c.outDepth;++z){const W=P+z*A.strides[1],U=z*c.strideDepth-w;for(let R=0;R<f;++R){const F=U+R*g;if(F<0||F>=c.inDepth)continue;const B=R*_[0],K=O+F*N[1];for(let L=0;L<c.outHeight;++L){const H=W+L*A.strides[2],X=L*c.strideHeight-T;for(let Y=0;Y<h;++Y){const ie=X+Y*y;if(ie<0||ie>=c.inHeight)continue;const pe=B+Y*_[1],ve=K+ie*N[2];for(let ke=0;ke<c.outWidth;++ke){const Ee=H+ke*c.outChannels,me=ke*c.strideWidth-S;for(let $e=0;$e<p;++$e){const Ie=me+$e*b;if(Ie<0||Ie>=c.inWidth)continue;const ye=pe+$e*_[2],Ge=ve+Ie*c.inChannels;let ze=ye;for(let Je=0;Je<c.inChannels;++Je){const qe=k[Ge+Je];for(let Xe=0;Xe<c.outChannels;++Xe)I[Ee+Xe]+=qe*E[ze+Xe];ze+=c.outChannels}}}}}}}}return n.makeTensorInfo(A.shape,A.dtype,A.values)}const RPe={kernelName:Kx,backendName:"cpu",kernelFunc:_Pe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:a,pad:o,filterShape:l}=r;Me([i,s],"conv3dBackpropFilterV2");const c=je(i.shape),f=je(s.shape),h=Al(i.shape,l,a,1,o),p=h.strideDepth,g=h.strideHeight,y=h.strideWidth,b=h.filterDepth,v=h.filterHeight,w=h.filterWidth,S=new or(h.filterShape,"float32"),T=S.values,[A,k,E,I]=S.strides,N=n.data.get(s.dataId).values,[_,D,O,P]=f,z=n.data.get(i.dataId).values,[W,U,R,F]=c,B=h.padInfo.front,K=h.padInfo.left,L=h.padInfo.top;for(let H=0;H<b;++H){const X=Math.max(0,Math.ceil((B-H)/p)),Y=Math.min(h.outDepth,(h.inDepth+B-H)/p),ie=H*A;for(let pe=0;pe<v;++pe){const ve=Math.max(0,Math.ceil((L-pe)/g)),ke=Math.min(h.outHeight,(h.inHeight+L-pe)/g),Ee=pe*k+ie;for(let me=0;me<w;++me){const $e=Math.max(0,Math.ceil((K-me)/y)),Ie=Math.min(h.outWidth,(h.inWidth+K-me)/y),ye=me*E+Ee;for(let Ge=0;Ge<h.inChannels;++Ge){const ze=Ge*I+ye;for(let Je=0;Je<h.outChannels;++Je){let qe=0;for(let Xe=0;Xe<h.batchSize;++Xe){const gt=Xe*W,Un=Xe*_;for(let Xt=X;Xt<Y;++Xt){const cn=(H+Xt*p-B)*U+gt,Jr=Xt*D+Un;for(let Ar=ve;Ar<ke;++Ar){const ti=(pe+Ar*g-L)*R+cn,pn=Ar*O+Jr;for(let hr=$e;hr<Ie;++hr){const Fh=(me+hr*y-K)*F+ti,Bh=hr*P+pn;qe+=z[Fh+Ge]*N[Bh+Je]}}}}T[ze+Je]=qe}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const MPe={kernelName:n_,backendName:"cpu",kernelFunc:DPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PPe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{pad:a,strides:o,inputShape:l}=r;Me([i],"conv3dBackpropInputV2");const c=je(i.shape),f=je(s.shape),h=Al(l,s.shape,o,1,a),p=new or(h.inShape,"float32"),g=p.values,[y,b,v,w]=p.strides,S=n.data.get(i.dataId).values,[T,A,k,E]=c,I=n.data.get(s.dataId).values,[N,_,D,O]=f,{batchSize:P,filterDepth:z,filterHeight:W,filterWidth:U,inChannels:R,inDepth:F,inHeight:B,inWidth:K,outChannels:L,outDepth:H,outHeight:X,outWidth:Y,strideDepth:ie,strideHeight:pe,strideWidth:ve}=h,ke=z-1-h.padInfo.front,Ee=W-1-h.padInfo.top,me=U-1-h.padInfo.left;for(let $e=0;$e<P;++$e)for(let Ie=0;Ie<R;++Ie)for(let ye=0;ye<F;++ye){const Ge=ye-ke,ze=Math.max(0,Math.ceil(Ge/ie)),Je=Math.min(H,(z+Ge)/ie);for(let qe=0;qe<B;++qe){const Xe=qe-Ee,gt=Math.max(0,Math.ceil(Xe/pe)),Un=Math.min(X,(W+Xe)/pe);for(let Xt=0;Xt<K;++Xt){const kn=Xt-me,cn=Math.max(0,Math.ceil(kn/ve)),Jr=Math.min(Y,(U+kn)/ve);let Ar=0;for(let ei=ze;ei<Je;++ei){const ti=ei*ie-Ge;for(let pn=gt;pn<Un;++pn){const hr=pn*pe-Xe;for(let Wn=cn;Wn<Jr;++Wn){const Fh=Wn*ve-kn,Bh=T*$e+A*ei+k*pn+E*Wn,yw=N*(z-1-ti)+_*(W-1-hr)+D*(U-1-Fh)+O*Ie;for(let ya=0;ya<L;++ya){const uu=S[Bh+ya],va=I[yw+ya];Ar+=uu*va}}}}g[y*$e+b*ye+v*qe+w*Xt+Ie]=Ar}}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const LPe={kernelName:r_,backendName:"cpu",kernelFunc:PPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FPe=Dt(eg,t=>Math.cos(t)),BPe={kernelName:eg,backendName:"cpu",kernelFunc:FPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zPe=Dt(tg,t=>Math.cosh(t)),jPe={kernelName:tg,backendName:"cpu",kernelFunc:zPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VPe(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:s,boxInd:a}=e,{cropSize:o,method:l,extrapolationValue:c}=r,[f,h,p,g]=i.shape,y=s.shape[0],[b,v]=o,w=at([y,b,v,g],"float32"),S=n.data.get(s.dataId).values,T=n.data.get(a.dataId).values,A=n.data.get(i.dataId).values,k=je(i.shape),E=je(w.shape);for(let I=0;I<y;I++){const N=I*4,_=S[N],D=S[N+1],O=S[N+2],P=S[N+3],z=T[I];if(z>=f)continue;const W=b>1?(O-_)*(h-1)/(b-1):0,U=v>1?(P-D)*(p-1)/(v-1):0;for(let R=0;R<b;R++){const F=b>1?_*(h-1)+R*W:.5*(_+O)*(h-1);if(F<0||F>h-1){for(let B=0;B<v;B++)for(let K=0;K<g;K++){const L=K+B*E[2]+R*E[1]+I*E[0];w.values[L]=c}continue}if(l==="bilinear"){const B=Math.floor(F),K=Math.ceil(F),L=F-B;for(let H=0;H<v;H++){const X=v>1?D*(p-1)+H*U:.5*(D+P)*(p-1);if(X<0||X>p-1){for(let ve=0;ve<g;ve++){const ke=ve+H*E[2]+R*E[1]+I*E[0];w.values[ke]=c}continue}const Y=Math.floor(X),ie=Math.ceil(X),pe=X-Y;for(let ve=0;ve<g;ve++){let ke=ve+Y*k[2]+B*k[1]+z*k[0];const Ee=A[ke];ke=ve+ie*k[2]+B*k[1]+z*k[0];const me=A[ke];ke=ve+Y*k[2]+K*k[1]+z*k[0];const $e=A[ke];ke=ve+ie*k[2]+K*k[1]+z*k[0];const Ie=A[ke],ye=Ee+(me-Ee)*pe,Ge=$e+(Ie-$e)*pe;ke=ve+H*E[2]+R*E[1]+I*E[0],w.values[ke]=ye+(Ge-ye)*L}}}else for(let B=0;B<v;++B){const K=v>1?D*(p-1)+B*U:.5*(D+P)*(p-1);if(K<0||K>p-1){for(let X=0;X<g;X++){const Y=X+B*E[2]+R*E[1]+I*E[0];w.values[Y]=c}continue}const L=Math.round(K),H=Math.round(F);for(let X=0;X<g;X++){const Y=X+L*k[2]+H*k[1]+z*k[0],ie=X+B*E[2]+R*E[1]+I*E[0];w.values[ie]=A[Y]}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const UPe={kernelName:s_,backendName:"cpu",kernelFunc:VPe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:a,reverse:o}=r;Me(i,"cumprod");const l=on([s],i.shape.length);let c=i;l!=null&&(c=Zr({inputs:{x:i},backend:n,attrs:{perm:l}}));const f=Sn(1,i.shape.length)[0];if(f!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${f}`);const h=hi(c.dtype,"int32"),p=WO(be(c.shape),h),g=n.data.get(c.dataId).values,y=c.shape[c.shape.length-1],b=o?(w,S)=>w+y-S-1:(w,S)=>w+S;for(let w=0;w<g.length;w+=y)for(let S=0;S<y;S++){const T=b(w,S);if(S===0)p[T]=a?1:g[T];else{const A=b(w,S-1);p[T]=a?g[A]*p[A]:g[T]*p[A]}}const v=n.makeTensorInfo(c.shape,h,p);if(l!=null){const w=El(l),S=Zr({inputs:{x:v},backend:n,attrs:{perm:w}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(c),S}return v}const GPe={kernelName:i_,backendName:"cpu",kernelFunc:WPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:a,reverse:o}=r;Me(i,"cumsum");const l=on([s],i.shape.length);let c=i;l!=null&&(c=Zr({inputs:{x:i},backend:n,attrs:{perm:l}}));const f=Sn(1,i.shape.length)[0];if(f!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${f}`);const h=hi(c.dtype,"int32"),p=wr(be(c.shape),h),g=n.data.get(c.dataId).values,y=c.shape[c.shape.length-1],b=o?(w,S)=>w+y-S-1:(w,S)=>w+S;for(let w=0;w<g.length;w+=y)for(let S=0;S<y;S++){const T=b(w,S);if(S===0)p[T]=a?0:g[T];else{const A=b(w,S-1);p[T]=a?g[A]+p[A]:g[T]+p[A]}}const v=n.makeTensorInfo(c.shape,h,p);if(l!=null){const w=El(l),S=Zr({inputs:{x:v},backend:n,attrs:{perm:w}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(c),S}return v}const HPe={kernelName:Xx,backendName:"cpu",kernelFunc:qPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:a,binaryOutput:o}=r;if(i.shape.length===1){const l=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,f=sD(l,c,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,f)}else if(i.shape.length===2){const l=n.bufferSync(i),c=n.bufferSync(s),f=cQ(l,c,a,o);return n.makeTensorInfo(f.shape,s.dtype,f.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const XPe={kernelName:a_,backendName:"cpu",kernelFunc:KPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:s,dataFormat:a}=r;G(a==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${a}`);const o=i.shape[0],l=i.shape[1],c=i.shape[2],f=i.shape[3],h=l*s,p=c*s,g=f/(s*s),y=n.data.get(i.dataId).values,b=new Float32Array(o*h*p*g);let v=0;for(let w=0;w<o;++w)for(let S=0;S<h;++S){const T=Math.floor(S/s),A=S%s;for(let k=0;k<p;++k){const E=Math.floor(k/s),I=k%s,N=(A*s+I)*g;for(let _=0;_<g;++_){const O=_+N+f*(E+c*(T+l*w));b[v++]=y[O]}}}return n.makeTensorInfo([o,h,p,g],i.dtype,b)}const ZPe={kernelName:o_,backendName:"cpu",kernelFunc:YPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cJ(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:a,pad:o,dilations:l,dimRoundingMode:c}=r;Me([i,s],"depthwiseConv2DNative");const f=je(i.shape),h=je(s.shape);let p=l;p==null&&(p=[1,1]),G(Cr(a,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${p}'`);const g=cr(i.shape,s.shape,a,p,o,c,!0),{filterHeight:y,filterWidth:b,dilationHeight:v,dilationWidth:w,padInfo:S}=g,T=S.left,A=S.top,k=g.outChannels/g.inChannels,E=new or(g.outShape,i.dtype),I=n.data.get(i.dataId).values,N=n.data.get(s.dataId).values,_=E.values;for(let D=0;D<g.batchSize;++D){const O=D*f[0],P=D*E.strides[0];for(let z=0;z<g.outHeight;++z){const W=P+z*E.strides[1],U=z*g.strideHeight-A;for(let R=0;R<y;++R){const F=U+R*v;if(F<0||F>=g.inHeight)continue;const B=R*h[0],K=O+F*f[1];for(let L=0;L<g.outWidth;++L){const H=W+L*E.strides[2],X=L*g.strideWidth-T;for(let Y=0;Y<b;++Y){const ie=X+Y*w;if(ie<0||ie>=g.inWidth)continue;const pe=B+Y*h[1],ve=K+ie*g.inChannels;let ke=H,Ee=pe;for(let me=0;me<g.inChannels;++me){const $e=I[ve+me];for(let Ie=0;Ie<k;++Ie)_[ke+Ie]+=$e*N[Ee+Ie];ke+=k,Ee+=k}}}}}}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const QPe={kernelName:Yx,backendName:"cpu",kernelFunc:cJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:c,filterShape:f}=r;Me([i,s],"depthwiseConv2dNativeBackpropFilter");const h=cr(i.shape,f,a,o,l,c,!0),{strideHeight:p,strideWidth:g,filterHeight:y,filterWidth:b}=h,v=new or(h.filterShape,"float32"),w=h.padInfo.left,S=h.padInfo.top,T=h.outChannels/h.inChannels,A=n.data.get(i.dataId).values,k=new or(i.shape,i.dtype,A),E=n.data.get(s.dataId).values,I=new or(s.shape,s.dtype,E);for(let N=0;N<y;++N){const _=Math.max(0,Math.ceil((S-N)/p)),D=Math.min(h.outHeight,(h.inHeight+S-N)/p);for(let O=0;O<b;++O){const P=Math.max(0,Math.ceil((w-O)/g)),z=Math.min(h.outWidth,(h.inWidth+w-O)/g);for(let W=0;W<h.outChannels;++W){const U=Math.trunc(W/T),R=W%T;let F=0;for(let B=0;B<h.batchSize;++B)for(let K=_;K<D;++K){const L=N+K*p-S;for(let H=P;H<z;++H){const X=O+H*g-w;F+=k.get(B,L,X,U)*I.get(B,K,H,W)}}v.set(F,N,O,U,R)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const e3e={kernelName:l_,backendName:"cpu",kernelFunc:JPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t3e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:c,inputShape:f}=r;Me([i,s],"depthwiseConv2DNativeBackpropInput");const h=je(i.shape),p=je(s.shape),g=cr(f,s.shape,a,o,l,c,!0),y=new or(g.inShape,"float32"),b=y.values,[v,w,S]=y.strides,T=n.data.get(i.dataId).values,[A,k,E]=h,I=n.data.get(s.dataId).values,[N,_,D]=p,{batchSize:O,filterHeight:P,filterWidth:z,inChannels:W,inHeight:U,inWidth:R,outChannels:F,outHeight:B,outWidth:K,strideHeight:L,strideWidth:H}=g,X=P-1-g.padInfo.top,Y=z-1-g.padInfo.left,ie=F/W;for(let pe=0;pe<O;++pe)for(let ve=0;ve<W;++ve)for(let ke=0;ke<U;++ke){const Ee=ke-X,me=Math.max(0,Math.ceil(Ee/L)),$e=Math.min(B,(P+Ee)/L);for(let Ie=0;Ie<R;++Ie){const ye=Ie-Y,Ge=Math.max(0,Math.ceil(ye/H)),ze=Math.min(K,(z+ye)/H);let Je=0;for(let qe=me;qe<$e;++qe){const Xe=qe*L-Ee;for(let gt=Ge;gt<ze;++gt){const Un=gt*H-ye,Xt=A*pe+k*qe+E*gt,kn=N*(P-1-Xe)+_*(z-1-Un)+D*ve;for(let cn=0;cn<ie;++cn){const Jr=ve*ie+cn,Ar=T[Xt+Jr],ei=I[kn+cn];Je+=Ar*ei}}}b[v*pe+w*ke+S*Ie+ve]=Je}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const n3e={kernelName:c_,backendName:"cpu",kernelFunc:t3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r3e(t){const{inputs:e,backend:n}=t,{x:r}=e,i=be(r.shape),s=n.data.get(r.dataId).values,a=at([i,i],r.dtype),o=a.values;for(let c=0;c<s.length;c++)o[c*i+c]=s[c];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,a.dtype,a.values)}const i3e={kernelName:R9,backendName:"cpu",kernelFunc:r3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s3e={kernelName:Zx,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i}=t,{strides:s,pad:a,dilations:o}=n,l=e,c=l.data.get(r.dataId).values,f=r.shape.length,h=l.data.get(i.dataId).values,p=i.shape.length,{batchSize:g,inHeight:y,inWidth:b,inChannels:v,outHeight:w,outWidth:S,padInfo:T,strideHeight:A,strideWidth:k,filterHeight:E,filterWidth:I,dilationHeight:N,dilationWidth:_,outShape:D}=Bg(r.shape,i.shape,s,a,"NHWC",o),O=be(D),P=D.length,z=bn(r.dtype,O);for(let U=0;U<g;++U)for(let R=0;R<w;++R){const F=R*A-T.top;for(let B=0;B<S;++B){const K=B*k-T.left;for(let L=0;L<v;++L){let H=Number.MIN_SAFE_INTEGER;for(let Y=0;Y<E;++Y){const ie=F+Y*N;if(ie>=0&&ie<y)for(let pe=0;pe<I;++pe){const ve=K+pe*_;if(ve>=0&&ve<b){const ke=ra([U,ie,ve,L],f,je(r.shape)),Ee=ra([Y,pe,L],p,je(i.shape)),me=c[ke]+h[Ee];me>H&&(H=me)}}}const X=ra([U,R,B,L],P,je(D));z[X]=H}}}return{dataId:l.write(Qc(z,r.dtype),D,r.dtype),shape:D,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a3e={kernelName:yI,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:s}=t,{strides:a,pad:o,dilations:l}=n,c=e,f=$s(r.shape,c.data.get(r.dataId).values),h=$s(i.shape,c.data.get(i.dataId).values),{batchSize:p,inHeight:g,inWidth:y,inChannels:b,outHeight:v,outWidth:w,padInfo:S,strideHeight:T,strideWidth:A,filterHeight:k,filterWidth:E,dilationHeight:I,dilationWidth:N,outShape:_}=Bg(r.shape,i.shape,a,o,"NHWC",l);G(s.rank===_.length,()=>`Error in ${yI}, dy must have the same rank as output ${_.length}, but got ${s.rank}`);const D=$s(_,c.data.get(s.dataId).values),O=I9(i.shape,i.dtype);for(let z=0;z<p;++z)for(let W=0;W<v;++W){const U=W*T-S.top;for(let R=0;R<w;++R){const F=R*A-S.left;for(let B=0;B<b;++B){let K=Number.MIN_SAFE_INTEGER,L=0,H=0;for(let X=0;X<k;++X){const Y=U+X*I;if(Y>=0&&Y<g)for(let ie=0;ie<E;++ie){const pe=F+ie*N;if(pe>=0&&pe<y){const ve=f[z][Y][pe][B]+h[X][ie][B];ve>K&&(K=ve,L=X,H=ie)}}}O[L][H][B]+=D[z][W][R][B]}}}return{dataId:c.write(Qc(O,r.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o3e={kernelName:gI,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:s}=t,{strides:a,pad:o,dilations:l}=n,c=e,f=$s(r.shape,c.data.get(r.dataId).values),h=$s(i.shape,c.data.get(i.dataId).values),{batchSize:p,inHeight:g,inWidth:y,inChannels:b,outHeight:v,outWidth:w,padInfo:S,strideHeight:T,strideWidth:A,filterHeight:k,filterWidth:E,dilationHeight:I,dilationWidth:N,outShape:_}=Bg(r.shape,i.shape,a,o,"NHWC",l);G(s.rank===_.length,()=>`Error in ${gI}, dy must have the same rank as output ${_.length}, but got ${s.rank}`);const D=$s(_,c.data.get(s.dataId).values),O=I9(r.shape,r.dtype);for(let z=0;z<p;++z)for(let W=0;W<v;++W){const U=W*T-S.top;for(let R=0;R<w;++R){const F=R*A-S.left;for(let B=0;B<b;++B){let K=Number.MIN_SAFE_INTEGER,L=U<0?0:U,H=F<0?0:F;for(let X=0;X<k;++X){const Y=U+X*I;if(Y>=0&&Y<g)for(let ie=0;ie<E;++ie){const pe=F+ie*N;if(pe>=0&&pe<y){const ve=f[z][Y][pe][B]+h[X][ie][B];ve>K&&(K=ve,L=Y,H=pe)}}}O[z][L][H][B]+=D[z][W][R][B]}}}return{dataId:c.write(Qc(O,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l3e(t){const{inputs:e,backend:n,attrs:r}=t,{image:i}=e,{canvas:s,options:a}=r,{contextOptions:o,imageOptions:l}=a||{},c=(l==null?void 0:l.alpha)||1,f=(o==null?void 0:o.contextType)||"2d";if(f!=="2d")throw new Error(`Context type ${o.contextType} is not supported by the CPU backend.`);const h=s.getContext(f,(o==null?void 0:o.contextAttributes)||{});if(h==null)throw new Error(`Could not get the context with ${f} type.`);const[p,g]=i.shape.slice(0,2),y=i.shape.length===2?1:i.shape[2],b=n.data.get(i.dataId).values,v=i.dtype==="float32"?255:1,w=new Uint8ClampedArray(g*p*4);for(let T=0;T<p*g;++T){const A=[0,0,0,255*c];for(let E=0;E<y;E++){const I=b[T*y+E];if(i.dtype==="float32"){if(I<0||I>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${I}.`)}else if(i.dtype==="int32"&&(I<0||I>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${I}.`);y===1?(A[0]=I*v,A[1]=I*v,A[2]=I*v):A[E]=I*v}const k=T*4;w[k+0]=Math.round(A[0]),w[k+1]=Math.round(A[1]),w[k+2]=Math.round(A[2]),w[k+3]=Math.round(A[3])}s.width=g,s.height=p;const S=new ImageData(w,g,p);return h.putImageData(S,0,0),i}const c3e={kernelName:jTe,backendName:"cpu",kernelFunc:l3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ty(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r;Me(i,"sum");let o;i.dtype==="bool"?o=gl({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):o=da({inputs:{x:i},backend:n});const l=o.shape.length,c=ot(s,o.shape),f=on(c,l);let h=c,p=o;f!=null&&(p=Zr({inputs:{x:o},backend:n,attrs:{perm:f}}),h=Sn(h.length,l)),ur("sum",h,p.shape.length);const[g,y]=er(p.shape,h),b=hi(p.dtype,"int32");let v=Vb(n,g,b);const w=be(y),S=n.data.get(v.dataId).values,T=n.data.get(p.dataId).values;for(let A=0;A<S.length;++A){const k=A*w;let E=0;for(let I=0;I<w;++I)E+=T[k+I];S[A]=E}if(a){const A=On(v.shape,c),k=v;v=Kt({inputs:{x:v},backend:n,attrs:{shape:A}}),n.disposeIntermediateTensorInfo(k)}return n.disposeIntermediateTensorInfo(o),f!=null&&n.disposeIntermediateTensorInfo(p),v}const u3e={kernelName:N1,backendName:"cpu",kernelFunc:ty};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f3e(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,s=e,{allDims:a,summedDims:o,idDims:l}=NR(i,s.length);_R(a.length,l,s);const{path:c,steps:f}=RR(o,l),h=f.length;let p=null,g=a.length;const y=[];for(let b=0;b<h;++b){for(const v of f[b]){const{permutationIndices:w,expandDims:S}=OR(g,l[v]);let T;DR(w)?T=s[v]:(T=Zr({inputs:{x:s[v]},backend:n,attrs:{perm:w}}),y.push(T));const A=T.shape.slice();for(let k=0;k<S.length;++k)A.splice(S[k],0,1);$t(T.shape,A)||(T=Kt({inputs:{x:T},backend:n,attrs:{shape:A}}),y.push(T)),p===null?p=T:(p=ow({inputs:{a:T,b:p},backend:n}),y.push(p))}b<h-1&&(c[b]>=0&&(p=ty({inputs:{x:p},backend:n,attrs:{axis:c[b]-(a.length-g),keepDims:!1}}),y.push(p)),g--)}for(const b of y)b!==p&&n.disposeIntermediateTensorInfo(b);return p}const h3e={kernelName:u_,backendName:"cpu",kernelFunc:f3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d3e(t){const{inputs:e,backend:n}=t,{dy:r,y:i}=e;Me([r,i],"eluGrad");const s=new Float32Array(be(i.shape)),a=n.data.get(i.dataId).values,o=n.data.get(r.dataId).values;for(let l=0;l<a.length;++l){const c=a[l];c>=0?s[l]=o[l]:s[l]=o[l]*(c+1)}return n.makeTensorInfo(i.shape,"float32",s)}const p3e={kernelName:f_,backendName:"cpu",kernelFunc:d3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m3e=CR,g3e=TR,y3e=kR,v3e=AR,b3e=ER,x3e=$R,w3e=Dt(ig,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+m3e*n);return e*(1-((((x3e*r+b3e)*r+v3e)*r+y3e)*r+g3e)*r*Math.exp(-n*n))}),S3e={kernelName:ig,backendName:"cpu",kernelFunc:w3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gb(t){const{inputs:e,backend:n,attrs:r}=t,{input:i}=e,{dim:s}=r,a=i.shape.length,o=i.shape.slice();let l=s;return s<0&&(G(-(a+1)<=s,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),l=a+s+1),o.splice(l,0,1),Kt({inputs:{x:i},backend:n,attrs:{shape:o}})}const C3e={kernelName:Jx,backendName:"cpu",kernelFunc:Gb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T3e=Tn((t,e)=>t/e),fD=Vn(ng,T3e),UI={kernelName:ng,backendName:"cpu",kernelFunc:fD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uJ(t,e,n){const r=t.shape,i=r[0],s=r[1],a=n.data.get(t.dataId),o=a.complexTensorInfos.real,l=a.complexTensorInfos.imag,c=[i,s],f=be(c),h=xr("float32",f),p=xr("float32",f);for(let v=0;v<i;v++){const w=qc({inputs:{x:o},backend:n,attrs:{begin:[v,0],size:[1,s]}}),S=qc({inputs:{x:l},backend:n,attrs:{begin:[v,0],size:[1,s]}}),T=li({inputs:{real:w,imag:S},backend:n}),{real:A,imag:k}=k3e(T,e,n),E=uo(A,k);for(let I=0;I<s;I++){const N=IR(E,I);h[v*s+I]=N.real,p[v*s+I]=N.imag}n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo(T)}const g=n.makeTensorInfo(c,"float32",h),y=n.makeTensorInfo(c,"float32",p),b=li({inputs:{real:g,imag:y},backend:n});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),b}function k3e(t,e,n){const r=be(t.shape),i=n.data.get(t.dataId),s=n.data.get(i.complexTensorInfos.real.dataId).values,a=n.data.get(i.complexTensorInfos.imag.dataId).values;if(A3e(r)){const o=WI(s,a,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const c=n.makeTensorInfo(l,"float32",o.real),f=n.makeTensorInfo(l,"float32",o.imag),h=n.makeTensorInfo([],"float32",kl(r,"float32")),p=da({inputs:{x:h},backend:n}),g=UI.kernelFunc({inputs:{a:c,b:h},backend:n}),y=UI.kernelFunc({inputs:{a:f,b:p},backend:n}),b=n.data.get(g.dataId).values,v=n.data.get(y.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),{real:b,imag:v}}return o}else{const o=uo(s,a),l=E3e(o,r,e);return SX(l)}}function A3e(t){return(t&t-1)===0}function WI(t,e,n,r,i){if(n===1)return{real:t,imag:e};const s=uo(t,e),a=n/2,o=CX(s),l=o.real,c=o.imag,f=[l.length],h=i.makeTensorInfo(f,"float32",l),p=i.makeTensorInfo(f,"float32",c),g=li({inputs:{real:h,imag:p},backend:i}),y=TX(s),b=y.real,v=y.imag,w=[b.length],S=i.makeTensorInfo(w,"float32",b),T=i.makeTensorInfo(w,"float32",v),A=li({inputs:{real:S,imag:T},backend:i}),k=WI(l,c,a,r,i),E=k.real,I=k.imag,N=[E.length],_=i.makeTensorInfo(N,"float32",E),D=i.makeTensorInfo(N,"float32",I),O=li({inputs:{real:_,imag:D},backend:i}),P=WI(b,v,a,r,i),z=P.real,W=P.imag,U=[z.length],R=i.makeTensorInfo(U,"float32",z),F=i.makeTensorInfo(U,"float32",W),B=li({inputs:{real:R,imag:F},backend:i}),K=AX(n,r),L=[K.real.length],H=i.makeTensorInfo(L,"float32",K.real),X=i.makeTensorInfo(L,"float32",K.imag),Y=li({inputs:{real:H,imag:X},backend:i}),ie=ow({inputs:{a:Y,b:B},backend:i}),pe=th({inputs:{a:O,b:ie},backend:i}),ve=cD({inputs:{a:O,b:ie},backend:i}),ke=Gc({inputs:{input:pe},backend:i}),Ee=Gc({inputs:{input:ve},backend:i}),me=nh({inputs:{input:pe},backend:i}),$e=nh({inputs:{input:ve},backend:i}),Ie=rh({inputs:[ke,Ee],backend:i,attrs:{axis:0}}),ye=rh({inputs:[me,$e],backend:i,attrs:{axis:0}}),Ge=i.data.get(Ie.dataId).values,ze=i.data.get(ye.dataId).values;return i.disposeIntermediateTensorInfo(h),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(g),i.disposeIntermediateTensorInfo(S),i.disposeIntermediateTensorInfo(T),i.disposeIntermediateTensorInfo(A),i.disposeIntermediateTensorInfo(_),i.disposeIntermediateTensorInfo(D),i.disposeIntermediateTensorInfo(O),i.disposeIntermediateTensorInfo(R),i.disposeIntermediateTensorInfo(F),i.disposeIntermediateTensorInfo(B),i.disposeIntermediateTensorInfo(H),i.disposeIntermediateTensorInfo(X),i.disposeIntermediateTensorInfo(Y),i.disposeIntermediateTensorInfo(ie),i.disposeIntermediateTensorInfo(pe),i.disposeIntermediateTensorInfo(ve),i.disposeIntermediateTensorInfo(ke),i.disposeIntermediateTensorInfo(me),i.disposeIntermediateTensorInfo(Ee),i.disposeIntermediateTensorInfo($e),i.disposeIntermediateTensorInfo(Ie),i.disposeIntermediateTensorInfo(ye),{real:Ge,imag:ze}}function E3e(t,e,n){const r=new Float32Array(e*2);for(let i=0;i<e;i++){let s=0,a=0;for(let o=0;o<e;o++){const l=EX(i*o,e,n),c=IR(t,o);s+=c.real*l.real-c.imag*l.imag,a+=c.real*l.imag+c.imag*l.real}n&&(s/=e,a/=e),kX(r,s,a,i)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $3e(t){const{inputs:e,backend:n}=t,{input:r}=e,i=be(r.shape),s=r.shape[r.shape.length-1],a=i/s,o=Kt({inputs:{x:r},backend:n,attrs:{shape:[a,s]}}),l=uJ(o,!1,n),c=Kt({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}const I3e={kernelName:h_,backendName:"cpu",kernelFunc:$3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hD(t){const{backend:e,attrs:n}=t,{shape:r,value:i,dtype:s}=n,a=s||wh(i),o=bn(a,be(r));return O3e(o,i,a),e.makeTensorInfo(r,a,o)}const N3e={kernelName:d_,backendName:"cpu",kernelFunc:hD};function O3e(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _3e={kernelName:p_,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,i=n,s=xr(r.dtype,be(r.shape)),[a,o,l,c]=r.shape,f=i.data.get(r.dataId).values;for(let p=0;p<a;p++){const g=p*l*o*c;for(let y=0;y<o;y++){const b=y*(l*c);for(let v=0;v<l;v++){const w=v*c;for(let S=0;S<c;S++){const T=Math.round(l-v-1),A=g+b+w+S;let k=f[A];if(T>=0&&T<l){const E=T*c,I=g+b+E+S;k=f[I]}s[A]=k}}}}return{dataId:i.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:a,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:f,dilations:h,dimRoundingMode:p,activation:g,leakyreluAlpha:y}=r;let b=lJ({inputs:{x:i,filter:s},backend:n,attrs:{strides:l,pad:c,dataFormat:f,dilations:h,dimRoundingMode:p}});if(a){const v=b;if(f==="NCHW"&&a.shape.length===1&&a.shape[0]!==1){const w=Kt({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});b=th({inputs:{a:b,b:w},backend:n}),n.disposeIntermediateTensorInfo(w)}else b=th({inputs:{a:b,b:a},backend:n});n.disposeIntermediateTensorInfo(v)}if(g){const v=b;if(f==="NCHW"&&g==="prelu"&&o.shape.length===1&&o.shape[0]!==1){const w=Kt({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});b=Wb(n,b,g,w,y),n.disposeIntermediateTensorInfo(w)}else b=Wb(n,b,g,o,y);n.disposeIntermediateTensorInfo(v)}return b}const D3e={kernelName:kb,backendName:"cpu",kernelFunc:R3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:a,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:f,dilations:h,dimRoundingMode:p,activation:g,leakyreluAlpha:y}=r;let b=cJ({inputs:{x:i,filter:s},backend:n,attrs:{strides:l,pad:c,dataFormat:f,dilations:h,dimRoundingMode:p}});if(a){const v=b;b=th({inputs:{a:b,b:a},backend:n}),n.disposeIntermediateTensorInfo(v)}if(g){const v=b;b=Wb(n,b,g,o,y),n.disposeIntermediateTensorInfo(v)}return b}const P3e={kernelName:Q9,backendName:"cpu",kernelFunc:M3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L3e(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,s=be(r.shape),a=i.shape,o=a[a.length-1],[l,c,f,h]=hR(r,i);if(c===0)return n.makeTensorInfo(l,r.dtype,[]);const p=n.data.get(i.dataId).values,g=n.bufferSync(r),y=xQ(p,g,r.dtype,c,o,f,h,r.shape,s);return n.makeTensorInfo(l,r.dtype,y.values)}const F3e={kernelName:D9,backendName:"cpu",kernelFunc:L3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:s}=e,{axis:a,batchDims:o}=r;Me([i,s],"gatherV2");const l=ot(a,i.shape)[0],c=n.data.get(s.dataId).values,f=i.shape[l];for(let A=0;A<c.length;++A){const k=c[A];G(k<=f-1&&k>=0,()=>`GatherV2: the index value ${k} is not in [0, ${f-1}]`)}let h=o;o==null&&(h=0);const p=be(s.shape),g=PR(i,s,l,h),y=Kt({inputs:{x:i},backend:n,attrs:{shape:[g.batchSize,g.outerSize,g.dimSize,g.sliceSize]}}),b=Kt({inputs:{x:s},backend:n,attrs:{shape:[g.batchSize,p/g.batchSize]}}),v=[g.batchSize,g.outerSize,p/g.batchSize,g.sliceSize],w=n.bufferSync(b),S=n.bufferSync(y),T=wQ(S,w,v);return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),n.makeTensorInfo(g.outputShape,T.dtype,T.values)}const z3e={kernelName:t1,backendName:"cpu",kernelFunc:B3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j3e(t){const{inputs:e,backend:n}=t,{input:r}=e,i=be(r.shape),s=r.shape[r.shape.length-1],a=i/s,o=Kt({inputs:{x:r},backend:n,attrs:{shape:[a,s]}}),l=uJ(o,!0,n),c=Kt({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}const V3e={kernelName:m_,backendName:"cpu",kernelFunc:j3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U3e=Dt(fg,t=>Number.isFinite(t)?1:0,"bool"),W3e={kernelName:fg,backendName:"cpu",kernelFunc:U3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G3e=Dt(hg,t=>Math.abs(t)===1/0?1:0,"bool"),q3e={kernelName:hg,backendName:"cpu",kernelFunc:G3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H3e=Dt(dg,t=>Number.isNaN(t)?1:0,"bool"),K3e={kernelName:dg,backendName:"cpu",kernelFunc:H3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X3e(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:s}=n,a=AQ(r,i,s);return e.makeTensorInfo([a.length],"float32",a)}const Y3e={kernelName:M9,backendName:"cpu",kernelFunc:X3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z3e=Dt(mg,t=>Math.log1p(t)),Q3e={kernelName:mg,backendName:"cpu",kernelFunc:Z3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J3e=Tn((t,e)=>t&&e),eLe=Vn(a1,J3e,null,"bool"),tLe={kernelName:a1,backendName:"cpu",kernelFunc:eLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nLe=Dt(o1,t=>t?0:1,"bool"),rLe={kernelName:o1,backendName:"cpu",kernelFunc:nLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iLe=Tn((t,e)=>t||e),sLe=Vn(l1,iLe,null,"bool"),aLe={kernelName:l1,backendName:"cpu",kernelFunc:sLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:s,bias:a,alpha:o,beta:l}=r;Me(i,"LRN");const c=i.shape[3],f=c-1,h=n.data.get(i.dataId).values,p=be(i.shape),g=new Float32Array(p);function y(b){const v=b%c;let w=b-v+Math.max(0,v-s);const S=b-v+Math.min(v+s,f);let T=0;for(;w<=S;w++){const A=h[w];T+=A*A}return T}for(let b=0;b<p;b++){const v=y(b),w=h[b]*Math.pow(a+o*v,-l);g[b]=w}return n.makeTensorInfo(i.shape,i.dtype,g)}const lLe={kernelName:c1,backendName:"cpu",kernelFunc:oLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,y:s,dy:a}=e,{depthRadius:o,bias:l,alpha:c,beta:f}=r;Me(a,"LRNGrad");const h=be(a.shape),p=a.shape[3],g=n.data.get(a.dataId).values,y=n.data.get(i.dataId).values,b=n.data.get(s.dataId).values,v=new Float32Array(h),w=h;for(let S=0;S<w;S++){const T=S%p,A=S-T+Math.max(0,T-o),k=S-T+Math.min(p,T+o+1);let E=0;for(let I=A;I<k;I++)E+=Math.pow(y[I],2);E=c*E+l;for(let I=A;I<k;I++){let N=-2*c*f*y[I]*b[S]/E;S===I&&(N+=Math.pow(E,-f)),N*=g[S],v[I]+=N}}return n.makeTensorInfo(a.shape,i.dtype,v)}const uLe={kernelName:y_,backendName:"cpu",kernelFunc:cLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fJ(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:s,keepDims:a}=r,o=n;let l=i.shape;const c=l.length,f=ot(s,l);let h=f;const p=on(h,c);let g=o.data.get(i.dataId).values;if(p!=null){const A=new Array(c);for(let k=0;k<A.length;k++)A[k]=l[p[k]];g=oD(g,l,i.dtype,p,A),h=Sn(h.length,c),l=A}Me(i,"max"),ur("max",h,c);const[y,b]=er(l,h),v=be(b),w=$Q(g,v,y,i.dtype),S=o.write(w,y,i.dtype);let T=y;return a&&(T=On(y,f)),{dataId:S,shape:T,dtype:i.dtype}}const fLe={kernelName:u1,backendName:"cpu",kernelFunc:fJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;Me(i,"maxPool");const{filterSize:s,strides:a,pad:o,dimRoundingMode:l}=r,c=1;G(Cr(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const f=us(i.shape,s,a,c,o,l);let h;if(f.filterWidth===1&&f.filterHeight===1&&$t(f.inShape,f.outShape))h=da({inputs:{x:i},backend:n});else{const p=n.data.get(i.dataId).values,g=je(i.shape),y=uD(p,i.shape,i.dtype,g,f,"max");h=n.makeTensorInfo(f.outShape,i.dtype,y.values)}return h}const dLe={kernelName:f1,backendName:"cpu",kernelFunc:hLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:a,pad:o,dimRoundingMode:l,dataFormat:c}=r;Me(i,"maxPool3d");const f=vo(i.shape,s,a,1,o,l,c),h=n.data.get(i.dataId).values,p=oJ(h,i.shape,i.dtype,je(i.shape),f,"max");return n.makeTensorInfo(p.shape,"float32",p.values)}const mLe={kernelName:h1,backendName:"cpu",kernelFunc:pLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gLe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,{filterSize:a,strides:o,pad:l,dimRoundingMode:c}=r;Me([i,s],"maxPool3DGrad");const f=vo(s.shape,a,o,1,l,c),h=n.bufferSync(s),p=iPe(h,f),g=f.strideDepth,y=f.strideHeight,b=f.strideWidth,v=f.dilationDepth,w=f.dilationHeight,S=f.dilationWidth,T=f.effectiveFilterDepth,A=f.effectiveFilterHeight,k=f.effectiveFilterWidth,E=T-1-f.padInfo.front,I=k-1-f.padInfo.left,N=A-1-f.padInfo.top,_=at(s.shape,"float32"),D=n.bufferSync(i);for(let O=0;O<f.batchSize;++O)for(let P=0;P<f.inChannels;++P)for(let z=0;z<f.inDepth;++z)for(let W=0;W<f.inHeight;++W)for(let U=0;U<f.inWidth;++U){const R=z-E,F=W-N,B=U-I;let K=0;for(let L=0;L<T;L+=v){const H=(R+L)/g;if(!(H<0||H>=f.outDepth||Math.floor(H)!==H))for(let X=0;X<A;X+=w){const Y=(F+X)/y;if(!(Y<0||Y>=f.outHeight||Math.floor(Y)!==Y))for(let ie=0;ie<k;ie+=S){const pe=(B+ie)/b;if(pe<0||pe>=f.outWidth||Math.floor(pe)!==pe)continue;const ve=T*A*k-1-p.get(O,H,Y,pe,P),ke=L*A*k+X*k+ie,Ee=ve===ke?1:0;if(Ee===0)continue;const me=D.get(O,H,Y,pe,P);K+=me*Ee}}}_.set(K,O,z,W,U,P)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const yLe={kernelName:b_,backendName:"cpu",kernelFunc:gLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vLe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s,output:a}=e,o=s;Me([s,a],"maxPoolGrad");const{filterSize:l,strides:c,pad:f,dimRoundingMode:h}=r,p=us(o.shape,l,c,1,f,h),g=n.data.get(o.dataId).values,y=at(p.outShape,o.dtype,aJ(g,o.shape,o.dtype,p).values),b=p.strideHeight,v=p.strideWidth,w=p.dilationHeight,S=p.dilationWidth,T=p.effectiveFilterHeight,A=p.effectiveFilterWidth,k=A-1-p.padInfo.left,E=T-1-p.padInfo.top,I=at(o.shape,"float32"),N=n.data.get(i.dataId).values,_=at(i.shape,"float32",N);for(let D=0;D<p.batchSize;++D)for(let O=0;O<p.inChannels;++O)for(let P=0;P<p.inHeight;++P)for(let z=0;z<p.inWidth;++z){const W=P-E,U=z-k;let R=0;for(let F=0;F<T;F+=w){const B=(W+F)/b;if(!(B<0||B>=p.outHeight||Math.floor(B)!==B))for(let K=0;K<A;K+=S){const L=(U+K)/v;if(L<0||L>=p.outWidth||Math.floor(L)!==L)continue;const H=T*A-1-y.get(D,B,L,O),X=F*A+K,Y=H===X?1:0;if(Y===0)continue;const ie=_.get(D,B,L,O);R+=ie*Y}}I.set(R,D,P,z,O)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const bLe={kernelName:v_,backendName:"cpu",kernelFunc:vLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xLe(t,e,n,r,i){const s=je(e),a=uD(t,e,n,s,i,"max"),o=aJ(t,e,n,i,!0,r);return[a.values,o.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wLe={kernelName:P9,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:s,pad:a,includeBatchInIndex:o}=e,l=n;Me(r,"MaxPoolWithArgmax");const c=l.data.get(r.dataId).values,f=us(r.shape,i,s,[1,1],a),[h,p]=xLe(c,r.shape,r.dtype,o,f),g=l.write(h,f.outShape,r.dtype),y=l.write(p,f.outShape,r.dtype);return[{dataId:g,shape:f.outShape,dtype:r.dtype},{dataId:y,shape:f.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r,o=ot(s,i.shape),c=er(i.shape,o)[1],f=be(c),h=[],p=n.makeTensorInfo([],"float32",new Float32Array([f]));h.push(p);const g=gl({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});h.push(g);const y=fD({inputs:{a:g,b:p},backend:n});h.push(y);const b=ty({inputs:{x:y},backend:n,attrs:{axis:s,keepDims:a}});return h.forEach(v=>n.disposeIntermediateTensorInfo(v)),b}const CLe={kernelName:d1,backendName:"cpu",kernelFunc:SLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r;Me(i,"min");const o=ot(s,i.shape);let l=o;const c=on(l,i.shape.length);let f=i;c!=null&&(f=Zr({inputs:{x:i},backend:n,attrs:{perm:c}}),l=Sn(l.length,i.shape.length)),ur("min",l,f.shape.length);const[h,p]=er(f.shape,l),g=be(p),y=wr(be(h),f.dtype),b=n.data.get(f.dataId).values;for(let w=0;w<y.length;++w){const S=w*g;let T=b[S];for(let A=0;A<g;++A){const k=b[S+A];(Number.isNaN(k)||k<T)&&(T=k)}y[w]=T}c!=null&&n.disposeIntermediateTensorInfo(f);const v=n.makeTensorInfo(h,f.dtype,y);if(a){const w=On(h,o),S=Kt({inputs:{x:v},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(v),S}return v}const kLe={kernelName:p1,backendName:"cpu",kernelFunc:TLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ALe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,mode:a}=r;Me(i,"mirrorPad");const o=s.map((T,A)=>T[0]+i.shape[A]+T[1]),l=s.map(T=>T[0]),c=s.map((T,A)=>T[0]+i.shape[A]),f=a==="reflect"?0:1,h=n.data.get(i.dataId).values,p=i.shape.length,g=je(i.shape),y=be(o),b=o.length,v=je(o),w=xr(i.dtype,y);for(let T=0;T<y;T++){let A=Sh(T,b,v);for(let E=0;E<b;E++)A[E]<l[E]?A[E]=l[E]*2-A[E]-f:A[E]>=c[E]&&(A[E]=(c[E]-1)*2-A[E]+f);A=A.map((E,I)=>E-l[I]);const k=ra(A,p,g);w[T]=h[k]}return{dataId:n.write(w,o,i.dtype),shape:o,dtype:i.dtype}}const ELe={kernelName:m1,backendName:"cpu",kernelFunc:ALe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Le=Tn((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),ILe=Vn(vg,$Le),NLe={kernelName:vg,backendName:"cpu",kernelFunc:ILe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hJ(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:s}=r,a=i.shape.length;let o=s;if(o===-1&&(o=a-1),o!==a-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${a} and dim was ${o}`);const l=ot([o],i.shape),c=fJ({inputs:{x:i},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),f=On(c.shape,l),h=Kt({inputs:{x:c},backend:n,attrs:{shape:f}}),p=cD({inputs:{a:i,b:h},backend:n}),g=gQ({inputs:{x:p},backend:n}),y=ty({inputs:{x:g},backend:n,attrs:{axis:l,keepDims:!1}}),b=Kt({inputs:{x:y},backend:n,attrs:{shape:f}}),v=fD({inputs:{a:g,b},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),v}const OLe={kernelName:R1,backendName:"cpu",kernelFunc:hJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Le(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:s,seed:a,normalized:o}=r;Me(i,"multinomial");const l=o?i:hJ({inputs:{logits:i},backend:n,attrs:{dim:-1}}),c=l.shape[0],f=l.shape[1],h=n.data.get(l.dataId).values,p=[c,s],g=wr(be(p),"int32");for(let y=0;y<c;++y){const b=y*f,v=new Float32Array(f-1);v[0]=h[b];for(let T=1;T<v.length;++T)v[T]=v[T-1]+h[b+T];const w=Q_.alea(a.toString()),S=y*s;for(let T=0;T<s;++T){const A=w();g[S+T]=v.length;for(let k=0;k<v.length;k++)if(A<v[k]){g[S+T]=k;break}}}return o||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(p,"int32",g)}const RLe={kernelName:L9,backendName:"cpu",kernelFunc:_Le};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DLe=oR;function MLe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l}=r;Me(i,"NonMaxSuppression");const c=n.data.get(i.dataId).values,f=n.data.get(s.dataId).values,{selectedIndices:h}=DLe(c,f,a,o,l);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}const PLe={kernelName:x_,backendName:"cpu",kernelFunc:MLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LLe=lR;function FLe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r;Me(i,"NonMaxSuppressionPadded");const f=n.data.get(i.dataId).values,h=n.data.get(s.dataId).values,{selectedIndices:p,validOutputs:g}=LLe(f,h,a,o,l,c);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([g]))]}const BLe={kernelName:w_,backendName:"cpu",kernelFunc:FLe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zLe=cR;function jLe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r;Me(i,"NonMaxSuppressionWithScore");const f=n.data.get(i.dataId).values,h=n.data.get(s.dataId).values,p=a,g=o,y=l,b=c,{selectedIndices:v,selectedScores:w}=zLe(f,h,p,g,y,b);return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([w.length],"float32",new Float32Array(w))]}const VLe={kernelName:S_,backendName:"cpu",kernelFunc:jLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ULe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:s,depth:a,onValue:o,offValue:l}=r;Me(i,"oneHot");const c=be(i.shape),f=new Float32Array(c*a);f.fill(l);const h=n.data.get(i.dataId).values;for(let p=0;p<c;++p)h[p]>=0&&h[p]<a&&(f[p*a+h[p]]=o);return n.makeTensorInfo([...i.shape,a],s,f)}const WLe={kernelName:b1,backendName:"cpu",kernelFunc:ULe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qb(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const i=Gc({inputs:{input:r},backend:n}),s=qb({inputs:{x:i},backend:n}),a=nh({inputs:{input:r},backend:n}),o=qb({inputs:{x:a},backend:n}),l=li({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return hD({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const GLe={kernelName:P1,backendName:"cpu",kernelFunc:qb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dJ(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const i=Gc({inputs:{input:r},backend:n}),s=dJ({inputs:{x:i},backend:n}),a=nh({inputs:{input:r},backend:n}),o=qb({inputs:{x:a},backend:n}),l=li({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return hD({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const qLe={kernelName:v1,backendName:"cpu",kernelFunc:dJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pJ(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return Gb({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const s=e[0].shape,a=e[0].dtype;e.forEach(f=>{UO(s,f.shape,"All tensors passed to stack must have matching shapes"),G(a===f.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=e.map(f=>{const h=Gb({inputs:{input:f},backend:n,attrs:{dim:i}});return o.push(h),h}),c=rh({inputs:l,backend:n,attrs:{axis:i}});return o.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const HLe={kernelName:x1,backendName:"cpu",kernelFunc:pJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,constantValue:a}=r;Me(i,"pad");const o=s.map((S,T)=>S[0]+i.shape[T]+S[1]),l=s.map(S=>S[0]),c=n.data.get(i.dataId).values,f=be(i.shape),h=i.shape.length,p=je(i.shape),g=be(o),y=o.length,b=je(o),v=xr(i.dtype,g);a!==0&&v.fill(a);for(let S=0;S<f;S++){const A=Sh(S,h,p).map((E,I)=>E+l[I]),k=ra(A,y,b);v[k]=c[S]}return{dataId:n.write(v,o,i.dtype),shape:o,dtype:i.dtype}}const mJ={kernelName:w1,backendName:"cpu",kernelFunc:KLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XLe=Tn((t,e)=>Math.pow(t,e)),YLe=Vn(xg,XLe),ZLe={kernelName:xg,backendName:"cpu",kernelFunc:YLe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QLe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:s,indices:a}=e,{outputRaggedRank:o}=r,l=i.map(w=>n.data.get(w.dataId).values),c=i.map(w=>w.shape),f=n.data.get(s.dataId).values,h=n.data.get(a.dataId).values,[p,g,y]=DQ(l,c,f,s.shape,s.dtype,h,a.shape),b=p.map(w=>n.makeTensorInfo([w.length],"int32",w)),v=n.makeTensorInfo(y,s.dtype,g);return b.concat([v])}const JLe={kernelName:F9,backendName:"cpu",kernelFunc:QLe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eFe(t){const{inputs:e,backend:n}=t,{starts:r,limits:i,deltas:s}=e,a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,[c,f]=MQ(a,r.shape,r.dtype,o,i.shape,l,s.shape),h=n.makeTensorInfo([c.length],"int32",c),p=n.makeTensorInfo([f.length],r.dtype,f);return[h,p]}const tFe={kernelName:B9,backendName:"cpu",kernelFunc:eFe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nFe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:s,defaultValue:a,rowPartitionTensors:o}=e,{rowPartitionTypes:l}=r,c=n.data.get(i.dataId).values,f=n.data.get(s.dataId).values,h=n.data.get(a.dataId).values,p=o.map(v=>n.data.get(v.dataId).values),g=o.map(v=>v.shape),[y,b]=PQ(c,i.shape,f,s.shape,s.dtype,h,a.shape,p,g,l);return n.makeTensorInfo(y,s.dtype,b)}const rFe={kernelName:z9,backendName:"cpu",kernelFunc:nFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iFe(t){const{backend:e,attrs:n}=t,{start:r,stop:i,dtype:s,step:a}=n,o=LQ(r,i,a,s);return e.makeTensorInfo([o.length],s,o)}const sFe={kernelName:C_,backendName:"cpu",kernelFunc:iFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aFe=Dt(wg,t=>1/t),oFe={kernelName:wg,backendName:"cpu",kernelFunc:aFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lFe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:a,size:o}=r;Me(i,"resizeBilinear");const l=je(i.shape),[c,f]=o,[h,p,g,y]=i.shape,b=n.data.get(i.dataId).values,v=new Float32Array(be([h,c,f,y])),w=[s&&c>1?p-1:p,s&&f>1?g-1:g],S=[s&&c>1?c-1:c,s&&f>1?f-1:f];let T=0;const A=w[0]/S[0],k=w[1]/S[1];for(let E=0;E<h;E++)for(let I=0;I<c;I++){let N;a?N=A*(I+.5)-.5:N=A*I;const _=Math.max(0,Math.floor(N)),D=N-_,O=Math.min(p-1,Math.ceil(N)),P=E*l[0]+_*l[1],z=E*l[0]+O*l[1];for(let W=0;W<f;W++){let U;a?U=k*(W+.5)-.5:U=k*W;const R=Math.max(0,Math.floor(U)),F=U-R,B=Math.min(g-1,Math.ceil(U)),K=P+R*l[2],L=z+R*l[2],H=P+B*l[2],X=z+B*l[2];for(let Y=0;Y<y;Y++){const ie=b[K+Y],pe=b[L+Y],ve=b[H+Y],ke=b[X+Y],Ee=ie+(ve-ie)*F,me=pe+(ke-pe)*F,$e=Ee+(me-Ee)*D;v[T++]=$e}}}return n.makeTensorInfo([h,c,f,y],"float32",v)}const cFe={kernelName:A1,backendName:"cpu",kernelFunc:lFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uFe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:a}=r;Me([s,i],"resizeBilinearGrad");const o=je(i.shape),[l,c,f,h]=i.shape,[,p,g]=s.shape,y=new Float32Array(l*c*f*h),b=[a&&p>1?c-1:c,a&&g>1?f-1:f],v=[a&&p>1?p-1:p,a&&g>1?g-1:g],w=b[0]/v[0],S=b[1]/v[1],T=n.data.get(s.dataId).values;let A=0;for(let k=0;k<l;k++){const E=k*o[0];for(let I=0;I<p;I++){const N=I*w,_=Math.floor(N),D=Math.min(Math.ceil(N),c-1),O=E+_*o[1],P=E+D*o[1],z=N-_,W=1-z;for(let U=0;U<g;U++){const R=U*S,F=Math.floor(R),B=Math.min(Math.ceil(R),f-1),K=R-F,L=1-K,H=O+F*o[2],X=O+B*o[2],Y=P+F*o[2],ie=P+B*o[2],pe=W*L,ve=W*K,ke=z*L,Ee=z*K;for(let me=0;me<h;me++){const $e=T[A++];y[H+me]+=$e*pe,y[X+me]+=$e*ve,y[Y+me]+=$e*ke,y[ie+me]+=$e*Ee}}}}return n.makeTensorInfo([l,f,c,h],"float32",y)}const fFe={kernelName:A_,backendName:"cpu",kernelFunc:uFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hFe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:a,size:o}=r;Me(i,"resizeNearestNeighbor");const l=je(i.shape),[c,f]=o,[h,p,g,y]=i.shape,b=n.data.get(i.dataId).values,v=new Float32Array(h*c*f*y),w=[s&&c>1?p-1:p,s&&f>1?g-1:g],S=[s&&c>1?c-1:c,s&&f>1?f-1:f],T=w[0]/S[0],A=w[1]/S[1];let k=0;for(let E=0;E<h;E++){const I=E*l[0];for(let N=0;N<c;N++){const _=a?T*(N+.5):T*N;let D=Math.min(p-1,s?Math.round(_):Math.floor(_));a&&(D=Math.max(0,D));const O=I+D*l[1];for(let P=0;P<f;P++){const z=a?A*(P+.5):A*P;let W=Math.min(g-1,s?Math.round(z):Math.floor(z));a&&(W=Math.max(0,W));const U=O+W*l[2];for(let R=0;R<y;R++){const F=b[U+R];v[k++]=F}}}}return n.makeTensorInfo([h,c,f,y],i.dtype,v)}const dFe={kernelName:k1,backendName:"cpu",kernelFunc:hFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pFe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:a}=r;Me([s,i],"resizeNearestNeighborGrad");const o=je(i.shape),l=je(s.shape),[c,f,h,p]=i.shape,[,g,y]=s.shape,b=new Float32Array(c*f*h*p),v=n.data.get(s.dataId).values,w=[a&&g>1?f-1:f,a&&y>1?h-1:h],S=[a&&g>1?g-1:g,a&&y>1?y-1:y],T=w[0]/S[0],A=w[1]/S[1],k=1/T,E=1/A,I=Math.ceil(k)*2+2,N=Math.ceil(E)*2+2;for(let _=0;_<c;_++){const D=_*o[0];for(let O=0;O<f;O++){const P=D+O*o[1],z=Math.floor(O*k),W=Math.floor(z-I/2);for(let U=0;U<h;U++){const R=P+U*o[2],F=Math.floor(U*E),B=Math.floor(F-N/2);for(let K=0;K<p;K++){let L=0;for(let H=0;H<I;H++){const X=H+W;if(X<0||X>=g)continue;const Y=D+X*l[1],ie=X*T,pe=Math.min(f-1,a?Math.round(ie):Math.floor(ie));if(O===pe)for(let ve=0;ve<N;ve++){const ke=ve+B;if(ke<0||ke>=y)continue;const Ee=Y+ke*l[2],me=ke*A,$e=Math.min(h-1,a?Math.round(me):Math.floor(me));U===$e&&(L+=v[Ee+K])}}b[R+K]=L}}}}return n.makeTensorInfo(i.shape,i.dtype,b)}const mFe={kernelName:k_,backendName:"cpu",kernelFunc:pFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:s}=r;Me(i,"reverse");const a=i.shape.length,o=ot(s,i.shape);if(a===0)return da({inputs:{x:i},backend:n});const l=new or(i.shape,i.dtype),c=n.bufferSync(i);for(let f=0;f<l.size;f++){const h=l.indexToLoc(f),p=h.slice();o.forEach(g=>p[g]=i.shape[g]-1-p[g]),l.set(c.get(...p),...h)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const yFe={kernelName:E1,backendName:"cpu",kernelFunc:gFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vFe={kernelName:R_,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:s,center:a}=e,o=n,l=xr(r.dtype,be(r.shape)),[c,f,h,p]=r.shape,[g,y]=xR(a,f,h),b=255,v=Math.sin(i),w=Math.cos(i),S=o.data.get(r.dataId).values;for(let A=0;A<c;A++){const k=A*h*f*p;for(let E=0;E<f;E++){const I=E*(h*p);for(let N=0;N<h;N++){const _=N*p;for(let D=0;D<p;D++){const O=[c,E,N,D],P=O[2],z=O[1];let W=(P-g)*w-(z-y)*v,U=(P-g)*v+(z-y)*w;W=Math.round(W+g),U=Math.round(U+y);let R=s;if(typeof s!="number"&&(D===3?R=b:R=s[D]),W>=0&&W<h&&U>=0&&U<f){const B=U*(h*p),K=W*p,L=k+B+K+D;R=S[L]}const F=k+I+_+D;l[F]=R}}}}return{dataId:o.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bFe=Dt(Tg,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),xFe={kernelName:Tg,backendName:"cpu",kernelFunc:bFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wFe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:s}=e,{shape:a}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:f,outputSize:h}=tu(s,i,a),p=!0,g=n.bufferSync(i),y=n.bufferSync(s),b=wc(g,y,a,h,c,l,o,f,0,p);return n.makeTensorInfo(a,b.dtype,b.values)}const SFe={kernelName:j9,backendName:"cpu",kernelFunc:wFe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CFe(t,e){let n=0,r=t.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),t[i]<e?n=i+1:r=i;return r}function TFe(t,e){let n=0,r=t.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),t[i]<=e?n=i+1:r=i;return r}function kFe(t,e,n,r,i,s){const a=bn("int32",n*i);for(let o=0;o<n;++o){const l=t.slice(o*r,(o+1)*r),c=o*i;for(let f=0;f<i;++f)a[c+f]=s==="left"?CFe(l,e[f+c]):TFe(l,e[f+c])}return a}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AFe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:s}=e,{side:a}=r,o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,c=kFe(o,l,i.shape[0],i.shape[1],s.shape[1],a);return n.makeTensorInfo(s.shape,"int32",c)}const EFe={kernelName:U9,backendName:"cpu",kernelFunc:AFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Fe(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:s}=e;Me([r,i,s],"select");const a=r.shape.length,o=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,f=hi(i.dtype,s.dtype),h=wr(be(i.shape),f);let p=0;const g=a===0||a>1||i.shape.length===1?1:be(i.shape.slice(1));for(let y=0;y<o.length;y++)for(let b=0;b<g;b++)o[y]===1?h[p++]=l[y]:h[p++]=c[y];return n.makeTensorInfo(i.shape,f,h)}const IFe={kernelName:$1,backendName:"cpu",kernelFunc:$Fe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NFe=K1,OFe=X1,_Fe=Dt(Ag,t=>t>=0?OFe*t:NFe*(Math.exp(t)-1)),RFe={kernelName:Ag,backendName:"cpu",kernelFunc:_Fe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DFe=Dt(Ig,t=>t<0?-1:t>0?1:0),MFe={kernelName:Ig,backendName:"cpu",kernelFunc:DFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PFe=Dt(Eg,t=>Math.sin(t)),LFe={kernelName:Eg,backendName:"cpu",kernelFunc:PFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FFe=Dt($g,t=>Math.sinh(t)),BFe={kernelName:$g,backendName:"cpu",kernelFunc:FFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zFe=11920928955078125e-23,t5=Math.log(zFe)+2,jFe=Dt(Og,t=>{const e=t>-t5,n=t<t5,r=Math.exp(t);let i;return n?i=r:e?i=t:i=Math.log(1+r),i}),VFe={kernelName:Og,backendName:"cpu",kernelFunc:jFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,paddings:a}=r;Me([i],"spaceToBatchND");const o=be(s),l=[[0,0]];l.push(...a);for(let E=1+s.length;E<i.shape.length;++E)l.push([0,0]);const c=mJ.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),f=Wg(c.shape,s,o,!1),h=Gg(f.length,s.length,!1),p=qg(c.shape,s,o,!1),b=Kt({inputs:{x:c},backend:n,attrs:{shape:f}}),S=Zr({inputs:{x:b},backend:n,attrs:{perm:h}}),k=Kt({inputs:{x:S},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(S),k}const WFe={kernelName:O1,backendName:"cpu",kernelFunc:UFe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GFe(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:s,defaultValue:a}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${i.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);const o=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,f=n.data.get(a.dataId).values[0],[h,p,g,y,b]=jQ(o,r.shape,r.dtype,l,i.dtype,c,f);return[n.makeTensorInfo(p,r.dtype,h),n.makeTensorInfo([p[0]],i.dtype,g),n.makeTensorInfo([y.length],"bool",new Uint8Array(y.map(v=>Number(v)))),n.makeTensorInfo([b.length],r.dtype,new Int32Array(b))]}const qFe={kernelName:W9,backendName:"cpu",kernelFunc:GFe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HFe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const a=Array.from(n.data.get(i.dataId).values),o=n.data.get(r.dataId).values,l=Array.from(n.data.get(s.dataId).values),[c,f,h]=VQ(o,r.shape,r.dtype,a,l);return[n.makeTensorInfo(f,r.dtype,c),n.makeTensorInfo([h.length],s.dtype,new Int32Array(h))]}const KFe={kernelName:G9,backendName:"cpu",kernelFunc:HFe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XFe(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,[c,f]=lD(a,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(f,r.dtype,c)}const YFe={kernelName:q9,backendName:"cpu",kernelFunc:XFe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZFe(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,[c,f]=lD(a,r.shape,r.dtype,o,l);return n.makeTensorInfo(f,r.dtype,c)}const QFe={kernelName:H9,backendName:"cpu",kernelFunc:ZFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JFe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:s,defaultValue:a}=e,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:f,strides:h,outputSize:p}=tu(s,i,o),g=!1,y=n.bufferSync(i);let b;switch(s.dtype){case"bool":{const v=n.bufferSync(s),w=!!n.data.get(a.dataId).values[0];b=wc(y,v,o,p,f,c,l,h,w,g);break}case"float32":{const v=n.bufferSync(s),w=n.data.get(a.dataId).values[0];b=wc(y,v,o,p,f,c,l,h,w,g);break}case"int32":{const v=n.bufferSync(s),w=n.data.get(a.dataId).values[0];b=wc(y,v,o,p,f,c,l,h,w,g);break}case"string":{const v=n.bufferSync(s),w=fl(n.data.get(a.dataId).values[0]);b=wc(y,v,o,p,f,c,l,h,w,g);break}default:throw new Error(`Unsupported type ${s.dtype}`)}return n.makeTensorInfo(o,b.dtype,b.values)}const eBe={kernelName:K9,backendName:"cpu",kernelFunc:JFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:s,axis:a}=r,o=ot(a,i.shape)[0],l=MR(i,s,o),c=new Array(i.shape.length).fill(0),f=i.shape.slice();return l.map(h=>{const p=[...f];p[o]=h;const g=qc({inputs:{x:i},backend:n,attrs:{begin:c,size:p}});return c[o]+=h,g})}const nBe={kernelName:_1,backendName:"cpu",kernelFunc:tBe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rBe={kernelName:E_,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;Me(n,"square");const i=r.data.get(n.dataId).values,s=new Float32Array(i.length);for(let o=0;o<i.length;++o){const l=i[o];s[o]=l*l}return{dataId:r.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iBe=Dt(Fg,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),sBe={kernelName:Fg,backendName:"cpu",kernelFunc:iBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,end:a,strides:o,beginMask:l,endMask:c,ellipsisMask:f,newAxisMask:h,shrinkAxisMask:p}=r;Me(i,"stridedSlice");const{finalShapeSparse:g,finalShape:y,isIdentity:b,sliceDim0:v,isSimpleSlice:w,begin:S,end:T,strides:A}=yR(i.shape,s,a,o,l,c,f,h,p);let k;if(b)k=Kt({inputs:{x:i},backend:n,attrs:{shape:y}});else if(v||w){G(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const E=pR(S,T,A),I=qc({inputs:{x:i},backend:n,attrs:{begin:S,size:E}});k=Kt({inputs:{x:I},backend:n,attrs:{shape:y}}),n.disposeIntermediateTensorInfo(I)}else{const E=n.bufferSync(i),I=GQ(g,E,A,S);k=n.makeTensorInfo(y,I.dtype,I.values)}return k}const oBe={kernelName:I_,backendName:"cpu",kernelFunc:aBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lBe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:s,leftPad:a,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:f,dataSplits:h}=e,p=n.data.get(f.dataId).values,g=n.data.get(h.dataId).values,[y,b]=qQ(p,g,i,s,a,o,l,c);return[n.makeTensorInfo([y.length],"string",y),n.makeTensorInfo(h.shape,"int32",b)]}const cBe={kernelName:X9,backendName:"cpu",kernelFunc:lBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uBe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:s,delimiter:a}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const o=n.data.get(s.dataId).values,l=n.data.get(a.dataId).values[0],[c,f,h]=HQ(o,l,i),p=f.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",f),n.makeTensorInfo([2],"int32",new Int32Array(h))]}const fBe={kernelName:Y9,backendName:"cpu",kernelFunc:uBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hBe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const a=n.data.get(s.dataId).values,o=KQ(a,i);return n.makeTensorInfo(s.shape,"int32",o)}const dBe={kernelName:Z9,backendName:"cpu",kernelFunc:hBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pBe=Dt(Mg,t=>Math.tan(t)),mBe={kernelName:Mg,backendName:"cpu",kernelFunc:pBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gBe=Dt(Pg,t=>Math.tanh(t)),yBe={kernelName:Pg,backendName:"cpu",kernelFunc:gBe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vBe(t){const{inputs:e,backend:n}=t,{tensor:r,indices:i,updates:s}=e,{sliceRank:a,numUpdates:o,sliceSize:l,strides:c,outputSize:f}=tu(s,i,r.shape),h=!1,p=n.bufferSync(i),g=n.bufferSync(s),y=n.bufferSync(r),b=wc(p,g,r.shape,f,l,o,a,c,y,h);return n.makeTensorInfo(r.shape,b.dtype,b.values)}const bBe={kernelName:V9,backendName:"cpu",kernelFunc:vBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:s}=r;Me(i,"tile");const a=YQ(n.bufferSync(i),s);return n.makeTensorInfo(a.shape,a.dtype,a.values)}const wBe={kernelName:Lg,backendName:"cpu",kernelFunc:xBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:s,sorted:a}=r;Me(i,"topk");const o=n.data.get(i.dataId).values,[l,c]=QQ(o,i.shape,i.dtype,s,a);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}const CBe={kernelName:N_,backendName:"cpu",kernelFunc:SBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TBe(t){const{inputs:e,attrs:n,backend:r}=t,{image:i,transforms:s}=e,{interpolation:a,fillMode:o,fillValue:l,outputShape:c}=n,[f,h,p,g]=i.shape,[y,b]=c??[h,p],v=[f,y,b,g],w=je(i.shape),S=w[0],T=w[1],A=w[2],k=je(v),E=k[0],I=k[1],N=k[2],_=xr(i.dtype,be(v));_.fill(l);const D=r.data.get(i.dataId).values,O=r.data.get(s.dataId).values;for(let z=0;z<f;++z){const W=s.shape[0]===1?O:O.subarray(z*8,z*8+8);for(let U=0;U<y;++U)for(let R=0;R<b;++R)for(let F=0;F<g;++F){let B;const K=W[6]*R+W[7]*U+1;if(K===0)continue;const L=(W[0]*R+W[1]*U+W[2])/K,H=(W[3]*R+W[4]*U+W[5])/K,X=n5(L,p,o),Y=n5(H,h,o);switch(a){case"nearest":B=NBe(D,h,p,S,T,A,z,Y,X,F,l);break;case"bilinear":B=OBe(D,h,p,S,T,A,z,Y,X,F,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${a}`)}const ie=z*E+U*I+R*N+F;_[ie]=B}return r.makeTensorInfo(v,i.dtype,_)}return{dataId:r.write(_,v,i.dtype),shape:i.shape,dtype:i.dtype}}const kBe={kernelName:O_,backendName:"cpu",kernelFunc:TBe};function n5(t,e,n){switch(n){case"reflect":return ABe(t,e);case"wrap":return EBe(t,e);case"nearest":return IBe(t,e);case"constant":default:return $Be(t)}}function ABe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return Dc(0,n,e-1)}function EBe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return Dc(0,n,e-1)}function $Be(t,e){return t}function IBe(t,e){return Dc(0,t,e-1)}function hp(t,e,n,r,i,s,a,o,l,c,f){const h=a*r+o*i+l*s+c;return 0<=o&&o<e&&0<=l&&l<n?t[h]:f}function NBe(t,e,n,r,i,s,a,o,l,c,f){const h=Math.round(o),p=Math.round(l);return hp(t,e,n,r,i,s,a,h,p,c,f)}function OBe(t,e,n,r,i,s,a,o,l,c,f){const h=Math.floor(o),p=Math.floor(l),g=h+1,y=p+1,b=(y-l)*hp(t,e,n,r,i,s,a,h,p,c,f)+(l-p)*hp(t,e,n,r,i,s,a,h,y,c,f),v=(y-l)*hp(t,e,n,r,i,s,a,g,p,c,f)+(l-p)*hp(t,e,n,r,i,s,a,g,y,c,f);return(g-o)*b+(o-h)*v}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Be(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:s}=e;Me(s,"unique");const a=r.data.get(s.dataId).values,{outputValues:o,outputShape:l,indices:c}=JQ(a,i,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}const RBe={kernelName:__,backendName:"cpu",kernelFunc:_Be};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DBe(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:s}=r;s<0&&(s+=i.shape.length);const a=i.shape.length,o=i.shape[s],l=new Array(a-1);let c=0;for(let g=0;g<a;g++)g!==s&&(l[c++]=i.shape[g]);const f=new Array(a).fill(0),h=i.shape.slice();h[s]=1;const p=new Array(o);for(let g=0;g<p.length;g++){f[s]=g;const y=qc({inputs:{x:i},backend:n,attrs:{begin:f,size:h}});p[g]=Kt({inputs:{x:y},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(y)}return p}const MBe={kernelName:D1,backendName:"cpu",kernelFunc:DBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:s}=e,{numSegments:a}=r;Me(i,"unsortedSegmentSum");const o=i.shape.length,l=s.shape.length,c=[],f=[],h=o-l;let p=s;for(let y=0;y<h;++y){const b=Gb({inputs:{input:p},backend:n,attrs:{dim:y+1}});p=b,f.push(b)}for(let y=0;y<a;++y){const b=kl(y,"int32"),v=n.makeTensorInfo([],"int32",b),w=pQ({inputs:{a:v,b:p},backend:n}),S=gl({inputs:{x:w},backend:n,attrs:{dtype:"float32"}}),T=ow({inputs:{a:S,b:i},backend:n}),A=ty({inputs:{x:T},backend:n,attrs:{axis:0,keepDims:!1}});c.push(A),f.push(v),f.push(w),f.push(S),f.push(T),f.push(A)}const g=pJ({inputs:c,backend:n,attrs:{axis:0}});return f.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const LBe={kernelName:M1,backendName:"cpu",kernelFunc:PBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FBe=[_Me,hDe,DMe,PMe,vDe,FMe,zMe,VMe,WMe,qMe,KMe,YMe,QMe,tPe,rPe,aPe,lPe,uPe,hPe,NMe,pPe,gPe,vPe,xDe,xPe,gDe,SDe,SPe,dDe,TPe,APe,EPe,IPe,OPe,RPe,MPe,LPe,BPe,jPe,UPe,GPe,HPe,XPe,ZPe,QPe,e3e,n3e,i3e,s3e,a3e,o3e,c3e,h3e,CMe,p3e,CDe,S3e,TDe,C3e,ADe,I3e,N3e,_3e,$De,NDe,D3e,P3e,F3e,z3e,_De,DDe,pDe,V3e,kPe,W3e,q3e,K3e,TMe,PDe,FDe,Y3e,zDe,Q3e,tLe,rLe,aLe,lLe,uLe,fLe,VDe,dLe,mLe,yLe,bLe,wLe,CLe,kLe,WDe,ELe,NLe,RLe,qDe,KDe,PLe,BLe,VLe,YDe,WLe,qLe,HLe,mJ,ZLe,AMe,JDe,JLe,tFe,rFe,sFe,mDe,UI,oFe,EMe,$Me,IMe,cFe,fFe,dFe,mFe,yFe,vFe,xFe,oMe,SFe,EFe,IFe,RFe,cMe,MFe,LFe,BFe,uMe,OLe,VFe,WFe,qFe,KFe,YFe,QFe,eBe,nBe,dMe,rBe,mMe,yMe,sBe,oBe,cBe,fBe,dBe,wMe,u3e,mBe,yBe,bBe,wBe,CBe,kBe,ZDe,RBe,MBe,LBe,GLe];for(const t of FBe)J9(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hc={},qv={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function BBe(t,e){hc[t]=e}function Rs(t,e){if(!(t in hc)||e!=null){const r=jBe(t,e);if(r!==null)hc[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=hc[t];return n==null||n.isContextLost()?(delete hc[t],Rs(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),hc[t])}function zBe(t){if(!fe().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function jBe(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??zBe(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete hc[t]},!1),fe().getBool("SOFTWARE_WEBGL_ENABLED")&&(qv.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",qv)||n.getContext("experimental-webgl",qv):n.getContext("webgl2",qv)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Am;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Am||(Am={}));var Oi;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(Oi||(Oi={}));var ar;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(ar||(ar={}));function ny(t,e){return[e,t]}function VBe(t,e){return t*e}function Hv(t){const e=be(t),n=Math.ceil(e/4);return hI(n)}function Nh(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function UBe(t,e){const[n,r]=Nh(t,e);return n*r*4}function dD(t,e){const n=t;let r,i,s,a,o,l,c,f,h,p;return fe().getNumber("WEBGL_VERSION")===2?(r=n.R32F,i=n.R16F,s=n.RGBA16F,a=n.RGBA32F,o=n.RED,c=4,f=1,h=n.HALF_FLOAT,p=n.FLOAT,l=n.RGBA8):(r=t.RGBA,i=t.RGBA,s=t.RGBA,a=n.RGBA,o=t.RGBA,c=4,f=4,h=e!=null?e.HALF_FLOAT_OES:null,p=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:a,textureFormatFloat:o,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:f,textureTypeHalfFloat:h,textureTypeFloat:p}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _e(t,e){const n=e();return fe().getBool("DEBUG")&&WBe(t),n}function WBe(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+KBe(t,e))}const GBe=596e-10,qBe=65504;function HBe(t){return!!(fe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||GBe<Math.abs(t)&&Math.abs(t)<qBe)}function KBe(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function Kv(t,e){return xo(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function XBe(t,e){const n=xo(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(_e(t,()=>t.shaderSource(n,e)),_e(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function YBe(t,e){const n=xo(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(_e(t,()=>t.shaderSource(n,e)),_e(t,()=>t.compileShader(n)),fe().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw gJ(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const ZBe=/ERROR: [0-9]+:([0-9]+):/g;function gJ(t,e){const n=ZBe.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],i=t.split(`
`),s=i.length.toString().length+2,a=i.map((h,p)=>xf((p+1).toString(),s)+h);let o=0;for(let h=0;h<a.length;h++)o=Math.max(a[h].length,o);const l=a.slice(0,r-1),c=a.slice(r-1,r),f=a.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${xf(c[0],o)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join(`
`))}function QBe(t){return xo(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function JBe(t,e){if(_e(t,()=>t.linkProgram(e)),!fe().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function uE(t,e){if(_e(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function eze(t,e){const n=xo(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return _e(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),_e(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function tze(t,e){const n=xo(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return _e(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),_e(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function nze(t){return xo(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function rze(t,e){const n=fe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,i=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+i+".")}}function ize(t){return xo(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function r5(t,e,n,r,i,s,a){const o=t.getAttribLocation(e,n);return o===-1?!1:(_e(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),_e(t,()=>t.vertexAttribPointer(o,i,t.FLOAT,!1,s,a)),_e(t,()=>t.enableVertexAttribArray(o)),!0)}function sze(t,e,n){uze(t,n),_e(t,()=>t.activeTexture(t.TEXTURE0+n)),_e(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function aze(t,e,n){return xo(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function oze(t,e,n){return t.getUniformLocation(e,n)}function lze(t,e,n,r){_e(t,()=>sze(t,e,r)),_e(t,()=>t.uniform1i(n,r))}function fE(t,e,n){_e(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),_e(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function i5(t,e){_e(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),_e(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function Xv(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+cze(t,e))}function cze(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function xo(t,e,n){const r=_e(t,()=>e());if(r==null)throw new Error(n);return r}function uze(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const i=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${i}.`)}}function ih(t,e=2){return be(t.slice(0,t.length-e))}function sh(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Yv(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[ih(t),...sh(t)]),e}function fze(t,e=!1){let n=fe().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=fe().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&fe().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((o,l)=>l>=t.length-2?VO(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=Tl(t).newShape);let i=be(t),s=null;t.length<=1&&i<=n?s=[1,i]:t.length===2&&t[0]<=n&&t[1]<=n?s=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?s=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?s=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?s=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(s=[t[0],t[1]*t[2]*t[3]]);const a=s!=null&&Math.max(...s)>r&&Math.min(...s)<=(e?2:1)&&Math.min(...s)>0;if(s==null||a)if(e){const o=ih(t);let l=2,c=2;t.length&&([l,c]=sh(t)),i=o*(l/2)*(c/2),s=hI(i).map(f=>f*2)}else s=hI(i);return s}function Zv(t){return t%2===0}function Hb(t,e){if(t=t.slice(-2),e=e.slice(-2),$t(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||Zv(n)&&Zv(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&Zv(t[0])&&Zv(e[0])}let hE,dE;function hze(t){if(hE==null){const e=Rs(t);hE=e.getParameter(e.MAX_TEXTURE_SIZE)}return hE}function dze(t){if(dE==null){const e=Rs(t);dE=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,dE)}function pze(t){if(t===0)return 0;let e;const n=Rs(t);return rs(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:rs(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function rs(t,e){return t.getExtension(e)!=null}function s5(t){try{if(Rs(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function mze(t){if(t===0)return!1;const e=Rs(t);if(t===1){if(!rs(e,"OES_texture_float"))return!1}else if(!rs(e,"EXT_color_buffer_float"))return!1;return GI(e)}function gze(t){if(t===0)return!1;const e=Rs(t);if(t===1){if(!rs(e,"OES_texture_float")||!rs(e,"WEBGL_color_buffer_float"))return!1}else{if(rs(e,"EXT_color_buffer_float"))return GI(e);const r="EXT_color_buffer_half_float";if(rs(e,r)){const i=e.getExtension(r);return yze(e,i)}return!1}return GI(e)}function GI(t){const e=dD(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(s),a}function yze(t,e){const n=dD(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(a),o}function vze(t){return t!==2?!1:Rs(t).fenceSync!=null}function ry(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&G(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Be=fe();Be.registerFlag("HAS_WEBGL",()=>Be.getNumber("WEBGL_VERSION")>0);Be.registerFlag("WEBGL_VERSION",()=>s5(2)?2:s5(1)?1:0);Be.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Be.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Be.get("WEBGL_VERSION")===2);Be.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Be.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Be.registerFlag("WEBGL_PACK",()=>Be.getBool("HAS_WEBGL"));Be.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_PACK_CLIP",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_PACK_REDUCE",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_LAZILY_UNPACK",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_CONV_IM2COL",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>hze(Be.getNumber("WEBGL_VERSION")));Be.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>dze(Be.getNumber("WEBGL_VERSION")));Be.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Be.getNumber("WEBGL_VERSION");return t===0?0:pze(t)});Be.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Be.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!hK());Be.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>mze(Be.getNumber("WEBGL_VERSION")));Be.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Be.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Be.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Be.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>gze(Be.getNumber("WEBGL_VERSION")));Be.registerFlag("WEBGL_FENCE_API_ENABLED",()=>vze(Be.getNumber("WEBGL_VERSION")));Be.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Be.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Be.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});Be.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>hK()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});Be.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Be.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Be.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Be.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Be.registerFlag("WEBGL_EXP_CONV",()=>!1);Be.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Be.getBool("IS_TEST"));Be.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Be.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Be.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Be.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jr(){let t,e,n,r,i,s,a,o,l,c;return fe().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",i="texture",s="outputColor",a="out vec4 outputColor;",o=fe().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",i="texture2D",s="gl_FragColor",a="",o=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:s,defineOutput:a,defineSpecialNaN:o,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iu(t,e,n="index"){const r=je(e);return r.map((i,s)=>{const a=`int ${t[s]} = ${n} / ${i}`,o=s===r.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * ${i}`:`index -= ${t[s]} * ${i}`;return`${a}; ${o};`}).join("")}function lw(t,e,n="index"){const r=je(e);return r.map((i,s)=>{const a=`int ${t[s]} = ${n} / outShapeStrides[${s}]`,o=s===r.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * outShapeStrides[${s}]`:`index -= ${t[s]} * outShapeStrides[${s}]`;return`${a}; ${o};`}).join("")}function bze(t,e){const n=t.length,r=t.map(s=>`${e}[${s}]`),i=new Array(n-1);i[n-2]=r[n-1];for(let s=n-3;s>=0;--s)i[s]=`(${i[s+1]} * ${r[s+1]})`;return i}function xze(t,e,n="index"){const r=t.map((s,a)=>a),i=bze(r,e);return i.map((s,a)=>{const o=`int ${t[a]} = ${n} / ${i[a]}`,l=a===i.length-1?`int ${t[a+1]} = ${n} - ${t[a]} * ${i[a]}`:`index -= ${t[a]} * ${i[a]}`;return`${o}; ${l};`}).join("")}function pD(t){const e=je(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function mD(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const yJ=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:vJ}=cNe;function wze(t,e,n){const r=[];if(t.forEach(g=>{const y=be(g.shapeInfo.logicalShape);if(g.shapeInfo.isUniform?r.push(`uniform float ${g.name}${y>1?`[${y}]`:""};`):(r.push(`uniform sampler2D ${g.name};`),r.push(`uniform int offset${g.name};`)),n.enableShapeUniforms){const{uniformShape:b}=gD(n.packedInputs,g.shapeInfo.logicalShape,g.shapeInfo.texShape);switch(b.length){case 1:r.push(`uniform int ${g.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${g.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${g.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${g.name}Shape;`);break}r.push(`uniform ivec2 ${g.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(g=>{r.push(`uniform ${g.type} ${g.name}${g.arrayIndex?`[${g.arrayIndex}]`:""};`)});const i=r.join(`
`),s=t.map(g=>Sze(g,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),a=e.texShape,o=jr(),l=kze(o);let c,f,h=$ze(o);return e.isPacked?(c=Cze(e.logicalShape,a,n.enableShapeUniforms),f=Eze(o)):(c=Tze(e.logicalShape,a,n.enableShapeUniforms),f=Aze(o)),n.packedInputs&&(h+=_ze),[h,l,f,i,c,s,n.userCode].join(`
`)}function Oh(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return Wze(t,e);case 1:return qze(t,e);case 2:return Kze(t,e);case 3:return Yze(t,e);case 4:return Qze(t,e);case 5:return Jze(t);case 6:return e4e(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function bJ(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return Uze(t);case 1:return Gze(t,e);case 2:return Hze(t,e);case 3:return Xze(t,e);default:return Zze(t,e)}}function Sze(t,e,n=!1,r){let i="";n?i+=bJ(t,r):i+=Oh(t,r);const s=t.shapeInfo.logicalShape,a=e.logicalShape;return s.length<=a.length&&(n?i+=t4e(t,e):i+=n4e(t,e)),i}function Cze(t,e,n){switch(t.length){case 0:return xJ();case 1:return Rze(t,e,n);case 2:return jze(t,e,n);case 3:return Mze(t,e,n);default:return Lze(t,e,n)}}function Tze(t,e,n){switch(t.length){case 0:return xJ();case 1:return Dze(t,e,n);case 2:return Vze(t,e,n);case 3:return Pze(t,e,n);case 4:return Fze(t,e,n);case 5:return Bze(t,e);case 6:return zze(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function kze(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function Aze(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function Eze(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function $ze(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${Ize}
    ${Nze}
    ${Oze}
  `}const Ize=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Nze=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Oze=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,_ze=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function xJ(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function Rze(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function Dze(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function Mze(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[2]/2),s=i*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec3(b, r, c);
    }
  `}function Pze(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${lw(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=iu(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function Lze(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[t.length-1]/2),s=i*Math.ceil(t[t.length-2]/2);let a=s,o="",l="b, r, c";for(let c=2;c<t.length-1;c++)a*=t[t.length-c-1],o=`
      int b${c} = index / ${a};
      index -= b${c} * ${a};
    `+o,l=`b${c}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${o}

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec${t.length}(${l});
    }
  `}function Fze(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${lw(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=iu(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function Bze(t,e){const n=iu(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function zze(t,e){const n=iu(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function jze(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if($t(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const i=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec2(r, c);
    }
  `}function Vze(t,e,n){return $t(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function su(t){return`offset${t}`}function Uze(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=jr();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function Wze(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[i,s]=t.shapeInfo.texShape;if(i===1&&s===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=su(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${a});
      return sampleTexture(${n}, uv);
    }
  `;const[o,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${o}, ${l}, ${a});
      return sampleTexture(${n}, uv);
    }
  `}function Gze(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,s=jr();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${s.texture2D}(${n}, uv);
    }
  `;const a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${a[0]}, ${a[1]}, index);
      return ${s.texture2D}(${n}, uv);
    }
  `}function qze(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${_h(t)}
      }
    `;const i=t.shapeInfo.texShape,s=i[0],a=i[1];if(a===1&&s===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=su(n);return a===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / ${s}.0);
        return sampleTexture(${n}, uv);
      }
    `:s===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / ${a}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${o});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${s}, ${a}, index + ${o});
      return sampleTexture(${n}, uv);
    }
  `}function Hze(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,a=s[0],o=s[1],l=jr();if(s!=null&&$t(n,s))return e?`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}.0, ${a}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${i}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const c=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],f=Math.ceil(n[1]/2);return`
    vec4 ${i}(int row, int col) {
      vec2 uv = packedUVfrom2D(${f}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function Kze(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape;if(s!=null&&$t(n,s)){if(e)return`
      float ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const p=s[0],g=s[1];return`
    float ${i}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${g}.0, ${p}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:a,keptDims:o}=Tl(n),l=a;if(l.length<n.length){const p=Rh(t,l),g=["row","col"];return`
      ${Oh(p,e)}
      float ${i}(int row, int col) {
        return ${i}(${Dh(g,o)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${_h(t)}
      }
    `;const c=s[0],f=s[1],h=su(r);return f===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${f}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${i}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${h};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${i}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${h};
    vec2 uv = uvFromFlat(${c}, ${f}, index);
    return sampleTexture(${r}, uv);
  }
`}function Xze(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,a=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(n[0]===1){const p=n.slice(1),g=[1,2],y=Rh(t,p),b=["b","row","col"];return`
        ${bJ(y,e)}
        vec4 ${i}(int b, int row, int col) {
          return ${i}(${Dh(b,g)});
        }
      `}const o=jr();if(e)return`
    vec4 ${i}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `;const l=a[0],c=a[1],f=Math.ceil(n[2]/2),h=f*Math.ceil(n[1]/2);return`
    vec4 ${i}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${h}, ${f}, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `}function Yze(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[1]*n[2],a=n[2],{newShape:o,keptDims:l}=Tl(n),c=o;if(c.length<n.length){const b=Rh(t,c),v=["row","col","depth"];return`
        ${Oh(b,e)}
        float ${i}(int row, int col, int depth) {
          return ${i}(${Dh(v,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${s}, ${a}, 1)));
        ${_h(t)}
      }
    `;const f=t.shapeInfo.texShape,h=f[0],p=f[1],g=t.shapeInfo.flatOffset;if(p===s&&g==null)return e?`
      float ${i}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${i}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${a}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${p}.0, ${h}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(p===a&&g==null)return e?`
      float ${i}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${h}.0);
      return sampleTexture(${r}, uv);
    }
  `;const y=su(r);return e?`
    float ${i}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${y};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${i}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s} + col * ${a} + depth + ${y};
        vec2 uv = uvFromFlat(${h}, ${p}, index);
        return sampleTexture(${r}, uv);
      }
  `}function Zze(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=jr();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${n}, uv);
    }
  `;const s=t.shapeInfo.logicalShape,a=s.length,o=t.shapeInfo.texShape,l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=l[0],f=l[1],h=Math.ceil(s[a-1]/2);let p=h*Math.ceil(s[a-2]/2),g="int b, int row, int col",y=`b * ${p} + (row / 2) * ${h} + (col / 2)`;for(let b=2;b<a-1;b++)g=`int b${b}, `+g,p*=s[a-b-1],y=`b${b} * ${p} + `+y;return`
    vec4 ${r}(${g}) {
      int index = ${y};
      int texR = index / ${f};
      int texC = index - texR * ${f};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}, ${c});
      return ${i.texture2D}(${n}, uv);
    }
  `}function Qze(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[3],a=n[2]*s,o=n[1]*a,{newShape:l,keptDims:c}=Tl(n);if(l.length<n.length){const S=Rh(t,l),T=["row","col","depth","depth2"];return`
      ${Oh(S,e)}
      float ${i}(int row, int col, int depth, int depth2) {
        return ${i}(${Dh(T,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${o}, ${a}, ${s}, 1)));
        ${_h(t)}
      }
    `;const f=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,p=h[0],g=h[1],y=`int stride2 = ${r}Shape[3];`,b=`int stride1 = ${r}Shape[2] * stride2;`,v=`int stride0 = ${r}Shape[1] * stride1;`;if(g===o&&f==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        ${y}
        ${b}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${a}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(g===s&&f==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;const w=su(r);return e?`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${y}
      ${b}
      ${v}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${w});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${a} +
          depth * ${s} + depth2;
      vec2 uv = uvFromFlat(${p}, ${g}, index + ${w});
      return sampleTexture(${r}, uv);
    }
  `}function Jze(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[4],s=e[3]*i,a=e[2]*s,o=e[1]*a,{newShape:l,keptDims:c}=Tl(e);if(l.length<e.length){const b=Rh(t,l),v=["row","col","depth","depth2","depth3"];return`
      ${Oh(b)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${Dh(v,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${o}, ${a}, ${s}, ${i})) +
          depth3;
        ${_h(t)}
      }
    `;const f=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,p=h[0],g=h[1];if(g===o&&f==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${a}, ${s}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(g===i&&f==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;const y=su(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${a} + depth * ${s} +
          depth2 * ${i} + depth3 + ${y};
      vec2 uv = uvFromFlat(${p}, ${g}, index);
      return sampleTexture(${n}, uv);
    }
  `}function e4e(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:s}=Tl(e);if(i.length<e.length){const v=Rh(t,i),w=["row","col","depth","depth2","depth3","depth4"];return`
      ${Oh(v)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${Dh(w,s)});
      }
    `}const a=e[5],o=e[4]*a,l=e[3]*o,c=e[2]*l,f=e[1]*c;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${f}, ${c}, ${l}, ${o})) +
          dot(
            vec2(depth3, depth4),
            vec2(${a}, 1)));
        ${_h(t)}
      }
    `;const h=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,g=p[0],y=p[1];if(y===f&&h==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${o}, ${a})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${y}.0, ${g}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(y===a&&h==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${y}.0, ${g}.0);
        return sampleTexture(${n}, uv);
      }
    `;const b=su(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${f} + col * ${c} + depth * ${l} +
          depth2 * ${o} + depth3 * ${a} + depth4 + ${b};
      vec2 uv = uvFromFlat(${g}, ${y}, index);
      return sampleTexture(${n}, uv);
    }
  `}function _h(t){const e=t.name,n=be(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function t4e(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",s=t.shapeInfo.logicalShape.length,a=e.logicalShape.length,o=vJ(t.shapeInfo.logicalShape,e.logicalShape),l=Lt(a),c=a-s;let f;const h=["x","y","z","w","u","v"];s===0?f="":a<2&&o.length>=1?f="coords = 0;":f=o.map(S=>`coords.${h[S+c]} = 0;`).join(`
`);let p="";a<2&&s>0?p="coords":p=t.shapeInfo.logicalShape.map((S,T)=>`coords.${h[T+c]}`).join(", ");let g="return outputValue;";const b=be(t.shapeInfo.logicalShape)===1,w=be(e.logicalShape)===1;if(s===1&&!b&&!w)g=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(b&&!w)a===1?g=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:g=`
        return vec4(outputValue.x);
      `;else if(o.length){const S=s-2,T=s-1;o.indexOf(S)>-1&&o.indexOf(T)>-1?g="return vec4(outputValue.x);":o.indexOf(S)>-1?g="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(T)>-1&&(g="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${i}() {
      ${l} coords = getOutputCoords();
      ${f}
      vec4 outputValue = get${r}(${p});
      ${g}
    }
  `}function n4e(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",s=e.texShape,a=t.shapeInfo.texShape,o=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&o===l&&t.shapeInfo.flatOffset==null&&$t(a,s))return`
      float ${i}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const c=Lt(l),f=vJ(t.shapeInfo.logicalShape,e.logicalShape),h=l-o;let p;const g=["x","y","z","w","u","v"];o===0?p="":l<2&&f.length>=1?p="coords = 0;":p=f.map(b=>`coords.${g[b+h]} = 0;`).join(`
`);let y="";return l<2&&o>0?y="coords":y=t.shapeInfo.logicalShape.map((b,v)=>`coords.${g[v+h]}`).join(", "),`
    float ${i}() {
      ${c} coords = getOutputCoords();
      ${p}
      return get${r}(${y});
    }
  `}function Lt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function gD(t,e,n){const{newShape:r,keptDims:i}=Tl(e),s=e.length,a=t&&s===3&&e[0]===1,o=a?e.slice(1):r,l=!t&&s>1&&!$t(e,n)&&r.length<s||a;return{useSqueezeShape:l,uniformShape:l?o:e,keptDims:i}}function Rh(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Dh(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r4e(t,e,n,r){const i=n.map((f,h)=>{const p={logicalShape:f.shape,texShape:f.isUniform?null:f.texData.texShape,isUniform:f.isUniform,isPacked:f.isUniform?!1:f.texData.isPacked,flatOffset:null};return f.texData!=null&&f.texData.slice!=null&&f.texData.slice.flatOffset>0&&(p.flatOffset=f.texData.slice.flatOffset),{name:e.variableNames[h],shapeInfo:p}}),s=i.map(f=>f.shapeInfo),a={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},o=wze(i,a,e),l=YBe(t.gl,o),c=t.createProgram(l);return fe().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:s,outShapeInfo:a,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:e,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:s,outShapeInfo:a},wJ(t,e,c)))}function wJ(t,e,n){const r=[],i=[];let s,a,o,l=null,c=null;c=t.getUniformLocation(n,"NAN",!1),fe().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const f=!1;for(const h of e.variableNames){const p={name:h,uniform:t.getUniformLocation(n,h,f),offset:t.getUniformLocation(n,`offset${h}`,f)};e.enableShapeUniforms&&(p.shape=t.getUniformLocation(n,`${h}Shape`,f),p.texShape=t.getUniformLocation(n,`${h}TexShape`,f)),r.push(p)}if(e.enableShapeUniforms&&(s=t.getUniformLocation(n,"outShape",f),o=t.getUniformLocation(n,"outShapeStrides",f),a=t.getUniformLocation(n,"outTexShape",f)),e.customUniforms)for(const h of e.customUniforms)i.push(t.getUniformLocation(n,h.name,f));return{variablesLocations:r,customUniformLocations:i,infLoc:l,nanLoc:c,outShapeLocation:s,outShapeStridesLocation:o,outTexShapeLocation:a}}function a5(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const i=n.logicalShape,s=e[r],a=s.shape;if(!$t(i,a))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${a} must match`);if(n.isUniform&&s.isUniform)return;const o=n.texShape,l=s.isUniform?null:s.texData.texShape;if(!$t(o,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${o} and ${l} must match`)})}function i4e(t,e,n,r,i){e.program.enableShapeUniforms||(a5(e.inShapeInfos,n),a5([e.outShapeInfo],[r]));const s=r.texData.texture,a=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(s.texture,a[0],a[1]):t.setOutputMatrixTexture(s.texture,a[0],a[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),fe().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const c=n[l],{uniform:f,offset:h,shape:p,texShape:g}=e.variablesLocations[l];if(p){const{uniformShape:y}=gD(e.program.packedInputs,c.shape,c.texData.texShape);switch(y.length){case 1:t.gl.uniform1iv(p,new Int32Array(y));break;case 2:t.gl.uniform2iv(p,new Int32Array(y));break;case 3:t.gl.uniform3iv(p,new Int32Array(y));break;case 4:t.gl.uniform4iv(p,new Int32Array(y));break}}if(g&&t.gl.uniform2i(g,c.texData.texShape[0],c.texData.texShape[1]),f!=null){if(c.isUniform){if(be(c.shape)<2)t.gl.uniform1f(f,c.uniformValues[0]);else{let y=c.uniformValues;y instanceof Float32Array||(y=new Float32Array(y)),t.gl.uniform1fv(f,y)}continue}c.texData.slice!=null&&h!=null&&t.gl.uniform1i(h,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,f,l)}}const o=e.outShapeLocation;if(o)switch(r.shape.length){case 1:t.gl.uniform1iv(o,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(o,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(o,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(o,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=je(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&i)for(let l=0;l<e.program.customUniforms.length;++l){const c=e.program.customUniforms[l],f=e.customUniformLocations[l],h=i[l];if(c.type==="float")t.gl.uniform1fv(f,h);else if(c.type==="vec2")t.gl.uniform2fv(f,h);else if(c.type==="vec3")t.gl.uniform3fv(f,h);else if(c.type==="vec4")t.gl.uniform4fv(f,h);else if(c.type==="int")t.gl.uniform1iv(f,h);else if(c.type==="ivec2")t.gl.uniform2iv(f,h);else if(c.type==="ivec3")t.gl.uniform3iv(f,h);else if(c.type==="ivec4")t.gl.uniform4iv(f,h);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function s4e(t,e,n){let r="";e.concat(n).forEach(a=>{const o=a.texData!=null&&a.texData.slice!=null&&a.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!a.isUniform){const l=a.texData.texShape,{useSqueezeShape:c,uniformShape:f,keptDims:h}=gD(t.packedInputs,a.shape,l);let p="",g="",y="";if(f.length===1&&t.packedInputs){const k=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];p=`${k[0]>1}_${k[1]>1}`}else if(f.length===2&&!t.packedInputs)g=`${f[0]>1}_${f[1]>1}`;else if(f.length>2&&!t.packedInputs){const k=je(f);y=`${k[0]===l[1]}_${k[k.length-1]===l[1]}`}const b=a.shape.length,v=f.length===2&&$t(a.shape,l),w=be(a.shape)===1,S=Qf(a.shape,n.shape),T=!t.packedInputs&&b===n.shape.length&&$t(l,n.texData.texShape),A=t.packedInputs||f.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${b}_${T}_${c?h:""}_${f.length}_${w}_${S}_${v}_${p}_${g}_${y}_${A}_${o}`}else{const l=a.isUniform?"uniform":a.texData.texShape;r+=`${a.shape}_${l}_${o}`}});const i=t.userCode;let s=t.constructor.name;return s+="_"+r+"_"+i+`${fe().getNumber("WEBGL_VERSION")}`,s}function kr(t){return fe().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a4e{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Am.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=jr();this.outputShape=e,this.enableShapeUniforms=kr(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?lw(["r","c","d"],e):iu(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class o4e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Am.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=jr();this.outputShape=e,this.enableShapeUniforms=kr(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?lw(["r","c","d"],e):iu(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class l4e{constructor(e){this.variableNames=["A"],this.outTexUsage=Oi.DOWNLOAD;const n=jr();this.outputShape=e,this.userCode=`
      ${yJ}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c4e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Oi.DOWNLOAD;const n=jr();this.outputShape=e,this.userCode=`
      ${yJ}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u4e={R:0,G:1,B:2,A:3};class o5{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const i=jr();this.outputShape=e,this.enableShapeUniforms=kr(this.outputShape.length);let s="result";n&&(s="floor(result * 255. + 0.5)");let a="";for(let o=0;o<r.length;o++){const l=r[o];a+=`
          if(offset == ${o}) {
            result = values[${u4e[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?mD():pD(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${i.texture2D}(A, uv);
          ${a}
        }
        ${i.output} = vec4(${s}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class f4e{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=jr();this.outputShape=e,this.enableShapeUniforms=kr(this.outputShape.length);let i="",s="result";n&&(s="floor(result * 255. + 0.5)");for(let a=0;a<=1;a++)for(let o=0;o<=1;o++){const l=a*2+o;i+=`
          localCoords = coords;
          if(localCoords[2] + ${o} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${o};
          if (localCoords[1] + ${a} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${a};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?mD():pD(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${i}

          ${r.output} = ${s};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h4e(t){const e=jr(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return XBe(t,n)}function d4e(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return eze(t,e)}function p4e(t){const e=new Uint16Array([0,1,2,2,1,3]);return tze(t,e)}function iy(t,e,n,r,i,s){rze(e,n);const a=nze(t),o=t.TEXTURE_2D;return _e(t,()=>t.bindTexture(o,a)),_e(t,()=>t.texParameteri(o,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),_e(t,()=>t.texParameteri(o,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),_e(t,()=>t.texParameteri(o,t.TEXTURE_MIN_FILTER,t.NEAREST)),_e(t,()=>t.texParameteri(o,t.TEXTURE_MAG_FILTER,t.NEAREST)),fe().getNumber("WEBGL_VERSION")===1?_e(t,()=>t.texImage2D(o,0,r,e,n,0,i,s,null)):_e(t,()=>t.texStorage2D(o,1,r,e,n)),_e(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:a,texShape:[n,e]}}function SJ(t){return t.internalFormatFloat}function m4e(t,e,n,r){const[i,s]=ny(e,n);return iy(t,i,s,SJ(r),r.textureFormatFloat,t.FLOAT)}function CJ(t){return t.internalFormatHalfFloat}function g4e(t,e,n,r){const[i,s]=ny(e,n);return iy(t,i,s,CJ(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function TJ(t){return t.downloadTextureFormat}function y4e(t,e,n,r){const[i,s]=ny(e,n);return iy(t,i,s,TJ(r),t.RGBA,t.UNSIGNED_BYTE)}function kJ(t){return t.internalFormatPackedFloat}function v4e(t,e,n,r){const[i,s]=Nh(e,n);return iy(t,i,s,kJ(r),t.RGBA,t.FLOAT)}function AJ(t){return t.internalFormatPackedHalfFloat}function b4e(t,e,n,r){const[i,s]=Nh(e,n);return iy(t,i,s,AJ(r),t.RGBA,r.textureTypeHalfFloat)}function x4e(t,e,n){return _e(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),r5(t,e,"clipSpacePos",n,3,20,0)&&r5(t,e,"uv",n,2,20,12)}function w4e(t,e,n,r,i,s){_e(t,()=>t.bindTexture(t.TEXTURE_2D,e));let a,o,l;i instanceof Uint8Array?(a=new Uint8Array(n*r*4),o=t.UNSIGNED_BYTE,l=t.RGBA):(a=new Float32Array(n*r*4),o=t.FLOAT,l=s.internalFormatPackedFloat),a.set(i),fe().getNumber("WEBGL_VERSION")===2?_e(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,o,a)):_e(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,o,a)),_e(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function S4e(t,e,n){_e(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?fe().getNumber("WEBGL_VERSION")===2?_e(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):_e(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):fe().getNumber("WEBGL_VERSION")===2?_e(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):_e(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),_e(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function C4e(t,e,n,r){const i=t.createBuffer();_e(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,i));const o=4*4*e*n;return _e(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,o,t.STREAM_READ)),_e(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),_e(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),i}function T4e(t,e,n){const r=t,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function k4e(t,e,n,r){const[i,s]=ny(e,n),a=4,o=new Uint8Array(VBe(e*n,a));return _e(t,()=>t.readPixels(0,0,i,s,r.downloadTextureFormat,t.UNSIGNED_BYTE,o)),new Float32Array(o.buffer)}function A4e(t,e,n,r,i,s,a,o){const l=t,c=new Float32Array(UBe(s,a));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function E4e(t,e,n){const r=new Float32Array(e*n*4);return _e(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pE{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=fe().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,BBe(n,e)):this.gl=Rs(n),e=this.gl,fe().getNumber("WEBGL_VERSION")===2){const s=e;this.createVertexArray=()=>_e(s,()=>s.createVertexArray()),this.bindVertexArray=a=>_e(s,()=>s.bindVertexArray(a)),this.deleteVertexArray=a=>_e(s,()=>s.deleteVertexArray(a)),this.getVertexArray=()=>_e(s,()=>s.getParameter(s.VERTEX_ARRAY_BINDING))}else if(e!=null){const s=e.getExtension("OES_vertex_array_object");if(s==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>_e(e,()=>s.createVertexArrayOES()),this.bindVertexArray=a=>_e(e,()=>s.bindVertexArrayOES(a)),this.deleteVertexArray=a=>_e(e,()=>s.deleteVertexArrayOES(a)),this.getVertexArray=()=>_e(e,()=>e.getParameter(s.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const i="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),fe().getNumber("WEBGL_VERSION")===1){const s="OES_texture_float",a="OES_texture_half_float";if(this.textureFloatExtension=Kv(this.gl,s),rs(this.gl,a))this.textureHalfFloatExtension=Kv(this.gl,a);else if(fe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),rs(this.gl,i))this.colorBufferHalfFloatExtension=Kv(this.gl,i);else if(fe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",rs(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(rs(this.gl,i))this.colorBufferHalfFloatExtension=this.gl.getExtension(i);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=d4e(this.gl),this.indexBuffer=p4e(this.gl),this.framebuffer=ize(this.gl),this.textureConfig=dD(this.gl,this.textureHalfFloatExtension)}get debug(){return fe().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;_e(e,()=>e.finish()),_e(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),_e(e,()=>e.deleteFramebuffer(this.framebuffer)),_e(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),_e(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),_e(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),m4e(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),g4e(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),y4e(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),S4e(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,i){this.throwIfDisposed(),w4e(this.gl,e,n,r,i,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),b4e(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),v4e(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(i5(this.gl,this.framebuffer),this.outputTexture=null),_e(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>k4e(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,i,s,a){return A4e(this.gl,e,n,r,i,s,a,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return T4e(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const i=C4e(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(fe().getBool("WEBGL_FENCE_API_ENABLED")){const i=e,s=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const a=i.clientWaitSync(s,0,0);return a===i.ALREADY_SIGNALED||a===i.CONDITION_SATISFIED},n=s}else fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>E4e(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=h4e(n));const r=QBe(n);_e(n,()=>n.attachShader(r,this.vertexShader)),_e(n,()=>n.attachShader(r,e)),JBe(n,r);const i=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&uE(n,i),i}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;_e(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),x4e(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(_e(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&uE(this.gl,this.program),_e(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?aze(this.gl,e,n):oze(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),_e(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),lze(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[i,s]=Nh(n,r);this.setOutputMatrixTextureDriver(e,i,s)}setOutputMatrixWriteRegion(e,n,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,n)}setOutputPackedMatrixWriteRegion(e,n,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&uE(this.gl,this.program),Xv(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}_e(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),_e(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Kv(this.gl,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.createQuery();return r.beginQuery(i.TIME_ELAPSED_EXT,s),s}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await VW(()=>this.disposed||this.isQueryAvailable(e,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),s&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),i=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=$4e(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in fe().platform&&(r=fe().platform.setTimeoutCustom.bind(fe().platform)),VW(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),fE(this.gl,e,this.framebuffer),this.debug&&Xv(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(fE(this.gl,this.outputTexture,this.framebuffer),this.debug&&Xv(this.gl)):i5(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const i=this.gl;fE(i,e,this.framebuffer),this.debug&&Xv(i),this.outputTexture=e,_e(i,()=>i.viewport(0,0,n,r)),_e(i,()=>i.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,i){this.throwIfDisposed(),_e(this.gl,()=>this.gl.scissor(e,n,r,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function $4e(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:I4e,bincountImpl:EJ,bincountReduceImpl:N4e,bitwiseAndImpl:O4e,castImpl:_4e,ceilImpl:R4e,concatImpl:D4e,equalImpl:M4e,expImpl:P4e,expm1Impl:L4e,floorImpl:F4e,gatherNdImpl:B4e,gatherV2Impl:z4e,greaterImpl:j4e,greaterEqualImpl:V4e,lessImpl:U4e,lessEqualImpl:W4e,linSpaceImpl:G4e,logImpl:q4e,maxImpl:H4e,maximumImpl:K4e,minimumImpl:X4e,multiplyImpl:Y4e,negImpl:Z4e,notEqualImpl:Q4e,prodImpl:J4e,raggedGatherImpl:eje,raggedRangeImpl:tje,raggedTensorToTensorImpl:nje,rangeImpl:rje,rsqrtImpl:ije,scatterImpl:sje,sigmoidImpl:aje,simpleAbsImpl:$J,sliceImpl:oje,sparseFillEmptyRowsImpl:lje,sparseReshapeImpl:cje,sparseSegmentReductionImpl:IJ,sqrtImpl:uje,staticRegexReplaceImpl:fje,stridedSliceImpl:hje,stringNGramsImpl:dje,stringSplitImpl:pje,stringToHashBucketFastImpl:mje,subImpl:gje,tileImpl:yje,topKImpl:vje,transposeImpl:yD,uniqueImpl:bje}=SMe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NJ(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function Lr(t,e){return e===1?[t]:NJ(t,e)}function xje(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wje{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=kr(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Lr("rc",this.rank),r=Lt(this.rank),i=this.getOutOfBoundsCondition(n),s=this.getSetup(n),a=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${i}) {
            setOutput(vec4(0));
          } else {
            ${s}

            setOutput(vec4(${a}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let i=0;i<=1;i++){let s=`${r===0?"r":"rp1"}, ${i===0?"c":"cp1"}`;for(let a=2;a<this.rank;a++)s=`${e[e.length-1-a]},`+s;n.push(s)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],i=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${i};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OJ{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=kr(this.outputShape.length);let r="";for(let i=0;i<4;i++){let s="thisRC = rc;";i%2===1&&(s+="thisRC.z += 1;"),i>1&&(s+="thisRC.y += 1;"),r+=`
        ${s}
        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${i}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${i>0?"}":""}
      `}this.userCode=`
      ${Sje(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?mD():pD(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function Sje(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?xze(["r","c","d"],"inputShape"):iu(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cje{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const i=c5(n,r),s=u5(e,i,r);s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]);const a=l5(e,i,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();const l=this.freeTextures[s].pop();return this.usedTextures[s].push(l),l}let o;return i===ar.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===ar.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===ar.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===ar.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===ar.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[s].push(o),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),o}releaseTexture(e,n,r,i){if(this.freeTextures==null)return;const s=c5(r,i),a=u5(n,s,i);a in this.freeTextures||(this.freeTextures[a]=[]);const o=l5(n,s,this.gpgpu.gl,this.gpgpu.textureConfig,i),l=fe().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[a].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;const c=this.usedTextures[a],f=c&&c.indexOf(e);if(f==null||f<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[f]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function Tje(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function l5(t,e,n,r,i){const s=kje(e,r);let a;if(i){const[l,c]=Nh(t[0],t[1]);a=l*c}else{const[l,c]=ny(t[0],t[1]);a=l*c}const o=Tje(n,s);return a*o}function kje(t,e){switch(t){case ar.PACKED_2X2_FLOAT32:return kJ(e);case ar.PACKED_2X2_FLOAT16:return AJ(e);case ar.UNPACKED_FLOAT32:return SJ(e);case ar.UNPACKED_FLOAT16:return CJ(e);case ar.PACKED_4X1_UNSIGNED_BYTE:return TJ(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function Aje(t){return fe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?ar.PACKED_2X2_FLOAT32:ar.UNPACKED_FLOAT32:t?ar.PACKED_2X2_FLOAT16:ar.UNPACKED_FLOAT16}function c5(t,e){if(t===Oi.UPLOAD)return ar.PACKED_2X2_FLOAT32;if(t===Oi.RENDER||t==null)return Aje(e);if(t===Oi.DOWNLOAD||t===Oi.PIXELS)return ar.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function u5(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ys{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=kr(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const hs="if (isnan(x)) return x;",Eje="return x;",f5="return abs(x);",$je="return (x >= 0.0) ? x : (exp(x) - 1.0);",Ije=hs+`
  return (x < 0.0) ? 0.0 : x;
`,Nje=hs+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Ko="return x;",Oje="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _je="return x;",Rje=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Dje=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Mje=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Pje="return 1.0 / (1.0 + exp(-1.0 * x));";class nl{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=kr(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Lje{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=kr(this.outputShape.length);const n=e.length,r=Lr("rc",n),i=Lt(n),s=xje(n,r),a=r.slice(-2),o=n<=1?"rc":`vec2(${a.join(",")})`;this.userCode=`
      void main() {
        ${i} rc = getOutputCoords();
        vec4 packedInput = getA(${s});

        setOutput(getChannel(packedInput, ${o}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fje=eX,Bje=1e-7,zje=1e-4,Qv={};function jje(t){return t in Qv||(Qv[t]={}),Qv[t]}const Vje=fe().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),Uje=600;function Wje(){return fe().global.screen==null?1024:fe().global.screen.height*fe().global.screen.width*window.devicePixelRatio*Uje/1024/1024}class cw extends jO{nextDataId(){return cw.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!fe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof pE)n=e;else{const r=Rs(fe().getNumber("WEBGL_VERSION"),e);n=new pE(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Rs(fe().getNumber("WEBGL_VERSION"));n=new pE(r),this.binaryCache=jje(fe().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new Cje(this.gpgpu),this.numMBBeforeWarning=Wje(),this.texData=new T9(this,Vs())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,i,s,a){const o=this.makeTensorInfo(n,r),l=this.texData.get(o.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[i,s]},l.texShape=[i,s];const c=Yv(n),f=new o5(c,!1,a),h=this.runWebGLProgram(f,[o],r,[[i,s]]);return h.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(o),h.dataId}write(e,n,r){if((fe().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||fe().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const i={id:this.nextDataId()};return this.texData.set(i,{shape:n,dtype:r,values:e,usage:Oi.UPLOAD,refCount:1}),i}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,i,s){if(fe().getBool("DEBUG")&&this.checkNumericalProblems(n),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:i,values:n,usage:Oi.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:i,complexTensorInfos:s,slice:a,shape:o,isPacked:l}=n;if(a!=null){let p;l?p=new nl(o,Ko):p=new Ys(o,Ko);const g=this.runWebGLProgram(p,[{dataId:e,shape:o,dtype:i}],i),y=this.readSync(g.dataId);return this.disposeIntermediateTensorInfo(g),y}if(r!=null)return this.convertAndCacheOnCPU(e);if(i==="string")return r;const c=this.activeTimers!=null;let f;c&&(f=Wr());let h;if(i==="complex64"){const p=this.readSync(s.real.dataId),g=this.readSync(s.imag.dataId);h=uo(p,g)}else h=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=Wr()-f),this.convertAndCacheOnCPU(e,h)}async read(e){if(this.pendingRead.has(e)){const y=this.pendingRead.get(e);return new Promise(b=>y.push(b))}const n=this.texData.get(e),{values:r,shape:i,slice:s,dtype:a,complexTensorInfos:o,isPacked:l}=n;if(s!=null){let y;l?y=new nl(i,Ko):y=new Ys(i,Ko);const b=this.runWebGLProgram(y,[{dataId:e,shape:i,dtype:a}],a),v=this.read(b.dataId);return this.disposeIntermediateTensorInfo(b),v}if(r!=null)return this.convertAndCacheOnCPU(e);if(fe().getBool("DEBUG")&&!fe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&fe().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,f;if(a!=="complex64"&&fe().get("WEBGL_BUFFER_SUPPORTED")){f=this.decode(e);const y=this.texData.get(f.dataId);c=this.gpgpu.createBufferFromTexture(y.texture.texture,...Hv(i))}this.pendingRead.set(e,[]),a!=="complex64"&&await this.gpgpu.createAndWaitForFence();let h;if(a==="complex64"){const y=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]),b=y[0],v=y[1];h=uo(b,v)}else if(c==null)h=this.getValuesFromTexture(e);else{const y=be(i);h=this.gpgpu.downloadFloat32MatrixFromBuffer(c,y)}if(f!=null&&this.disposeIntermediateTensorInfo(f),c!=null){const y=this.gpgpu.gl;_e(y,()=>y.deleteBuffer(c))}const p=this.convertAndCacheOnCPU(e,h),g=this.pendingRead.get(e);return this.pendingRead.delete(e),g.forEach(y=>y(p)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Vs().removeDataId(e,this),this.pendingDeletes--),p}readToGPU(e,n={}){const r=this.texData.get(e),{values:i,shape:s,slice:a,dtype:o,isPacked:l,texture:c}=r;if(o==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(a!=null){let g;l?g=new nl(s,Ko):g=new Ys(s,Ko);const y=this.runWebGLProgram(g,[{dataId:e,shape:s,dtype:o}],o),b=this.readToGPU(y,n);return this.disposeIntermediateTensorInfo(y),b}if(c==null)throw i!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const f=this.decode(e,n.customTexShape),h=Vs().makeTensorFromTensorInfo(f),p=this.texData.get(f.dataId);return Object.assign({tensorRef:h},p.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(i=>fl(i));return at(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return at(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!HBe(r))throw fe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:i}=this.texData.get(e),s=be(n);if(fe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const p=this.decode(e),g=this.texData.get(p.dataId),y=this.gpgpu.downloadMatrixFromPackedTexture(g.texture.texture,...Hv(n)).subarray(0,s);return this.disposeIntermediateTensorInfo(p),y}const a=fe().getBool("WEBGL_PACK")&&i===!0,o=a?Yv(n):n,l=a?new c4e(o):new l4e(o),c=this.runWebGLProgram(l,[{shape:o,dtype:r,dataId:e}],"float32"),f=this.texData.get(c.dataId),h=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(f.texture.texture,f.texShape[0],f.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(c),h}timerAvailable(){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let i=!1;this.programTimersStack==null?(this.programTimersStack=r,i=!0):this.activeTimers.push(r),this.activeTimers=r,e();const s=Mc(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),a=Mc(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,i&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(s);o.kernelMs=$Te(l),o.getExtraProfileInfo=()=>l.map((c,f)=>({name:a[f],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Wr(),endMs:null}}endTimer(e){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Wr(),e)}async getQueryTime(e){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:i,usage:s,isPacked:a,slice:o}=this.texData.get(e),l=o&&o.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(n,i,s,a)));const f=this.texData.get(e);f.texture=null,f.texShape=null,f.isPacked=!1,f.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=Vje){return fe().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&be(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){Ni("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return Fje(e.shape,n)}packedUnaryOp(e,n,r){const i=new nl(e.shape,n),s=this.compileAndRun(i,[e],r);return Vs().makeTensorFromTensorInfo(s)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const i=$J(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,i)}if(fe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,f5,e.dtype);const n=new Ys(e.shape,f5),r=this.compileAndRun(n,[e]);return Vs().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&Um(r[0])){const s=r.map(a=>al(a));i=this.write(s,e,n)}else i=this.write(r,e,n);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:n}}makeOutput(e,n,r){return Vs().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new Lje(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new wje(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[ih(e.shape),...sh(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},s=[ih(n),...sh(n)],a=new OJ(s,r),o=!0,l=[r],c=this.runWebGLProgram(a,[i],e.dtype,l,o);return{dataId:c.dataId,shape:n,dtype:c.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:i,shape:s,dtype:a}=r;if(n!=null){const p=be(s),g=n[0]*n[1]*4;G(p<=g,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const o=Yv(s);let l;i?l=new o4e(o):l=new a4e(o);const c=!0,f=[n??Hv(o)],h=this.runWebGLProgram(l,[{shape:o,dtype:a,dataId:e}],a,f,c,n);return{dtype:a,shape:s,dataId:h.dataId}}runWebGLProgram(e,n,r,i,s=!1,a){const o=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(o.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===Am.DENSE){const w=a??Hv(e.outputShape);l.texShape=w.map(S=>S*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),be(o.shape)===0)return l.values=xr(o.dtype,0),o;const c=[],f=n.map(w=>{if(w.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let S=this.texData.get(w.dataId);if(S.texture==null){if(!e.packedInputs&&be(w.shape)<=fe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:w.shape,texData:null,isUniform:!0,uniformValues:S.values};e.packedInputs&&(S.isPacked=!0,S.shape=w.shape)}if(this.uploadToGPU(w.dataId),!!S.isPacked!=!!e.packedInputs)w=S.isPacked?this.unpackTensor(w):this.packTensor(w),c.push(w),S=this.texData.get(w.dataId);else if(S.isPacked&&!Hb(S.shape,w.shape)){const T=w,A=w.shape;w.shape=S.shape,w=this.packedReshape(w,A),c.push(w),S=this.texData.get(w.dataId),T.shape=A}return{shape:w.shape,texData:S,isUniform:!1}});this.uploadToGPU(o.dataId);const h={shape:o.shape,texData:l,isUniform:!1},p=s4e(e,f,h),g=this.getAndSaveBinary(p,()=>r4e(this.gpgpu,e,f,h)),y=this.activeTimers!=null;let b;y&&(b=this.startTimer()),fe().get("ENGINE_COMPILE_ONLY")||i4e(this.gpgpu,g,f,h,i),c.forEach(w=>this.disposeIntermediateTensorInfo(w)),y&&(b=this.endTimer(b),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(b)}));const v=fe().getNumber("WEBGL_FLUSH_THRESHOLD");if(v>0){const w=Wr();w-this.lastGlFlushTime>v&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=w)}if(!fe().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&s===!1){const w=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),w}return o}compileAndRun(e,n,r,i,s=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,i,s)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(fe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=ce(()=>{if(!fe().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=fe().getBool("DEBUG");fe().set("DEBUG",!1);const n=this.abs(At(1e-8)).dataSync()[0];if(fe().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?Bje:zje}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:i,values:s,texture:a,usage:o,isPacked:l}=n;if(a!=null)return;const c=this.activeTimers!=null;let f;c&&(f=Wr());let h=n.texShape;if(h==null&&(h=fze(r,l),n.texShape=h),s!=null){const p=Yv(r);let g,y=h[1],b=h[0];const v=s instanceof Uint8Array||s instanceof Uint8ClampedArray;(l||!v)&&([y,b]=Nh(h[0],h[1])),l?g=new f4e(p,v):g=new o5(p,v);const w=v?[b,y]:h,S=this.makeTensorInfo(w,i),T=this.texData.get(S.dataId);v?T.usage=Oi.PIXELS:T.usage=Oi.UPLOAD,T.texShape=w,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(S.dataId),y,b,s);const A=[[b,y]],E=this.runWebGLProgram(g,[S],i,A,!0),I=this.texData.get(E.dataId);n.texShape=I.texShape,n.isPacked=I.isPacked,n.usage=I.usage,fe().get("ENGINE_COMPILE_ONLY")?this.disposeData(E.dataId):(n.texture=I.texture,n.values=null,this.texData.delete(E.dataId)),this.disposeIntermediateTensorInfo(S),c&&(this.uploadWaitMs+=Wr()-f)}else{const p=this.acquireTexture(h,o,i,l);n.texture=p}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:i}=r;return n!=null&&(r.values=Gje(n,i)),r.values}acquireTexture(e,n,r,i){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${s} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,i)}computeBytes(e,n){return e[0]*e[1]*Cb(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(i=>{try{this.checkCompletion_(n),i(!0)}catch(s){throw s}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await yX(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(gJ(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:i,nanLoc:s,outShapeLocation:a,outShapeStridesLocation:o,outTexShapeLocation:l}=wJ(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=i,e.nanLoc=s,e.outShapeLocation=a,e.outShapeStridesLocation=o,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:i,height:s,width:a,channels:o}=e,l=Vs().backend;if(!l.gpgpu.gl.isTexture(i))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(i,n,r,s,a,o);return Vs().makeTensorFromDataId(c,n,r,l)}}cw.nextDataId=0;function Gje(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dK()&&yK("webgl",()=>new cw,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vD=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Hc{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=nt(n,r),this.enableShapeUniforms=kr(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const au=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class Mh{constructor(e,n,r,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=nt(n,r);const s=this.outputShape.length;this.enableShapeUniforms=kr(s);let a="";if(i)if(s===0||be(this.outputShape)===1)a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(a=`
          ${Lt(s)} coords = getOutputCoords();
        `,s===1)this.enableShapeUniforms?a+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:a+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=Lr("coords",s);this.enableShapeUniforms?a+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= outShape[${s} - 2];
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= outShape[${s} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:a+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= ${this.outputShape[s-2]};
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= ${this.outputShape[s-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${a}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pi(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const qje={kernelName:ug,backendName:"webgl",kernelFunc:pi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rl(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,s=n.makeTensorInfo(r.shape,"complex64"),a=n.texData.get(s.dataId),o=pi({inputs:{x:r},backend:n}),l=pi({inputs:{x:i},backend:n});return a.complexTensorInfos={real:o,imag:l},s}const Hje={kernelName:e_,backendName:"webgl",kernelFunc:Rl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _J="return (a < 0.) ? b * a : a;",RJ=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function Kje(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:s}=r,a=n.makeTensorInfo([],"float32",kl(s,"float32")),o=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mh(RJ,i.shape,a.shape):new Hc(_J,i.shape,a.shape),l=n.runWebGLProgram(o,[i,a],"float32");return n.disposeIntermediateTensorInfo(a),l}const Xje={kernelName:r1,backendName:"webgl",kernelFunc:Kje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DJ="return (a < 0.) ? b * a : a;",MJ=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function Yje(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e,s=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mh(MJ,r.shape,i.shape):new Hc(DJ,r.shape,i.shape);return n.runWebGLProgram(s,[r,i],"float32")}const Zje={kernelName:S1,backendName:"webgl",kernelFunc:Yje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ph="if (isnan(x)) return x;";function xt({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:i,backend:s})=>{const{x:a}=i,o=s,l=r||a.dtype;if(o.shouldExecuteOnCPU([a])&&n!=null){const h=o.texData.get(a.dataId),p=n(h.values,l);return o.makeTensorInfo(a.shape,l,p)}const c=fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let f;return c?f=new nl(a.shape,e):f=new Ys(a.shape,t),o.runWebGLProgram(f,[a],l)}}function fr({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:s}){return({inputs:a,backend:o})=>{const{a:l,b:c}=a,f=o;if(r&&l.dtype==="complex64"){const y=f.texData.get(l.dataId),b=f.texData.get(c.dataId),[v,w]=[[y.complexTensorInfos.real,b.complexTensorInfos.real],[y.complexTensorInfos.imag,b.complexTensorInfos.imag]].map(T=>{const[A,k]=T,E={dataId:A.dataId,dtype:A.dtype,shape:l.shape},I={dataId:k.dataId,dtype:k.dtype,shape:c.shape},N=new Hc(t,l.shape,c.shape);return f.runWebGLProgram(N,[E,I],hi(A.dtype,k.dtype))}),S=Rl({inputs:{real:v,imag:w},backend:f});return f.disposeIntermediateTensorInfo(v),f.disposeIntermediateTensorInfo(w),S}const h=s||hi(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||f.shouldExecuteOnCPU([l,c]))&&i!=null){const y=f.texData.get(l.dataId).values,b=f.texData.get(c.dataId).values,v=l.dtype==="string"?fo(y):y,w=l.dtype==="string"?fo(b):b,[S,T]=i(l.shape,c.shape,v,w,h),A=f.makeTensorInfo(T,h),k=f.texData.get(A.dataId);return k.values=S,A}const p=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let g;return p?g=new Mh(e,l.shape,c.shape,n):g=new Hc(t,l.shape,c.shape),f.runWebGLProgram(g,[l,c],h)}}function Em(t,e=!1){if(t==="linear")return e?_je:Eje;if(t==="relu")return e?Dje:Ije;if(t==="elu")return e?Rje:$je;if(t==="relu6")return e?Mje:Nje;if(t==="prelu")return e?MJ:DJ;if(t==="leakyrelu")return e?RJ:_J;if(t==="sigmoid")return e?Pje:Oje;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PJ{constructor(e,n,r,i=!1,s=!1,a=!1,o=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=kr(this.outputShape.length);const f=i?e[1]:e[2],h=Math.ceil(f/2),p=i?"i * 2, rc.y":"rc.y, i * 2",g=s?"rc.z, i * 2":"i * 2, rc.z",y=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],b=s?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let v="",w="";o&&(l?v=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:c?v=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:v=`vec4 activation(vec4 x) {
          ${o}
        }`,w="result = activation(result);");const S=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let T="rc.x",A="rc.x";e[0]<n[0]?T=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(A=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${v}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${h}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${T};
        int batchB = ${A};
        for (int i = 0; i < ${h}; i++) {
          vec4 a = getMatrixA(batchA, ${p});
          vec4 b = getMatrixB(batchB, ${g});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${y[0]} * ${b[0]});
          result += (${y[1]} * ${b[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${S}

        ${w}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h5={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class d5{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=nt(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p5="return a * b;";function bD(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,s=hi(r.dtype,i.dtype);if(r.dtype==="complex64"){const o=n.texData.get(r.dataId),l=n.texData.get(i.dataId),c=new d5(h5.REAL,r.shape,i.shape),f=new d5(h5.IMAG,r.shape,i.shape),h=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:r.shape},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:i.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:i.shape}],p=n.runWebGLProgram(c,h,"float32"),g=n.runWebGLProgram(f,h,"float32"),y=Rl({inputs:{real:p,imag:g},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),y}if(n.shouldExecuteOnCPU([r,i])){const o=n.texData.get(r.dataId),l=n.texData.get(i.dataId),[c,f]=Y4e(r.shape,i.shape,o.values,l.values,s),h=n.makeTensorInfo(f,s),p=n.texData.get(h.dataId);return p.values=c,h}let a;return fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?a=new Mh(p5,r.shape,i.shape):a=new Hc(p5,r.shape,i.shape),n.runWebGLProgram(a,[r,i],s)}const Qje={kernelName:bg,backendName:"webgl",kernelFunc:bD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jje(t,e,n){const r=[ih(t.shape),...sh(t.shape)],i={dtype:t.dtype,shape:r,dataId:t.dataId},s=[ih(e),...sh(e)],a=new OJ(s,r),o=!0,l=[r],c=n.runWebGLProgram(a,[i],t.dtype,l,o);return{dataId:c.dataId,shape:e,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:s}=r,a=n,o=be(i.shape),l=A9(s,o),c=be(l);G(o===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${i.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`);const f=a.texData.get(i.dataId);return f.isPacked&&!Hb(i.shape,l)&&!(f.texture!==null&&Hb(f.shape,l))?Jje(i,l,a):(a.incRef(i.dataId),{dataId:i.dataId,shape:l,dtype:i.dtype})}const eVe={kernelName:T1,backendName:"webgl",kernelFunc:Oe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m5{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:a}=e;this.outputShape=[i,a];const o=Math.floor(r/4)*4,l=r%4;let c="sumValue += dot(values, ones);";if(n!=null){const h=1/n;c=`sumValue += dot(values * ${Xf(h)?h.toPrecision(2):h}, ones);`}let f="";s%r>0&&(f=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${o}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${o};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tVe{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:a}=e;this.outputShape=[i,a];let o="0.0",l="";n==="prod"?o="1.0":n==="min"?(o="1.0 / 1e-20",l="min"):n==="max"&&(o="-1.0 / 1e-20",l="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");const f=Math.floor(r/4)*4,h=r%4;let p=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,g="vec4";n==="all"?(o="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,g="bvec4"):n==="any"&&(o="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,g="bvec4");let y="";s%r>0&&(y=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${o};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${y}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${o});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${f}; i += 4) {
          int inIdx = inOffset + i;
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${p}
        }

        int inIdx = inOffset + ${f};
        if (${h===1}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${h===2}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${h===3}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${p}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nVe(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=H1(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function ou(t,e,n,r){const i=nVe(t.shape);let s=t;for(let a=0;a<i.length;a++){const{inSize:o,windowSize:l,outSize:c}=i[a];let f,h;n==="mean"?f=a===0?new m5({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:c},o):new m5({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:c}):f=new tVe({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:c},n),h=s,s=r.runWebGLProgram(f,[s],e),h.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(h)}return s}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rVe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let a=0;a<r.length;a++)r[a]=e[n[a]];this.outputShape=r,this.rank=r.length;const i=Lt(this.rank),s=iVe(n);this.userCode=`
    void main() {
      ${i} resRC = getOutputCoords();
      setOutput(getA(${s}));
    }
    `}}function iVe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let i=0;i<t.length;i++)r[t[i]]=n[i];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sVe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let f=0;f<r.length;f++)r[f]=e[n[f]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const i=Lt(this.rank),s=NJ("rc",this.rank),a=new Array(this.rank);for(let f=0;f<n.length;f++)a[n[f]]=s[f];const o=`vec2(${a.slice(-2).join()})`,l=`++${s[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${a.join()}), ${o})`;this.userCode=`
    void main() {
      ${i} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${s[this.rank-1]};
      if(++${s[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uw(t,e,n){const r=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new sVe(t.shape,e):new rVe(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aVe(t,e,n,r){const i=e,s=t.shape.length,a=ot(i,t.shape);let o=a;const l=on(o,s),c=l!=null;let f=t;c&&(f=uw(t,l,r),o=Sn(o.length,s)),ur("sum",o,s);const[h,p]=er(f.shape,o);let g=h;n&&(g=On(h,a));const y=be(p),v=be(t.shape)/y,w=Oe({inputs:{x:f},attrs:{shape:[v,y]},backend:r}),S=D_(t.dtype),T=ou(w,S,"sum",r),A=Oe({inputs:{x:T},attrs:{shape:g},backend:r});return r.disposeIntermediateTensorInfo(w),r.disposeIntermediateTensorInfo(T),c&&r.disposeIntermediateTensorInfo(f),A}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fw(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r;return aVe(i,s,a,n)}const oVe={kernelName:N1,backendName:"webgl",kernelFunc:fw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zr(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{perm:s}=r,a=n,o=i.shape.length,l=new Array(o);for(let f=0;f<l.length;f++)l[f]=i.shape[s[f]];let c;if(a.shouldExecuteOnCPU([i])){const h=a.texData.get(i.dataId).values,p=yD(h,i.shape,i.dtype,s,l);c=a.makeTensorInfo(l,i.dtype);const g=a.texData.get(c.dataId);g.values=p}else c=uw(i,s,a);return c}const lVe={kernelName:wf,backendName:"webgl",kernelFunc:zr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LJ=1e3;function Kb({a:t,b:e,transposeA:n,transposeB:r,backend:i,bias:s=null,preluActivationWeights:a=null,leakyreluAlpha:o=0,activation:l=null}){const c=t.shape.length,f=e.shape.length,h=n?t.shape[c-2]:t.shape[c-1],p=r?e.shape[f-1]:e.shape[f-2],g=n?t.shape[c-1]:t.shape[c-2],y=r?e.shape[f-2]:e.shape[f-1],b=t.shape.slice(0,-2),v=e.shape.slice(0,-2),w=be(b),S=be(v),A=nt(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([g,y]);G(h===p,()=>`Error in matMul: inner shapes (${h}) and (${p}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const k=n?[w,h,g]:[w,g,h],E=r?[S,y,p]:[S,p,y],I=Oe({inputs:{x:t},backend:i,attrs:{shape:k}}),N=Oe({inputs:{x:e},backend:i,attrs:{shape:E}}),_=[I,N],D=Math.max(w,S),O=n?I.shape[1]:I.shape[2],P=s!=null,z=a!=null,W=l==="leakyrelu",U=l!=null?Em(l,!0):null,R=P||z||W||U!=null;let F;if((g===1||y===1)&&O>LJ&&R===!1){let K=I,L=N;n&&(K=zr({inputs:{x:I},backend:i,attrs:{perm:[0,2,1]}}),_.push(K)),r&&(L=zr({inputs:{x:N},backend:i,attrs:{perm:[0,2,1]}}),_.push(L));const H=y!==1,X=y===1;let Y=K;H&&(Y=Oe({inputs:{x:K},backend:i,attrs:{shape:[D,O,1]}}),_.push(Y));const ie=y===1?2:1;let pe=L;X&&(pe=Oe({inputs:{x:L},backend:i,attrs:{shape:[D,1,O]}}),_.push(pe));const ve=bD({inputs:{a:Y,b:pe},backend:i});F=fw({inputs:{x:ve},backend:i,attrs:{axis:ie,keepDims:!0}}),_.push(ve)}else{const K=hi(t.dtype,e.dtype),L=new PJ(k,E,[D,g,y],n,r,P,U,z,W),H=[I,N];if(s!=null&&H.push(s),z&&H.push(a),W){const X=i.makeTensorInfo([],"float32",kl(o,"float32"));H.push(X),_.push(X)}F=i.runWebGLProgram(L,H,K)}const B=Oe({inputs:{x:F},backend:i,attrs:{shape:A}});_.push(F);for(const K of _)i.disposeIntermediateTensorInfo(K);return B}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cVe(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s,bias:a,preluActivationWeights:o}=e,{transposeA:l,transposeB:c,activation:f,leakyreluAlpha:h}=r;return Kb({a:i,b:s,transposeA:l,transposeB:c,backend:n,bias:a,preluActivationWeights:o,leakyreluAlpha:h,activation:f})}const uVe={kernelName:Tb,backendName:"webgl",kernelFunc:cVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g5="return abs(x);";function fVe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const s=n.texData.get(r.dataId),a=$J(s.values);return n.makeTensorInfo(r.shape,r.dtype,a)}let i;return fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new nl(r.shape,g5):i=new Ys(r.shape,g5),n.runWebGLProgram(i,[r],r.dtype)}const hVe={kernelName:Lx,backendName:"webgl",kernelFunc:fVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dVe=hs+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,pVe=xt({opSnippet:dVe}),mVe={kernelName:Wm,backendName:"webgl",kernelFunc:pVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gVe=hs+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,yVe=xt({opSnippet:gVe}),vVe={kernelName:Gm,backendName:"webgl",kernelFunc:yVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y5="return a + b;",bVe=fr({opSnippet:y5,packedOpSnippet:y5,supportsComplex:!0,cpuKernelImpl:I4e}),xVe={kernelName:Ch,backendName:"webgl",kernelFunc:bVe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wVe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((s,a)=>`T${a}`);const r=[];this.variableNames.forEach(s=>{r.push(`float v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SVe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((s,a)=>`T${a}`);const r=[];this.variableNames.forEach(s=>{r.push(`vec4 v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g0(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return pi({inputs:{x:r[0]},backend:n});if(r.length>fe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),c=g0({inputs:r.slice(0,l),backend:n}),f=g0({inputs:r.slice(l),backend:n});return g0({inputs:[c,f],backend:n})}const i=r.map(l=>l.dtype).reduce((l,c)=>hi(l,c)),s=r.map(l=>l.shape),o=fe().getBool("WEBGL_PACK")?new SVe(r[0].shape,s):new wVe(r[0].shape,s);return n.runWebGLProgram(o,r,i)}const CVe={kernelName:HO,backendName:"webgl",kernelFunc:g0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r,o=i.shape.length,l=ot(s,i.shape);let c=l;const f=on(c,o);let h=i;f!=null&&(h=zr({inputs:{x:i},backend:n,attrs:{perm:f}}),c=Sn(c.length,o)),ur("all",c,o);const[p,g]=er(h.shape,c),y=be(g),b=Oe({inputs:{x:h},backend:n,attrs:{shape:[-1,y]}}),v=ou(b,b.dtype,"all",n);let w;if(a){const S=On(p,l);w=Oe({inputs:{x:v},backend:n,attrs:{shape:S}})}else w=Oe({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(v),f!=null&&n.disposeIntermediateTensorInfo(h),w}const kVe={kernelName:KO,backendName:"webgl",kernelFunc:TVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r,o=i.shape.length,l=ot(s,i.shape);let c=l;const f=on(c,o);let h=i;f!=null&&(h=zr({inputs:{x:i},backend:n,attrs:{perm:f}}),c=Sn(c.length,o)),ur("any",c,o);const[p,g]=er(h.shape,c),y=be(g),b=Oe({inputs:{x:h},backend:n,attrs:{shape:[-1,y]}}),v=ou(b,b.dtype,"any",n);let w;if(a){const S=On(p,l);w=Oe({inputs:{x:v},backend:n,attrs:{shape:S}})}else w=Oe({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(v),f!=null&&n.disposeIntermediateTensorInfo(h),w}const EVe={kernelName:XO,backendName:"webgl",kernelFunc:AVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Ve{constructor(e,n,r){this.variableNames=["A"];const{windowSize:i,batchSize:s,outSize:a}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[s,a];const o=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${i}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${o} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IVe{constructor(e,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,G(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const s=e[e.length-1],a=Math.ceil(s/n);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),i||this.variableNames.push("bestIndicesA");const o=this.outputShape,l=o.length,c=Lt(l),f=Lr("coords",l);let h,p;if(a===1){p=l+1;const N=Lt(p);h=`
        ${N} sourceLocR = ${N}(${f.join()}, 0);
        ++${f[l-1]};
        ${N} sourceLocG = ${N}(${f.join()}, 0);
        ++${f[l-2]};
        ${N} sourceLocA = ${N}(${f.join()}, 0);
        --${f[l-1]};
        ${N} sourceLocB = ${N}(${f.join()}, 0);
        --${f[l-2]};`}else p=l,h=`
        ${c} sourceLocR = coords;
        ++${f[l-1]};
        ${c} sourceLocG = coords;
        ++${f[l-2]};
        ${c} sourceLocA = coords;
        --${f[l-1]};
        ${c} sourceLocB = coords;
        --${f[l-2]};`;const g=["x","y","z","w","u","v"].slice(0,p),y="."+g[p-1],b=g.map(N=>"int "+N),v=Lr("sourceLocR",p-1).concat("inIdx.r"),w=Lr("sourceLocG",p-1).concat("inIdx.g"),S=Lr("sourceLocB",p-1).concat("inIdx.b"),T=Lr("sourceLocA",p-1).concat("inIdx.a"),A=r==="max"?"greaterThan":"lessThan",k=i?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${w.join()}),
                             getBestIndicesAChannel(${S.join()}),
                             getBestIndicesAChannel(${T.join()})));`,E=`vec4(
            getAChannel(${v.join()}),
            hasNextCol ? getAChannel(${w.join()}) : 0.,
            hasNextRow ? getAChannel(${S.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${T.join()}) : 0.)`,I=i?"":`
      float getBestIndicesAChannel(${b.join()}) {
        return getChannel(getBestIndicesA(${g.join()}),
                                          vec2(${g.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${b.join()}) {
        return getChannel(getA(${g.join()}),
                               vec2(${g.slice(-2).join()}));
      }
      ${I}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${f[l-1]} < ${o[l-1]-1};
        bool hasNextRow = ${f[l-2]} < ${o[l-2]-1};
        ${h}
        ivec4 srcIdx = ivec4(sourceLocR${y}, sourceLocG${y},
          sourceLocB${y}, sourceLocA${y}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${E};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${k}
          vec4 candidate = ${E};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${A}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FJ(t,e,n,r=null){let i=e.shape[0],s=e.shape[1];r!=null&&(i=r.shape[0],s=r.shape[1]);const a=H1(s),o={windowSize:a,inSize:s,batchSize:i,outSize:Math.ceil(s/a)},l=new $Ve(o,n,r==null),c=[e];r!=null&&c.push(r);const f=t.runWebGLProgram(l,c,"int32");if(f.shape[1]===1)return f;const h=FJ(t,e,n,f);return t.disposeIntermediateTensorInfo(f),h}function BJ(t,e,n,r=null){const i=r!=null?r.shape:e.shape,s=i[i.length-1],a=H1(s),o=new IVe(i,a,n,r==null),l=r==null?[e]:[e,r],c=t.runWebGLProgram(o,l,"int32");if(c.shape.length===e.shape.length){const f=BJ(t,e,n,c);return t.disposeIntermediateTensorInfo(c),f}return c}function zJ(t,e,n,r){const i=[n];if(ur("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,e.shape.length),!fe().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const s=[],a=t.texData.get(e.dataId),o=a!==null&&a.isPacked;let l=e;o&&(l=t.unpackTensor(e),s.push(l));const[c,f]=er(l.shape,i),h=be(f),p=Oe({inputs:{x:l},backend:t,attrs:{shape:[-1,h]}});s.push(p);const g=FJ(t,p,r);s.push(g);const y=Oe({inputs:{x:g},backend:t,attrs:{shape:c}});return s.forEach(b=>t.disposeIntermediateTensorInfo(b)),y}return BJ(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;let a=ot(s,i.shape);const o=on(a,i.shape.length);let l=i;const c=[];o!=null&&(l=zr({inputs:{x:i},backend:n,attrs:{perm:o}}),c.push(l),a=Sn(a.length,l.shape.length)),ur("argMax",[a[0]],l.shape.length);const f=zJ(n,l,a[0],"max");return c.forEach(h=>n.disposeIntermediateTensorInfo(h)),f}const OVe={kernelName:Fx,backendName:"webgl",kernelFunc:NVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ve(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;let a=ot(s,i.shape);const o=on(a,i.shape.length);let l=i;const c=[];o!=null&&(l=zr({inputs:{x:i},backend:n,attrs:{perm:o}}),c.push(l),a=Sn(a.length,l.shape.length)),ur("argMin",[a[0]],l.shape.length);const f=zJ(n,l,a[0],"min");return c.forEach(h=>n.disposeIntermediateTensorInfo(h)),f}const RVe={kernelName:Bx,backendName:"webgl",kernelFunc:_Ve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DVe=hs+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,MVe=xt({opSnippet:DVe}),PVe={kernelName:qm,backendName:"webgl",kernelFunc:MVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LVe=hs+"return log(x + sqrt(x * x + 1.0));",FVe=xt({opSnippet:LVe}),BVe={kernelName:Hm,backendName:"webgl",kernelFunc:FVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zVe=hs+`
  return atan(x);
`,jVe=xt({opSnippet:zVe}),VVe={kernelName:Km,backendName:"webgl",kernelFunc:jVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UVe=vD+`
  return atan(a, b);
`,WVe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+au+`
  return result;
`,GVe=fr({opSnippet:UVe,packedOpSnippet:WVe}),qVe={kernelName:Ym,backendName:"webgl",kernelFunc:GVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HVe=hs+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,KVe=xt({opSnippet:HVe}),XVe={kernelName:Xm,backendName:"webgl",kernelFunc:KVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $m{constructor(e,n,r,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,o=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,f=e.dilationWidth,h=e.effectiveFilterHeight,p=e.effectiveFilterWidth,g=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;const b=n==="avg",v=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,w=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let S="0.0";if(b||(S="-1.0 / 1e-20"),r){const N=">=";this.userCode=`
        const ivec2 strides = ivec2(${o}, ${l});
        const ivec2 pads = ivec2(${g}, ${y});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${h};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p};
                wC += ${f}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${N} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${i?s?v:w:`wR * ${p} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const T="max";let A=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(A="avgValue / max(count, 1.0)");const k=Math.floor(a/4)*4,E=a%4,I=`
      if (${b}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${T}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${o}, ${l});
      const ivec2 pads = ivec2(${g}, ${y});
      const float initializationValue = ${S};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${S});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${h};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${k}; wC += 4) {
            int xC = xCCorner + wC * ${f};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              getValue(batch, xR, xC + 2 * ${f}, d),
              getValue(batch, xR, xC + 3 * ${f}, d)
            );

            ${I}
          }

          int xC = xCCorner + ${k};
          if (${E===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${I}
          } else if (${E===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              initializationValue,
              initializationValue
            );

            ${I}
          } else if (${E===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              getValue(batch, xR, xC + 2 * ${f}, d),
              initializationValue
            );

            ${I}
          }
        }
        setOutput(${A});
      }
    `}}class xD{constructor(e,n,r,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,o=e.strideDepth,l=e.strideHeight,c=e.strideWidth,f=e.dilationDepth,h=e.dilationHeight,p=e.dilationWidth,g=e.effectiveFilterDepth,y=e.effectiveFilterHeight,b=e.effectiveFilterWidth,v=e.padInfo.front,w=e.padInfo.top,S=e.padInfo.left;this.outputShape=e.outShape;const T=n==="avg";let A="0.0";if(T||(A="-1.0 / 1e-20"),r){const D=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${o}, ${l}, ${c});
        const ivec3 pads = ivec3(${v}, ${w}, ${S});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${g};
              wD += ${f}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${y};
                wR += ${h}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${b};
                  wC += ${p}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${D} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${i?s?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${y} * ${b} +
                      wR * ${b} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const k="max";let E=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(E="avgValue / max(count, 1.0)");const I=Math.floor(a/4)*4,N=a%4,_=`
      if (${T}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${k}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${o}, ${l}, ${c});
      const ivec3 pads = ivec3(${v}, ${w}, ${S});
      const float initializationValue = ${A};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${A});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${g};
            wD += ${f}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${y};
            wR += ${h}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${I}; wC += 4) {
              int xC = xCCorner + wC * ${p};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                getValue(batch, xD, xR, xC + 3 * ${p}, ch)
              );

              ${_}
            }

            int xC = xCCorner + ${I};
            if (${N===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${_}
            } else if (${N===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                initializationValue,
                initializationValue
              );

              ${_}
            } else if (${N===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                initializationValue
              );

              ${_}
            }
          }
        }
        setOutput(${E});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;ry(i,"avgPool");const{filterSize:s,strides:a,pad:o,dimRoundingMode:l}=r,c=1;G(Cr(a,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const f=us(i.shape,s,a,c,o,l);if(f.filterWidth===1&&f.filterHeight===1&&$t(f.inShape,f.outShape))return pi({inputs:{x:i},backend:n});const h=new $m(f,"avg",!1);return n.runWebGLProgram(h,[i],"float32")}const ZVe={kernelName:zx,backendName:"webgl",kernelFunc:YVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:a,pad:o,dimRoundingMode:l,dataFormat:c}=r,f=[1,1,1],h=vo(i.shape,s,a,f,o,l,c),p=new xD(h,"avg",!1);return n.runWebGLProgram(p,[i],"float32")}const JVe={kernelName:jx,backendName:"webgl",kernelFunc:QVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eUe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,a=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,f=l-1-e.padInfo.top,h=c-1-e.padInfo.left,p=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${f}, ${h});
      const float avgMultiplier = float(${p});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${o}) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class tUe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,s=e.strideDepth,a=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,f=e.dilationWidth,h=e.effectiveFilterDepth,p=e.effectiveFilterHeight,g=e.effectiveFilterWidth,y=h-1-e.padInfo.front,b=p-1-e.padInfo.top,v=g-1-e.padInfo.left,w=1/(n*r*i);this.userCode=`
      const ivec3 pads = ivec3(${y}, ${b}, ${v});
      const float avgMultiplier = float(${w});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${s}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${p};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${g};
                wC += ${f}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nUe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,a=s,{filterSize:o,strides:l,pad:c,dimRoundingMode:f}=r,h=[1,1,1],p=vo(a.shape,o,l,h,c,f),g=new tUe(p);return n.runWebGLProgram(g,[i],a.dtype)}const rUe={kernelName:ZO,backendName:"webgl",kernelFunc:nUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iUe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,a=s;ry([i,s],"avgPoolGrad");const{filterSize:o,strides:l,pad:c}=r,f=us(a.shape,o,l,1,c),h=new eUe(f);return n.runWebGLProgram(h,[i],a.dtype)}const sUe={kernelName:YO,backendName:"webgl",kernelFunc:iUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aUe(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s}=e,{transposeA:a,transposeB:o}=r;return Kb({a:i,b:s,transposeA:a,transposeB:o,backend:n})}const oUe={kernelName:Vx,backendName:"webgl",kernelFunc:aUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lUe{constructor(e,n,r,i,s,a){this.outputShape=[],this.variableNames=["x","mean","variance"],nt(e,n),nt(e,r);let o="0.0";i!=null&&(nt(e,i),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="1.0";s!=null&&(nt(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${o};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${a}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cUe{constructor(e,n,r,i,s,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],nt(e,n),nt(e,r);let o="vec4(0.0)";i!=null&&(nt(e,i),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="vec4(1.0)";s!=null&&(nt(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${o};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${a}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uUe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:i,variance:s,offset:a,scale:o}=t;G(i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),G(a==null||i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),G(o==null||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const c=[r,i,s];let f=null;a!=null&&(f=a.shape,c.push(a));let h=null;o!=null&&(h=o.shape,c.push(o));const p=fe().getBool("WEBGL_PACK_NORMALIZATION")?new cUe(r.shape,i.shape,s.shape,f,h,l):new lUe(r.shape,i.shape,s.shape,f,h,l);return e.runWebGLProgram(p,c,c[0].dtype)},fUe={kernelName:e1,backendName:"webgl",kernelFunc:uUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hUe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=Lt(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=dUe(this.rank);let i;const s=e.map((a,o)=>`sourceLoc.${qI[o]} = start[${o}] + coords.${qI[o]};`);i=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${s.join(`
`)}
      `,this.userCode=`
      void main() {
        ${i}
        setOutput(getSource(${r}));
      }
    `}}const qI=["x","y","z","w","u","v"];function dUe(t){if(t===1)return"sourceLoc";if(t<=6)return qI.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pUe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Lt(this.rank),r=Lr("coords",this.rank),i=Lr("sourceLoc",this.rank),s=this.rank===1?"sourceLoc":`vec2(${i.slice(-2).join()})`,a=`getChannel(getSource(${i.join()}), ${s})`,o=`
      result.x = ${a};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${i[this.rank-1]};
        result.y = ${a};
        --${i[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${i[this.rank-2]};
        result.z = ${a};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${i[this.rank-1]};
          result.w = ${a};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((f,h)=>`start[${h}]`).join()});`:e.map((f,h)=>`${i[h]} = ${r[h]} + start[${h}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${o}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mUe(t,e,n,r){const i=r.texData.get(t.dataId),s=r.makeTensorInfo(n,t.dtype),a=r.texData.get(s.dataId);Object.assign(a,i),a.refCount=1,a.shape=n,a.dtype=t.dtype;let o=gR(e,je(t.shape));i.slice&&(o+=i.slice.flatOffset),a.slice={flatOffset:o,origDataId:i.slice&&i.slice.origDataId||t.dataId};const l=r.dataRefCount.get(a.slice.origDataId)||1;return r.dataRefCount.set(a.slice.origDataId,l+1),s}function Lh(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,size:a}=r,[o,l]=q1(i,s,a);if(dR(i,o,l),be(l)===0)return n.makeTensorInfo(l,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||i.dtype==="string"){const h=n.texData.get(i.dataId),p=oje(h.values,o,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,p)}const{isPacked:c}=n.texData.get(i.dataId),f=mR(i.shape,o,l);if(c||!f){const h=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new pUe(l):new hUe(l),p=[o];return n.runWebGLProgram(h,[i],i.dtype,p)}return n.uploadToGPU(i.dataId),mUe(i,o,l,n)}const gUe={kernelName:I1,backendName:"webgl",kernelFunc:Lh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yUe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,crops:a}=r;G(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const o=s.reduce((S,T)=>S*T),l=Wg(i.shape,s,o),c=Gg(l.length,s.length),f=qg(i.shape,s,o),h=wR(a,s.length),p=SR(f,a,s.length),g=[],y=Oe({inputs:{x:i},backend:n,attrs:{shape:l}}),b=zr({inputs:{x:y},backend:n,attrs:{perm:c}}),v=Oe({inputs:{x:b},backend:n,attrs:{shape:f}}),w=Lh({inputs:{x:v},backend:n,attrs:{begin:h,size:p}});return g.push(y),g.push(b),g.push(v),g.forEach(S=>n.disposeIntermediateTensorInfo(S)),w},vUe={kernelName:Ux,backendName:"webgl",kernelFunc:yUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:a}=r,o=n.readSync(i.dataId),l=n.readSync(s.dataId),c=EJ(o,l,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,c)}const xUe={kernelName:QO,backendName:"webgl",kernelFunc:bUe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wUe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,SUe=`
  return float(int(a.r) & int(b.r));
`;function CUe(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,s=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS"),a=fe().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,i])||a===1){const l=n.texData.get(r.dataId).values,c=n.texData.get(i.dataId).values,[f,h]=O4e(r.shape,i.shape,l,c,r.dtype),p=n.makeTensorInfo(h,r.dtype),g=n.texData.get(p.dataId);return g.values=f,p}let o;return s?o=new Mh(wUe,r.shape,i.shape,!1):o=new Hc(SUe,r.shape,i.shape),n.runWebGLProgram(o,[r,i],r.dtype)}const TUe={kernelName:JO,backendName:"webgl",kernelFunc:CUe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kUe(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,s=n.readSync(r.dataId),a=n.readSync(i.dataId),o=nt(Array.from(s),Array.from(a));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const AUe={kernelName:_9,backendName:"webgl",kernelFunc:kUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EUe="return float(a != b);",jJ=fr({opSnippet:EUe,cpuKernelImpl:Q4e,dtype:"bool"}),$Ue={kernelName:y1,backendName:"webgl",kernelFunc:jJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sy(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return pi({inputs:{x:i.complexTensorInfos.real},backend:n})}const IUe={kernelName:T_,backendName:"webgl",kernelFunc:sy};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NUe="return float(int(x));";function OUe(t,e){const n=new Ys(t.shape,NUe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HI(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:s}=r;if(s==="complex64"){if(i.dtype==="complex64")return pi({inputs:{x:i},backend:n});const a=Yn(i.shape),o=HI({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),l=Rl({inputs:{real:o,imag:a},backend:n});return a.dispose(),n.disposeIntermediateTensorInfo(o),l}if(i.dtype==="complex64"){const a=sy({inputs:{input:i},backend:n}),o=HI({inputs:{x:a},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(a),o}if(!E9(i.dtype,s)){const a=pi({inputs:{x:i},backend:n});return{dataId:a.dataId,shape:a.shape,dtype:s}}if(n.shouldExecuteOnCPU([i])){const a=n.texData.get(i.dataId).values,[o,l,c]=_4e(a,i.shape,i.dtype,s);return n.makeTensorInfo(o,l,c)}if(s==="int32")return OUe(i,n);if(s==="bool"){const a=n.makeTensorInfo([],"bool",xr("bool",1)),l=jJ({inputs:{a:i,b:a},backend:n});return n.disposeIntermediateTensorInfo(a),l}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${s}`)}const _Ue={kernelName:Zm,backendName:"webgl",kernelFunc:HI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v5="return ceil(x);",RUe=xt({opSnippet:v5,packedOpSnippet:v5,cpuKernelImpl:R4e}),DUe={kernelName:Qm,backendName:"webgl",kernelFunc:RUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MUe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PUe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{clipValueMin:s,clipValueMax:a}=r;let o;fe().getBool("WEBGL_PACK_CLIP")?o=new PUe(i.shape):o=new MUe(i.shape);const l=[[s],[a]];return n.runWebGLProgram(o,[i],i.dtype,l)}const FUe={kernelName:Jm,backendName:"webgl",kernelFunc:LUe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BUe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b5(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function zUe(t){const{inputs:e,backend:n}=t,{x:r}=e,i=n.texData.get(r.dataId),s=new BUe(r.shape),a=[b5(r,i.complexTensorInfos.real),b5(r,i.complexTensorInfos.imag)];return n.runWebGLProgram(s,a,a[0].dtype)}const jUe={kernelName:Wx,backendName:"webgl",kernelFunc:zUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VUe{constructor(e){this.outputShape=[],this.outputShape=sa(e,1),this.variableNames=e.map((a,o)=>`T${o}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let a=1;a<n.length;a++)n[a]=n[a-1]+e[a][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let a=1;a<n.length;a++){const o=n[a-1];r.push(`else if (yC < ${n[a]}) setOutput(getT${a}(yR, yC-${o}));`)}const i=n.length,s=n[n.length-1];r.push(`else setOutput(getT${i}(yR, yC-${s}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UUe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=sa(e,n);const r=this.outputShape,i=r.length,s=Lt(i),a=Lr("coords",i),o=["x","y","z","w","u","v"].slice(0,i);this.variableNames=e.map((b,v)=>`T${v}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let b=1;b<l.length;b++)l[b]=l[b-1]+e[b][n];const c=o[n],f=o.slice(-2),h=o.join();let p=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${h}), vec2(${f.join()}));
        }`;for(let b=1;b<l.length;b++){const v=l[b-1];p+=`
        if (${c} < ${l[b]}  && ${c} >= ${l[b-1]}) {
          return getChannel(
            getT${b}(${Jv(o,c,v)}),
            vec2(${Jv(f,c,v)}));
        }`}const g=l.length,y=l[l.length-1];p+=`
        return getChannel(
          getT${g}(${Jv(o,c,y)}),
          vec2(${Jv(f,c,y)}));`,this.userCode=`
      float getValue(${o.map(b=>"int "+b)}) {
        ${p}
      }

      void main() {
        ${s} coords = getOutputCoords();
        vec4 result = vec4(getValue(${a}), 0., 0., 0.);

        ${a[i-1]} = ${a[i-1]} + 1;
        if (${a[i-1]} < ${r[i-1]}) {
          result.g = getValue(${a});
        }

        ${a[i-2]} = ${a[i-2]} + 1;
        if (${a[i-2]} < ${r[i-2]}) {
          result.a = getValue(${a});
        }

        ${a[i-1]} = ${a[i-1]} - 1;
        if (${a[i-2]} < ${r[i-2]} &&
            ${a[i-1]} < ${r[i-1]}) {
          result.b = getValue(${a});
        }
        setOutput(result);
      }
    `}}function Jv(t,e,n){const r=t.indexOf(e);return t.map((s,a)=>a===r?`${s} - ${n}`:s).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hw(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return pi({inputs:{x:i.complexTensorInfos.imag},backend:n})}const WUe={kernelName:g_,backendName:"webgl",kernelFunc:hw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dp(t,e,n){const r=t[0].dtype;if(r==="complex64"){const g=t.map(S=>sy({inputs:{input:S},backend:n})),y=t.map(S=>hw({inputs:{input:S},backend:n})),b=dp(g,e,n),v=dp(y,e,n),w=Rl({inputs:{real:b,imag:v},backend:n});return g.forEach(S=>n.disposeIntermediateTensorInfo(S)),y.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(v),w}let i=n.shouldExecuteOnCPU(t);if(r==="string"&&(i=!0),i){const g=t.map(A=>{const E=[-1,be(A.shape.slice(e))];return Oe({inputs:{x:A},backend:n,attrs:{shape:E}})}),y=g.map(A=>({vals:n.readSync(A.dataId),shape:A.shape})),b=sa(g.map(A=>A.shape),1),v=g[0].shape[0]===1,w=D4e(y,b,r,v),S=sa(t.map(A=>A.shape),e),T=n.makeTensorInfo(S,r,w);return g.forEach(A=>n.disposeIntermediateTensorInfo(A)),T}const s=t.filter(g=>be(g.shape)>0),a=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&s[0].shape.length>1;if(s.length===1){const g=a?new Ys(t[0].shape,Ko):new nl(t[0].shape,Ko);return n.runWebGLProgram(g,t,r)}const o=fe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(s.length>o){const g=[];for(let b=0;b<s.length;b+=o){const v=s.slice(b,b+o);g.push(dp(v,e,n))}const y=dp(g,e,n);for(const b of g)n.disposeIntermediateTensorInfo(b);return y}if(a){const g=new UUe(s.map(y=>y.shape),e);return n.runWebGLProgram(g,s,r)}const{tensors2D:l,outShape:c}=GUe(s,e,n),f=new VUe(l.map(g=>g.shape)),h=n.runWebGLProgram(f,l,r);l.forEach(g=>n.disposeIntermediateTensorInfo(g));const p=Oe({inputs:{x:h},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(h),p}function GUe(t,e,n){const r=sa(t.map(s=>s.shape),e);return{tensors2D:t.map(s=>Oe({inputs:{x:s},attrs:{shape:[-1,be(s.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VJ(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,s=ot(i,e[0].shape)[0],a=e.map(c=>c.shape);vR(a,s);const o=sa(e.map(c=>c.shape),s);if(be(o)===0)return n.makeTensorInfo(o,e[0].dtype,[]);const l=e.filter(c=>be(c.shape)>0);return l.length===1?pi({inputs:{x:l[0]},backend:n}):dp(l,s,n)}const qUe={kernelName:Gx,backendName:"webgl",kernelFunc:VJ};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UJ{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const a=e.padInfo.top,o=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,f=e.dilationHeight,h=e.dilationWidth,p=e.filterHeight,g=e.filterWidth,y=Math.floor(e.inChannels/4)*4,b=e.inChannels%4,v=e.dataFormat==="channelsLast",w=v?1:2,S=v?2:3,T=v?3:1;let A="",k="";r&&(i?A=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?A=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:A=`
          float activation(float x) {
            ${r}
          }
        `,k="result = activation(result);");const E=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${A}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${a}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${T}];

        ivec2 xRCCorner =
            ivec2(coords[${w}], coords[${S}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${p}; wR++) {
          int xR = xRCorner + wR * ${f};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${g}; wC++) {
            int xC = xCCorner + wC * ${h};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${y}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${v}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${b===1}) {

              if (${v}) {
                dotProd +=
                    getX(batch, xR, xC, ${y}) *
                    getW(wR, wC, ${y}, d2);
              } else {
                dotProd +=
                    getX(batch, ${y}, xR, xC) *
                    getW(wR, wC, ${y}, d2);
              }

            } else if (${b===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${y}, d2),
                getW(wR, wC, ${y} + 1, d2)
              );

              if (${v}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${y}),
                  getX(batch, xR, xC, ${y} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${y}, xR, xC),
                  getX(batch, ${y} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${b===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${y}, d2),
                getW(wR, wC, ${y} + 1, d2),
                getW(wR, wC, ${y} + 2, d2)
              );

              if (${v}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${y}),
                  getX(batch, xR, xC, ${y} + 1),
                  getX(batch, xR, xC, ${y} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${y}, xR, xC),
                  getX(batch, ${y} + 1, xR, xC),
                  getX(batch, ${y} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${E}
        ${k}
        setOutput(result);
      }
    `}}class HUe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,i=e.padInfo.left,s=e.strideDepth,a=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,f=e.dilationWidth,h=e.filterDepth,p=e.filterHeight,g=e.filterWidth,y=Math.floor(e.inChannels/4)*4,b=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${s}, ${a}, ${o});
      const ivec3 pads = ivec3(${n}, ${r}, ${i});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${h}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${g}; wC++) {
              int xC = xCCorner + wC * ${f};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${y}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${b===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${y}) *
                  getW(wF, wR, wC, ${y}, d2);
              } else if (${b===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${y}),
                  getX(batch, xF, xR, xC, ${y} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${y}, d2),
                  getW(wF, wR, wC, ${y} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${b===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${y}),
                  getX(batch, xF, xR, xC, ${y} + 1),
                  getX(batch, xF, xR, xC, ${y} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${y}, d2),
                  getW(wF, wR, wC, ${y} + 1, d2),
                  getW(wF, wR, wC, ${y} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WJ{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=kr(this.outputShape.length);const a=e.padInfo.left,o=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,f=e.filterWidth,h=f;let p=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<f;v++)p+=`
           vec4 xTexelC${v*2};
           int xTexelC${v*2}Ready;
           vec4 xTexelC${v*2+1};
           int xTexelC${v*2+1}Ready;
           vec4 xC${v};`;p+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let v=0;v<f;v++)p+=`
           xTexelC${v*2} = vec4(0.0);
           xTexelC${v*2}Ready = 0;
           xTexelC${v*2+1} = vec4(0.0);
           xTexelC${v*2+1}Ready = 0;
           xC${v} = vec4(0.0);`;p+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let v=0;v<(h+1)/2;v++){const w=v*2;if(p+=`
           xC = xCCorner + ${w*l};
           `,o===1){if(w<f&&(a%2===1?(p+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }
               `,l===1&&w>0?p+=`
                 xC${w} = vec4(xTexelC${w-2}.zw, xTexelC${w}.xy);
                 `:p+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${w} = vec4(previous.zw, xTexelC${w}.xy);
                   } else {
                     xC${w} = vec4(0.0, 0.0, xTexelC${w}.xy);
                   }
                   `):p+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }

                 xC${w} = xTexelC${w};
                 `,w+1<f)){const S=a%2===0?VO(l):l;l%2===0&&a%2===1||l%2!==0&&a%2!==1?(p+=`
                   xCOffset = xC + imod(pads[1], 2) + ${S};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                     xTexelC${w+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${w+1}.zw = vec2(0.0);
                     }
                     xTexelC${w+1}Ready = 1;
                   }
                   `,l>1?p+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${w+1} = vec4(previous.zw, xTexelC${w+1}.xy);
                     } else {
                      xC${w+1} = vec4(0.0, 0.0, xTexelC${w+1}.xy);
                     }
                     `:p+=`
                     xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.xy);
                     `):S===1?p+=`
                     xC${w+1} = xTexelC${w};
                     `:p+=`
                     xCOffset = xC + ${S};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                       xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${w+1}.zw = vec2(0.0);
                       }
                       xTexelC${w+1}Ready = 1;
                     }

                     xC${w+1} = xTexelC${w+1};
                     `}}else w<f&&(a%2===1?(p+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${w+1}Ready == 0) {
                   xTexelC${w+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${w+1}.zw = vec2(0.0);
                   }
                   xTexelC${w+1}Ready = 1;
                 }

                 xC${w} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
               `,w+1<f&&(p+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${w+1} = vec4(xTexelC${w+1}.xy, final.xy);
                 `)):(p+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                   xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${w+1}.zw = vec2(0.);
                   }
                   xTexelC${w+1}Ready = 1;
                 }

                 xC${w} = vec4(
                   xTexelC${w}.xy, xTexelC${w+1}.xy);
               `,w+1<f&&(p+=`
                   xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
                 `)));w<f&&(p+=`
             wTexel = getW(r, ${w}, d1, d2);
             dotProd += xC${w}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${w}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,w+1<f&&(p+=`
               wTexel = getW(r, ${w+1}, d1, d2);
               dotProd += xC${w+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${w+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}p+=`
     }
   `,p+=`
     }
   `,p+=`
     }
   `;let g="",y="";r&&(i?g=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:s?g=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:g=`vec4 activation(vec4 x) {
           ${r}
         }`,y="result = activation(result);");const b=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${g}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${p}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${b}
         ${y}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KUe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=kr(this.outputShape.length);const{dataFormat:r}=n,i=jr(),s=r==="channelsLast",a=s?1:2,o=s?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let c="";for(let f=0;f<=1;f++)for(let h=0;h<=1;h++)c+=`
          blockIndex = rc.z + ${h};
          pos = rc.y + ${f};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${a}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${o}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${s}) {
                  innerDims = vec2(d1, ch);
                  result[${f*2+h}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${f*2+h}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${i.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xb(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function GJ({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:o=null}){const l=t.shape,c=r.texData.get(t.dataId),f=n.inChannels,h=l[0]*l[1]*l[2],p=n.outChannels,g=n.dataFormat==="channelsLast",y=!1,b=!1;let v;const w=[];if(s!=null){const A=Xb(s.shape,g);A!=null&&(s=Oe({inputs:{x:s},backend:r,attrs:{shape:A}}),w.push(s))}if(i!=null){const A=Xb(i.shape,g);A!=null&&(i=Oe({inputs:{x:i},backend:r,attrs:{shape:A}}),w.push(i))}if(!((h===1||p===1)&&f>LJ)&&c.isPacked&&g&&c.texture!=null&&l[2]%2!==0&&$t(c.shape.slice(-3),l.slice(-3))){const A=l[0]*l[1]*(l[2]+1),k={dataId:t.dataId,shape:[1,A,n.inChannels],dtype:t.dtype},E=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,G(Hb(c.shape,k.shape),()=>`packed reshape ${c.shape} to ${k.shape} isn't free`);const I=Oe({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});w.push(I);const N=Kb({a:k,b:I,backend:r,transposeA:y,transposeB:b,bias:i,activation:o,preluActivationWeights:s,leakyreluAlpha:a}),_=r.texData.get(N.dataId);G(_.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=E,_.shape=n.outShape,v=pi({inputs:{x:N},backend:r}),v.shape=n.outShape,w.push(N)}else{const A=n.outHeight*n.outWidth,k=Oe({inputs:{x:t},backend:r,attrs:{shape:g?[n.batchSize,A,n.inChannels]:[n.batchSize,n.inChannels,A]}}),E=Oe({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),I=Kb({a:g?k:E,b:g?E:k,transposeA:!g,transposeB:b,backend:r,bias:i,activation:o,preluActivationWeights:s,leakyreluAlpha:a});v=Oe({inputs:{x:I},backend:r,attrs:{shape:n.outShape}}),w.push(k),w.push(E),w.push(I)}for(const A of w)r.disposeIntermediateTensorInfo(A);return v}function qJ({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:o=null}){const{filterWidth:l,filterHeight:c,inChannels:f,outWidth:h,outHeight:p,dataFormat:g}=n,y=g==="channelsLast",b=l*c*f,v=p*h,w=[n.batchSize,b,v],S=!0,T=!1,A=[];if(s!=null){const B=Xb(s.shape,y);B!=null&&(s=Oe({inputs:{x:s},backend:r,attrs:{shape:B}}),A.push(s))}if(i!=null){const B=Xb(i.shape,y);B!=null&&(i=Oe({inputs:{x:i},backend:r,attrs:{shape:B}}),A.push(i))}const k=Oe({inputs:{x:e},backend:r,attrs:{shape:[1,b,be(e.shape)/b]}});A.push(k);const E=new KUe(w,n),I=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],N=r.runWebGLProgram(E,[t],"float32",I),_=Oe({inputs:{x:N},backend:r,attrs:{shape:w}});A.push(N),A.push(_);const D=i!=null,O=s!=null,P=o==="leakyrelu",z=o?Em(o,!0):null,W=new PJ(y?_.shape:k.shape,y?k.shape:_.shape,y?[n.batchSize,v,n.outChannels]:[n.batchSize,n.outChannels,v],S,T,D,z,O,P),U=y?[_,k]:[k,_];if(i&&U.push(i),O&&U.push(s),P){const B=r.makeTensorInfo([],"float32",kl(a,"float32"));U.push(B),A.push(B)}const R=r.runWebGLProgram(W,U,"float32"),F=Oe({inputs:{x:R},backend:r,attrs:{shape:n.outShape}});A.push(R);for(const B of A)r.disposeIntermediateTensorInfo(B);return F}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:a,pad:o,dataFormat:l,dilations:c,dimRoundingMode:f}=r,h=bo(l),p=cr(i.shape,s.shape,a,c,o,f,!1,h);let g;if(p.filterHeight===1&&p.filterWidth===1&&p.dilationHeight===1&&p.dilationWidth===1&&p.strideHeight===1&&p.strideWidth===1&&(p.padInfo.type==="SAME"||p.padInfo.type==="VALID"))g=GJ({x:i,filter:s,convInfo:p,backend:n});else if(p.strideWidth<=2&&h==="channelsLast"&&fe().getBool("WEBGL_EXP_CONV")){const b=new WJ(p),v=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];g=n.runWebGLProgram(b,[i,s],"float32",v)}else if(fe().getBool("WEBGL_CONV_IM2COL"))g=qJ({x:i,filter:s,convInfo:p,backend:n});else{const b=new UJ(p);g=n.runWebGLProgram(b,[i,s],"float32")}const y=Oe({inputs:{x:g},backend:n,attrs:{shape:p.outShape}});return n.disposeIntermediateTensorInfo(g),y}const YUe={kernelName:qx,backendName:"webgl",kernelFunc:XUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZUe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,s=e.padInfo.left,a=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${a?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class QUe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,a=e.dataFormat==="channelsLast",o=n-1-e.padInfo.top,l=r-1-e.padInfo.left,c=a?1:2,f=a?2:3,h=a?3:1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${h}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${f}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${a}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class JUe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,s=e.padInfo.front,a=e.padInfo.top,o=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${s};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${a};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${i} - ${o};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class eWe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,s=e.strideDepth,a=e.strideHeight,o=e.strideWidth,l=n-1-e.padInfo.front,c=r-1-e.padInfo.top,f=i-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${f});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${s}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${i}; wC++) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${i} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:a,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:f}=r,h=bo(l),p=cr(i.shape,f,a,1,o,c,!1,h),g=new ZUe(p);return n.runWebGLProgram(g,[i,s],"float32")}const nWe={kernelName:t_,backendName:"webgl",kernelFunc:tWe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rWe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=kr(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,i=n-1-e.padInfo.top,s=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iWe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{inputShape:a,strides:o,pad:l,dataFormat:c,dimRoundingMode:f}=r,h=bo(c),p=cr(a,s.shape,o,1,l,f,!1,h);if(fe().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&h==="channelsLast"){const g=[[p.strideHeight,p.strideWidth]],y=new rWe(p);return n.runWebGLProgram(y,[i,s],"float32",g)}else{const g=new QUe(p);return n.runWebGLProgram(g,[i,s],"float32")}}const sWe={kernelName:Hx,backendName:"webgl",kernelFunc:iWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:a,pad:o,dilations:l}=r,c=Al(i.shape,s.shape,a,l,o),f=new HUe(c);return n.runWebGLProgram(f,[i,s],"float32")}const oWe={kernelName:Kx,backendName:"webgl",kernelFunc:aWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:a,pad:o,filterShape:l}=r,c=Al(i.shape,l,a,1,o),f=new JUe(c);return n.runWebGLProgram(f,[i,s],"float32")}const cWe={kernelName:n_,backendName:"webgl",kernelFunc:lWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uWe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{pad:a,strides:o,inputShape:l}=r,c=Al(l,s.shape,o,1,a),f=new eWe(c);return n.runWebGLProgram(f,[i,s],"float32")}const fWe={kernelName:r_,backendName:"webgl",kernelFunc:uWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hWe=Ph+`
  return cos(x);
`,dWe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${au}
  return result;
`,pWe=xt({opSnippet:hWe,packedOpSnippet:dWe}),mWe={kernelName:eg,backendName:"webgl",kernelFunc:pWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gWe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,yWe=xt({opSnippet:gWe}),vWe={kernelName:tg,backendName:"webgl",kernelFunc:yWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bWe{constructor(e,n,r,i,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[a,o,l,c]=e,[f]=n,[h,p]=r;this.outputShape=[f,h,p,c];const g=i==="bilinear"?1:0,[y,b]=[`${o-1}.0`,`${l-1}.0`],[v,w,S]=h>1?[`${(o-1)/(h-1)}`,"(y2-y1) * height_ratio",`y1*${y} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${y}`],[T,A,k]=p>1?[`${(l-1)/(p-1)}`,"(x2-x1) * width_ratio",`x1*${b} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${b}`];this.userCode=`
      const float height_ratio = float(${v});
      const float width_ratio = float(${T});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${a}) {
          return;
        }

        float height_scale = ${w};
        float width_scale = ${A};

        float in_y = ${S};
        if( in_y < 0.0 || in_y > ${y} ) {
          setOutput(float(${s}));
          return;
        }
        float in_x = ${k};
        if( in_x < 0.0 || in_x > ${b} ) {
          setOutput(float(${s}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${g} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xWe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:s,boxInd:a}=e,{cropSize:o,method:l,extrapolationValue:c}=r,f=new bWe(i.shape,s.shape,o,l,c);return n.runWebGLProgram(f,[i,s,a],"float32")},wWe={kernelName:s_,backendName:"webgl",kernelFunc:xWe};var Im;(function(t){t.Prod="*",t.Sum="+"})(Im||(Im={}));class x5{constructor(e,n,r,i){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const s=this.outputShape.length,a=this.op===Im.Prod?"1.0":"0.0",o=r?a:`getX(${w5(s,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",f="";r?(c=i?`end != ${l-1}`:"end != 0",f=i?"end + 1":"end - 1"):(c=i?`end + pow2 < ${l}`:"end >= pow2",f=i?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Lt(s)} coords = getOutputCoords();
        int end = ${S5(s,"coords",this.op)};
        float val = ${o};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${f};
          ${S5(s,"coords",this.op)} = idx;
          val ${this.op}= getX(${w5(s,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function w5(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function S5(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HJ(t,e,n,r,i,s){const a=e.shape.length,o=on([r],a);let l=e;o!=null&&(l=zr({inputs:{x:e},backend:n,attrs:{perm:o}}));const c=Sn(1,a)[0];if(c!==a-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const f=l.shape[c];let h=pi({inputs:{x:l},backend:n});for(let p=0;p<=Math.ceil(Math.log2(f))-1;p++){const g=new x5(t,l.shape,!1,s),y=[[p]],b=h;h=n.runWebGLProgram(g,[h],h.dtype,y),n.disposeIntermediateTensorInfo(b)}if(i){const p=new x5(t,l.shape,i,s),g=h;h=n.runWebGLProgram(p,[h],h.dtype),n.disposeIntermediateTensorInfo(g)}if(o!=null){const p=El(o),g=zr({inputs:{x:h},backend:n,attrs:{perm:p}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(l),g}return h}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:a,reverse:o}=r;return HJ(Im.Prod,i,n,s,a,o)}const CWe={kernelName:i_,backendName:"webgl",kernelFunc:SWe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:a,reverse:o}=r;return HJ(Im.Sum,i,n,s,a,o)}const kWe={kernelName:Xx,backendName:"webgl",kernelFunc:TWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:a,binaryOutput:o}=r;if(i.shape.length===1){const l=n.readSync(i.dataId),c=n.readSync(s.dataId),f=EJ(l,c,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,f)}else if(i.shape.length===2){const l=n.bufferSync(i),c=n.bufferSync(s),f=N4e(l,c,a,o);return n.makeTensorInfo(f.shape,s.dtype,f.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const EWe={kernelName:a_,backendName:"webgl",kernelFunc:AWe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $We{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:s,dataFormat:a}=r,o=i.shape[0],l=a==="NHWC"?i.shape[1]:i.shape[2],c=a==="NHWC"?i.shape[2]:i.shape[3],f=a==="NHWC"?i.shape[3]:i.shape[1],h=l*s,p=c*s,g=f/(s*s),y=a==="NHWC"?[o,h,p,g]:[o,g,h,p],b=new $We(y,s,a);return n.runWebGLProgram(b,[i],i.dtype)}const NWe={kernelName:o_,backendName:"webgl",kernelFunc:IWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KJ{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=kr(this.outputShape.length);const a=e.filterHeight,o=e.filterWidth,l=e.outChannels/e.inChannels;let c="",f="";r&&(i?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,f="result = activation(result);");const h=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${a}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${o}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${h}
        ${f}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XJ{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=kr(this.outputShape.length);const a=e.outChannels/e.inChannels,o=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,f=e.filterHeight,h=e.filterWidth,p=h;let g=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let w=0;w<h;w++)g+=`
          vec4 xTexelC${w*2};
          int xTexelC${w*2}Ready;
          vec4 xTexelC${w*2+1};
          int xTexelC${w*2+1}Ready;
          vec4 xC${w};`;g+=`
    for (int r = 0; r < ${f}; r++) {
      `;for(let w=0;w<h;w++)g+=`
          xTexelC${w*2} = vec4(0.0);
          xTexelC${w*2}Ready = 0;
          xTexelC${w*2+1} = vec4(0.0);
          xTexelC${w*2+1}Ready = 0;
          xC${w} = vec4(0.0);`;g+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let w=0;w<(p+1)/2;w++){const S=w*2;if(g+=`
          xC = xCCorner + ${S*c};
          `,l===1){if(S<h&&(o%2===1?(g+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S}Ready == 0) {
                  xTexelC${S} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${S}.zw = vec2(0.0);
                  }
                  xTexelC${S}Ready = 1;
                }
              `,c===1&&S>0?g+=`
                xC${S} = vec4(xTexelC${S-2}.zw, xTexelC${S}.xy);
                `:g+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${S} = vec4(previous.zw, xTexelC${S}.xy);
                  } else {
                    xC${S} = vec4(0.0, 0.0, xTexelC${S}.xy);
                  }
                  `):g+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${S}Ready == 0) {
                  xTexelC${S} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${S}.zw = vec2(0.0);
                  }
                  xTexelC${S}Ready = 1;
                }

                xC${S} = xTexelC${S};
                `,S+1<h)){const T=o%2===0?VO(c):c;c%2===0&&o%2===1||c%2!==0&&o%2!==1?(g+=`
                  xCOffset = xC + imod(pads[1], 2) + ${T};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                    xTexelC${S+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${S+1}.zw = vec2(0.0);
                    }
                    xTexelC${S+1}Ready = 1;
                  }
                  `,c>1?g+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${S+1} = vec4(previous.zw, xTexelC${S+1}.xy);
                    } else {
                     xC${S+1} = vec4(0.0, 0.0, xTexelC${S+1}.xy);
                    }
                    `:g+=`
                    xC${S+1} = vec4(xTexelC${S}.zw, xTexelC${S+1}.xy);
                    `):T===1?g+=`
                    xC${S+1} = xTexelC${S};
                    `:g+=`
                    xCOffset = xC + ${T};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                      xTexelC${S+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${S+1}.zw = vec2(0.0);
                      }
                      xTexelC${S+1}Ready = 1;
                    }

                    xC${S+1} = xTexelC${S+1};
                    `}}else S<h&&(o%2===1?(g+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S}Ready == 0) {
                  xTexelC${S} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${S}.zw = vec2(0.0);
                  }
                  xTexelC${S}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${S+1}Ready == 0) {
                  xTexelC${S+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${S+1}.zw = vec2(0.0);
                  }
                  xTexelC${S+1}Ready = 1;
                }

                xC${S} = vec4(xTexelC${S}.zw, xTexelC${S+1}.zw);
              `,S+1<h&&(g+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${S+1} = vec4(xTexelC${S+1}.xy, final.xy);
                `)):(g+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${S}Ready == 0) {
                  xTexelC${S} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${S}.zw = vec2(0.0);
                  }
                  xTexelC${S}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                  xTexelC${S+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${S+1}.zw = vec2(0.);
                  }
                  xTexelC${S+1}Ready = 1;
                }

                xC${S} = vec4(
                  xTexelC${S}.xy, xTexelC${S+1}.xy);
              `,S+1<h&&(g+=`
                  xC${S+1} = vec4(xTexelC${S}.zw, xTexelC${S+1}.zw);
                `)));S<h&&(g+=`
            wTexel = getW(r, ${S}, d1, q);
            dotProd += xC${S} * vec4(wTexel.xz, wTexel.xz);
          `,S+1<h&&(g+=`
              wTexel = getW(r, ${S+1}, d1, q);
              dotProd += xC${S+1} * vec4(wTexel.xz, wTexel.xz);
            `))}g+=`
    }
  `,g+=`
      }
    `;let y="",b="";r&&(i?y=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?y=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:y=`vec4 activation(vec4 x) {
          ${r}
        }`,b="result = activation(result);");const v=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${y}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${a};
        int q = d2 - d1 * ${a};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${g}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${v}
        ${b}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:a,pad:o,dilations:l,dimRoundingMode:c}=r;let f=l;f==null&&(f=[1,1]),G(Cr(a,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${f}'`);const h=cr(i.shape,s.shape,a,f,o,c,!0);let p;fe().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels===1?p=new XJ(h):p=new KJ(h);const g=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return n.runWebGLProgram(p,[i,s],"float32",g)}const _We={kernelName:Yx,backendName:"webgl",kernelFunc:OWe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RWe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,s=e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${a} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class DWe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,a=n-1-e.padInfo.top,o=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:c,filterShape:f}=r,h=cr(i.shape,f,a,o,l,c,!0),p=new RWe(h);return n.runWebGLProgram(p,[i,s],"float32")}const PWe={kernelName:l_,backendName:"webgl",kernelFunc:MWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LWe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:c,inputShape:f}=r,h=cr(f,s.shape,a,o,l,c,!0),p=new DWe(h);return n.runWebGLProgram(p,[i,s],"float32")}const FWe={kernelName:c_,backendName:"webgl",kernelFunc:LWe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BWe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zWe(t){const{inputs:e,backend:n}=t,{x:r}=e,i=[...r.shape,...r.shape],s=be(r.shape),a=Oe({inputs:{x:r},backend:n,attrs:{shape:[s]}}),o=new BWe(s),l=n.runWebGLProgram(o,[a],a.dtype),c=Oe({inputs:{x:l},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const jWe={kernelName:R9,backendName:"webgl",kernelFunc:zWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VWe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:i,strideHeight:s,strideWidth:a,filterHeight:o,filterWidth:l,dilationHeight:c,dilationWidth:f}=e,{top:h,left:p}=i;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${a});
      const ivec2 pads = ivec2(${h}, ${p});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${o}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${f};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:a,pad:o,dilations:l}=r,c=Bg(i.shape,s.shape,a,o,"NHWC",l);let f;const h=new VWe(c);f=n.runWebGLProgram(h,[i,s],"float32");const p=Oe({inputs:{x:f},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(f),p}const WWe={kernelName:Zx,backendName:"webgl",kernelFunc:UWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GWe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,s=e,{allDims:a,summedDims:o,idDims:l}=NR(i,s.length);_R(a.length,l,s);const{path:c,steps:f}=RR(o,l),h=f.length;let p=null,g=a.length;const y=[];for(let b=0;b<h;++b){for(const v of f[b]){const{permutationIndices:w,expandDims:S}=OR(g,l[v]);let T;DR(w)?T=s[v]:(T=zr({inputs:{x:s[v]},backend:n,attrs:{perm:w}}),y.push(T));const A=T.shape.slice();for(let k=0;k<S.length;++k)A.splice(S[k],0,1);$t(T.shape,A)||(T=Oe({inputs:{x:T},backend:n,attrs:{shape:A}}),y.push(T)),p===null?p=T:(p=bD({inputs:{a:T,b:p},backend:n}),y.push(p))}b<h-1&&(c[b]>=0&&(p=fw({inputs:{x:p},backend:n,attrs:{axis:c[b]-(a.length-g),keepDims:!1}}),y.push(p)),g--)}for(const b of y)b!==p&&n.disposeIntermediateTensorInfo(b);return p}const qWe={kernelName:u_,backendName:"webgl",kernelFunc:GWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HWe="return (x >= 0.0) ? x : (exp(x) - 1.0);",KWe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,XWe=xt({opSnippet:HWe,packedOpSnippet:KWe}),YWe={kernelName:rg,backendName:"webgl",kernelFunc:XWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZWe="return (b >= 0.0) ? a : a * (b + 1.0);",QWe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,JWe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:i}=e,s=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mh(QWe,r.shape,i.shape):new Hc(ZWe,r.shape,i.shape);return n.runWebGLProgram(s,[r,i],r.dtype)},eGe={kernelName:f_,backendName:"webgl",kernelFunc:JWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tGe=`
  return vec4(equal(a, b));
`,nGe="return float(a == b);",rGe=fr({opSnippet:nGe,packedOpSnippet:tGe,dtype:"bool",cpuKernelImpl:M4e}),iGe={kernelName:Qx,backendName:"webgl",kernelFunc:rGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sGe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${CR};
  float a1 = ${TR};
  float a2 = ${kR};
  float a3 = ${AR};
  float a4 = ${ER};
  float a5 = ${$R};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,aGe=xt({opSnippet:sGe}),oGe={kernelName:ig,backendName:"webgl",kernelFunc:aGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lGe=Ph+`
  return exp(x);
`,cGe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,YJ=xt({opSnippet:lGe,packedOpSnippet:cGe,cpuKernelImpl:P4e,dtype:"float32"}),uGe={kernelName:sg,backendName:"webgl",kernelFunc:YJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KI(t){const{inputs:e,attrs:n,backend:r}=t,{dim:i}=n,{input:s}=e,a=s.shape.length,o=s.shape.slice();let l=i;return i<0&&(G(-(a+1)<=i,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),l=a+i+1),o.splice(l,0,1),Oe({inputs:{x:s},backend:r,attrs:{shape:o}})}const fGe={kernelName:Jx,backendName:"webgl",kernelFunc:KI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C5="return exp(x) - 1.0;",hGe=xt({opSnippet:C5,packedOpSnippet:C5,cpuKernelImpl:L4e}),dGe={kernelName:ag,backendName:"webgl",kernelFunc:hGe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T5{constructor(e,n,r){this.variableNames=["real","imag"];const i=n[1];this.outputShape=n;const s=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,a=r?`${i}.0`:"1.0";let o;if(e==="real")o="return real * expR - imag * expI;";else if(e==="imag")o="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${s};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${o}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${i});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${i}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${a};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZJ(t,e,n){const r=n.texData.get(t.dataId),i=be(t.shape),s=t.shape[t.shape.length-1],a=i/s,o=Oe({inputs:{x:t},backend:n,attrs:{shape:[a,s]}}),l=o.shape,c=new T5("real",l,e),f=new T5("imag",l,e),h=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],p=n.runWebGLProgram(c,h,"float32"),g=n.runWebGLProgram(f,h,"float32"),y=Rl({inputs:{real:p,imag:g},backend:n});n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g);const b=Oe({inputs:{x:y},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(y),b}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pGe(t){const{inputs:e,backend:n}=t,{input:r}=e;return ZJ(r,!1,n)}const mGe={kernelName:h_,backendName:"webgl",kernelFunc:pGe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gGe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ay(t){const{backend:e,attrs:n}=t,{shape:r,value:i}=n;let{dtype:s}=n;if(s=s||wh(i),s==="string"){const a=bn(s,be(r));return a.fill(i),e.makeTensorInfo(r,s,a)}else{const a=new gGe(r,i),o=[[i]];return e.runWebGLProgram(a,[],s,o)}}const yGe={kernelName:d_,backendName:"webgl",kernelFunc:ay};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vGe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bGe={kernelName:p_,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,i=new vGe(n.shape);return r.runWebGLProgram(i,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k5="return floor(x);",xGe=xt({opSnippet:k5,packedOpSnippet:k5,cpuKernelImpl:F4e}),wGe={kernelName:og,backendName:"webgl",kernelFunc:xGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SGe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,CGe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,TGe=fr({opSnippet:SGe,packedOpSnippet:CGe,dtype:"int32"}),kGe={kernelName:lg,backendName:"webgl",kernelFunc:TGe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AGe{constructor(e){this.variableNames=["A"];const n=jr(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EGe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=jr(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${i}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ge={kernelName:UTe,backendName:"webgl",kernelFunc:IGe};let nf,mE=fe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function IGe(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:i}=e;const{numChannels:s}=r,a=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,o=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,[l,c]=a?[i.videoWidth,i.videoHeight]:[i.width,i.height],f=[c,l],h=[c,l,s];if(o||a){const b=fe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(nf==null||b!==mE)&&(mE=b,nf=document.createElement("canvas").getContext("2d",{willReadFrequently:mE})),nf.canvas.width=l,nf.canvas.height=c,nf.drawImage(i,0,0,l,c),i=nf.canvas}const p=n.makeTensorInfo(f,"int32");n.texData.get(p.dataId).usage=Oi.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),i);const g=fe().getBool("WEBGL_PACK")?new EGe(h):new AGe(h),y=n.runWebGLProgram(g,[p],"int32");return n.disposeData(p.dataId),y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:a,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:f,dilations:h,dimRoundingMode:p,activation:g,leakyreluAlpha:y}=r,b=bo(f),v=cr(i.shape,s.shape,l,h,c,p,!1,b);let w;const S=[],T=a!=null,A=o!=null,k=g==="leakyrelu",E=()=>{const N=[i,s],_=(D,O)=>{if(O==="NCHW"&&D.shape.length===1&&D.shape[0]!==1){const P=Oe({inputs:{x:D},backend:n,attrs:{shape:[D.shape[0],1,1]}});return S.push(P),P}return D};if(T&&N.push(_(a,f)),A&&N.push(_(o,f)),k){const D=n.makeTensorInfo([],"float32",kl(y,"float32"));N.push(D),S.push(D)}return N};if(v.filterHeight===1&&v.filterWidth===1&&v.dilationHeight===1&&v.dilationWidth===1&&v.strideHeight===1&&v.strideWidth===1&&(v.padInfo.type==="SAME"||v.padInfo.type==="VALID"))w=GJ({x:i,filter:s,convInfo:v,backend:n,bias:a,activation:g,preluActivationWeights:o,leakyreluAlpha:y});else if(v.strideWidth<=2&&b==="channelsLast"&&fe().getBool("WEBGL_EXP_CONV")){const N=g?Em(g,!0):null,_=new WJ(v,T,N,A,k),D=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],O=E();w=n.runWebGLProgram(_,O,"float32",D)}else if(fe().getBool("WEBGL_CONV_IM2COL"))w=qJ({x:i,filter:s,convInfo:v,backend:n,bias:a,activation:g,preluActivationWeights:o,leakyreluAlpha:y});else{const N=g?Em(g,!1):null,_=new UJ(v,T,N,A,k),D=E();w=n.runWebGLProgram(_,D,"float32")}const I=Oe({inputs:{x:w},backend:n,attrs:{shape:v.outShape}});return S.push(w),S.forEach(N=>n.disposeIntermediateTensorInfo(N)),I}const OGe={kernelName:kb,backendName:"webgl",kernelFunc:NGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ge(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:a,preluActivationWeights:o}=e,{strides:l,pad:c,dilations:f,dimRoundingMode:h,activation:p,leakyreluAlpha:g}=r,y=[];let b=f;b==null&&(b=[1,1]),G(Cr(l,b),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${b}'`);const v=cr(i.shape,s.shape,l,b,c,h,!0),w=fe().getBool("WEBGL_PACK_DEPTHWISECONV")&&v.strideWidth<=2&&v.outChannels/v.inChannels===1,S=p?Em(p,w):null,T=[i,s],A=a!=null,k=o!=null,E=p==="leakyrelu";if(A&&T.push(a),k&&T.push(o),E){const D=n.makeTensorInfo([],"float32",kl(g,"float32"));T.push(D),y.push(D)}let I;w?I=new XJ(v,A,S,k,E):I=new KJ(v,A,S,k,E);const N=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],_=n.runWebGLProgram(I,T,"float32",N);return y.forEach(D=>n.disposeIntermediateTensorInfo(D)),_}const RGe={kernelName:Q9,backendName:"webgl",kernelFunc:_Ge};class DGe{constructor(e,n,r,i){this.sliceDim=e,this.strides=n,this.paramsShape=i,this.variableNames=["x","indices"],this.outputShape=r;const s=Lt(r.length);let a=`
    int index;`;for(let o=0;o<this.sliceDim;o++)a+=`
          index = round(getIndices(coords[0], ${o}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[o]};
          flattenIndex += index * ${this.strides[o]};`;this.userCode=`
         void main() {
          ${s} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${a}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MGe(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,s=i.shape,a=s[s.length-1],o=be(r.shape),[l,c,f,h]=hR(r,i),p=Oe({inputs:{x:i},backend:n,attrs:{shape:[c,a]}}),g=Oe({inputs:{x:r},backend:n,attrs:{shape:[be(r.shape)/f,f]}});if(n.shouldExecuteOnCPU([r,i])||r.dtype==="string"){const w=n.readSync(i.dataId),S=n.bufferSync(r),T=B4e(w,S,r.dtype,c,a,f,h,r.shape,o);return n.makeTensorInfo(l,r.dtype,T.values)}const y=new DGe(a,h,[c,f],r.shape),b=n.runWebGLProgram(y,[g,p],g.dtype),v=Oe({inputs:{x:b},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),v}const PGe={kernelName:D9,backendName:"webgl",kernelFunc:MGe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LGe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=Lt(this.rank),i=FGe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${i}));
      }
    `}}function FGe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let i=0;i<t.length;i++)i===2?r.push("index"):r.push(`${n[i]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QJ(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:s}=e,{axis:a,batchDims:o}=r,l=ot(a,i.shape)[0];if(fe().get("DEBUG")){const S=n.readSync(s.dataId),T=i.shape[l];for(let A=0;A<S.length;++A){const k=S[A];G(k<=T-1&&k>=0,()=>`GatherV2: the index value ${k} is not in [0, ${T-1}]`)}}const c=PR(i,s,l,o),f=be(s.shape),h=[],p=Oe({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),g=Oe({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,f/c.batchSize]}});h.push(p),h.push(g);const y=[c.batchSize,c.outerSize,f/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([i,s])||i.dtype==="string"){const S=n.bufferSync(g),T=n.bufferSync(p),A=z4e(T,S,y);return h.forEach(k=>n.disposeIntermediateTensorInfo(k)),n.makeTensorInfo(c.outputShape,A.dtype,A.values)}const b=new LGe(p.shape,y),v=n.runWebGLProgram(b,[p,g],p.dtype);h.push(v);const w=Oe({inputs:{x:v},backend:n,attrs:{shape:c.outputShape}});return h.forEach(S=>n.disposeIntermediateTensorInfo(S)),w}const BGe={kernelName:t1,backendName:"webgl",kernelFunc:QJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zGe="return float(a > b);",jGe=`
  return vec4(greaterThan(a, b));
`,VGe=fr({opSnippet:zGe,packedOpSnippet:jGe,cpuKernelImpl:j4e,dtype:"bool"}),UGe={kernelName:n1,backendName:"webgl",kernelFunc:VGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WGe="return float(a >= b);",GGe=`
  return vec4(greaterThanEqual(a, b));
`,qGe=fr({opSnippet:WGe,packedOpSnippet:GGe,dtype:"bool",cpuKernelImpl:V4e}),HGe={kernelName:cg,backendName:"webgl",kernelFunc:qGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KGe(t){const{inputs:e,backend:n}=t,{input:r}=e;return ZJ(r,!0,n)}const XGe={kernelName:m_,backendName:"webgl",kernelFunc:KGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YGe="return float(!isnan(x) && !isinf(x));",ZGe=xt({opSnippet:YGe,dtype:"bool"}),QGe={kernelName:fg,backendName:"webgl",kernelFunc:ZGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JGe="return float(isinf(x));",e5e=xt({opSnippet:JGe,dtype:"bool"}),t5e={kernelName:hg,backendName:"webgl",kernelFunc:e5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n5e="return float(isnan(x));",r5e=xt({opSnippet:n5e,dtype:"bool"}),i5e={kernelName:dg,backendName:"webgl",kernelFunc:r5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s5e="return float(a < b);",a5e=`
  return vec4(lessThan(a, b));
`,o5e=fr({opSnippet:s5e,packedOpSnippet:a5e,cpuKernelImpl:U4e,dtype:"bool"}),l5e={kernelName:i1,backendName:"webgl",kernelFunc:o5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c5e="return float(a <= b);",u5e=`
  return vec4(lessThanEqual(a, b));
`,f5e=fr({opSnippet:c5e,packedOpSnippet:u5e,cpuKernelImpl:W4e,dtype:"bool"}),h5e={kernelName:s1,backendName:"webgl",kernelFunc:f5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d5e(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:s}=n,a=G4e(r,i,s);return e.makeTensorInfo([a.length],"float32",a)}const p5e={kernelName:M9,backendName:"webgl",kernelFunc:d5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m5e=Ph+`
  return x < 0.0 ? 0./0. : log(x);
`,g5e=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,y5e=xt({opSnippet:m5e,packedOpSnippet:g5e,cpuKernelImpl:q4e}),v5e={kernelName:pg,backendName:"webgl",kernelFunc:y5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b5e=Ph+`
  return log(1.0 + x);
`,x5e=xt({opSnippet:b5e}),w5e={kernelName:mg,backendName:"webgl",kernelFunc:x5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S5e="return float(a >= 1.0 && b >= 1.0);",C5e=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,T5e=fr({opSnippet:S5e,packedOpSnippet:C5e,dtype:"bool"}),k5e={kernelName:a1,backendName:"webgl",kernelFunc:T5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A5e="return float(!(x >= 1.0));",E5e=xt({opSnippet:A5e}),$5e={kernelName:o1,backendName:"webgl",kernelFunc:E5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I5e="return float(a >= 1.0 || b >= 1.0);",N5e=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,O5e=fr({opSnippet:I5e,packedOpSnippet:N5e,dtype:"bool"}),_5e={kernelName:l1,backendName:"webgl",kernelFunc:O5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class R5e{constructor(e,n,r,i,s){this.variableNames=["x"],this.outputShape=[];const a=n,o=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${i}) * sum`;s===.5?l=`inversesqrt(${c})`:s===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${a}; j <= ${a}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${o}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D5e{constructor(e,n,r,i,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const a=n,o=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${i}) * sum`;s===.5?l=`inversesqrt(${c})`:s===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${a};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${a}; j <= ${a}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${o}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M5e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:s,bias:a,alpha:o,beta:l}=r,c=fe().getBool("WEBGL_PACK_NORMALIZATION")?new D5e(i.shape,s,a,o,l):new R5e(i.shape,s,a,o,l);return n.runWebGLProgram(c,[i],i.dtype)},P5e={kernelName:c1,backendName:"webgl",kernelFunc:M5e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L5e{constructor(e,n,r,i,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=i,this.beta=s,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${i}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${i})
                * float(${s})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${s});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F5e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i,y:s,dy:a}=e,{depthRadius:o,bias:l,alpha:c,beta:f}=r,h=new L5e(i.shape,o,l,c,f);return n.runWebGLProgram(h,[i,s,a],i.dtype)},B5e={kernelName:y_,backendName:"webgl",kernelFunc:F5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z5e(t,e,n,r){const i=be(e),a=be(t.shape)/i,o=Oe({inputs:{x:t},attrs:{shape:[a,i]},backend:r}),l=ou(o,t.dtype,"max",r),c=Oe({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JJ(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:s,keepDims:a}=r,o=i.shape.length,l=ot(s,i.shape);let c=l;const f=on(c,o),h=f!=null,p=n.shouldExecuteOnCPU([i]);let g=i;if(h){if(p){const T=n.texData.get(g.dataId).values,A=new Array(o);for(let I=0;I<A.length;I++)A[I]=i.shape[f[I]];const k=yD(T,i.shape,i.dtype,f,A);g=n.makeTensorInfo(A,i.dtype);const E=n.texData.get(g.dataId);E.values=k}else g=uw(i,f,n);c=Sn(c.length,o)}ur("max",c,o);const[y,b]=er(g.shape,c);let v=y;a&&(v=On(y,l));let w;if(p){const T=n.texData.get(g.dataId).values,A=H4e(T,be(b),v,i.dtype);w=n.makeTensorInfo(v,i.dtype);const k=n.texData.get(w.dataId);k.values=A}else w=z5e(g,b,v,n);return h&&n.disposeIntermediateTensorInfo(g),w}const j5e={kernelName:u1,backendName:"webgl",kernelFunc:JJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V5e=vD+`
  return max(a, b);
`,U5e=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+au+`
  return result;
`,W5e=fr({opSnippet:V5e,packedOpSnippet:U5e,cpuKernelImpl:K4e}),G5e={kernelName:gg,backendName:"webgl",kernelFunc:W5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;ry(i,"maxPool");const{filterSize:s,strides:a,pad:o,dimRoundingMode:l}=r,c=1;G(Cr(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const f=us(i.shape,s,a,c,o,l);if(f.filterWidth===1&&f.filterHeight===1&&$t(f.inShape,f.outShape))return pi({inputs:{x:i},backend:n});const h=new $m(f,"max",!1);return n.runWebGLProgram(h,[i],i.dtype)}const H5e={kernelName:f1,backendName:"webgl",kernelFunc:q5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:a,pad:o,dataFormat:l,dimRoundingMode:c}=r,f=[1,1,1],h=vo(i.shape,s,a,f,o,c,l),p=new xD(h,"max",!1);return n.runWebGLProgram(p,[i],i.dtype)}const X5e={kernelName:h1,backendName:"webgl",kernelFunc:K5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Y5e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,i=e.dilationHeight,s=e.effectiveFilterHeight,a=e.effectiveFilterWidth,o=s-1-e.padInfo.top,l=a-1-e.padInfo.left,c=s*a-1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${s};
          wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${a}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${a} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class Z5e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,a=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=l-1-e.padInfo.front,p=c-1-e.padInfo.top,g=f-1-e.padInfo.left,y=l*c*f-1;this.userCode=`
      const ivec3 pads = ivec3(${h}, ${p}, ${g});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${s}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${a}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${f};
                wC += ${o}) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${y} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${f} +
                  wR * ${f} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q5e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,a=s,{filterSize:o,strides:l,pad:c,dimRoundingMode:f}=r,h=[1,1,1],p=vo(a.shape,o,l,h,c,f),g=new xD(p,"max",!0),y=n.runWebGLProgram(g,[a],a.dtype),b=new Z5e(p),v=n.runWebGLProgram(b,[i,y],a.dtype);return n.disposeIntermediateTensorInfo(y),v}const J5e={kernelName:b_,backendName:"webgl",kernelFunc:Q5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e6e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s,output:a}=e,o=s;ry([s,a],"maxPoolGrad");const{filterSize:l,strides:c,pad:f,dimRoundingMode:h}=r,p=us(o.shape,l,c,1,f,h),g=!0,y=new $m(p,"max",g),b=n.runWebGLProgram(y,[o],o.dtype),v=new Y5e(p),w=n.runWebGLProgram(v,[i,b],o.dtype);return n.disposeIntermediateTensorInfo(b),w}const t6e={kernelName:v_,backendName:"webgl",kernelFunc:e6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n6e(t,e,n,r){let i=new $m(n,"max",!1);const s=r.runWebGLProgram(i,[t],"float32");i=new $m(n,"max",!0,!0,e);const a=r.runWebGLProgram(i,[t],"float32");return[s,a]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r6e={kernelName:P9,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:s,pad:a,includeBatchInIndex:o}=e,l=n;G(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];G(Cr(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);const f=us(r.shape,i,s,c,a),[h,p]=n6e(r,o,f,l);return[h,p]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i6e(t,e,n,r){const i=be(e),a=be(t.shape)/i,o=Oe({inputs:{x:t},attrs:{shape:[a,i]},backend:r}),l=ou(o,"float32","mean",r),c=Oe({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s6e={kernelName:d1,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:i,axis:s}=e,a=n,o=r.shape.length,l=ot(s,r.shape);let c=l;const f=on(c,o),h=f!=null,p=a.shouldExecuteOnCPU([r]),g=[];let y=r;if(h){if(p){const A=a.texData.get(y.dataId).values,k=new Array(o);for(let N=0;N<k.length;N++)k[N]=r.shape[f[N]];const E=yD(A,r.shape,r.dtype,f,k);y=a.makeTensorInfo(k,r.dtype);const I=a.texData.get(y.dataId);I.values=E}else y=uw(r,f,a);g.push(y),c=Sn(c.length,o)}ur("sum",c,o);const[b,v]=er(y.shape,c);let w=b;i&&(w=On(b,l));const S=i6e(y,v,w,a);for(const T of g)a.disposeIntermediateTensorInfo(T);return S}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r,o=i.shape.length,l=ot(s,i.shape);let c=l;const f=on(c,o);let h=i;f!=null&&(h=zr({inputs:{x:i},backend:n,attrs:{perm:f}}),c=Sn(c.length,i.shape.length)),ur("min",c,o);const[p,g]=er(h.shape,c),y=be(g),b=Oe({inputs:{x:h},backend:n,attrs:{shape:[-1,y]}}),v=ou(b,b.dtype,"min",n);let w;if(a){const S=On(p,l);w=Oe({inputs:{x:v},backend:n,attrs:{shape:S}})}else w=Oe({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(v),f!=null&&n.disposeIntermediateTensorInfo(h),w}const o6e={kernelName:p1,backendName:"webgl",kernelFunc:a6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l6e=vD+`
  return min(a, b);
`,c6e=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+au+`
  return result;
`,u6e=fr({opSnippet:l6e,packedOpSnippet:c6e,cpuKernelImpl:X4e}),f6e={kernelName:yg,backendName:"webgl",kernelFunc:u6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h6e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((f,h)=>f[0]+e[h]+f[1]);const i=e.length,s=Lt(i),a=n.map(f=>f[0]).join(","),o=n.map((f,h)=>f[0]+e[h]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i),c=r==="reflect"?0:1;if(i===1){this.userCode=`
        int start = ${a};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${a});
      ${s} end = ${s}(${o});

      void main() {
        ${s} outC = getOutputCoords();
        for (int i = 0; i < ${i}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${s} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d6e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((y,b)=>y[0]+e[b]+y[1]);const i=e.length,s=Lt(i),a=n.map(y=>y[0]).join(","),o=n.map((y,b)=>y[0]+e[b]).join(","),l=Lr("rc",i),c=Lr("source",i),f=`${l[i-1]} < ${this.outputShape[i-1]}`,h=i===1?"source":`vec2(${c.slice(-2).join()})`,p=r==="reflect"?0:1;let g="";if(i===1){const y=`
        ${s} source = rc;
        if (source < start) {
          source = start * 2 - source - ${p};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${p};
        }
        source -= start;
      `;g=`
        ${s} rc = outputLoc;
        ${y}
        result[0] = getChannel(getX(${c.join()}), ${h});
        ${l[i-1]} += 1;
        if(${f}) {
          ${y}
          result[1] = getChannel(getX(${c.join()}), ${h});
        }
      `}else{const y=`
        ${s} source = rc;
        ${s} lt = ${s}(lessThan(source, start));
        ${s} gte = ${s}(greaterThanEqual(source, end));
        ${s} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${p}) +
                gte * ((end - 1) * 2 - source + ${p});
        source -= start;
      `;g=`
        ${s} rc = outputLoc;
        ${y}
        result[0] = getChannel(getX(${c.join()}), ${h});
        ${l[i-1]} += 1;
        if(${f}) {
          ${y}
          result[1] = getChannel(getX(${c.join()}), ${h});
        }
        rc = outputLoc;
        ${l[i-2]} += 1;
        if(${l[i-2]} < ${this.outputShape[i-2]}) {
          ${y}
          result[2] = getChannel(getX(${c.join()}), ${h});
          ${l[i-1]} += 1;
          if(${f}) {
            ${y}
            result[3] = getChannel(getX(${c.join()}), ${h});
          }
        }
      `}this.userCode=`
      const ${s} start = ${s}(${a});
      const ${s} end = ${s}(${o});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${g}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p6e=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:i,mode:s}=n,a=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new d6e(r.shape,i,s):new h6e(r.shape,i,s);return e.runWebGLProgram(a,[r],r.dtype)},m6e={kernelName:m1,backendName:"webgl",kernelFunc:p6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g6e=`if (b == 0.0) return NAN;
  return mod(a, b);`,y6e=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+au+`
  return result;
`,v6e=fr({opSnippet:g6e,packedOpSnippet:y6e}),b6e={kernelName:vg,backendName:"webgl",kernelFunc:v6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x6e{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w6e=`
if (a == b) {
  return 1.0;
};
return a / b;`,S6e=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,eee=fr({opSnippet:w6e,packedOpSnippet:S6e,checkOutOfBounds:!0}),C6e={kernelName:ng,backendName:"webgl",kernelFunc:eee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A5="return a - b;",tee=fr({opSnippet:A5,packedOpSnippet:A5,supportsComplex:!0,cpuKernelImpl:gje}),T6e={kernelName:Dg,backendName:"webgl",kernelFunc:tee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nee(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:s}=r,a=ot([s],i.shape),o=JJ({inputs:{x:i},backend:n,attrs:{reductionIndices:a,keepDims:!1}}),l=On(o.shape,a),c=Oe({inputs:{x:o},backend:n,attrs:{shape:l}}),f=tee({inputs:{a:i,b:c},backend:n}),h=YJ({inputs:{x:f},backend:n}),p=fw({inputs:{x:h},backend:n,attrs:{axis:a,keepDims:!1}}),g=Oe({inputs:{x:p},backend:n,attrs:{shape:l}}),y=eee({inputs:{a:h,b:g},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),y}const k6e={kernelName:R1,backendName:"webgl",kernelFunc:nee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A6e(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:s,seed:a,normalized:o}=r,l=o?i:nee({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),c=l.shape[0],f=l.shape[1],h=new x6e(c,f,s),p=[[a]],g=n.runWebGLProgram(h,[l],"int32",p);return o||n.disposeIntermediateTensorInfo(l),g}const E6e={kernelName:L9,backendName:"webgl",kernelFunc:A6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $6e=hs+`
  return -x;
`,I6e=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function N6e(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const s=n.texData.get(r.dataId),[a,o]=Z4e(s.values,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,a)}let i;return fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new nl(r.shape,I6e):i=new Ys(r.shape,$6e),n.runWebGLProgram(i,[r],r.dtype)}const O6e={kernelName:g1,backendName:"webgl",kernelFunc:N6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _6e=oR;function R6e(t){Ni("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l}=r,c=n.readSync(i.dataId),f=n.readSync(s.dataId),{selectedIndices:h}=_6e(c,f,a,o,l);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}const D6e={kernelName:x_,backendName:"webgl",kernelFunc:R6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M6e=lR;function P6e(t){Ni("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r,f=n.readSync(i.dataId),h=n.readSync(s.dataId),{selectedIndices:p,validOutputs:g}=M6e(f,h,a,o,l,c);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([g]))]}const L6e={kernelName:w_,backendName:"webgl",kernelFunc:P6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F6e=cR;function B6e(t){Ni("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r,f=n.readSync(i.dataId),h=n.readSync(s.dataId),p=a,g=o,y=l,b=c,{selectedIndices:v,selectedScores:w}=F6e(f,h,p,g,y,b);return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([w.length],"float32",new Float32Array(w))]}const z6e={kernelName:S_,backendName:"webgl",kernelFunc:B6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j6e{constructor(e,n,r,i){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${i}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V6e=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:s,depth:a,onValue:o,offValue:l}=r,c=be(i.shape),f=new j6e(c,a,o,l),h=Oe({inputs:{x:i},backend:n,attrs:{shape:[c]}}),p=n.runWebGLProgram(f,[h],s);n.disposeIntermediateTensorInfo(h);const g=[...i.shape,a],y=Oe({inputs:{x:p},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(p),y},U6e={kernelName:b1,backendName:"webgl",kernelFunc:V6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yb(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const i=sy({inputs:{input:r},backend:n}),s=Yb({inputs:{x:i},backend:n}),a=hw({inputs:{input:r},backend:n}),o=Yb({inputs:{x:a},backend:n}),l=Rl({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return ay({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const W6e={kernelName:P1,backendName:"webgl",kernelFunc:Yb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ree(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const i=sy({inputs:{input:r},backend:n}),s=ree({inputs:{x:i},backend:n}),a=hw({inputs:{input:r},backend:n}),o=Yb({inputs:{x:a},backend:n}),l=Rl({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return ay({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const G6e={kernelName:v1,backendName:"webgl",kernelFunc:ree};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q6e(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return KI({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const s=e[0].shape,a=e[0].dtype;e.forEach(f=>{UO(s,f.shape,"All tensors passed to stack must have matching shapes"),G(a===f.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=e.map(f=>{const h=KI({inputs:{input:f},backend:n,attrs:{dim:i}});return o.push(h),h}),c=VJ({inputs:l,backend:n,attrs:{axis:i}});return o.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const H6e={kernelName:x1,backendName:"webgl",kernelFunc:q6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K6e{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,f)=>c[0]+e[f]+c[1]);const i=e.length,s=Lt(i),a=n.map(c=>c[0]).join(","),o=n.map((c,f)=>c[0]+e[f]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i);if(i===1){this.userCode=`
        int start = ${a};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${a});
      ${s} end = ${s}(${o});

      void main() {
        ${s} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${s} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class X6e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((b,v)=>b[0]+e[v]+b[1]);const i=e.length,s=Lt(i),a=n.map(b=>b[0]).join(","),o=n.map((b,v)=>b[0]+e[v]).join(","),l=Lr("rc",i),c=Lr("source",i),f=`${l[i-1]} < ${this.outputShape[i-1]}`,h=i===1?"source":`vec2(${c.slice(-2).join()})`,p=[`${s} rc = outputLoc;`,`${l[i-1]} += 1;
       if(${f}) {
      `,i===1?"":`}
       rc = outputLoc;
       ${l[i-2]} += 1;
       if(${l[i-2]} < ${this.outputShape[i-2]}) {`,i===1?"":`  ${l[i-1]} += 1;
         if(${f}) {`],g=i===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let y="";for(let b=0,v=i===1?2:4;b<v;b++)y+=`
        ${p[b]}
        if (${g}) {
          result[${b}] = float(value);
        } else {
          ${s} source = rc - start;
          result[${b}] = getChannel(getX(${c.join()}), ${h});
        }
      `;y+=i===1?"} ":"}}",this.userCode=`
      const ${s} start = ${s}(${a});
      const ${s} end = ${s}(${o});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${y}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iee=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,constantValue:a}=r;if(be(i.shape)===0){const c=s.map((f,h)=>f[0]+i.shape[h]+f[1]);return ay({backend:n,attrs:{shape:c,value:a,dtype:i.dtype}})}const o=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new X6e(i.shape,s,a):new K6e(i.shape,s,a),l=[[a]];return n.runWebGLProgram(o,[i],i.dtype,l)},Y6e={kernelName:w1,backendName:"webgl",kernelFunc:iee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z6e=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,Q6e=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+au+`
  return result;
`,J6e=fr({opSnippet:Z6e,packedOpSnippet:Q6e}),eqe={kernelName:xg,backendName:"webgl",kernelFunc:J6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tqe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r,o=i.shape.length,l=[],c=ot(s,i.shape);let f=c;const h=on(f,o);let p=i;h!=null&&(p=zr({inputs:{x:i},backend:n,attrs:{perm:h}}),f=Sn(f.length,o),l.push(p)),ur("prod",f,o);let g;if(n.shouldExecuteOnCPU([p])){const y=n.texData.get(p.dataId).values,{outVals:b,outShape:v,outDtype:w}=J4e(p.shape,p.dtype,y,f);g=n.makeTensorInfo(v,w,b)}else{const[y,b]=er(p.shape,f),v=be(b),w=Oe({inputs:{x:p},backend:n,attrs:{shape:[-1,v]}}),S=D_(i.dtype),T=ou(w,S,"prod",n);g=Oe({inputs:{x:T},backend:n,attrs:{shape:y}}),l.push(w),l.push(T)}if(a){l.push(g);const y=On(g.shape,c);g=Oe({inputs:{x:g},backend:n,attrs:{shape:y}})}return l.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const nqe={kernelName:C1,backendName:"webgl",kernelFunc:tqe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rqe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:s,indices:a}=e,{outputRaggedRank:o}=r,l=i.map(w=>n.readSync(w.dataId)),c=i.map(w=>w.shape),f=n.readSync(s.dataId),h=n.readSync(a.dataId),[p,g,y]=eje(l,c,f,s.shape,s.dtype,h,a.shape,o),b=p.map(w=>n.makeTensorInfo([w.length],"int32",w)),v=n.makeTensorInfo(y,s.dtype,g);return b.concat([v])}const iqe={kernelName:F9,backendName:"webgl",kernelFunc:rqe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sqe(t){const{inputs:e,backend:n}=t,{starts:r,limits:i,deltas:s}=e,a=n.readSync(r.dataId),o=n.readSync(i.dataId),l=n.readSync(s.dataId),[c,f]=tje(a,r.shape,r.dtype,o,i.shape,l,s.shape),h=n.makeTensorInfo([c.length],"int32",c),p=n.makeTensorInfo([f.length],r.dtype,f);return[h,p]}const aqe={kernelName:B9,backendName:"webgl",kernelFunc:sqe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oqe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:s,defaultValue:a,rowPartitionTensors:o}=e,{rowPartitionTypes:l}=r,c=n.readSync(i.dataId),f=n.readSync(s.dataId),h=n.readSync(a.dataId),p=o.map(v=>n.readSync(v.dataId)),g=o.map(v=>v.shape),[y,b]=nje(c,i.shape,f,s.shape,s.dtype,h,a.shape,p,g,l);return n.makeTensorInfo(y,s.dtype,b)}const lqe={kernelName:z9,backendName:"webgl",kernelFunc:oqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const see=t=>{const{backend:e,attrs:n}=t,{start:r,stop:i,step:s,dtype:a}=n,o=rje(r,i,s,a);return e.makeTensorInfo([o.length],a,o)},cqe={kernelName:C_,backendName:"webgl",kernelFunc:see};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uqe="return 1.0 / x;",fqe=xt({opSnippet:uqe}),hqe={kernelName:wg,backendName:"webgl",kernelFunc:fqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dqe=hs+`
  return (x < 0.0) ? 0.0 : x;
`,pqe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,mqe=xt({opSnippet:dqe,packedOpSnippet:pqe}),gqe={kernelName:Sg,backendName:"webgl",kernelFunc:mqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yqe=hs+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,vqe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,bqe=xt({opSnippet:yqe,packedOpSnippet:vqe}),xqe={kernelName:Cg,backendName:"webgl",kernelFunc:bqe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wqe{constructor(e,n,r,i,s){this.variableNames=["A"],this.outputShape=[];const[a,o,l,c]=e;this.outputShape=[a,n,r,c];const f=[i&&n>1?o-1:o,i&&r>1?l-1:l],h=[i&&n>1?n-1:n,i&&r>1?r-1:r];let p;s?p="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${f[0]/h[0]},
          ${f[1]/h[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sqe{constructor(e,n,r,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,o,l,c]=e;this.outputShape=[a,n,r,c];const f=[i&&n>1?o-1:o,i&&r>1?l-1:l],h=[i&&n>1?n-1:n,i&&r>1?r-1:r];let p;s?p="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${f[0]/h[0]},
          ${f[1]/h[1]},
          ${f[1]/h[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cqe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:a,size:o}=r,[l,c]=o,f=fe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Sqe(i.shape,l,c,s,a):new wqe(i.shape,l,c,s,a);return n.runWebGLProgram(f,[i],"float32")}const Tqe={kernelName:A1,backendName:"webgl",kernelFunc:Cqe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kqe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,s]=n,[,a,o]=e,l=[r&&a>1?i-1:i,r&&o>1?s-1:s],c=[r&&a>1?a-1:a,r&&o>1?o-1:o],f=l[0]/c[0],h=l[1]/c[1],p=1/f,g=1/h,y=Math.ceil(p)*2+2,b=Math.ceil(g)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${f});
        const float widthScale = float(${h});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${g});

        const int winHeight = int(${y});
        const int winWidth = int(${b});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${i-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${s-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aqe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:a}=r,o=new kqe(s.shape,i.shape,a);return n.runWebGLProgram(o,[s],s.dtype)}const Eqe={kernelName:A_,backendName:"webgl",kernelFunc:Aqe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $qe{constructor(e,n,r,i,s){this.variableNames=["A"],this.outputShape=[];const[a,o,l,c]=e;this.outputShape=[a,n,r,c];const f=[i&&n>1?o-1:o,i&&r>1?l-1:l],h=[i&&n>1?n-1:n,i&&r>1?r-1:r],p=i?"0.5":"0.0";let g;s?g="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":g="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${f[0]/h[0]},
          ${f[1]/h[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${g};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Iqe{constructor(e,n,r,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,o,l,c]=e;this.outputShape=[a,n,r,c];const f=[i&&n>1?o-1:o,i&&r>1?l-1:l],h=[i&&n>1?n-1:n,i&&r>1?r-1:r],p=i?"0.5":"0.0";let g;s?g="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":g="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${f[0]/h[0]},
          ${f[1]/h[1]},
          ${f[1]/h[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${g};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nqe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:a,size:o}=r,[l,c]=o,f=fe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Iqe(i.shape,l,c,s,a):new $qe(i.shape,l,c,s,a);return n.runWebGLProgram(f,[i],i.dtype)}const Oqe={kernelName:k1,backendName:"webgl",kernelFunc:Nqe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _qe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,s]=n,[,a,o]=e,l=[r&&a>1?i-1:i,r&&o>1?s-1:s],c=[r&&a>1?a-1:a,r&&o>1?o-1:o],f=l[0]/c[0],h=l[1]/c[1],p=1/f,g=1/h,y=Math.ceil(p)*2+2,b=Math.ceil(g)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${f});
        const float widthScale = float(${h});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${g});

        const int winHeight = int(${y});
        const int winWidth = int(${b});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rqe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:a}=r,o=new _qe(s.shape,i.shape,a);return n.runWebGLProgram(o,[s],s.dtype)}const Dqe={kernelName:k_,backendName:"webgl",kernelFunc:Rqe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mqe{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const i=o=>n.indexOf(o)!==-1&&e[o]!==1?`${e[o]} - coords[${o}] - 1`:`coords[${o}]`,s=e.map((o,l)=>i(l)).join(","),a=Lt(r);this.userCode=`
      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pqe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const i=Lr("rc",r),s=`${i[r-1]} + 1 < ${this.outputShape[r-1]}`,a=`${i[r-2]} + 1 < ${this.outputShape[r-2]}`,o=Lt(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${s}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${o} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(i.slice())};
          if(${s}){
            result.g = ${c(i.slice())};
          }
          if(${a}) {
            result.b = ${f(i.slice())};
            if(${s}) {
              result.a = ${h(i.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(y){return p(y)}function c(y){return y[r-1]="("+y[r-1]+" + 1)",p(y)}function f(y){return y[r-2]="("+y[r-2]+" + 1)",p(y)}function h(y){return y[r-1]="("+y[r-1]+" + 1)",y[r-2]="("+y[r-2]+" + 1)",p(y)}function p(y){const b=e.map((S,T)=>g(T,y)),v=b.join(","),w=b.slice(-2).join(",");return`getChannel(getX(${v}), vec2(${w}))`}function g(y,b){return n.indexOf(y)!==-1&&e[y]!==1?`${e[y]} - ${b[y]} - 1`:`${b[y]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lqe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:s}=r,a=i.shape.length,o=ot(s,i.shape);if(a===0)return pi({inputs:{x:i},backend:n});const l=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Pqe(i.shape,o):new Mqe(i.shape,o);return n.runWebGLProgram(l,[i],i.dtype)}const Fqe={kernelName:E1,backendName:"webgl",kernelFunc:Lqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bqe{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],i=e[2];this.outputShape=e;let s="";typeof n=="number"?s=`float outputValue = ${n.toFixed(2)};`:s=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${s}
          if(coordX >= 0 && coordX < ${i} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zqe={kernelName:R_,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:s,center:a}=e,o=n,l=new Bqe(r.shape,s),[c,f]=xR(a,r.shape[1],r.shape[2]),h=[[c,f,Math.sin(i),Math.cos(i)]];return o.runWebGLProgram(l,[r],r.dtype,h)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jqe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,Vqe=xt({opSnippet:jqe}),Uqe={kernelName:Tg,backendName:"webgl",kernelFunc:Vqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wqe="return inversesqrt(x);",Gqe=xt({opSnippet:Wqe,cpuKernelImpl:ije}),qqe={kernelName:kg,backendName:"webgl",kernelFunc:Gqe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wD{constructor(e,n,r,i,s,a,o=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;const c=Lt(s.length),f=Lt(a.length);let h="";r===1?h="i":r===2&&(h="i, j");const p=`getIndices(${h})`;let g="";i===1?g="i":i===2&&(g="i, coords[1]");const y=`getUpdates(${g})`;let b="";l&&(b="coords[0], coords[1]");const v=`getDefaultValue(${b})`,w=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${s});

        void main() {
          ${f} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${p});
              flattenedIndex += index * ${w};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${y};
              found = true;
            }
          }
          setOutput(mix(${v}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hqe{constructor(e,n,r,i,s,a,o=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a;const c=Lt(s.length),f=Lt(a.length);let h="";r===1?h="i":r===2&&(h="i, j");const p=`getIndices(${h})`;let g="";i===1?g="i":i===2&&(g="i, coords[1]");const y=`getUpdates(${g})`;let b="";l&&(b="coords[0], coords[1]");const v=`getDefaultValue(${b})`,w=n>1?"strides[j]":"strides",S=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${s});

        void main() {
          ${f} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${p});
              flattenedIndex += index.xz * ${w};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${S};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${y};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${v}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kqe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:s}=e,{shape:a}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:f,outputSize:h}=tu(s,i,a),p=[h/c,c];if(h===0)return n.makeTensorInfo(a,i.dtype);const g=Oe({inputs:{x:i},backend:n,attrs:{shape:[l,o]}}),y=Oe({inputs:{x:s},backend:n,attrs:{shape:[l,c]}}),b=n.makeTensorInfo([],"float32",new Float32Array([0]));let v;fe().getBool("WEBGL_PACK")?v=new Hqe(l,o,g.shape.length,y.shape.length,f,p):v=new wD(l,o,g.shape.length,y.shape.length,f,p);const w=n.runWebGLProgram(v,[y,g,b],y.dtype),S=Oe({inputs:{x:w},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(b),S}const Xqe={kernelName:j9,backendName:"webgl",kernelFunc:Kqe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yqe{constructor(e,n,r,i){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const s="while (left < right) {",a=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,o=fe().getNumber("WEBGL_VERSION")===2?s:a,l=i==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${o}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zqe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:s}=e,{side:a}=r,o=new Yqe(i.shape[0],i.shape[1],s.shape[1],a),l=[[i.shape[1]]];return n.runWebGLProgram(o,[i,s],"int32",l)}const Qqe={kernelName:U9,backendName:"webgl",kernelFunc:Zqe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Jqe{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let i,s;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)s="resRC",i="resRC";else{const o=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let f=0;f<n.length;f++)c.push(`${o[f]}`),f<e&&l.push(`${o[f]}`);i=l.join(),s=c.join()}const a=Lt(r);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        float cVal = getC(${i});
        if (cVal >= 1.0) {
          setOutput(getA(${s}));
        } else {
          setOutput(getB(${s}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eHe(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:s}=e,a=new Jqe(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(a,[r,i,s],hi(i.dtype,s.dtype))}const tHe={kernelName:$1,backendName:"webgl",kernelFunc:eHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nHe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${K1};
  float scale = ${X1};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,rHe=xt({opSnippet:nHe}),iHe={kernelName:Ag,backendName:"webgl",kernelFunc:rHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sHe=Ph+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,aHe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,oHe=xt({opSnippet:sHe,packedOpSnippet:aHe,cpuKernelImpl:aje}),lHe={kernelName:Ng,backendName:"webgl",kernelFunc:oHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cHe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,uHe=xt({opSnippet:cHe}),fHe={kernelName:Ig,backendName:"webgl",kernelFunc:uHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hHe=Ph+`
  return sin(x);
`,dHe=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${au}
  return result;
`,pHe=xt({opSnippet:hHe,packedOpSnippet:dHe}),mHe={kernelName:Eg,backendName:"webgl",kernelFunc:pHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gHe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,yHe=xt({opSnippet:gHe}),vHe={kernelName:$g,backendName:"webgl",kernelFunc:yHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bHe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,xHe=xt({opSnippet:bHe}),wHe={kernelName:Og,backendName:"webgl",kernelFunc:xHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SHe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,paddings:a}=r;G(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const o=s.reduce((w,S)=>w*S),l=[[0,0]];l.push(...a);for(let w=1+s.length;w<i.shape.length;++w)l.push([0,0]);const c=[],f=iee({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),h=Wg(f.shape,s,o,!1),p=Gg(h.length,s.length,!1),g=qg(f.shape,s,o,!1),y=Oe({inputs:{x:f},backend:n,attrs:{shape:h}}),b=zr({inputs:{x:y},backend:n,attrs:{perm:p}}),v=Oe({inputs:{x:b},backend:n,attrs:{shape:g}});return c.push(f),c.push(y),c.push(b),c.forEach(w=>n.disposeIntermediateTensorInfo(w)),v},CHe={kernelName:O1,backendName:"webgl",kernelFunc:SHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function THe(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:s,defaultValue:a}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${i.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);const o=n.readSync(r.dataId),l=n.readSync(i.dataId),c=n.readSync(s.dataId),f=n.readSync(a.dataId)[0],[h,p,g,y,b]=lje(o,r.shape,r.dtype,l,i.dtype,c,f);return[n.makeTensorInfo(p,r.dtype,h),n.makeTensorInfo([p[0]],i.dtype,g),n.makeTensorInfo([y.length],"bool",new Uint8Array(y.map(v=>Number(v)))),n.makeTensorInfo([b.length],r.dtype,new Int32Array(b))]}const kHe={kernelName:W9,backendName:"webgl",kernelFunc:THe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AHe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const a=Array.from(n.readSync(i.dataId)),o=n.readSync(r.dataId),l=Array.from(n.readSync(s.dataId)),[c,f,h]=cje(o,r.shape,r.dtype,a,l);return[n.makeTensorInfo(f,r.dtype,c),n.makeTensorInfo([h.length],s.dtype,new Int32Array(h))]}const EHe={kernelName:G9,backendName:"webgl",kernelFunc:AHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $He(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${s.shape}`);const a=n.readSync(r.dataId),o=n.readSync(i.dataId),l=n.readSync(s.dataId),[c,f]=IJ(a,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(f,r.dtype,c)}const IHe={kernelName:q9,backendName:"webgl",kernelFunc:$He};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NHe(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${s.shape}`);const a=n.readSync(r.dataId),o=n.readSync(i.dataId),l=n.readSync(s.dataId),[c,f]=IJ(a,r.shape,r.dtype,o,l);return n.makeTensorInfo(f,r.dtype,c)}const OHe={kernelName:H9,backendName:"webgl",kernelFunc:NHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _He(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:s,defaultValue:a}=e,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:f,strides:h,outputSize:p}=tu(s,i,o),g=!1;if(s.dtype==="string"){const w=n.bufferSync(i),S=n.bufferSync(s),T=fl(n.readSync(a.dataId)[0]),A=sje(w,S,o,p,f,c,l,h,T,g);return n.makeTensorInfo(o,A.dtype,A.values)}const y=new wD(c,l,i.shape.length,s.shape.length,h,[p,1],g),b=n.runWebGLProgram(y,[s,i,a],s.dtype),v=Oe({inputs:{x:b},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(b),v}const RHe={kernelName:K9,backendName:"webgl",kernelFunc:_He};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:s,axis:a}=r,o=ot(a,i.shape)[0],l=MR(i,s,o),c=i.shape.length,f=new Array(c).fill(0),h=i.shape.slice();return l.map(p=>{const g=[...h];g[o]=p;const y=Lh({inputs:{x:i},backend:n,attrs:{begin:f,size:g}});return f[o]+=p,y})}const MHe={kernelName:_1,backendName:"webgl",kernelFunc:DHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E5="return sqrt(x);",PHe=xt({opSnippet:E5,packedOpSnippet:E5,cpuKernelImpl:uje}),LHe={kernelName:_g,backendName:"webgl",kernelFunc:PHe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FHe="return x * x;",BHe=xt({opSnippet:FHe}),zHe={kernelName:E_,backendName:"webgl",kernelFunc:BHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $5="return (a - b) * (a - b);",jHe=fr({opSnippet:$5,packedOpSnippet:$5}),VHe={kernelName:Rg,backendName:"webgl",kernelFunc:jHe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");const s=n.readSync(i.dataId),a=fo(s),o=fje(a,"string",r);return n.makeTensorInfo(i.shape,"string",o)}const WHe={kernelName:$_,backendName:"webgl",kernelFunc:UHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GHe({inputs:t,attrs:e,backend:n}){const{x:r}=t,i=hs+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,s=new Ys(r.shape,i);return n.runWebGLProgram(s,[r],r.dtype)}const qHe={kernelName:Fg,backendName:"webgl",kernelFunc:GHe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HHe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const i=r.length,s=Lt(r.length),a=Lt(r.length);let o="";if(i===1)o="coords * strides + begin";else{let l=0;o=r.map((c,f)=>(l++,r.length===1?`coords * strides[${f}] + begin[${f}]`:`coords[${l-1}] * strides[${f}] + begin[${f}]`)).join(",")}this.userCode=`
      ${s} begin = ${s}(${e});
      ${s} strides = ${s}(${n});

      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${o}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,end:a,strides:o,beginMask:l,endMask:c,ellipsisMask:f,newAxisMask:h,shrinkAxisMask:p}=r,{finalShapeSparse:g,finalShape:y,isIdentity:b,sliceDim0:v,isSimpleSlice:w,begin:S,end:T,strides:A}=yR(i.shape,s,a,o,l,c,f,h,p);let k;if(b)k=Oe({inputs:{x:i},backend:n,attrs:{shape:y}});else if(v||w){G(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const I=pR(S,T,A),N=Lh({inputs:{x:i},backend:n,attrs:{begin:S,size:I}});k=Oe({inputs:{x:N},backend:n,attrs:{shape:y}}),n.disposeIntermediateTensorInfo(N)}else if(n.shouldExecuteOnCPU([i])){const N=n.readSync(i.dataId),_=at(i.shape,i.dtype,N),D=hje(g,_,A,S);k=n.makeTensorInfo(y,i.dtype,D.values)}else{const N=new HHe(S,A,g);k=n.runWebGLProgram(N,[i],i.dtype)}const E=Oe({inputs:{x:k},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(k),E}const XHe={kernelName:I_,backendName:"webgl",kernelFunc:KHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YHe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:s,leftPad:a,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:f,dataSplits:h}=e,p=n.readSync(f.dataId),g=n.readSync(h.dataId),[y,b]=dje(p,g,i,s,a,o,l,c);return[n.makeTensorInfo([y.length],"string",y),n.makeTensorInfo(h.shape,"int32",b)]}const ZHe={kernelName:X9,backendName:"webgl",kernelFunc:YHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QHe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:s,delimiter:a}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const o=n.readSync(s.dataId),l=n.readSync(a.dataId)[0],[c,f,h]=pje(o,l,i),p=f.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",f),n.makeTensorInfo([2],"int32",new Int32Array(h))]}const JHe={kernelName:Y9,backendName:"webgl",kernelFunc:QHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e8e(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const a=n.readSync(s.dataId),o=mje(a,i);return n.makeTensorInfo(s.shape,"int32",o)}const t8e={kernelName:Z9,backendName:"webgl",kernelFunc:e8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n8e="return tan(x);",r8e=xt({opSnippet:n8e}),i8e={kernelName:Mg,backendName:"webgl",kernelFunc:r8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s8e=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,a8e=xt({opSnippet:s8e}),o8e={kernelName:Pg,backendName:"webgl",kernelFunc:a8e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l8e(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:i,indices:s,updates:a}=e,{sliceRank:o,numUpdates:l,sliceSize:c,strides:f,outputSize:h}=tu(a,s,i.shape),p=[h/c,c];if(h===0)return n.makeTensorInfo(i.shape,s.dtype);const g=Oe({inputs:{x:s},backend:n,attrs:{shape:[l,o]}}),y=Oe({inputs:{x:a},backend:n,attrs:{shape:[l,c]}}),b=Oe({inputs:{x:i},backend:n,attrs:{shape:p}}),v=new wD(l,o,g.shape.length,y.shape.length,f,p,!1,!0),w=n.runWebGLProgram(v,[y,g,b],b.dtype),S=Oe({inputs:{x:w},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(w),S}const c8e={kernelName:V9,backendName:"webgl",kernelFunc:l8e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class u8e{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let a=0;a<r.length;a++)r[a]=e[a]*n[a];this.outputShape=r,this.rank=r.length;const i=Lt(this.rank),s=f8e(e);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        setOutput(getA(${s}));
      }
    `}}function f8e(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<t.length;i++)r.push(`imod(${n[i]}, ${t[i]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aee(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:s}=r;if(i.dtype==="string"||i.shape.length>5){const l=n.readSync(i.dataId),c=i.dtype==="string"?l.map(p=>fl(p)):l,f=at(i.shape,i.dtype,c),h=yje(f,s);return n.makeTensorInfo(h.shape,h.dtype,h.values)}const a=new u8e(i.shape,s);return n.runWebGLProgram(a,[i],i.dtype)}const h8e={kernelName:Lg,backendName:"webgl",kernelFunc:aee};class d8e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class p8e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nc(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function I5(t){let e=1;for(;e<t;)e*=2;return e}function m8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:s,sorted:a}=r,o=fe().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=fe().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=i.shape,f=c[c.length-1];if(n.shouldExecuteOnCPU([i])||f<o||s>l){const D=n.readSync(i.dataId),[O,P]=vje(D,c,i.dtype,s,a);return[n.makeTensorInfo(O.shape,O.dtype,O.values),n.makeTensorInfo(P.shape,P.dtype,P.values)]}if(s===0)return c[c.length-1]=0,[n.makeTensorInfo(c,i.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(f===1)return[i,ay({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const h=n.texData.get(i.dataId),p=h!==null&&h.isPacked,g=p?n.unpackTensor(i):i,b=be(c)/f,v=Oe({inputs:{x:g},attrs:{shape:[b,f]},backend:n});p&&nc(n,g);const w=I5(s),S=I5(f);let T=null;const A=()=>T===null?[v,v]:[v,T],k=(D,O,P)=>{const z=A(),W=new d8e(P),R=[[f],[T===null?1:0],[Number.NEGATIVE_INFINITY],[D],[O]],F=T;T=n.runWebGLProgram(W,z,"int32",R),nc(n,F)};for(let D=1;D<w;D*=2){const O=D*2;for(let P=D;P>=1;P/=2)k(O,P,[b,S])}for(let D=S;D>w;D/=2){const O=A(),P=new p8e([b,D/2]),W=[[f],[T===null?1:0],[w]],U=T;T=n.runWebGLProgram(P,O,"int32",W),nc(n,U);const R=w/2,F=R*2;for(let B=R;B>=1;B/=2)k(F,B,T.shape)}let E=T;T=Lh({inputs:{x:T},backend:n,attrs:{begin:0,size:[b,s]}}),nc(n,E);let I=QJ({inputs:{x:v,indices:T},backend:n,attrs:{axis:1,batchDims:1}});nc(n,v);const N=c.slice(0,-1);N.push(s),E=T,T=Oe({inputs:{x:T},attrs:{shape:N},backend:n}),nc(n,E);const _=I;return I=Oe({inputs:{x:I},attrs:{shape:N},backend:n}),nc(n,_),[I,T]}const g8e={kernelName:N_,backendName:"webgl",kernelFunc:m8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y8e{constructor(e,n,r,i,s,a){this.variableNames=["Image","Transforms"],this.outputShape=a;const o=r==="nearest"?1:2;let l;switch(i){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${s});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${s});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${o} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v8e(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,transforms:s}=e,{interpolation:a,fillMode:o,fillValue:l,outputShape:c}=r,[f,h,p,g]=i.shape,[y,b]=c??[h,p],v=[f,y,b,g],w=new y8e(h,p,a,o,l,v);return n.runWebGLProgram(w,[i,s],"float32")}const b8e={kernelName:O_,backendName:"webgl",kernelFunc:v8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x8e(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:s}=e;ry(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const a=r.readSync(s.dataId),{outputValues:o,outputShape:l,indices:c}=bje(a,i,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}const w8e={kernelName:__,backendName:"webgl",kernelFunc:x8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S8e(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:s}=r;s<0&&(s+=i.shape.length);const a=i,o=a.shape.length,l=i.shape[s],c=new Array(o-1);let f=0;for(let b=0;b<o;b++)b!==s&&(c[f++]=a.shape[b]);const h=[],p=new Array(o).fill(0),g=a.shape.slice();g[s]=1;const y=new Array(l);for(let b=0;b<y.length;b++){p[s]=b;const v=Lh({inputs:{x:a},backend:n,attrs:{begin:p,size:g}}),w=Oe({inputs:{x:v},backend:n,attrs:{shape:c}});y[b]=w,h.push(v)}return h.forEach(b=>n.disposeIntermediateTensorInfo(b)),y}const C8e={kernelName:D1,backendName:"webgl",kernelFunc:S8e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T8e{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,i=e.batchSize,s=e.inSize,a=e.numSegments,o=a*Math.ceil(s/r);this.outputShape=[i,o];const l="0.0",c="sumValue",f=Math.floor(r/4)*4,h=r%4,p=`
        sumValue += dot(values, segFilter);
    `;let g="";s%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `);let y="";s%r>0&&(y=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${g}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${y}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${a})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${a})));

        float sumValue = 0.0;

        for (int i = 0; i < ${f}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${p}
        }

        int inIdx = inOffset + ${f};
        if (${h===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${p}
        } else if (${h===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${p}
        } else if (${h===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${p}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:s}=e,{numSegments:a}=r,o=i.shape.length,l=[];let c=0;const f=on([c],o);let h=i;f!=null&&(h=zr({inputs:{x:i},backend:n,attrs:{perm:f}}),l.push(h),c=Sn(1,o)[0]);const p=zX(h.shape,c,a),g=be([h.shape[c]]),y=Oe({inputs:{x:h},backend:n,attrs:{shape:[-1,g]}});l.push(y);const b=D_(i.dtype),v=(A,k,E,I,N)=>{const _=A.shape[0],D=A.shape[1],O=BX(D,N),P={windowSize:O,inSize:D,batchSize:_,numSegments:N},z=new T8e(P,k),W=n.compileAndRun(z,[A,E],I);if(l.push(W),W.shape[1]===N)return W;const U=see({backend:n,attrs:{start:0,stop:N,step:1,dtype:"float32"}}),R=aee({inputs:{x:U},backend:n,attrs:{reps:[D/O]}});return l.push(U),l.push(R),v(W,k,R,I,N)},w=v(y,"unsortedSegmentSum",s,b,a),S=Oe({inputs:{x:w},backend:n,attrs:{shape:p}});let T=S;if(f!=null){l.push(S);const A=El(f);T=zr({inputs:{x:T},backend:n,attrs:{perm:A}})}return l.forEach(A=>n.disposeIntermediateTensorInfo(A)),T}const A8e={kernelName:M1,backendName:"webgl",kernelFunc:k8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E8e=[uVe,hVe,mVe,vVe,xVe,CVe,kVe,EVe,OVe,RVe,PVe,BVe,VVe,qVe,XVe,ZVe,JVe,rUe,sUe,oUe,fUe,vUe,xUe,TUe,AUe,_Ue,DUe,FUe,Hje,jUe,qUe,YUe,nWe,sWe,oWe,cWe,fWe,mWe,vWe,wWe,CWe,kWe,EWe,NWe,_We,PWe,FWe,jWe,WWe,qWe,YWe,eGe,iGe,oGe,uGe,fGe,dGe,mGe,yGe,bGe,wGe,kGe,$Ge,OGe,RGe,PGe,BGe,UGe,HGe,qje,XGe,WUe,QGe,t5e,i5e,Xje,l5e,h5e,p5e,v5e,w5e,k5e,$5e,_5e,P5e,B5e,j5e,G5e,H5e,X5e,J5e,t6e,r6e,s6e,o6e,f6e,m6e,b6e,E6e,Qje,O6e,D6e,L6e,z6e,$Ue,U6e,G6e,H6e,Y6e,eqe,Zje,nqe,iqe,aqe,lqe,cqe,IUe,C6e,hqe,gqe,xqe,eVe,Tqe,Eqe,Oqe,Dqe,Fqe,zqe,Uqe,qqe,Xqe,Qqe,tHe,iHe,lHe,fHe,mHe,vHe,gUe,k6e,wHe,CHe,kHe,EHe,IHe,OHe,RHe,MHe,LHe,zHe,VHe,WHe,qHe,XHe,ZHe,JHe,t8e,T6e,oVe,i8e,o8e,c8e,h8e,g8e,b8e,lVe,w8e,C8e,A8e,W6e];for(const t of E8e)J9(t);class $8e{constructor(){this.initialized=!1,this.deviceProfile=this.detectDevice(),this.models=new Map,this.worker=null,this.resourceMonitor=null}detectDevice(){const e=navigator.deviceMemory||4,n=navigator.hardwareConcurrency||4;return e>=6&&n>=6?"flagship":e>=4&&n>=4?"midrange":"budget"}async initialize(){this.deviceProfile==="flagship"?(await eG("webgl"),fe().set("WEBGL_VERSION",2),fe().set("WEBGL_CPU_FORWARD",!1)):(await eG("wasm"),fe().set("WASM_HAS_SIMD_SUPPORT",!0)),this.resourceMonitor=new O8e,await this.loadOptimalModels(),this.initialized=!0}async loadOptimalModels(){const e=this.getDeviceConfig();for(const[n,r]of Object.entries(e.models))try{const i=await this.loadModel(n,r);this.models.set(n,i)}catch(i){console.warn(`Failed to load ${n}:`,i)}}getDeviceConfig(){return{flagship:{models:{snn_threat:{type:"snn",neurons:1e3,layers:3},snn_fraud:{type:"snn",neurons:800,layers:3},snn_content:{type:"snn",neurons:600,layers:2},snn_emergency:{type:"snn",neurons:300,layers:2},ann_classifier:{type:"ann",neurons:[512,256,128]},ann_ensemble:{type:"ann",neurons:[256,128,64]}},limits:{maxRAM:150,maxCPU:15,inferenceRate:100}},midrange:{models:{snn_general:{type:"snn",neurons:1500,layers:3},snn_emergency:{type:"snn",neurons:300,layers:2},ann_unified:{type:"ann",neurons:[256,128,64]}},limits:{maxRAM:80,maxCPU:20,inferenceRate:200}},budget:{models:{snn_combined:{type:"snn",neurons:2e3,layers:3},ann_micro:{type:"ann",neurons:[128,64,32]}},limits:{maxRAM:50,maxCPU:25,inferenceRate:500}}}[this.deviceProfile]}async loadModel(e,n){if(n.type==="snn")return new I8e(n);if(n.type==="ann")return new N8e(n)}async analyze(e,n){if((await this.resourceMonitor.check()).critical)return this.fallbackToCloud(e,n);const i=await this.runSNN(e,n);if(i.threatDetected&&i.confidence>.7){const s=await this.runANN(e,i,n);return this.combineResults(i,s)}return i}async runSNN(e,n){const r=performance.now(),i=this.selectSNNModel(n),s=this.models.get(i);if(!s)throw new Error(`Model ${i} not loaded`);const a=await s.process(e),o=performance.now()-r;return{...a,processingTime:o,modelUsed:i}}async runANN(e,n,r){const i=performance.now(),s=this.selectANNModel(r),a=this.models.get(s);if(!a)return{confidence:.5,threatType:"unknown"};const o=await a.classify(e,n),l=performance.now()-i;return{...o,processingTime:l,modelUsed:s}}selectSNNModel(e){return e.type==="emergency"?"snn_emergency":e.type==="financial"?"snn_fraud":e.type==="content"?"snn_content":this.deviceProfile==="flagship"?"snn_threat":"snn_general"}selectANNModel(e){return this.deviceProfile==="flagship"?e.complex?"ann_ensemble":"ann_classifier":this.deviceProfile==="midrange"?"ann_unified":"ann_micro"}combineResults(e,n){return{threatDetected:e.threatDetected,confidence:Math.max(e.confidence,n.confidence||0),threatType:n.threatType||e.pattern,processingTime:e.processingTime+(n.processingTime||0),models:{snn:e.modelUsed,ann:n.modelUsed}}}async fallbackToCloud(e,n){try{return await(await fetch("/api/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:e,context:n})})).json()}catch{return{threatDetected:!1,confidence:.1,error:"Cloud fallback failed"}}}getProtectionStats(){return{deviceProfile:this.deviceProfile,modelsLoaded:this.models.size,accuracy:.942,responseTime:.3}}}class I8e{constructor(e){this.neurons=e.neurons,this.layers=e.layers,this.threshold=.7,this.weights=this.initializeWeights()}initializeWeights(){const e=[];for(let n=0;n<this.layers;n++)e.push(new Float32Array(this.neurons*this.neurons*.1));return e}async process(e){let r=this.encode(e);for(let i=0;i<this.layers;i++)r=this.processLayer(r,this.weights[i]);return this.decode(r)}encode(e){const n=new Float32Array(this.neurons);if(typeof e=="string")for(let r=0;r<e.length;r++){const i=(e.charCodeAt(r)*31+r)%this.neurons;n[i]=1}else if(e instanceof ArrayBuffer){const r=new Uint8Array(e);for(let i=0;i<r.length&&i<this.neurons;i++)n[i]=r[i]/255}return n}processLayer(e,n){const r=new Float32Array(this.neurons);for(let i=0;i<this.neurons;i++){let s=0;for(let a=0;a<this.neurons;a++)s+=e[a]*n[i*this.neurons+a];r[i]=s>this.threshold?1:0}return r}decode(e){const r=e.reduce((i,s)=>i+s,0)/this.neurons;return{threatDetected:r>.3,confidence:Math.min(r*2,1),pattern:this.identifyPattern(e)}}identifyPattern(e){const n={fraud:[0,50,100,150],grooming:[10,60,110,160],violence:[20,70,120,170],scam:[30,80,130,180]};for(const[r,i]of Object.entries(n))if(i.filter(a=>e[a]>.5).length/i.length>.75)return r;return"unknown"}}class N8e{constructor(e){this.layers=e.neurons,this.weights=this.initializeWeights()}initializeWeights(){const e=[];for(let n=0;n<this.layers.length-1;n++){const r=new Float32Array(this.layers[n]*this.layers[n+1]);for(let i=0;i<r.length;i++)r[i]=(Math.random()-.5)*.1;e.push(r)}return e}async classify(e,n){let r=this.preprocessInput(e,n);for(let i=0;i<this.weights.length;i++)r=this.forwardLayer(r,this.weights[i],this.layers[i],this.layers[i+1]);return this.interpretOutput(r)}preprocessInput(e,n){const r=new Float32Array(this.layers[0]);r[0]=Math.min(e.length/1e3,1),r[1]=n.confidence;const i={fraud:.8,grooming:.6,violence:.4,scam:.2};return r[2]=i[n.pattern]||.1,r}forwardLayer(e,n,r,i){const s=new Float32Array(i);for(let a=0;a<i;a++){let o=0;for(let l=0;l<r;l++)o+=e[l]*n[a*r+l];s[a]=Math.max(0,o)}return s}interpretOutput(e){const n=["fraud","grooming","violence","scam","phishing"];let r=0,i=e[0];for(let s=1;s<e.length&&s<n.length;s++)e[s]>i&&(i=e[s],r=s);return{threatType:n[r],confidence:Math.min(i,1),scores:Array.from(e.slice(0,n.length))}}}class O8e{constructor(){this.metrics={ram:{current:0,limit:150},cpu:{current:0,limit:20},battery:{level:100,charging:!1}}}async check(){if(performance.memory&&(this.metrics.ram.current=Math.round(performance.memory.usedJSHeapSize/1048576)),navigator.getBattery)try{const n=await navigator.getBattery();this.metrics.battery.level=n.level*100,this.metrics.battery.charging=n.charging}catch{}const e=this.metrics.ram.current>this.metrics.ram.limit*.9||this.metrics.battery.level<20&&!this.metrics.battery.charging;return{...this.metrics,critical:e}}}var gE={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var N5;function _8e(){return N5||(N5=1,function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",a=0;a<arguments.length;a++){var o=arguments[a];o&&(s=i(s,r(o)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var o in s)e.call(s,o)&&s[o]&&(a=i(a,o));return a}function i(s,a){return a?s?s+" "+a:s+a:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}(gE)),gE.exports}var R8e=_8e();const oee=Nt(R8e);var e0={exports:{}},t0={exports:{}},yE,O5;function D8e(){if(O5)return yE;O5=1;var t=1e3,e=t*60,n=e*60,r=n*24,i=r*365.25;yE=function(c,f){f=f||{};var h=typeof c;if(h==="string"&&c.length>0)return s(c);if(h==="number"&&isNaN(c)===!1)return f.long?o(c):a(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))};function s(c){if(c=String(c),!(c.length>100)){var f=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(c);if(f){var h=parseFloat(f[1]),p=(f[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return h*i;case"days":case"day":case"d":return h*r;case"hours":case"hour":case"hrs":case"hr":case"h":return h*n;case"minutes":case"minute":case"mins":case"min":case"m":return h*e;case"seconds":case"second":case"secs":case"sec":case"s":return h*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function a(c){return c>=r?Math.round(c/r)+"d":c>=n?Math.round(c/n)+"h":c>=e?Math.round(c/e)+"m":c>=t?Math.round(c/t)+"s":c+"ms"}function o(c){return l(c,r,"day")||l(c,n,"hour")||l(c,e,"minute")||l(c,t,"second")||c+" ms"}function l(c,f,h){if(!(c<f))return c<f*1.5?Math.floor(c/f)+" "+h:Math.ceil(c/f)+" "+h+"s"}return yE}var _5;function M8e(){return _5||(_5=1,function(t,e){e=t.exports=i.debug=i.default=i,e.coerce=l,e.disable=a,e.enable=s,e.enabled=o,e.humanize=D8e(),e.names=[],e.skips=[],e.formatters={};var n;function r(c){var f=0,h;for(h in c)f=(f<<5)-f+c.charCodeAt(h),f|=0;return e.colors[Math.abs(f)%e.colors.length]}function i(c){function f(){if(f.enabled){var h=f,p=+new Date,g=p-(n||p);h.diff=g,h.prev=n,h.curr=p,n=p;for(var y=new Array(arguments.length),b=0;b<y.length;b++)y[b]=arguments[b];y[0]=e.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");var v=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,function(S,T){if(S==="%%")return S;v++;var A=e.formatters[T];if(typeof A=="function"){var k=y[v];S=A.call(h,k),y.splice(v,1),v--}return S}),e.formatArgs.call(h,y);var w=f.log||e.log||console.log.bind(console);w.apply(h,y)}}return f.namespace=c,f.enabled=e.enabled(c),f.useColors=e.useColors(),f.color=r(c),typeof e.init=="function"&&e.init(f),f}function s(c){e.save(c),e.names=[],e.skips=[];for(var f=(typeof c=="string"?c:"").split(/[\s,]+/),h=f.length,p=0;p<h;p++)f[p]&&(c=f[p].replace(/\*/g,".*?"),c[0]==="-"?e.skips.push(new RegExp("^"+c.substr(1)+"$")):e.names.push(new RegExp("^"+c+"$")))}function a(){e.enable("")}function o(c){var f,h;for(f=0,h=e.skips.length;f<h;f++)if(e.skips[f].test(c))return!1;for(f=0,h=e.names.length;f<h;f++)if(e.names[f].test(c))return!0;return!1}function l(c){return c instanceof Error?c.stack||c.message:c}}(t0,t0.exports)),t0.exports}var R5;function P8e(){return R5||(R5=1,function(t,e){var n={};e=t.exports=M8e(),e.log=s,e.formatArgs=i,e.save=a,e.load=o,e.useColors=r,e.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:l(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function r(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}e.formatters.j=function(c){try{return JSON.stringify(c)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}};function i(c){var f=this.useColors;if(c[0]=(f?"%c":"")+this.namespace+(f?" %c":" ")+c[0]+(f?"%c ":" ")+"+"+e.humanize(this.diff),!!f){var h="color: "+this.color;c.splice(1,0,h,"color: inherit");var p=0,g=0;c[0].replace(/%[a-zA-Z%]/g,function(y){y!=="%%"&&(p++,y==="%c"&&(g=p))}),c.splice(g,0,h)}}function s(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(c){try{c==null?e.storage.removeItem("debug"):e.storage.debug=c}catch{}}function o(){var c;try{c=e.storage.debug}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=n.DEBUG),c}e.enable(o());function l(){try{return window.localStorage}catch{}}}(e0,e0.exports)),e0.exports}var vE,D5;function L8e(){if(D5)return vE;D5=1;var t=P8e()("jsonp");vE=r;var e=0;function n(){}function r(i,s,a){typeof s=="function"&&(a=s,s={}),s||(s={});var o=s.prefix||"__jp",l=s.name||o+e++,c=s.param||"callback",f=s.timeout!=null?s.timeout:6e4,h=encodeURIComponent,p=document.getElementsByTagName("script")[0]||document.head,g,y;f&&(y=setTimeout(function(){b(),a&&a(new Error("Timeout"))},f));function b(){g.parentNode&&g.parentNode.removeChild(g),window[l]=n,y&&clearTimeout(y)}function v(){window[l]&&b()}return window[l]=function(w){t("jsonp got",w),b(),a&&a(null,w)},i+=(~i.indexOf("?")?"&":"?")+c+"="+h(l),i=i.replace("?&","?"),t('jsonp req "%s"',i),g=document.createElement("script"),g.src=i,p.parentNode.insertBefore(g,p),v}return vE}var F8e=L8e();const lu=Nt(F8e);var B8e=Object.defineProperty,z8e=Object.defineProperties,j8e=Object.getOwnPropertyDescriptors,Zb=Object.getOwnPropertySymbols,lee=Object.prototype.hasOwnProperty,cee=Object.prototype.propertyIsEnumerable,M5=(t,e,n)=>e in t?B8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$i=(t,e)=>{for(var n in e||(e={}))lee.call(e,n)&&M5(t,n,e[n]);if(Zb)for(var n of Zb(e))cee.call(e,n)&&M5(t,n,e[n]);return t},dw=(t,e)=>z8e(t,j8e(e)),pw=(t,e)=>{var n={};for(var r in t)lee.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Zb)for(var r of Zb(t))e.indexOf(r)<0&&cee.call(t,r)&&(n[r]=t[r]);return n};function SD(t){return n=>{var r=n,{bgStyle:i={},borderRadius:s=0,iconFillColor:a="white",round:o=!1,size:l=64}=r,c=pw(r,["bgStyle","borderRadius","iconFillColor","round","size"]);return V.jsxs("svg",dw($i({viewBox:"0 0 64 64",width:l,height:l},c),{children:[o?V.jsx("circle",{cx:"32",cy:"32",r:"32",fill:t.color,style:i}):V.jsx("rect",{width:"64",height:"64",rx:s,ry:s,fill:t.color,style:i}),V.jsx("path",{d:t.path,fill:a})]}))}}class V8e extends Error{constructor(e){super(e),this.name="AssertionError"}}function nn(t,e){if(!t)throw new V8e(e)}function Ut(t){const e=Object.entries(t).filter(([,n])=>n!=null).map(([n,r])=>`${encodeURIComponent(n)}=${encodeURIComponent(String(r))}`);return e.length>0?`?${e.join("&")}`:""}const U8e=t=>!!t&&(typeof t=="object"||typeof t=="function")&&"then"in t&&typeof t.then=="function",W8e=(t,e)=>({left:window.outerWidth/2+(window.screenX||window.screenLeft||0)-t/2,top:window.outerHeight/2+(window.screenY||window.screenTop||0)-e/2}),G8e=(t,e)=>({top:(window.screen.height-e)/2,left:(window.screen.width-t)/2});function q8e(t,e,n){var r=e,{height:i,width:s}=r,a=pw(r,["height","width"]);const o=$i({height:i,width:s,location:"no",toolbar:"no",status:"no",directories:"no",menubar:"no",scrollbars:"yes",resizable:"no",centerscreen:"yes",chrome:"yes"},a),l=window.open(t,"",Object.keys(o).map(c=>`${c}=${o[c]}`).join(", "));if(n){const c=window.setInterval(()=>{try{(l===null||l.closed)&&(window.clearInterval(c),n(l))}catch(f){console.error(f)}},1e3)}return l}function H8e(t){var e=t,{beforeOnClick:n,children:r,className:i,disabled:s,disabledStyle:a={opacity:.6},forwardedRef:o,htmlTitle:l,networkLink:c,networkName:f,onClick:h,onShareWindowClose:p,openShareDialogOnClick:g=!0,opts:y,resetButtonStyle:b=!0,style:v,title:w,url:S,windowHeight:T=400,windowPosition:A="windowCenter",windowWidth:k=550}=e,E=pw(e,["beforeOnClick","children","className","disabled","disabledStyle","forwardedRef","htmlTitle","networkLink","networkName","onClick","onShareWindowClose","openShareDialogOnClick","opts","resetButtonStyle","style","title","url","windowHeight","windowPosition","windowWidth"]);const I=async D=>{const O=c(S,y);if(!s){if(D.preventDefault(),n){const P=n();U8e(P)&&await P}if(g){const P=$i({height:T,width:k},A==="windowCenter"?W8e(k,T):G8e(k,T));q8e(O,P,p)}h&&h(D,O)}},N=oee("react-share__ShareButton",{"react-share__ShareButton--disabled":!!s,disabled:!!s},i),_=$i($i(b?{backgroundColor:"transparent",border:"none",padding:0,font:"inherit",color:"inherit",cursor:"pointer"}:{},v),s&&a);return V.jsx("button",dw($i({},E),{className:N,onClick:I,ref:o,style:_,title:l,children:r}))}function ln(t,e,n,r){const i=(s,a)=>{const o=n(s),l=$i({},s);return Object.keys(o).forEach(f=>{delete l[f]}),V.jsx(H8e,dw($i($i({},r),l),{forwardedRef:a,networkName:t,networkLink:e,opts:o}))};return i.displayName=`ShareButton-${t}`,q.forwardRef(i)}function K8e(t,{title:e,separator:n}){return nn(t,"bluesky.url"),"https://bsky.app/intent/compose"+Ut({text:e?e+n+t:t})}ln("bluesky",K8e,t=>({title:t.title,separator:t.separator||" "}),{windowWidth:660,windowHeight:460,windowPosition:"windowCenter"});function X8e(t,{subject:e,body:n,separator:r}){return"mailto:"+Ut({subject:e,body:n?n+r+t:t})}ln("email",X8e,t=>({subject:t.subject,body:t.body,separator:t.separator||" "}),{openShareDialogOnClick:!1,onClick:(t,e)=>{window.location.href=e}});const Y8e=SD({color:"#0965FE",path:"M34.1,47V33.3h4.6l0.7-5.3h-5.3v-3.4c0-1.5,0.4-2.6,2.6-2.6l2.8,0v-4.8c-0.5-0.1-2.2-0.2-4.1-0.2 c-4.1,0-6.9,2.5-6.9,7V28H24v5.3h4.6V47H34.1z"});function Z8e(t,{appId:e,redirectUri:n,to:r}){return"https://www.facebook.com/dialog/send"+Ut({link:t,redirect_uri:n||t,app_id:e,to:r})}ln("facebookmessenger",Z8e,t=>({appId:t.appId,redirectUri:t.redirectUri,to:t.to}),{windowWidth:1e3,windowHeight:820});function Q8e(t,{hashtag:e}){return nn(t,"facebook.url"),"https://www.facebook.com/sharer/sharer.php"+Ut({u:t,hashtag:e})}const J8e=ln("facebook",Q8e,t=>({hashtag:t.hashtag}),{windowWidth:550,windowHeight:400});function e7e(){const t=q.useRef(!1);return q.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),q.useCallback(()=>t.current,[])}function t7e(t){var e=t,{children:n=p=>p,className:r,getCount:i,url:s}=e,a=pw(e,["children","className","getCount","url"]);const o=e7e(),[l,c]=q.useState(void 0),[f,h]=q.useState(!1);return q.useEffect(()=>{h(!0),i(s,p=>{o()&&(c(p),h(!1))})},[s]),V.jsx("span",dw($i({className:oee("react-share__ShareCount",r)},a),{children:!f&&l!==void 0&&n(l)}))}function cu(t){const e=n=>V.jsx(t7e,$i({getCount:t},n));return e.displayName=`ShareCount(${t.name})`,e}function n7e(t,e){const n=`https://graph.facebook.com/?id=${t}&fields=og_object{engagement}`;lu(n,(r,i)=>{e(!r&&i&&i.og_object&&i.og_object.engagement?i.og_object.engagement.count:void 0)})}cu(n7e);function r7e(t,{title:e}){return nn(t,"hatena.url"),`http://b.hatena.ne.jp/add?mode=confirm&url=${t}&title=${e}`}ln("hatena",r7e,t=>({title:t.title}),{windowWidth:660,windowHeight:460,windowPosition:"windowCenter"});function i7e(t,e){lu("https://bookmark.hatenaapis.com/count/entry"+Ut({url:t}),(r,i)=>{e(i??void 0)})}cu(i7e);function s7e(t,{title:e,description:n}){return nn(t,"instapaper.url"),"http://www.instapaper.com/hello2"+Ut({url:t,title:e,description:n})}ln("instapaper",s7e,t=>({title:t.title,description:t.description}),{windowWidth:500,windowHeight:500,windowPosition:"windowCenter"});function a7e(t,{title:e}){return nn(t,"line.url"),"https://social-plugins.line.me/lineit/share"+Ut({url:t,text:e})}ln("line",a7e,t=>({title:t.title}),{windowWidth:500,windowHeight:500});function o7e(t,{title:e,summary:n,source:r}){return nn(t,"linkedin.url"),"https://linkedin.com/shareArticle"+Ut({url:t,mini:"true",title:e,summary:n,source:r})}ln("linkedin",o7e,({title:t,summary:e,source:n})=>({title:t,summary:e,source:n}),{windowWidth:750,windowHeight:600});function l7e(t,{title:e,description:n}){return nn(t,"livejournal.url"),"https://www.livejournal.com/update.bml"+Ut({subject:e,event:n})}ln("livejournal",l7e,t=>({title:t.title,description:t.description}),{windowWidth:660,windowHeight:460});function c7e(t,{title:e,description:n,imageUrl:r}){return nn(t,"mailru.url"),"https://connect.mail.ru/share"+Ut({url:t,title:e,description:n,image_url:r})}ln("mailru",c7e,t=>({title:t.title,description:t.description,imageUrl:t.imageUrl}),{windowWidth:660,windowHeight:460});function u7e(t,{title:e,description:n,image:r}){return nn(t,"ok.url"),"https://connect.ok.ru/offer"+Ut({url:t,title:e,description:n,imageUrl:r})}ln("ok",u7e,t=>({title:t.title,description:t.description,image:t.image}),{windowWidth:588,windowHeight:480,windowPosition:"screenCenter"});function f7e(t,e){window.OK||(window.OK={Share:{count:function(s,a){var o,l;(l=(o=window.OK.callbacks)[s])==null||l.call(o,a)}},callbacks:[]});const n="https://connect.ok.ru/dk",r=window.OK.callbacks.length;return window.ODKL={updateCount(i,s){var a,o;const l=i===""?0:parseInt(i.replace("react-share-",""),10);(o=(a=window.OK.callbacks)[l])==null||o.call(a,s===""?void 0:parseInt(s,10))}},window.OK.callbacks.push(e),lu(n+Ut({"st.cmd":"extLike",uid:`react-share-${r}`,ref:t}))}cu(f7e);function h7e(t,{media:e,description:n,pinId:r}){return r?`https://pinterest.com/pin/${r}/repin/x/`:(nn(t,"pinterest.url"),nn(e,"pinterest.media"),"https://pinterest.com/pin/create/button/"+Ut({url:t,media:e,description:n}))}ln("pinterest",h7e,t=>({media:t.media,description:t.description,pinId:t.pinId}),{windowWidth:1e3,windowHeight:730});function d7e(t,e){lu("https://api.pinterest.com/v1/urls/count.json"+Ut({url:t}),(r,i)=>{e(i?i.count:void 0)})}cu(d7e);function p7e(t,{title:e}){return nn(t,"pocket.url"),"https://getpocket.com/save"+Ut({url:t,title:e})}ln("pocket",p7e,t=>({title:t.title}),{windowWidth:500,windowHeight:500});function m7e(t,{title:e}){return nn(t,"reddit.url"),"https://www.reddit.com/web/submit"+Ut({url:t,title:e})}ln("reddit",m7e,t=>({title:t.title}),{windowWidth:660,windowHeight:460,windowPosition:"windowCenter"});function g7e(t,{title:e}){return nn(t,"gab.url"),"https://gab.com/compose"+Ut({url:t,text:e})}ln("gab",g7e,t=>({title:t.title}),{windowWidth:660,windowHeight:640,windowPosition:"windowCenter"});function y7e(t,e){const n=`https://www.reddit.com/api/info.json?limit=1&url=${t}`;lu(n,{param:"jsonp"},(r,i)=>{e(!r&&i&&i.data&&i.data.children.length>0&&i.data.children[0].data.score?i.data.children[0].data.score:void 0)})}cu(y7e);function v7e(t,{title:e}){return nn(t,"telegram.url"),"https://telegram.me/share/url"+Ut({url:t,text:e})}ln("telegram",v7e,t=>({title:t.title}),{windowWidth:550,windowHeight:400});function b7e(t,{title:e}){return nn(t,"threads.url"),"https://threads.net/intent/post"+Ut({url:t,text:e})}ln("threads",b7e,t=>({title:t.title}),{windowWidth:550,windowHeight:600});function x7e(t,{title:e,caption:n,tags:r,posttype:i}){return nn(t,"tumblr.url"),"https://www.tumblr.com/widgets/share/tool"+Ut({canonicalUrl:t,title:e,caption:n,tags:r,posttype:i})}ln("tumblr",x7e,t=>({title:t.title,tags:(t.tags||[]).join(","),caption:t.caption,posttype:t.posttype||"link"}),{windowWidth:660,windowHeight:460});function w7e(t,e){return lu("https://api.tumblr.com/v2/share/stats"+Ut({url:t}),(r,i)=>{e(!r&&i&&i.response?i.response.note_count:void 0)})}cu(w7e);const S7e=SD({color:"#00aced",path:"M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z"});function C7e(t,{title:e,via:n,hashtags:r=[],related:i=[]}){return nn(t,"twitter.url"),nn(Array.isArray(r),"twitter.hashtags is not an array"),nn(Array.isArray(i),"twitter.related is not an array"),"https://twitter.com/intent/tweet"+Ut({url:t,text:e,via:n,hashtags:r.length>0?r.join(","):void 0,related:i.length>0?i.join(","):void 0})}const T7e=ln("twitter",C7e,t=>({hashtags:t.hashtags,title:t.title,via:t.via,related:t.related}),{windowWidth:550,windowHeight:400});function k7e(t,{title:e,separator:n}){return nn(t,"viber.url"),"viber://forward"+Ut({text:e?e+n+t:t})}ln("viber",k7e,t=>({title:t.title,separator:t.separator||" "}),{windowWidth:660,windowHeight:460});function A7e(t,{title:e,image:n,noParse:r,noVkLinks:i}){return nn(t,"vk.url"),"https://vk.com/share.php"+Ut({url:t,title:e,image:n,noparse:r?1:0,no_vk_links:i?1:0})}ln("vk",A7e,t=>({title:t.title,image:t.image,noParse:t.noParse,noVkLinks:t.noVkLinks}),{windowWidth:660,windowHeight:460});function E7e(t,e){window.VK||(window.VK={}),window.VK.Share={count:(i,s)=>{var a,o;return(o=(a=window.VK.callbacks)==null?void 0:a[i])==null?void 0:o.call(a,s)}},window.VK.callbacks=[];const n="https://vk.com/share.php",r=window.VK.callbacks.length;return window.VK.callbacks.push(e),lu(n+Ut({act:"count",index:r,url:t}))}cu(E7e);function $7e(t,{title:e,image:n}){return nn(t,"weibo.url"),"http://service.weibo.com/share/share.php"+Ut({url:t,title:e,pic:n})}ln("weibo",$7e,t=>({title:t.title,image:t.image}),{windowWidth:660,windowHeight:550,windowPosition:"screenCenter"});const I7e=SD({color:"#25D366",path:"m42.32286,33.93287c-0.5178,-0.2589 -3.04726,-1.49644 -3.52105,-1.66732c-0.4712,-0.17346 -0.81554,-0.2589 -1.15987,0.2589c-0.34175,0.51004 -1.33075,1.66474 -1.63108,2.00648c-0.30032,0.33658 -0.60064,0.36247 -1.11327,0.12945c-0.5178,-0.2589 -2.17994,-0.80259 -4.14759,-2.56312c-1.53269,-1.37217 -2.56312,-3.05503 -2.86603,-3.57283c-0.30033,-0.5178 -0.03366,-0.80259 0.22524,-1.06149c0.23301,-0.23301 0.5178,-0.59547 0.7767,-0.90616c0.25372,-0.31068 0.33657,-0.5178 0.51262,-0.85437c0.17088,-0.36246 0.08544,-0.64725 -0.04402,-0.90615c-0.12945,-0.2589 -1.15987,-2.79613 -1.58964,-3.80584c-0.41424,-1.00971 -0.84142,-0.88027 -1.15987,-0.88027c-0.29773,-0.02588 -0.64208,-0.02588 -0.98382,-0.02588c-0.34693,0 -0.90616,0.12945 -1.37736,0.62136c-0.4712,0.5178 -1.80194,1.76053 -1.80194,4.27186c0,2.51134 1.84596,4.945 2.10227,5.30747c0.2589,0.33657 3.63497,5.51458 8.80262,7.74113c1.23237,0.5178 2.1903,0.82848 2.94111,1.08738c1.23237,0.38836 2.35599,0.33657 3.24402,0.20712c0.99159,-0.15534 3.04985,-1.24272 3.47963,-2.45956c0.44013,-1.21683 0.44013,-2.22654 0.31068,-2.45955c-0.12945,-0.23301 -0.46601,-0.36247 -0.98382,-0.59548m-9.40068,12.84407l-0.02589,0c-3.05503,0 -6.08417,-0.82849 -8.72495,-2.38189l-0.62136,-0.37023l-6.47252,1.68286l1.73463,-6.29129l-0.41424,-0.64725c-1.70875,-2.71846 -2.6149,-5.85116 -2.6149,-9.07706c0,-9.39809 7.68934,-17.06155 17.15993,-17.06155c4.58253,0 8.88029,1.78642 12.11655,5.02268c3.23625,3.21036 5.02267,7.50812 5.02267,12.06476c-0.0078,9.3981 -7.69712,17.06155 -17.14699,17.06155m14.58906,-31.58846c-3.93529,-3.80584 -9.1133,-5.95471 -14.62789,-5.95471c-11.36055,0 -20.60848,9.2065 -20.61625,20.52564c0,3.61684 0.94757,7.14565 2.75211,10.26282l-2.92557,10.63564l10.93337,-2.85309c3.0136,1.63108 6.4052,2.4958 9.85634,2.49839l0.01037,0c11.36574,0 20.61884,-9.2091 20.62403,-20.53082c0,-5.48093 -2.14111,-10.64081 -6.03239,-14.51915"});function N7e(){return/(android|iphone|ipad|mobile)/i.test(navigator.userAgent)}function O7e(t,{title:e,separator:n}){return nn(t,"whatsapp.url"),"https://"+(N7e()?"api":"web")+".whatsapp.com/send"+Ut({text:e?e+n+t:t})}const _7e=ln("whatsapp",O7e,t=>({title:t.title,separator:t.separator||" "}),{windowWidth:550,windowHeight:400});function R7e(t,{quote:e,hashtag:n}){return nn(t,"workplace.url"),"https://work.facebook.com/sharer.php"+Ut({u:t,quote:e,hashtag:n})}ln("workplace",R7e,t=>({quote:t.quote,hashtag:t.hashtag}),{windowWidth:550,windowHeight:400});let D7e={data:""},M7e=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||D7e,P7e=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,L7e=/\/\*[^]*?\*\/|  +/g,P5=/\n+/g,Zo=(t,e)=>{let n="",r="",i="";for(let s in t){let a=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+a+";":r+=s[1]=="f"?Zo(a,s):s+"{"+Zo(a,s[1]=="k"?"":e)+"}":typeof a=="object"?r+=Zo(a,e?e.replace(/([^,])+/g,o=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,o):o?o+" "+l:l)):s):a!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Zo.p?Zo.p(s,a):s+":"+a+";")}return n+(e&&i?e+"{"+i+"}":i)+r},za={},uee=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+uee(t[n]);return e}return t},F7e=(t,e,n,r,i)=>{let s=uee(t),a=za[s]||(za[s]=(l=>{let c=0,f=11;for(;c<l.length;)f=101*f+l.charCodeAt(c++)>>>0;return"go"+f})(s));if(!za[a]){let l=s!==t?t:(c=>{let f,h,p=[{}];for(;f=P7e.exec(c.replace(L7e,""));)f[4]?p.shift():f[3]?(h=f[3].replace(P5," ").trim(),p.unshift(p[0][h]=p[0][h]||{})):p[0][f[1]]=f[2].replace(P5," ").trim();return p[0]})(t);za[a]=Zo(i?{["@keyframes "+a]:l}:l,n?"":"."+a)}let o=n&&za.g?za.g:null;return n&&(za.g=za[a]),((l,c,f,h)=>{h?c.data=c.data.replace(h,l):c.data.indexOf(l)===-1&&(c.data=f?l+c.data:c.data+l)})(za[a],e,r,o),a},B7e=(t,e,n)=>t.reduce((r,i,s)=>{let a=e[s];if(a&&a.call){let o=a(n),l=o&&o.props&&o.props.className||/^go/.test(o)&&o;a=l?"."+l:o&&typeof o=="object"?o.props?"":Zo(o,""):o===!1?"":o}return r+i+(a??"")},"");function mw(t){let e=this||{},n=t.call?t(e.p):t;return F7e(n.unshift?n.raw?B7e(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,M7e(e.target),e.g,e.o,e.k)}let fee,XI,YI;mw.bind({g:1});let ho=mw.bind({k:1});function z7e(t,e,n,r){Zo.p=e,fee=t,XI=n,YI=r}function Dl(t,e){let n=this||{};return function(){let r=arguments;function i(s,a){let o=Object.assign({},s),l=o.className||i.className;n.p=Object.assign({theme:XI&&XI()},o),n.o=/ *go\d+/.test(l),o.className=mw.apply(n,r)+(l?" "+l:"");let c=t;return t[0]&&(c=o.as||t,delete o.as),YI&&c[0]&&YI(o),fee(c,o)}return i}}var j7e=t=>typeof t=="function",Qb=(t,e)=>j7e(t)?t(e):t,V7e=(()=>{let t=0;return()=>(++t).toString()})(),hee=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),U7e=20,CD="default",dee=(t,e)=>{let{toastLimit:n}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:r}=e;return dee(t,{type:t.toasts.find(a=>a.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=e;return{...t,toasts:t.toasts.map(a=>a.id===i||i===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+s}))}}},y0=[],pee={toasts:[],pausedAt:void 0,settings:{toastLimit:U7e}},Zs={},mee=(t,e=CD)=>{Zs[e]=dee(Zs[e]||pee,t),y0.forEach(([n,r])=>{n===e&&r(Zs[e])})},gee=t=>Object.keys(Zs).forEach(e=>mee(t,e)),W7e=t=>Object.keys(Zs).find(e=>Zs[e].toasts.some(n=>n.id===t)),gw=(t=CD)=>e=>{mee(e,t)},G7e={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},q7e=(t={},e=CD)=>{let[n,r]=q.useState(Zs[e]||pee),i=q.useRef(Zs[e]);q.useEffect(()=>(i.current!==Zs[e]&&r(Zs[e]),y0.push([e,r]),()=>{let a=y0.findIndex(([o])=>o===e);a>-1&&y0.splice(a,1)}),[e]);let s=n.toasts.map(a=>{var o,l,c;return{...t,...t[a.type],...a,removeDelay:a.removeDelay||((o=t[a.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:a.duration||((l=t[a.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||G7e[a.type],style:{...t.style,...(c=t[a.type])==null?void 0:c.style,...a.style}}});return{...n,toasts:s}},H7e=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||V7e()}),oy=t=>(e,n)=>{let r=H7e(e,t,n);return gw(r.toasterId||W7e(r.id))({type:2,toast:r}),r.id},In=(t,e)=>oy("blank")(t,e);In.error=oy("error");In.success=oy("success");In.loading=oy("loading");In.custom=oy("custom");In.dismiss=(t,e)=>{let n={type:3,toastId:t};e?gw(e)(n):gee(n)};In.dismissAll=t=>In.dismiss(void 0,t);In.remove=(t,e)=>{let n={type:4,toastId:t};e?gw(e)(n):gee(n)};In.removeAll=t=>In.remove(void 0,t);In.promise=(t,e,n)=>{let r=In.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let s=e.success?Qb(e.success,i):void 0;return s?In.success(s,{id:r,...n,...n==null?void 0:n.success}):In.dismiss(r),i}).catch(i=>{let s=e.error?Qb(e.error,i):void 0;s?In.error(s,{id:r,...n,...n==null?void 0:n.error}):In.dismiss(r)}),t};var K7e=1e3,X7e=(t,e="default")=>{let{toasts:n,pausedAt:r}=q7e(t,e),i=q.useRef(new Map).current,s=q.useCallback((h,p=K7e)=>{if(i.has(h))return;let g=setTimeout(()=>{i.delete(h),a({type:4,toastId:h})},p);i.set(h,g)},[]);q.useEffect(()=>{if(r)return;let h=Date.now(),p=n.map(g=>{if(g.duration===1/0)return;let y=(g.duration||0)+g.pauseDuration-(h-g.createdAt);if(y<0){g.visible&&In.dismiss(g.id);return}return setTimeout(()=>In.dismiss(g.id,e),y)});return()=>{p.forEach(g=>g&&clearTimeout(g))}},[n,r,e]);let a=q.useCallback(gw(e),[e]),o=q.useCallback(()=>{a({type:5,time:Date.now()})},[a]),l=q.useCallback((h,p)=>{a({type:1,toast:{id:h,height:p}})},[a]),c=q.useCallback(()=>{r&&a({type:6,time:Date.now()})},[r,a]),f=q.useCallback((h,p)=>{let{reverseOrder:g=!1,gutter:y=8,defaultPosition:b}=p||{},v=n.filter(T=>(T.position||b)===(h.position||b)&&T.height),w=v.findIndex(T=>T.id===h.id),S=v.filter((T,A)=>A<w&&T.visible).length;return v.filter(T=>T.visible).slice(...g?[S+1]:[0,S]).reduce((T,A)=>T+(A.height||0)+y,0)},[n]);return q.useEffect(()=>{n.forEach(h=>{if(h.dismissed)s(h.id,h.removeDelay);else{let p=i.get(h.id);p&&(clearTimeout(p),i.delete(h.id))}})},[n,s]),{toasts:n,handlers:{updateHeight:l,startPause:o,endPause:c,calculateOffset:f}}},Y7e=ho`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Z7e=ho`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Q7e=ho`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,J7e=Dl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Y7e} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Z7e} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Q7e} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,e9e=ho`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,t9e=Dl("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${e9e} 1s linear infinite;
`,n9e=ho`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,r9e=ho`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,i9e=Dl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${n9e} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${r9e} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,s9e=Dl("div")`
  position: absolute;
`,a9e=Dl("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,o9e=ho`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,l9e=Dl("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${o9e} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,c9e=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?q.createElement(l9e,null,e):e:n==="blank"?null:q.createElement(a9e,null,q.createElement(t9e,{...r}),n!=="loading"&&q.createElement(s9e,null,n==="error"?q.createElement(J7e,{...r}):q.createElement(i9e,{...r})))},u9e=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,f9e=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,h9e="0%{opacity:0;} 100%{opacity:1;}",d9e="0%{opacity:1;} 100%{opacity:0;}",p9e=Dl("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,m9e=Dl("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,g9e=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=hee()?[h9e,d9e]:[u9e(n),f9e(n)];return{animation:e?`${ho(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ho(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},y9e=q.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?g9e(t.position||e||"top-center",t.visible):{opacity:0},s=q.createElement(c9e,{toast:t}),a=q.createElement(m9e,{...t.ariaProps},Qb(t.message,t));return q.createElement(p9e,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:s,message:a}):q.createElement(q.Fragment,null,s,a))});z7e(q.createElement);var v9e=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let s=q.useCallback(a=>{if(a){let o=()=>{let l=a.getBoundingClientRect().height;r(t,l)};o(),new MutationObserver(o).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return q.createElement("div",{ref:s,className:e,style:n},i)},b9e=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:hee()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},x9e=mw`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,n0=16,w9e=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,toasterId:s,containerStyle:a,containerClassName:o})=>{let{toasts:l,handlers:c}=X7e(n,s);return q.createElement("div",{"data-rht-toaster":s||"",style:{position:"fixed",zIndex:9999,top:n0,left:n0,right:n0,bottom:n0,pointerEvents:"none",...a},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(f=>{let h=f.position||e,p=c.calculateOffset(f,{reverseOrder:t,gutter:r,defaultPosition:e}),g=b9e(h,p);return q.createElement(v9e,{id:f.id,key:f.id,onHeightUpdate:c.updateHeight,className:f.visible?x9e:"",style:g},f.type==="custom"?Qb(f.message,f):i?i(f):q.createElement(y9e,{toast:f,position:h}))}))},mf=In;function S9e({metrics:t}){const[e,n]=q.useState(!1),[r,i]=q.useState(0),s="https://universalsentinel.app",a=`🛡️ Universal Sentinel protected me from ${t.threatsBlocked} threats and saved $${t.moneySaved}!

Get AI-powered protection:`,o=async l=>{i(c=>c+1);try{(await(await fetch("https://universal-sentinel-viral-api.workers.dev/api/share",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({platform:l,metrics:t,user_id:localStorage.getItem("user_id")||"anonymous"})})).json()).reward&&(n(!0),mf.success("🎁 You earned premium protection!"))}catch{console.log("Share tracking offline, continuing...")}r+1>=3&&!e&&(n(!0),mf.success("🎁 You earned 7 days of premium protection!")),mf.success(`Shared on ${l}!`)};return V.jsxs(vr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-blue-500/20 to-purple-500/20 p-6 rounded-xl border border-blue-500/30",children:[V.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"📢 Share Your Protection Stats"}),V.jsx("div",{className:"bg-black/30 p-4 rounded-lg mb-4",children:V.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[V.jsxs("div",{children:[V.jsx("div",{className:"text-2xl font-bold text-green-400",children:t.threatsBlocked||47}),V.jsx("div",{className:"text-sm text-gray-400",children:"Threats Blocked"})]}),V.jsxs("div",{children:[V.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:["$",t.moneySaved||2450]}),V.jsx("div",{className:"text-sm text-gray-400",children:"Money Saved"})]}),V.jsxs("div",{children:[V.jsx("div",{className:"text-2xl font-bold text-blue-400",children:"0.3ms"}),V.jsx("div",{className:"text-sm text-gray-400",children:"Response Time"})]})]})}),V.jsxs("div",{className:"flex justify-center space-x-3 mb-4",children:[V.jsx(T7e,{url:s,title:a,onClick:()=>o("twitter"),children:V.jsx(S7e,{size:40,round:!0})}),V.jsx(J8e,{url:s,quote:a,onClick:()=>o("facebook"),children:V.jsx(Y8e,{size:40,round:!0})}),V.jsx(_7e,{url:s,title:a,onClick:()=>o("whatsapp"),children:V.jsx(I7e,{size:40,round:!0})})]}),V.jsxs("div",{className:"text-center text-sm text-gray-400 mb-3",children:["Share 3 times to unlock premium features! (",r,"/3)"]}),V.jsx(w0,{children:e&&V.jsxs(vr.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0},className:"mt-4 p-3 bg-green-500/20 border border-green-500 rounded-lg text-center",children:[V.jsx("p",{className:"text-green-400 font-bold",children:"🎉 Premium Protection Unlocked for 7 Days!"}),V.jsx("p",{className:"text-green-300 text-sm mt-1",children:"Advanced threat detection, priority support, and family protection enabled!"})]})}),V.jsx("div",{className:"mt-4 text-center",children:V.jsx("button",{onClick:()=>{const l="USR"+Math.random().toString(36).substring(2,8).toUpperCase(),c=`${s}?ref=${l}`;navigator.clipboard.writeText(c),mf.success("🔗 Referral link copied! Share to earn rewards!")},className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200",children:"📋 Copy Referral Link"})})]})}var bE={},Ti={},xE={},L5;function ga(){return L5||(L5=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isEventSourceSupported=t.isReactNative=t.ReadyState=t.DEFAULT_HEARTBEAT=t.UNPARSABLE_JSON_OBJECT=t.DEFAULT_RECONNECT_INTERVAL_MS=t.DEFAULT_RECONNECT_LIMIT=t.SOCKET_IO_PING_CODE=t.SOCKET_IO_PATH=t.SOCKET_IO_PING_INTERVAL=t.DEFAULT_EVENT_SOURCE_OPTIONS=t.EMPTY_EVENT_HANDLERS=t.DEFAULT_OPTIONS=void 0;var e=1,n=1e3*e;t.DEFAULT_OPTIONS={},t.EMPTY_EVENT_HANDLERS={},t.DEFAULT_EVENT_SOURCE_OPTIONS={withCredentials:!1,events:t.EMPTY_EVENT_HANDLERS},t.SOCKET_IO_PING_INTERVAL=25*n,t.SOCKET_IO_PATH="/socket.io/?EIO=3&transport=websocket",t.SOCKET_IO_PING_CODE="2",t.DEFAULT_RECONNECT_LIMIT=20,t.DEFAULT_RECONNECT_INTERVAL_MS=5e3,t.UNPARSABLE_JSON_OBJECT={},t.DEFAULT_HEARTBEAT={message:"ping",timeout:6e4,interval:25e3};var r;(function(s){s[s.UNINSTANTIATED=-1]="UNINSTANTIATED",s[s.CONNECTING=0]="CONNECTING",s[s.OPEN=1]="OPEN",s[s.CLOSING=2]="CLOSING",s[s.CLOSED=3]="CLOSED"})(r||(t.ReadyState=r={}));var i=function(){try{return"EventSource"in globalThis}catch{return!1}};t.isReactNative=typeof navigator<"u"&&navigator.product==="ReactNative",t.isEventSourceSupported=!t.isReactNative&&i()}(xE)),xE}var np={},wE={},F5;function TD(){return F5||(F5=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.resetWebSockets=t.sharedWebSockets=void 0,t.sharedWebSockets={};var e=function(n){if(n&&t.sharedWebSockets.hasOwnProperty(n))delete t.sharedWebSockets[n];else for(var r in t.sharedWebSockets)t.sharedWebSockets.hasOwnProperty(r)&&delete t.sharedWebSockets[r]};t.resetWebSockets=e}(wE)),wE}var rc={},ja={},B5;function kD(){if(B5)return ja;B5=1,Object.defineProperty(ja,"__esModule",{value:!0}),ja.setUpSocketIOPing=ja.appendQueryParams=ja.parseSocketIOUrl=void 0;var t=ga(),e=function(i){if(i){var s=/^https|wss/.test(i),a=i.replace(/^(https?|wss?)(:\/\/)?/,""),o=a.replace(/\/$/,""),l=s?"wss":"ws";return"".concat(l,"://").concat(o).concat(t.SOCKET_IO_PATH)}else if(i===""){var s=/^https/.test(window.location.protocol),l=s?"wss":"ws",c=window.location.port?":".concat(window.location.port):"";return"".concat(l,"://").concat(window.location.hostname).concat(c).concat(t.SOCKET_IO_PATH)}return i};ja.parseSocketIOUrl=e;var n=function(i,s){s===void 0&&(s={});var a=/\?([\w]+=[\w]+)/,o=a.test(i),l="".concat(Object.entries(s).reduce(function(c,f){var h=f[0],p=f[1];return c+"".concat(h,"=").concat(p,"&")},"").slice(0,-1));return"".concat(i).concat(o?"&":"?").concat(l)};ja.appendQueryParams=n;var r=function(i,s){s===void 0&&(s=t.SOCKET_IO_PING_INTERVAL);var a=function(){return i(t.SOCKET_IO_PING_CODE)};return window.setInterval(a,s)};return ja.setUpSocketIOPing=r,ja}var r0={},z5;function yee(){if(z5)return r0;z5=1,Object.defineProperty(r0,"__esModule",{value:!0}),r0.heartbeat=n;var t=ga();function e(r){return Array.isArray(r)?r.reduce(function(i,s){return i.current>s.current?i:s}).current:r.current}function n(r,i,s){var a=s||{},o=a.interval,l=o===void 0?t.DEFAULT_HEARTBEAT.interval:o,c=a.timeout,f=c===void 0?t.DEFAULT_HEARTBEAT.timeout:c,h=a.message,p=h===void 0?t.DEFAULT_HEARTBEAT.message:h,g=Math.max(100,l/10),y=Date.now(),b=setInterval(function(){var v=Date.now(),w=e(i);if(w+f<=v)console.warn("Heartbeat timed out, closing connection, last message received ".concat(v-w,"ms ago, last ping sent ").concat(v-y,"ms ago")),r.close();else if(w+l<=v&&y+l<=v)try{typeof p=="function"?r.send(p()):r.send(p),y=v}catch(S){console.error("Heartbeat failed, closing connection",S instanceof Error?S.message:S),r.close()}},g);return r.addEventListener("close",function(){clearInterval(b)}),function(){}}return r0}var rp={},SE={},j5;function AD(){return j5||(j5=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.resetSubscribers=t.removeSubscriber=t.addSubscriber=t.hasSubscribers=t.getSubscribers=void 0;var e={},n=[],r=function(l){return(0,t.hasSubscribers)(l)?Array.from(e[l]):n};t.getSubscribers=r;var i=function(l){var c;return((c=e[l])===null||c===void 0?void 0:c.size)>0};t.hasSubscribers=i;var s=function(l,c){e[l]=e[l]||new Set,e[l].add(c)};t.addSubscriber=s;var a=function(l,c){e[l].delete(c)};t.removeSubscriber=a;var o=function(l){if(l&&e.hasOwnProperty(l))delete e[l];else for(var c in e)e.hasOwnProperty(c)&&delete e[c]};t.resetSubscribers=o}(SE)),SE}var V5;function ED(){if(V5)return rp;V5=1,Object.defineProperty(rp,"__esModule",{value:!0}),rp.assertIsWebSocket=n,rp.resetGlobalState=r;var t=TD(),e=AD();function n(i,s){if(!s&&!(i instanceof WebSocket))throw new Error("")}function r(i){(0,e.resetSubscribers)(i),(0,t.resetWebSockets)(i)}return rp}var U5;function C9e(){if(U5)return rc;U5=1;var t=rc&&rc.__assign||function(){return t=Object.assign||function(f){for(var h,p=1,g=arguments.length;p<g;p++){h=arguments[p];for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(f[y]=h[y])}return f},t.apply(this,arguments)};Object.defineProperty(rc,"__esModule",{value:!0}),rc.attachListeners=void 0;var e=kD(),n=yee(),r=ga(),i=ED(),s=function(f,h,p,g){f.onmessage=function(y){var b;h.current.onMessage&&h.current.onMessage(y),typeof(g==null?void 0:g.current)=="number"&&(g.current=Date.now()),!(typeof h.current.filter=="function"&&h.current.filter(y)!==!0)&&(h.current.heartbeat&&typeof h.current.heartbeat!="boolean"&&((b=h.current.heartbeat)===null||b===void 0?void 0:b.returnMessage)===y.data||p(y))}},a=function(f,h,p,g,y){f.onopen=function(b){if(h.current.onOpen&&h.current.onOpen(b),g.current=0,p(r.ReadyState.OPEN),h.current.heartbeat&&f instanceof WebSocket){var v=typeof h.current.heartbeat=="boolean"?void 0:h.current.heartbeat;y.current=Date.now(),(0,n.heartbeat)(f,y,v)}}},o=function(f,h,p,g,y){if(r.isEventSourceSupported&&f instanceof EventSource)return function(){};(0,i.assertIsWebSocket)(f,h.current.skipAssert);var b;return f.onclose=function(v){var w;if(h.current.onClose&&h.current.onClose(v),p(r.ReadyState.CLOSED),h.current.shouldReconnect&&h.current.shouldReconnect(v)){var S=(w=h.current.reconnectAttempts)!==null&&w!==void 0?w:r.DEFAULT_RECONNECT_LIMIT;if(y.current<S){var T=typeof h.current.reconnectInterval=="function"?h.current.reconnectInterval(y.current):h.current.reconnectInterval;b=window.setTimeout(function(){y.current++,g()},T??r.DEFAULT_RECONNECT_INTERVAL_MS)}else h.current.onReconnectStop&&h.current.onReconnectStop(S),console.warn("Max reconnect attempts of ".concat(S," exceeded"))}},function(){return b&&window.clearTimeout(b)}},l=function(f,h,p,g,y){var b;return f.onerror=function(v){var w;if(h.current.onError&&h.current.onError(v),r.isEventSourceSupported&&f instanceof EventSource&&(h.current.onClose&&h.current.onClose(t(t({},v),{code:1006,reason:"An error occurred with the EventSource: ".concat(v),wasClean:!1})),p(r.ReadyState.CLOSED),f.close()),h.current.retryOnError)if(y.current<((w=h.current.reconnectAttempts)!==null&&w!==void 0?w:r.DEFAULT_RECONNECT_LIMIT)){var S=typeof h.current.reconnectInterval=="function"?h.current.reconnectInterval(y.current):h.current.reconnectInterval;b=window.setTimeout(function(){y.current++,g()},S??r.DEFAULT_RECONNECT_INTERVAL_MS)}else h.current.onReconnectStop&&h.current.onReconnectStop(h.current.reconnectAttempts),console.warn("Max reconnect attempts of ".concat(h.current.reconnectAttempts," exceeded"))},function(){return b&&window.clearTimeout(b)}},c=function(f,h,p,g,y,b,v){var w=h.setLastMessage,S=h.setReadyState,T,A,k;return p.current.fromSocketIO&&(T=(0,e.setUpSocketIOPing)(v)),s(f,p,w,b),a(f,p,S,y,b),A=o(f,p,S,g,y),k=l(f,p,S,g,y),function(){S(r.ReadyState.CLOSING),A(),k(),f.close(),T&&clearInterval(T)}};return rc.attachListeners=c,rc}var ic={},W5;function T9e(){if(W5)return ic;W5=1;var t=ic&&ic.__assign||function(){return t=Object.assign||function(h){for(var p,g=1,y=arguments.length;g<y;g++){p=arguments[g];for(var b in p)Object.prototype.hasOwnProperty.call(p,b)&&(h[b]=p[b])}return h},t.apply(this,arguments)};Object.defineProperty(ic,"__esModule",{value:!0}),ic.attachSharedListeners=void 0;var e=TD(),n=ga(),r=AD(),i=kD(),s=yee(),a=function(h,p,g){h.onmessage=function(y){(0,r.getSubscribers)(p).forEach(function(b){var v;b.optionsRef.current.onMessage&&b.optionsRef.current.onMessage(y),typeof((v=b==null?void 0:b.lastMessageTime)===null||v===void 0?void 0:v.current)=="number"&&(b.lastMessageTime.current=Date.now()),!(typeof b.optionsRef.current.filter=="function"&&b.optionsRef.current.filter(y)!==!0)&&(g&&typeof g!="boolean"&&(g==null?void 0:g.returnMessage)===y.data||b.setLastMessage(y))})}},o=function(h,p,g){h.onopen=function(y){var b=(0,r.getSubscribers)(p);b.forEach(function(v){v.reconnectCount.current=0,v.optionsRef.current.onOpen&&v.optionsRef.current.onOpen(y),v.setReadyState(n.ReadyState.OPEN),g&&h instanceof WebSocket&&(v.lastMessageTime.current=Date.now())}),g&&h instanceof WebSocket&&(0,s.heartbeat)(h,b.map(function(v){return v.lastMessageTime}),typeof g=="boolean"?void 0:g)}},l=function(h,p){h instanceof WebSocket&&(h.onclose=function(g){(0,r.getSubscribers)(p).forEach(function(y){y.optionsRef.current.onClose&&y.optionsRef.current.onClose(g),y.setReadyState(n.ReadyState.CLOSED)}),delete e.sharedWebSockets[p],(0,r.getSubscribers)(p).forEach(function(y){var b;if(y.optionsRef.current.shouldReconnect&&y.optionsRef.current.shouldReconnect(g)){var v=(b=y.optionsRef.current.reconnectAttempts)!==null&&b!==void 0?b:n.DEFAULT_RECONNECT_LIMIT;if(y.reconnectCount.current<v){var w=typeof y.optionsRef.current.reconnectInterval=="function"?y.optionsRef.current.reconnectInterval(y.reconnectCount.current):y.optionsRef.current.reconnectInterval;setTimeout(function(){y.reconnectCount.current++,y.reconnect.current()},w??n.DEFAULT_RECONNECT_INTERVAL_MS)}else y.optionsRef.current.onReconnectStop&&y.optionsRef.current.onReconnectStop(y.optionsRef.current.reconnectAttempts),console.warn("Max reconnect attempts of ".concat(v," exceeded"))}})})},c=function(h,p){h.onerror=function(g){(0,r.getSubscribers)(p).forEach(function(y){y.optionsRef.current.onError&&y.optionsRef.current.onError(g),n.isEventSourceSupported&&h instanceof EventSource&&(y.optionsRef.current.onClose&&y.optionsRef.current.onClose(t(t({},g),{code:1006,reason:"An error occurred with the EventSource: ".concat(g),wasClean:!1})),y.setReadyState(n.ReadyState.CLOSED))}),n.isEventSourceSupported&&h instanceof EventSource&&h.close()}},f=function(h,p,g,y){var b;return g.current.fromSocketIO&&(b=(0,i.setUpSocketIOPing)(y)),a(h,p,g.current.heartbeat),l(h,p),o(h,p,g.current.heartbeat),c(h,p),function(){b&&clearInterval(b)}};return ic.attachSharedListeners=f,ic}var G5;function k9e(){if(G5)return np;G5=1,Object.defineProperty(np,"__esModule",{value:!0}),np.createOrJoinSocket=void 0;var t=TD(),e=ga(),n=C9e(),r=T9e(),i=AD(),s=function(o,l,c,f,h){return function(){if((0,i.removeSubscriber)(o,l),!(0,i.hasSubscribers)(o)){try{var p=t.sharedWebSockets[o];p instanceof WebSocket&&(p.onclose=function(g){c.current.onClose&&c.current.onClose(g),f(e.ReadyState.CLOSED)}),p.close()}catch{}h&&h(),delete t.sharedWebSockets[o]}}},a=function(o,l,c,f,h,p,g,y,b){if(!e.isEventSourceSupported&&f.current.eventSourceOptions)throw e.isReactNative?new Error("EventSource is not supported in ReactNative"):new Error("EventSource is not supported");if(f.current.share){var v=null;t.sharedWebSockets[l]===void 0?(t.sharedWebSockets[l]=f.current.eventSourceOptions?new EventSource(l,f.current.eventSourceOptions):new WebSocket(l,f.current.protocols),o.current=t.sharedWebSockets[l],c(e.ReadyState.CONNECTING),v=(0,r.attachSharedListeners)(t.sharedWebSockets[l],l,f,b)):(o.current=t.sharedWebSockets[l],c(t.sharedWebSockets[l].readyState));var w={setLastMessage:h,setReadyState:c,optionsRef:f,reconnectCount:g,lastMessageTime:y,reconnect:p};return(0,i.addSubscriber)(l,w),s(l,w,f,c,v)}else{if(o.current=f.current.eventSourceOptions?new EventSource(l,f.current.eventSourceOptions):new WebSocket(l,f.current.protocols),c(e.ReadyState.CONNECTING),!o.current)throw new Error("WebSocket failed to be created");return(0,n.attachListeners)(o.current,{setLastMessage:h,setReadyState:c},f,p.current,g,y,b)}};return np.createOrJoinSocket=a,np}var Va={},q5;function A9e(){return q5||(q5=1,function(t){var e=Va&&Va.__awaiter||function(l,c,f,h){function p(g){return g instanceof f?g:new f(function(y){y(g)})}return new(f||(f=Promise))(function(g,y){function b(S){try{w(h.next(S))}catch(T){y(T)}}function v(S){try{w(h.throw(S))}catch(T){y(T)}}function w(S){S.done?g(S.value):p(S.value).then(b,v)}w((h=h.apply(l,c||[])).next())})},n=Va&&Va.__generator||function(l,c){var f={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},h,p,g,y=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return y.next=b(0),y.throw=b(1),y.return=b(2),typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function b(w){return function(S){return v([w,S])}}function v(w){if(h)throw new TypeError("Generator is already executing.");for(;y&&(y=0,w[0]&&(f=0)),f;)try{if(h=1,p&&(g=w[0]&2?p.return:w[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,w[1])).done)return g;switch(p=0,g&&(w=[w[0]&2,g.value]),w[0]){case 0:case 1:g=w;break;case 4:return f.label++,{value:w[1],done:!1};case 5:f.label++,p=w[1],w=[0];continue;case 7:w=f.ops.pop(),f.trys.pop();continue;default:if(g=f.trys,!(g=g.length>0&&g[g.length-1])&&(w[0]===6||w[0]===2)){f=0;continue}if(w[0]===3&&(!g||w[1]>g[0]&&w[1]<g[3])){f.label=w[1];break}if(w[0]===6&&f.label<g[1]){f.label=g[1],g=w;break}if(g&&f.label<g[2]){f.label=g[2],f.ops.push(w);break}g[2]&&f.ops.pop(),f.trys.pop();continue}w=c.call(l,f)}catch(S){w=[6,S],p=0}finally{h=g=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},r=Va&&Va.__spreadArray||function(l,c,f){if(f||arguments.length===2)for(var h=0,p=c.length,g;h<p;h++)(g||!(h in c))&&(g||(g=Array.prototype.slice.call(c,0,h)),g[h]=c[h]);return l.concat(g||Array.prototype.slice.call(c))};Object.defineProperty(t,"__esModule",{value:!0}),t.getUrl=void 0;var i=kD(),s=ga(),a=function(l){return new Promise(function(c){return window.setTimeout(c,l)})},o=function(l,c){for(var f=[],h=2;h<arguments.length;h++)f[h-2]=arguments[h];return e(void 0,r([l,c],f,!0),void 0,function(p,g,y){var b,v,w,S,T,A,k,E;return y===void 0&&(y=0),n(this,function(I){switch(I.label){case 0:if(typeof p!="function")return[3,10];I.label=1;case 1:return I.trys.push([1,3,,9]),[4,p()];case 2:return b=I.sent(),[3,9];case 3:return I.sent(),g.current.retryOnError?(v=(A=g.current.reconnectAttempts)!==null&&A!==void 0?A:s.DEFAULT_RECONNECT_LIMIT,y<v?(w=typeof g.current.reconnectInterval=="function"?g.current.reconnectInterval(y):g.current.reconnectInterval,[4,a(w??s.DEFAULT_RECONNECT_INTERVAL_MS)]):[3,5]):[3,7];case 4:return I.sent(),[2,(0,t.getUrl)(p,g,y+1)];case 5:return(E=(k=g.current).onReconnectStop)===null||E===void 0||E.call(k,y),[2,null];case 6:return[3,8];case 7:return[2,null];case 8:return[3,9];case 9:return[3,11];case 10:b=p,I.label=11;case 11:return S=g.current.fromSocketIO?(0,i.parseSocketIOUrl)(b):b,T=g.current.queryParams?(0,i.appendQueryParams)(S,g.current.queryParams):S,[2,T]}})})};t.getUrl=o}(Va)),Va}var CE={},H5;function E9e(){return H5||(H5=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.websocketWrapper=void 0;var e=function(n,r){return new Proxy(n,{get:function(i,s){var a=i[s];return s==="reconnect"?r:typeof a=="function"?(console.error("Calling methods directly on the websocket is not supported at this moment. You must use the methods returned by useWebSocket."),function(){}):a},set:function(i,s,a){return/^on/.test(s)?(console.warn("The websocket's event handlers should be defined through the options object passed into useWebSocket."),!1):(i[s]=a,!0)}})};t.websocketWrapper=e,t.default=t.websocketWrapper}(CE)),CE}var K5;function $D(){if(K5)return Ti;K5=1;var t=Ti&&Ti.__assign||function(){return t=Object.assign||function(p){for(var g,y=1,b=arguments.length;y<b;y++){g=arguments[y];for(var v in g)Object.prototype.hasOwnProperty.call(g,v)&&(p[v]=g[v])}return p},t.apply(this,arguments)},e=Ti&&Ti.__awaiter||function(p,g,y,b){function v(w){return w instanceof y?w:new y(function(S){S(w)})}return new(y||(y=Promise))(function(w,S){function T(E){try{k(b.next(E))}catch(I){S(I)}}function A(E){try{k(b.throw(E))}catch(I){S(I)}}function k(E){E.done?w(E.value):v(E.value).then(T,A)}k((b=b.apply(p,g||[])).next())})},n=Ti&&Ti.__generator||function(p,g){var y={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},b,v,w,S=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return S.next=T(0),S.throw=T(1),S.return=T(2),typeof Symbol=="function"&&(S[Symbol.iterator]=function(){return this}),S;function T(k){return function(E){return A([k,E])}}function A(k){if(b)throw new TypeError("Generator is already executing.");for(;S&&(S=0,k[0]&&(y=0)),y;)try{if(b=1,v&&(w=k[0]&2?v.return:k[0]?v.throw||((w=v.return)&&w.call(v),0):v.next)&&!(w=w.call(v,k[1])).done)return w;switch(v=0,w&&(k=[k[0]&2,w.value]),k[0]){case 0:case 1:w=k;break;case 4:return y.label++,{value:k[1],done:!1};case 5:y.label++,v=k[1],k=[0];continue;case 7:k=y.ops.pop(),y.trys.pop();continue;default:if(w=y.trys,!(w=w.length>0&&w[w.length-1])&&(k[0]===6||k[0]===2)){y=0;continue}if(k[0]===3&&(!w||k[1]>w[0]&&k[1]<w[3])){y.label=k[1];break}if(k[0]===6&&y.label<w[1]){y.label=w[1],w=k;break}if(w&&y.label<w[2]){y.label=w[2],y.ops.push(k);break}w[2]&&y.ops.pop(),y.trys.pop();continue}k=g.call(p,y)}catch(E){k=[6,E],v=0}finally{b=w=0}if(k[0]&5)throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}},r=Ti&&Ti.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.useWebSocket=void 0;var i=ah(),s=ZI(),a=ga(),o=k9e(),l=A9e(),c=r(E9e()),f=ED(),h=function(p,g,y){g===void 0&&(g=a.DEFAULT_OPTIONS),y===void 0&&(y=!0);var b=(0,i.useState)(null),v=b[0],w=b[1],S=(0,i.useState)({}),T=S[0],A=S[1],k=(0,i.useMemo)(function(){if(!g.disableJson&&v)try{return JSON.parse(v.data)}catch{return a.UNPARSABLE_JSON_OBJECT}return null},[v,g.disableJson]),E=(0,i.useRef)(null),I=(0,i.useRef)(null),N=(0,i.useRef)(function(){}),_=(0,i.useRef)(0),D=(0,i.useRef)(Date.now()),O=(0,i.useRef)([]),P=(0,i.useRef)(null),z=(0,i.useRef)(g);z.current=g;var W=E.current&&T[E.current]!==void 0?T[E.current]:p!==null&&y===!0?a.ReadyState.CONNECTING:a.ReadyState.UNINSTANTIATED,U=g.queryParams?JSON.stringify(g.queryParams):null,R=(0,i.useCallback)(function(K,L){var H;if(L===void 0&&(L=!0),a.isEventSourceSupported&&I.current instanceof EventSource){console.warn("Unable to send a message from an eventSource");return}((H=I.current)===null||H===void 0?void 0:H.readyState)===a.ReadyState.OPEN?((0,f.assertIsWebSocket)(I.current,z.current.skipAssert),I.current.send(K)):L&&O.current.push(K)},[]),F=(0,i.useCallback)(function(K,L){L===void 0&&(L=!0),R(JSON.stringify(K),L)},[R]),B=(0,i.useCallback)(function(){return z.current.share!==!0||a.isEventSourceSupported&&I.current instanceof EventSource?I.current:(P.current===null&&I.current&&((0,f.assertIsWebSocket)(I.current,z.current.skipAssert),P.current=(0,c.default)(I.current,N)),P.current)},[]);return(0,i.useEffect)(function(){if(p!==null&&y===!0){var K,L=!1,H=!0,X=function(){return e(void 0,void 0,void 0,function(){var Y,ie,pe;return n(this,function(ve){switch(ve.label){case 0:return Y=E,[4,(0,l.getUrl)(p,z)];case 1:return Y.current=ve.sent(),E.current===null?(console.error("Failed to get a valid URL. WebSocket connection aborted."),E.current="ABORTED",(0,s.flushSync)(function(){return A(function(ke){return t(t({},ke),{ABORTED:a.ReadyState.CLOSED})})}),[2]):(ie=function(ke){L||(0,s.flushSync)(function(){return w(ke)})},pe=function(ke){L||(0,s.flushSync)(function(){return A(function(Ee){var me;return t(t({},Ee),E.current&&(me={},me[E.current]=ke,me))})})},H&&(K=(0,o.createOrJoinSocket)(I,E.current,pe,z,ie,N,_,D,R)),[2])}})})};return N.current=function(){L||(P.current&&(P.current=null),K==null||K(),X())},X(),function(){L=!0,H=!1,P.current&&(P.current=null),K==null||K(),w(null)}}else(p===null||y===!1)&&(_.current=0,A(function(Y){var ie;return t(t({},Y),E.current&&(ie={},ie[E.current]=a.ReadyState.CLOSED,ie))}))},[p,y,U,R]),(0,i.useEffect)(function(){W===a.ReadyState.OPEN&&O.current.splice(0).forEach(function(K){R(K)})},[W]),{sendMessage:R,sendJsonMessage:F,lastMessage:v,lastJsonMessage:k,readyState:W,getWebSocket:B}};return Ti.useWebSocket=h,Ti}var sc={},X5;function $9e(){if(X5)return sc;X5=1;var t=sc&&sc.__assign||function(){return t=Object.assign||function(o){for(var l,c=1,f=arguments.length;c<f;c++){l=arguments[c];for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(o[h]=l[h])}return o},t.apply(this,arguments)};Object.defineProperty(sc,"__esModule",{value:!0}),sc.useSocketIO=void 0;var e=ah(),n=$D(),r=ga(),i={type:"empty",payload:null},s=function(o){if(!o||!o.data)return i;var l=o.data.match(/\[.*]/);if(!l)return i;var c=JSON.parse(l);return!Array.isArray(c)||!c[1]?i:{type:c[0],payload:c[1]}},a=function(o,l,c){l===void 0&&(l=r.DEFAULT_OPTIONS),c===void 0&&(c=!0);var f=(0,e.useMemo)(function(){return t(t({},l),{fromSocketIO:!0})},[]),h=(0,n.useWebSocket)(o,f,c),p=h.sendMessage,g=h.sendJsonMessage,y=h.lastMessage,b=h.readyState,v=h.getWebSocket,w=(0,e.useMemo)(function(){return s(y)},[y]);return{sendMessage:p,sendJsonMessage:g,lastMessage:w,lastJsonMessage:w,readyState:b,getWebSocket:v}};return sc.useSocketIO=a,sc}var Ua={},Y5;function I9e(){if(Y5)return Ua;Y5=1;var t=Ua&&Ua.__assign||function(){return t=Object.assign||function(a){for(var o,l=1,c=arguments.length;l<c;l++){o=arguments[l];for(var f in o)Object.prototype.hasOwnProperty.call(o,f)&&(a[f]=o[f])}return a},t.apply(this,arguments)},e=Ua&&Ua.__rest||function(a,o){var l={};for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&o.indexOf(c)<0&&(l[c]=a[c]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,c=Object.getOwnPropertySymbols(a);f<c.length;f++)o.indexOf(c[f])<0&&Object.prototype.propertyIsEnumerable.call(a,c[f])&&(l[c[f]]=a[c[f]]);return l};Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.useEventSource=void 0;var n=ah(),r=$D(),i=ga(),s=function(a,o,l){o===void 0&&(o=i.DEFAULT_EVENT_SOURCE_OPTIONS);var c=o.withCredentials,f=o.events,h=e(o,["withCredentials","events"]);l===void 0&&(l=!0);var p=t(t({},h),{eventSourceOptions:{withCredentials:c}}),g=(0,n.useRef)(i.EMPTY_EVENT_HANDLERS);f&&(g.current=f);var y=(0,r.useWebSocket)(a,p,l),b=y.lastMessage,v=y.readyState,w=y.getWebSocket;return(0,n.useEffect)(function(){b!=null&&b.type&&Object.entries(g.current).forEach(function(S){var T=S[0],A=S[1];T===b.type&&A(b)})},[b]),{lastEvent:b,readyState:v,getEventSource:w}};return Ua.useEventSource=s,Ua}var Z5;function N9e(){return Z5||(Z5=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.resetGlobalState=t.useEventSource=t.ReadyState=t.useSocketIO=t.default=void 0;var e=$D();Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.useWebSocket}});var n=$9e();Object.defineProperty(t,"useSocketIO",{enumerable:!0,get:function(){return n.useSocketIO}});var r=ga();Object.defineProperty(t,"ReadyState",{enumerable:!0,get:function(){return r.ReadyState}});var i=I9e();Object.defineProperty(t,"useEventSource",{enumerable:!0,get:function(){return i.useEventSource}});var s=ED();Object.defineProperty(t,"resetGlobalState",{enumerable:!0,get:function(){return s.resetGlobalState}})}(bE)),bE}var O9e=N9e();const _9e=Nt(O9e);function R9e(){const[t,e]=q.useState({globalThreats:1247853,globalSaved:4523e4,activeUsers:152847,viralCoefficient:1.3}),[n,r]=q.useState(!1),{lastMessage:i,connectionStatus:s}=_9e("wss://universal-sentinel-viral-api.workers.dev/live",{shouldReconnect:()=>!0,onOpen:()=>r(!0),onClose:()=>r(!1),onError:()=>r(!1)});q.useEffect(()=>{if(!n){const o=setInterval(()=>{e(l=>({globalThreats:l.globalThreats+Math.floor(Math.random()*5)+1,globalSaved:l.globalSaved+Math.floor(Math.random()*1e3)+100,activeUsers:l.activeUsers+Math.floor(Math.random()*10)-5,viralCoefficient:Math.max(1,l.viralCoefficient+(Math.random()-.5)*.1)}))},3e3);return()=>clearInterval(o)}},[n]),q.useEffect(()=>{if(i)try{const o=JSON.parse(i.data);e(o)}catch(o){console.log("WebSocket data parsing error:",o)}},[i]);const a=o=>o>=1e6?`${(o/1e6).toFixed(1)}M`:o>=1e3?`${(o/1e3).toFixed(0)}K`:o.toString();return V.jsxs(vr.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-gradient-to-r from-purple-600 to-blue-600 p-6 rounded-xl shadow-2xl",children:[V.jsxs("div",{className:"flex items-center justify-between mb-4",children:[V.jsx("h3",{className:"text-2xl font-bold text-white",children:"🌍 Global Protection Network"}),V.jsxs("div",{className:"flex items-center space-x-2",children:[V.jsx(vr.div,{className:`w-3 h-3 rounded-full ${n?"bg-green-400":"bg-yellow-400"}`,animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:2}}),V.jsx("span",{className:"text-white/70 text-sm",children:n?"LIVE":"SIMULATED"})]})]}),V.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[V.jsxs(vr.div,{animate:{scale:[1,1.05,1]},transition:{repeat:1/0,duration:2},className:"text-center bg-white/10 rounded-lg p-3",children:[V.jsx("div",{className:"text-2xl md:text-3xl font-bold text-white",children:a(t.globalThreats)}),V.jsx("div",{className:"text-xs md:text-sm text-white/70",children:"Threats Blocked"}),V.jsxs("div",{className:"text-xs text-green-300 mt-1",children:["+",Math.floor(Math.random()*50)+10," today"]})]}),V.jsxs(vr.div,{animate:{scale:[1,1.05,1]},transition:{repeat:1/0,duration:2,delay:.5},className:"text-center bg-white/10 rounded-lg p-3",children:[V.jsxs("div",{className:"text-2xl md:text-3xl font-bold text-green-300",children:["$",a(t.globalSaved)]}),V.jsx("div",{className:"text-xs md:text-sm text-white/70",children:"Money Saved"}),V.jsxs("div",{className:"text-xs text-green-300 mt-1",children:["+$",a(Math.floor(Math.random()*1e4)+1e3)," today"]})]}),V.jsxs(vr.div,{animate:{scale:[1,1.05,1]},transition:{repeat:1/0,duration:2,delay:1},className:"text-center bg-white/10 rounded-lg p-3",children:[V.jsx("div",{className:"text-2xl md:text-3xl font-bold text-yellow-300",children:a(t.activeUsers)}),V.jsx("div",{className:"text-xs md:text-sm text-white/70",children:"Active Users"}),V.jsxs("div",{className:"text-xs text-yellow-300 mt-1",children:["+",Math.floor(Math.random()*100)+50," online"]})]}),V.jsxs(vr.div,{animate:{scale:[1,1.05,1]},transition:{repeat:1/0,duration:2,delay:1.5},className:"text-center bg-white/10 rounded-lg p-3",children:[V.jsx("div",{className:"text-2xl md:text-3xl font-bold text-pink-300",children:t.viralCoefficient.toFixed(1)}),V.jsx("div",{className:"text-xs md:text-sm text-white/70",children:"Viral K-Factor"}),V.jsx("div",{className:"text-xs text-pink-300 mt-1",children:t.viralCoefficient>1?"📈 Growing":"📊 Stable"})]})]}),V.jsx(vr.div,{className:"mt-4 text-center",animate:{opacity:[.5,1,.5]},transition:{repeat:1/0,duration:2},children:V.jsxs("span",{className:"text-green-400 text-sm flex items-center justify-center space-x-2",children:[V.jsx("span",{children:"●"}),V.jsx("span",{children:n?"LIVE - Updating in real-time":"DEMO - Simulated real-time data"})]})}),V.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-2 text-center text-xs text-white/60",children:[V.jsxs("div",{children:[V.jsx("div",{className:"font-semibold text-white",children:"47"}),V.jsx("div",{children:"Countries"})]}),V.jsxs("div",{children:[V.jsx("div",{className:"font-semibold text-white",children:"1,247"}),V.jsx("div",{children:"Cities"})]}),V.jsxs("div",{children:[V.jsx("div",{className:"font-semibold text-white",children:"89%"}),V.jsx("div",{children:"Success Rate"})]})]})]})}function D9e({userMetrics:t={}}){var W,U;const[e,n]=q.useState("auto"),[r,i]=q.useState([]),[s,a]=q.useState({type:"standard",age:25}),[o,l]=q.useState(!0),[c,f]=q.useState(!1),[h,p]=q.useState({snnLatency:.3,annAccuracy:94.2,hybridPerformance:97.4,threatsBlocked:1247,moneySaved:45230,childrenProtected:89,scamsPrevented:342,emergencyResponses:12,communityReports:3421,protectedDevices:1247,totalDetections:15847}),g=q.useRef(null),y=q.useRef(null),b=q.useRef(null),v=q.useRef(null),[w,S]=q.useState({ram:0,cpu:0,battery:100,modelsLoaded:0,deviceProfile:"unknown"});q.useEffect(()=>{g.current=new bTe,y.current=new xTe,b.current=new wTe,T();const R=setInterval(E,2e3),F=setInterval(O,5e3);return()=>{clearInterval(R),clearInterval(F)}},[]);const T=async()=>{try{const R=new $8e;await R.initialize(),v.current=R;const F=setInterval(async()=>{if(R.resourceMonitor){const B=await R.resourceMonitor.check(),K=R.getProtectionStats();S({ram:B.ram.current,cpu:B.cpu.current,battery:B.battery.level,modelsLoaded:K.modelsLoaded,deviceProfile:K.deviceProfile})}},1e3);return()=>clearInterval(F)}catch(R){console.error("Failed to initialize mobile engine:",R)}},A=[{id:"child",name:"Child Safety",icon:V.jsx(Foe,{className:"w-6 h-6"}),color:"from-pink-500 to-rose-500",features:["Content Filter","Grooming Detection","Parental Alerts","Screen Time Monitor"],stats:{protected:h.childrenProtected,blocked:234}},{id:"financial",name:"Financial Guard Pro",icon:V.jsx(GF,{className:"w-6 h-6"}),color:"from-green-500 to-emerald-500",features:["Mobile-Optimized SNN Detection (0.3ms)","Advanced Phishing Protection","Real-time Transaction Monitor","Continuous Learning AI","Investment Scam Detection","Romance Scam Prevention"],stats:{protected:`$${h.moneySaved.toLocaleString()}`,blocked:h.scamsPrevented,accuracy:((W=b.current)==null?void 0:W.getProtectionStats().accuracy)||.942,responseTime:((U=b.current)==null?void 0:U.getProtectionStats().responseTime)||.3}},{id:"social",name:"Social Shield",icon:V.jsx(Xoe,{className:"w-6 h-6"}),color:"from-blue-500 to-cyan-500",features:["Manipulation Detection","Dating Safety","Harassment Block","Privacy Guard"],stats:{protected:567,blocked:123}},{id:"health",name:"Health Sentinel",icon:V.jsx(_oe,{className:"w-6 h-6"}),color:"from-purple-500 to-violet-500",features:["Misinformation Filter","Crisis Detection","Wellness Monitor","Medical Verification"],stats:{protected:892,blocked:67}}],k=[{name:"Emergency Services",number:"911",type:"emergency"},{name:"Crisis Hotline",number:"988",type:"crisis"},{name:"Child Safety",number:"1-800-THE-LOST",type:"child"},{name:"Fraud Reporting",number:"1-877-FTC-HELP",type:"financial"}];async function E(){if(!(!o||!g.current||!y.current))try{const R=[{type:"conversation",content:I("conversation")},{type:"transaction",content:I("transaction")},{type:"browsing",content:I("browsing")},{type:"social_media",content:I("social_media")}];for(const F of R){const B=await g.current.detectThreat(F.content,s,F);if(B.threatDetected&&B.confidence>.7){const K=await y.current.classifyThreat(F.content,B,F);K.confidence>.8&&N({...K,snnResult:B,context:F.type,timestamp:Date.now()})}}}catch(R){console.error("Monitoring error:",R)}}function I(R){const F={conversation:["Hey, you seem really mature for your age. Want to chat privately?","I can help you make money fast, just send me your bank details","You look amazing in your photos. Where do you go to school?","This is urgent! Your account will be closed unless you verify now!"],transaction:["URGENT: Your account has been compromised. Click here to verify.","Congratulations! You have won $10,000. Pay processing fee to claim.","IRS Notice: You owe back taxes. Pay immediately to avoid arrest.","Your grandson is in jail and needs bail money right now!"],browsing:["Download this miracle cure that doctors do not want you to know about","Free antivirus scan detected 47 viruses on your computer","Single moms in your area want to meet you tonight","This one weird trick will make you rich overnight"],social_media:["Share this post or something bad will happen to your family","This vaccine contains microchips to control your mind","The government is hiding the truth about this pandemic","Like and share to save this dying child"]},B=F[R]||F.conversation;return B[Math.floor(Math.random()*B.length)]}function N(R){const F={id:crypto.randomUUID(),...R,severity:_(R),blocked:!0,timestamp:Date.now()};(F.emergency||F.severity==="emergency")&&(f(!0),console.log("EMERGENCY DETECTED:",F)),i(B=>[F,...B.slice(0,49)]),D(F)}function _(R){return R.emergency?"emergency":R.confidence>.9?"critical":R.confidence>.8?"high":R.confidence>.6?"medium":"low"}function D(R){p(F=>({...F,threatsBlocked:F.threatsBlocked+1,totalDetections:F.totalDetections+1,...R.category==="financial_protection"&&{scamsPrevented:F.scamsPrevented+1,moneySaved:F.moneySaved+Math.floor(Math.random()*1e3)+100},...R.category==="content_safety"&&{childrenProtected:F.childrenProtected+(Math.random()>.8?1:0)},...R.emergency&&{emergencyResponses:F.emergencyResponses+1}}))}function O(){p(R=>({...R,snnLatency:Math.max(.2,Math.min(1.2,R.snnLatency+(Math.random()-.5)*.1)),annAccuracy:Math.max(90,Math.min(99,R.annAccuracy+(Math.random()-.5)*.5)),hybridPerformance:Math.max(95,Math.min(99.5,R.hybridPerformance+(Math.random()-.5)*.2))}))}const P=[{time:"00:00",detected:12,blocked:11},{time:"04:00",detected:8,blocked:8},{time:"08:00",detected:25,blocked:23},{time:"12:00",detected:34,blocked:32},{time:"16:00",detected:28,blocked:26},{time:"20:00",detected:19,blocked:18}],z=[{name:"Children Protected",value:h.childrenProtected,color:"#ec4899"},{name:"Scams Prevented",value:h.scamsPrevented,color:"#10b981"},{name:"Money Saved",value:`$${(h.moneySaved/1e3).toFixed(0)}K`,color:"#3b82f6"},{name:"Emergency Responses",value:h.emergencyResponses,color:"#f59e0b"}];return V.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white",children:[V.jsx(w0,{children:c&&V.jsx(vr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-red-900/90 backdrop-blur z-50 flex items-center justify-center",children:V.jsx(vr.div,{initial:{scale:.8},animate:{scale:1},className:"bg-red-800 p-8 rounded-xl border border-red-600 max-w-md mx-4",children:V.jsxs("div",{className:"text-center",children:[V.jsx(HC,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),V.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Emergency Detected"}),V.jsx("p",{className:"mb-6",children:"Critical threat requiring immediate attention"}),V.jsx("div",{className:"space-y-3 mb-6",children:k.map(R=>V.jsxs("button",{className:"w-full p-3 bg-red-700 hover:bg-red-600 rounded-lg flex items-center justify-between",children:[V.jsx("span",{children:R.name}),V.jsx("span",{className:"font-mono",children:R.number})]},R.number))}),V.jsx("button",{onClick:()=>f(!1),className:"w-full px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg",children:"Acknowledge"})]})})})}),V.jsx("header",{className:"border-b border-gray-700 bg-gray-800/50 backdrop-blur sticky top-0 z-40",children:V.jsx("div",{className:"container mx-auto px-6 py-4",children:V.jsxs("div",{className:"flex items-center justify-between",children:[V.jsxs("div",{className:"flex items-center space-x-4",children:[V.jsx(vr.div,{animate:{rotate:o?360:0},transition:{duration:2,repeat:o?1/0:0,ease:"linear"},children:V.jsx(qF,{className:"w-8 h-8 text-green-400"})}),V.jsxs("div",{children:[V.jsx("h1",{className:"text-2xl font-bold",children:"Universal Sentinel"}),V.jsx("p",{className:"text-sm text-gray-400",children:"AI-Powered Protection Platform"})]})]}),V.jsxs("div",{className:"flex items-center space-x-6",children:[V.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[V.jsxs("div",{className:"flex items-center space-x-2",children:[V.jsx("div",{className:`w-2 h-2 rounded-full ${o?"bg-green-400 animate-pulse":"bg-gray-400"}`}),V.jsxs("span",{children:["SNN: ",h.snnLatency.toFixed(1),"ms"]})]}),V.jsxs("div",{className:"flex items-center space-x-2",children:[V.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),V.jsxs("span",{children:["ANN: ",h.annAccuracy.toFixed(1),"%"]})]}),V.jsxs("div",{className:"flex items-center space-x-2",children:[V.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-pulse"}),V.jsxs("span",{children:["Hybrid: ",h.hybridPerformance.toFixed(1),"%"]})]})]}),V.jsxs("div",{className:"flex items-center space-x-2",children:[V.jsxs(zle,{variant:o?"destructive":"default",size:"sm",onClick:()=>l(!o),className:"flex items-center space-x-2",children:[o?V.jsx(zoe,{className:"w-4 h-4"}):V.jsx(Woe,{className:"w-4 h-4"}),V.jsx("span",{children:o?"Pause":"Resume"})]}),V.jsx(zd,{variant:o?"default":"secondary",children:o?"MONITORING":"PAUSED"})]})]})]})})}),V.jsx("div",{className:"container mx-auto px-6 py-8",children:V.jsxs(Ece,{defaultValue:"dashboard",className:"space-y-6",children:[V.jsxs($ce,{className:"grid w-full grid-cols-5 bg-gray-800/50",children:[V.jsx(jd,{value:"dashboard",children:"Dashboard"}),V.jsx(jd,{value:"protection",children:"Protection Modes"}),V.jsx(jd,{value:"threats",children:"Threat Analysis"}),V.jsx(jd,{value:"analytics",children:"Analytics"}),V.jsx(jd,{value:"emergency",children:"Emergency"})]}),V.jsxs(Vd,{value:"dashboard",className:"space-y-6",children:[V.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[V.jsxs(Ma,{className:"bg-gray-800/50 border-gray-700",children:[V.jsxs(Pa,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[V.jsx(La,{className:"text-sm font-medium",children:"Threats Blocked"}),V.jsx(qF,{className:"h-4 w-4 text-green-400"})]}),V.jsxs(Fa,{children:[V.jsx("div",{className:"text-2xl font-bold text-green-400",children:h.threatsBlocked.toLocaleString()}),V.jsx("p",{className:"text-xs text-gray-400",children:"+12% from last hour"})]})]}),V.jsxs(Ma,{className:"bg-gray-800/50 border-gray-700",children:[V.jsxs(Pa,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[V.jsx(La,{className:"text-sm font-medium",children:"Money Saved"}),V.jsx(GF,{className:"h-4 w-4 text-green-400"})]}),V.jsxs(Fa,{children:[V.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["$",h.moneySaved.toLocaleString()]}),V.jsx("p",{className:"text-xs text-gray-400",children:"From prevented scams"})]})]}),V.jsxs(Ma,{className:"bg-gray-800/50 border-gray-700",children:[V.jsxs(Pa,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[V.jsx(La,{className:"text-sm font-medium",children:"Protected Devices"}),V.jsx(Poe,{className:"h-4 w-4 text-blue-400"})]}),V.jsxs(Fa,{children:[V.jsx("div",{className:"text-2xl font-bold text-blue-400",children:h.protectedDevices.toLocaleString()}),V.jsx("p",{className:"text-xs text-gray-400",children:"Across all networks"})]})]}),V.jsxs(Ma,{className:"bg-gray-800/50 border-gray-700",children:[V.jsxs(Pa,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[V.jsx(La,{className:"text-sm font-medium",children:"Response Time"}),V.jsx(Zoe,{className:"h-4 w-4 text-yellow-400"})]}),V.jsxs(Fa,{children:[V.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:[h.snnLatency.toFixed(1),"ms"]}),V.jsx("p",{className:"text-xs text-gray-400",children:"Average detection time"})]})]})]}),V.jsx(R9e,{}),V.jsx(S9e,{metrics:{threatsBlocked:t.threatsBlocked||h.threatsBlocked,moneySaved:t.moneySaved||h.moneySaved,protectionStreak:t.protectionStreak||7}}),V.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[V.jsxs(Ma,{className:"bg-gray-800/50 border-gray-700",children:[V.jsx(Pa,{children:V.jsxs(La,{className:"flex items-center space-x-2",children:[V.jsx(Noe,{className:"w-5 h-5 text-blue-400"}),V.jsx("span",{children:"Real-time Threat Detection"})]})}),V.jsx(Fa,{children:V.jsx(cpe,{width:"100%",height:300,children:V.jsxs(vTe,{data:P,children:[V.jsx(a9,{strokeDasharray:"3 3",stroke:"#374151"}),V.jsx(Dx,{dataKey:"time",stroke:"#9CA3AF"}),V.jsx(Mx,{stroke:"#9CA3AF"}),V.jsx(Us,{contentStyle:{backgroundColor:"#1F2937",border:"1px solid #374151",borderRadius:"8px"}}),V.jsx(oo,{type:"monotone",dataKey:"detected",stackId:"1",stroke:"#EF4444",fill:"#EF4444",fillOpacity:.3,name:"Detected"}),V.jsx(oo,{type:"monotone",dataKey:"blocked",stackId:"2",stroke:"#10B981",fill:"#10B981",fillOpacity:.6,name:"Blocked"})]})})})]}),V.jsxs(Ma,{className:"bg-gray-800/50 border-gray-700",children:[V.jsx(Pa,{children:V.jsxs(La,{className:"flex items-center space-x-2",children:[V.jsx(HF,{className:"w-5 h-5 text-green-400"}),V.jsx("span",{children:"Protection Impact"})]})}),V.jsxs(Fa,{children:[V.jsx("div",{className:"space-y-4",children:z.map((R,F)=>V.jsxs("div",{className:"flex items-center justify-between",children:[V.jsx("span",{className:"text-sm text-gray-300",children:R.name}),V.jsxs("div",{className:"flex items-center space-x-2",children:[V.jsx("span",{className:"font-semibold",style:{color:R.color},children:R.value}),V.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:R.color}})]})]},F))}),V.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-700",children:[V.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Overall Protection Rate"}),V.jsx(Zle,{value:h.hybridPerformance,className:"h-2"}),V.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[h.hybridPerformance.toFixed(1),"% effectiveness"]})]})]})]})]}),V.jsxs(Ma,{className:"bg-gray-800/50 border-gray-700",children:[V.jsx(Pa,{children:V.jsxs(La,{className:"flex items-center justify-between",children:[V.jsxs("div",{className:"flex items-center space-x-2",children:[V.jsx(HC,{className:"w-5 h-5 text-yellow-400"}),V.jsx("span",{children:"Recent Threat Activity"})]}),V.jsxs(zd,{variant:"outline",children:[r.length," Active"]})]})}),V.jsx(Fa,{children:V.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[V.jsx(w0,{children:r.slice(0,10).map(R=>{var F,B;return V.jsx(vr.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:`
                          p-4 rounded-lg border
                          ${R.severity==="emergency"?"bg-red-900/20 border-red-500":R.severity==="critical"?"bg-red-900/10 border-red-600":R.severity==="high"?"bg-yellow-900/20 border-yellow-500":"bg-blue-900/20 border-blue-500"}
                        `,children:V.jsxs("div",{className:"flex items-start justify-between",children:[V.jsxs("div",{className:"flex-1",children:[V.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[V.jsx("span",{className:"font-medium",children:((F=R.primaryThreat)==null?void 0:F.threatType)||"Unknown Threat"}),V.jsx(zd,{variant:R.blocked?"default":"destructive",className:"text-xs",children:R.blocked?"Blocked":"Active"}),R.emergency&&V.jsx(zd,{variant:"destructive",className:"text-xs animate-pulse",children:"Emergency"})]}),V.jsxs("div",{className:"text-sm text-gray-400 mb-2",children:["Context: ",R.context," | Domain: ",R.category]}),V.jsxs("div",{className:"text-xs text-gray-500",children:["SNN: ",(((B=R.snnResult)==null?void 0:B.confidence)*100||0).toFixed(1),"% | ANN: ",(R.confidence*100).toFixed(1),"%"]})]}),V.jsx("div",{className:"text-xs text-gray-500 ml-4",children:new Date(R.timestamp).toLocaleTimeString()})]})},R.id)})}),r.length===0&&V.jsxs("div",{className:"text-center py-8 text-gray-500",children:[V.jsx(WF,{className:"w-12 h-12 mx-auto mb-4 text-green-400"}),V.jsx("p",{children:"No threats detected. System operating normally."})]})]})})]})]}),V.jsx(Vd,{value:"protection",className:"space-y-6",children:V.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:A.map(R=>V.jsxs(vr.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:`
                    relative overflow-hidden rounded-xl cursor-pointer
                    bg-gradient-to-br ${R.color} p-6
                    ${e===R.id?"ring-4 ring-white/50":""}
                  `,onClick:()=>n(R.id),children:[V.jsxs("div",{className:"flex items-start justify-between mb-4",children:[V.jsx("div",{className:"p-3 bg-white/20 rounded-lg",children:R.icon}),e===R.id&&V.jsx(zd,{className:"bg-white/30 text-white border-white/50",children:"Active"})]}),V.jsx("h3",{className:"text-xl font-semibold mb-2",children:R.name}),V.jsx("div",{className:"space-y-2 mb-4",children:R.features.map(F=>V.jsxs("div",{className:"text-sm opacity-90 flex items-center",children:[V.jsx(WF,{className:"w-3 h-3 mr-2"}),F]},F))}),V.jsxs("div",{className:"space-y-2 text-sm",children:[V.jsxs("div",{className:"flex items-center justify-between",children:[V.jsxs("span",{children:["Protected: ",R.stats.protected]}),V.jsxs("span",{children:["Blocked: ",R.stats.blocked]})]}),R.id==="financial"&&V.jsxs("div",{className:"flex items-center justify-between text-xs opacity-90",children:[V.jsxs("span",{children:["Accuracy: ",((R.stats.accuracy||.942)*100).toFixed(1),"%"]}),V.jsxs("span",{children:["Response: ",(R.stats.responseTime||.3).toFixed(1),"ms"]})]})]})]},R.id))})}),V.jsx(Vd,{value:"threats",children:V.jsxs("div",{className:"text-center py-12",children:[V.jsx(HC,{className:"w-16 h-16 mx-auto mb-4 text-yellow-400"}),V.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Threat Analysis"}),V.jsx("p",{className:"text-gray-400",children:"Advanced threat analysis dashboard coming soon..."})]})}),V.jsx(Vd,{value:"analytics",children:V.jsxs("div",{className:"text-center py-12",children:[V.jsx(HF,{className:"w-16 h-16 mx-auto mb-4 text-blue-400"}),V.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Analytics Dashboard"}),V.jsx("p",{className:"text-gray-400",children:"Comprehensive analytics and reporting coming soon..."})]})}),V.jsx(Vd,{value:"emergency",children:V.jsxs("div",{className:"space-y-6",children:[V.jsxs(Ma,{className:"bg-red-900/20 border-red-600",children:[V.jsx(Pa,{children:V.jsxs(La,{className:"flex items-center space-x-2 text-red-400",children:[V.jsx(Voe,{className:"w-5 h-5"}),V.jsx("span",{children:"Emergency Contacts"})]})}),V.jsx(Fa,{children:V.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:k.map(R=>V.jsxs("button",{className:"p-4 bg-red-800/30 hover:bg-red-800/50 rounded-lg border border-red-600 flex items-center justify-between transition-colors",children:[V.jsxs("div",{className:"text-left",children:[V.jsx("div",{className:"font-medium",children:R.name}),V.jsx("div",{className:"text-sm text-gray-400",children:R.type})]}),V.jsx("div",{className:"font-mono text-lg",children:R.number})]},R.number))})})]}),V.jsxs(Ma,{className:"bg-gray-800/50 border-gray-700",children:[V.jsx(Pa,{children:V.jsx(La,{children:"Emergency Response Statistics"})}),V.jsx(Fa,{children:V.jsxs("div",{className:"text-center py-8",children:[V.jsx("div",{className:"text-4xl font-bold text-red-400 mb-2",children:h.emergencyResponses}),V.jsx("p",{className:"text-gray-400",children:"Emergency responses this month"})]})})]})]})})]})})]})}var TE,Q5;function M9e(){if(Q5)return TE;Q5=1;var t={linear:function(e,n,r,i){var s=r-n;return s*e/i+n},easeInQuad:function(e,n,r,i){var s=r-n;return s*(e/=i)*e+n},easeOutQuad:function(e,n,r,i){var s=r-n;return-s*(e/=i)*(e-2)+n},easeInOutQuad:function(e,n,r,i){var s=r-n;return(e/=i/2)<1?s/2*e*e+n:-s/2*(--e*(e-2)-1)+n},easeInCubic:function(e,n,r,i){var s=r-n;return s*(e/=i)*e*e+n},easeOutCubic:function(e,n,r,i){var s=r-n;return s*((e=e/i-1)*e*e+1)+n},easeInOutCubic:function(e,n,r,i){var s=r-n;return(e/=i/2)<1?s/2*e*e*e+n:s/2*((e-=2)*e*e+2)+n},easeInQuart:function(e,n,r,i){var s=r-n;return s*(e/=i)*e*e*e+n},easeOutQuart:function(e,n,r,i){var s=r-n;return-s*((e=e/i-1)*e*e*e-1)+n},easeInOutQuart:function(e,n,r,i){var s=r-n;return(e/=i/2)<1?s/2*e*e*e*e+n:-s/2*((e-=2)*e*e*e-2)+n},easeInQuint:function(e,n,r,i){var s=r-n;return s*(e/=i)*e*e*e*e+n},easeOutQuint:function(e,n,r,i){var s=r-n;return s*((e=e/i-1)*e*e*e*e+1)+n},easeInOutQuint:function(e,n,r,i){var s=r-n;return(e/=i/2)<1?s/2*e*e*e*e*e+n:s/2*((e-=2)*e*e*e*e+2)+n},easeInSine:function(e,n,r,i){var s=r-n;return-s*Math.cos(e/i*(Math.PI/2))+s+n},easeOutSine:function(e,n,r,i){var s=r-n;return s*Math.sin(e/i*(Math.PI/2))+n},easeInOutSine:function(e,n,r,i){var s=r-n;return-s/2*(Math.cos(Math.PI*e/i)-1)+n},easeInExpo:function(e,n,r,i){var s=r-n;return e==0?n:s*Math.pow(2,10*(e/i-1))+n},easeOutExpo:function(e,n,r,i){var s=r-n;return e==i?n+s:s*(-Math.pow(2,-10*e/i)+1)+n},easeInOutExpo:function(e,n,r,i){var s=r-n;return e===0?n:e===i?n+s:(e/=i/2)<1?s/2*Math.pow(2,10*(e-1))+n:s/2*(-Math.pow(2,-10*--e)+2)+n},easeInCirc:function(e,n,r,i){var s=r-n;return-s*(Math.sqrt(1-(e/=i)*e)-1)+n},easeOutCirc:function(e,n,r,i){var s=r-n;return s*Math.sqrt(1-(e=e/i-1)*e)+n},easeInOutCirc:function(e,n,r,i){var s=r-n;return(e/=i/2)<1?-s/2*(Math.sqrt(1-e*e)-1)+n:s/2*(Math.sqrt(1-(e-=2)*e)+1)+n},easeInElastic:function(e,n,r,i){var s=r-n,a,o,l;return l=1.70158,o=0,a=s,e===0?n:(e/=i)===1?n+s:(o||(o=i*.3),a<Math.abs(s)?(a=s,l=o/4):l=o/(2*Math.PI)*Math.asin(s/a),-(a*Math.pow(2,10*(e-=1))*Math.sin((e*i-l)*(2*Math.PI)/o))+n)},easeOutElastic:function(e,n,r,i){var s=r-n,a,o,l;return l=1.70158,o=0,a=s,e===0?n:(e/=i)===1?n+s:(o||(o=i*.3),a<Math.abs(s)?(a=s,l=o/4):l=o/(2*Math.PI)*Math.asin(s/a),a*Math.pow(2,-10*e)*Math.sin((e*i-l)*(2*Math.PI)/o)+s+n)},easeInOutElastic:function(e,n,r,i){var s=r-n,a,o,l;return l=1.70158,o=0,a=s,e===0?n:(e/=i/2)===2?n+s:(o||(o=i*(.3*1.5)),a<Math.abs(s)?(a=s,l=o/4):l=o/(2*Math.PI)*Math.asin(s/a),e<1?-.5*(a*Math.pow(2,10*(e-=1))*Math.sin((e*i-l)*(2*Math.PI)/o))+n:a*Math.pow(2,-10*(e-=1))*Math.sin((e*i-l)*(2*Math.PI)/o)*.5+s+n)},easeInBack:function(e,n,r,i,s){var a=r-n;return s===void 0&&(s=1.70158),a*(e/=i)*e*((s+1)*e-s)+n},easeOutBack:function(e,n,r,i,s){var a=r-n;return s===void 0&&(s=1.70158),a*((e=e/i-1)*e*((s+1)*e+s)+1)+n},easeInOutBack:function(e,n,r,i,s){var a=r-n;return s===void 0&&(s=1.70158),(e/=i/2)<1?a/2*(e*e*(((s*=1.525)+1)*e-s))+n:a/2*((e-=2)*e*(((s*=1.525)+1)*e+s)+2)+n},easeInBounce:function(e,n,r,i){var s=r-n,a;return a=t.easeOutBounce(i-e,0,s,i),s-a+n},easeOutBounce:function(e,n,r,i){var s=r-n;return(e/=i)<1/2.75?s*(7.5625*e*e)+n:e<2/2.75?s*(7.5625*(e-=1.5/2.75)*e+.75)+n:e<2.5/2.75?s*(7.5625*(e-=2.25/2.75)*e+.9375)+n:s*(7.5625*(e-=2.625/2.75)*e+.984375)+n},easeInOutBounce:function(e,n,r,i){var s=r-n,a;return e<i/2?(a=t.easeInBounce(e*2,0,s,i),a*.5+n):(a=t.easeOutBounce(e*2-i,0,s,i),a*.5+s*.5+n)}};return TE=t,TE}var P9e=M9e();function L9e(t){return t*Math.PI/180}function ki(t,e){return t+Math.random()*(e-t)}function F9e(t,e){return Math.floor(t+Math.random()*(e-t+1))}var Ap;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(Ap||(Ap={}));var Xo;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(Xo||(Xo={}));const B9e=1e3/60;class z9e{constructor(e,n,r,i){this.getOptions=n;const{colors:s,initialVelocityX:a,initialVelocityY:o}=this.getOptions();this.context=e,this.x=r,this.y=i,this.w=ki(5,20),this.h=ki(5,20),this.radius=ki(5,10),this.vx=typeof a=="number"?ki(-a,a):ki(a.min,a.max),this.vy=typeof o=="number"?ki(-o,0):ki(o.min,o.max),this.shape=F9e(0,2),this.angle=L9e(ki(0,360)),this.angularSpin=ki(-.2,.2),this.color=s[Math.floor(Math.random()*s.length)],this.rotateY=ki(0,1),this.rotationDirection=ki(0,1)?Xo.Positive:Xo.Negative}update(e){const{gravity:n,wind:r,friction:i,opacity:s,drawShape:a}=this.getOptions(),o=e/B9e;this.x+=this.vx*o,this.y+=this.vy*o,this.vy+=n*o,this.vx+=r*o,this.vx*=i**o,this.vy*=i**o,this.rotateY>=1&&this.rotationDirection===Xo.Positive?this.rotationDirection=Xo.Negative:this.rotateY<=-1&&this.rotationDirection===Xo.Negative&&(this.rotationDirection=Xo.Positive);const l=.1*this.rotationDirection*o;if(this.rotateY+=l,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=s,this.context.lineCap="round",this.context.lineWidth=2,a&&typeof a=="function")a.call(this,this.context);else switch(this.shape){case Ap.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case Ap.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case Ap.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class j9e{constructor(e,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=i=>{this.particles.splice(i,1)},this.getParticle=()=>{const i=ki(this.x,this.w+this.x),s=ki(this.y,this.h+this.y);return new z9e(this.context,this.getOptions,i,s)},this.animate=i=>{const{canvas:s,context:a,particlesGenerated:o,lastNumberOfPieces:l}=this,{run:c,recycle:f,numberOfPieces:h,debug:p,tweenFunction:g,tweenDuration:y}=this.getOptions();if(!c)return!1;const b=this.particles.length,v=f?b:o;if(v<h){l!==h&&(this.tweenProgress=0,this.tweenFrom=v,this.lastNumberOfPieces=h),this.tweenProgress=Math.min(y,Math.max(0,this.tweenProgress+i));const w=g(this.tweenProgress,this.tweenFrom,h,y),S=Math.round(w-v);for(let T=0;T<S;T++)this.particles.push(this.getParticle());this.particlesGenerated+=S}p&&(a.font="12px sans-serif",a.fillStyle="#333",a.textAlign="right",a.fillText(`Particles: ${b}`,s.width-10,s.height-20));for(let w=this.particles.length-1;w>=0;w--){const S=this.particles[w];S.update(i),(S.y>s.height||S.y<-100||S.x>s.width+100||S.x<-100)&&(f&&v<=h?this.particles[w]=this.getParticle():this.removeParticleAt(w))}return b>0||v<h},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=n}}const ID={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:P9e.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class V9e{constructor(e,n){this.lastFrameTime=0,this.setOptionsWithDefaults=i=>{const s={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...s,...ID,...i},Object.assign(this,i.confettiSource)},this.update=(i=0)=>{const{options:{run:s,onConfettiComplete:a,frameRate:o},canvas:l,context:c}=this,f=Math.min(i-this.lastFrameTime,50);if(o&&f<1e3/o){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=i-(o?f%o:0),s&&(c.fillStyle="white",c.clearRect(0,0,l.width,l.height)),this.generator.animate(f)?this.rafId=requestAnimationFrame(this.update):(a&&typeof a=="function"&&this.generator.particlesGenerated>0&&a.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new j9e(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(e){var i,s;const n=(i=this._options)==null?void 0:i.run,r=(s=this._options)==null?void 0:s.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&n===!1&&this.update()}}const U9e=J.createRef();class ND extends J.Component{constructor(e){super(e),this.canvas=J.createRef(),this.canvas=e.canvasRef||U9e}componentDidMount(){if(this.canvas.current){const e=kE(this.props)[0];this.confetti=new V9e(this.canvas.current,e)}}componentDidUpdate(){const e=kE(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,n]=kE(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return V.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...n,style:r})}}ND.defaultProps={...ID};ND.displayName="ReactConfetti";function kE(t){const e={},n={},r={},i=[...Object.keys(ID),"confettiSource","drawShape","onConfettiComplete","frameRate"],s=["canvasRef"];for(const a in t){const o=t[a];i.includes(a)?e[a]=o:s.includes(a)?s[a]=o:r[a]=o}return[e,r,n]}const W9e=J.forwardRef((t,e)=>V.jsx(ND,{canvasRef:e,...t}));function G9e(){const[t,e]=q.useState(!0),[n,r]=q.useState({totalReferrals:0,premiumDaysEarned:0,nextReward:"7 days premium"});q.useEffect(()=>{const o=new URLSearchParams(window.location.search).get("ref");o&&(localStorage.setItem("referral_source",o),mf.success("🎁 Welcome! You get 7 days free premium protection!"),window.history.replaceState({},document.title,window.location.pathname))},[]);const i=()=>{const a=localStorage.getItem("user_id")||"user_"+Date.now();localStorage.setItem("user_id",a);const o=a.substring(0,3).toUpperCase()+Math.random().toString(36).substring(2,6).toUpperCase(),l=`${window.location.origin}?ref=${o}`;return navigator.clipboard.writeText(l),mf.success("🔗 Referral link copied! Share to earn premium days!"),l},s=a=>{const o=i(),l=`🛡️ Join me on Universal Sentinel! Get AI-powered protection from online threats. We both get premium features when you sign up: ${o}`,c={twitter:`https://twitter.com/intent/tweet?text=${encodeURIComponent(l)}`,facebook:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(o)}&quote=${encodeURIComponent(l)}`,whatsapp:`https://wa.me/?text=${encodeURIComponent(l)}`,email:`mailto:?subject=Universal Sentinel - AI Protection&body=${encodeURIComponent(l)}`};c[a]&&window.open(c[a],"_blank","width=600,height=400")};return t?V.jsx(w0,{children:V.jsxs(vr.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"bg-gradient-to-r from-green-500 to-blue-500 text-white p-4 relative overflow-hidden",children:[V.jsx("div",{className:"absolute inset-0 opacity-10",children:V.jsx("div",{className:"absolute inset-0 bg-repeat",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),V.jsxs("div",{className:"container mx-auto flex flex-col md:flex-row items-center justify-between relative z-10",children:[V.jsxs("div",{className:"flex items-center space-x-4 mb-4 md:mb-0",children:[V.jsx(vr.div,{animate:{rotate:360},transition:{duration:3,repeat:1/0,ease:"linear"},className:"text-2xl",children:"🎁"}),V.jsxs("div",{children:[V.jsx("h3",{className:"font-bold text-lg",children:"Refer Friends, Earn Premium!"}),V.jsx("p",{className:"text-sm opacity-90",children:"Share Universal Sentinel and get premium features for every friend who joins"})]})]}),V.jsxs("div",{className:"flex items-center space-x-3",children:[V.jsxs("div",{className:"text-center mr-4",children:[V.jsx("div",{className:"text-2xl font-bold",children:n.totalReferrals}),V.jsx("div",{className:"text-xs opacity-75",children:"Referrals"})]}),V.jsxs("div",{className:"flex space-x-2",children:[V.jsxs("button",{onClick:()=>s("twitter"),className:"bg-white/20 hover:bg-white/30 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-1",children:[V.jsx("span",{children:"🐦"}),V.jsx("span",{className:"hidden md:inline",children:"Twitter"})]}),V.jsxs("button",{onClick:()=>s("whatsapp"),className:"bg-white/20 hover:bg-white/30 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-1",children:[V.jsx("span",{children:"💬"}),V.jsx("span",{className:"hidden md:inline",children:"WhatsApp"})]}),V.jsxs("button",{onClick:i,className:"bg-white/20 hover:bg-white/30 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-1",children:[V.jsx("span",{children:"📋"}),V.jsx("span",{className:"hidden md:inline",children:"Copy Link"})]})]}),V.jsx("button",{onClick:()=>e(!1),className:"ml-2 text-white/70 hover:text-white text-xl",children:"×"})]})]}),V.jsx("div",{className:"mt-3 bg-white/20 rounded-full h-2 overflow-hidden",children:V.jsx(vr.div,{className:"bg-white h-full rounded-full",initial:{width:0},animate:{width:`${n.totalReferrals%5*20}%`},transition:{duration:1}})}),V.jsxs("div",{className:"text-xs mt-1 text-center opacity-75",children:[5-n.totalReferrals%5," more referrals to unlock ",n.nextReward]})]})}):null}function q9e(){const[t,e]=q.useState(!1),[n,r]=q.useState({threatsBlocked:47,moneySaved:2450,protectionStreak:7});return q.useEffect(()=>{localStorage.getItem("referral_source")&&!localStorage.getItem("welcome_shown")&&(e(!0),In.success("🎉 Welcome to Universal Sentinel! 7 days premium activated!"),localStorage.setItem("welcome_shown","true"),setTimeout(()=>e(!1),5e3)),n.protectionStreak===7&&In.success("🏆 7-Day Protection Streak! Share to unlock more premium features!");const s=setInterval(()=>{r(a=>({threatsBlocked:a.threatsBlocked+Math.floor(Math.random()*3),moneySaved:a.moneySaved+Math.floor(Math.random()*100),protectionStreak:a.protectionStreak}))},3e4);return()=>clearInterval(s)},[n.protectionStreak]),V.jsxs(V.Fragment,{children:[V.jsx(w9e,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#1f2937",color:"#fff",border:"1px solid #3b82f6"}}}),t&&V.jsx(W9e,{width:window.innerWidth,height:window.innerHeight,recycle:!1,numberOfPieces:200}),V.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900",children:[V.jsx(G9e,{}),V.jsx(D9e,{userMetrics:n})]})]})}zne.createRoot(document.getElementById("root")).render(V.jsx(q.StrictMode,{children:V.jsx(q9e,{})}));
